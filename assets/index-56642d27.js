(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();const _n={};function F_(r){_n.context=r}const O_=(r,e)=>r===e,B_=Symbol("solid-track"),Uc={equals:O_};let zi=null,_b=Eb;const bi=1,Vc=2,Sb={owned:null,cleanups:null,context:null,owner:null},v0={};var Jt=null;let Ss=null,an=null,Dn=null,gi=null,Pf=0;function Lc(r,e){const t=an,n=Jt,i=r.length===0,s=i?Sb:{owned:null,cleanups:null,context:null,owner:e||n},o=i?r:()=>r(()=>Hr(()=>fu(s)));Jt=s,an=null;try{return Xi(o,!0)}finally{an=t,Jt=n}}function Ar(r,e){e=e?Object.assign({},Uc,e):Uc;const t={value:r,observers:null,observerSlots:null,comparator:e.equals||void 0},n=i=>(typeof i=="function"&&(i=i(t.value)),Mb(t,i));return[Cb.bind(t),n]}function Rp(r,e,t){const n=hu(r,e,!0,bi);Ko(n)}function Xh(r,e,t){const n=hu(r,e,!1,bi);Ko(n)}function ds(r,e,t){_b=H_;const n=hu(r,e,!1,bi);n.user=!0,gi?gi.push(n):Ko(n)}function Bt(r,e,t){t=t?Object.assign({},Uc,t):Uc;const n=hu(r,e,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=t.equals||void 0,Ko(n),Cb.bind(n)}function N_(r,e,t){let n,i,s;arguments.length===2&&typeof e=="object"||arguments.length===1?(n=!0,i=r,s=e||{}):(n=r,i=e,s=t||{});let o=null,a=v0,c=null,u=!1,f="initialValue"in s,d=typeof n=="function"&&Bt(n);const m=new Set,[v,S]=(s.storage||Ar)(s.initialValue),[x,w]=Ar(void 0),[A,T]=Ar(void 0,{equals:!1}),[E,P]=Ar(f?"ready":"unresolved");if(_n.context){c=`${_n.context.id}${_n.context.count++}`;let R;s.ssrLoadFrom==="initial"?a=s.initialValue:_n.load&&(R=_n.load(c))&&(a=R[0])}function y(R,O,z,Q){return o===R&&(o=null,f=!0,(R===a||O===a)&&s.onHydrated&&queueMicrotask(()=>s.onHydrated(Q,{value:O})),a=v0,k(O,z)),O}function k(R,O){Xi(()=>{O||S(()=>R),P(O?"errored":"ready"),w(O);for(const z of m.keys())z.decrement();m.clear()},!1)}function F(){const R=z_,O=v(),z=x();if(z&&!o)throw z;return an&&!an.user&&R&&Rp(()=>{A(),o&&(R.resolved||m.has(R)||(R.increment(),m.add(R)))}),O}function M(R=!0){if(R!==!1&&u)return;u=!1;const O=d?d():n;if(O==null||O===!1){y(o,Hr(v));return}const z=a!==v0?a:Hr(()=>i(O,{value:v(),refetching:R}));return typeof z!="object"||!(z&&"then"in z)?(y(o,z,void 0,O),z):(o=z,u=!0,queueMicrotask(()=>u=!1),Xi(()=>{P(f?"refreshing":"pending"),T()},!1),z.then(Q=>y(z,Q,void 0,O),Q=>y(z,void 0,Pb(Q),O)))}return Object.defineProperties(F,{state:{get:()=>E()},error:{get:()=>x()},loading:{get(){const R=E();return R==="pending"||R==="refreshing"}},latest:{get(){if(!f)return F();const R=x();if(R&&!o)throw R;return v()}}}),d?Rp(()=>M(!1)):M(!1),[F,{refetch:M,mutate:S}]}function kp(r){return Xi(r,!1)}function Hr(r){const e=an;an=null;try{return r()}finally{an=e}}function U_(r,e,t){const n=Array.isArray(r);let i,s=t&&t.defer;return o=>{let a;if(n){a=Array(r.length);for(let u=0;u<r.length;u++)a[u]=r[u]()}else a=r();if(s){s=!1;return}const c=Hr(()=>e(a,i,o));return i=a,c}}function V_(r){ds(()=>Hr(r))}function xl(r){return Jt===null||(Jt.cleanups===null?Jt.cleanups=[r]:Jt.cleanups.push(r)),r}function Fp(r){zi||(zi=Symbol("error")),Jt===null||(Jt.context===null?Jt.context={[zi]:[r]}:Jt.context[zi]?Jt.context[zi].push(r):Jt.context[zi]=[r])}let z_;function Cb(){const r=Ss;if(this.sources&&(this.state||r))if(this.state===bi||r)Ko(this);else{const e=Dn;Dn=null,Xi(()=>$c(this),!1),Dn=e}if(an){const e=this.observers?this.observers.length:0;an.sources?(an.sources.push(this),an.sourceSlots.push(e)):(an.sources=[this],an.sourceSlots=[e]),this.observers?(this.observers.push(an),this.observerSlots.push(an.sources.length-1)):(this.observers=[an],this.observerSlots=[an.sources.length-1])}return this.value}function Mb(r,e,t){let n=r.value;return(!r.comparator||!r.comparator(n,e))&&(r.value=e,r.observers&&r.observers.length&&Xi(()=>{for(let i=0;i<r.observers.length;i+=1){const s=r.observers[i],o=Ss&&Ss.running;o&&Ss.disposed.has(s),(o&&!s.tState||!o&&!s.state)&&(s.pure?Dn.push(s):gi.push(s),s.observers&&Ab(s)),o||(s.state=bi)}if(Dn.length>1e6)throw Dn=[],new Error},!1)),e}function Ko(r){if(!r.fn)return;fu(r);const e=Jt,t=an,n=Pf;an=Jt=r,$_(r,r.value,n),an=t,Jt=e}function $_(r,e,t){let n;try{n=r.fn(e)}catch(i){r.pure&&(r.state=bi,r.owned&&r.owned.forEach(fu),r.owned=null),Tb(i)}(!r.updatedAt||r.updatedAt<=t)&&(r.updatedAt!=null&&"observers"in r?Mb(r,n):r.value=n,r.updatedAt=t)}function hu(r,e,t,n=bi,i){const s={fn:r,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:Jt,context:null,pure:t};return Jt===null||Jt!==Sb&&(Jt.owned?Jt.owned.push(s):Jt.owned=[s]),s}function zc(r){const e=Ss;if(r.state===0||e)return;if(r.state===Vc||e)return $c(r);if(r.suspense&&Hr(r.suspense.inFallback))return r.suspense.effects.push(r);const t=[r];for(;(r=r.owner)&&(!r.updatedAt||r.updatedAt<Pf);)(r.state||e)&&t.push(r);for(let n=t.length-1;n>=0;n--)if(r=t[n],r.state===bi||e)Ko(r);else if(r.state===Vc||e){const i=Dn;Dn=null,Xi(()=>$c(r,t[0]),!1),Dn=i}}function Xi(r,e){if(Dn)return r();let t=!1;e||(Dn=[]),gi?t=!0:gi=[],Pf++;try{const n=r();return G_(t),n}catch(n){Dn||(gi=null),Tb(n)}}function G_(r){if(Dn&&(Eb(Dn),Dn=null),r)return;const e=gi;gi=null,e.length&&Xi(()=>_b(e),!1)}function Eb(r){for(let e=0;e<r.length;e++)zc(r[e])}function H_(r){let e,t=0;for(e=0;e<r.length;e++){const n=r[e];n.user?r[t++]=n:zc(n)}for(_n.context&&F_(),e=0;e<t;e++)zc(r[e])}function $c(r,e){const t=Ss;r.state=0;for(let n=0;n<r.sources.length;n+=1){const i=r.sources[n];i.sources&&(i.state===bi||t?i!==e&&zc(i):(i.state===Vc||t)&&$c(i,e))}}function Ab(r){const e=Ss;for(let t=0;t<r.observers.length;t+=1){const n=r.observers[t];(!n.state||e)&&(n.state=Vc,n.pure?Dn.push(n):gi.push(n),n.observers&&Ab(n))}}function fu(r){let e;if(r.sources)for(;r.sources.length;){const t=r.sources.pop(),n=r.sourceSlots.pop(),i=t.observers;if(i&&i.length){const s=i.pop(),o=t.observerSlots.pop();n<i.length&&(s.sourceSlots[o]=n,i[n]=s,t.observerSlots[n]=o)}}if(r.owned){for(e=0;e<r.owned.length;e++)fu(r.owned[e]);r.owned=null}if(r.cleanups){for(e=0;e<r.cleanups.length;e++)r.cleanups[e]();r.cleanups=null}r.state=0,r.context=null}function Pb(r){return r instanceof Error||typeof r=="string"?r:new Error("Unknown error")}function Tb(r){r=Pb(r);const e=zi&&Lb(Jt,zi);if(!e)throw r;for(const t of e)t(r)}function Lb(r,e){return r?r.context&&r.context[e]!==void 0?r.context[e]:Lb(r.owner,e):void 0}const W_=Symbol("fallback");function Op(r){for(let e=0;e<r.length;e++)r[e]()}function q_(r,e,t={}){let n=[],i=[],s=[],o=0,a=e.length>1?[]:null;return xl(()=>Op(s)),()=>{let c=r()||[],u,f;return c[B_],Hr(()=>{let m=c.length,v,S,x,w,A,T,E,P,y;if(m===0)o!==0&&(Op(s),s=[],n=[],i=[],o=0,a&&(a=[])),t.fallback&&(n=[W_],i[0]=Lc(k=>(s[0]=k,t.fallback())),o=1);else if(o===0){for(i=new Array(m),f=0;f<m;f++)n[f]=c[f],i[f]=Lc(d);o=m}else{for(x=new Array(m),w=new Array(m),a&&(A=new Array(m)),T=0,E=Math.min(o,m);T<E&&n[T]===c[T];T++);for(E=o-1,P=m-1;E>=T&&P>=T&&n[E]===c[P];E--,P--)x[P]=i[E],w[P]=s[E],a&&(A[P]=a[E]);for(v=new Map,S=new Array(P+1),f=P;f>=T;f--)y=c[f],u=v.get(y),S[f]=u===void 0?-1:u,v.set(y,f);for(u=T;u<=E;u++)y=n[u],f=v.get(y),f!==void 0&&f!==-1?(x[f]=i[u],w[f]=s[u],a&&(A[f]=a[u]),f=S[f],v.set(y,f)):s[u]();for(f=T;f<m;f++)f in x?(i[f]=x[f],s[f]=w[f],a&&(a[f]=A[f],a[f](f))):i[f]=Lc(d);i=i.slice(0,o=m),n=c.slice(0)}return i});function d(m){if(s[f]=m,a){const[v,S]=Ar(f);return a[f]=S,e(c[f],v)}return e(c[f])}}}function Ic(r,e){return Hr(()=>r(e||{}))}function X_(r){let e=!1;const t=r.keyed,n=Bt(()=>r.when,void 0,{equals:(i,s)=>e?i===s:!i==!s});return Bt(()=>{const i=n();if(i){const s=r.children,o=typeof s=="function"&&s.length>0;return e=t||o,o?Hr(()=>s(i)):s}return r.fallback},void 0,void 0)}let Ol;function Y_(r){let e,t;_n.context&&_n.load&&(t=_n.load(_n.context.id+_n.context.count))&&(e=t[0]);const[n,i]=Ar(e,void 0);return Ol||(Ol=new Set),Ol.add(i),xl(()=>Ol.delete(i)),Bt(()=>{let s;if(s=n()){const o=r.fallback,a=typeof o=="function"&&o.length?Hr(()=>o(s,()=>i())):o;return Fp(i),a}return Fp(i),r.children},void 0,void 0)}function j_(r,e,t){let n=t.length,i=e.length,s=n,o=0,a=0,c=e[i-1].nextSibling,u=null;for(;o<i||a<s;){if(e[o]===t[a]){o++,a++;continue}for(;e[i-1]===t[s-1];)i--,s--;if(i===o){const f=s<n?a?t[a-1].nextSibling:t[s-a]:c;for(;a<s;)r.insertBefore(t[a++],f)}else if(s===a)for(;o<i;)(!u||!u.has(e[o]))&&e[o].remove(),o++;else if(e[o]===t[s-1]&&t[a]===e[i-1]){const f=e[--i].nextSibling;r.insertBefore(t[a++],e[o++].nextSibling),r.insertBefore(t[--s],f),e[i]=t[s]}else{if(!u){u=new Map;let d=a;for(;d<s;)u.set(t[d],d++)}const f=u.get(e[o]);if(f!=null)if(a<f&&f<s){let d=o,m=1,v;for(;++d<i&&d<s&&!((v=u.get(e[d]))==null||v!==f+m);)m++;if(m>f-a){const S=e[o];for(;a<f;)r.insertBefore(t[a++],S)}else r.replaceChild(t[a++],e[o++])}else o++;else e[o++].remove()}}}function Z_(r,e,t,n={}){let i;return Lc(s=>{i=s,e===document?r():Ib(e,r(),e.firstChild?null:void 0,t)},n.owner),()=>{i(),e.textContent=""}}function K_(r,e,t){const n=document.createElement("template");n.innerHTML=r;let i=n.content.firstChild;return t&&(i=i.firstChild),i}function Ib(r,e,t,n){if(t!==void 0&&!n&&(n=[]),typeof e!="function")return Gc(r,e,n,t);Xh(i=>Gc(r,e(),i,t),n)}function Gc(r,e,t,n,i){for(_n.context&&!t&&(t=[...r.childNodes]);typeof t=="function";)t=t();if(e===t)return t;const s=typeof e,o=n!==void 0;if(r=o&&t[0]&&t[0].parentNode||r,s==="string"||s==="number"){if(_n.context)return t;if(s==="number"&&(e=e.toString()),o){let a=t[0];a&&a.nodeType===3?a.data=e:a=document.createTextNode(e),t=eo(r,t,n,a)}else t!==""&&typeof t=="string"?t=r.firstChild.data=e:t=r.textContent=e}else if(e==null||s==="boolean"){if(_n.context)return t;t=eo(r,t,n)}else{if(s==="function")return Xh(()=>{let a=e();for(;typeof a=="function";)a=a();t=Gc(r,a,t,n)}),()=>t;if(Array.isArray(e)){const a=[],c=t&&Array.isArray(t);if(Yh(a,e,t,i))return Xh(()=>t=Gc(r,a,t,n,!0)),()=>t;if(_n.context){if(!a.length)return t;for(let u=0;u<a.length;u++)if(a[u].parentNode)return t=a}if(a.length===0){if(t=eo(r,t,n),o)return t}else c?t.length===0?Bp(r,a,n):j_(r,t,a):(t&&eo(r),Bp(r,a));t=a}else if(e instanceof Node){if(_n.context&&e.parentNode)return t=o?[e]:e;if(Array.isArray(t)){if(o)return t=eo(r,t,n,e);eo(r,t,null,e)}else t==null||t===""||!r.firstChild?r.appendChild(e):r.replaceChild(e,r.firstChild);t=e}}return t}function Yh(r,e,t,n){let i=!1;for(let s=0,o=e.length;s<o;s++){let a=e[s],c=t&&t[s];if(a instanceof Node)r.push(a);else if(!(a==null||a===!0||a===!1))if(Array.isArray(a))i=Yh(r,a,c)||i;else if(typeof a=="function")if(n){for(;typeof a=="function";)a=a();i=Yh(r,Array.isArray(a)?a:[a],Array.isArray(c)?c:[c])||i}else r.push(a),i=!0;else{const u=String(a);c&&c.nodeType===3&&c.data===u?r.push(c):r.push(document.createTextNode(u))}}return i}function Bp(r,e,t=null){for(let n=0,i=e.length;n<i;n++)r.insertBefore(e[n],t)}function eo(r,e,t,n){if(t===void 0)return r.textContent="";const i=n||document.createTextNode("");if(e.length){let s=!1;for(let o=e.length-1;o>=0;o--){const a=e[o];if(i!==a){const c=a.parentNode===r;!s&&!o?c?r.replaceChild(i,a):r.insertBefore(i,t):c&&a.remove()}else s=!0}}else r.insertBefore(i,t);return[i]}function Tf(r,e,t){const[n,i]=Ar(e),s={value:e},o=r.addInput(s,"value",t);return o.on("change",c=>{i(()=>c.value)}),[n,c=>{i(()=>c),s.value=c,o.refresh()}]}function xn(r,e,t,n,i,s){return Tf(r,i,{min:e,max:t,step:n,label:s})}const J_=Math.PI,nl=Math.PI/2,Np=Math.PI/3;/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Lf="148",to={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},no={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Q_=0,Up=1,e4=2,Db=1,t4=2,$a=3,Ts=0,vr=1,If=2,Bl=3,Hi=0,Oo=1,Vp=2,zp=3,$p=4,n4=5,Ao=100,r4=101,i4=102,Gp=103,Hp=104,s4=200,o4=201,a4=202,l4=203,Rb=204,kb=205,c4=206,u4=207,h4=208,f4=209,d4=210,p4=0,m4=1,g4=2,jh=3,v4=4,b4=5,x4=6,w4=7,Df=0,y4=1,_4=2,vi=0,S4=1,C4=2,M4=3,E4=4,A4=5,Fb=300,Vo=301,zo=302,Zh=303,Kh=304,du=306,Jh=1e3,Mr=1001,Qh=1002,Gn=1003,Wp=1004,b0=1005,gr=1006,P4=1007,rl=1008,Ls=1009,T4=1010,L4=1011,Ob=1012,I4=1013,gs=1014,vs=1015,il=1016,D4=1017,R4=1018,Bo=1020,k4=1021,F4=1022,Er=1023,O4=1024,B4=1025,Cs=1026,$o=1027,N4=1028,U4=1029,V4=1030,z4=1031,$4=1033,x0=33776,w0=33777,y0=33778,_0=33779,qp=35840,Xp=35841,Yp=35842,jp=35843,G4=36196,Zp=37492,Kp=37496,Jp=37808,Qp=37809,em=37810,tm=37811,nm=37812,rm=37813,im=37814,sm=37815,om=37816,am=37817,lm=37818,cm=37819,um=37820,hm=37821,fm=36492,Is=3e3,Vt=3001,H4=3200,W4=3201,Rf=0,q4=1,Fr="srgb",sl="srgb-linear",S0=7680,X4=519,dm=35044,pm="300 es",ef=1035;class Bs{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const Ln=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],C0=Math.PI/180,mm=180/Math.PI;function Jo(){const r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Ln[r&255]+Ln[r>>8&255]+Ln[r>>16&255]+Ln[r>>24&255]+"-"+Ln[e&255]+Ln[e>>8&255]+"-"+Ln[e>>16&15|64]+Ln[e>>24&255]+"-"+Ln[t&63|128]+Ln[t>>8&255]+"-"+Ln[t>>16&255]+Ln[t>>24&255]+Ln[n&255]+Ln[n>>8&255]+Ln[n>>16&255]+Ln[n>>24&255]).toLowerCase()}function In(r,e,t){return Math.max(e,Math.min(t,r))}function Y4(r,e){return(r%e+e)%e}function M0(r,e,t){return(1-t)*r+t*e}function gm(r){return(r&r-1)===0&&r!==0}function tf(r){return Math.pow(2,Math.floor(Math.log(r)/Math.LN2))}function Nl(r,e){switch(e.constructor){case Float32Array:return r;case Uint16Array:return r/65535;case Uint8Array:return r/255;case Int16Array:return Math.max(r/32767,-1);case Int8Array:return Math.max(r/127,-1);default:throw new Error("Invalid component type.")}}function er(r,e){switch(e.constructor){case Float32Array:return r;case Uint16Array:return Math.round(r*65535);case Uint8Array:return Math.round(r*255);case Int16Array:return Math.round(r*32767);case Int8Array:return Math.round(r*127);default:throw new Error("Invalid component type.")}}class Ne{constructor(e=0,t=0){Ne.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*n-o*i+e.x,this.y=s*i+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class or{constructor(){or.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,n,i,s,o,a,c,u){const f=this.elements;return f[0]=e,f[1]=i,f[2]=a,f[3]=t,f[4]=s,f[5]=c,f[6]=n,f[7]=o,f[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,s=this.elements,o=n[0],a=n[3],c=n[6],u=n[1],f=n[4],d=n[7],m=n[2],v=n[5],S=n[8],x=i[0],w=i[3],A=i[6],T=i[1],E=i[4],P=i[7],y=i[2],k=i[5],F=i[8];return s[0]=o*x+a*T+c*y,s[3]=o*w+a*E+c*k,s[6]=o*A+a*P+c*F,s[1]=u*x+f*T+d*y,s[4]=u*w+f*E+d*k,s[7]=u*A+f*P+d*F,s[2]=m*x+v*T+S*y,s[5]=m*w+v*E+S*k,s[8]=m*A+v*P+S*F,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],c=e[6],u=e[7],f=e[8];return t*o*f-t*a*u-n*s*f+n*a*c+i*s*u-i*o*c}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],c=e[6],u=e[7],f=e[8],d=f*o-a*u,m=a*c-f*s,v=u*s-o*c,S=t*d+n*m+i*v;if(S===0)return this.set(0,0,0,0,0,0,0,0,0);const x=1/S;return e[0]=d*x,e[1]=(i*u-f*n)*x,e[2]=(a*n-i*o)*x,e[3]=m*x,e[4]=(f*t-i*c)*x,e[5]=(i*s-a*t)*x,e[6]=v*x,e[7]=(n*c-u*t)*x,e[8]=(o*t-n*s)*x,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,s,o,a){const c=Math.cos(s),u=Math.sin(s);return this.set(n*c,n*u,-n*(c*o+u*a)+o+e,-i*u,i*c,-i*(-u*o+c*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(E0.makeScale(e,t)),this}rotate(e){return this.premultiply(E0.makeRotation(-e)),this}translate(e,t){return this.premultiply(E0.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const E0=new or;function Bb(r){for(let e=r.length-1;e>=0;--e)if(r[e]>=65535)return!0;return!1}function Hc(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}function Ms(r){return r<.04045?r*.0773993808:Math.pow(r*.9478672986+.0521327014,2.4)}function Dc(r){return r<.0031308?r*12.92:1.055*Math.pow(r,.41666)-.055}const A0={[Fr]:{[sl]:Ms},[sl]:{[Fr]:Dc}},Nn={legacyMode:!0,get workingColorSpace(){return sl},set workingColorSpace(r){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(r,e,t){if(this.legacyMode||e===t||!e||!t)return r;if(A0[e]&&A0[e][t]!==void 0){const n=A0[e][t];return r.r=n(r.r),r.g=n(r.g),r.b=n(r.b),r}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(r,e){return this.convert(r,this.workingColorSpace,e)},toWorkingColorSpace:function(r,e){return this.convert(r,e,this.workingColorSpace)}},Nb={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},fn={r:0,g:0,b:0},wr={h:0,s:0,l:0},Ul={h:0,s:0,l:0};function P0(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*6*(2/3-t):r}function Vl(r,e){return e.r=r.r,e.g=r.g,e.b=r.b,e}class Dt{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&n===void 0?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Fr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Nn.toWorkingColorSpace(this,t),this}setRGB(e,t,n,i=Nn.workingColorSpace){return this.r=e,this.g=t,this.b=n,Nn.toWorkingColorSpace(this,i),this}setHSL(e,t,n,i=Nn.workingColorSpace){if(e=Y4(e,1),t=In(t,0,1),n=In(n,0,1),t===0)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+t):n+t-n*t,o=2*n-s;this.r=P0(o,s,e+1/3),this.g=P0(o,s,e),this.b=P0(o,s,e-1/3)}return Nn.toWorkingColorSpace(this,i),this}setStyle(e,t=Fr){function n(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,Nn.toWorkingColorSpace(this,t),n(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,Nn.toWorkingColorSpace(this,t),n(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const c=parseFloat(s[1])/360,u=parseFloat(s[2])/100,f=parseFloat(s[3])/100;return n(s[4]),this.setHSL(c,u,f,t)}break}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,Nn.toWorkingColorSpace(this,t),this;if(o===6)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,Nn.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=Fr){const n=Nb[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Ms(e.r),this.g=Ms(e.g),this.b=Ms(e.b),this}copyLinearToSRGB(e){return this.r=Dc(e.r),this.g=Dc(e.g),this.b=Dc(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Fr){return Nn.fromWorkingColorSpace(Vl(this,fn),e),In(fn.r*255,0,255)<<16^In(fn.g*255,0,255)<<8^In(fn.b*255,0,255)<<0}getHexString(e=Fr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Nn.workingColorSpace){Nn.fromWorkingColorSpace(Vl(this,fn),t);const n=fn.r,i=fn.g,s=fn.b,o=Math.max(n,i,s),a=Math.min(n,i,s);let c,u;const f=(a+o)/2;if(a===o)c=0,u=0;else{const d=o-a;switch(u=f<=.5?d/(o+a):d/(2-o-a),o){case n:c=(i-s)/d+(i<s?6:0);break;case i:c=(s-n)/d+2;break;case s:c=(n-i)/d+4;break}c/=6}return e.h=c,e.s=u,e.l=f,e}getRGB(e,t=Nn.workingColorSpace){return Nn.fromWorkingColorSpace(Vl(this,fn),t),e.r=fn.r,e.g=fn.g,e.b=fn.b,e}getStyle(e=Fr){return Nn.fromWorkingColorSpace(Vl(this,fn),e),e!==Fr?`color(${e} ${fn.r} ${fn.g} ${fn.b})`:`rgb(${fn.r*255|0},${fn.g*255|0},${fn.b*255|0})`}offsetHSL(e,t,n){return this.getHSL(wr),wr.h+=e,wr.s+=t,wr.l+=n,this.setHSL(wr.h,wr.s,wr.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(wr),e.getHSL(Ul);const n=M0(wr.h,Ul.h,t),i=M0(wr.s,Ul.s,t),s=M0(wr.l,Ul.l,t);return this.setHSL(n,i,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}Dt.NAMES=Nb;let ro;class Ub{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{ro===void 0&&(ro=Hc("canvas")),ro.width=e.width,ro.height=e.height;const n=ro.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=ro}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Hc("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=Ms(s[o]/255)*255;return n.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(Ms(t[n]/255)*255):t[n]=Ms(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class Vb{constructor(e=null){this.isSource=!0,this.uuid=Jo(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(T0(i[o].image)):s.push(T0(i[o]))}else s=T0(i);n.url=s}return t||(e.images[this.uuid]=n),n}}function T0(r){return typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap?Ub.getDataURL(r):r.data?{data:Array.from(r.data),width:r.width,height:r.height,type:r.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let j4=0;class ar extends Bs{constructor(e=ar.DEFAULT_IMAGE,t=ar.DEFAULT_MAPPING,n=Mr,i=Mr,s=gr,o=rl,a=Er,c=Ls,u=ar.DEFAULT_ANISOTROPY,f=Is){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:j4++}),this.uuid=Jo(),this.name="",this.source=new Vb(e),this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=c,this.offset=new Ne(0,0),this.repeat=new Ne(1,1),this.center=new Ne(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new or,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=f,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Fb)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Jh:e.x=e.x-Math.floor(e.x);break;case Mr:e.x=e.x<0?0:1;break;case Qh:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Jh:e.y=e.y-Math.floor(e.y);break;case Mr:e.y=e.y<0?0:1;break;case Qh:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}ar.DEFAULT_IMAGE=null;ar.DEFAULT_MAPPING=Fb;ar.DEFAULT_ANISOTROPY=1;class Wt{constructor(e=0,t=0,n=0,i=1){Wt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*n+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*n+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*n+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,s;const c=e.elements,u=c[0],f=c[4],d=c[8],m=c[1],v=c[5],S=c[9],x=c[2],w=c[6],A=c[10];if(Math.abs(f-m)<.01&&Math.abs(d-x)<.01&&Math.abs(S-w)<.01){if(Math.abs(f+m)<.1&&Math.abs(d+x)<.1&&Math.abs(S+w)<.1&&Math.abs(u+v+A-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const E=(u+1)/2,P=(v+1)/2,y=(A+1)/2,k=(f+m)/4,F=(d+x)/4,M=(S+w)/4;return E>P&&E>y?E<.01?(n=0,i=.707106781,s=.707106781):(n=Math.sqrt(E),i=k/n,s=F/n):P>y?P<.01?(n=.707106781,i=0,s=.707106781):(i=Math.sqrt(P),n=k/i,s=M/i):y<.01?(n=.707106781,i=.707106781,s=0):(s=Math.sqrt(y),n=F/s,i=M/s),this.set(n,i,s,t),this}let T=Math.sqrt((w-S)*(w-S)+(d-x)*(d-x)+(m-f)*(m-f));return Math.abs(T)<.001&&(T=1),this.x=(w-S)/T,this.y=(d-x)/T,this.z=(m-f)/T,this.w=Math.acos((u+v+A-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Ds extends Bs{constructor(e=1,t=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Wt(0,0,e,t),this.scissorTest=!1,this.viewport=new Wt(0,0,e,t);const i={width:e,height:t,depth:1};this.texture=new ar(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.internalFormat=n.internalFormat!==void 0?n.internalFormat:null,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:gr,this.depthBuffer=n.depthBuffer!==void 0?n.depthBuffer:!0,this.stencilBuffer=n.stencilBuffer!==void 0?n.stencilBuffer:!1,this.depthTexture=n.depthTexture!==void 0?n.depthTexture:null,this.samples=n.samples!==void 0?n.samples:0}setSize(e,t,n=1){(this.width!==e||this.height!==t||this.depth!==n)&&(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Vb(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class zb extends ar{constructor(e=null,t=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=Gn,this.minFilter=Gn,this.wrapR=Mr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Z4 extends ar{constructor(e=null,t=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=Gn,this.minFilter=Gn,this.wrapR=Mr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Rs{constructor(e=0,t=0,n=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,s,o,a){let c=n[i+0],u=n[i+1],f=n[i+2],d=n[i+3];const m=s[o+0],v=s[o+1],S=s[o+2],x=s[o+3];if(a===0){e[t+0]=c,e[t+1]=u,e[t+2]=f,e[t+3]=d;return}if(a===1){e[t+0]=m,e[t+1]=v,e[t+2]=S,e[t+3]=x;return}if(d!==x||c!==m||u!==v||f!==S){let w=1-a;const A=c*m+u*v+f*S+d*x,T=A>=0?1:-1,E=1-A*A;if(E>Number.EPSILON){const y=Math.sqrt(E),k=Math.atan2(y,A*T);w=Math.sin(w*k)/y,a=Math.sin(a*k)/y}const P=a*T;if(c=c*w+m*P,u=u*w+v*P,f=f*w+S*P,d=d*w+x*P,w===1-a){const y=1/Math.sqrt(c*c+u*u+f*f+d*d);c*=y,u*=y,f*=y,d*=y}}e[t]=c,e[t+1]=u,e[t+2]=f,e[t+3]=d}static multiplyQuaternionsFlat(e,t,n,i,s,o){const a=n[i],c=n[i+1],u=n[i+2],f=n[i+3],d=s[o],m=s[o+1],v=s[o+2],S=s[o+3];return e[t]=a*S+f*d+c*v-u*m,e[t+1]=c*S+f*m+u*d-a*v,e[t+2]=u*S+f*v+a*m-c*d,e[t+3]=f*S-a*d-c*m-u*v,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const n=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,c=Math.sin,u=a(n/2),f=a(i/2),d=a(s/2),m=c(n/2),v=c(i/2),S=c(s/2);switch(o){case"XYZ":this._x=m*f*d+u*v*S,this._y=u*v*d-m*f*S,this._z=u*f*S+m*v*d,this._w=u*f*d-m*v*S;break;case"YXZ":this._x=m*f*d+u*v*S,this._y=u*v*d-m*f*S,this._z=u*f*S-m*v*d,this._w=u*f*d+m*v*S;break;case"ZXY":this._x=m*f*d-u*v*S,this._y=u*v*d+m*f*S,this._z=u*f*S+m*v*d,this._w=u*f*d-m*v*S;break;case"ZYX":this._x=m*f*d-u*v*S,this._y=u*v*d+m*f*S,this._z=u*f*S-m*v*d,this._w=u*f*d+m*v*S;break;case"YZX":this._x=m*f*d+u*v*S,this._y=u*v*d+m*f*S,this._z=u*f*S-m*v*d,this._w=u*f*d-m*v*S;break;case"XZY":this._x=m*f*d-u*v*S,this._y=u*v*d-m*f*S,this._z=u*f*S+m*v*d,this._w=u*f*d+m*v*S;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],s=t[8],o=t[1],a=t[5],c=t[9],u=t[2],f=t[6],d=t[10],m=n+a+d;if(m>0){const v=.5/Math.sqrt(m+1);this._w=.25/v,this._x=(f-c)*v,this._y=(s-u)*v,this._z=(o-i)*v}else if(n>a&&n>d){const v=2*Math.sqrt(1+n-a-d);this._w=(f-c)/v,this._x=.25*v,this._y=(i+o)/v,this._z=(s+u)/v}else if(a>d){const v=2*Math.sqrt(1+a-n-d);this._w=(s-u)/v,this._x=(i+o)/v,this._y=.25*v,this._z=(c+f)/v}else{const v=2*Math.sqrt(1+d-n-a);this._w=(o-i)/v,this._x=(s+u)/v,this._y=(c+f)/v,this._z=.25*v}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(In(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,s=e._z,o=e._w,a=t._x,c=t._y,u=t._z,f=t._w;return this._x=n*f+o*a+i*u-s*c,this._y=i*f+o*c+s*a-n*u,this._z=s*f+o*u+n*c-i*a,this._w=o*f-n*a-i*c-s*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+n*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=i,this._z=s,this;const c=1-a*a;if(c<=Number.EPSILON){const v=1-t;return this._w=v*o+t*this._w,this._x=v*n+t*this._x,this._y=v*i+t*this._y,this._z=v*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const u=Math.sqrt(c),f=Math.atan2(u,a),d=Math.sin((1-t)*f)/u,m=Math.sin(t*f)/u;return this._w=o*d+this._w*m,this._x=n*d+this._x*m,this._y=i*d+this._y*m,this._z=s*d+this._z*m,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(i),n*Math.sin(s),n*Math.cos(s),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Y{constructor(e=0,t=0,n=0){Y.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(vm.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(vm.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*i,this.y=s[1]*t+s[4]*n+s[7]*i,this.z=s[2]*t+s[5]*n+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*n+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*n+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*n+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,s=e.x,o=e.y,a=e.z,c=e.w,u=c*t+o*i-a*n,f=c*n+a*t-s*i,d=c*i+s*n-o*t,m=-s*t-o*n-a*i;return this.x=u*c+m*-s+f*-a-d*-o,this.y=f*c+m*-o+d*-s-u*-a,this.z=d*c+m*-a+u*-o-f*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*i,this.y=s[1]*t+s[5]*n+s[9]*i,this.z=s[2]*t+s[6]*n+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,s=e.z,o=t.x,a=t.y,c=t.z;return this.x=i*c-s*a,this.y=s*o-n*c,this.z=n*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return L0.copy(this).projectOnVector(e),this.sub(L0)}reflect(e){return this.sub(L0.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(In(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const L0=new Y,vm=new Rs;class Qo{constructor(e=new Y(1/0,1/0,1/0),t=new Y(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,i=1/0,s=-1/0,o=-1/0,a=-1/0;for(let c=0,u=e.length;c<u;c+=3){const f=e[c],d=e[c+1],m=e[c+2];f<t&&(t=f),d<n&&(n=d),m<i&&(i=m),f>s&&(s=f),d>o&&(o=d),m>a&&(a=m)}return this.min.set(t,n,i),this.max.set(s,o,a),this}setFromBufferAttribute(e){let t=1/0,n=1/0,i=1/0,s=-1/0,o=-1/0,a=-1/0;for(let c=0,u=e.count;c<u;c++){const f=e.getX(c),d=e.getY(c),m=e.getZ(c);f<t&&(t=f),d<n&&(n=d),m<i&&(i=m),f>s&&(s=f),d>o&&(o=d),m>a&&(a=m)}return this.min.set(t,n,i),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=is.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0)if(t&&n.attributes!=null&&n.attributes.position!==void 0){const s=n.attributes.position;for(let o=0,a=s.count;o<a;o++)is.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(is)}else n.boundingBox===null&&n.computeBoundingBox(),I0.copy(n.boundingBox),I0.applyMatrix4(e.matrixWorld),this.union(I0);const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,is),is.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(_a),zl.subVectors(this.max,_a),io.subVectors(e.a,_a),so.subVectors(e.b,_a),oo.subVectors(e.c,_a),Ai.subVectors(so,io),Pi.subVectors(oo,so),ss.subVectors(io,oo);let t=[0,-Ai.z,Ai.y,0,-Pi.z,Pi.y,0,-ss.z,ss.y,Ai.z,0,-Ai.x,Pi.z,0,-Pi.x,ss.z,0,-ss.x,-Ai.y,Ai.x,0,-Pi.y,Pi.x,0,-ss.y,ss.x,0];return!D0(t,io,so,oo,zl)||(t=[1,0,0,0,1,0,0,0,1],!D0(t,io,so,oo,zl))?!1:($l.crossVectors(Ai,Pi),t=[$l.x,$l.y,$l.z],D0(t,io,so,oo,zl))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return is.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(is).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(ri[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ri[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ri[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ri[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ri[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ri[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ri[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ri[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ri),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ri=[new Y,new Y,new Y,new Y,new Y,new Y,new Y,new Y],is=new Y,I0=new Qo,io=new Y,so=new Y,oo=new Y,Ai=new Y,Pi=new Y,ss=new Y,_a=new Y,zl=new Y,$l=new Y,os=new Y;function D0(r,e,t,n,i){for(let s=0,o=r.length-3;s<=o;s+=3){os.fromArray(r,s);const a=i.x*Math.abs(os.x)+i.y*Math.abs(os.y)+i.z*Math.abs(os.z),c=e.dot(os),u=t.dot(os),f=n.dot(os);if(Math.max(-Math.max(c,u,f),Math.min(c,u,f))>a)return!1}return!0}const K4=new Qo,Sa=new Y,R0=new Y;class pu{constructor(e=new Y,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):K4.setFromPoints(e).getCenter(n);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Sa.subVectors(e,this.center);const t=Sa.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),i=(n-this.radius)*.5;this.center.addScaledVector(Sa,i/n),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(R0.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Sa.copy(e.center).add(R0)),this.expandByPoint(Sa.copy(e.center).sub(R0))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const ii=new Y,k0=new Y,Gl=new Y,Ti=new Y,F0=new Y,Hl=new Y,O0=new Y;class kf{constructor(e=new Y,t=new Y(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ii)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=ii.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ii.copy(this.direction).multiplyScalar(t).add(this.origin),ii.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){k0.copy(e).add(t).multiplyScalar(.5),Gl.copy(t).sub(e).normalize(),Ti.copy(this.origin).sub(k0);const s=e.distanceTo(t)*.5,o=-this.direction.dot(Gl),a=Ti.dot(this.direction),c=-Ti.dot(Gl),u=Ti.lengthSq(),f=Math.abs(1-o*o);let d,m,v,S;if(f>0)if(d=o*c-a,m=o*a-c,S=s*f,d>=0)if(m>=-S)if(m<=S){const x=1/f;d*=x,m*=x,v=d*(d+o*m+2*a)+m*(o*d+m+2*c)+u}else m=s,d=Math.max(0,-(o*m+a)),v=-d*d+m*(m+2*c)+u;else m=-s,d=Math.max(0,-(o*m+a)),v=-d*d+m*(m+2*c)+u;else m<=-S?(d=Math.max(0,-(-o*s+a)),m=d>0?-s:Math.min(Math.max(-s,-c),s),v=-d*d+m*(m+2*c)+u):m<=S?(d=0,m=Math.min(Math.max(-s,-c),s),v=m*(m+2*c)+u):(d=Math.max(0,-(o*s+a)),m=d>0?s:Math.min(Math.max(-s,-c),s),v=-d*d+m*(m+2*c)+u);else m=o>0?-s:s,d=Math.max(0,-(o*m+a)),v=-d*d+m*(m+2*c)+u;return n&&n.copy(this.direction).multiplyScalar(d).add(this.origin),i&&i.copy(Gl).multiplyScalar(m).add(k0),v}intersectSphere(e,t){ii.subVectors(e.center,this.origin);const n=ii.dot(this.direction),i=ii.dot(ii)-n*n,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=n-o,c=n+o;return a<0&&c<0?null:a<0?this.at(c,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,s,o,a,c;const u=1/this.direction.x,f=1/this.direction.y,d=1/this.direction.z,m=this.origin;return u>=0?(n=(e.min.x-m.x)*u,i=(e.max.x-m.x)*u):(n=(e.max.x-m.x)*u,i=(e.min.x-m.x)*u),f>=0?(s=(e.min.y-m.y)*f,o=(e.max.y-m.y)*f):(s=(e.max.y-m.y)*f,o=(e.min.y-m.y)*f),n>o||s>i||((s>n||isNaN(n))&&(n=s),(o<i||isNaN(i))&&(i=o),d>=0?(a=(e.min.z-m.z)*d,c=(e.max.z-m.z)*d):(a=(e.max.z-m.z)*d,c=(e.min.z-m.z)*d),n>c||a>i)||((a>n||n!==n)&&(n=a),(c<i||i!==i)&&(i=c),i<0)?null:this.at(n>=0?n:i,t)}intersectsBox(e){return this.intersectBox(e,ii)!==null}intersectTriangle(e,t,n,i,s){F0.subVectors(t,e),Hl.subVectors(n,e),O0.crossVectors(F0,Hl);let o=this.direction.dot(O0),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Ti.subVectors(this.origin,e);const c=a*this.direction.dot(Hl.crossVectors(Ti,Hl));if(c<0)return null;const u=a*this.direction.dot(F0.cross(Ti));if(u<0||c+u>o)return null;const f=-a*Ti.dot(O0);return f<0?null:this.at(f/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class en{constructor(){en.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,n,i,s,o,a,c,u,f,d,m,v,S,x,w){const A=this.elements;return A[0]=e,A[4]=t,A[8]=n,A[12]=i,A[1]=s,A[5]=o,A[9]=a,A[13]=c,A[2]=u,A[6]=f,A[10]=d,A[14]=m,A[3]=v,A[7]=S,A[11]=x,A[15]=w,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new en().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/ao.setFromMatrixColumn(e,0).length(),s=1/ao.setFromMatrixColumn(e,1).length(),o=1/ao.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,i=e.y,s=e.z,o=Math.cos(n),a=Math.sin(n),c=Math.cos(i),u=Math.sin(i),f=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const m=o*f,v=o*d,S=a*f,x=a*d;t[0]=c*f,t[4]=-c*d,t[8]=u,t[1]=v+S*u,t[5]=m-x*u,t[9]=-a*c,t[2]=x-m*u,t[6]=S+v*u,t[10]=o*c}else if(e.order==="YXZ"){const m=c*f,v=c*d,S=u*f,x=u*d;t[0]=m+x*a,t[4]=S*a-v,t[8]=o*u,t[1]=o*d,t[5]=o*f,t[9]=-a,t[2]=v*a-S,t[6]=x+m*a,t[10]=o*c}else if(e.order==="ZXY"){const m=c*f,v=c*d,S=u*f,x=u*d;t[0]=m-x*a,t[4]=-o*d,t[8]=S+v*a,t[1]=v+S*a,t[5]=o*f,t[9]=x-m*a,t[2]=-o*u,t[6]=a,t[10]=o*c}else if(e.order==="ZYX"){const m=o*f,v=o*d,S=a*f,x=a*d;t[0]=c*f,t[4]=S*u-v,t[8]=m*u+x,t[1]=c*d,t[5]=x*u+m,t[9]=v*u-S,t[2]=-u,t[6]=a*c,t[10]=o*c}else if(e.order==="YZX"){const m=o*c,v=o*u,S=a*c,x=a*u;t[0]=c*f,t[4]=x-m*d,t[8]=S*d+v,t[1]=d,t[5]=o*f,t[9]=-a*f,t[2]=-u*f,t[6]=v*d+S,t[10]=m-x*d}else if(e.order==="XZY"){const m=o*c,v=o*u,S=a*c,x=a*u;t[0]=c*f,t[4]=-d,t[8]=u*f,t[1]=m*d+x,t[5]=o*f,t[9]=v*d-S,t[2]=S*d-v,t[6]=a*f,t[10]=x*d+m}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(J4,e,Q4)}lookAt(e,t,n){const i=this.elements;return tr.subVectors(e,t),tr.lengthSq()===0&&(tr.z=1),tr.normalize(),Li.crossVectors(n,tr),Li.lengthSq()===0&&(Math.abs(n.z)===1?tr.x+=1e-4:tr.z+=1e-4,tr.normalize(),Li.crossVectors(n,tr)),Li.normalize(),Wl.crossVectors(tr,Li),i[0]=Li.x,i[4]=Wl.x,i[8]=tr.x,i[1]=Li.y,i[5]=Wl.y,i[9]=tr.y,i[2]=Li.z,i[6]=Wl.z,i[10]=tr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,s=this.elements,o=n[0],a=n[4],c=n[8],u=n[12],f=n[1],d=n[5],m=n[9],v=n[13],S=n[2],x=n[6],w=n[10],A=n[14],T=n[3],E=n[7],P=n[11],y=n[15],k=i[0],F=i[4],M=i[8],R=i[12],O=i[1],z=i[5],Q=i[9],G=i[13],V=i[2],q=i[6],j=i[10],ge=i[14],K=i[3],Ee=i[7],Pe=i[11],re=i[15];return s[0]=o*k+a*O+c*V+u*K,s[4]=o*F+a*z+c*q+u*Ee,s[8]=o*M+a*Q+c*j+u*Pe,s[12]=o*R+a*G+c*ge+u*re,s[1]=f*k+d*O+m*V+v*K,s[5]=f*F+d*z+m*q+v*Ee,s[9]=f*M+d*Q+m*j+v*Pe,s[13]=f*R+d*G+m*ge+v*re,s[2]=S*k+x*O+w*V+A*K,s[6]=S*F+x*z+w*q+A*Ee,s[10]=S*M+x*Q+w*j+A*Pe,s[14]=S*R+x*G+w*ge+A*re,s[3]=T*k+E*O+P*V+y*K,s[7]=T*F+E*z+P*q+y*Ee,s[11]=T*M+E*Q+P*j+y*Pe,s[15]=T*R+E*G+P*ge+y*re,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],s=e[12],o=e[1],a=e[5],c=e[9],u=e[13],f=e[2],d=e[6],m=e[10],v=e[14],S=e[3],x=e[7],w=e[11],A=e[15];return S*(+s*c*d-i*u*d-s*a*m+n*u*m+i*a*v-n*c*v)+x*(+t*c*v-t*u*m+s*o*m-i*o*v+i*u*f-s*c*f)+w*(+t*u*d-t*a*v-s*o*d+n*o*v+s*a*f-n*u*f)+A*(-i*a*f-t*c*d+t*a*m+i*o*d-n*o*m+n*c*f)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],c=e[6],u=e[7],f=e[8],d=e[9],m=e[10],v=e[11],S=e[12],x=e[13],w=e[14],A=e[15],T=d*w*u-x*m*u+x*c*v-a*w*v-d*c*A+a*m*A,E=S*m*u-f*w*u-S*c*v+o*w*v+f*c*A-o*m*A,P=f*x*u-S*d*u+S*a*v-o*x*v-f*a*A+o*d*A,y=S*d*c-f*x*c-S*a*m+o*x*m+f*a*w-o*d*w,k=t*T+n*E+i*P+s*y;if(k===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const F=1/k;return e[0]=T*F,e[1]=(x*m*s-d*w*s-x*i*v+n*w*v+d*i*A-n*m*A)*F,e[2]=(a*w*s-x*c*s+x*i*u-n*w*u-a*i*A+n*c*A)*F,e[3]=(d*c*s-a*m*s-d*i*u+n*m*u+a*i*v-n*c*v)*F,e[4]=E*F,e[5]=(f*w*s-S*m*s+S*i*v-t*w*v-f*i*A+t*m*A)*F,e[6]=(S*c*s-o*w*s-S*i*u+t*w*u+o*i*A-t*c*A)*F,e[7]=(o*m*s-f*c*s+f*i*u-t*m*u-o*i*v+t*c*v)*F,e[8]=P*F,e[9]=(S*d*s-f*x*s-S*n*v+t*x*v+f*n*A-t*d*A)*F,e[10]=(o*x*s-S*a*s+S*n*u-t*x*u-o*n*A+t*a*A)*F,e[11]=(f*a*s-o*d*s-f*n*u+t*d*u+o*n*v-t*a*v)*F,e[12]=y*F,e[13]=(f*x*i-S*d*i+S*n*m-t*x*m-f*n*w+t*d*w)*F,e[14]=(S*a*i-o*x*i-S*n*c+t*x*c+o*n*w-t*a*w)*F,e[15]=(o*d*i-f*a*i+f*n*c-t*d*c-o*n*m+t*a*m)*F,this}scale(e){const t=this.elements,n=e.x,i=e.y,s=e.z;return t[0]*=n,t[4]*=i,t[8]*=s,t[1]*=n,t[5]*=i,t[9]*=s,t[2]*=n,t[6]*=i,t[10]*=s,t[3]*=n,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),s=1-n,o=e.x,a=e.y,c=e.z,u=s*o,f=s*a;return this.set(u*o+n,u*a-i*c,u*c+i*a,0,u*a+i*c,f*a+n,f*c-i*o,0,u*c-i*a,f*c+i*o,s*c*c+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,s,o){return this.set(1,n,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,s=t._x,o=t._y,a=t._z,c=t._w,u=s+s,f=o+o,d=a+a,m=s*u,v=s*f,S=s*d,x=o*f,w=o*d,A=a*d,T=c*u,E=c*f,P=c*d,y=n.x,k=n.y,F=n.z;return i[0]=(1-(x+A))*y,i[1]=(v+P)*y,i[2]=(S-E)*y,i[3]=0,i[4]=(v-P)*k,i[5]=(1-(m+A))*k,i[6]=(w+T)*k,i[7]=0,i[8]=(S+E)*F,i[9]=(w-T)*F,i[10]=(1-(m+x))*F,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let s=ao.set(i[0],i[1],i[2]).length();const o=ao.set(i[4],i[5],i[6]).length(),a=ao.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],yr.copy(this);const u=1/s,f=1/o,d=1/a;return yr.elements[0]*=u,yr.elements[1]*=u,yr.elements[2]*=u,yr.elements[4]*=f,yr.elements[5]*=f,yr.elements[6]*=f,yr.elements[8]*=d,yr.elements[9]*=d,yr.elements[10]*=d,t.setFromRotationMatrix(yr),n.x=s,n.y=o,n.z=a,this}makePerspective(e,t,n,i,s,o){const a=this.elements,c=2*s/(t-e),u=2*s/(n-i),f=(t+e)/(t-e),d=(n+i)/(n-i),m=-(o+s)/(o-s),v=-2*o*s/(o-s);return a[0]=c,a[4]=0,a[8]=f,a[12]=0,a[1]=0,a[5]=u,a[9]=d,a[13]=0,a[2]=0,a[6]=0,a[10]=m,a[14]=v,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,n,i,s,o){const a=this.elements,c=1/(t-e),u=1/(n-i),f=1/(o-s),d=(t+e)*c,m=(n+i)*u,v=(o+s)*f;return a[0]=2*c,a[4]=0,a[8]=0,a[12]=-d,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-m,a[2]=0,a[6]=0,a[10]=-2*f,a[14]=-v,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const ao=new Y,yr=new en,J4=new Y(0,0,0),Q4=new Y(1,1,1),Li=new Y,Wl=new Y,tr=new Y,bm=new en,xm=new Rs;class wl{constructor(e=0,t=0,n=0,i=wl.DefaultOrder){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,i=this._order){return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],c=i[1],u=i[5],f=i[9],d=i[2],m=i[6],v=i[10];switch(t){case"XYZ":this._y=Math.asin(In(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-f,v),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(m,u),this._z=0);break;case"YXZ":this._x=Math.asin(-In(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(a,v),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(In(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-d,v),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(c,s));break;case"ZYX":this._y=Math.asin(-In(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(m,v),this._z=Math.atan2(c,s)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(In(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-f,u),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(a,v));break;case"XZY":this._z=Math.asin(-In(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(m,u),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-f,v),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return bm.makeRotationFromQuaternion(e),this.setFromRotationMatrix(bm,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return xm.setFromEuler(this),this.setFromQuaternion(xm,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}wl.DefaultOrder="XYZ";wl.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Ff{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let eS=0;const wm=new Y,lo=new Rs,si=new en,ql=new Y,Ca=new Y,tS=new Y,nS=new Rs,ym=new Y(1,0,0),_m=new Y(0,1,0),Sm=new Y(0,0,1),rS={type:"added"},Cm={type:"removed"};class Rn extends Bs{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:eS++}),this.uuid=Jo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Rn.DefaultUp.clone();const e=new Y,t=new wl,n=new Rs,i=new Y(1,1,1);function s(){n.setFromEuler(t,!1)}function o(){t.setFromQuaternion(n,void 0,!1)}t._onChange(s),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new en},normalMatrix:{value:new or}}),this.matrix=new en,this.matrixWorld=new en,this.matrixAutoUpdate=Rn.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Rn.DefaultMatrixWorldAutoUpdate,this.layers=new Ff,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return lo.setFromAxisAngle(e,t),this.quaternion.multiply(lo),this}rotateOnWorldAxis(e,t){return lo.setFromAxisAngle(e,t),this.quaternion.premultiply(lo),this}rotateX(e){return this.rotateOnAxis(ym,e)}rotateY(e){return this.rotateOnAxis(_m,e)}rotateZ(e){return this.rotateOnAxis(Sm,e)}translateOnAxis(e,t){return wm.copy(e).applyQuaternion(this.quaternion),this.position.add(wm.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(ym,e)}translateY(e){return this.translateOnAxis(_m,e)}translateZ(e){return this.translateOnAxis(Sm,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(si.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?ql.copy(e):ql.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),Ca.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?si.lookAt(Ca,ql,this.up):si.lookAt(ql,Ca,this.up),this.quaternion.setFromRotationMatrix(si),i&&(si.extractRotation(i.matrixWorld),lo.setFromRotationMatrix(si),this.quaternion.premultiply(lo.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(rS)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Cm)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(Cm)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),si.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),si.multiply(e.parent.matrixWorld)),e.applyMatrix4(si),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const o=this.children[n].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t){let n=[];this[e]===t&&n.push(this);for(let i=0,s=this.children.length;i<s;i++){const o=this.children[i].getObjectsByProperty(e,t);o.length>0&&(n=n.concat(o))}return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ca,e,tS),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ca,nS,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++){const s=t[n];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.matrixWorldAutoUpdate===!0&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++){const a=i[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function s(a,c){return a[c.uuid]===void 0&&(a[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const c=a.shapes;if(Array.isArray(c))for(let u=0,f=c.length;u<f;u++){const d=c[u];s(e.shapes,d)}else s(e.shapes,c)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let c=0,u=this.material.length;c<u;c++)a.push(s(e.materials,this.material[c]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const c=this.animations[a];i.animations.push(s(e.animations,c))}}if(t){const a=o(e.geometries),c=o(e.materials),u=o(e.textures),f=o(e.images),d=o(e.shapes),m=o(e.skeletons),v=o(e.animations),S=o(e.nodes);a.length>0&&(n.geometries=a),c.length>0&&(n.materials=c),u.length>0&&(n.textures=u),f.length>0&&(n.images=f),d.length>0&&(n.shapes=d),m.length>0&&(n.skeletons=m),v.length>0&&(n.animations=v),S.length>0&&(n.nodes=S)}return n.object=i,n;function o(a){const c=[];for(const u in a){const f=a[u];delete f.metadata,c.push(f)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const i=e.children[n];this.add(i.clone())}return this}}Rn.DefaultUp=new Y(0,1,0);Rn.DefaultMatrixAutoUpdate=!0;Rn.DefaultMatrixWorldAutoUpdate=!0;const _r=new Y,oi=new Y,B0=new Y,ai=new Y,co=new Y,uo=new Y,Mm=new Y,N0=new Y,U0=new Y,V0=new Y;class pi{constructor(e=new Y,t=new Y,n=new Y){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),_r.subVectors(e,t),i.cross(_r);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,n,i,s){_r.subVectors(i,t),oi.subVectors(n,t),B0.subVectors(e,t);const o=_r.dot(_r),a=_r.dot(oi),c=_r.dot(B0),u=oi.dot(oi),f=oi.dot(B0),d=o*u-a*a;if(d===0)return s.set(-2,-1,-1);const m=1/d,v=(u*c-a*f)*m,S=(o*f-a*c)*m;return s.set(1-v-S,S,v)}static containsPoint(e,t,n,i){return this.getBarycoord(e,t,n,i,ai),ai.x>=0&&ai.y>=0&&ai.x+ai.y<=1}static getUV(e,t,n,i,s,o,a,c){return this.getBarycoord(e,t,n,i,ai),c.set(0,0),c.addScaledVector(s,ai.x),c.addScaledVector(o,ai.y),c.addScaledVector(a,ai.z),c}static isFrontFacing(e,t,n,i){return _r.subVectors(n,t),oi.subVectors(e,t),_r.cross(oi).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return _r.subVectors(this.c,this.b),oi.subVectors(this.a,this.b),_r.cross(oi).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return pi.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return pi.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,i,s){return pi.getUV(e,this.a,this.b,this.c,t,n,i,s)}containsPoint(e){return pi.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return pi.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,i=this.b,s=this.c;let o,a;co.subVectors(i,n),uo.subVectors(s,n),N0.subVectors(e,n);const c=co.dot(N0),u=uo.dot(N0);if(c<=0&&u<=0)return t.copy(n);U0.subVectors(e,i);const f=co.dot(U0),d=uo.dot(U0);if(f>=0&&d<=f)return t.copy(i);const m=c*d-f*u;if(m<=0&&c>=0&&f<=0)return o=c/(c-f),t.copy(n).addScaledVector(co,o);V0.subVectors(e,s);const v=co.dot(V0),S=uo.dot(V0);if(S>=0&&v<=S)return t.copy(s);const x=v*u-c*S;if(x<=0&&u>=0&&S<=0)return a=u/(u-S),t.copy(n).addScaledVector(uo,a);const w=f*S-v*d;if(w<=0&&d-f>=0&&v-S>=0)return Mm.subVectors(s,i),a=(d-f)/(d-f+(v-S)),t.copy(i).addScaledVector(Mm,a);const A=1/(w+x+m);return o=x*A,a=m*A,t.copy(n).addScaledVector(co,o).addScaledVector(uo,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let iS=0;class Ns extends Bs{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:iS++}),this.uuid=Jo(),this.name="",this.type="Material",this.blending=Oo,this.side=Ts,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=Rb,this.blendDst=kb,this.blendEquation=Ao,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=jh,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=X4,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=S0,this.stencilZFail=S0,this.stencilZPass=S0,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const i=this[t];if(i===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Oo&&(n.blending=this.blending),this.side!==Ts&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(n.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=this.flatShading),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function i(s){const o=[];for(const a in s){const c=s[a];delete c.metadata,o.push(c)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(n.textures=s),o.length>0&&(n.images=o)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const i=t.length;n=new Array(i);for(let s=0;s!==i;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class $b extends Ns{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Dt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Df,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const ln=new Y,Xl=new Ne;class jn{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=dm,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)Xl.fromBufferAttribute(this,t),Xl.applyMatrix3(e),this.setXY(t,Xl.x,Xl.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)ln.fromBufferAttribute(this,t),ln.applyMatrix3(e),this.setXYZ(t,ln.x,ln.y,ln.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)ln.fromBufferAttribute(this,t),ln.applyMatrix4(e),this.setXYZ(t,ln.x,ln.y,ln.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)ln.fromBufferAttribute(this,t),ln.applyNormalMatrix(e),this.setXYZ(t,ln.x,ln.y,ln.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)ln.fromBufferAttribute(this,t),ln.transformDirection(e),this.setXYZ(t,ln.x,ln.y,ln.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Nl(t,this.array)),t}setX(e,t){return this.normalized&&(t=er(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Nl(t,this.array)),t}setY(e,t){return this.normalized&&(t=er(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Nl(t,this.array)),t}setZ(e,t){return this.normalized&&(t=er(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Nl(t,this.array)),t}setW(e,t){return this.normalized&&(t=er(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=er(t,this.array),n=er(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=er(t,this.array),n=er(n,this.array),i=er(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,s){return e*=this.itemSize,this.normalized&&(t=er(t,this.array),n=er(n,this.array),i=er(i,this.array),s=er(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==dm&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class Gb extends jn{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class Hb extends jn{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class lr extends jn{constructor(e,t,n){super(new Float32Array(e),t,n)}}let sS=0;const fr=new en,z0=new Rn,ho=new Y,nr=new Qo,Ma=new Qo,vn=new Y;class Zn extends Bs{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:sS++}),this.uuid=Jo(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Bb(e)?Hb:Gb)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new or().getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return fr.makeRotationFromQuaternion(e),this.applyMatrix4(fr),this}rotateX(e){return fr.makeRotationX(e),this.applyMatrix4(fr),this}rotateY(e){return fr.makeRotationY(e),this.applyMatrix4(fr),this}rotateZ(e){return fr.makeRotationZ(e),this.applyMatrix4(fr),this}translate(e,t,n){return fr.makeTranslation(e,t,n),this.applyMatrix4(fr),this}scale(e,t,n){return fr.makeScale(e,t,n),this.applyMatrix4(fr),this}lookAt(e){return z0.lookAt(e),z0.updateMatrix(),this.applyMatrix4(z0.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ho).negate(),this.translate(ho.x,ho.y,ho.z),this}setFromPoints(e){const t=[];for(let n=0,i=e.length;n<i;n++){const s=e[n];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new lr(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Qo);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Y(-1/0,-1/0,-1/0),new Y(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,i=t.length;n<i;n++){const s=t[n];nr.setFromBufferAttribute(s),this.morphTargetsRelative?(vn.addVectors(this.boundingBox.min,nr.min),this.boundingBox.expandByPoint(vn),vn.addVectors(this.boundingBox.max,nr.max),this.boundingBox.expandByPoint(vn)):(this.boundingBox.expandByPoint(nr.min),this.boundingBox.expandByPoint(nr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new pu);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Y,1/0);return}if(e){const n=this.boundingSphere.center;if(nr.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];Ma.setFromBufferAttribute(a),this.morphTargetsRelative?(vn.addVectors(nr.min,Ma.min),nr.expandByPoint(vn),vn.addVectors(nr.max,Ma.max),nr.expandByPoint(vn)):(nr.expandByPoint(Ma.min),nr.expandByPoint(Ma.max))}nr.getCenter(n);let i=0;for(let s=0,o=e.count;s<o;s++)vn.fromBufferAttribute(e,s),i=Math.max(i,n.distanceToSquared(vn));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],c=this.morphTargetsRelative;for(let u=0,f=a.count;u<f;u++)vn.fromBufferAttribute(a,u),c&&(ho.fromBufferAttribute(e,u),vn.add(ho)),i=Math.max(i,n.distanceToSquared(vn))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=e.array,i=t.position.array,s=t.normal.array,o=t.uv.array,a=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new jn(new Float32Array(4*a),4));const c=this.getAttribute("tangent").array,u=[],f=[];for(let O=0;O<a;O++)u[O]=new Y,f[O]=new Y;const d=new Y,m=new Y,v=new Y,S=new Ne,x=new Ne,w=new Ne,A=new Y,T=new Y;function E(O,z,Q){d.fromArray(i,O*3),m.fromArray(i,z*3),v.fromArray(i,Q*3),S.fromArray(o,O*2),x.fromArray(o,z*2),w.fromArray(o,Q*2),m.sub(d),v.sub(d),x.sub(S),w.sub(S);const G=1/(x.x*w.y-w.x*x.y);isFinite(G)&&(A.copy(m).multiplyScalar(w.y).addScaledVector(v,-x.y).multiplyScalar(G),T.copy(v).multiplyScalar(x.x).addScaledVector(m,-w.x).multiplyScalar(G),u[O].add(A),u[z].add(A),u[Q].add(A),f[O].add(T),f[z].add(T),f[Q].add(T))}let P=this.groups;P.length===0&&(P=[{start:0,count:n.length}]);for(let O=0,z=P.length;O<z;++O){const Q=P[O],G=Q.start,V=Q.count;for(let q=G,j=G+V;q<j;q+=3)E(n[q+0],n[q+1],n[q+2])}const y=new Y,k=new Y,F=new Y,M=new Y;function R(O){F.fromArray(s,O*3),M.copy(F);const z=u[O];y.copy(z),y.sub(F.multiplyScalar(F.dot(z))).normalize(),k.crossVectors(M,z);const G=k.dot(f[O])<0?-1:1;c[O*4]=y.x,c[O*4+1]=y.y,c[O*4+2]=y.z,c[O*4+3]=G}for(let O=0,z=P.length;O<z;++O){const Q=P[O],G=Q.start,V=Q.count;for(let q=G,j=G+V;q<j;q+=3)R(n[q+0]),R(n[q+1]),R(n[q+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new jn(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let m=0,v=n.count;m<v;m++)n.setXYZ(m,0,0,0);const i=new Y,s=new Y,o=new Y,a=new Y,c=new Y,u=new Y,f=new Y,d=new Y;if(e)for(let m=0,v=e.count;m<v;m+=3){const S=e.getX(m+0),x=e.getX(m+1),w=e.getX(m+2);i.fromBufferAttribute(t,S),s.fromBufferAttribute(t,x),o.fromBufferAttribute(t,w),f.subVectors(o,s),d.subVectors(i,s),f.cross(d),a.fromBufferAttribute(n,S),c.fromBufferAttribute(n,x),u.fromBufferAttribute(n,w),a.add(f),c.add(f),u.add(f),n.setXYZ(S,a.x,a.y,a.z),n.setXYZ(x,c.x,c.y,c.z),n.setXYZ(w,u.x,u.y,u.z)}else for(let m=0,v=t.count;m<v;m+=3)i.fromBufferAttribute(t,m+0),s.fromBufferAttribute(t,m+1),o.fromBufferAttribute(t,m+2),f.subVectors(o,s),d.subVectors(i,s),f.cross(d),n.setXYZ(m+0,f.x,f.y,f.z),n.setXYZ(m+1,f.x,f.y,f.z),n.setXYZ(m+2,f.x,f.y,f.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)vn.fromBufferAttribute(e,t),vn.normalize(),e.setXYZ(t,vn.x,vn.y,vn.z)}toNonIndexed(){function e(a,c){const u=a.array,f=a.itemSize,d=a.normalized,m=new u.constructor(c.length*f);let v=0,S=0;for(let x=0,w=c.length;x<w;x++){a.isInterleavedBufferAttribute?v=c[x]*a.data.stride+a.offset:v=c[x]*f;for(let A=0;A<f;A++)m[S++]=u[v++]}return new jn(m,f,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Zn,n=this.index.array,i=this.attributes;for(const a in i){const c=i[a],u=e(c,n);t.setAttribute(a,u)}const s=this.morphAttributes;for(const a in s){const c=[],u=s[a];for(let f=0,d=u.length;f<d;f++){const m=u[f],v=e(m,n);c.push(v)}t.morphAttributes[a]=c}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,c=o.length;a<c;a++){const u=o[a];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const u in c)c[u]!==void 0&&(e[u]=c[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const c in n){const u=n[c];e.data.attributes[c]=u.toJSON(e.data)}const i={};let s=!1;for(const c in this.morphAttributes){const u=this.morphAttributes[c],f=[];for(let d=0,m=u.length;d<m;d++){const v=u[d];f.push(v.toJSON(e.data))}f.length>0&&(i[c]=f,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const i=e.attributes;for(const u in i){const f=i[u];this.setAttribute(u,f.clone(t))}const s=e.morphAttributes;for(const u in s){const f=[],d=s[u];for(let m=0,v=d.length;m<v;m++)f.push(d[m].clone(t));this.morphAttributes[u]=f}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,f=o.length;u<f;u++){const d=o[u];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const Em=new en,fo=new kf,$0=new pu,Ea=new Y,Aa=new Y,Pa=new Y,G0=new Y,Yl=new Y,jl=new Ne,Zl=new Ne,Kl=new Ne,H0=new Y,Jl=new Y;class mi extends Rn{constructor(e=new Zn,t=new $b){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const n=this.geometry,i=n.attributes.position,s=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){Yl.set(0,0,0);for(let c=0,u=s.length;c<u;c++){const f=a[c],d=s[c];f!==0&&(G0.fromBufferAttribute(d,e),o?Yl.addScaledVector(G0,f):Yl.addScaledVector(G0.sub(t),f))}t.add(Yl)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}raycast(e,t){const n=this.geometry,i=this.material,s=this.matrixWorld;if(i===void 0||(n.boundingSphere===null&&n.computeBoundingSphere(),$0.copy(n.boundingSphere),$0.applyMatrix4(s),e.ray.intersectsSphere($0)===!1)||(Em.copy(s).invert(),fo.copy(e.ray).applyMatrix4(Em),n.boundingBox!==null&&fo.intersectsBox(n.boundingBox)===!1))return;let o;const a=n.index,c=n.attributes.position,u=n.attributes.uv,f=n.attributes.uv2,d=n.groups,m=n.drawRange;if(a!==null)if(Array.isArray(i))for(let v=0,S=d.length;v<S;v++){const x=d[v],w=i[x.materialIndex],A=Math.max(x.start,m.start),T=Math.min(a.count,Math.min(x.start+x.count,m.start+m.count));for(let E=A,P=T;E<P;E+=3){const y=a.getX(E),k=a.getX(E+1),F=a.getX(E+2);o=Ql(this,w,e,fo,u,f,y,k,F),o&&(o.faceIndex=Math.floor(E/3),o.face.materialIndex=x.materialIndex,t.push(o))}}else{const v=Math.max(0,m.start),S=Math.min(a.count,m.start+m.count);for(let x=v,w=S;x<w;x+=3){const A=a.getX(x),T=a.getX(x+1),E=a.getX(x+2);o=Ql(this,i,e,fo,u,f,A,T,E),o&&(o.faceIndex=Math.floor(x/3),t.push(o))}}else if(c!==void 0)if(Array.isArray(i))for(let v=0,S=d.length;v<S;v++){const x=d[v],w=i[x.materialIndex],A=Math.max(x.start,m.start),T=Math.min(c.count,Math.min(x.start+x.count,m.start+m.count));for(let E=A,P=T;E<P;E+=3){const y=E,k=E+1,F=E+2;o=Ql(this,w,e,fo,u,f,y,k,F),o&&(o.faceIndex=Math.floor(E/3),o.face.materialIndex=x.materialIndex,t.push(o))}}else{const v=Math.max(0,m.start),S=Math.min(c.count,m.start+m.count);for(let x=v,w=S;x<w;x+=3){const A=x,T=x+1,E=x+2;o=Ql(this,i,e,fo,u,f,A,T,E),o&&(o.faceIndex=Math.floor(x/3),t.push(o))}}}}function oS(r,e,t,n,i,s,o,a){let c;if(e.side===vr?c=n.intersectTriangle(o,s,i,!0,a):c=n.intersectTriangle(i,s,o,e.side===Ts,a),c===null)return null;Jl.copy(a),Jl.applyMatrix4(r.matrixWorld);const u=t.ray.origin.distanceTo(Jl);return u<t.near||u>t.far?null:{distance:u,point:Jl.clone(),object:r}}function Ql(r,e,t,n,i,s,o,a,c){r.getVertexPosition(o,Ea),r.getVertexPosition(a,Aa),r.getVertexPosition(c,Pa);const u=oS(r,e,t,n,Ea,Aa,Pa,H0);if(u){i&&(jl.fromBufferAttribute(i,o),Zl.fromBufferAttribute(i,a),Kl.fromBufferAttribute(i,c),u.uv=pi.getUV(H0,Ea,Aa,Pa,jl,Zl,Kl,new Ne)),s&&(jl.fromBufferAttribute(s,o),Zl.fromBufferAttribute(s,a),Kl.fromBufferAttribute(s,c),u.uv2=pi.getUV(H0,Ea,Aa,Pa,jl,Zl,Kl,new Ne));const f={a:o,b:a,c,normal:new Y,materialIndex:0};pi.getNormal(Ea,Aa,Pa,f.normal),u.face=f}return u}class yl extends Zn{constructor(e=1,t=1,n=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const c=[],u=[],f=[],d=[];let m=0,v=0;S("z","y","x",-1,-1,n,t,e,o,s,0),S("z","y","x",1,-1,n,t,-e,o,s,1),S("x","z","y",1,1,e,n,t,i,o,2),S("x","z","y",1,-1,e,n,-t,i,o,3),S("x","y","z",1,-1,e,t,n,i,s,4),S("x","y","z",-1,-1,e,t,-n,i,s,5),this.setIndex(c),this.setAttribute("position",new lr(u,3)),this.setAttribute("normal",new lr(f,3)),this.setAttribute("uv",new lr(d,2));function S(x,w,A,T,E,P,y,k,F,M,R){const O=P/F,z=y/M,Q=P/2,G=y/2,V=k/2,q=F+1,j=M+1;let ge=0,K=0;const Ee=new Y;for(let Pe=0;Pe<j;Pe++){const re=Pe*z-G;for(let ae=0;ae<q;ae++){const xe=ae*O-Q;Ee[x]=xe*T,Ee[w]=re*E,Ee[A]=V,u.push(Ee.x,Ee.y,Ee.z),Ee[x]=0,Ee[w]=0,Ee[A]=k>0?1:-1,f.push(Ee.x,Ee.y,Ee.z),d.push(ae/F),d.push(1-Pe/M),ge+=1}}for(let Pe=0;Pe<M;Pe++)for(let re=0;re<F;re++){const ae=m+re+q*Pe,xe=m+re+q*(Pe+1),be=m+(re+1)+q*(Pe+1),De=m+(re+1)+q*Pe;c.push(ae,xe,De),c.push(xe,be,De),K+=6}a.addGroup(v,K,R),v+=K,m+=ge}}static fromJSON(e){return new yl(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Go(r){const e={};for(const t in r){e[t]={};for(const n in r[t]){const i=r[t][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?e[t][n]=i.clone():Array.isArray(i)?e[t][n]=i.slice():e[t][n]=i}}return e}function $n(r){const e={};for(let t=0;t<r.length;t++){const n=Go(r[t]);for(const i in n)e[i]=n[i]}return e}function aS(r){const e=[];for(let t=0;t<r.length;t++)e.push(r[t].clone());return e}function Wb(r){return r.getRenderTarget()===null&&r.outputEncoding===Vt?Fr:sl}const lS={clone:Go,merge:$n};var cS=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,uS=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ks extends Ns{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=cS,this.fragmentShader=uS,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Go(e.uniforms),this.uniformsGroups=aS(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const i in this.extensions)this.extensions[i]===!0&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class qb extends Rn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new en,this.projectionMatrix=new en,this.projectionMatrixInverse=new en}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class sr extends qb{constructor(e=50,t=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=mm*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(C0*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return mm*2*Math.atan(Math.tan(C0*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(C0*.5*this.fov)/this.zoom,n=2*t,i=this.aspect*n,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const c=o.fullWidth,u=o.fullHeight;s+=o.offsetX*i/c,t-=o.offsetY*n/u,i*=o.width/c,n*=o.height/u}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const po=-90,mo=1;class hS extends Rn{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n;const i=new sr(po,mo,e,t);i.layers=this.layers,i.up.set(0,1,0),i.lookAt(1,0,0),this.add(i);const s=new sr(po,mo,e,t);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),this.add(s);const o=new sr(po,mo,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(0,1,0),this.add(o);const a=new sr(po,mo,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);const c=new sr(po,mo,e,t);c.layers=this.layers,c.up.set(0,1,0),c.lookAt(0,0,1),this.add(c);const u=new sr(po,mo,e,t);u.layers=this.layers,u.up.set(0,1,0),u.lookAt(0,0,-1),this.add(u)}update(e,t){this.parent===null&&this.updateMatrixWorld();const n=this.renderTarget,[i,s,o,a,c,u]=this.children,f=e.getRenderTarget(),d=e.toneMapping,m=e.xr.enabled;e.toneMapping=vi,e.xr.enabled=!1;const v=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,i),e.setRenderTarget(n,1),e.render(t,s),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,a),e.setRenderTarget(n,4),e.render(t,c),n.texture.generateMipmaps=v,e.setRenderTarget(n,5),e.render(t,u),e.setRenderTarget(f),e.toneMapping=d,e.xr.enabled=m,n.texture.needsPMREMUpdate=!0}}class Xb extends ar{constructor(e,t,n,i,s,o,a,c,u,f){e=e!==void 0?e:[],t=t!==void 0?t:Vo,super(e,t,n,i,s,o,a,c,u,f),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class fS extends Ds{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];this.texture=new Xb(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:gr}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new yl(5,5,5),s=new ks({name:"CubemapFromEquirect",uniforms:Go(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:vr,blending:Hi});s.uniforms.tEquirect.value=t;const o=new mi(i,s),a=t.minFilter;return t.minFilter===rl&&(t.minFilter=gr),new hS(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,i);e.setRenderTarget(s)}}const W0=new Y,dS=new Y,pS=new or;let us=class{constructor(e=new Y(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=W0.subVectors(n,t).cross(dS.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const n=e.delta(W0),i=this.normal.dot(n);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(n).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||pS.getNormalMatrix(e),i=this.coplanarPoint(W0).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}};const go=new pu,ec=new Y;class Of{constructor(e=new us,t=new us,n=new us,i=new us,s=new us,o=new us){this.planes=[e,t,n,i,s,o]}set(e,t,n,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,i=n[0],s=n[1],o=n[2],a=n[3],c=n[4],u=n[5],f=n[6],d=n[7],m=n[8],v=n[9],S=n[10],x=n[11],w=n[12],A=n[13],T=n[14],E=n[15];return t[0].setComponents(a-i,d-c,x-m,E-w).normalize(),t[1].setComponents(a+i,d+c,x+m,E+w).normalize(),t[2].setComponents(a+s,d+u,x+v,E+A).normalize(),t[3].setComponents(a-s,d-u,x-v,E-A).normalize(),t[4].setComponents(a-o,d-f,x-S,E-T).normalize(),t[5].setComponents(a+o,d+f,x+S,E+T).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),go.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(go)}intersectsSprite(e){return go.center.set(0,0,0),go.radius=.7071067811865476,go.applyMatrix4(e.matrixWorld),this.intersectsSphere(go)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(ec.x=i.normal.x>0?e.max.x:e.min.x,ec.y=i.normal.y>0?e.max.y:e.min.y,ec.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(ec)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function Yb(){let r=null,e=!1,t=null,n=null;function i(s,o){t(s,o),n=r.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(n=r.requestAnimationFrame(i),e=!0)},stop:function(){r.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){r=s}}}function mS(r,e){const t=e.isWebGL2,n=new WeakMap;function i(u,f){const d=u.array,m=u.usage,v=r.createBuffer();r.bindBuffer(f,v),r.bufferData(f,d,m),u.onUploadCallback();let S;if(d instanceof Float32Array)S=5126;else if(d instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(t)S=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else S=5123;else if(d instanceof Int16Array)S=5122;else if(d instanceof Uint32Array)S=5125;else if(d instanceof Int32Array)S=5124;else if(d instanceof Int8Array)S=5120;else if(d instanceof Uint8Array)S=5121;else if(d instanceof Uint8ClampedArray)S=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:v,type:S,bytesPerElement:d.BYTES_PER_ELEMENT,version:u.version}}function s(u,f,d){const m=f.array,v=f.updateRange;r.bindBuffer(d,u),v.count===-1?r.bufferSubData(d,0,m):(t?r.bufferSubData(d,v.offset*m.BYTES_PER_ELEMENT,m,v.offset,v.count):r.bufferSubData(d,v.offset*m.BYTES_PER_ELEMENT,m.subarray(v.offset,v.offset+v.count)),v.count=-1),f.onUploadCallback()}function o(u){return u.isInterleavedBufferAttribute&&(u=u.data),n.get(u)}function a(u){u.isInterleavedBufferAttribute&&(u=u.data);const f=n.get(u);f&&(r.deleteBuffer(f.buffer),n.delete(u))}function c(u,f){if(u.isGLBufferAttribute){const m=n.get(u);(!m||m.version<u.version)&&n.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);const d=n.get(u);d===void 0?n.set(u,i(u,f)):d.version<u.version&&(s(d.buffer,u,f),d.version=u.version)}return{get:o,remove:a,update:c}}class Bf extends Zn{constructor(e=1,t=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(n),c=Math.floor(i),u=a+1,f=c+1,d=e/a,m=t/c,v=[],S=[],x=[],w=[];for(let A=0;A<f;A++){const T=A*m-o;for(let E=0;E<u;E++){const P=E*d-s;S.push(P,-T,0),x.push(0,0,1),w.push(E/a),w.push(1-A/c)}}for(let A=0;A<c;A++)for(let T=0;T<a;T++){const E=T+u*A,P=T+u*(A+1),y=T+1+u*(A+1),k=T+1+u*A;v.push(E,P,k),v.push(P,y,k)}this.setIndex(v),this.setAttribute("position",new lr(S,3)),this.setAttribute("normal",new lr(x,3)),this.setAttribute("uv",new lr(w,2))}static fromJSON(e){return new Bf(e.width,e.height,e.widthSegments,e.heightSegments)}}var gS=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,vS=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,bS=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,xS=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,wS=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,yS=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,_S="vec3 transformed = vec3( position );",SS=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,CS=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,MS=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,ES=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,AS=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,PS=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,TS=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,LS=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,IS=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,DS=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,RS=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,kS=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,FS=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,OS=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,BS=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,NS=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,US=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,VS=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,zS=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,$S="gl_FragColor = linearToOutputTexel( gl_FragColor );",GS=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,HS=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,WS=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,qS=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,XS=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,YS=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,jS=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,ZS=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,KS=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,JS=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,QS=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,eC=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,tC=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,nC=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,rC=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,iC=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,sC=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,oC=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,aC=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,lC=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,cC=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,uC=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,hC=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,fC=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,dC=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,pC=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,mC=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,gC=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,vC=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,bC=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,xC=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,wC=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,yC=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,_C=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,SC=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,CC=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,MC=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,EC=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,AC=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,PC=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,TC=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,LC=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,IC=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,DC=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,RC=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,kC=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,FC=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,OC=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,BC=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,NC=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,UC=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,VC=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,zC=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,$C=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,GC=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,HC=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,WC=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,qC=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,XC=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,YC=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,jC=`#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,ZC=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,KC=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,JC=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,QC=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,eM=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,tM=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,nM=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,rM=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,iM=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,sM=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,oM=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,aM=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,lM=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,cM=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,uM=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,hM=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,fM=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,dM=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const pM=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,mM=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,gM=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,vM=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,bM=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,xM=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,wM=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,yM=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,_M=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,SM=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,CM=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,MM=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,EM=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,AM=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,PM=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,TM=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,LM=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,IM=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,DM=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,RM=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,kM=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,FM=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,OM=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,BM=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,NM=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,UM=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,VM=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,zM=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$M=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,GM=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,HM=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,WM=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,qM=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,XM=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,dt={alphamap_fragment:gS,alphamap_pars_fragment:vS,alphatest_fragment:bS,alphatest_pars_fragment:xS,aomap_fragment:wS,aomap_pars_fragment:yS,begin_vertex:_S,beginnormal_vertex:SS,bsdfs:CS,iridescence_fragment:MS,bumpmap_pars_fragment:ES,clipping_planes_fragment:AS,clipping_planes_pars_fragment:PS,clipping_planes_pars_vertex:TS,clipping_planes_vertex:LS,color_fragment:IS,color_pars_fragment:DS,color_pars_vertex:RS,color_vertex:kS,common:FS,cube_uv_reflection_fragment:OS,defaultnormal_vertex:BS,displacementmap_pars_vertex:NS,displacementmap_vertex:US,emissivemap_fragment:VS,emissivemap_pars_fragment:zS,encodings_fragment:$S,encodings_pars_fragment:GS,envmap_fragment:HS,envmap_common_pars_fragment:WS,envmap_pars_fragment:qS,envmap_pars_vertex:XS,envmap_physical_pars_fragment:sC,envmap_vertex:YS,fog_vertex:jS,fog_pars_vertex:ZS,fog_fragment:KS,fog_pars_fragment:JS,gradientmap_pars_fragment:QS,lightmap_fragment:eC,lightmap_pars_fragment:tC,lights_lambert_fragment:nC,lights_lambert_pars_fragment:rC,lights_pars_begin:iC,lights_toon_fragment:oC,lights_toon_pars_fragment:aC,lights_phong_fragment:lC,lights_phong_pars_fragment:cC,lights_physical_fragment:uC,lights_physical_pars_fragment:hC,lights_fragment_begin:fC,lights_fragment_maps:dC,lights_fragment_end:pC,logdepthbuf_fragment:mC,logdepthbuf_pars_fragment:gC,logdepthbuf_pars_vertex:vC,logdepthbuf_vertex:bC,map_fragment:xC,map_pars_fragment:wC,map_particle_fragment:yC,map_particle_pars_fragment:_C,metalnessmap_fragment:SC,metalnessmap_pars_fragment:CC,morphcolor_vertex:MC,morphnormal_vertex:EC,morphtarget_pars_vertex:AC,morphtarget_vertex:PC,normal_fragment_begin:TC,normal_fragment_maps:LC,normal_pars_fragment:IC,normal_pars_vertex:DC,normal_vertex:RC,normalmap_pars_fragment:kC,clearcoat_normal_fragment_begin:FC,clearcoat_normal_fragment_maps:OC,clearcoat_pars_fragment:BC,iridescence_pars_fragment:NC,output_fragment:UC,packing:VC,premultiplied_alpha_fragment:zC,project_vertex:$C,dithering_fragment:GC,dithering_pars_fragment:HC,roughnessmap_fragment:WC,roughnessmap_pars_fragment:qC,shadowmap_pars_fragment:XC,shadowmap_pars_vertex:YC,shadowmap_vertex:jC,shadowmask_pars_fragment:ZC,skinbase_vertex:KC,skinning_pars_vertex:JC,skinning_vertex:QC,skinnormal_vertex:eM,specularmap_fragment:tM,specularmap_pars_fragment:nM,tonemapping_fragment:rM,tonemapping_pars_fragment:iM,transmission_fragment:sM,transmission_pars_fragment:oM,uv_pars_fragment:aM,uv_pars_vertex:lM,uv_vertex:cM,uv2_pars_fragment:uM,uv2_pars_vertex:hM,uv2_vertex:fM,worldpos_vertex:dM,background_vert:pM,background_frag:mM,backgroundCube_vert:gM,backgroundCube_frag:vM,cube_vert:bM,cube_frag:xM,depth_vert:wM,depth_frag:yM,distanceRGBA_vert:_M,distanceRGBA_frag:SM,equirect_vert:CM,equirect_frag:MM,linedashed_vert:EM,linedashed_frag:AM,meshbasic_vert:PM,meshbasic_frag:TM,meshlambert_vert:LM,meshlambert_frag:IM,meshmatcap_vert:DM,meshmatcap_frag:RM,meshnormal_vert:kM,meshnormal_frag:FM,meshphong_vert:OM,meshphong_frag:BM,meshphysical_vert:NM,meshphysical_frag:UM,meshtoon_vert:VM,meshtoon_frag:zM,points_vert:$M,points_frag:GM,shadow_vert:HM,shadow_frag:WM,sprite_vert:qM,sprite_frag:XM},$e={common:{diffuse:{value:new Dt(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new or},uv2Transform:{value:new or},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ne(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Dt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Dt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new or}},sprite:{diffuse:{value:new Dt(16777215)},opacity:{value:1},center:{value:new Ne(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new or}}},Br={basic:{uniforms:$n([$e.common,$e.specularmap,$e.envmap,$e.aomap,$e.lightmap,$e.fog]),vertexShader:dt.meshbasic_vert,fragmentShader:dt.meshbasic_frag},lambert:{uniforms:$n([$e.common,$e.specularmap,$e.envmap,$e.aomap,$e.lightmap,$e.emissivemap,$e.bumpmap,$e.normalmap,$e.displacementmap,$e.fog,$e.lights,{emissive:{value:new Dt(0)}}]),vertexShader:dt.meshlambert_vert,fragmentShader:dt.meshlambert_frag},phong:{uniforms:$n([$e.common,$e.specularmap,$e.envmap,$e.aomap,$e.lightmap,$e.emissivemap,$e.bumpmap,$e.normalmap,$e.displacementmap,$e.fog,$e.lights,{emissive:{value:new Dt(0)},specular:{value:new Dt(1118481)},shininess:{value:30}}]),vertexShader:dt.meshphong_vert,fragmentShader:dt.meshphong_frag},standard:{uniforms:$n([$e.common,$e.envmap,$e.aomap,$e.lightmap,$e.emissivemap,$e.bumpmap,$e.normalmap,$e.displacementmap,$e.roughnessmap,$e.metalnessmap,$e.fog,$e.lights,{emissive:{value:new Dt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:dt.meshphysical_vert,fragmentShader:dt.meshphysical_frag},toon:{uniforms:$n([$e.common,$e.aomap,$e.lightmap,$e.emissivemap,$e.bumpmap,$e.normalmap,$e.displacementmap,$e.gradientmap,$e.fog,$e.lights,{emissive:{value:new Dt(0)}}]),vertexShader:dt.meshtoon_vert,fragmentShader:dt.meshtoon_frag},matcap:{uniforms:$n([$e.common,$e.bumpmap,$e.normalmap,$e.displacementmap,$e.fog,{matcap:{value:null}}]),vertexShader:dt.meshmatcap_vert,fragmentShader:dt.meshmatcap_frag},points:{uniforms:$n([$e.points,$e.fog]),vertexShader:dt.points_vert,fragmentShader:dt.points_frag},dashed:{uniforms:$n([$e.common,$e.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:dt.linedashed_vert,fragmentShader:dt.linedashed_frag},depth:{uniforms:$n([$e.common,$e.displacementmap]),vertexShader:dt.depth_vert,fragmentShader:dt.depth_frag},normal:{uniforms:$n([$e.common,$e.bumpmap,$e.normalmap,$e.displacementmap,{opacity:{value:1}}]),vertexShader:dt.meshnormal_vert,fragmentShader:dt.meshnormal_frag},sprite:{uniforms:$n([$e.sprite,$e.fog]),vertexShader:dt.sprite_vert,fragmentShader:dt.sprite_frag},background:{uniforms:{uvTransform:{value:new or},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:dt.background_vert,fragmentShader:dt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:dt.backgroundCube_vert,fragmentShader:dt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:dt.cube_vert,fragmentShader:dt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:dt.equirect_vert,fragmentShader:dt.equirect_frag},distanceRGBA:{uniforms:$n([$e.common,$e.displacementmap,{referencePosition:{value:new Y},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:dt.distanceRGBA_vert,fragmentShader:dt.distanceRGBA_frag},shadow:{uniforms:$n([$e.lights,$e.fog,{color:{value:new Dt(0)},opacity:{value:1}}]),vertexShader:dt.shadow_vert,fragmentShader:dt.shadow_frag}};Br.physical={uniforms:$n([Br.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ne(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Dt(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Ne},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Dt(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Dt(1,1,1)},specularColorMap:{value:null}}]),vertexShader:dt.meshphysical_vert,fragmentShader:dt.meshphysical_frag};const tc={r:0,b:0,g:0};function YM(r,e,t,n,i,s,o){const a=new Dt(0);let c=s===!0?0:1,u,f,d=null,m=0,v=null;function S(w,A){let T=!1,E=A.isScene===!0?A.background:null;E&&E.isTexture&&(E=(A.backgroundBlurriness>0?t:e).get(E));const P=r.xr,y=P.getSession&&P.getSession();y&&y.environmentBlendMode==="additive"&&(E=null),E===null?x(a,c):E&&E.isColor&&(x(E,1),T=!0),(r.autoClear||T)&&r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil),E&&(E.isCubeTexture||E.mapping===du)?(f===void 0&&(f=new mi(new yl(1,1,1),new ks({name:"BackgroundCubeMaterial",uniforms:Go(Br.backgroundCube.uniforms),vertexShader:Br.backgroundCube.vertexShader,fragmentShader:Br.backgroundCube.fragmentShader,side:vr,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(k,F,M){this.matrixWorld.copyPosition(M.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(f)),f.material.uniforms.envMap.value=E,f.material.uniforms.flipEnvMap.value=E.isCubeTexture&&E.isRenderTargetTexture===!1?-1:1,f.material.uniforms.backgroundBlurriness.value=A.backgroundBlurriness,f.material.uniforms.backgroundIntensity.value=A.backgroundIntensity,f.material.toneMapped=E.encoding!==Vt,(d!==E||m!==E.version||v!==r.toneMapping)&&(f.material.needsUpdate=!0,d=E,m=E.version,v=r.toneMapping),f.layers.enableAll(),w.unshift(f,f.geometry,f.material,0,0,null)):E&&E.isTexture&&(u===void 0&&(u=new mi(new Bf(2,2),new ks({name:"BackgroundMaterial",uniforms:Go(Br.background.uniforms),vertexShader:Br.background.vertexShader,fragmentShader:Br.background.fragmentShader,side:Ts,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=E,u.material.uniforms.backgroundIntensity.value=A.backgroundIntensity,u.material.toneMapped=E.encoding!==Vt,E.matrixAutoUpdate===!0&&E.updateMatrix(),u.material.uniforms.uvTransform.value.copy(E.matrix),(d!==E||m!==E.version||v!==r.toneMapping)&&(u.material.needsUpdate=!0,d=E,m=E.version,v=r.toneMapping),u.layers.enableAll(),w.unshift(u,u.geometry,u.material,0,0,null))}function x(w,A){w.getRGB(tc,Wb(r)),n.buffers.color.setClear(tc.r,tc.g,tc.b,A,o)}return{getClearColor:function(){return a},setClearColor:function(w,A=1){a.set(w),c=A,x(a,c)},getClearAlpha:function(){return c},setClearAlpha:function(w){c=w,x(a,c)},render:S}}function jM(r,e,t,n){const i=r.getParameter(34921),s=n.isWebGL2?null:e.get("OES_vertex_array_object"),o=n.isWebGL2||s!==null,a={},c=w(null);let u=c,f=!1;function d(V,q,j,ge,K){let Ee=!1;if(o){const Pe=x(ge,j,q);u!==Pe&&(u=Pe,v(u.object)),Ee=A(V,ge,j,K),Ee&&T(V,ge,j,K)}else{const Pe=q.wireframe===!0;(u.geometry!==ge.id||u.program!==j.id||u.wireframe!==Pe)&&(u.geometry=ge.id,u.program=j.id,u.wireframe=Pe,Ee=!0)}K!==null&&t.update(K,34963),(Ee||f)&&(f=!1,M(V,q,j,ge),K!==null&&r.bindBuffer(34963,t.get(K).buffer))}function m(){return n.isWebGL2?r.createVertexArray():s.createVertexArrayOES()}function v(V){return n.isWebGL2?r.bindVertexArray(V):s.bindVertexArrayOES(V)}function S(V){return n.isWebGL2?r.deleteVertexArray(V):s.deleteVertexArrayOES(V)}function x(V,q,j){const ge=j.wireframe===!0;let K=a[V.id];K===void 0&&(K={},a[V.id]=K);let Ee=K[q.id];Ee===void 0&&(Ee={},K[q.id]=Ee);let Pe=Ee[ge];return Pe===void 0&&(Pe=w(m()),Ee[ge]=Pe),Pe}function w(V){const q=[],j=[],ge=[];for(let K=0;K<i;K++)q[K]=0,j[K]=0,ge[K]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:q,enabledAttributes:j,attributeDivisors:ge,object:V,attributes:{},index:null}}function A(V,q,j,ge){const K=u.attributes,Ee=q.attributes;let Pe=0;const re=j.getAttributes();for(const ae in re)if(re[ae].location>=0){const be=K[ae];let De=Ee[ae];if(De===void 0&&(ae==="instanceMatrix"&&V.instanceMatrix&&(De=V.instanceMatrix),ae==="instanceColor"&&V.instanceColor&&(De=V.instanceColor)),be===void 0||be.attribute!==De||De&&be.data!==De.data)return!0;Pe++}return u.attributesNum!==Pe||u.index!==ge}function T(V,q,j,ge){const K={},Ee=q.attributes;let Pe=0;const re=j.getAttributes();for(const ae in re)if(re[ae].location>=0){let be=Ee[ae];be===void 0&&(ae==="instanceMatrix"&&V.instanceMatrix&&(be=V.instanceMatrix),ae==="instanceColor"&&V.instanceColor&&(be=V.instanceColor));const De={};De.attribute=be,be&&be.data&&(De.data=be.data),K[ae]=De,Pe++}u.attributes=K,u.attributesNum=Pe,u.index=ge}function E(){const V=u.newAttributes;for(let q=0,j=V.length;q<j;q++)V[q]=0}function P(V){y(V,0)}function y(V,q){const j=u.newAttributes,ge=u.enabledAttributes,K=u.attributeDivisors;j[V]=1,ge[V]===0&&(r.enableVertexAttribArray(V),ge[V]=1),K[V]!==q&&((n.isWebGL2?r:e.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](V,q),K[V]=q)}function k(){const V=u.newAttributes,q=u.enabledAttributes;for(let j=0,ge=q.length;j<ge;j++)q[j]!==V[j]&&(r.disableVertexAttribArray(j),q[j]=0)}function F(V,q,j,ge,K,Ee){n.isWebGL2===!0&&(j===5124||j===5125)?r.vertexAttribIPointer(V,q,j,K,Ee):r.vertexAttribPointer(V,q,j,ge,K,Ee)}function M(V,q,j,ge){if(n.isWebGL2===!1&&(V.isInstancedMesh||ge.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;E();const K=ge.attributes,Ee=j.getAttributes(),Pe=q.defaultAttributeValues;for(const re in Ee){const ae=Ee[re];if(ae.location>=0){let xe=K[re];if(xe===void 0&&(re==="instanceMatrix"&&V.instanceMatrix&&(xe=V.instanceMatrix),re==="instanceColor"&&V.instanceColor&&(xe=V.instanceColor)),xe!==void 0){const be=xe.normalized,De=xe.itemSize,ve=t.get(xe);if(ve===void 0)continue;const Je=ve.buffer,pe=ve.type,he=ve.bytesPerElement;if(xe.isInterleavedBufferAttribute){const le=xe.data,ue=le.stride,te=xe.offset;if(le.isInstancedInterleavedBuffer){for(let se=0;se<ae.locationSize;se++)y(ae.location+se,le.meshPerAttribute);V.isInstancedMesh!==!0&&ge._maxInstanceCount===void 0&&(ge._maxInstanceCount=le.meshPerAttribute*le.count)}else for(let se=0;se<ae.locationSize;se++)P(ae.location+se);r.bindBuffer(34962,Je);for(let se=0;se<ae.locationSize;se++)F(ae.location+se,De/ae.locationSize,pe,be,ue*he,(te+De/ae.locationSize*se)*he)}else{if(xe.isInstancedBufferAttribute){for(let le=0;le<ae.locationSize;le++)y(ae.location+le,xe.meshPerAttribute);V.isInstancedMesh!==!0&&ge._maxInstanceCount===void 0&&(ge._maxInstanceCount=xe.meshPerAttribute*xe.count)}else for(let le=0;le<ae.locationSize;le++)P(ae.location+le);r.bindBuffer(34962,Je);for(let le=0;le<ae.locationSize;le++)F(ae.location+le,De/ae.locationSize,pe,be,De*he,De/ae.locationSize*le*he)}}else if(Pe!==void 0){const be=Pe[re];if(be!==void 0)switch(be.length){case 2:r.vertexAttrib2fv(ae.location,be);break;case 3:r.vertexAttrib3fv(ae.location,be);break;case 4:r.vertexAttrib4fv(ae.location,be);break;default:r.vertexAttrib1fv(ae.location,be)}}}}k()}function R(){Q();for(const V in a){const q=a[V];for(const j in q){const ge=q[j];for(const K in ge)S(ge[K].object),delete ge[K];delete q[j]}delete a[V]}}function O(V){if(a[V.id]===void 0)return;const q=a[V.id];for(const j in q){const ge=q[j];for(const K in ge)S(ge[K].object),delete ge[K];delete q[j]}delete a[V.id]}function z(V){for(const q in a){const j=a[q];if(j[V.id]===void 0)continue;const ge=j[V.id];for(const K in ge)S(ge[K].object),delete ge[K];delete j[V.id]}}function Q(){G(),f=!0,u!==c&&(u=c,v(u.object))}function G(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:d,reset:Q,resetDefaultState:G,dispose:R,releaseStatesOfGeometry:O,releaseStatesOfProgram:z,initAttributes:E,enableAttribute:P,disableUnusedAttributes:k}}function ZM(r,e,t,n){const i=n.isWebGL2;let s;function o(u){s=u}function a(u,f){r.drawArrays(s,u,f),t.update(f,s,1)}function c(u,f,d){if(d===0)return;let m,v;if(i)m=r,v="drawArraysInstanced";else if(m=e.get("ANGLE_instanced_arrays"),v="drawArraysInstancedANGLE",m===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[v](s,u,f,d),t.update(f,s,d)}this.setMode=o,this.render=a,this.renderInstances=c}function KM(r,e,t){let n;function i(){if(n!==void 0)return n;if(e.has("EXT_texture_filter_anisotropic")===!0){const F=e.get("EXT_texture_filter_anisotropic");n=r.getParameter(F.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n}function s(F){if(F==="highp"){if(r.getShaderPrecisionFormat(35633,36338).precision>0&&r.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";F="mediump"}return F==="mediump"&&r.getShaderPrecisionFormat(35633,36337).precision>0&&r.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&r instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&r instanceof WebGL2ComputeRenderingContext;let a=t.precision!==void 0?t.precision:"highp";const c=s(a);c!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",c,"instead."),a=c);const u=o||e.has("WEBGL_draw_buffers"),f=t.logarithmicDepthBuffer===!0,d=r.getParameter(34930),m=r.getParameter(35660),v=r.getParameter(3379),S=r.getParameter(34076),x=r.getParameter(34921),w=r.getParameter(36347),A=r.getParameter(36348),T=r.getParameter(36349),E=m>0,P=o||e.has("OES_texture_float"),y=E&&P,k=o?r.getParameter(36183):0;return{isWebGL2:o,drawBuffers:u,getMaxAnisotropy:i,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:f,maxTextures:d,maxVertexTextures:m,maxTextureSize:v,maxCubemapSize:S,maxAttributes:x,maxVertexUniforms:w,maxVaryings:A,maxFragmentUniforms:T,vertexTextures:E,floatFragmentTextures:P,floatVertexTextures:y,maxSamples:k}}function JM(r){const e=this;let t=null,n=0,i=!1,s=!1;const o=new us,a=new or,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(d,m,v){const S=d.length!==0||m||n!==0||i;return i=m,t=f(d,v,0),n=d.length,S},this.beginShadows=function(){s=!0,f(null)},this.endShadows=function(){s=!1,u()},this.setState=function(d,m,v){const S=d.clippingPlanes,x=d.clipIntersection,w=d.clipShadows,A=r.get(d);if(!i||S===null||S.length===0||s&&!w)s?f(null):u();else{const T=s?0:n,E=T*4;let P=A.clippingState||null;c.value=P,P=f(S,m,E,v);for(let y=0;y!==E;++y)P[y]=t[y];A.clippingState=P,this.numIntersection=x?this.numPlanes:0,this.numPlanes+=T}};function u(){c.value!==t&&(c.value=t,c.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function f(d,m,v,S){const x=d!==null?d.length:0;let w=null;if(x!==0){if(w=c.value,S!==!0||w===null){const A=v+x*4,T=m.matrixWorldInverse;a.getNormalMatrix(T),(w===null||w.length<A)&&(w=new Float32Array(A));for(let E=0,P=v;E!==x;++E,P+=4)o.copy(d[E]).applyMatrix4(T,a),o.normal.toArray(w,P),w[P+3]=o.constant}c.value=w,c.needsUpdate=!0}return e.numPlanes=x,e.numIntersection=0,w}}function QM(r){let e=new WeakMap;function t(o,a){return a===Zh?o.mapping=Vo:a===Kh&&(o.mapping=zo),o}function n(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===Zh||a===Kh)if(e.has(o)){const c=e.get(o).texture;return t(c,o.mapping)}else{const c=o.image;if(c&&c.height>0){const u=new fS(c.height/2);return u.fromEquirectangularTexture(r,o),e.set(o,u),o.addEventListener("dispose",i),t(u.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const c=e.get(a);c!==void 0&&(e.delete(a),c.dispose())}function s(){e=new WeakMap}return{get:n,dispose:s}}class eE extends qb{constructor(e=-1,t=1,n=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=n-e,o=n+e,a=i+t,c=i-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,o=s+u*this.view.width,a-=f*this.view.offsetY,c=a-f*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,c,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Io=4,Am=[.125,.215,.35,.446,.526,.582],ps=20,q0=new eE,Pm=new Dt;let X0=null;const hs=(1+Math.sqrt(5))/2,vo=1/hs,Tm=[new Y(1,1,1),new Y(-1,1,1),new Y(1,1,-1),new Y(-1,1,-1),new Y(0,hs,vo),new Y(0,hs,-vo),new Y(vo,0,hs),new Y(-vo,0,hs),new Y(hs,vo,0),new Y(-hs,vo,0)];class Lm{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,i=100){X0=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,n,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Rm(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Dm(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(X0),e.scissorTest=!1,nc(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Vo||e.mapping===zo?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),X0=this._renderer.getRenderTarget();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:gr,minFilter:gr,generateMipmaps:!1,type:il,format:Er,encoding:Is,depthBuffer:!1},i=Im(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Im(e,t,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=tE(s)),this._blurMaterial=nE(s,e,t)}return i}_compileMaterial(e){const t=new mi(this._lodPlanes[0],e);this._renderer.compile(t,q0)}_sceneToCubeUV(e,t,n,i){const a=new sr(90,1,t,n),c=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],f=this._renderer,d=f.autoClear,m=f.toneMapping;f.getClearColor(Pm),f.toneMapping=vi,f.autoClear=!1;const v=new $b({name:"PMREM.Background",side:vr,depthWrite:!1,depthTest:!1}),S=new mi(new yl,v);let x=!1;const w=e.background;w?w.isColor&&(v.color.copy(w),e.background=null,x=!0):(v.color.copy(Pm),x=!0);for(let A=0;A<6;A++){const T=A%3;T===0?(a.up.set(0,c[A],0),a.lookAt(u[A],0,0)):T===1?(a.up.set(0,0,c[A]),a.lookAt(0,u[A],0)):(a.up.set(0,c[A],0),a.lookAt(0,0,u[A]));const E=this._cubeSize;nc(i,T*E,A>2?E:0,E,E),f.setRenderTarget(i),x&&f.render(S,a),f.render(e,a)}S.geometry.dispose(),S.material.dispose(),f.toneMapping=m,f.autoClear=d,e.background=w}_textureToCubeUV(e,t){const n=this._renderer,i=e.mapping===Vo||e.mapping===zo;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=Rm()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Dm());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new mi(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const c=this._cubeSize;nc(t,0,0,3*c,2*c),n.setRenderTarget(t),n.render(o,q0)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=Tm[(i-1)%Tm.length];this._blur(e,i-1,i,s,o)}t.autoClear=n}_blur(e,t,n,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,i,"latitudinal",s),this._halfBlur(o,e,n,n,i,"longitudinal",s)}_halfBlur(e,t,n,i,s,o,a){const c=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const f=3,d=new mi(this._lodPlanes[i],u),m=u.uniforms,v=this._sizeLods[n]-1,S=isFinite(s)?Math.PI/(2*v):2*Math.PI/(2*ps-1),x=s/S,w=isFinite(s)?1+Math.floor(f*x):ps;w>ps&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${w} samples when the maximum is set to ${ps}`);const A=[];let T=0;for(let F=0;F<ps;++F){const M=F/x,R=Math.exp(-M*M/2);A.push(R),F===0?T+=R:F<w&&(T+=2*R)}for(let F=0;F<A.length;F++)A[F]=A[F]/T;m.envMap.value=e.texture,m.samples.value=w,m.weights.value=A,m.latitudinal.value=o==="latitudinal",a&&(m.poleAxis.value=a);const{_lodMax:E}=this;m.dTheta.value=S,m.mipInt.value=E-n;const P=this._sizeLods[i],y=3*P*(i>E-Io?i-E+Io:0),k=4*(this._cubeSize-P);nc(t,y,k,3*P,2*P),c.setRenderTarget(t),c.render(d,q0)}}function tE(r){const e=[],t=[],n=[];let i=r;const s=r-Io+1+Am.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let c=1/a;o>r-Io?c=Am[o-r+Io-1]:o===0&&(c=0),n.push(c);const u=1/(a-2),f=-u,d=1+u,m=[f,f,d,f,d,d,f,f,d,d,f,d],v=6,S=6,x=3,w=2,A=1,T=new Float32Array(x*S*v),E=new Float32Array(w*S*v),P=new Float32Array(A*S*v);for(let k=0;k<v;k++){const F=k%3*2/3-1,M=k>2?0:-1,R=[F,M,0,F+2/3,M,0,F+2/3,M+1,0,F,M,0,F+2/3,M+1,0,F,M+1,0];T.set(R,x*S*k),E.set(m,w*S*k);const O=[k,k,k,k,k,k];P.set(O,A*S*k)}const y=new Zn;y.setAttribute("position",new jn(T,x)),y.setAttribute("uv",new jn(E,w)),y.setAttribute("faceIndex",new jn(P,A)),e.push(y),i>Io&&i--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function Im(r,e,t){const n=new Ds(r,e,t);return n.texture.mapping=du,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function nc(r,e,t,n,i){r.viewport.set(e,t,n,i),r.scissor.set(e,t,n,i)}function nE(r,e,t){const n=new Float32Array(ps),i=new Y(0,1,0);return new ks({name:"SphericalGaussianBlur",defines:{n:ps,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${r}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:Nf(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Hi,depthTest:!1,depthWrite:!1})}function Dm(){return new ks({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Nf(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Hi,depthTest:!1,depthWrite:!1})}function Rm(){return new ks({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Nf(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Hi,depthTest:!1,depthWrite:!1})}function Nf(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function rE(r){let e=new WeakMap,t=null;function n(a){if(a&&a.isTexture){const c=a.mapping,u=c===Zh||c===Kh,f=c===Vo||c===zo;if(u||f)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let d=e.get(a);return t===null&&(t=new Lm(r)),d=u?t.fromEquirectangular(a,d):t.fromCubemap(a,d),e.set(a,d),d.texture}else{if(e.has(a))return e.get(a).texture;{const d=a.image;if(u&&d&&d.height>0||f&&d&&i(d)){t===null&&(t=new Lm(r));const m=u?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,m),a.addEventListener("dispose",s),m.texture}else return null}}}return a}function i(a){let c=0;const u=6;for(let f=0;f<u;f++)a[f]!==void 0&&c++;return c===u}function s(a){const c=a.target;c.removeEventListener("dispose",s);const u=e.get(c);u!==void 0&&(e.delete(c),u.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:o}}function iE(r){const e={};function t(n){if(e[n]!==void 0)return e[n];let i;switch(n){case"WEBGL_depth_texture":i=r.getExtension("WEBGL_depth_texture")||r.getExtension("MOZ_WEBGL_depth_texture")||r.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=r.getExtension("WEBGL_compressed_texture_s3tc")||r.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=r.getExtension(n)}return e[n]=i,i}return{has:function(n){return t(n)!==null},init:function(n){n.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(n){const i=t(n);return i===null&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),i}}}function sE(r,e,t,n){const i={},s=new WeakMap;function o(d){const m=d.target;m.index!==null&&e.remove(m.index);for(const S in m.attributes)e.remove(m.attributes[S]);m.removeEventListener("dispose",o),delete i[m.id];const v=s.get(m);v&&(e.remove(v),s.delete(m)),n.releaseStatesOfGeometry(m),m.isInstancedBufferGeometry===!0&&delete m._maxInstanceCount,t.memory.geometries--}function a(d,m){return i[m.id]===!0||(m.addEventListener("dispose",o),i[m.id]=!0,t.memory.geometries++),m}function c(d){const m=d.attributes;for(const S in m)e.update(m[S],34962);const v=d.morphAttributes;for(const S in v){const x=v[S];for(let w=0,A=x.length;w<A;w++)e.update(x[w],34962)}}function u(d){const m=[],v=d.index,S=d.attributes.position;let x=0;if(v!==null){const T=v.array;x=v.version;for(let E=0,P=T.length;E<P;E+=3){const y=T[E+0],k=T[E+1],F=T[E+2];m.push(y,k,k,F,F,y)}}else{const T=S.array;x=S.version;for(let E=0,P=T.length/3-1;E<P;E+=3){const y=E+0,k=E+1,F=E+2;m.push(y,k,k,F,F,y)}}const w=new(Bb(m)?Hb:Gb)(m,1);w.version=x;const A=s.get(d);A&&e.remove(A),s.set(d,w)}function f(d){const m=s.get(d);if(m){const v=d.index;v!==null&&m.version<v.version&&u(d)}else u(d);return s.get(d)}return{get:a,update:c,getWireframeAttribute:f}}function oE(r,e,t,n){const i=n.isWebGL2;let s;function o(m){s=m}let a,c;function u(m){a=m.type,c=m.bytesPerElement}function f(m,v){r.drawElements(s,v,a,m*c),t.update(v,s,1)}function d(m,v,S){if(S===0)return;let x,w;if(i)x=r,w="drawElementsInstanced";else if(x=e.get("ANGLE_instanced_arrays"),w="drawElementsInstancedANGLE",x===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}x[w](s,v,a,m*c,S),t.update(v,s,S)}this.setMode=o,this.setIndex=u,this.render=f,this.renderInstances=d}function aE(r){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(s,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(s/3);break;case 1:t.lines+=a*(s/2);break;case 3:t.lines+=a*(s-1);break;case 2:t.lines+=a*s;break;case 0:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:n}}function lE(r,e){return r[0]-e[0]}function cE(r,e){return Math.abs(e[1])-Math.abs(r[1])}function uE(r,e,t){const n={},i=new Float32Array(8),s=new WeakMap,o=new Wt,a=[];for(let u=0;u<8;u++)a[u]=[u,0];function c(u,f,d,m){const v=u.morphTargetInfluences;if(e.isWebGL2===!0){const x=f.morphAttributes.position||f.morphAttributes.normal||f.morphAttributes.color,w=x!==void 0?x.length:0;let A=s.get(f);if(A===void 0||A.count!==w){let j=function(){V.dispose(),s.delete(f),f.removeEventListener("dispose",j)};var S=j;A!==void 0&&A.texture.dispose();const P=f.morphAttributes.position!==void 0,y=f.morphAttributes.normal!==void 0,k=f.morphAttributes.color!==void 0,F=f.morphAttributes.position||[],M=f.morphAttributes.normal||[],R=f.morphAttributes.color||[];let O=0;P===!0&&(O=1),y===!0&&(O=2),k===!0&&(O=3);let z=f.attributes.position.count*O,Q=1;z>e.maxTextureSize&&(Q=Math.ceil(z/e.maxTextureSize),z=e.maxTextureSize);const G=new Float32Array(z*Q*4*w),V=new zb(G,z,Q,w);V.type=vs,V.needsUpdate=!0;const q=O*4;for(let ge=0;ge<w;ge++){const K=F[ge],Ee=M[ge],Pe=R[ge],re=z*Q*4*ge;for(let ae=0;ae<K.count;ae++){const xe=ae*q;P===!0&&(o.fromBufferAttribute(K,ae),G[re+xe+0]=o.x,G[re+xe+1]=o.y,G[re+xe+2]=o.z,G[re+xe+3]=0),y===!0&&(o.fromBufferAttribute(Ee,ae),G[re+xe+4]=o.x,G[re+xe+5]=o.y,G[re+xe+6]=o.z,G[re+xe+7]=0),k===!0&&(o.fromBufferAttribute(Pe,ae),G[re+xe+8]=o.x,G[re+xe+9]=o.y,G[re+xe+10]=o.z,G[re+xe+11]=Pe.itemSize===4?o.w:1)}}A={count:w,texture:V,size:new Ne(z,Q)},s.set(f,A),f.addEventListener("dispose",j)}let T=0;for(let P=0;P<v.length;P++)T+=v[P];const E=f.morphTargetsRelative?1:1-T;m.getUniforms().setValue(r,"morphTargetBaseInfluence",E),m.getUniforms().setValue(r,"morphTargetInfluences",v),m.getUniforms().setValue(r,"morphTargetsTexture",A.texture,t),m.getUniforms().setValue(r,"morphTargetsTextureSize",A.size)}else{const x=v===void 0?0:v.length;let w=n[f.id];if(w===void 0||w.length!==x){w=[];for(let y=0;y<x;y++)w[y]=[y,0];n[f.id]=w}for(let y=0;y<x;y++){const k=w[y];k[0]=y,k[1]=v[y]}w.sort(cE);for(let y=0;y<8;y++)y<x&&w[y][1]?(a[y][0]=w[y][0],a[y][1]=w[y][1]):(a[y][0]=Number.MAX_SAFE_INTEGER,a[y][1]=0);a.sort(lE);const A=f.morphAttributes.position,T=f.morphAttributes.normal;let E=0;for(let y=0;y<8;y++){const k=a[y],F=k[0],M=k[1];F!==Number.MAX_SAFE_INTEGER&&M?(A&&f.getAttribute("morphTarget"+y)!==A[F]&&f.setAttribute("morphTarget"+y,A[F]),T&&f.getAttribute("morphNormal"+y)!==T[F]&&f.setAttribute("morphNormal"+y,T[F]),i[y]=M,E+=M):(A&&f.hasAttribute("morphTarget"+y)===!0&&f.deleteAttribute("morphTarget"+y),T&&f.hasAttribute("morphNormal"+y)===!0&&f.deleteAttribute("morphNormal"+y),i[y]=0)}const P=f.morphTargetsRelative?1:1-E;m.getUniforms().setValue(r,"morphTargetBaseInfluence",P),m.getUniforms().setValue(r,"morphTargetInfluences",i)}}return{update:c}}function hE(r,e,t,n){let i=new WeakMap;function s(c){const u=n.render.frame,f=c.geometry,d=e.get(c,f);return i.get(d)!==u&&(e.update(d),i.set(d,u)),c.isInstancedMesh&&(c.hasEventListener("dispose",a)===!1&&c.addEventListener("dispose",a),t.update(c.instanceMatrix,34962),c.instanceColor!==null&&t.update(c.instanceColor,34962)),d}function o(){i=new WeakMap}function a(c){const u=c.target;u.removeEventListener("dispose",a),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:s,dispose:o}}const jb=new ar,Zb=new zb,Kb=new Z4,Jb=new Xb,km=[],Fm=[],Om=new Float32Array(16),Bm=new Float32Array(9),Nm=new Float32Array(4);function ea(r,e,t){const n=r[0];if(n<=0||n>0)return r;const i=e*t;let s=km[i];if(s===void 0&&(s=new Float32Array(i),km[i]=s),e!==0){n.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,r[o].toArray(s,a)}return s}function pn(r,e){if(r.length!==e.length)return!1;for(let t=0,n=r.length;t<n;t++)if(r[t]!==e[t])return!1;return!0}function mn(r,e){for(let t=0,n=e.length;t<n;t++)r[t]=e[t]}function mu(r,e){let t=Fm[e];t===void 0&&(t=new Int32Array(e),Fm[e]=t);for(let n=0;n!==e;++n)t[n]=r.allocateTextureUnit();return t}function fE(r,e){const t=this.cache;t[0]!==e&&(r.uniform1f(this.addr,e),t[0]=e)}function dE(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(pn(t,e))return;r.uniform2fv(this.addr,e),mn(t,e)}}function pE(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(r.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(pn(t,e))return;r.uniform3fv(this.addr,e),mn(t,e)}}function mE(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(pn(t,e))return;r.uniform4fv(this.addr,e),mn(t,e)}}function gE(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(pn(t,e))return;r.uniformMatrix2fv(this.addr,!1,e),mn(t,e)}else{if(pn(t,n))return;Nm.set(n),r.uniformMatrix2fv(this.addr,!1,Nm),mn(t,n)}}function vE(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(pn(t,e))return;r.uniformMatrix3fv(this.addr,!1,e),mn(t,e)}else{if(pn(t,n))return;Bm.set(n),r.uniformMatrix3fv(this.addr,!1,Bm),mn(t,n)}}function bE(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(pn(t,e))return;r.uniformMatrix4fv(this.addr,!1,e),mn(t,e)}else{if(pn(t,n))return;Om.set(n),r.uniformMatrix4fv(this.addr,!1,Om),mn(t,n)}}function xE(r,e){const t=this.cache;t[0]!==e&&(r.uniform1i(this.addr,e),t[0]=e)}function wE(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(pn(t,e))return;r.uniform2iv(this.addr,e),mn(t,e)}}function yE(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(pn(t,e))return;r.uniform3iv(this.addr,e),mn(t,e)}}function _E(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(pn(t,e))return;r.uniform4iv(this.addr,e),mn(t,e)}}function SE(r,e){const t=this.cache;t[0]!==e&&(r.uniform1ui(this.addr,e),t[0]=e)}function CE(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(pn(t,e))return;r.uniform2uiv(this.addr,e),mn(t,e)}}function ME(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(pn(t,e))return;r.uniform3uiv(this.addr,e),mn(t,e)}}function EE(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(pn(t,e))return;r.uniform4uiv(this.addr,e),mn(t,e)}}function AE(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture2D(e||jb,i)}function PE(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture3D(e||Kb,i)}function TE(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTextureCube(e||Jb,i)}function LE(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture2DArray(e||Zb,i)}function IE(r){switch(r){case 5126:return fE;case 35664:return dE;case 35665:return pE;case 35666:return mE;case 35674:return gE;case 35675:return vE;case 35676:return bE;case 5124:case 35670:return xE;case 35667:case 35671:return wE;case 35668:case 35672:return yE;case 35669:case 35673:return _E;case 5125:return SE;case 36294:return CE;case 36295:return ME;case 36296:return EE;case 35678:case 36198:case 36298:case 36306:case 35682:return AE;case 35679:case 36299:case 36307:return PE;case 35680:case 36300:case 36308:case 36293:return TE;case 36289:case 36303:case 36311:case 36292:return LE}}function DE(r,e){r.uniform1fv(this.addr,e)}function RE(r,e){const t=ea(e,this.size,2);r.uniform2fv(this.addr,t)}function kE(r,e){const t=ea(e,this.size,3);r.uniform3fv(this.addr,t)}function FE(r,e){const t=ea(e,this.size,4);r.uniform4fv(this.addr,t)}function OE(r,e){const t=ea(e,this.size,4);r.uniformMatrix2fv(this.addr,!1,t)}function BE(r,e){const t=ea(e,this.size,9);r.uniformMatrix3fv(this.addr,!1,t)}function NE(r,e){const t=ea(e,this.size,16);r.uniformMatrix4fv(this.addr,!1,t)}function UE(r,e){r.uniform1iv(this.addr,e)}function VE(r,e){r.uniform2iv(this.addr,e)}function zE(r,e){r.uniform3iv(this.addr,e)}function $E(r,e){r.uniform4iv(this.addr,e)}function GE(r,e){r.uniform1uiv(this.addr,e)}function HE(r,e){r.uniform2uiv(this.addr,e)}function WE(r,e){r.uniform3uiv(this.addr,e)}function qE(r,e){r.uniform4uiv(this.addr,e)}function XE(r,e,t){const n=this.cache,i=e.length,s=mu(t,i);pn(n,s)||(r.uniform1iv(this.addr,s),mn(n,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||jb,s[o])}function YE(r,e,t){const n=this.cache,i=e.length,s=mu(t,i);pn(n,s)||(r.uniform1iv(this.addr,s),mn(n,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||Kb,s[o])}function jE(r,e,t){const n=this.cache,i=e.length,s=mu(t,i);pn(n,s)||(r.uniform1iv(this.addr,s),mn(n,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||Jb,s[o])}function ZE(r,e,t){const n=this.cache,i=e.length,s=mu(t,i);pn(n,s)||(r.uniform1iv(this.addr,s),mn(n,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||Zb,s[o])}function KE(r){switch(r){case 5126:return DE;case 35664:return RE;case 35665:return kE;case 35666:return FE;case 35674:return OE;case 35675:return BE;case 35676:return NE;case 5124:case 35670:return UE;case 35667:case 35671:return VE;case 35668:case 35672:return zE;case 35669:case 35673:return $E;case 5125:return GE;case 36294:return HE;case 36295:return WE;case 36296:return qE;case 35678:case 36198:case 36298:case 36306:case 35682:return XE;case 35679:case 36299:case 36307:return YE;case 35680:case 36300:case 36308:case 36293:return jE;case 36289:case 36303:case 36311:case 36292:return ZE}}class JE{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=IE(t.type)}}class QE{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=KE(t.type)}}class e5{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,t[a.id],n)}}}const Y0=/(\w+)(\])?(\[|\.)?/g;function Um(r,e){r.seq.push(e),r.map[e.id]=e}function t5(r,e,t){const n=r.name,i=n.length;for(Y0.lastIndex=0;;){const s=Y0.exec(n),o=Y0.lastIndex;let a=s[1];const c=s[2]==="]",u=s[3];if(c&&(a=a|0),u===void 0||u==="["&&o+2===i){Um(t,u===void 0?new JE(a,r,e):new QE(a,r,e));break}else{let d=t.map[a];d===void 0&&(d=new e5(a),Um(t,d)),t=d}}}class Rc{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let i=0;i<n;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);t5(s,o,this)}}setValue(e,t,n,i){const s=this.map[t];s!==void 0&&s.setValue(e,n,i)}setOptional(e,t,n){const i=t[n];i!==void 0&&this.setValue(e,n,i)}static upload(e,t,n,i){for(let s=0,o=t.length;s!==o;++s){const a=t[s],c=n[a.id];c.needsUpdate!==!1&&a.setValue(e,c.value,i)}}static seqWithValue(e,t){const n=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&n.push(o)}return n}}function Vm(r,e,t){const n=r.createShader(e);return r.shaderSource(n,t),r.compileShader(n),n}let n5=0;function r5(r,e){const t=r.split(`
`),n=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const a=o+1;n.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return n.join(`
`)}function i5(r){switch(r){case Is:return["Linear","( value )"];case Vt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",r),["Linear","( value )"]}}function zm(r,e,t){const n=r.getShaderParameter(e,35713),i=r.getShaderInfoLog(e).trim();if(n&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+r5(r.getShaderSource(e),o)}else return i}function s5(r,e){const t=i5(e);return"vec4 "+r+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function o5(r,e){let t;switch(e){case S4:t="Linear";break;case C4:t="Reinhard";break;case M4:t="OptimizedCineon";break;case E4:t="ACESFilmic";break;case A4:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+r+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function a5(r){return[r.extensionDerivatives||r.envMapCubeUVHeight||r.bumpMap||r.tangentSpaceNormalMap||r.clearcoatNormalMap||r.flatShading||r.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(r.extensionFragDepth||r.logarithmicDepthBuffer)&&r.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",r.extensionDrawBuffers&&r.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(r.extensionShaderTextureLOD||r.envMap||r.transmission)&&r.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ga).join(`
`)}function l5(r){const e=[];for(const t in r){const n=r[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function c5(r,e){const t={},n=r.getProgramParameter(e,35721);for(let i=0;i<n;i++){const s=r.getActiveAttrib(e,i),o=s.name;let a=1;s.type===35674&&(a=2),s.type===35675&&(a=3),s.type===35676&&(a=4),t[o]={type:s.type,location:r.getAttribLocation(e,o),locationSize:a}}return t}function Ga(r){return r!==""}function $m(r,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return r.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Gm(r,e){return r.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const u5=/^[ \t]*#include +<([\w\d./]+)>/gm;function nf(r){return r.replace(u5,h5)}function h5(r,e){const t=dt[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return nf(t)}const f5=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Hm(r){return r.replace(f5,d5)}function d5(r,e,t,n){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function Wm(r){let e="precision "+r.precision+` float;
precision `+r.precision+" int;";return r.precision==="highp"?e+=`
#define HIGH_PRECISION`:r.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:r.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function p5(r){let e="SHADOWMAP_TYPE_BASIC";return r.shadowMapType===Db?e="SHADOWMAP_TYPE_PCF":r.shadowMapType===t4?e="SHADOWMAP_TYPE_PCF_SOFT":r.shadowMapType===$a&&(e="SHADOWMAP_TYPE_VSM"),e}function m5(r){let e="ENVMAP_TYPE_CUBE";if(r.envMap)switch(r.envMapMode){case Vo:case zo:e="ENVMAP_TYPE_CUBE";break;case du:e="ENVMAP_TYPE_CUBE_UV";break}return e}function g5(r){let e="ENVMAP_MODE_REFLECTION";if(r.envMap)switch(r.envMapMode){case zo:e="ENVMAP_MODE_REFRACTION";break}return e}function v5(r){let e="ENVMAP_BLENDING_NONE";if(r.envMap)switch(r.combine){case Df:e="ENVMAP_BLENDING_MULTIPLY";break;case y4:e="ENVMAP_BLENDING_MIX";break;case _4:e="ENVMAP_BLENDING_ADD";break}return e}function b5(r){const e=r.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}function x5(r,e,t,n){const i=r.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const c=p5(t),u=m5(t),f=g5(t),d=v5(t),m=b5(t),v=t.isWebGL2?"":a5(t),S=l5(s),x=i.createProgram();let w,A,T=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(w=[S].filter(Ga).join(`
`),w.length>0&&(w+=`
`),A=[v,S].filter(Ga).join(`
`),A.length>0&&(A+=`
`)):(w=[Wm(t),"#define SHADER_NAME "+t.shaderName,S,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Ga).join(`
`),A=[v,Wm(t),"#define SHADER_NAME "+t.shaderName,S,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+f:"",t.envMap?"#define "+d:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==vi?"#define TONE_MAPPING":"",t.toneMapping!==vi?dt.tonemapping_pars_fragment:"",t.toneMapping!==vi?o5("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",dt.encodings_pars_fragment,s5("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Ga).join(`
`)),o=nf(o),o=$m(o,t),o=Gm(o,t),a=nf(a),a=$m(a,t),a=Gm(a,t),o=Hm(o),a=Hm(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(T=`#version 300 es
`,w=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+w,A=["#define varying in",t.glslVersion===pm?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===pm?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+A);const E=T+w+o,P=T+A+a,y=Vm(i,35633,E),k=Vm(i,35632,P);if(i.attachShader(x,y),i.attachShader(x,k),t.index0AttributeName!==void 0?i.bindAttribLocation(x,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(x,0,"position"),i.linkProgram(x),r.debug.checkShaderErrors){const R=i.getProgramInfoLog(x).trim(),O=i.getShaderInfoLog(y).trim(),z=i.getShaderInfoLog(k).trim();let Q=!0,G=!0;if(i.getProgramParameter(x,35714)===!1){Q=!1;const V=zm(i,y,"vertex"),q=zm(i,k,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(x,35715)+`

Program Info Log: `+R+`
`+V+`
`+q)}else R!==""?console.warn("THREE.WebGLProgram: Program Info Log:",R):(O===""||z==="")&&(G=!1);G&&(this.diagnostics={runnable:Q,programLog:R,vertexShader:{log:O,prefix:w},fragmentShader:{log:z,prefix:A}})}i.deleteShader(y),i.deleteShader(k);let F;this.getUniforms=function(){return F===void 0&&(F=new Rc(i,x)),F};let M;return this.getAttributes=function(){return M===void 0&&(M=c5(i,x)),M},this.destroy=function(){n.releaseStatesOfProgram(this),i.deleteProgram(x),this.program=void 0},this.name=t.shaderName,this.id=n5++,this.cacheKey=e,this.usedTimes=1,this.program=x,this.vertexShader=y,this.fragmentShader=k,this}let w5=0;class y5{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new _5(e),t.set(e,n)),n}}class _5{constructor(e){this.id=w5++,this.code=e,this.usedTimes=0}}function S5(r,e,t,n,i,s,o){const a=new Ff,c=new y5,u=[],f=i.isWebGL2,d=i.logarithmicDepthBuffer,m=i.vertexTextures;let v=i.precision;const S={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function x(M,R,O,z,Q){const G=z.fog,V=Q.geometry,q=M.isMeshStandardMaterial?z.environment:null,j=(M.isMeshStandardMaterial?t:e).get(M.envMap||q),ge=j&&j.mapping===du?j.image.height:null,K=S[M.type];M.precision!==null&&(v=i.getMaxPrecision(M.precision),v!==M.precision&&console.warn("THREE.WebGLProgram.getParameters:",M.precision,"not supported, using",v,"instead."));const Ee=V.morphAttributes.position||V.morphAttributes.normal||V.morphAttributes.color,Pe=Ee!==void 0?Ee.length:0;let re=0;V.morphAttributes.position!==void 0&&(re=1),V.morphAttributes.normal!==void 0&&(re=2),V.morphAttributes.color!==void 0&&(re=3);let ae,xe,be,De;if(K){const ue=Br[K];ae=ue.vertexShader,xe=ue.fragmentShader}else ae=M.vertexShader,xe=M.fragmentShader,c.update(M),be=c.getVertexShaderID(M),De=c.getFragmentShaderID(M);const ve=r.getRenderTarget(),Je=M.alphaTest>0,pe=M.clearcoat>0,he=M.iridescence>0;return{isWebGL2:f,shaderID:K,shaderName:M.type,vertexShader:ae,fragmentShader:xe,defines:M.defines,customVertexShaderID:be,customFragmentShaderID:De,isRawShaderMaterial:M.isRawShaderMaterial===!0,glslVersion:M.glslVersion,precision:v,instancing:Q.isInstancedMesh===!0,instancingColor:Q.isInstancedMesh===!0&&Q.instanceColor!==null,supportsVertexTextures:m,outputEncoding:ve===null?r.outputEncoding:ve.isXRRenderTarget===!0?ve.texture.encoding:Is,map:!!M.map,matcap:!!M.matcap,envMap:!!j,envMapMode:j&&j.mapping,envMapCubeUVHeight:ge,lightMap:!!M.lightMap,aoMap:!!M.aoMap,emissiveMap:!!M.emissiveMap,bumpMap:!!M.bumpMap,normalMap:!!M.normalMap,objectSpaceNormalMap:M.normalMapType===q4,tangentSpaceNormalMap:M.normalMapType===Rf,decodeVideoTexture:!!M.map&&M.map.isVideoTexture===!0&&M.map.encoding===Vt,clearcoat:pe,clearcoatMap:pe&&!!M.clearcoatMap,clearcoatRoughnessMap:pe&&!!M.clearcoatRoughnessMap,clearcoatNormalMap:pe&&!!M.clearcoatNormalMap,iridescence:he,iridescenceMap:he&&!!M.iridescenceMap,iridescenceThicknessMap:he&&!!M.iridescenceThicknessMap,displacementMap:!!M.displacementMap,roughnessMap:!!M.roughnessMap,metalnessMap:!!M.metalnessMap,specularMap:!!M.specularMap,specularIntensityMap:!!M.specularIntensityMap,specularColorMap:!!M.specularColorMap,opaque:M.transparent===!1&&M.blending===Oo,alphaMap:!!M.alphaMap,alphaTest:Je,gradientMap:!!M.gradientMap,sheen:M.sheen>0,sheenColorMap:!!M.sheenColorMap,sheenRoughnessMap:!!M.sheenRoughnessMap,transmission:M.transmission>0,transmissionMap:!!M.transmissionMap,thicknessMap:!!M.thicknessMap,combine:M.combine,vertexTangents:!!M.normalMap&&!!V.attributes.tangent,vertexColors:M.vertexColors,vertexAlphas:M.vertexColors===!0&&!!V.attributes.color&&V.attributes.color.itemSize===4,vertexUvs:!!M.map||!!M.bumpMap||!!M.normalMap||!!M.specularMap||!!M.alphaMap||!!M.emissiveMap||!!M.roughnessMap||!!M.metalnessMap||!!M.clearcoatMap||!!M.clearcoatRoughnessMap||!!M.clearcoatNormalMap||!!M.iridescenceMap||!!M.iridescenceThicknessMap||!!M.displacementMap||!!M.transmissionMap||!!M.thicknessMap||!!M.specularIntensityMap||!!M.specularColorMap||!!M.sheenColorMap||!!M.sheenRoughnessMap,uvsVertexOnly:!(M.map||M.bumpMap||M.normalMap||M.specularMap||M.alphaMap||M.emissiveMap||M.roughnessMap||M.metalnessMap||M.clearcoatNormalMap||M.iridescenceMap||M.iridescenceThicknessMap||M.transmission>0||M.transmissionMap||M.thicknessMap||M.specularIntensityMap||M.specularColorMap||M.sheen>0||M.sheenColorMap||M.sheenRoughnessMap)&&!!M.displacementMap,fog:!!G,useFog:M.fog===!0,fogExp2:G&&G.isFogExp2,flatShading:!!M.flatShading,sizeAttenuation:M.sizeAttenuation,logarithmicDepthBuffer:d,skinning:Q.isSkinnedMesh===!0,morphTargets:V.morphAttributes.position!==void 0,morphNormals:V.morphAttributes.normal!==void 0,morphColors:V.morphAttributes.color!==void 0,morphTargetsCount:Pe,morphTextureStride:re,numDirLights:R.directional.length,numPointLights:R.point.length,numSpotLights:R.spot.length,numSpotLightMaps:R.spotLightMap.length,numRectAreaLights:R.rectArea.length,numHemiLights:R.hemi.length,numDirLightShadows:R.directionalShadowMap.length,numPointLightShadows:R.pointShadowMap.length,numSpotLightShadows:R.spotShadowMap.length,numSpotLightShadowsWithMaps:R.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:M.dithering,shadowMapEnabled:r.shadowMap.enabled&&O.length>0,shadowMapType:r.shadowMap.type,toneMapping:M.toneMapped?r.toneMapping:vi,physicallyCorrectLights:r.physicallyCorrectLights,premultipliedAlpha:M.premultipliedAlpha,doubleSided:M.side===If,flipSided:M.side===vr,useDepthPacking:!!M.depthPacking,depthPacking:M.depthPacking||0,index0AttributeName:M.index0AttributeName,extensionDerivatives:M.extensions&&M.extensions.derivatives,extensionFragDepth:M.extensions&&M.extensions.fragDepth,extensionDrawBuffers:M.extensions&&M.extensions.drawBuffers,extensionShaderTextureLOD:M.extensions&&M.extensions.shaderTextureLOD,rendererExtensionFragDepth:f||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:f||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:f||n.has("EXT_shader_texture_lod"),customProgramCacheKey:M.customProgramCacheKey()}}function w(M){const R=[];if(M.shaderID?R.push(M.shaderID):(R.push(M.customVertexShaderID),R.push(M.customFragmentShaderID)),M.defines!==void 0)for(const O in M.defines)R.push(O),R.push(M.defines[O]);return M.isRawShaderMaterial===!1&&(A(R,M),T(R,M),R.push(r.outputEncoding)),R.push(M.customProgramCacheKey),R.join()}function A(M,R){M.push(R.precision),M.push(R.outputEncoding),M.push(R.envMapMode),M.push(R.envMapCubeUVHeight),M.push(R.combine),M.push(R.vertexUvs),M.push(R.fogExp2),M.push(R.sizeAttenuation),M.push(R.morphTargetsCount),M.push(R.morphAttributeCount),M.push(R.numDirLights),M.push(R.numPointLights),M.push(R.numSpotLights),M.push(R.numSpotLightMaps),M.push(R.numHemiLights),M.push(R.numRectAreaLights),M.push(R.numDirLightShadows),M.push(R.numPointLightShadows),M.push(R.numSpotLightShadows),M.push(R.numSpotLightShadowsWithMaps),M.push(R.shadowMapType),M.push(R.toneMapping),M.push(R.numClippingPlanes),M.push(R.numClipIntersection),M.push(R.depthPacking)}function T(M,R){a.disableAll(),R.isWebGL2&&a.enable(0),R.supportsVertexTextures&&a.enable(1),R.instancing&&a.enable(2),R.instancingColor&&a.enable(3),R.map&&a.enable(4),R.matcap&&a.enable(5),R.envMap&&a.enable(6),R.lightMap&&a.enable(7),R.aoMap&&a.enable(8),R.emissiveMap&&a.enable(9),R.bumpMap&&a.enable(10),R.normalMap&&a.enable(11),R.objectSpaceNormalMap&&a.enable(12),R.tangentSpaceNormalMap&&a.enable(13),R.clearcoat&&a.enable(14),R.clearcoatMap&&a.enable(15),R.clearcoatRoughnessMap&&a.enable(16),R.clearcoatNormalMap&&a.enable(17),R.iridescence&&a.enable(18),R.iridescenceMap&&a.enable(19),R.iridescenceThicknessMap&&a.enable(20),R.displacementMap&&a.enable(21),R.specularMap&&a.enable(22),R.roughnessMap&&a.enable(23),R.metalnessMap&&a.enable(24),R.gradientMap&&a.enable(25),R.alphaMap&&a.enable(26),R.alphaTest&&a.enable(27),R.vertexColors&&a.enable(28),R.vertexAlphas&&a.enable(29),R.vertexUvs&&a.enable(30),R.vertexTangents&&a.enable(31),R.uvsVertexOnly&&a.enable(32),M.push(a.mask),a.disableAll(),R.fog&&a.enable(0),R.useFog&&a.enable(1),R.flatShading&&a.enable(2),R.logarithmicDepthBuffer&&a.enable(3),R.skinning&&a.enable(4),R.morphTargets&&a.enable(5),R.morphNormals&&a.enable(6),R.morphColors&&a.enable(7),R.premultipliedAlpha&&a.enable(8),R.shadowMapEnabled&&a.enable(9),R.physicallyCorrectLights&&a.enable(10),R.doubleSided&&a.enable(11),R.flipSided&&a.enable(12),R.useDepthPacking&&a.enable(13),R.dithering&&a.enable(14),R.specularIntensityMap&&a.enable(15),R.specularColorMap&&a.enable(16),R.transmission&&a.enable(17),R.transmissionMap&&a.enable(18),R.thicknessMap&&a.enable(19),R.sheen&&a.enable(20),R.sheenColorMap&&a.enable(21),R.sheenRoughnessMap&&a.enable(22),R.decodeVideoTexture&&a.enable(23),R.opaque&&a.enable(24),M.push(a.mask)}function E(M){const R=S[M.type];let O;if(R){const z=Br[R];O=lS.clone(z.uniforms)}else O=M.uniforms;return O}function P(M,R){let O;for(let z=0,Q=u.length;z<Q;z++){const G=u[z];if(G.cacheKey===R){O=G,++O.usedTimes;break}}return O===void 0&&(O=new x5(r,R,M,s),u.push(O)),O}function y(M){if(--M.usedTimes===0){const R=u.indexOf(M);u[R]=u[u.length-1],u.pop(),M.destroy()}}function k(M){c.remove(M)}function F(){c.dispose()}return{getParameters:x,getProgramCacheKey:w,getUniforms:E,acquireProgram:P,releaseProgram:y,releaseShaderCache:k,programs:u,dispose:F}}function C5(){let r=new WeakMap;function e(s){let o=r.get(s);return o===void 0&&(o={},r.set(s,o)),o}function t(s){r.delete(s)}function n(s,o,a){r.get(s)[o]=a}function i(){r=new WeakMap}return{get:e,remove:t,update:n,dispose:i}}function M5(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.material.id!==e.material.id?r.material.id-e.material.id:r.z!==e.z?r.z-e.z:r.id-e.id}function qm(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.z!==e.z?e.z-r.z:r.id-e.id}function Xm(){const r=[];let e=0;const t=[],n=[],i=[];function s(){e=0,t.length=0,n.length=0,i.length=0}function o(d,m,v,S,x,w){let A=r[e];return A===void 0?(A={id:d.id,object:d,geometry:m,material:v,groupOrder:S,renderOrder:d.renderOrder,z:x,group:w},r[e]=A):(A.id=d.id,A.object=d,A.geometry=m,A.material=v,A.groupOrder=S,A.renderOrder=d.renderOrder,A.z=x,A.group=w),e++,A}function a(d,m,v,S,x,w){const A=o(d,m,v,S,x,w);v.transmission>0?n.push(A):v.transparent===!0?i.push(A):t.push(A)}function c(d,m,v,S,x,w){const A=o(d,m,v,S,x,w);v.transmission>0?n.unshift(A):v.transparent===!0?i.unshift(A):t.unshift(A)}function u(d,m){t.length>1&&t.sort(d||M5),n.length>1&&n.sort(m||qm),i.length>1&&i.sort(m||qm)}function f(){for(let d=e,m=r.length;d<m;d++){const v=r[d];if(v.id===null)break;v.id=null,v.object=null,v.geometry=null,v.material=null,v.group=null}}return{opaque:t,transmissive:n,transparent:i,init:s,push:a,unshift:c,finish:f,sort:u}}function E5(){let r=new WeakMap;function e(n,i){const s=r.get(n);let o;return s===void 0?(o=new Xm,r.set(n,[o])):i>=s.length?(o=new Xm,s.push(o)):o=s[i],o}function t(){r=new WeakMap}return{get:e,dispose:t}}function A5(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Y,color:new Dt};break;case"SpotLight":t={position:new Y,direction:new Y,color:new Dt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Y,color:new Dt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Y,skyColor:new Dt,groundColor:new Dt};break;case"RectAreaLight":t={color:new Dt,position:new Y,halfWidth:new Y,halfHeight:new Y};break}return r[e.id]=t,t}}}function P5(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ne};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ne};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ne,shadowCameraNear:1,shadowCameraFar:1e3};break}return r[e.id]=t,t}}}let T5=0;function L5(r,e){return(e.castShadow?2:0)-(r.castShadow?2:0)+(e.map?1:0)-(r.map?1:0)}function I5(r,e){const t=new A5,n=P5(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let f=0;f<9;f++)i.probe.push(new Y);const s=new Y,o=new en,a=new en;function c(f,d){let m=0,v=0,S=0;for(let z=0;z<9;z++)i.probe[z].set(0,0,0);let x=0,w=0,A=0,T=0,E=0,P=0,y=0,k=0,F=0,M=0;f.sort(L5);const R=d!==!0?Math.PI:1;for(let z=0,Q=f.length;z<Q;z++){const G=f[z],V=G.color,q=G.intensity,j=G.distance,ge=G.shadow&&G.shadow.map?G.shadow.map.texture:null;if(G.isAmbientLight)m+=V.r*q*R,v+=V.g*q*R,S+=V.b*q*R;else if(G.isLightProbe)for(let K=0;K<9;K++)i.probe[K].addScaledVector(G.sh.coefficients[K],q);else if(G.isDirectionalLight){const K=t.get(G);if(K.color.copy(G.color).multiplyScalar(G.intensity*R),G.castShadow){const Ee=G.shadow,Pe=n.get(G);Pe.shadowBias=Ee.bias,Pe.shadowNormalBias=Ee.normalBias,Pe.shadowRadius=Ee.radius,Pe.shadowMapSize=Ee.mapSize,i.directionalShadow[x]=Pe,i.directionalShadowMap[x]=ge,i.directionalShadowMatrix[x]=G.shadow.matrix,P++}i.directional[x]=K,x++}else if(G.isSpotLight){const K=t.get(G);K.position.setFromMatrixPosition(G.matrixWorld),K.color.copy(V).multiplyScalar(q*R),K.distance=j,K.coneCos=Math.cos(G.angle),K.penumbraCos=Math.cos(G.angle*(1-G.penumbra)),K.decay=G.decay,i.spot[A]=K;const Ee=G.shadow;if(G.map&&(i.spotLightMap[F]=G.map,F++,Ee.updateMatrices(G),G.castShadow&&M++),i.spotLightMatrix[A]=Ee.matrix,G.castShadow){const Pe=n.get(G);Pe.shadowBias=Ee.bias,Pe.shadowNormalBias=Ee.normalBias,Pe.shadowRadius=Ee.radius,Pe.shadowMapSize=Ee.mapSize,i.spotShadow[A]=Pe,i.spotShadowMap[A]=ge,k++}A++}else if(G.isRectAreaLight){const K=t.get(G);K.color.copy(V).multiplyScalar(q),K.halfWidth.set(G.width*.5,0,0),K.halfHeight.set(0,G.height*.5,0),i.rectArea[T]=K,T++}else if(G.isPointLight){const K=t.get(G);if(K.color.copy(G.color).multiplyScalar(G.intensity*R),K.distance=G.distance,K.decay=G.decay,G.castShadow){const Ee=G.shadow,Pe=n.get(G);Pe.shadowBias=Ee.bias,Pe.shadowNormalBias=Ee.normalBias,Pe.shadowRadius=Ee.radius,Pe.shadowMapSize=Ee.mapSize,Pe.shadowCameraNear=Ee.camera.near,Pe.shadowCameraFar=Ee.camera.far,i.pointShadow[w]=Pe,i.pointShadowMap[w]=ge,i.pointShadowMatrix[w]=G.shadow.matrix,y++}i.point[w]=K,w++}else if(G.isHemisphereLight){const K=t.get(G);K.skyColor.copy(G.color).multiplyScalar(q*R),K.groundColor.copy(G.groundColor).multiplyScalar(q*R),i.hemi[E]=K,E++}}T>0&&(e.isWebGL2||r.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=$e.LTC_FLOAT_1,i.rectAreaLTC2=$e.LTC_FLOAT_2):r.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=$e.LTC_HALF_1,i.rectAreaLTC2=$e.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=m,i.ambient[1]=v,i.ambient[2]=S;const O=i.hash;(O.directionalLength!==x||O.pointLength!==w||O.spotLength!==A||O.rectAreaLength!==T||O.hemiLength!==E||O.numDirectionalShadows!==P||O.numPointShadows!==y||O.numSpotShadows!==k||O.numSpotMaps!==F)&&(i.directional.length=x,i.spot.length=A,i.rectArea.length=T,i.point.length=w,i.hemi.length=E,i.directionalShadow.length=P,i.directionalShadowMap.length=P,i.pointShadow.length=y,i.pointShadowMap.length=y,i.spotShadow.length=k,i.spotShadowMap.length=k,i.directionalShadowMatrix.length=P,i.pointShadowMatrix.length=y,i.spotLightMatrix.length=k+F-M,i.spotLightMap.length=F,i.numSpotLightShadowsWithMaps=M,O.directionalLength=x,O.pointLength=w,O.spotLength=A,O.rectAreaLength=T,O.hemiLength=E,O.numDirectionalShadows=P,O.numPointShadows=y,O.numSpotShadows=k,O.numSpotMaps=F,i.version=T5++)}function u(f,d){let m=0,v=0,S=0,x=0,w=0;const A=d.matrixWorldInverse;for(let T=0,E=f.length;T<E;T++){const P=f[T];if(P.isDirectionalLight){const y=i.directional[m];y.direction.setFromMatrixPosition(P.matrixWorld),s.setFromMatrixPosition(P.target.matrixWorld),y.direction.sub(s),y.direction.transformDirection(A),m++}else if(P.isSpotLight){const y=i.spot[S];y.position.setFromMatrixPosition(P.matrixWorld),y.position.applyMatrix4(A),y.direction.setFromMatrixPosition(P.matrixWorld),s.setFromMatrixPosition(P.target.matrixWorld),y.direction.sub(s),y.direction.transformDirection(A),S++}else if(P.isRectAreaLight){const y=i.rectArea[x];y.position.setFromMatrixPosition(P.matrixWorld),y.position.applyMatrix4(A),a.identity(),o.copy(P.matrixWorld),o.premultiply(A),a.extractRotation(o),y.halfWidth.set(P.width*.5,0,0),y.halfHeight.set(0,P.height*.5,0),y.halfWidth.applyMatrix4(a),y.halfHeight.applyMatrix4(a),x++}else if(P.isPointLight){const y=i.point[v];y.position.setFromMatrixPosition(P.matrixWorld),y.position.applyMatrix4(A),v++}else if(P.isHemisphereLight){const y=i.hemi[w];y.direction.setFromMatrixPosition(P.matrixWorld),y.direction.transformDirection(A),w++}}}return{setup:c,setupView:u,state:i}}function Ym(r,e){const t=new I5(r,e),n=[],i=[];function s(){n.length=0,i.length=0}function o(d){n.push(d)}function a(d){i.push(d)}function c(d){t.setup(n,d)}function u(d){t.setupView(n,d)}return{init:s,state:{lightsArray:n,shadowsArray:i,lights:t},setupLights:c,setupLightsView:u,pushLight:o,pushShadow:a}}function D5(r,e){let t=new WeakMap;function n(s,o=0){const a=t.get(s);let c;return a===void 0?(c=new Ym(r,e),t.set(s,[c])):o>=a.length?(c=new Ym(r,e),a.push(c)):c=a[o],c}function i(){t=new WeakMap}return{get:n,dispose:i}}class R5 extends Ns{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=H4,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class k5 extends Ns{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new Y,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const F5=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,O5=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function B5(r,e,t){let n=new Of;const i=new Ne,s=new Ne,o=new Wt,a=new R5({depthPacking:W4}),c=new k5,u={},f=t.maxTextureSize,d={0:vr,1:Ts,2:If},m=new ks({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ne},radius:{value:4}},vertexShader:F5,fragmentShader:O5}),v=m.clone();v.defines.HORIZONTAL_PASS=1;const S=new Zn;S.setAttribute("position",new jn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new mi(S,m),w=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Db,this.render=function(P,y,k){if(w.enabled===!1||w.autoUpdate===!1&&w.needsUpdate===!1||P.length===0)return;const F=r.getRenderTarget(),M=r.getActiveCubeFace(),R=r.getActiveMipmapLevel(),O=r.state;O.setBlending(Hi),O.buffers.color.setClear(1,1,1,1),O.buffers.depth.setTest(!0),O.setScissorTest(!1);for(let z=0,Q=P.length;z<Q;z++){const G=P[z],V=G.shadow;if(V===void 0){console.warn("THREE.WebGLShadowMap:",G,"has no shadow.");continue}if(V.autoUpdate===!1&&V.needsUpdate===!1)continue;i.copy(V.mapSize);const q=V.getFrameExtents();if(i.multiply(q),s.copy(V.mapSize),(i.x>f||i.y>f)&&(i.x>f&&(s.x=Math.floor(f/q.x),i.x=s.x*q.x,V.mapSize.x=s.x),i.y>f&&(s.y=Math.floor(f/q.y),i.y=s.y*q.y,V.mapSize.y=s.y)),V.map===null){const ge=this.type!==$a?{minFilter:Gn,magFilter:Gn}:{};V.map=new Ds(i.x,i.y,ge),V.map.texture.name=G.name+".shadowMap",V.camera.updateProjectionMatrix()}r.setRenderTarget(V.map),r.clear();const j=V.getViewportCount();for(let ge=0;ge<j;ge++){const K=V.getViewport(ge);o.set(s.x*K.x,s.y*K.y,s.x*K.z,s.y*K.w),O.viewport(o),V.updateMatrices(G,ge),n=V.getFrustum(),E(y,k,V.camera,G,this.type)}V.isPointLightShadow!==!0&&this.type===$a&&A(V,k),V.needsUpdate=!1}w.needsUpdate=!1,r.setRenderTarget(F,M,R)};function A(P,y){const k=e.update(x);m.defines.VSM_SAMPLES!==P.blurSamples&&(m.defines.VSM_SAMPLES=P.blurSamples,v.defines.VSM_SAMPLES=P.blurSamples,m.needsUpdate=!0,v.needsUpdate=!0),P.mapPass===null&&(P.mapPass=new Ds(i.x,i.y)),m.uniforms.shadow_pass.value=P.map.texture,m.uniforms.resolution.value=P.mapSize,m.uniforms.radius.value=P.radius,r.setRenderTarget(P.mapPass),r.clear(),r.renderBufferDirect(y,null,k,m,x,null),v.uniforms.shadow_pass.value=P.mapPass.texture,v.uniforms.resolution.value=P.mapSize,v.uniforms.radius.value=P.radius,r.setRenderTarget(P.map),r.clear(),r.renderBufferDirect(y,null,k,v,x,null)}function T(P,y,k,F,M,R){let O=null;const z=k.isPointLight===!0?P.customDistanceMaterial:P.customDepthMaterial;if(z!==void 0)O=z;else if(O=k.isPointLight===!0?c:a,r.localClippingEnabled&&y.clipShadows===!0&&Array.isArray(y.clippingPlanes)&&y.clippingPlanes.length!==0||y.displacementMap&&y.displacementScale!==0||y.alphaMap&&y.alphaTest>0||y.map&&y.alphaTest>0){const Q=O.uuid,G=y.uuid;let V=u[Q];V===void 0&&(V={},u[Q]=V);let q=V[G];q===void 0&&(q=O.clone(),V[G]=q),O=q}return O.visible=y.visible,O.wireframe=y.wireframe,R===$a?O.side=y.shadowSide!==null?y.shadowSide:y.side:O.side=y.shadowSide!==null?y.shadowSide:d[y.side],O.alphaMap=y.alphaMap,O.alphaTest=y.alphaTest,O.map=y.map,O.clipShadows=y.clipShadows,O.clippingPlanes=y.clippingPlanes,O.clipIntersection=y.clipIntersection,O.displacementMap=y.displacementMap,O.displacementScale=y.displacementScale,O.displacementBias=y.displacementBias,O.wireframeLinewidth=y.wireframeLinewidth,O.linewidth=y.linewidth,k.isPointLight===!0&&O.isMeshDistanceMaterial===!0&&(O.referencePosition.setFromMatrixPosition(k.matrixWorld),O.nearDistance=F,O.farDistance=M),O}function E(P,y,k,F,M){if(P.visible===!1)return;if(P.layers.test(y.layers)&&(P.isMesh||P.isLine||P.isPoints)&&(P.castShadow||P.receiveShadow&&M===$a)&&(!P.frustumCulled||n.intersectsObject(P))){P.modelViewMatrix.multiplyMatrices(k.matrixWorldInverse,P.matrixWorld);const z=e.update(P),Q=P.material;if(Array.isArray(Q)){const G=z.groups;for(let V=0,q=G.length;V<q;V++){const j=G[V],ge=Q[j.materialIndex];if(ge&&ge.visible){const K=T(P,ge,F,k.near,k.far,M);r.renderBufferDirect(k,null,z,K,P,j)}}}else if(Q.visible){const G=T(P,Q,F,k.near,k.far,M);r.renderBufferDirect(k,null,z,G,P,null)}}const O=P.children;for(let z=0,Q=O.length;z<Q;z++)E(O[z],y,k,F,M)}}function N5(r,e,t){const n=t.isWebGL2;function i(){let Z=!1;const ye=new Wt;let ke=null;const He=new Wt(0,0,0,0);return{setMask:function(je){ke!==je&&!Z&&(r.colorMask(je,je,je,je),ke=je)},setLocked:function(je){Z=je},setClear:function(je,wt,qt,Xt,Fn){Fn===!0&&(je*=Xt,wt*=Xt,qt*=Xt),ye.set(je,wt,qt,Xt),He.equals(ye)===!1&&(r.clearColor(je,wt,qt,Xt),He.copy(ye))},reset:function(){Z=!1,ke=null,He.set(-1,0,0,0)}}}function s(){let Z=!1,ye=null,ke=null,He=null;return{setTest:function(je){je?Je(2929):pe(2929)},setMask:function(je){ye!==je&&!Z&&(r.depthMask(je),ye=je)},setFunc:function(je){if(ke!==je){switch(je){case p4:r.depthFunc(512);break;case m4:r.depthFunc(519);break;case g4:r.depthFunc(513);break;case jh:r.depthFunc(515);break;case v4:r.depthFunc(514);break;case b4:r.depthFunc(518);break;case x4:r.depthFunc(516);break;case w4:r.depthFunc(517);break;default:r.depthFunc(515)}ke=je}},setLocked:function(je){Z=je},setClear:function(je){He!==je&&(r.clearDepth(je),He=je)},reset:function(){Z=!1,ye=null,ke=null,He=null}}}function o(){let Z=!1,ye=null,ke=null,He=null,je=null,wt=null,qt=null,Xt=null,Fn=null;return{setTest:function(mt){Z||(mt?Je(2960):pe(2960))},setMask:function(mt){ye!==mt&&!Z&&(r.stencilMask(mt),ye=mt)},setFunc:function(mt,An,Nt){(ke!==mt||He!==An||je!==Nt)&&(r.stencilFunc(mt,An,Nt),ke=mt,He=An,je=Nt)},setOp:function(mt,An,Nt){(wt!==mt||qt!==An||Xt!==Nt)&&(r.stencilOp(mt,An,Nt),wt=mt,qt=An,Xt=Nt)},setLocked:function(mt){Z=mt},setClear:function(mt){Fn!==mt&&(r.clearStencil(mt),Fn=mt)},reset:function(){Z=!1,ye=null,ke=null,He=null,je=null,wt=null,qt=null,Xt=null,Fn=null}}}const a=new i,c=new s,u=new o,f=new WeakMap,d=new WeakMap;let m={},v={},S=new WeakMap,x=[],w=null,A=!1,T=null,E=null,P=null,y=null,k=null,F=null,M=null,R=!1,O=null,z=null,Q=null,G=null,V=null;const q=r.getParameter(35661);let j=!1,ge=0;const K=r.getParameter(7938);K.indexOf("WebGL")!==-1?(ge=parseFloat(/^WebGL (\d)/.exec(K)[1]),j=ge>=1):K.indexOf("OpenGL ES")!==-1&&(ge=parseFloat(/^OpenGL ES (\d)/.exec(K)[1]),j=ge>=2);let Ee=null,Pe={};const re=r.getParameter(3088),ae=r.getParameter(2978),xe=new Wt().fromArray(re),be=new Wt().fromArray(ae);function De(Z,ye,ke){const He=new Uint8Array(4),je=r.createTexture();r.bindTexture(Z,je),r.texParameteri(Z,10241,9728),r.texParameteri(Z,10240,9728);for(let wt=0;wt<ke;wt++)r.texImage2D(ye+wt,0,6408,1,1,0,6408,5121,He);return je}const ve={};ve[3553]=De(3553,3553,1),ve[34067]=De(34067,34069,6),a.setClear(0,0,0,1),c.setClear(1),u.setClear(0),Je(2929),c.setFunc(jh),we(!1),Ie(Up),Je(2884),me(Hi);function Je(Z){m[Z]!==!0&&(r.enable(Z),m[Z]=!0)}function pe(Z){m[Z]!==!1&&(r.disable(Z),m[Z]=!1)}function he(Z,ye){return v[Z]!==ye?(r.bindFramebuffer(Z,ye),v[Z]=ye,n&&(Z===36009&&(v[36160]=ye),Z===36160&&(v[36009]=ye)),!0):!1}function le(Z,ye){let ke=x,He=!1;if(Z)if(ke=S.get(ye),ke===void 0&&(ke=[],S.set(ye,ke)),Z.isWebGLMultipleRenderTargets){const je=Z.texture;if(ke.length!==je.length||ke[0]!==36064){for(let wt=0,qt=je.length;wt<qt;wt++)ke[wt]=36064+wt;ke.length=je.length,He=!0}}else ke[0]!==36064&&(ke[0]=36064,He=!0);else ke[0]!==1029&&(ke[0]=1029,He=!0);He&&(t.isWebGL2?r.drawBuffers(ke):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(ke))}function ue(Z){return w!==Z?(r.useProgram(Z),w=Z,!0):!1}const te={[Ao]:32774,[r4]:32778,[i4]:32779};if(n)te[Gp]=32775,te[Hp]=32776;else{const Z=e.get("EXT_blend_minmax");Z!==null&&(te[Gp]=Z.MIN_EXT,te[Hp]=Z.MAX_EXT)}const se={[s4]:0,[o4]:1,[a4]:768,[Rb]:770,[d4]:776,[h4]:774,[c4]:772,[l4]:769,[kb]:771,[f4]:775,[u4]:773};function me(Z,ye,ke,He,je,wt,qt,Xt){if(Z===Hi){A===!0&&(pe(3042),A=!1);return}if(A===!1&&(Je(3042),A=!0),Z!==n4){if(Z!==T||Xt!==R){if((E!==Ao||k!==Ao)&&(r.blendEquation(32774),E=Ao,k=Ao),Xt)switch(Z){case Oo:r.blendFuncSeparate(1,771,1,771);break;case Vp:r.blendFunc(1,1);break;case zp:r.blendFuncSeparate(0,769,0,1);break;case $p:r.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Z);break}else switch(Z){case Oo:r.blendFuncSeparate(770,771,1,771);break;case Vp:r.blendFunc(770,1);break;case zp:r.blendFuncSeparate(0,769,0,1);break;case $p:r.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Z);break}P=null,y=null,F=null,M=null,T=Z,R=Xt}return}je=je||ye,wt=wt||ke,qt=qt||He,(ye!==E||je!==k)&&(r.blendEquationSeparate(te[ye],te[je]),E=ye,k=je),(ke!==P||He!==y||wt!==F||qt!==M)&&(r.blendFuncSeparate(se[ke],se[He],se[wt],se[qt]),P=ke,y=He,F=wt,M=qt),T=Z,R=!1}function _e(Z,ye){Z.side===If?pe(2884):Je(2884);let ke=Z.side===vr;ye&&(ke=!ke),we(ke),Z.blending===Oo&&Z.transparent===!1?me(Hi):me(Z.blending,Z.blendEquation,Z.blendSrc,Z.blendDst,Z.blendEquationAlpha,Z.blendSrcAlpha,Z.blendDstAlpha,Z.premultipliedAlpha),c.setFunc(Z.depthFunc),c.setTest(Z.depthTest),c.setMask(Z.depthWrite),a.setMask(Z.colorWrite);const He=Z.stencilWrite;u.setTest(He),He&&(u.setMask(Z.stencilWriteMask),u.setFunc(Z.stencilFunc,Z.stencilRef,Z.stencilFuncMask),u.setOp(Z.stencilFail,Z.stencilZFail,Z.stencilZPass)),Oe(Z.polygonOffset,Z.polygonOffsetFactor,Z.polygonOffsetUnits),Z.alphaToCoverage===!0?Je(32926):pe(32926)}function we(Z){O!==Z&&(Z?r.frontFace(2304):r.frontFace(2305),O=Z)}function Ie(Z){Z!==Q_?(Je(2884),Z!==z&&(Z===Up?r.cullFace(1029):Z===e4?r.cullFace(1028):r.cullFace(1032))):pe(2884),z=Z}function Ce(Z){Z!==Q&&(j&&r.lineWidth(Z),Q=Z)}function Oe(Z,ye,ke){Z?(Je(32823),(G!==ye||V!==ke)&&(r.polygonOffset(ye,ke),G=ye,V=ke)):pe(32823)}function tt(Z){Z?Je(3089):pe(3089)}function Ze(Z){Z===void 0&&(Z=33984+q-1),Ee!==Z&&(r.activeTexture(Z),Ee=Z)}function N(Z,ye,ke){ke===void 0&&(Ee===null?ke=33984+q-1:ke=Ee);let He=Pe[ke];He===void 0&&(He={type:void 0,texture:void 0},Pe[ke]=He),(He.type!==Z||He.texture!==ye)&&(Ee!==ke&&(r.activeTexture(ke),Ee=ke),r.bindTexture(Z,ye||ve[Z]),He.type=Z,He.texture=ye)}function B(){const Z=Pe[Ee];Z!==void 0&&Z.type!==void 0&&(r.bindTexture(Z.type,null),Z.type=void 0,Z.texture=void 0)}function oe(){try{r.compressedTexImage2D.apply(r,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Me(){try{r.compressedTexImage3D.apply(r,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Re(){try{r.texSubImage2D.apply(r,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function L(){try{r.texSubImage3D.apply(r,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function _(){try{r.compressedTexSubImage2D.apply(r,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function b(){try{r.compressedTexSubImage3D.apply(r,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function I(){try{r.texStorage2D.apply(r,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function $(){try{r.texStorage3D.apply(r,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function W(){try{r.texImage2D.apply(r,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function X(){try{r.texImage3D.apply(r,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Te(Z){xe.equals(Z)===!1&&(r.scissor(Z.x,Z.y,Z.z,Z.w),xe.copy(Z))}function Be(Z){be.equals(Z)===!1&&(r.viewport(Z.x,Z.y,Z.z,Z.w),be.copy(Z))}function We(Z,ye){let ke=d.get(ye);ke===void 0&&(ke=new WeakMap,d.set(ye,ke));let He=ke.get(Z);He===void 0&&(He=r.getUniformBlockIndex(ye,Z.name),ke.set(Z,He))}function qe(Z,ye){const He=d.get(ye).get(Z);f.get(ye)!==He&&(r.uniformBlockBinding(ye,He,Z.__bindingPointIndex),f.set(ye,He))}function Xe(){r.disable(3042),r.disable(2884),r.disable(2929),r.disable(32823),r.disable(3089),r.disable(2960),r.disable(32926),r.blendEquation(32774),r.blendFunc(1,0),r.blendFuncSeparate(1,0,1,0),r.colorMask(!0,!0,!0,!0),r.clearColor(0,0,0,0),r.depthMask(!0),r.depthFunc(513),r.clearDepth(1),r.stencilMask(4294967295),r.stencilFunc(519,0,4294967295),r.stencilOp(7680,7680,7680),r.clearStencil(0),r.cullFace(1029),r.frontFace(2305),r.polygonOffset(0,0),r.activeTexture(33984),r.bindFramebuffer(36160,null),n===!0&&(r.bindFramebuffer(36009,null),r.bindFramebuffer(36008,null)),r.useProgram(null),r.lineWidth(1),r.scissor(0,0,r.canvas.width,r.canvas.height),r.viewport(0,0,r.canvas.width,r.canvas.height),m={},Ee=null,Pe={},v={},S=new WeakMap,x=[],w=null,A=!1,T=null,E=null,P=null,y=null,k=null,F=null,M=null,R=!1,O=null,z=null,Q=null,G=null,V=null,xe.set(0,0,r.canvas.width,r.canvas.height),be.set(0,0,r.canvas.width,r.canvas.height),a.reset(),c.reset(),u.reset()}return{buffers:{color:a,depth:c,stencil:u},enable:Je,disable:pe,bindFramebuffer:he,drawBuffers:le,useProgram:ue,setBlending:me,setMaterial:_e,setFlipSided:we,setCullFace:Ie,setLineWidth:Ce,setPolygonOffset:Oe,setScissorTest:tt,activeTexture:Ze,bindTexture:N,unbindTexture:B,compressedTexImage2D:oe,compressedTexImage3D:Me,texImage2D:W,texImage3D:X,updateUBOMapping:We,uniformBlockBinding:qe,texStorage2D:I,texStorage3D:$,texSubImage2D:Re,texSubImage3D:L,compressedTexSubImage2D:_,compressedTexSubImage3D:b,scissor:Te,viewport:Be,reset:Xe}}function U5(r,e,t,n,i,s,o){const a=i.isWebGL2,c=i.maxTextures,u=i.maxCubemapSize,f=i.maxTextureSize,d=i.maxSamples,m=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,v=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),S=new WeakMap;let x;const w=new WeakMap;let A=!1;try{A=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function T(N,B){return A?new OffscreenCanvas(N,B):Hc("canvas")}function E(N,B,oe,Me){let Re=1;if((N.width>Me||N.height>Me)&&(Re=Me/Math.max(N.width,N.height)),Re<1||B===!0)if(typeof HTMLImageElement<"u"&&N instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&N instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&N instanceof ImageBitmap){const L=B?tf:Math.floor,_=L(Re*N.width),b=L(Re*N.height);x===void 0&&(x=T(_,b));const I=oe?T(_,b):x;return I.width=_,I.height=b,I.getContext("2d").drawImage(N,0,0,_,b),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+N.width+"x"+N.height+") to ("+_+"x"+b+")."),I}else return"data"in N&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+N.width+"x"+N.height+")."),N;return N}function P(N){return gm(N.width)&&gm(N.height)}function y(N){return a?!1:N.wrapS!==Mr||N.wrapT!==Mr||N.minFilter!==Gn&&N.minFilter!==gr}function k(N,B){return N.generateMipmaps&&B&&N.minFilter!==Gn&&N.minFilter!==gr}function F(N){r.generateMipmap(N)}function M(N,B,oe,Me,Re=!1){if(a===!1)return B;if(N!==null){if(r[N]!==void 0)return r[N];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+N+"'")}let L=B;return B===6403&&(oe===5126&&(L=33326),oe===5131&&(L=33325),oe===5121&&(L=33321)),B===33319&&(oe===5126&&(L=33328),oe===5131&&(L=33327),oe===5121&&(L=33323)),B===6408&&(oe===5126&&(L=34836),oe===5131&&(L=34842),oe===5121&&(L=Me===Vt&&Re===!1?35907:32856),oe===32819&&(L=32854),oe===32820&&(L=32855)),(L===33325||L===33326||L===33327||L===33328||L===34842||L===34836)&&e.get("EXT_color_buffer_float"),L}function R(N,B,oe){return k(N,oe)===!0||N.isFramebufferTexture&&N.minFilter!==Gn&&N.minFilter!==gr?Math.log2(Math.max(B.width,B.height))+1:N.mipmaps!==void 0&&N.mipmaps.length>0?N.mipmaps.length:N.isCompressedTexture&&Array.isArray(N.image)?B.mipmaps.length:1}function O(N){return N===Gn||N===Wp||N===b0?9728:9729}function z(N){const B=N.target;B.removeEventListener("dispose",z),G(B),B.isVideoTexture&&S.delete(B)}function Q(N){const B=N.target;B.removeEventListener("dispose",Q),q(B)}function G(N){const B=n.get(N);if(B.__webglInit===void 0)return;const oe=N.source,Me=w.get(oe);if(Me){const Re=Me[B.__cacheKey];Re.usedTimes--,Re.usedTimes===0&&V(N),Object.keys(Me).length===0&&w.delete(oe)}n.remove(N)}function V(N){const B=n.get(N);r.deleteTexture(B.__webglTexture);const oe=N.source,Me=w.get(oe);delete Me[B.__cacheKey],o.memory.textures--}function q(N){const B=N.texture,oe=n.get(N),Me=n.get(B);if(Me.__webglTexture!==void 0&&(r.deleteTexture(Me.__webglTexture),o.memory.textures--),N.depthTexture&&N.depthTexture.dispose(),N.isWebGLCubeRenderTarget)for(let Re=0;Re<6;Re++)r.deleteFramebuffer(oe.__webglFramebuffer[Re]),oe.__webglDepthbuffer&&r.deleteRenderbuffer(oe.__webglDepthbuffer[Re]);else{if(r.deleteFramebuffer(oe.__webglFramebuffer),oe.__webglDepthbuffer&&r.deleteRenderbuffer(oe.__webglDepthbuffer),oe.__webglMultisampledFramebuffer&&r.deleteFramebuffer(oe.__webglMultisampledFramebuffer),oe.__webglColorRenderbuffer)for(let Re=0;Re<oe.__webglColorRenderbuffer.length;Re++)oe.__webglColorRenderbuffer[Re]&&r.deleteRenderbuffer(oe.__webglColorRenderbuffer[Re]);oe.__webglDepthRenderbuffer&&r.deleteRenderbuffer(oe.__webglDepthRenderbuffer)}if(N.isWebGLMultipleRenderTargets)for(let Re=0,L=B.length;Re<L;Re++){const _=n.get(B[Re]);_.__webglTexture&&(r.deleteTexture(_.__webglTexture),o.memory.textures--),n.remove(B[Re])}n.remove(B),n.remove(N)}let j=0;function ge(){j=0}function K(){const N=j;return N>=c&&console.warn("THREE.WebGLTextures: Trying to use "+N+" texture units while this GPU supports only "+c),j+=1,N}function Ee(N){const B=[];return B.push(N.wrapS),B.push(N.wrapT),B.push(N.wrapR||0),B.push(N.magFilter),B.push(N.minFilter),B.push(N.anisotropy),B.push(N.internalFormat),B.push(N.format),B.push(N.type),B.push(N.generateMipmaps),B.push(N.premultiplyAlpha),B.push(N.flipY),B.push(N.unpackAlignment),B.push(N.encoding),B.join()}function Pe(N,B){const oe=n.get(N);if(N.isVideoTexture&&tt(N),N.isRenderTargetTexture===!1&&N.version>0&&oe.__version!==N.version){const Me=N.image;if(Me===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Me.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{pe(oe,N,B);return}}t.bindTexture(3553,oe.__webglTexture,33984+B)}function re(N,B){const oe=n.get(N);if(N.version>0&&oe.__version!==N.version){pe(oe,N,B);return}t.bindTexture(35866,oe.__webglTexture,33984+B)}function ae(N,B){const oe=n.get(N);if(N.version>0&&oe.__version!==N.version){pe(oe,N,B);return}t.bindTexture(32879,oe.__webglTexture,33984+B)}function xe(N,B){const oe=n.get(N);if(N.version>0&&oe.__version!==N.version){he(oe,N,B);return}t.bindTexture(34067,oe.__webglTexture,33984+B)}const be={[Jh]:10497,[Mr]:33071,[Qh]:33648},De={[Gn]:9728,[Wp]:9984,[b0]:9986,[gr]:9729,[P4]:9985,[rl]:9987};function ve(N,B,oe){if(oe?(r.texParameteri(N,10242,be[B.wrapS]),r.texParameteri(N,10243,be[B.wrapT]),(N===32879||N===35866)&&r.texParameteri(N,32882,be[B.wrapR]),r.texParameteri(N,10240,De[B.magFilter]),r.texParameteri(N,10241,De[B.minFilter])):(r.texParameteri(N,10242,33071),r.texParameteri(N,10243,33071),(N===32879||N===35866)&&r.texParameteri(N,32882,33071),(B.wrapS!==Mr||B.wrapT!==Mr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),r.texParameteri(N,10240,O(B.magFilter)),r.texParameteri(N,10241,O(B.minFilter)),B.minFilter!==Gn&&B.minFilter!==gr&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const Me=e.get("EXT_texture_filter_anisotropic");if(B.magFilter===Gn||B.minFilter!==b0&&B.minFilter!==rl||B.type===vs&&e.has("OES_texture_float_linear")===!1||a===!1&&B.type===il&&e.has("OES_texture_half_float_linear")===!1)return;(B.anisotropy>1||n.get(B).__currentAnisotropy)&&(r.texParameterf(N,Me.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(B.anisotropy,i.getMaxAnisotropy())),n.get(B).__currentAnisotropy=B.anisotropy)}}function Je(N,B){let oe=!1;N.__webglInit===void 0&&(N.__webglInit=!0,B.addEventListener("dispose",z));const Me=B.source;let Re=w.get(Me);Re===void 0&&(Re={},w.set(Me,Re));const L=Ee(B);if(L!==N.__cacheKey){Re[L]===void 0&&(Re[L]={texture:r.createTexture(),usedTimes:0},o.memory.textures++,oe=!0),Re[L].usedTimes++;const _=Re[N.__cacheKey];_!==void 0&&(Re[N.__cacheKey].usedTimes--,_.usedTimes===0&&V(B)),N.__cacheKey=L,N.__webglTexture=Re[L].texture}return oe}function pe(N,B,oe){let Me=3553;(B.isDataArrayTexture||B.isCompressedArrayTexture)&&(Me=35866),B.isData3DTexture&&(Me=32879);const Re=Je(N,B),L=B.source;t.bindTexture(Me,N.__webglTexture,33984+oe);const _=n.get(L);if(L.version!==_.__version||Re===!0){t.activeTexture(33984+oe),r.pixelStorei(37440,B.flipY),r.pixelStorei(37441,B.premultiplyAlpha),r.pixelStorei(3317,B.unpackAlignment),r.pixelStorei(37443,0);const b=y(B)&&P(B.image)===!1;let I=E(B.image,b,!1,f);I=Ze(B,I);const $=P(I)||a,W=s.convert(B.format,B.encoding);let X=s.convert(B.type),Te=M(B.internalFormat,W,X,B.encoding,B.isVideoTexture);ve(Me,B,$);let Be;const We=B.mipmaps,qe=a&&B.isVideoTexture!==!0,Xe=_.__version===void 0||Re===!0,Z=R(B,I,$);if(B.isDepthTexture)Te=6402,a?B.type===vs?Te=36012:B.type===gs?Te=33190:B.type===Bo?Te=35056:Te=33189:B.type===vs&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),B.format===Cs&&Te===6402&&B.type!==Ob&&B.type!==gs&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),B.type=gs,X=s.convert(B.type)),B.format===$o&&Te===6402&&(Te=34041,B.type!==Bo&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),B.type=Bo,X=s.convert(B.type))),Xe&&(qe?t.texStorage2D(3553,1,Te,I.width,I.height):t.texImage2D(3553,0,Te,I.width,I.height,0,W,X,null));else if(B.isDataTexture)if(We.length>0&&$){qe&&Xe&&t.texStorage2D(3553,Z,Te,We[0].width,We[0].height);for(let ye=0,ke=We.length;ye<ke;ye++)Be=We[ye],qe?t.texSubImage2D(3553,ye,0,0,Be.width,Be.height,W,X,Be.data):t.texImage2D(3553,ye,Te,Be.width,Be.height,0,W,X,Be.data);B.generateMipmaps=!1}else qe?(Xe&&t.texStorage2D(3553,Z,Te,I.width,I.height),t.texSubImage2D(3553,0,0,0,I.width,I.height,W,X,I.data)):t.texImage2D(3553,0,Te,I.width,I.height,0,W,X,I.data);else if(B.isCompressedTexture)if(B.isCompressedArrayTexture){qe&&Xe&&t.texStorage3D(35866,Z,Te,We[0].width,We[0].height,I.depth);for(let ye=0,ke=We.length;ye<ke;ye++)Be=We[ye],B.format!==Er?W!==null?qe?t.compressedTexSubImage3D(35866,ye,0,0,0,Be.width,Be.height,I.depth,W,Be.data,0,0):t.compressedTexImage3D(35866,ye,Te,Be.width,Be.height,I.depth,0,Be.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):qe?t.texSubImage3D(35866,ye,0,0,0,Be.width,Be.height,I.depth,W,X,Be.data):t.texImage3D(35866,ye,Te,Be.width,Be.height,I.depth,0,W,X,Be.data)}else{qe&&Xe&&t.texStorage2D(3553,Z,Te,We[0].width,We[0].height);for(let ye=0,ke=We.length;ye<ke;ye++)Be=We[ye],B.format!==Er?W!==null?qe?t.compressedTexSubImage2D(3553,ye,0,0,Be.width,Be.height,W,Be.data):t.compressedTexImage2D(3553,ye,Te,Be.width,Be.height,0,Be.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):qe?t.texSubImage2D(3553,ye,0,0,Be.width,Be.height,W,X,Be.data):t.texImage2D(3553,ye,Te,Be.width,Be.height,0,W,X,Be.data)}else if(B.isDataArrayTexture)qe?(Xe&&t.texStorage3D(35866,Z,Te,I.width,I.height,I.depth),t.texSubImage3D(35866,0,0,0,0,I.width,I.height,I.depth,W,X,I.data)):t.texImage3D(35866,0,Te,I.width,I.height,I.depth,0,W,X,I.data);else if(B.isData3DTexture)qe?(Xe&&t.texStorage3D(32879,Z,Te,I.width,I.height,I.depth),t.texSubImage3D(32879,0,0,0,0,I.width,I.height,I.depth,W,X,I.data)):t.texImage3D(32879,0,Te,I.width,I.height,I.depth,0,W,X,I.data);else if(B.isFramebufferTexture){if(Xe)if(qe)t.texStorage2D(3553,Z,Te,I.width,I.height);else{let ye=I.width,ke=I.height;for(let He=0;He<Z;He++)t.texImage2D(3553,He,Te,ye,ke,0,W,X,null),ye>>=1,ke>>=1}}else if(We.length>0&&$){qe&&Xe&&t.texStorage2D(3553,Z,Te,We[0].width,We[0].height);for(let ye=0,ke=We.length;ye<ke;ye++)Be=We[ye],qe?t.texSubImage2D(3553,ye,0,0,W,X,Be):t.texImage2D(3553,ye,Te,W,X,Be);B.generateMipmaps=!1}else qe?(Xe&&t.texStorage2D(3553,Z,Te,I.width,I.height),t.texSubImage2D(3553,0,0,0,W,X,I)):t.texImage2D(3553,0,Te,W,X,I);k(B,$)&&F(Me),_.__version=L.version,B.onUpdate&&B.onUpdate(B)}N.__version=B.version}function he(N,B,oe){if(B.image.length!==6)return;const Me=Je(N,B),Re=B.source;t.bindTexture(34067,N.__webglTexture,33984+oe);const L=n.get(Re);if(Re.version!==L.__version||Me===!0){t.activeTexture(33984+oe),r.pixelStorei(37440,B.flipY),r.pixelStorei(37441,B.premultiplyAlpha),r.pixelStorei(3317,B.unpackAlignment),r.pixelStorei(37443,0);const _=B.isCompressedTexture||B.image[0].isCompressedTexture,b=B.image[0]&&B.image[0].isDataTexture,I=[];for(let ye=0;ye<6;ye++)!_&&!b?I[ye]=E(B.image[ye],!1,!0,u):I[ye]=b?B.image[ye].image:B.image[ye],I[ye]=Ze(B,I[ye]);const $=I[0],W=P($)||a,X=s.convert(B.format,B.encoding),Te=s.convert(B.type),Be=M(B.internalFormat,X,Te,B.encoding),We=a&&B.isVideoTexture!==!0,qe=L.__version===void 0||Me===!0;let Xe=R(B,$,W);ve(34067,B,W);let Z;if(_){We&&qe&&t.texStorage2D(34067,Xe,Be,$.width,$.height);for(let ye=0;ye<6;ye++){Z=I[ye].mipmaps;for(let ke=0;ke<Z.length;ke++){const He=Z[ke];B.format!==Er?X!==null?We?t.compressedTexSubImage2D(34069+ye,ke,0,0,He.width,He.height,X,He.data):t.compressedTexImage2D(34069+ye,ke,Be,He.width,He.height,0,He.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):We?t.texSubImage2D(34069+ye,ke,0,0,He.width,He.height,X,Te,He.data):t.texImage2D(34069+ye,ke,Be,He.width,He.height,0,X,Te,He.data)}}}else{Z=B.mipmaps,We&&qe&&(Z.length>0&&Xe++,t.texStorage2D(34067,Xe,Be,I[0].width,I[0].height));for(let ye=0;ye<6;ye++)if(b){We?t.texSubImage2D(34069+ye,0,0,0,I[ye].width,I[ye].height,X,Te,I[ye].data):t.texImage2D(34069+ye,0,Be,I[ye].width,I[ye].height,0,X,Te,I[ye].data);for(let ke=0;ke<Z.length;ke++){const je=Z[ke].image[ye].image;We?t.texSubImage2D(34069+ye,ke+1,0,0,je.width,je.height,X,Te,je.data):t.texImage2D(34069+ye,ke+1,Be,je.width,je.height,0,X,Te,je.data)}}else{We?t.texSubImage2D(34069+ye,0,0,0,X,Te,I[ye]):t.texImage2D(34069+ye,0,Be,X,Te,I[ye]);for(let ke=0;ke<Z.length;ke++){const He=Z[ke];We?t.texSubImage2D(34069+ye,ke+1,0,0,X,Te,He.image[ye]):t.texImage2D(34069+ye,ke+1,Be,X,Te,He.image[ye])}}}k(B,W)&&F(34067),L.__version=Re.version,B.onUpdate&&B.onUpdate(B)}N.__version=B.version}function le(N,B,oe,Me,Re){const L=s.convert(oe.format,oe.encoding),_=s.convert(oe.type),b=M(oe.internalFormat,L,_,oe.encoding);n.get(B).__hasExternalTextures||(Re===32879||Re===35866?t.texImage3D(Re,0,b,B.width,B.height,B.depth,0,L,_,null):t.texImage2D(Re,0,b,B.width,B.height,0,L,_,null)),t.bindFramebuffer(36160,N),Oe(B)?m.framebufferTexture2DMultisampleEXT(36160,Me,Re,n.get(oe).__webglTexture,0,Ce(B)):(Re===3553||Re>=34069&&Re<=34074)&&r.framebufferTexture2D(36160,Me,Re,n.get(oe).__webglTexture,0),t.bindFramebuffer(36160,null)}function ue(N,B,oe){if(r.bindRenderbuffer(36161,N),B.depthBuffer&&!B.stencilBuffer){let Me=33189;if(oe||Oe(B)){const Re=B.depthTexture;Re&&Re.isDepthTexture&&(Re.type===vs?Me=36012:Re.type===gs&&(Me=33190));const L=Ce(B);Oe(B)?m.renderbufferStorageMultisampleEXT(36161,L,Me,B.width,B.height):r.renderbufferStorageMultisample(36161,L,Me,B.width,B.height)}else r.renderbufferStorage(36161,Me,B.width,B.height);r.framebufferRenderbuffer(36160,36096,36161,N)}else if(B.depthBuffer&&B.stencilBuffer){const Me=Ce(B);oe&&Oe(B)===!1?r.renderbufferStorageMultisample(36161,Me,35056,B.width,B.height):Oe(B)?m.renderbufferStorageMultisampleEXT(36161,Me,35056,B.width,B.height):r.renderbufferStorage(36161,34041,B.width,B.height),r.framebufferRenderbuffer(36160,33306,36161,N)}else{const Me=B.isWebGLMultipleRenderTargets===!0?B.texture:[B.texture];for(let Re=0;Re<Me.length;Re++){const L=Me[Re],_=s.convert(L.format,L.encoding),b=s.convert(L.type),I=M(L.internalFormat,_,b,L.encoding),$=Ce(B);oe&&Oe(B)===!1?r.renderbufferStorageMultisample(36161,$,I,B.width,B.height):Oe(B)?m.renderbufferStorageMultisampleEXT(36161,$,I,B.width,B.height):r.renderbufferStorage(36161,I,B.width,B.height)}}r.bindRenderbuffer(36161,null)}function te(N,B){if(B&&B.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,N),!(B.depthTexture&&B.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(B.depthTexture).__webglTexture||B.depthTexture.image.width!==B.width||B.depthTexture.image.height!==B.height)&&(B.depthTexture.image.width=B.width,B.depthTexture.image.height=B.height,B.depthTexture.needsUpdate=!0),Pe(B.depthTexture,0);const Me=n.get(B.depthTexture).__webglTexture,Re=Ce(B);if(B.depthTexture.format===Cs)Oe(B)?m.framebufferTexture2DMultisampleEXT(36160,36096,3553,Me,0,Re):r.framebufferTexture2D(36160,36096,3553,Me,0);else if(B.depthTexture.format===$o)Oe(B)?m.framebufferTexture2DMultisampleEXT(36160,33306,3553,Me,0,Re):r.framebufferTexture2D(36160,33306,3553,Me,0);else throw new Error("Unknown depthTexture format")}function se(N){const B=n.get(N),oe=N.isWebGLCubeRenderTarget===!0;if(N.depthTexture&&!B.__autoAllocateDepthBuffer){if(oe)throw new Error("target.depthTexture not supported in Cube render targets");te(B.__webglFramebuffer,N)}else if(oe){B.__webglDepthbuffer=[];for(let Me=0;Me<6;Me++)t.bindFramebuffer(36160,B.__webglFramebuffer[Me]),B.__webglDepthbuffer[Me]=r.createRenderbuffer(),ue(B.__webglDepthbuffer[Me],N,!1)}else t.bindFramebuffer(36160,B.__webglFramebuffer),B.__webglDepthbuffer=r.createRenderbuffer(),ue(B.__webglDepthbuffer,N,!1);t.bindFramebuffer(36160,null)}function me(N,B,oe){const Me=n.get(N);B!==void 0&&le(Me.__webglFramebuffer,N,N.texture,36064,3553),oe!==void 0&&se(N)}function _e(N){const B=N.texture,oe=n.get(N),Me=n.get(B);N.addEventListener("dispose",Q),N.isWebGLMultipleRenderTargets!==!0&&(Me.__webglTexture===void 0&&(Me.__webglTexture=r.createTexture()),Me.__version=B.version,o.memory.textures++);const Re=N.isWebGLCubeRenderTarget===!0,L=N.isWebGLMultipleRenderTargets===!0,_=P(N)||a;if(Re){oe.__webglFramebuffer=[];for(let b=0;b<6;b++)oe.__webglFramebuffer[b]=r.createFramebuffer()}else{if(oe.__webglFramebuffer=r.createFramebuffer(),L)if(i.drawBuffers){const b=N.texture;for(let I=0,$=b.length;I<$;I++){const W=n.get(b[I]);W.__webglTexture===void 0&&(W.__webglTexture=r.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&N.samples>0&&Oe(N)===!1){const b=L?B:[B];oe.__webglMultisampledFramebuffer=r.createFramebuffer(),oe.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,oe.__webglMultisampledFramebuffer);for(let I=0;I<b.length;I++){const $=b[I];oe.__webglColorRenderbuffer[I]=r.createRenderbuffer(),r.bindRenderbuffer(36161,oe.__webglColorRenderbuffer[I]);const W=s.convert($.format,$.encoding),X=s.convert($.type),Te=M($.internalFormat,W,X,$.encoding,N.isXRRenderTarget===!0),Be=Ce(N);r.renderbufferStorageMultisample(36161,Be,Te,N.width,N.height),r.framebufferRenderbuffer(36160,36064+I,36161,oe.__webglColorRenderbuffer[I])}r.bindRenderbuffer(36161,null),N.depthBuffer&&(oe.__webglDepthRenderbuffer=r.createRenderbuffer(),ue(oe.__webglDepthRenderbuffer,N,!0)),t.bindFramebuffer(36160,null)}}if(Re){t.bindTexture(34067,Me.__webglTexture),ve(34067,B,_);for(let b=0;b<6;b++)le(oe.__webglFramebuffer[b],N,B,36064,34069+b);k(B,_)&&F(34067),t.unbindTexture()}else if(L){const b=N.texture;for(let I=0,$=b.length;I<$;I++){const W=b[I],X=n.get(W);t.bindTexture(3553,X.__webglTexture),ve(3553,W,_),le(oe.__webglFramebuffer,N,W,36064+I,3553),k(W,_)&&F(3553)}t.unbindTexture()}else{let b=3553;(N.isWebGL3DRenderTarget||N.isWebGLArrayRenderTarget)&&(a?b=N.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(b,Me.__webglTexture),ve(b,B,_),le(oe.__webglFramebuffer,N,B,36064,b),k(B,_)&&F(b),t.unbindTexture()}N.depthBuffer&&se(N)}function we(N){const B=P(N)||a,oe=N.isWebGLMultipleRenderTargets===!0?N.texture:[N.texture];for(let Me=0,Re=oe.length;Me<Re;Me++){const L=oe[Me];if(k(L,B)){const _=N.isWebGLCubeRenderTarget?34067:3553,b=n.get(L).__webglTexture;t.bindTexture(_,b),F(_),t.unbindTexture()}}}function Ie(N){if(a&&N.samples>0&&Oe(N)===!1){const B=N.isWebGLMultipleRenderTargets?N.texture:[N.texture],oe=N.width,Me=N.height;let Re=16384;const L=[],_=N.stencilBuffer?33306:36096,b=n.get(N),I=N.isWebGLMultipleRenderTargets===!0;if(I)for(let $=0;$<B.length;$++)t.bindFramebuffer(36160,b.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(36160,36064+$,36161,null),t.bindFramebuffer(36160,b.__webglFramebuffer),r.framebufferTexture2D(36009,36064+$,3553,null,0);t.bindFramebuffer(36008,b.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,b.__webglFramebuffer);for(let $=0;$<B.length;$++){L.push(36064+$),N.depthBuffer&&L.push(_);const W=b.__ignoreDepthValues!==void 0?b.__ignoreDepthValues:!1;if(W===!1&&(N.depthBuffer&&(Re|=256),N.stencilBuffer&&(Re|=1024)),I&&r.framebufferRenderbuffer(36008,36064,36161,b.__webglColorRenderbuffer[$]),W===!0&&(r.invalidateFramebuffer(36008,[_]),r.invalidateFramebuffer(36009,[_])),I){const X=n.get(B[$]).__webglTexture;r.framebufferTexture2D(36009,36064,3553,X,0)}r.blitFramebuffer(0,0,oe,Me,0,0,oe,Me,Re,9728),v&&r.invalidateFramebuffer(36008,L)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),I)for(let $=0;$<B.length;$++){t.bindFramebuffer(36160,b.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(36160,36064+$,36161,b.__webglColorRenderbuffer[$]);const W=n.get(B[$]).__webglTexture;t.bindFramebuffer(36160,b.__webglFramebuffer),r.framebufferTexture2D(36009,36064+$,3553,W,0)}t.bindFramebuffer(36009,b.__webglMultisampledFramebuffer)}}function Ce(N){return Math.min(d,N.samples)}function Oe(N){const B=n.get(N);return a&&N.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&B.__useRenderToTexture!==!1}function tt(N){const B=o.render.frame;S.get(N)!==B&&(S.set(N,B),N.update())}function Ze(N,B){const oe=N.encoding,Me=N.format,Re=N.type;return N.isCompressedTexture===!0||N.isVideoTexture===!0||N.format===ef||oe!==Is&&(oe===Vt?a===!1?e.has("EXT_sRGB")===!0&&Me===Er?(N.format=ef,N.minFilter=gr,N.generateMipmaps=!1):B=Ub.sRGBToLinear(B):(Me!==Er||Re!==Ls)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",oe)),B}this.allocateTextureUnit=K,this.resetTextureUnits=ge,this.setTexture2D=Pe,this.setTexture2DArray=re,this.setTexture3D=ae,this.setTextureCube=xe,this.rebindTextures=me,this.setupRenderTarget=_e,this.updateRenderTargetMipmap=we,this.updateMultisampleRenderTarget=Ie,this.setupDepthRenderbuffer=se,this.setupFrameBufferTexture=le,this.useMultisampledRTT=Oe}function V5(r,e,t){const n=t.isWebGL2;function i(s,o=null){let a;if(s===Ls)return 5121;if(s===D4)return 32819;if(s===R4)return 32820;if(s===T4)return 5120;if(s===L4)return 5122;if(s===Ob)return 5123;if(s===I4)return 5124;if(s===gs)return 5125;if(s===vs)return 5126;if(s===il)return n?5131:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===k4)return 6406;if(s===Er)return 6408;if(s===O4)return 6409;if(s===B4)return 6410;if(s===Cs)return 6402;if(s===$o)return 34041;if(s===F4)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(s===ef)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===N4)return 6403;if(s===U4)return 36244;if(s===V4)return 33319;if(s===z4)return 33320;if(s===$4)return 36249;if(s===x0||s===w0||s===y0||s===_0)if(o===Vt)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===x0)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===w0)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===y0)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===_0)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===x0)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===w0)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===y0)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===_0)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===qp||s===Xp||s===Yp||s===jp)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===qp)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===Xp)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===Yp)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===jp)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===G4)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===Zp||s===Kp)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===Zp)return o===Vt?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===Kp)return o===Vt?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===Jp||s===Qp||s===em||s===tm||s===nm||s===rm||s===im||s===sm||s===om||s===am||s===lm||s===cm||s===um||s===hm)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===Jp)return o===Vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===Qp)return o===Vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===em)return o===Vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===tm)return o===Vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===nm)return o===Vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===rm)return o===Vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===im)return o===Vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===sm)return o===Vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===om)return o===Vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===am)return o===Vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===lm)return o===Vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===cm)return o===Vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===um)return o===Vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===hm)return o===Vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===fm)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===fm)return o===Vt?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return s===Bo?n?34042:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):r[s]!==void 0?r[s]:null}return{convert:i}}class z5 extends sr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Do extends Rn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const $5={type:"move"};class j0{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Do,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Do,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Y,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Y),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Do,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Y,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Y),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let i=null,s=null,o=null;const a=this._targetRay,c=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){o=!0;for(const x of e.hand.values()){const w=t.getJointPose(x,n),A=this._getHandJoint(u,x);w!==null&&(A.matrix.fromArray(w.transform.matrix),A.matrix.decompose(A.position,A.rotation,A.scale),A.jointRadius=w.radius),A.visible=w!==null}const f=u.joints["index-finger-tip"],d=u.joints["thumb-tip"],m=f.position.distanceTo(d.position),v=.02,S=.005;u.inputState.pinching&&m>v+S?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&m<=v-S&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),s!==null&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,n),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent($5)))}return a!==null&&(a.visible=i!==null),c!==null&&(c.visible=s!==null),u!==null&&(u.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new Do;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class G5 extends ar{constructor(e,t,n,i,s,o,a,c,u,f){if(f=f!==void 0?f:Cs,f!==Cs&&f!==$o)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&f===Cs&&(n=gs),n===void 0&&f===$o&&(n=Bo),super(null,i,s,o,a,c,f,n,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Gn,this.minFilter=c!==void 0?c:Gn,this.flipY=!1,this.generateMipmaps=!1}}class H5 extends Bs{constructor(e,t){super();const n=this;let i=null,s=1,o=null,a="local-floor",c=null,u=null,f=null,d=null,m=null,v=null;const S=t.getContextAttributes();let x=null,w=null;const A=[],T=[],E=new Set,P=new Map,y=new sr;y.layers.enable(1),y.viewport=new Wt;const k=new sr;k.layers.enable(2),k.viewport=new Wt;const F=[y,k],M=new z5;M.layers.enable(1),M.layers.enable(2);let R=null,O=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(re){let ae=A[re];return ae===void 0&&(ae=new j0,A[re]=ae),ae.getTargetRaySpace()},this.getControllerGrip=function(re){let ae=A[re];return ae===void 0&&(ae=new j0,A[re]=ae),ae.getGripSpace()},this.getHand=function(re){let ae=A[re];return ae===void 0&&(ae=new j0,A[re]=ae),ae.getHandSpace()};function z(re){const ae=T.indexOf(re.inputSource);if(ae===-1)return;const xe=A[ae];xe!==void 0&&xe.dispatchEvent({type:re.type,data:re.inputSource})}function Q(){i.removeEventListener("select",z),i.removeEventListener("selectstart",z),i.removeEventListener("selectend",z),i.removeEventListener("squeeze",z),i.removeEventListener("squeezestart",z),i.removeEventListener("squeezeend",z),i.removeEventListener("end",Q),i.removeEventListener("inputsourceschange",G);for(let re=0;re<A.length;re++){const ae=T[re];ae!==null&&(T[re]=null,A[re].disconnect(ae))}R=null,O=null,e.setRenderTarget(x),m=null,d=null,f=null,i=null,w=null,Pe.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(re){s=re,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(re){a=re,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(re){c=re},this.getBaseLayer=function(){return d!==null?d:m},this.getBinding=function(){return f},this.getFrame=function(){return v},this.getSession=function(){return i},this.setSession=async function(re){if(i=re,i!==null){if(x=e.getRenderTarget(),i.addEventListener("select",z),i.addEventListener("selectstart",z),i.addEventListener("selectend",z),i.addEventListener("squeeze",z),i.addEventListener("squeezestart",z),i.addEventListener("squeezeend",z),i.addEventListener("end",Q),i.addEventListener("inputsourceschange",G),S.xrCompatible!==!0&&await t.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const ae={antialias:i.renderState.layers===void 0?S.antialias:!0,alpha:S.alpha,depth:S.depth,stencil:S.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(i,t,ae),i.updateRenderState({baseLayer:m}),w=new Ds(m.framebufferWidth,m.framebufferHeight,{format:Er,type:Ls,encoding:e.outputEncoding,stencilBuffer:S.stencil})}else{let ae=null,xe=null,be=null;S.depth&&(be=S.stencil?35056:33190,ae=S.stencil?$o:Cs,xe=S.stencil?Bo:gs);const De={colorFormat:32856,depthFormat:be,scaleFactor:s};f=new XRWebGLBinding(i,t),d=f.createProjectionLayer(De),i.updateRenderState({layers:[d]}),w=new Ds(d.textureWidth,d.textureHeight,{format:Er,type:Ls,depthTexture:new G5(d.textureWidth,d.textureHeight,xe,void 0,void 0,void 0,void 0,void 0,void 0,ae),stencilBuffer:S.stencil,encoding:e.outputEncoding,samples:S.antialias?4:0});const ve=e.properties.get(w);ve.__ignoreDepthValues=d.ignoreDepthValues}w.isXRRenderTarget=!0,this.setFoveation(1),c=null,o=await i.requestReferenceSpace(a),Pe.setContext(i),Pe.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};function G(re){for(let ae=0;ae<re.removed.length;ae++){const xe=re.removed[ae],be=T.indexOf(xe);be>=0&&(T[be]=null,A[be].disconnect(xe))}for(let ae=0;ae<re.added.length;ae++){const xe=re.added[ae];let be=T.indexOf(xe);if(be===-1){for(let ve=0;ve<A.length;ve++)if(ve>=T.length){T.push(xe),be=ve;break}else if(T[ve]===null){T[ve]=xe,be=ve;break}if(be===-1)break}const De=A[be];De&&De.connect(xe)}}const V=new Y,q=new Y;function j(re,ae,xe){V.setFromMatrixPosition(ae.matrixWorld),q.setFromMatrixPosition(xe.matrixWorld);const be=V.distanceTo(q),De=ae.projectionMatrix.elements,ve=xe.projectionMatrix.elements,Je=De[14]/(De[10]-1),pe=De[14]/(De[10]+1),he=(De[9]+1)/De[5],le=(De[9]-1)/De[5],ue=(De[8]-1)/De[0],te=(ve[8]+1)/ve[0],se=Je*ue,me=Je*te,_e=be/(-ue+te),we=_e*-ue;ae.matrixWorld.decompose(re.position,re.quaternion,re.scale),re.translateX(we),re.translateZ(_e),re.matrixWorld.compose(re.position,re.quaternion,re.scale),re.matrixWorldInverse.copy(re.matrixWorld).invert();const Ie=Je+_e,Ce=pe+_e,Oe=se-we,tt=me+(be-we),Ze=he*pe/Ce*Ie,N=le*pe/Ce*Ie;re.projectionMatrix.makePerspective(Oe,tt,Ze,N,Ie,Ce)}function ge(re,ae){ae===null?re.matrixWorld.copy(re.matrix):re.matrixWorld.multiplyMatrices(ae.matrixWorld,re.matrix),re.matrixWorldInverse.copy(re.matrixWorld).invert()}this.updateCamera=function(re){if(i===null)return;M.near=k.near=y.near=re.near,M.far=k.far=y.far=re.far,(R!==M.near||O!==M.far)&&(i.updateRenderState({depthNear:M.near,depthFar:M.far}),R=M.near,O=M.far);const ae=re.parent,xe=M.cameras;ge(M,ae);for(let De=0;De<xe.length;De++)ge(xe[De],ae);M.matrixWorld.decompose(M.position,M.quaternion,M.scale),re.matrix.copy(M.matrix),re.matrix.decompose(re.position,re.quaternion,re.scale);const be=re.children;for(let De=0,ve=be.length;De<ve;De++)be[De].updateMatrixWorld(!0);xe.length===2?j(M,y,k):M.projectionMatrix.copy(y.projectionMatrix)},this.getCamera=function(){return M},this.getFoveation=function(){if(d!==null)return d.fixedFoveation;if(m!==null)return m.fixedFoveation},this.setFoveation=function(re){d!==null&&(d.fixedFoveation=re),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=re)},this.getPlanes=function(){return E};let K=null;function Ee(re,ae){if(u=ae.getViewerPose(c||o),v=ae,u!==null){const xe=u.views;m!==null&&(e.setRenderTargetFramebuffer(w,m.framebuffer),e.setRenderTarget(w));let be=!1;xe.length!==M.cameras.length&&(M.cameras.length=0,be=!0);for(let De=0;De<xe.length;De++){const ve=xe[De];let Je=null;if(m!==null)Je=m.getViewport(ve);else{const he=f.getViewSubImage(d,ve);Je=he.viewport,De===0&&(e.setRenderTargetTextures(w,he.colorTexture,d.ignoreDepthValues?void 0:he.depthStencilTexture),e.setRenderTarget(w))}let pe=F[De];pe===void 0&&(pe=new sr,pe.layers.enable(De),pe.viewport=new Wt,F[De]=pe),pe.matrix.fromArray(ve.transform.matrix),pe.projectionMatrix.fromArray(ve.projectionMatrix),pe.viewport.set(Je.x,Je.y,Je.width,Je.height),De===0&&M.matrix.copy(pe.matrix),be===!0&&M.cameras.push(pe)}}for(let xe=0;xe<A.length;xe++){const be=T[xe],De=A[xe];be!==null&&De!==void 0&&De.update(be,ae,c||o)}if(K&&K(re,ae),ae.detectedPlanes){n.dispatchEvent({type:"planesdetected",data:ae.detectedPlanes});let xe=null;for(const be of E)ae.detectedPlanes.has(be)||(xe===null&&(xe=[]),xe.push(be));if(xe!==null)for(const be of xe)E.delete(be),P.delete(be),n.dispatchEvent({type:"planeremoved",data:be});for(const be of ae.detectedPlanes)if(!E.has(be))E.add(be),P.set(be,ae.lastChangedTime),n.dispatchEvent({type:"planeadded",data:be});else{const De=P.get(be);be.lastChangedTime>De&&(P.set(be,be.lastChangedTime),n.dispatchEvent({type:"planechanged",data:be}))}}v=null}const Pe=new Yb;Pe.setAnimationLoop(Ee),this.setAnimationLoop=function(re){K=re},this.dispose=function(){}}}function W5(r,e){function t(x,w){w.color.getRGB(x.fogColor.value,Wb(r)),w.isFog?(x.fogNear.value=w.near,x.fogFar.value=w.far):w.isFogExp2&&(x.fogDensity.value=w.density)}function n(x,w,A,T,E){w.isMeshBasicMaterial||w.isMeshLambertMaterial?i(x,w):w.isMeshToonMaterial?(i(x,w),f(x,w)):w.isMeshPhongMaterial?(i(x,w),u(x,w)):w.isMeshStandardMaterial?(i(x,w),d(x,w),w.isMeshPhysicalMaterial&&m(x,w,E)):w.isMeshMatcapMaterial?(i(x,w),v(x,w)):w.isMeshDepthMaterial?i(x,w):w.isMeshDistanceMaterial?(i(x,w),S(x,w)):w.isMeshNormalMaterial?i(x,w):w.isLineBasicMaterial?(s(x,w),w.isLineDashedMaterial&&o(x,w)):w.isPointsMaterial?a(x,w,A,T):w.isSpriteMaterial?c(x,w):w.isShadowMaterial?(x.color.value.copy(w.color),x.opacity.value=w.opacity):w.isShaderMaterial&&(w.uniformsNeedUpdate=!1)}function i(x,w){x.opacity.value=w.opacity,w.color&&x.diffuse.value.copy(w.color),w.emissive&&x.emissive.value.copy(w.emissive).multiplyScalar(w.emissiveIntensity),w.map&&(x.map.value=w.map),w.alphaMap&&(x.alphaMap.value=w.alphaMap),w.bumpMap&&(x.bumpMap.value=w.bumpMap,x.bumpScale.value=w.bumpScale,w.side===vr&&(x.bumpScale.value*=-1)),w.displacementMap&&(x.displacementMap.value=w.displacementMap,x.displacementScale.value=w.displacementScale,x.displacementBias.value=w.displacementBias),w.emissiveMap&&(x.emissiveMap.value=w.emissiveMap),w.normalMap&&(x.normalMap.value=w.normalMap,x.normalScale.value.copy(w.normalScale),w.side===vr&&x.normalScale.value.negate()),w.specularMap&&(x.specularMap.value=w.specularMap),w.alphaTest>0&&(x.alphaTest.value=w.alphaTest);const A=e.get(w).envMap;if(A&&(x.envMap.value=A,x.flipEnvMap.value=A.isCubeTexture&&A.isRenderTargetTexture===!1?-1:1,x.reflectivity.value=w.reflectivity,x.ior.value=w.ior,x.refractionRatio.value=w.refractionRatio),w.lightMap){x.lightMap.value=w.lightMap;const P=r.physicallyCorrectLights!==!0?Math.PI:1;x.lightMapIntensity.value=w.lightMapIntensity*P}w.aoMap&&(x.aoMap.value=w.aoMap,x.aoMapIntensity.value=w.aoMapIntensity);let T;w.map?T=w.map:w.specularMap?T=w.specularMap:w.displacementMap?T=w.displacementMap:w.normalMap?T=w.normalMap:w.bumpMap?T=w.bumpMap:w.roughnessMap?T=w.roughnessMap:w.metalnessMap?T=w.metalnessMap:w.alphaMap?T=w.alphaMap:w.emissiveMap?T=w.emissiveMap:w.clearcoatMap?T=w.clearcoatMap:w.clearcoatNormalMap?T=w.clearcoatNormalMap:w.clearcoatRoughnessMap?T=w.clearcoatRoughnessMap:w.iridescenceMap?T=w.iridescenceMap:w.iridescenceThicknessMap?T=w.iridescenceThicknessMap:w.specularIntensityMap?T=w.specularIntensityMap:w.specularColorMap?T=w.specularColorMap:w.transmissionMap?T=w.transmissionMap:w.thicknessMap?T=w.thicknessMap:w.sheenColorMap?T=w.sheenColorMap:w.sheenRoughnessMap&&(T=w.sheenRoughnessMap),T!==void 0&&(T.isWebGLRenderTarget&&(T=T.texture),T.matrixAutoUpdate===!0&&T.updateMatrix(),x.uvTransform.value.copy(T.matrix));let E;w.aoMap?E=w.aoMap:w.lightMap&&(E=w.lightMap),E!==void 0&&(E.isWebGLRenderTarget&&(E=E.texture),E.matrixAutoUpdate===!0&&E.updateMatrix(),x.uv2Transform.value.copy(E.matrix))}function s(x,w){x.diffuse.value.copy(w.color),x.opacity.value=w.opacity}function o(x,w){x.dashSize.value=w.dashSize,x.totalSize.value=w.dashSize+w.gapSize,x.scale.value=w.scale}function a(x,w,A,T){x.diffuse.value.copy(w.color),x.opacity.value=w.opacity,x.size.value=w.size*A,x.scale.value=T*.5,w.map&&(x.map.value=w.map),w.alphaMap&&(x.alphaMap.value=w.alphaMap),w.alphaTest>0&&(x.alphaTest.value=w.alphaTest);let E;w.map?E=w.map:w.alphaMap&&(E=w.alphaMap),E!==void 0&&(E.matrixAutoUpdate===!0&&E.updateMatrix(),x.uvTransform.value.copy(E.matrix))}function c(x,w){x.diffuse.value.copy(w.color),x.opacity.value=w.opacity,x.rotation.value=w.rotation,w.map&&(x.map.value=w.map),w.alphaMap&&(x.alphaMap.value=w.alphaMap),w.alphaTest>0&&(x.alphaTest.value=w.alphaTest);let A;w.map?A=w.map:w.alphaMap&&(A=w.alphaMap),A!==void 0&&(A.matrixAutoUpdate===!0&&A.updateMatrix(),x.uvTransform.value.copy(A.matrix))}function u(x,w){x.specular.value.copy(w.specular),x.shininess.value=Math.max(w.shininess,1e-4)}function f(x,w){w.gradientMap&&(x.gradientMap.value=w.gradientMap)}function d(x,w){x.roughness.value=w.roughness,x.metalness.value=w.metalness,w.roughnessMap&&(x.roughnessMap.value=w.roughnessMap),w.metalnessMap&&(x.metalnessMap.value=w.metalnessMap),e.get(w).envMap&&(x.envMapIntensity.value=w.envMapIntensity)}function m(x,w,A){x.ior.value=w.ior,w.sheen>0&&(x.sheenColor.value.copy(w.sheenColor).multiplyScalar(w.sheen),x.sheenRoughness.value=w.sheenRoughness,w.sheenColorMap&&(x.sheenColorMap.value=w.sheenColorMap),w.sheenRoughnessMap&&(x.sheenRoughnessMap.value=w.sheenRoughnessMap)),w.clearcoat>0&&(x.clearcoat.value=w.clearcoat,x.clearcoatRoughness.value=w.clearcoatRoughness,w.clearcoatMap&&(x.clearcoatMap.value=w.clearcoatMap),w.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=w.clearcoatRoughnessMap),w.clearcoatNormalMap&&(x.clearcoatNormalScale.value.copy(w.clearcoatNormalScale),x.clearcoatNormalMap.value=w.clearcoatNormalMap,w.side===vr&&x.clearcoatNormalScale.value.negate())),w.iridescence>0&&(x.iridescence.value=w.iridescence,x.iridescenceIOR.value=w.iridescenceIOR,x.iridescenceThicknessMinimum.value=w.iridescenceThicknessRange[0],x.iridescenceThicknessMaximum.value=w.iridescenceThicknessRange[1],w.iridescenceMap&&(x.iridescenceMap.value=w.iridescenceMap),w.iridescenceThicknessMap&&(x.iridescenceThicknessMap.value=w.iridescenceThicknessMap)),w.transmission>0&&(x.transmission.value=w.transmission,x.transmissionSamplerMap.value=A.texture,x.transmissionSamplerSize.value.set(A.width,A.height),w.transmissionMap&&(x.transmissionMap.value=w.transmissionMap),x.thickness.value=w.thickness,w.thicknessMap&&(x.thicknessMap.value=w.thicknessMap),x.attenuationDistance.value=w.attenuationDistance,x.attenuationColor.value.copy(w.attenuationColor)),x.specularIntensity.value=w.specularIntensity,x.specularColor.value.copy(w.specularColor),w.specularIntensityMap&&(x.specularIntensityMap.value=w.specularIntensityMap),w.specularColorMap&&(x.specularColorMap.value=w.specularColorMap)}function v(x,w){w.matcap&&(x.matcap.value=w.matcap)}function S(x,w){x.referencePosition.value.copy(w.referencePosition),x.nearDistance.value=w.nearDistance,x.farDistance.value=w.farDistance}return{refreshFogUniforms:t,refreshMaterialUniforms:n}}function q5(r,e,t,n){let i={},s={},o=[];const a=t.isWebGL2?r.getParameter(35375):0;function c(T,E){const P=E.program;n.uniformBlockBinding(T,P)}function u(T,E){let P=i[T.id];P===void 0&&(S(T),P=f(T),i[T.id]=P,T.addEventListener("dispose",w));const y=E.program;n.updateUBOMapping(T,y);const k=e.render.frame;s[T.id]!==k&&(m(T),s[T.id]=k)}function f(T){const E=d();T.__bindingPointIndex=E;const P=r.createBuffer(),y=T.__size,k=T.usage;return r.bindBuffer(35345,P),r.bufferData(35345,y,k),r.bindBuffer(35345,null),r.bindBufferBase(35345,E,P),P}function d(){for(let T=0;T<a;T++)if(o.indexOf(T)===-1)return o.push(T),T;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function m(T){const E=i[T.id],P=T.uniforms,y=T.__cache;r.bindBuffer(35345,E);for(let k=0,F=P.length;k<F;k++){const M=P[k];if(v(M,k,y)===!0){const R=M.__offset,O=Array.isArray(M.value)?M.value:[M.value];let z=0;for(let Q=0;Q<O.length;Q++){const G=O[Q],V=x(G);typeof G=="number"?(M.__data[0]=G,r.bufferSubData(35345,R+z,M.__data)):G.isMatrix3?(M.__data[0]=G.elements[0],M.__data[1]=G.elements[1],M.__data[2]=G.elements[2],M.__data[3]=G.elements[0],M.__data[4]=G.elements[3],M.__data[5]=G.elements[4],M.__data[6]=G.elements[5],M.__data[7]=G.elements[0],M.__data[8]=G.elements[6],M.__data[9]=G.elements[7],M.__data[10]=G.elements[8],M.__data[11]=G.elements[0]):(G.toArray(M.__data,z),z+=V.storage/Float32Array.BYTES_PER_ELEMENT)}r.bufferSubData(35345,R,M.__data)}}r.bindBuffer(35345,null)}function v(T,E,P){const y=T.value;if(P[E]===void 0){if(typeof y=="number")P[E]=y;else{const k=Array.isArray(y)?y:[y],F=[];for(let M=0;M<k.length;M++)F.push(k[M].clone());P[E]=F}return!0}else if(typeof y=="number"){if(P[E]!==y)return P[E]=y,!0}else{const k=Array.isArray(P[E])?P[E]:[P[E]],F=Array.isArray(y)?y:[y];for(let M=0;M<k.length;M++){const R=k[M];if(R.equals(F[M])===!1)return R.copy(F[M]),!0}}return!1}function S(T){const E=T.uniforms;let P=0;const y=16;let k=0;for(let F=0,M=E.length;F<M;F++){const R=E[F],O={boundary:0,storage:0},z=Array.isArray(R.value)?R.value:[R.value];for(let Q=0,G=z.length;Q<G;Q++){const V=z[Q],q=x(V);O.boundary+=q.boundary,O.storage+=q.storage}if(R.__data=new Float32Array(O.storage/Float32Array.BYTES_PER_ELEMENT),R.__offset=P,F>0){k=P%y;const Q=y-k;k!==0&&Q-O.boundary<0&&(P+=y-k,R.__offset=P)}P+=O.storage}return k=P%y,k>0&&(P+=y-k),T.__size=P,T.__cache={},this}function x(T){const E={boundary:0,storage:0};return typeof T=="number"?(E.boundary=4,E.storage=4):T.isVector2?(E.boundary=8,E.storage=8):T.isVector3||T.isColor?(E.boundary=16,E.storage=12):T.isVector4?(E.boundary=16,E.storage=16):T.isMatrix3?(E.boundary=48,E.storage=48):T.isMatrix4?(E.boundary=64,E.storage=64):T.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",T),E}function w(T){const E=T.target;E.removeEventListener("dispose",w);const P=o.indexOf(E.__bindingPointIndex);o.splice(P,1),r.deleteBuffer(i[E.id]),delete i[E.id],delete s[E.id]}function A(){for(const T in i)r.deleteBuffer(i[T]);o=[],i={},s={}}return{bind:c,update:u,dispose:A}}function X5(){const r=Hc("canvas");return r.style.display="block",r}function Qb(r={}){this.isWebGLRenderer=!0;const e=r.canvas!==void 0?r.canvas:X5(),t=r.context!==void 0?r.context:null,n=r.depth!==void 0?r.depth:!0,i=r.stencil!==void 0?r.stencil:!0,s=r.antialias!==void 0?r.antialias:!1,o=r.premultipliedAlpha!==void 0?r.premultipliedAlpha:!0,a=r.preserveDrawingBuffer!==void 0?r.preserveDrawingBuffer:!1,c=r.powerPreference!==void 0?r.powerPreference:"default",u=r.failIfMajorPerformanceCaveat!==void 0?r.failIfMajorPerformanceCaveat:!1;let f;t!==null?f=t.getContextAttributes().alpha:f=r.alpha!==void 0?r.alpha:!1;let d=null,m=null;const v=[],S=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Is,this.physicallyCorrectLights=!1,this.toneMapping=vi,this.toneMappingExposure=1;const x=this;let w=!1,A=0,T=0,E=null,P=-1,y=null;const k=new Wt,F=new Wt;let M=null,R=e.width,O=e.height,z=1,Q=null,G=null;const V=new Wt(0,0,R,O),q=new Wt(0,0,R,O);let j=!1;const ge=new Of;let K=!1,Ee=!1,Pe=null;const re=new en,ae=new Ne,xe=new Y,be={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function De(){return E===null?z:1}let ve=t;function Je(U,fe){for(let Se=0;Se<U.length;Se++){const ce=U[Se],Ae=e.getContext(ce,fe);if(Ae!==null)return Ae}return null}try{const U={alpha:!0,depth:n,stencil:i,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:c,failIfMajorPerformanceCaveat:u};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${Lf}`),e.addEventListener("webglcontextlost",Te,!1),e.addEventListener("webglcontextrestored",Be,!1),e.addEventListener("webglcontextcreationerror",We,!1),ve===null){const fe=["webgl2","webgl","experimental-webgl"];if(x.isWebGL1Renderer===!0&&fe.shift(),ve=Je(fe,U),ve===null)throw Je(fe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}ve.getShaderPrecisionFormat===void 0&&(ve.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(U){throw console.error("THREE.WebGLRenderer: "+U.message),U}let pe,he,le,ue,te,se,me,_e,we,Ie,Ce,Oe,tt,Ze,N,B,oe,Me,Re,L,_,b,I,$;function W(){pe=new iE(ve),he=new KM(ve,pe,r),pe.init(he),b=new V5(ve,pe,he),le=new N5(ve,pe,he),ue=new aE,te=new C5,se=new U5(ve,pe,le,te,he,b,ue),me=new QM(x),_e=new rE(x),we=new mS(ve,he),I=new jM(ve,pe,we,he),Ie=new sE(ve,we,ue,I),Ce=new hE(ve,Ie,we,ue),Re=new uE(ve,he,se),B=new JM(te),Oe=new S5(x,me,_e,pe,he,I,B),tt=new W5(x,te),Ze=new E5,N=new D5(pe,he),Me=new YM(x,me,_e,le,Ce,f,o),oe=new B5(x,Ce,he),$=new q5(ve,ue,he,le),L=new ZM(ve,pe,ue,he),_=new oE(ve,pe,ue,he),ue.programs=Oe.programs,x.capabilities=he,x.extensions=pe,x.properties=te,x.renderLists=Ze,x.shadowMap=oe,x.state=le,x.info=ue}W();const X=new H5(x,ve);this.xr=X,this.getContext=function(){return ve},this.getContextAttributes=function(){return ve.getContextAttributes()},this.forceContextLoss=function(){const U=pe.get("WEBGL_lose_context");U&&U.loseContext()},this.forceContextRestore=function(){const U=pe.get("WEBGL_lose_context");U&&U.restoreContext()},this.getPixelRatio=function(){return z},this.setPixelRatio=function(U){U!==void 0&&(z=U,this.setSize(R,O,!1))},this.getSize=function(U){return U.set(R,O)},this.setSize=function(U,fe,Se){if(X.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}R=U,O=fe,e.width=Math.floor(U*z),e.height=Math.floor(fe*z),Se!==!1&&(e.style.width=U+"px",e.style.height=fe+"px"),this.setViewport(0,0,U,fe)},this.getDrawingBufferSize=function(U){return U.set(R*z,O*z).floor()},this.setDrawingBufferSize=function(U,fe,Se){R=U,O=fe,z=Se,e.width=Math.floor(U*Se),e.height=Math.floor(fe*Se),this.setViewport(0,0,U,fe)},this.getCurrentViewport=function(U){return U.copy(k)},this.getViewport=function(U){return U.copy(V)},this.setViewport=function(U,fe,Se,ce){U.isVector4?V.set(U.x,U.y,U.z,U.w):V.set(U,fe,Se,ce),le.viewport(k.copy(V).multiplyScalar(z).floor())},this.getScissor=function(U){return U.copy(q)},this.setScissor=function(U,fe,Se,ce){U.isVector4?q.set(U.x,U.y,U.z,U.w):q.set(U,fe,Se,ce),le.scissor(F.copy(q).multiplyScalar(z).floor())},this.getScissorTest=function(){return j},this.setScissorTest=function(U){le.setScissorTest(j=U)},this.setOpaqueSort=function(U){Q=U},this.setTransparentSort=function(U){G=U},this.getClearColor=function(U){return U.copy(Me.getClearColor())},this.setClearColor=function(){Me.setClearColor.apply(Me,arguments)},this.getClearAlpha=function(){return Me.getClearAlpha()},this.setClearAlpha=function(){Me.setClearAlpha.apply(Me,arguments)},this.clear=function(U=!0,fe=!0,Se=!0){let ce=0;U&&(ce|=16384),fe&&(ce|=256),Se&&(ce|=1024),ve.clear(ce)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Te,!1),e.removeEventListener("webglcontextrestored",Be,!1),e.removeEventListener("webglcontextcreationerror",We,!1),Ze.dispose(),N.dispose(),te.dispose(),me.dispose(),_e.dispose(),Ce.dispose(),I.dispose(),$.dispose(),Oe.dispose(),X.dispose(),X.removeEventListener("sessionstart",He),X.removeEventListener("sessionend",je),Pe&&(Pe.dispose(),Pe=null),wt.stop()};function Te(U){U.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),w=!0}function Be(){console.log("THREE.WebGLRenderer: Context Restored."),w=!1;const U=ue.autoReset,fe=oe.enabled,Se=oe.autoUpdate,ce=oe.needsUpdate,Ae=oe.type;W(),ue.autoReset=U,oe.enabled=fe,oe.autoUpdate=Se,oe.needsUpdate=ce,oe.type=Ae}function We(U){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",U.statusMessage)}function qe(U){const fe=U.target;fe.removeEventListener("dispose",qe),Xe(fe)}function Xe(U){Z(U),te.remove(U)}function Z(U){const fe=te.get(U).programs;fe!==void 0&&(fe.forEach(function(Se){Oe.releaseProgram(Se)}),U.isShaderMaterial&&Oe.releaseShaderCache(U))}this.renderBufferDirect=function(U,fe,Se,ce,Ae,Qe){fe===null&&(fe=be);const nt=Ae.isMesh&&Ae.matrixWorld.determinant()<0,lt=xr(U,fe,Se,ce,Ae);le.setMaterial(ce,nt);let ct=Se.index,ut=1;ce.wireframe===!0&&(ct=Ie.getWireframeAttribute(Se),ut=2);const rt=Se.drawRange,st=Se.attributes.position;let St=rt.start*ut,rn=(rt.start+rt.count)*ut;Qe!==null&&(St=Math.max(St,Qe.start*ut),rn=Math.min(rn,(Qe.start+Qe.count)*ut)),ct!==null?(St=Math.max(St,0),rn=Math.min(rn,ct.count)):st!=null&&(St=Math.max(St,0),rn=Math.min(rn,st.count));const Yt=rn-St;if(Yt<0||Yt===1/0)return;I.setup(Ae,ce,lt,Se,ct);let Pn,Ft=L;if(ct!==null&&(Pn=we.get(ct),Ft=_,Ft.setIndex(Pn)),Ae.isMesh)ce.wireframe===!0?(le.setLineWidth(ce.wireframeLinewidth*De()),Ft.setMode(1)):Ft.setMode(4);else if(Ae.isLine){let ht=ce.linewidth;ht===void 0&&(ht=1),le.setLineWidth(ht*De()),Ae.isLineSegments?Ft.setMode(1):Ae.isLineLoop?Ft.setMode(2):Ft.setMode(3)}else Ae.isPoints?Ft.setMode(0):Ae.isSprite&&Ft.setMode(4);if(Ae.isInstancedMesh)Ft.renderInstances(St,Yt,Ae.count);else if(Se.isInstancedBufferGeometry){const ht=Se._maxInstanceCount!==void 0?Se._maxInstanceCount:1/0,cr=Math.min(Se.instanceCount,ht);Ft.renderInstances(St,Yt,cr)}else Ft.render(St,Yt)},this.compile=function(U,fe){function Se(ce,Ae,Qe){ce.transparent===!0&&ce.side===Bl?(ce.side=vr,ce.needsUpdate=!0,Nt(ce,Ae,Qe),ce.side=Ts,ce.needsUpdate=!0,Nt(ce,Ae,Qe),ce.side=Bl):Nt(ce,Ae,Qe)}m=N.get(U),m.init(),S.push(m),U.traverseVisible(function(ce){ce.isLight&&ce.layers.test(fe.layers)&&(m.pushLight(ce),ce.castShadow&&m.pushShadow(ce))}),m.setupLights(x.physicallyCorrectLights),U.traverse(function(ce){const Ae=ce.material;if(Ae)if(Array.isArray(Ae))for(let Qe=0;Qe<Ae.length;Qe++){const nt=Ae[Qe];Se(nt,U,ce)}else Se(Ae,U,ce)}),S.pop(),m=null};let ye=null;function ke(U){ye&&ye(U)}function He(){wt.stop()}function je(){wt.start()}const wt=new Yb;wt.setAnimationLoop(ke),typeof self<"u"&&wt.setContext(self),this.setAnimationLoop=function(U){ye=U,X.setAnimationLoop(U),U===null?wt.stop():wt.start()},X.addEventListener("sessionstart",He),X.addEventListener("sessionend",je),this.render=function(U,fe){if(fe!==void 0&&fe.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(w===!0)return;U.matrixWorldAutoUpdate===!0&&U.updateMatrixWorld(),fe.parent===null&&fe.matrixWorldAutoUpdate===!0&&fe.updateMatrixWorld(),X.enabled===!0&&X.isPresenting===!0&&(X.cameraAutoUpdate===!0&&X.updateCamera(fe),fe=X.getCamera()),U.isScene===!0&&U.onBeforeRender(x,U,fe,E),m=N.get(U,S.length),m.init(),S.push(m),re.multiplyMatrices(fe.projectionMatrix,fe.matrixWorldInverse),ge.setFromProjectionMatrix(re),Ee=this.localClippingEnabled,K=B.init(this.clippingPlanes,Ee,fe),d=Ze.get(U,v.length),d.init(),v.push(d),qt(U,fe,0,x.sortObjects),d.finish(),x.sortObjects===!0&&d.sort(Q,G),K===!0&&B.beginShadows();const Se=m.state.shadowsArray;if(oe.render(Se,U,fe),K===!0&&B.endShadows(),this.info.autoReset===!0&&this.info.reset(),Me.render(d,U),m.setupLights(x.physicallyCorrectLights),fe.isArrayCamera){const ce=fe.cameras;for(let Ae=0,Qe=ce.length;Ae<Qe;Ae++){const nt=ce[Ae];Xt(d,U,nt,nt.viewport)}}else Xt(d,U,fe);E!==null&&(se.updateMultisampleRenderTarget(E),se.updateRenderTargetMipmap(E)),U.isScene===!0&&U.onAfterRender(x,U,fe),I.resetDefaultState(),P=-1,y=null,S.pop(),S.length>0?m=S[S.length-1]:m=null,v.pop(),v.length>0?d=v[v.length-1]:d=null};function qt(U,fe,Se,ce){if(U.visible===!1)return;if(U.layers.test(fe.layers)){if(U.isGroup)Se=U.renderOrder;else if(U.isLOD)U.autoUpdate===!0&&U.update(fe);else if(U.isLight)m.pushLight(U),U.castShadow&&m.pushShadow(U);else if(U.isSprite){if(!U.frustumCulled||ge.intersectsSprite(U)){ce&&xe.setFromMatrixPosition(U.matrixWorld).applyMatrix4(re);const nt=Ce.update(U),lt=U.material;lt.visible&&d.push(U,nt,lt,Se,xe.z,null)}}else if((U.isMesh||U.isLine||U.isPoints)&&(U.isSkinnedMesh&&U.skeleton.frame!==ue.render.frame&&(U.skeleton.update(),U.skeleton.frame=ue.render.frame),!U.frustumCulled||ge.intersectsObject(U))){ce&&xe.setFromMatrixPosition(U.matrixWorld).applyMatrix4(re);const nt=Ce.update(U),lt=U.material;if(Array.isArray(lt)){const ct=nt.groups;for(let ut=0,rt=ct.length;ut<rt;ut++){const st=ct[ut],St=lt[st.materialIndex];St&&St.visible&&d.push(U,nt,St,Se,xe.z,st)}}else lt.visible&&d.push(U,nt,lt,Se,xe.z,null)}}const Qe=U.children;for(let nt=0,lt=Qe.length;nt<lt;nt++)qt(Qe[nt],fe,Se,ce)}function Xt(U,fe,Se,ce){const Ae=U.opaque,Qe=U.transmissive,nt=U.transparent;m.setupLightsView(Se),Qe.length>0&&Fn(Ae,fe,Se),ce&&le.viewport(k.copy(ce)),Ae.length>0&&mt(Ae,fe,Se),Qe.length>0&&mt(Qe,fe,Se),nt.length>0&&mt(nt,fe,Se),le.buffers.depth.setTest(!0),le.buffers.depth.setMask(!0),le.buffers.color.setMask(!0),le.setPolygonOffset(!1)}function Fn(U,fe,Se){const ce=he.isWebGL2;Pe===null&&(Pe=new Ds(1,1,{generateMipmaps:!0,type:pe.has("EXT_color_buffer_half_float")?il:Ls,minFilter:rl,samples:ce&&s===!0?4:0})),x.getDrawingBufferSize(ae),ce?Pe.setSize(ae.x,ae.y):Pe.setSize(tf(ae.x),tf(ae.y));const Ae=x.getRenderTarget();x.setRenderTarget(Pe),x.clear();const Qe=x.toneMapping;x.toneMapping=vi,mt(U,fe,Se),x.toneMapping=Qe,se.updateMultisampleRenderTarget(Pe),se.updateRenderTargetMipmap(Pe),x.setRenderTarget(Ae)}function mt(U,fe,Se){const ce=fe.isScene===!0?fe.overrideMaterial:null;for(let Ae=0,Qe=U.length;Ae<Qe;Ae++){const nt=U[Ae],lt=nt.object,ct=nt.geometry,ut=ce===null?nt.material:ce,rt=nt.group;lt.layers.test(Se.layers)&&An(lt,fe,Se,ct,ut,rt)}}function An(U,fe,Se,ce,Ae,Qe){U.onBeforeRender(x,fe,Se,ce,Ae,Qe),U.modelViewMatrix.multiplyMatrices(Se.matrixWorldInverse,U.matrixWorld),U.normalMatrix.getNormalMatrix(U.modelViewMatrix),Ae.onBeforeRender(x,fe,Se,ce,U,Qe),Ae.transparent===!0&&Ae.side===Bl?(Ae.side=vr,Ae.needsUpdate=!0,x.renderBufferDirect(Se,fe,ce,Ae,U,Qe),Ae.side=Ts,Ae.needsUpdate=!0,x.renderBufferDirect(Se,fe,ce,Ae,U,Qe),Ae.side=Bl):x.renderBufferDirect(Se,fe,ce,Ae,U,Qe),U.onAfterRender(x,fe,Se,ce,Ae,Qe)}function Nt(U,fe,Se){fe.isScene!==!0&&(fe=be);const ce=te.get(U),Ae=m.state.lights,Qe=m.state.shadowsArray,nt=Ae.state.version,lt=Oe.getParameters(U,Ae.state,Qe,fe,Se),ct=Oe.getProgramCacheKey(lt);let ut=ce.programs;ce.environment=U.isMeshStandardMaterial?fe.environment:null,ce.fog=fe.fog,ce.envMap=(U.isMeshStandardMaterial?_e:me).get(U.envMap||ce.environment),ut===void 0&&(U.addEventListener("dispose",qe),ut=new Map,ce.programs=ut);let rt=ut.get(ct);if(rt!==void 0){if(ce.currentProgram===rt&&ce.lightsStateVersion===nt)return Ji(U,lt),rt}else lt.uniforms=Oe.getUniforms(U),U.onBuild(Se,lt,x),U.onBeforeCompile(lt,x),rt=Oe.acquireProgram(lt,ct),ut.set(ct,rt),ce.uniforms=lt.uniforms;const st=ce.uniforms;(!U.isShaderMaterial&&!U.isRawShaderMaterial||U.clipping===!0)&&(st.clippingPlanes=B.uniform),Ji(U,lt),ce.needsLights=Qn(U),ce.lightsStateVersion=nt,ce.needsLights&&(st.ambientLightColor.value=Ae.state.ambient,st.lightProbe.value=Ae.state.probe,st.directionalLights.value=Ae.state.directional,st.directionalLightShadows.value=Ae.state.directionalShadow,st.spotLights.value=Ae.state.spot,st.spotLightShadows.value=Ae.state.spotShadow,st.rectAreaLights.value=Ae.state.rectArea,st.ltc_1.value=Ae.state.rectAreaLTC1,st.ltc_2.value=Ae.state.rectAreaLTC2,st.pointLights.value=Ae.state.point,st.pointLightShadows.value=Ae.state.pointShadow,st.hemisphereLights.value=Ae.state.hemi,st.directionalShadowMap.value=Ae.state.directionalShadowMap,st.directionalShadowMatrix.value=Ae.state.directionalShadowMatrix,st.spotShadowMap.value=Ae.state.spotShadowMap,st.spotLightMatrix.value=Ae.state.spotLightMatrix,st.spotLightMap.value=Ae.state.spotLightMap,st.pointShadowMap.value=Ae.state.pointShadowMap,st.pointShadowMatrix.value=Ae.state.pointShadowMatrix);const St=rt.getUniforms(),rn=Rc.seqWithValue(St.seq,st);return ce.currentProgram=rt,ce.uniformsList=rn,rt}function Ji(U,fe){const Se=te.get(U);Se.outputEncoding=fe.outputEncoding,Se.instancing=fe.instancing,Se.skinning=fe.skinning,Se.morphTargets=fe.morphTargets,Se.morphNormals=fe.morphNormals,Se.morphColors=fe.morphColors,Se.morphTargetsCount=fe.morphTargetsCount,Se.numClippingPlanes=fe.numClippingPlanes,Se.numIntersection=fe.numClipIntersection,Se.vertexAlphas=fe.vertexAlphas,Se.vertexTangents=fe.vertexTangents,Se.toneMapping=fe.toneMapping}function xr(U,fe,Se,ce,Ae){fe.isScene!==!0&&(fe=be),se.resetTextureUnits();const Qe=fe.fog,nt=ce.isMeshStandardMaterial?fe.environment:null,lt=E===null?x.outputEncoding:E.isXRRenderTarget===!0?E.texture.encoding:Is,ct=(ce.isMeshStandardMaterial?_e:me).get(ce.envMap||nt),ut=ce.vertexColors===!0&&!!Se.attributes.color&&Se.attributes.color.itemSize===4,rt=!!ce.normalMap&&!!Se.attributes.tangent,st=!!Se.morphAttributes.position,St=!!Se.morphAttributes.normal,rn=!!Se.morphAttributes.color,Yt=ce.toneMapped?x.toneMapping:vi,Pn=Se.morphAttributes.position||Se.morphAttributes.normal||Se.morphAttributes.color,Ft=Pn!==void 0?Pn.length:0,ht=te.get(ce),cr=m.state.lights;if(K===!0&&(Ee===!0||U!==y)){const Bn=U===y&&ce.id===P;B.setState(ce,U,Bn)}let jt=!1;ce.version===ht.__version?(ht.needsLights&&ht.lightsStateVersion!==cr.state.version||ht.outputEncoding!==lt||Ae.isInstancedMesh&&ht.instancing===!1||!Ae.isInstancedMesh&&ht.instancing===!0||Ae.isSkinnedMesh&&ht.skinning===!1||!Ae.isSkinnedMesh&&ht.skinning===!0||ht.envMap!==ct||ce.fog===!0&&ht.fog!==Qe||ht.numClippingPlanes!==void 0&&(ht.numClippingPlanes!==B.numPlanes||ht.numIntersection!==B.numIntersection)||ht.vertexAlphas!==ut||ht.vertexTangents!==rt||ht.morphTargets!==st||ht.morphNormals!==St||ht.morphColors!==rn||ht.toneMapping!==Yt||he.isWebGL2===!0&&ht.morphTargetsCount!==Ft)&&(jt=!0):(jt=!0,ht.__version=ce.version);let Tn=ht.currentProgram;jt===!0&&(Tn=Nt(ce,fe,Ae));let Hs=!1,jr=!1,Zr=!1;const tn=Tn.getUniforms(),On=ht.uniforms;if(le.useProgram(Tn.program)&&(Hs=!0,jr=!0,Zr=!0),ce.id!==P&&(P=ce.id,jr=!0),Hs||y!==U){if(tn.setValue(ve,"projectionMatrix",U.projectionMatrix),he.logarithmicDepthBuffer&&tn.setValue(ve,"logDepthBufFC",2/(Math.log(U.far+1)/Math.LN2)),y!==U&&(y=U,jr=!0,Zr=!0),ce.isShaderMaterial||ce.isMeshPhongMaterial||ce.isMeshToonMaterial||ce.isMeshStandardMaterial||ce.envMap){const Bn=tn.map.cameraPosition;Bn!==void 0&&Bn.setValue(ve,xe.setFromMatrixPosition(U.matrixWorld))}(ce.isMeshPhongMaterial||ce.isMeshToonMaterial||ce.isMeshLambertMaterial||ce.isMeshBasicMaterial||ce.isMeshStandardMaterial||ce.isShaderMaterial)&&tn.setValue(ve,"isOrthographic",U.isOrthographicCamera===!0),(ce.isMeshPhongMaterial||ce.isMeshToonMaterial||ce.isMeshLambertMaterial||ce.isMeshBasicMaterial||ce.isMeshStandardMaterial||ce.isShaderMaterial||ce.isShadowMaterial||Ae.isSkinnedMesh)&&tn.setValue(ve,"viewMatrix",U.matrixWorldInverse)}if(Ae.isSkinnedMesh){tn.setOptional(ve,Ae,"bindMatrix"),tn.setOptional(ve,Ae,"bindMatrixInverse");const Bn=Ae.skeleton;Bn&&(he.floatVertexTextures?(Bn.boneTexture===null&&Bn.computeBoneTexture(),tn.setValue(ve,"boneTexture",Bn.boneTexture,se),tn.setValue(ve,"boneTextureSize",Bn.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Ws=Se.morphAttributes;if((Ws.position!==void 0||Ws.normal!==void 0||Ws.color!==void 0&&he.isWebGL2===!0)&&Re.update(Ae,Se,ce,Tn),(jr||ht.receiveShadow!==Ae.receiveShadow)&&(ht.receiveShadow=Ae.receiveShadow,tn.setValue(ve,"receiveShadow",Ae.receiveShadow)),ce.isMeshGouraudMaterial&&ce.envMap!==null&&(On.envMap.value=ct,On.flipEnvMap.value=ct.isCubeTexture&&ct.isRenderTargetTexture===!1?-1:1),jr&&(tn.setValue(ve,"toneMappingExposure",x.toneMappingExposure),ht.needsLights&&wi(On,Zr),Qe&&ce.fog===!0&&tt.refreshFogUniforms(On,Qe),tt.refreshMaterialUniforms(On,ce,z,O,Pe),Rc.upload(ve,ht.uniformsList,On,se)),ce.isShaderMaterial&&ce.uniformsNeedUpdate===!0&&(Rc.upload(ve,ht.uniformsList,On,se),ce.uniformsNeedUpdate=!1),ce.isSpriteMaterial&&tn.setValue(ve,"center",Ae.center),tn.setValue(ve,"modelViewMatrix",Ae.modelViewMatrix),tn.setValue(ve,"normalMatrix",Ae.normalMatrix),tn.setValue(ve,"modelMatrix",Ae.matrixWorld),ce.isShaderMaterial||ce.isRawShaderMaterial){const Bn=ce.uniformsGroups;for(let Kr=0,Wu=Bn.length;Kr<Wu;Kr++)if(he.isWebGL2){const la=Bn[Kr];$.update(la,Tn),$.bind(la,Tn)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Tn}function wi(U,fe){U.ambientLightColor.needsUpdate=fe,U.lightProbe.needsUpdate=fe,U.directionalLights.needsUpdate=fe,U.directionalLightShadows.needsUpdate=fe,U.pointLights.needsUpdate=fe,U.pointLightShadows.needsUpdate=fe,U.spotLights.needsUpdate=fe,U.spotLightShadows.needsUpdate=fe,U.rectAreaLights.needsUpdate=fe,U.hemisphereLights.needsUpdate=fe}function Qn(U){return U.isMeshLambertMaterial||U.isMeshToonMaterial||U.isMeshPhongMaterial||U.isMeshStandardMaterial||U.isShadowMaterial||U.isShaderMaterial&&U.lights===!0}this.getActiveCubeFace=function(){return A},this.getActiveMipmapLevel=function(){return T},this.getRenderTarget=function(){return E},this.setRenderTargetTextures=function(U,fe,Se){te.get(U.texture).__webglTexture=fe,te.get(U.depthTexture).__webglTexture=Se;const ce=te.get(U);ce.__hasExternalTextures=!0,ce.__hasExternalTextures&&(ce.__autoAllocateDepthBuffer=Se===void 0,ce.__autoAllocateDepthBuffer||pe.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ce.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(U,fe){const Se=te.get(U);Se.__webglFramebuffer=fe,Se.__useDefaultFramebuffer=fe===void 0},this.setRenderTarget=function(U,fe=0,Se=0){E=U,A=fe,T=Se;let ce=!0,Ae=null,Qe=!1,nt=!1;if(U){const ct=te.get(U);ct.__useDefaultFramebuffer!==void 0?(le.bindFramebuffer(36160,null),ce=!1):ct.__webglFramebuffer===void 0?se.setupRenderTarget(U):ct.__hasExternalTextures&&se.rebindTextures(U,te.get(U.texture).__webglTexture,te.get(U.depthTexture).__webglTexture);const ut=U.texture;(ut.isData3DTexture||ut.isDataArrayTexture||ut.isCompressedArrayTexture)&&(nt=!0);const rt=te.get(U).__webglFramebuffer;U.isWebGLCubeRenderTarget?(Ae=rt[fe],Qe=!0):he.isWebGL2&&U.samples>0&&se.useMultisampledRTT(U)===!1?Ae=te.get(U).__webglMultisampledFramebuffer:Ae=rt,k.copy(U.viewport),F.copy(U.scissor),M=U.scissorTest}else k.copy(V).multiplyScalar(z).floor(),F.copy(q).multiplyScalar(z).floor(),M=j;if(le.bindFramebuffer(36160,Ae)&&he.drawBuffers&&ce&&le.drawBuffers(U,Ae),le.viewport(k),le.scissor(F),le.setScissorTest(M),Qe){const ct=te.get(U.texture);ve.framebufferTexture2D(36160,36064,34069+fe,ct.__webglTexture,Se)}else if(nt){const ct=te.get(U.texture),ut=fe||0;ve.framebufferTextureLayer(36160,36064,ct.__webglTexture,Se||0,ut)}P=-1},this.readRenderTargetPixels=function(U,fe,Se,ce,Ae,Qe,nt){if(!(U&&U.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let lt=te.get(U).__webglFramebuffer;if(U.isWebGLCubeRenderTarget&&nt!==void 0&&(lt=lt[nt]),lt){le.bindFramebuffer(36160,lt);try{const ct=U.texture,ut=ct.format,rt=ct.type;if(ut!==Er&&b.convert(ut)!==ve.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const st=rt===il&&(pe.has("EXT_color_buffer_half_float")||he.isWebGL2&&pe.has("EXT_color_buffer_float"));if(rt!==Ls&&b.convert(rt)!==ve.getParameter(35738)&&!(rt===vs&&(he.isWebGL2||pe.has("OES_texture_float")||pe.has("WEBGL_color_buffer_float")))&&!st){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}fe>=0&&fe<=U.width-ce&&Se>=0&&Se<=U.height-Ae&&ve.readPixels(fe,Se,ce,Ae,b.convert(ut),b.convert(rt),Qe)}finally{const ct=E!==null?te.get(E).__webglFramebuffer:null;le.bindFramebuffer(36160,ct)}}},this.copyFramebufferToTexture=function(U,fe,Se=0){const ce=Math.pow(2,-Se),Ae=Math.floor(fe.image.width*ce),Qe=Math.floor(fe.image.height*ce);se.setTexture2D(fe,0),ve.copyTexSubImage2D(3553,Se,0,0,U.x,U.y,Ae,Qe),le.unbindTexture()},this.copyTextureToTexture=function(U,fe,Se,ce=0){const Ae=fe.image.width,Qe=fe.image.height,nt=b.convert(Se.format),lt=b.convert(Se.type);se.setTexture2D(Se,0),ve.pixelStorei(37440,Se.flipY),ve.pixelStorei(37441,Se.premultiplyAlpha),ve.pixelStorei(3317,Se.unpackAlignment),fe.isDataTexture?ve.texSubImage2D(3553,ce,U.x,U.y,Ae,Qe,nt,lt,fe.image.data):fe.isCompressedTexture?ve.compressedTexSubImage2D(3553,ce,U.x,U.y,fe.mipmaps[0].width,fe.mipmaps[0].height,nt,fe.mipmaps[0].data):ve.texSubImage2D(3553,ce,U.x,U.y,nt,lt,fe.image),ce===0&&Se.generateMipmaps&&ve.generateMipmap(3553),le.unbindTexture()},this.copyTextureToTexture3D=function(U,fe,Se,ce,Ae=0){if(x.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Qe=U.max.x-U.min.x+1,nt=U.max.y-U.min.y+1,lt=U.max.z-U.min.z+1,ct=b.convert(ce.format),ut=b.convert(ce.type);let rt;if(ce.isData3DTexture)se.setTexture3D(ce,0),rt=32879;else if(ce.isDataArrayTexture)se.setTexture2DArray(ce,0),rt=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}ve.pixelStorei(37440,ce.flipY),ve.pixelStorei(37441,ce.premultiplyAlpha),ve.pixelStorei(3317,ce.unpackAlignment);const st=ve.getParameter(3314),St=ve.getParameter(32878),rn=ve.getParameter(3316),Yt=ve.getParameter(3315),Pn=ve.getParameter(32877),Ft=Se.isCompressedTexture?Se.mipmaps[0]:Se.image;ve.pixelStorei(3314,Ft.width),ve.pixelStorei(32878,Ft.height),ve.pixelStorei(3316,U.min.x),ve.pixelStorei(3315,U.min.y),ve.pixelStorei(32877,U.min.z),Se.isDataTexture||Se.isData3DTexture?ve.texSubImage3D(rt,Ae,fe.x,fe.y,fe.z,Qe,nt,lt,ct,ut,Ft.data):Se.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ve.compressedTexSubImage3D(rt,Ae,fe.x,fe.y,fe.z,Qe,nt,lt,ct,Ft.data)):ve.texSubImage3D(rt,Ae,fe.x,fe.y,fe.z,Qe,nt,lt,ct,ut,Ft),ve.pixelStorei(3314,st),ve.pixelStorei(32878,St),ve.pixelStorei(3316,rn),ve.pixelStorei(3315,Yt),ve.pixelStorei(32877,Pn),Ae===0&&ce.generateMipmaps&&ve.generateMipmap(rt),le.unbindTexture()},this.initTexture=function(U){U.isCubeTexture?se.setTextureCube(U,0):U.isData3DTexture?se.setTexture3D(U,0):U.isDataArrayTexture||U.isCompressedArrayTexture?se.setTexture2DArray(U,0):se.setTexture2D(U,0),le.unbindTexture()},this.resetState=function(){A=0,T=0,E=null,le.reset(),I.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class Y5 extends Qb{}Y5.prototype.isWebGL1Renderer=!0;class j5 extends Rn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class Uf extends Ns{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Dt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const jm=new Y,Zm=new Y,Km=new en,Z0=new kf,rc=new pu;class Z5 extends Rn{constructor(e=new Zn,t=new Uf){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let i=1,s=t.count;i<s;i++)jm.fromBufferAttribute(t,i-1),Zm.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=jm.distanceTo(Zm);e.setAttribute("lineDistance",new lr(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),rc.copy(n.boundingSphere),rc.applyMatrix4(i),rc.radius+=s,e.ray.intersectsSphere(rc)===!1)return;Km.copy(i).invert(),Z0.copy(e.ray).applyMatrix4(Km);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,u=new Y,f=new Y,d=new Y,m=new Y,v=this.isLineSegments?2:1,S=n.index,w=n.attributes.position;if(S!==null){const A=Math.max(0,o.start),T=Math.min(S.count,o.start+o.count);for(let E=A,P=T-1;E<P;E+=v){const y=S.getX(E),k=S.getX(E+1);if(u.fromBufferAttribute(w,y),f.fromBufferAttribute(w,k),Z0.distanceSqToSegment(u,f,m,d)>c)continue;m.applyMatrix4(this.matrixWorld);const M=e.ray.origin.distanceTo(m);M<e.near||M>e.far||t.push({distance:M,point:d.clone().applyMatrix4(this.matrixWorld),index:E,face:null,faceIndex:null,object:this})}}else{const A=Math.max(0,o.start),T=Math.min(w.count,o.start+o.count);for(let E=A,P=T-1;E<P;E+=v){if(u.fromBufferAttribute(w,E),f.fromBufferAttribute(w,E+1),Z0.distanceSqToSegment(u,f,m,d)>c)continue;m.applyMatrix4(this.matrixWorld);const k=e.ray.origin.distanceTo(m);k<e.near||k>e.far||t.push({distance:k,point:d.clone().applyMatrix4(this.matrixWorld),index:E,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const Jm=new Y,Qm=new Y;class ex extends Z5{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let i=0,s=t.count;i<s;i+=2)Jm.fromBufferAttribute(t,i),Qm.fromBufferAttribute(t,i+1),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+Jm.distanceTo(Qm);e.setAttribute("lineDistance",new lr(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Yr{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),s+=n.distanceTo(i),t.push(s),i=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let i=0;const s=n.length;let o;t?o=t:o=e*n[s-1];let a=0,c=s-1,u;for(;a<=c;)if(i=Math.floor(a+(c-a)/2),u=n[i]-o,u<0)a=i+1;else if(u>0)c=i-1;else{c=i;break}if(i=c,n[i]===o)return i/(s-1);const f=n[i],m=n[i+1]-f,v=(o-f)/m;return(i+v)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),c=t||(o.isVector2?new Ne:new Y);return c.copy(a).sub(o).normalize(),c}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new Y,i=[],s=[],o=[],a=new Y,c=new en;for(let v=0;v<=e;v++){const S=v/e;i[v]=this.getTangentAt(S,new Y)}s[0]=new Y,o[0]=new Y;let u=Number.MAX_VALUE;const f=Math.abs(i[0].x),d=Math.abs(i[0].y),m=Math.abs(i[0].z);f<=u&&(u=f,n.set(1,0,0)),d<=u&&(u=d,n.set(0,1,0)),m<=u&&n.set(0,0,1),a.crossVectors(i[0],n).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let v=1;v<=e;v++){if(s[v]=s[v-1].clone(),o[v]=o[v-1].clone(),a.crossVectors(i[v-1],i[v]),a.length()>Number.EPSILON){a.normalize();const S=Math.acos(In(i[v-1].dot(i[v]),-1,1));s[v].applyMatrix4(c.makeRotationAxis(a,S))}o[v].crossVectors(i[v],s[v])}if(t===!0){let v=Math.acos(In(s[0].dot(s[e]),-1,1));v/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(v=-v);for(let S=1;S<=e;S++)s[S].applyMatrix4(c.makeRotationAxis(i[S],v*S)),o[S].crossVectors(i[S],s[S])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Vf extends Yr{constructor(e=0,t=0,n=1,i=1,s=0,o=Math.PI*2,a=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=c}getPoint(e,t){const n=t||new Ne,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let c=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const f=Math.cos(this.aRotation),d=Math.sin(this.aRotation),m=c-this.aX,v=u-this.aY;c=m*f-v*d+this.aX,u=m*d+v*f+this.aY}return n.set(c,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class K5 extends Vf{constructor(e,t,n,i,s,o){super(e,t,n,n,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function zf(){let r=0,e=0,t=0,n=0;function i(s,o,a,c){r=s,e=a,t=-3*s+3*o-2*a-c,n=2*s-2*o+a+c}return{initCatmullRom:function(s,o,a,c,u){i(o,a,u*(a-s),u*(c-o))},initNonuniformCatmullRom:function(s,o,a,c,u,f,d){let m=(o-s)/u-(a-s)/(u+f)+(a-o)/f,v=(a-o)/f-(c-o)/(f+d)+(c-a)/d;m*=f,v*=f,i(o,a,m,v)},calc:function(s){const o=s*s,a=o*s;return r+e*s+t*o+n*a}}}const ic=new Y,K0=new zf,J0=new zf,Q0=new zf;class J5 extends Yr{constructor(e=[],t=!1,n="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=i}getPoint(e,t=new Y){const n=t,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),c=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:c===0&&a===s-1&&(a=s-2,c=1);let u,f;this.closed||a>0?u=i[(a-1)%s]:(ic.subVectors(i[0],i[1]).add(i[0]),u=ic);const d=i[a%s],m=i[(a+1)%s];if(this.closed||a+2<s?f=i[(a+2)%s]:(ic.subVectors(i[s-1],i[s-2]).add(i[s-1]),f=ic),this.curveType==="centripetal"||this.curveType==="chordal"){const v=this.curveType==="chordal"?.5:.25;let S=Math.pow(u.distanceToSquared(d),v),x=Math.pow(d.distanceToSquared(m),v),w=Math.pow(m.distanceToSquared(f),v);x<1e-4&&(x=1),S<1e-4&&(S=x),w<1e-4&&(w=x),K0.initNonuniformCatmullRom(u.x,d.x,m.x,f.x,S,x,w),J0.initNonuniformCatmullRom(u.y,d.y,m.y,f.y,S,x,w),Q0.initNonuniformCatmullRom(u.z,d.z,m.z,f.z,S,x,w)}else this.curveType==="catmullrom"&&(K0.initCatmullRom(u.x,d.x,m.x,f.x,this.tension),J0.initCatmullRom(u.y,d.y,m.y,f.y,this.tension),Q0.initCatmullRom(u.z,d.z,m.z,f.z,this.tension));return n.set(K0.calc(c),J0.calc(c),Q0.calc(c)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new Y().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function eg(r,e,t,n,i){const s=(n-e)*.5,o=(i-t)*.5,a=r*r,c=r*a;return(2*t-2*n+s+o)*c+(-3*t+3*n-2*s-o)*a+s*r+t}function Q5(r,e){const t=1-r;return t*t*e}function eA(r,e){return 2*(1-r)*r*e}function tA(r,e){return r*r*e}function ja(r,e,t,n){return Q5(r,e)+eA(r,t)+tA(r,n)}function nA(r,e){const t=1-r;return t*t*t*e}function rA(r,e){const t=1-r;return 3*t*t*r*e}function iA(r,e){return 3*(1-r)*r*r*e}function sA(r,e){return r*r*r*e}function Za(r,e,t,n,i){return nA(r,e)+rA(r,t)+iA(r,n)+sA(r,i)}class tx extends Yr{constructor(e=new Ne,t=new Ne,n=new Ne,i=new Ne){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new Ne){const n=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return n.set(Za(e,i.x,s.x,o.x,a.x),Za(e,i.y,s.y,o.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class oA extends Yr{constructor(e=new Y,t=new Y,n=new Y,i=new Y){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new Y){const n=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return n.set(Za(e,i.x,s.x,o.x,a.x),Za(e,i.y,s.y,o.y,a.y),Za(e,i.z,s.z,o.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class $f extends Yr{constructor(e=new Ne,t=new Ne){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ne){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const n=t||new Ne;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class aA extends Yr{constructor(e=new Y,t=new Y){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new Y){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class nx extends Yr{constructor(e=new Ne,t=new Ne,n=new Ne){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Ne){const n=t,i=this.v0,s=this.v1,o=this.v2;return n.set(ja(e,i.x,s.x,o.x),ja(e,i.y,s.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class lA extends Yr{constructor(e=new Y,t=new Y,n=new Y){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Y){const n=t,i=this.v0,s=this.v1,o=this.v2;return n.set(ja(e,i.x,s.x,o.x),ja(e,i.y,s.y,o.y),ja(e,i.z,s.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class rx extends Yr{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ne){const n=t,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,c=i[o===0?o:o-1],u=i[o],f=i[o>i.length-2?i.length-1:o+1],d=i[o>i.length-3?i.length-1:o+2];return n.set(eg(a,c.x,u.x,f.x,d.x),eg(a,c.y,u.y,f.y,d.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new Ne().fromArray(i))}return this}}var ix=Object.freeze({__proto__:null,ArcCurve:K5,CatmullRomCurve3:J5,CubicBezierCurve:tx,CubicBezierCurve3:oA,EllipseCurve:Vf,LineCurve:$f,LineCurve3:aA,QuadraticBezierCurve:nx,QuadraticBezierCurve3:lA,SplineCurve:rx});class cA extends Yr{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new $f(t,e))}getPoint(e,t){const n=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=n){const o=i[s]-n,a=this.curves[s],c=a.getLength(),u=c===0?0:1-o/c;return a.getPointAt(u,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,c=o.getPoints(a);for(let u=0;u<c.length;u++){const f=c[u];n&&n.equals(f)||(t.push(f),n=f)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(new ix[i.type]().fromJSON(i))}return this}}class ol extends cA{constructor(e){super(),this.type="Path",this.currentPoint=new Ne,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new $f(this.currentPoint.clone(),new Ne(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,i){const s=new nx(this.currentPoint.clone(),new Ne(e,t),new Ne(n,i));return this.curves.push(s),this.currentPoint.set(n,i),this}bezierCurveTo(e,t,n,i,s,o){const a=new tx(this.currentPoint.clone(),new Ne(e,t),new Ne(n,i),new Ne(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new rx(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,i,s,o){const a=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+a,t+c,n,i,s,o),this}absarc(e,t,n,i,s,o){return this.absellipse(e,t,n,n,i,s,o),this}ellipse(e,t,n,i,s,o,a,c){const u=this.currentPoint.x,f=this.currentPoint.y;return this.absellipse(e+u,t+f,n,i,s,o,a,c),this}absellipse(e,t,n,i,s,o,a,c){const u=new Vf(e,t,n,i,s,o,a,c);if(this.curves.length>0){const d=u.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(u);const f=u.getPoint(1);return this.currentPoint.copy(f),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class sx extends ol{constructor(e){super(e),this.uuid=Jo(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(new ol().fromJSON(i))}return this}}const uA={triangulate:function(r,e,t=2){const n=e&&e.length,i=n?e[0]*t:r.length;let s=ox(r,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,c,u,f,d,m,v;if(n&&(s=mA(r,e,s,t)),r.length>80*t){a=u=r[0],c=f=r[1];for(let S=t;S<i;S+=t)d=r[S],m=r[S+1],d<a&&(a=d),m<c&&(c=m),d>u&&(u=d),m>f&&(f=m);v=Math.max(u-a,f-c),v=v!==0?32767/v:0}return al(s,o,t,a,c,v,0),o}};function ox(r,e,t,n,i){let s,o;if(i===EA(r,e,t,n)>0)for(s=e;s<t;s+=n)o=tg(s,r[s],r[s+1],o);else for(s=t-n;s>=e;s-=n)o=tg(s,r[s],r[s+1],o);return o&&gu(o,o.next)&&(cl(o),o=o.next),o}function Fs(r,e){if(!r)return r;e||(e=r);let t=r,n;do if(n=!1,!t.steiner&&(gu(t,t.next)||Qt(t.prev,t,t.next)===0)){if(cl(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function al(r,e,t,n,i,s,o){if(!r)return;!o&&s&&wA(r,n,i,s);let a=r,c,u;for(;r.prev!==r.next;){if(c=r.prev,u=r.next,s?fA(r,n,i,s):hA(r)){e.push(c.i/t|0),e.push(r.i/t|0),e.push(u.i/t|0),cl(r),r=u.next,a=u.next;continue}if(r=u,r===a){o?o===1?(r=dA(Fs(r),e,t),al(r,e,t,n,i,s,2)):o===2&&pA(r,e,t,n,i,s):al(Fs(r),e,t,n,i,s,1);break}}}function hA(r){const e=r.prev,t=r,n=r.next;if(Qt(e,t,n)>=0)return!1;const i=e.x,s=t.x,o=n.x,a=e.y,c=t.y,u=n.y,f=i<s?i<o?i:o:s<o?s:o,d=a<c?a<u?a:u:c<u?c:u,m=i>s?i>o?i:o:s>o?s:o,v=a>c?a>u?a:u:c>u?c:u;let S=n.next;for(;S!==e;){if(S.x>=f&&S.x<=m&&S.y>=d&&S.y<=v&&Ro(i,a,s,c,o,u,S.x,S.y)&&Qt(S.prev,S,S.next)>=0)return!1;S=S.next}return!0}function fA(r,e,t,n){const i=r.prev,s=r,o=r.next;if(Qt(i,s,o)>=0)return!1;const a=i.x,c=s.x,u=o.x,f=i.y,d=s.y,m=o.y,v=a<c?a<u?a:u:c<u?c:u,S=f<d?f<m?f:m:d<m?d:m,x=a>c?a>u?a:u:c>u?c:u,w=f>d?f>m?f:m:d>m?d:m,A=rf(v,S,e,t,n),T=rf(x,w,e,t,n);let E=r.prevZ,P=r.nextZ;for(;E&&E.z>=A&&P&&P.z<=T;){if(E.x>=v&&E.x<=x&&E.y>=S&&E.y<=w&&E!==i&&E!==o&&Ro(a,f,c,d,u,m,E.x,E.y)&&Qt(E.prev,E,E.next)>=0||(E=E.prevZ,P.x>=v&&P.x<=x&&P.y>=S&&P.y<=w&&P!==i&&P!==o&&Ro(a,f,c,d,u,m,P.x,P.y)&&Qt(P.prev,P,P.next)>=0))return!1;P=P.nextZ}for(;E&&E.z>=A;){if(E.x>=v&&E.x<=x&&E.y>=S&&E.y<=w&&E!==i&&E!==o&&Ro(a,f,c,d,u,m,E.x,E.y)&&Qt(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;P&&P.z<=T;){if(P.x>=v&&P.x<=x&&P.y>=S&&P.y<=w&&P!==i&&P!==o&&Ro(a,f,c,d,u,m,P.x,P.y)&&Qt(P.prev,P,P.next)>=0)return!1;P=P.nextZ}return!0}function dA(r,e,t){let n=r;do{const i=n.prev,s=n.next.next;!gu(i,s)&&ax(i,n,n.next,s)&&ll(i,s)&&ll(s,i)&&(e.push(i.i/t|0),e.push(n.i/t|0),e.push(s.i/t|0),cl(n),cl(n.next),n=r=s),n=n.next}while(n!==r);return Fs(n)}function pA(r,e,t,n,i,s){let o=r;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&SA(o,a)){let c=lx(o,a);o=Fs(o,o.next),c=Fs(c,c.next),al(o,e,t,n,i,s,0),al(c,e,t,n,i,s,0);return}a=a.next}o=o.next}while(o!==r)}function mA(r,e,t,n){const i=[];let s,o,a,c,u;for(s=0,o=e.length;s<o;s++)a=e[s]*n,c=s<o-1?e[s+1]*n:r.length,u=ox(r,a,c,n,!1),u===u.next&&(u.steiner=!0),i.push(_A(u));for(i.sort(gA),s=0;s<i.length;s++)t=vA(i[s],t);return t}function gA(r,e){return r.x-e.x}function vA(r,e){const t=bA(r,e);if(!t)return e;const n=lx(t,r);return Fs(n,n.next),Fs(t,t.next)}function bA(r,e){let t=e,n=-1/0,i;const s=r.x,o=r.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const m=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(m<=s&&m>n&&(n=m,i=t.x<t.next.x?t:t.next,m===s))return i}t=t.next}while(t!==e);if(!i)return null;const a=i,c=i.x,u=i.y;let f=1/0,d;t=i;do s>=t.x&&t.x>=c&&s!==t.x&&Ro(o<u?s:n,o,c,u,o<u?n:s,o,t.x,t.y)&&(d=Math.abs(o-t.y)/(s-t.x),ll(t,r)&&(d<f||d===f&&(t.x>i.x||t.x===i.x&&xA(i,t)))&&(i=t,f=d)),t=t.next;while(t!==a);return i}function xA(r,e){return Qt(r.prev,r,e.prev)<0&&Qt(e.next,r,r.next)<0}function wA(r,e,t,n){let i=r;do i.z===0&&(i.z=rf(i.x,i.y,e,t,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==r);i.prevZ.nextZ=null,i.prevZ=null,yA(i)}function yA(r){let e,t,n,i,s,o,a,c,u=1;do{for(t=r,r=null,s=null,o=0;t;){for(o++,n=t,a=0,e=0;e<u&&(a++,n=n.nextZ,!!n);e++);for(c=u;a>0||c>0&&n;)a!==0&&(c===0||!n||t.z<=n.z)?(i=t,t=t.nextZ,a--):(i=n,n=n.nextZ,c--),s?s.nextZ=i:r=i,i.prevZ=s,s=i;t=n}s.nextZ=null,u*=2}while(o>1);return r}function rf(r,e,t,n,i){return r=(r-t)*i|0,e=(e-n)*i|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function _A(r){let e=r,t=r;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==r);return t}function Ro(r,e,t,n,i,s,o,a){return(i-o)*(e-a)>=(r-o)*(s-a)&&(r-o)*(n-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(i-o)*(n-a)}function SA(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!CA(r,e)&&(ll(r,e)&&ll(e,r)&&MA(r,e)&&(Qt(r.prev,r,e.prev)||Qt(r,e.prev,e))||gu(r,e)&&Qt(r.prev,r,r.next)>0&&Qt(e.prev,e,e.next)>0)}function Qt(r,e,t){return(e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y)}function gu(r,e){return r.x===e.x&&r.y===e.y}function ax(r,e,t,n){const i=oc(Qt(r,e,t)),s=oc(Qt(r,e,n)),o=oc(Qt(t,n,r)),a=oc(Qt(t,n,e));return!!(i!==s&&o!==a||i===0&&sc(r,t,e)||s===0&&sc(r,n,e)||o===0&&sc(t,r,n)||a===0&&sc(t,e,n))}function sc(r,e,t){return e.x<=Math.max(r.x,t.x)&&e.x>=Math.min(r.x,t.x)&&e.y<=Math.max(r.y,t.y)&&e.y>=Math.min(r.y,t.y)}function oc(r){return r>0?1:r<0?-1:0}function CA(r,e){let t=r;do{if(t.i!==r.i&&t.next.i!==r.i&&t.i!==e.i&&t.next.i!==e.i&&ax(t,t.next,r,e))return!0;t=t.next}while(t!==r);return!1}function ll(r,e){return Qt(r.prev,r,r.next)<0?Qt(r,e,r.next)>=0&&Qt(r,r.prev,e)>=0:Qt(r,e,r.prev)<0||Qt(r,r.next,e)<0}function MA(r,e){let t=r,n=!1;const i=(r.x+e.x)/2,s=(r.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==r);return n}function lx(r,e){const t=new sf(r.i,r.x,r.y),n=new sf(e.i,e.x,e.y),i=r.next,s=e.prev;return r.next=e,e.prev=r,t.next=i,i.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function tg(r,e,t,n){const i=new sf(r,e,t);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function cl(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function sf(r,e,t){this.i=r,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function EA(r,e,t,n){let i=0;for(let s=e,o=t-n;s<t;s+=n)i+=(r[o]-r[s])*(r[s+1]+r[o+1]),o=s;return i}class No{static area(e){const t=e.length;let n=0;for(let i=t-1,s=0;s<t;i=s++)n+=e[i].x*e[s].y-e[s].x*e[i].y;return n*.5}static isClockWise(e){return No.area(e)<0}static triangulateShape(e,t){const n=[],i=[],s=[];ng(e),rg(n,e);let o=e.length;t.forEach(ng);for(let c=0;c<t.length;c++)i.push(o),o+=t[c].length,rg(n,t[c]);const a=uA.triangulate(n,i);for(let c=0;c<a.length;c+=3)s.push(a.slice(c,c+3));return s}}function ng(r){const e=r.length;e>2&&r[e-1].equals(r[0])&&r.pop()}function rg(r,e){for(let t=0;t<e.length;t++)r.push(e[t].x),r.push(e[t].y)}class Gf extends Zn{constructor(e=new sx([new Ne(.5,.5),new Ne(-.5,.5),new Ne(-.5,-.5),new Ne(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,i=[],s=[];for(let a=0,c=e.length;a<c;a++){const u=e[a];o(u)}this.setAttribute("position",new lr(i,3)),this.setAttribute("uv",new lr(s,2)),this.computeVertexNormals();function o(a){const c=[],u=t.curveSegments!==void 0?t.curveSegments:12,f=t.steps!==void 0?t.steps:1,d=t.depth!==void 0?t.depth:1;let m=t.bevelEnabled!==void 0?t.bevelEnabled:!0,v=t.bevelThickness!==void 0?t.bevelThickness:.2,S=t.bevelSize!==void 0?t.bevelSize:v-.1,x=t.bevelOffset!==void 0?t.bevelOffset:0,w=t.bevelSegments!==void 0?t.bevelSegments:3;const A=t.extrudePath,T=t.UVGenerator!==void 0?t.UVGenerator:AA;let E,P=!1,y,k,F,M;A&&(E=A.getSpacedPoints(f),P=!0,m=!1,y=A.computeFrenetFrames(f,!1),k=new Y,F=new Y,M=new Y),m||(w=0,v=0,S=0,x=0);const R=a.extractPoints(u);let O=R.shape;const z=R.holes;if(!No.isClockWise(O)){O=O.reverse();for(let te=0,se=z.length;te<se;te++){const me=z[te];No.isClockWise(me)&&(z[te]=me.reverse())}}const G=No.triangulateShape(O,z),V=O;for(let te=0,se=z.length;te<se;te++){const me=z[te];O=O.concat(me)}function q(te,se,me){return se||console.error("THREE.ExtrudeGeometry: vec does not exist"),se.clone().multiplyScalar(me).add(te)}const j=O.length,ge=G.length;function K(te,se,me){let _e,we,Ie;const Ce=te.x-se.x,Oe=te.y-se.y,tt=me.x-te.x,Ze=me.y-te.y,N=Ce*Ce+Oe*Oe,B=Ce*Ze-Oe*tt;if(Math.abs(B)>Number.EPSILON){const oe=Math.sqrt(N),Me=Math.sqrt(tt*tt+Ze*Ze),Re=se.x-Oe/oe,L=se.y+Ce/oe,_=me.x-Ze/Me,b=me.y+tt/Me,I=((_-Re)*Ze-(b-L)*tt)/(Ce*Ze-Oe*tt);_e=Re+Ce*I-te.x,we=L+Oe*I-te.y;const $=_e*_e+we*we;if($<=2)return new Ne(_e,we);Ie=Math.sqrt($/2)}else{let oe=!1;Ce>Number.EPSILON?tt>Number.EPSILON&&(oe=!0):Ce<-Number.EPSILON?tt<-Number.EPSILON&&(oe=!0):Math.sign(Oe)===Math.sign(Ze)&&(oe=!0),oe?(_e=-Oe,we=Ce,Ie=Math.sqrt(N)):(_e=Ce,we=Oe,Ie=Math.sqrt(N/2))}return new Ne(_e/Ie,we/Ie)}const Ee=[];for(let te=0,se=V.length,me=se-1,_e=te+1;te<se;te++,me++,_e++)me===se&&(me=0),_e===se&&(_e=0),Ee[te]=K(V[te],V[me],V[_e]);const Pe=[];let re,ae=Ee.concat();for(let te=0,se=z.length;te<se;te++){const me=z[te];re=[];for(let _e=0,we=me.length,Ie=we-1,Ce=_e+1;_e<we;_e++,Ie++,Ce++)Ie===we&&(Ie=0),Ce===we&&(Ce=0),re[_e]=K(me[_e],me[Ie],me[Ce]);Pe.push(re),ae=ae.concat(re)}for(let te=0;te<w;te++){const se=te/w,me=v*Math.cos(se*Math.PI/2),_e=S*Math.sin(se*Math.PI/2)+x;for(let we=0,Ie=V.length;we<Ie;we++){const Ce=q(V[we],Ee[we],_e);Je(Ce.x,Ce.y,-me)}for(let we=0,Ie=z.length;we<Ie;we++){const Ce=z[we];re=Pe[we];for(let Oe=0,tt=Ce.length;Oe<tt;Oe++){const Ze=q(Ce[Oe],re[Oe],_e);Je(Ze.x,Ze.y,-me)}}}const xe=S+x;for(let te=0;te<j;te++){const se=m?q(O[te],ae[te],xe):O[te];P?(F.copy(y.normals[0]).multiplyScalar(se.x),k.copy(y.binormals[0]).multiplyScalar(se.y),M.copy(E[0]).add(F).add(k),Je(M.x,M.y,M.z)):Je(se.x,se.y,0)}for(let te=1;te<=f;te++)for(let se=0;se<j;se++){const me=m?q(O[se],ae[se],xe):O[se];P?(F.copy(y.normals[te]).multiplyScalar(me.x),k.copy(y.binormals[te]).multiplyScalar(me.y),M.copy(E[te]).add(F).add(k),Je(M.x,M.y,M.z)):Je(me.x,me.y,d/f*te)}for(let te=w-1;te>=0;te--){const se=te/w,me=v*Math.cos(se*Math.PI/2),_e=S*Math.sin(se*Math.PI/2)+x;for(let we=0,Ie=V.length;we<Ie;we++){const Ce=q(V[we],Ee[we],_e);Je(Ce.x,Ce.y,d+me)}for(let we=0,Ie=z.length;we<Ie;we++){const Ce=z[we];re=Pe[we];for(let Oe=0,tt=Ce.length;Oe<tt;Oe++){const Ze=q(Ce[Oe],re[Oe],_e);P?Je(Ze.x,Ze.y+E[f-1].y,E[f-1].x+me):Je(Ze.x,Ze.y,d+me)}}}be(),De();function be(){const te=i.length/3;if(m){let se=0,me=j*se;for(let _e=0;_e<ge;_e++){const we=G[_e];pe(we[2]+me,we[1]+me,we[0]+me)}se=f+w*2,me=j*se;for(let _e=0;_e<ge;_e++){const we=G[_e];pe(we[0]+me,we[1]+me,we[2]+me)}}else{for(let se=0;se<ge;se++){const me=G[se];pe(me[2],me[1],me[0])}for(let se=0;se<ge;se++){const me=G[se];pe(me[0]+j*f,me[1]+j*f,me[2]+j*f)}}n.addGroup(te,i.length/3-te,0)}function De(){const te=i.length/3;let se=0;ve(V,se),se+=V.length;for(let me=0,_e=z.length;me<_e;me++){const we=z[me];ve(we,se),se+=we.length}n.addGroup(te,i.length/3-te,1)}function ve(te,se){let me=te.length;for(;--me>=0;){const _e=me;let we=me-1;we<0&&(we=te.length-1);for(let Ie=0,Ce=f+w*2;Ie<Ce;Ie++){const Oe=j*Ie,tt=j*(Ie+1),Ze=se+_e+Oe,N=se+we+Oe,B=se+we+tt,oe=se+_e+tt;he(Ze,N,B,oe)}}}function Je(te,se,me){c.push(te),c.push(se),c.push(me)}function pe(te,se,me){le(te),le(se),le(me);const _e=i.length/3,we=T.generateTopUV(n,i,_e-3,_e-2,_e-1);ue(we[0]),ue(we[1]),ue(we[2])}function he(te,se,me,_e){le(te),le(se),le(_e),le(se),le(me),le(_e);const we=i.length/3,Ie=T.generateSideWallUV(n,i,we-6,we-3,we-2,we-1);ue(Ie[0]),ue(Ie[1]),ue(Ie[3]),ue(Ie[1]),ue(Ie[2]),ue(Ie[3])}function le(te){i.push(c[te*3+0]),i.push(c[te*3+1]),i.push(c[te*3+2])}function ue(te){s.push(te.x),s.push(te.y)}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return PA(t,n,e)}static fromJSON(e,t){const n=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];n.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new ix[i.type]().fromJSON(i)),new Gf(n,e.options)}}const AA={generateTopUV:function(r,e,t,n,i){const s=e[t*3],o=e[t*3+1],a=e[n*3],c=e[n*3+1],u=e[i*3],f=e[i*3+1];return[new Ne(s,o),new Ne(a,c),new Ne(u,f)]},generateSideWallUV:function(r,e,t,n,i,s){const o=e[t*3],a=e[t*3+1],c=e[t*3+2],u=e[n*3],f=e[n*3+1],d=e[n*3+2],m=e[i*3],v=e[i*3+1],S=e[i*3+2],x=e[s*3],w=e[s*3+1],A=e[s*3+2];return Math.abs(a-f)<Math.abs(o-u)?[new Ne(o,1-c),new Ne(u,1-d),new Ne(m,1-S),new Ne(x,1-A)]:[new Ne(a,1-c),new Ne(f,1-d),new Ne(v,1-S),new Ne(w,1-A)]}};function PA(r,e,t){if(t.shapes=[],Array.isArray(r))for(let n=0,i=r.length;n<i;n++){const s=r[n];t.shapes.push(s.uuid)}else t.shapes.push(r.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class TA extends Ns{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Rf,this.normalScale=new Ne(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class LA extends Ns{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Dt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Dt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Rf,this.normalScale=new Ne(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Df,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class cx extends Rn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Dt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}const eh=new en,ig=new Y,sg=new Y;class IA{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ne(512,512),this.map=null,this.mapPass=null,this.matrix=new en,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Of,this._frameExtents=new Ne(1,1),this._viewportCount=1,this._viewports=[new Wt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;ig.setFromMatrixPosition(e.matrixWorld),t.position.copy(ig),sg.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(sg),t.updateMatrixWorld(),eh.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(eh),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(eh)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}const og=new en,Ta=new Y,th=new Y;class DA extends IA{constructor(){super(new sr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ne(4,2),this._viewportCount=6,this._viewports=[new Wt(2,1,1,1),new Wt(0,1,1,1),new Wt(3,1,1,1),new Wt(1,1,1,1),new Wt(3,0,1,1),new Wt(1,0,1,1)],this._cubeDirections=[new Y(1,0,0),new Y(-1,0,0),new Y(0,0,1),new Y(0,0,-1),new Y(0,1,0),new Y(0,-1,0)],this._cubeUps=[new Y(0,1,0),new Y(0,1,0),new Y(0,1,0),new Y(0,1,0),new Y(0,0,1),new Y(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,i=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),Ta.setFromMatrixPosition(e.matrixWorld),n.position.copy(Ta),th.copy(n.position),th.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(th),n.updateMatrixWorld(),i.makeTranslation(-Ta.x,-Ta.y,-Ta.z),og.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(og)}}class RA extends cx{constructor(e,t,n=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new DA}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class kA extends cx{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class FA{constructor(e,t,n=0,i=1/0){this.ray=new kf(e,t),this.near=n,this.far=i,this.camera=null,this.layers=new Ff,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,n=[]){return of(e,this,n,t),n.sort(ag),n}intersectObjects(e,t=!0,n=[]){for(let i=0,s=e.length;i<s;i++)of(e[i],this,n,t);return n.sort(ag),n}}function ag(r,e){return r.distance-e.distance}function of(r,e,t,n){if(r.layers.test(e.layers)&&r.raycast(e,t),n===!0){const i=r.children;for(let s=0,o=i.length;s<o;s++)of(i[s],e,t,!0)}}class lg{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(In(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class OA extends ex{constructor(e=10,t=10,n=4473924,i=8947848){n=new Dt(n),i=new Dt(i);const s=t/2,o=e/t,a=e/2,c=[],u=[];for(let m=0,v=0,S=-a;m<=t;m++,S+=o){c.push(-a,0,S,a,0,S),c.push(S,0,-a,S,0,a);const x=m===s?n:i;x.toArray(u,v),v+=3,x.toArray(u,v),v+=3,x.toArray(u,v),v+=3,x.toArray(u,v),v+=3}const f=new Zn;f.setAttribute("position",new lr(c,3)),f.setAttribute("color",new lr(u,3));const d=new Uf({vertexColors:!0,toneMapped:!1});super(f,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const ac=new Qo;class BA extends ex{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new Zn;s.setIndex(new jn(n,1)),s.setAttribute("position",new jn(i,3)),super(s,new Uf({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&ac.setFromObject(this.object),ac.isEmpty())return;const t=ac.min,n=ac.max,i=this.geometry.attributes.position,s=i.array;s[0]=n.x,s[1]=n.y,s[2]=n.z,s[3]=t.x,s[4]=n.y,s[5]=n.z,s[6]=t.x,s[7]=t.y,s[8]=n.z,s[9]=n.x,s[10]=t.y,s[11]=n.z,s[12]=n.x,s[13]=n.y,s[14]=t.z,s[15]=t.x,s[16]=n.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=n.x,s[22]=t.y,s[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Lf}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Lf);function ux(r){return"buffer"in r.polygons&&r.polygons.buffer instanceof Zn}function Hf(r,e,t){return Tf(r,e,{label:t})}function ul(r,e,t){const n=r.addFolder({title:e,expanded:t});return xl(()=>{n.dispose()}),n}function hl(r){for(const e of r)return e;throw new Error("Empty iterator")}var Po=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};const NA=(r,e,t)=>(r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r[4]=e[4]+t[4],r[5]=e[5]+t[5],r[6]=e[6]+t[6],r[7]=e[7]+t[7],r[8]=e[8]+t[8],r[9]=e[9]+t[9],r[10]=e[10]+t[10],r[11]=e[11]+t[11],r[12]=e[12]+t[12],r[13]=e[13]+t[13],r[14]=e[14]+t[14],r[15]=e[15]+t[15],r);var UA=NA;const VA=()=>[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];var Wf=VA;const zA=Wf,$A=r=>{const e=zA();return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e};var GA=$A;const HA=(r,e)=>(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r);var hx=HA;const WA=(r,e)=>{const t=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],c=e[6],u=e[7],f=e[8],d=e[9],m=e[10],v=e[11],S=e[12],x=e[13],w=e[14],A=e[15],T=t*a-n*o,E=t*c-i*o,P=t*u-s*o,y=n*c-i*a,k=n*u-s*a,F=i*u-s*c,M=f*x-d*S,R=f*w-m*S,O=f*A-v*S,z=d*w-m*x,Q=d*A-v*x,G=m*A-v*w;let V=T*G-E*Q+P*z+y*O-k*R+F*M;return V?(V=1/V,r[0]=(a*G-c*Q+u*z)*V,r[1]=(i*Q-n*G-s*z)*V,r[2]=(x*F-w*k+A*y)*V,r[3]=(m*k-d*F-v*y)*V,r[4]=(c*O-o*G-u*R)*V,r[5]=(t*G-i*O+s*R)*V,r[6]=(w*P-S*F-A*E)*V,r[7]=(f*F-m*P+v*E)*V,r[8]=(o*Q-a*O+u*M)*V,r[9]=(n*O-t*Q-s*M)*V,r[10]=(S*k-x*P+A*T)*V,r[11]=(d*P-f*k-v*T)*V,r[12]=(a*R-o*z-c*M)*V,r[13]=(t*z-n*R+i*M)*V,r[14]=(x*E-S*y-w*T)*V,r[15]=(f*y-d*E+m*T)*V,r):null};var qA=WA;const XA=(r,e)=>r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]&&r[4]===e[4]&&r[5]===e[5]&&r[6]===e[6]&&r[7]===e[7]&&r[8]===e[8]&&r[9]===e[9]&&r[10]===e[10]&&r[11]===e[11]&&r[12]===e[12]&&r[13]===e[13]&&r[14]===e[14]&&r[15]===e[15];var YA=XA;const jA=1e5,ZA=1e-5,KA=1e-13,JA=Math.PI*2;var Tt={EPS:ZA,NEPS:KA,TAU:JA,spatialResolution:jA};const{NEPS:QA}=Tt,fx=r=>Math.abs(r)<QA?0:r,eP=r=>fx(Math.sin(r)),tP=r=>fx(Math.cos(r));var Cn={sin:eP,cos:tP};const nP=r=>(r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r);var dx=nP;const{EPS:rP}=Tt,{sin:iP,cos:sP}=Cn,oP=dx,aP=(r,e,t)=>{let[n,i,s]=t;const o=n*n+i*i+s*s;if(Math.abs(o)<rP)return oP(r);const a=1/Math.sqrt(o);n*=a,i*=a,s*=a;const c=iP(e),u=sP(e),f=1-u;return r[0]=n*n*f+u,r[1]=i*n*f+s*c,r[2]=s*n*f-i*c,r[3]=0,r[4]=n*i*f-s*c,r[5]=i*i*f+u,r[6]=s*i*f+n*c,r[7]=0,r[8]=n*s*f+i*c,r[9]=i*s*f-n*c,r[10]=s*s*f+u,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r};var px=aP;const lP=(r,e)=>(r[0]=e[0],r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=e[1],r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=e[2],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r);var cP=lP;const{sin:nh,cos:rh}=Cn,uP=(r,e,t,n)=>{const i=nh(e),s=rh(e),o=nh(t),a=rh(t),c=nh(n),u=rh(n);return r[0]=a*s,r[1]=a*i,r[2]=-o,r[3]=0,r[4]=c*o*s-u*i,r[5]=u*s+c*o*i,r[6]=c*a,r[7]=0,r[8]=c*i+u*o*s,r[9]=u*o*i-c*s,r[10]=u*a,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r};var hP=uP;const fP=(r,e)=>(r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=e[0],r[13]=e[1],r[14]=e[2],r[15]=1,r);var dP=fP;const pP=Wf,mP=(r,e,t,n,i,s,o,a,c,u,f,d,m,v,S,x)=>{const w=pP();return w[0]=r,w[1]=e,w[2]=t,w[3]=n,w[4]=i,w[5]=s,w[6]=o,w[7]=a,w[8]=c,w[9]=u,w[10]=f,w[11]=d,w[12]=m,w[13]=v,w[14]=S,w[15]=x,w};var gP=mP;const vP=(r,e)=>(r[0]=Math.abs(e[0]),r[1]=Math.abs(e[1]),r[2]=Math.abs(e[2]),r);var mx=vP;const bP=(r,e,t)=>(r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r);var xP=bP;const wP=(r,e)=>r[0]*e[0]+r[1]*e[1]+r[2]*e[2];var gx=wP;const yP=gx,_P=(r,e)=>{const t=r[0],n=r[1],i=r[2],s=e[0],o=e[1],a=e[2],c=Math.sqrt(t*t+n*n+i*i),u=Math.sqrt(s*s+o*o+a*a),f=c*u,d=f&&yP(r,e)/f;return Math.acos(Math.min(Math.max(d,-1),1))};var SP=_P;const CP=()=>[0,0,0];var vu=CP;const MP=vu,EP=r=>{const e=MP();return e[0]=r[0],e[1]=r[1],e[2]=r[2],e};var AP=EP;const PP=(r,e)=>(r[0]=e[0],r[1]=e[1],r[2]=e[2],r);var TP=PP;const LP=(r,e,t)=>{const n=e[0],i=e[1],s=e[2],o=t[0],a=t[1],c=t[2];return r[0]=i*c-s*a,r[1]=s*o-n*c,r[2]=n*a-i*o,r};var vx=LP;const IP=(r,e)=>{const t=e[0]-r[0],n=e[1]-r[1],i=e[2]-r[2];return Math.sqrt(t*t+n*n+i*i)};var DP=IP;const RP=(r,e,t)=>(r[0]=e[0]/t[0],r[1]=e[1]/t[1],r[2]=e[2]/t[2],r);var kP=RP;const FP=(r,e)=>r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2];var OP=FP;const BP=(r,e)=>(r[0]=e,r[1]=e,r[2]=e,r);var NP=BP;const UP=vu,VP=(r,e,t)=>{const n=UP();return n[0]=r,n[1]=e,n[2]=t,n};var zP=VP;const $P=(r,e,t=0)=>(r[0]=e[0],r[1]=e[1],r[2]=t,r);var GP=$P;const HP=r=>{const e=r[0],t=r[1],n=r[2];return Math.sqrt(e*e+t*t+n*n)};var WP=HP;const qP=(r,e,t,n)=>(r[0]=e[0]+n*(t[0]-e[0]),r[1]=e[1]+n*(t[1]-e[1]),r[2]=e[2]+n*(t[2]-e[2]),r);var XP=qP;const YP=(r,e,t)=>(r[0]=Math.max(e[0],t[0]),r[1]=Math.max(e[1],t[1]),r[2]=Math.max(e[2],t[2]),r);var bx=YP;const jP=(r,e,t)=>(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.min(e[2],t[2]),r);var xx=jP;const ZP=(r,e,t)=>(r[0]=e[0]*t[0],r[1]=e[1]*t[1],r[2]=e[2]*t[2],r);var KP=ZP;const JP=(r,e)=>(r[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r);var QP=JP;const eT=(r,e)=>{const t=e[0],n=e[1],i=e[2];let s=t*t+n*n+i*i;return s>0&&(s=1/Math.sqrt(s)),r[0]=t*s,r[1]=n*s,r[2]=i*s,r};var tT=eT;const nT=mx,rT=vu,iT=vx,sT=(r,e)=>{const t=nT(rT(),e),n=0+(t[0]<t[1]&&t[0]<t[2]),i=0+(t[1]<=t[0]&&t[1]<t[2]),s=0+(t[2]<=t[0]&&t[2]<=t[1]);return iT(r,e,[n,i,s])};var oT=sT;const aT=(r,e,t,n)=>{const i=[],s=[];return i[0]=e[0]-t[0],i[1]=e[1]-t[1],i[2]=e[2]-t[2],s[0]=i[0],s[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),s[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),r[0]=s[0]+t[0],r[1]=s[1]+t[1],r[2]=s[2]+t[2],r};var lT=aT;const cT=(r,e,t,n)=>{const i=[],s=[];return i[0]=e[0]-t[0],i[1]=e[1]-t[1],i[2]=e[2]-t[2],s[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),s[1]=i[1],s[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),r[0]=s[0]+t[0],r[1]=s[1]+t[1],r[2]=s[2]+t[2],r};var uT=cT;const hT=(r,e,t,n)=>{const i=[],s=[];return i[0]=e[0]-t[0],i[1]=e[1]-t[1],s[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),s[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),r[0]=s[0]+t[0],r[1]=s[1]+t[1],r[2]=e[2],r};var fT=hT;const dT=(r,e,t)=>(r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r);var pT=dT;const mT=(r,e,t)=>(r[0]=Math.round(e[0]/t)*t+0,r[1]=Math.round(e[1]/t)*t+0,r[2]=Math.round(e[2]/t)*t+0,r);var gT=mT;const vT=(r,e)=>{const t=e[0]-r[0],n=e[1]-r[1],i=e[2]-r[2];return t*t+n*n+i*i};var bT=vT;const xT=r=>{const e=r[0],t=r[1],n=r[2];return e*e+t*t+n*n};var wT=xT;const yT=(r,e,t)=>(r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r);var _T=yT;const ST=r=>`[${r[0].toFixed(7)}, ${r[1].toFixed(7)}, ${r[2].toFixed(7)}]`;var CT=ST;const MT=(r,e,t)=>{const n=e[0],i=e[1],s=e[2];let o=t[3]*n+t[7]*i+t[11]*s+t[15];return o=o||1,r[0]=(t[0]*n+t[4]*i+t[8]*s+t[12])/o,r[1]=(t[1]*n+t[5]*i+t[9]*s+t[13])/o,r[2]=(t[2]*n+t[6]*i+t[10]*s+t[14])/o,r};var ET=MT,Ye={abs:mx,add:xP,angle:SP,clone:AP,copy:TP,create:vu,cross:vx,distance:DP,divide:kP,dot:gx,equals:OP,fromScalar:NP,fromValues:zP,fromVec2:GP,length:WP,lerp:XP,max:bx,min:xx,multiply:KP,negate:QP,normalize:tT,orthogonal:oT,rotateX:lT,rotateY:uT,rotateZ:fT,scale:pT,snap:gT,squaredDistance:bT,squaredLength:wT,subtract:_T,toString:CT,transform:ET};const Ii=Ye,AT=px,PT=(r,e,t)=>{const n=Ii.normalize(Ii.create(),e),i=Ii.normalize(Ii.create(),t),s=Ii.cross(Ii.create(),i,n),o=Ii.dot(i,n);if(o===-1)return AT(r,Math.PI,Ii.orthogonal(s,n));const a=1/(1+o);return r[0]=s[0]*s[0]*a+o,r[1]=s[1]*s[0]*a-s[2],r[2]=s[2]*s[0]*a+s[1],r[3]=0,r[4]=s[0]*s[1]*a+s[2],r[5]=s[1]*s[1]*a+o,r[6]=s[2]*s[1]*a-s[0],r[7]=0,r[8]=s[0]*s[2]*a-s[1],r[9]=s[1]*s[2]*a+s[0],r[10]=s[2]*s[2]*a+o,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r};var TT=PT;const{sin:LT,cos:IT}=Cn,DT=(r,e)=>{const t=LT(e),n=IT(e);return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=n,r[6]=t,r[7]=0,r[8]=0,r[9]=-t,r[10]=n,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r};var RT=DT;const{sin:kT,cos:FT}=Cn,OT=(r,e)=>{const t=kT(e),n=FT(e);return r[0]=n,r[1]=0,r[2]=-t,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=t,r[9]=0,r[10]=n,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r};var BT=OT;const{sin:NT,cos:UT}=Cn,VT=(r,e)=>{const t=NT(e),n=UT(e);return r[0]=n,r[1]=t,r[2]=0,r[3]=0,r[4]=-t,r[5]=n,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r};var zT=VT;const $T=r=>r[0]===1&&r[1]===0&&r[2]===0&&r[3]===0&&r[4]===0&&r[5]===1&&r[6]===0&&r[7]===0&&r[8]===0&&r[9]===0&&r[10]===1&&r[11]===0&&r[12]===0&&r[13]===0&&r[14]===0&&r[15]===1;var GT=$T;const HT=r=>li(r[1])&&li(r[2])&&li(r[3])&&li(r[4])&&li(r[6])&&li(r[7])&&li(r[8])&&li(r[9])&&li(r[11])&&r[15]===1,li=r=>Math.abs(r)<Number.EPSILON;var WT=HT;const qT=r=>{const e=r[4]*r[9]-r[8]*r[5],t=r[8]*r[1]-r[0]*r[9],n=r[0]*r[5]-r[4]*r[1];return e*r[2]+t*r[6]+n*r[10]<0};var XT=qT;const YT=(r,e)=>{const[t,n,i,s]=e;return r[0]=1-2*t*t,r[1]=-2*n*t,r[2]=-2*i*t,r[3]=0,r[4]=-2*t*n,r[5]=1-2*n*n,r[6]=-2*i*n,r[7]=0,r[8]=-2*t*i,r[9]=-2*n*i,r[10]=1-2*i*i,r[11]=0,r[12]=2*t*s,r[13]=2*n*s,r[14]=2*i*s,r[15]=1,r};var jT=YT;const ZT=(r,e,t)=>{const n=e[0],i=e[1],s=e[2],o=e[3],a=e[4],c=e[5],u=e[6],f=e[7],d=e[8],m=e[9],v=e[10],S=e[11],x=e[12],w=e[13],A=e[14],T=e[15];let E=t[0],P=t[1],y=t[2],k=t[3];return r[0]=E*n+P*a+y*d+k*x,r[1]=E*i+P*c+y*m+k*w,r[2]=E*s+P*u+y*v+k*A,r[3]=E*o+P*f+y*S+k*T,E=t[4],P=t[5],y=t[6],k=t[7],r[4]=E*n+P*a+y*d+k*x,r[5]=E*i+P*c+y*m+k*w,r[6]=E*s+P*u+y*v+k*A,r[7]=E*o+P*f+y*S+k*T,E=t[8],P=t[9],y=t[10],k=t[11],r[8]=E*n+P*a+y*d+k*x,r[9]=E*i+P*c+y*m+k*w,r[10]=E*s+P*u+y*v+k*A,r[11]=E*o+P*f+y*S+k*T,E=t[12],P=t[13],y=t[14],k=t[15],r[12]=E*n+P*a+y*d+k*x,r[13]=E*i+P*c+y*m+k*w,r[14]=E*s+P*u+y*v+k*A,r[15]=E*o+P*f+y*S+k*T,r};var KT=ZT;const{EPS:JT}=Tt,{sin:QT,cos:e6}=Cn,t6=hx,n6=(r,e,t,n)=>{let[i,s,o]=n;const a=i*i+s*s+o*o;if(Math.abs(a)<JT)return t6(r,e);const c=1/Math.sqrt(a);i*=c,s*=c,o*=c;const u=QT(t),f=e6(t),d=1-f,m=e[0],v=e[1],S=e[2],x=e[3],w=e[4],A=e[5],T=e[6],E=e[7],P=e[8],y=e[9],k=e[10],F=e[11],M=i*i*d+f,R=s*i*d+o*u,O=o*i*d-s*u,z=i*s*d-o*u,Q=s*s*d+f,G=o*s*d+i*u,V=i*o*d+s*u,q=s*o*d-i*u,j=o*o*d+f;return r[0]=m*M+w*R+P*O,r[1]=v*M+A*R+y*O,r[2]=S*M+T*R+k*O,r[3]=x*M+E*R+F*O,r[4]=m*z+w*Q+P*G,r[5]=v*z+A*Q+y*G,r[6]=S*z+T*Q+k*G,r[7]=x*z+E*Q+F*G,r[8]=m*V+w*q+P*j,r[9]=v*V+A*q+y*j,r[10]=S*V+T*q+k*j,r[11]=x*V+E*q+F*j,e!==r&&(r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r};var r6=n6;const{sin:i6,cos:s6}=Cn,o6=(r,e,t)=>{const n=i6(t),i=s6(t),s=e[4],o=e[5],a=e[6],c=e[7],u=e[8],f=e[9],d=e[10],m=e[11];return e!==r&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[4]=s*i+u*n,r[5]=o*i+f*n,r[6]=a*i+d*n,r[7]=c*i+m*n,r[8]=u*i-s*n,r[9]=f*i-o*n,r[10]=d*i-a*n,r[11]=m*i-c*n,r};var a6=o6;const{sin:l6,cos:c6}=Cn,u6=(r,e,t)=>{const n=l6(t),i=c6(t),s=e[0],o=e[1],a=e[2],c=e[3],u=e[8],f=e[9],d=e[10],m=e[11];return e!==r&&(r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=s*i-u*n,r[1]=o*i-f*n,r[2]=a*i-d*n,r[3]=c*i-m*n,r[8]=s*n+u*i,r[9]=o*n+f*i,r[10]=a*n+d*i,r[11]=c*n+m*i,r};var h6=u6;const{sin:f6,cos:d6}=Cn,p6=(r,e,t)=>{const n=f6(t),i=d6(t),s=e[0],o=e[1],a=e[2],c=e[3],u=e[4],f=e[5],d=e[6],m=e[7];return e!==r&&(r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=s*i+u*n,r[1]=o*i+f*n,r[2]=a*i+d*n,r[3]=c*i+m*n,r[4]=u*i-s*n,r[5]=f*i-o*n,r[6]=d*i-a*n,r[7]=m*i-c*n,r};var m6=p6;const g6=(r,e,t)=>{const n=t[0],i=t[1],s=t[2];return r[0]=e[0]*n,r[1]=e[1]*n,r[2]=e[2]*n,r[3]=e[3]*n,r[4]=e[4]*i,r[5]=e[5]*i,r[6]=e[6]*i,r[7]=e[7]*i,r[8]=e[8]*s,r[9]=e[9]*s,r[10]=e[10]*s,r[11]=e[11]*s,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r};var v6=g6;const b6=(r,e,t)=>(r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r[4]=e[4]-t[4],r[5]=e[5]-t[5],r[6]=e[6]-t[6],r[7]=e[7]-t[7],r[8]=e[8]-t[8],r[9]=e[9]-t[9],r[10]=e[10]-t[10],r[11]=e[11]-t[11],r[12]=e[12]-t[12],r[13]=e[13]-t[13],r[14]=e[14]-t[14],r[15]=e[15]-t[15],r);var x6=b6;const w6=r=>r.map(e=>e.toFixed(7)).toString();var y6=w6;const _6=(r,e,t)=>{const n=t[0],i=t[1],s=t[2];let o,a,c,u,f,d,m,v,S,x,w,A;return e===r?(r[12]=e[0]*n+e[4]*i+e[8]*s+e[12],r[13]=e[1]*n+e[5]*i+e[9]*s+e[13],r[14]=e[2]*n+e[6]*i+e[10]*s+e[14],r[15]=e[3]*n+e[7]*i+e[11]*s+e[15]):(o=e[0],a=e[1],c=e[2],u=e[3],f=e[4],d=e[5],m=e[6],v=e[7],S=e[8],x=e[9],w=e[10],A=e[11],r[0]=o,r[1]=a,r[2]=c,r[3]=u,r[4]=f,r[5]=d,r[6]=m,r[7]=v,r[8]=S,r[9]=x,r[10]=w,r[11]=A,r[12]=o*n+f*i+S*s+e[12],r[13]=a*n+d*i+x*s+e[13],r[14]=c*n+m*i+w*s+e[14],r[15]=u*n+v*i+A*s+e[15]),r};var S6=_6,_t={add:UA,clone:GA,copy:hx,create:Wf,invert:qA,equals:YA,fromRotation:px,fromScaling:cP,fromTaitBryanRotation:hP,fromTranslation:dP,fromValues:gP,fromVectorRotation:TT,fromXRotation:RT,fromYRotation:BT,fromZRotation:zT,identity:dx,isIdentity:GT,isOnlyTransformScale:WT,isMirroring:XT,mirrorByPlane:jT,multiply:KT,rotate:r6,rotateX:a6,rotateY:h6,rotateZ:m6,scale:v6,subtract:x6,toString:y6,translate:S6};function C6(r,e){const t=e,n=t[0],i=t[1],s=t[2],o=t[3],a=t[4],c=t[5],u=t[6],f=t[7],d=t[8],m=t[9],v=t[10],S=t[11],x=t[12],w=t[13],A=t[14],T=t[15],E=m*A*f-w*v*f+w*u*S-c*A*S-m*u*T+c*v*T,P=x*v*f-d*A*f-x*u*S+a*A*S+d*u*T-a*v*T,y=d*w*f-x*m*f+x*c*S-a*w*S-d*c*T+a*m*T,k=x*m*u-d*w*u-x*c*v+a*w*v+d*c*A-a*m*A,F=n*E+i*P+s*y+o*k;if(F===0)return _t.fromValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const M=1/F;return r[0]=E*M,r[1]=(w*v*o-m*A*o-w*s*S+i*A*S+m*s*T-i*v*T)*M,r[2]=(c*A*o-w*u*o+w*s*f-i*A*f-c*s*T+i*u*T)*M,r[3]=(m*u*o-c*v*o-m*s*f+i*v*f+c*s*S-i*u*S)*M,r[4]=P*M,r[5]=(d*A*o-x*v*o+x*s*S-n*A*S-d*s*T+n*v*T)*M,r[6]=(x*u*o-a*A*o-x*s*f+n*A*f+a*s*T-n*u*T)*M,r[7]=(a*v*o-d*u*o+d*s*f-n*v*f-a*s*S+n*u*S)*M,r[8]=y*M,r[9]=(x*m*o-d*w*o-x*i*S+n*w*S+d*i*T-n*m*T)*M,r[10]=(a*w*o-x*c*o+x*i*f-n*w*f-a*i*T+n*c*T)*M,r[11]=(d*c*o-a*m*o-d*i*f+n*m*f+a*i*S-n*c*S)*M,t[12]=k*M,t[13]=(d*w*s-x*m*s+x*i*v-n*w*v-d*i*A+n*m*A)*M,t[14]=(x*c*s-a*w*s-x*i*u+n*w*u+a*i*A-n*c*A)*M,t[15]=(a*m*s-d*c*s+d*i*u-n*m*u-a*i*v+n*c*v)*M,r}const wx=r=>r.reduce((e,t)=>Array.isArray(t)?e.concat(wx(t)):e.concat(t),[]);var Lt=wx;const M6=r=>Object.assign({},r);var E6=M6;const A6=_t,P6=r=>(r===void 0&&(r=[]),{sides:r,transforms:A6.create()});var bu=P6;const T6=(r,e)=>(r[0]=Math.abs(e[0]),r[1]=Math.abs(e[1]),r);var L6=T6;const I6=(r,e,t)=>(r[0]=e[0]+t[0],r[1]=e[1]+t[1],r);var D6=I6,af={},R6={get exports(){return af},set exports(r){af=r}};const k6=r=>Math.atan2(r[1],r[0]);var qf=k6;(function(r){r.exports=qf})(R6);const F6=qf,O6=r=>F6(r)*57.29577951308232;var B6=O6;const N6=()=>[0,0];var xu=N6;const U6=xu,V6=r=>{const e=U6();return e[0]=r[0],e[1]=r[1],e};var z6=V6;const $6=(r,e)=>(r[0]=e[0],r[1]=e[1],r);var G6=$6;const H6=(r,e,t)=>(r[0]=0,r[1]=0,r[2]=e[0]*t[1]-e[1]*t[0],r);var W6=H6;const q6=(r,e)=>{const t=e[0]-r[0],n=e[1]-r[1];return Math.sqrt(t*t+n*n)};var X6=q6;const Y6=(r,e,t)=>(r[0]=e[0]/t[0],r[1]=e[1]/t[1],r);var j6=Y6;const Z6=(r,e)=>r[0]*e[0]+r[1]*e[1];var K6=Z6;const J6=(r,e)=>r[0]===e[0]&&r[1]===e[1];var Q6=J6;const{sin:e8,cos:t8}=Cn,n8=(r,e)=>(r[0]=t8(e),r[1]=e8(e),r);var yx=n8;const r8=yx,i8=(r,e)=>r8(r,e*.017453292519943295);var s8=i8;const o8=(r,e)=>(r[0]=e,r[1]=e,r);var a8=o8;const l8=xu,c8=(r,e)=>{const t=l8();return t[0]=r,t[1]=e,t};var u8=c8;const h8=r=>Math.sqrt(r[0]*r[0]+r[1]*r[1]);var f8=h8;const d8=(r,e,t,n)=>{const i=e[0],s=e[1];return r[0]=i+n*(t[0]-i),r[1]=s+n*(t[1]-s),r};var p8=d8;const m8=(r,e,t)=>(r[0]=Math.max(e[0],t[0]),r[1]=Math.max(e[1],t[1]),r);var g8=m8;const v8=(r,e,t)=>(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r);var b8=v8;const x8=(r,e,t)=>(r[0]=e[0]*t[0],r[1]=e[1]*t[1],r);var w8=x8;const y8=(r,e)=>(r[0]=-e[0],r[1]=-e[1],r);var _8=y8;const S8=(r,e,t,n)=>{const i=e[0]-t[0],s=e[1]-t[1],o=Math.cos(n),a=Math.sin(n);return r[0]=i*o-s*a+t[0],r[1]=i*a+s*o+t[1],r};var _x=S8;const{TAU:C8}=Tt,M8=xu,E8=_x,A8=(r,e)=>E8(r,e,M8(),C8/4);var P8=A8;const T8=(r,e)=>{const t=e[0],n=e[1];let i=t*t+n*n;return i>0&&(i=1/Math.sqrt(i)),r[0]=t*i,r[1]=n*i,r};var L8=T8;const I8=(r,e,t)=>(r[0]=e[0]*t,r[1]=e[1]*t,r);var D8=I8;const R8=(r,e,t)=>(r[0]=Math.round(e[0]/t)*t+0,r[1]=Math.round(e[1]/t)*t+0,r);var k8=R8;const F8=(r,e)=>{const t=e[0]-r[0],n=e[1]-r[1];return t*t+n*n};var O8=F8;const B8=r=>{const e=r[0],t=r[1];return e*e+t*t};var N8=B8;const U8=(r,e,t)=>(r[0]=e[0]-t[0],r[1]=e[1]-t[1],r);var V8=U8;const z8=r=>`[${r[0].toFixed(7)}, ${r[1].toFixed(7)}]`;var $8=z8;const G8=(r,e,t)=>{const n=e[0],i=e[1];return r[0]=t[0]*n+t[4]*i+t[12],r[1]=t[1]*n+t[5]*i+t[13],r};var H8=G8,bt={abs:L6,add:D6,angle:af,angleDegrees:B6,angleRadians:qf,clone:z6,copy:G6,create:xu,cross:W6,distance:X6,divide:j6,dot:K6,equals:Q6,fromAngleDegrees:s8,fromAngleRadians:yx,fromScalar:a8,fromValues:u8,length:f8,lerp:p8,max:g8,min:b8,multiply:w8,negate:_8,normal:P8,normalize:L8,rotate:_x,scale:D8,snap:k8,squaredDistance:O8,squaredLength:N8,subtract:V8,toString:$8,transform:H8};const ih=bt,W8=bu,q8=r=>{if(!Array.isArray(r))throw new Error("the given points must be an array");let e=r.length;if(e<3)throw new Error("the given points must define a closed geometry with three or more points");ih.equals(r[0],r[e-1])&&--e;const t=[];let n=r[e-1];for(let i=0;i<e;i++){const s=r[i];t.push([ih.clone(n),ih.clone(s)]),n=s}return W8(t)};var X8=q8;const Y8=_t,cg=bt,j8=bu,Z8=r=>{if(r[0]!==0)throw new Error("invalid compact binary data");const e=j8();e.transforms=Y8.clone(r.slice(1,17));for(let t=21;t<r.length;t+=4){const n=cg.fromValues(r[t+0],r[t+1]),i=cg.fromValues(r[t+2],r[t+3]);e.sides.push([n,i])}return r[17]>=0&&(e.color=[r[17],r[18],r[19],r[20]]),e};var K8=Z8;const J8=r=>!!(r&&typeof r=="object"&&"sides"in r&&"transforms"in r&&Array.isArray(r.sides)&&"length"in r.transforms);var Sx=J8;const ug=_t,lc=bt,Q8=r=>(ug.isIdentity(r.transforms)||(r.sides=r.sides.map(e=>{const t=lc.transform(lc.create(),e[0],r.transforms),n=lc.transform(lc.create(),e[1],r.transforms);return[t,n]}),r.transforms=ug.create()),r);var e9=Q8;const t9=e9,n9=r=>t9(r).sides;var _l=n9;const r9=bu,i9=_l,s9=r=>{const t=i9(r).map(n=>[n[1],n[0]]);return t.reverse(),r9(t)};var o9=s9;const La=bt,a9=_l,l9=r=>{const e=new Map,t=n=>{const i=n.toString();return e.has(i)?e.get(i):(e.set(i,n),n)};return r.map(n=>n.map(t))},c9=r=>{const e=new Map;return l9(r).forEach(n=>{e.has(n[0])?e.get(n[0]).push(n):e.set(n[0],[n])}),e},u9=r=>{const e=c9(a9(r)),t=[];for(;;){let n;for(const[o,a]of e){if(n=a.shift(),!n){e.delete(o);continue}break}if(n===void 0)break;const i=[],s=n[0];for(;;){i.push(n[0]);const o=n[1];if(o===s)break;const a=e.get(o);if(!a)throw new Error(`geometry is not closed at vertex ${o}`);const c=h9(n,a);a.length===0&&e.delete(o),n=c}i.length>0&&i.push(i.shift()),t.push(i)}return e.clear(),t},h9=(r,e)=>{if(e.length===1)return e.pop();const t=La.create(),n=La.angleDegrees(La.subtract(t,r[1],r[0]));let i,s;e.forEach((a,c)=>{let f=La.angleDegrees(La.subtract(t,a[1],a[0]))-n;f<-180&&(f+=360),f>=180&&(f-=360),(s===void 0||f>i)&&(s=c,i=f)});const o=e[s];return e.splice(s,1),o};var Cx=u9;const f9=_l,d9=r=>{const t=f9(r).map(n=>n[0]);return t.length>0&&t.push(t.shift()),t};var p9=d9;const hg=bt,m9=_l,g9=r=>{const e=m9(r);let t="geom2 ("+e.length+` sides):
[
`;return e.forEach(n=>{t+="  ["+hg.toString(n[0])+", "+hg.toString(n[1])+`]
`}),t+=`]
`,t};var v9=g9;const b9=r=>{const e=r.sides,t=r.transforms;let n=[-1,-1,-1,-1];r.color&&(n=r.color);const i=new Float32Array(1+16+4+e.length*4);i[0]=0,i[1]=t[0],i[2]=t[1],i[3]=t[2],i[4]=t[3],i[5]=t[4],i[6]=t[5],i[7]=t[6],i[8]=t[7],i[9]=t[8],i[10]=t[9],i[11]=t[10],i[12]=t[11],i[13]=t[12],i[14]=t[13],i[15]=t[14],i[16]=t[15],i[17]=n[0],i[18]=n[1],i[19]=n[2],i[20]=n[3];for(let s=0;s<e.length;s++){const o=s*4+21,a=e[s][0],c=e[s][1];i[o+0]=a[0],i[o+1]=a[1],i[o+2]=c[0],i[o+3]=c[1]}return i};var x9=b9;const fg=_t,w9=(r,e)=>{const t=fg.multiply(fg.create(),r,e.transforms);return Object.assign({},e,{transforms:t})};var y9=w9;const _9=bt,S9=Sx,C9=Cx,M9=r=>{if(!S9(r))throw new Error("invalid geom2 structure");if(C9(r),r.sides.forEach(e=>{if(_9.equals(e[0],e[1]))throw new Error(`geom2 self-edge ${e[0]}`)}),!r.transforms.every(Number.isFinite))throw new Error(`geom2 invalid transforms ${r.transforms}`)};var E9=M9,kt={clone:E6,create:bu,fromPoints:X8,fromCompactBinary:K8,isA:Sx,reverse:o9,toOutlines:Cx,toPoints:p9,toSides:_l,toString:v9,toCompactBinary:x9,transform:y9,validate:E9};const A9=r=>Object.assign({},r);var P9=A9;const T9=_t,L9=r=>(r===void 0&&(r=[]),{polygons:r,transforms:T9.create()});var wu=L9;const I9=r=>((r===void 0||r.length<3)&&(r=[]),{vertices:r});var ta=I9;const D9=ta,R9=Ye,k9=(...r)=>{let e,t;return r.length===1?(e=D9(),t=r[0]):(e=r[0],t=r[1]),e.vertices=t.vertices.map(n=>R9.clone(n)),e};var F9=k9;const O9=Ye,B9=ta,N9=r=>{const e=r.map(t=>O9.clone(t));return B9(e)};var U9=N9;const V9=ta,z9=(r,e)=>{const t=V9(r);return t.plane=e,t};var $9=z9;const G9=()=>[0,0,0,0];var yu=G9;const H9=yu,W9=r=>{const e=H9();return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e};var Mx=W9;const q9=(r,e)=>(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r);var Ex=q9;const X9=(r,e)=>r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3];var Ax=X9;const Y9=(r,e)=>(r[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r[3]=-e[3],r);var Px=Y9;const sh=Ye,j9=(r,e,t)=>{const n=sh.normalize(sh.create(),e),i=sh.dot(t,n);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=i,r};var Z9=j9;const K9=yu,J9=(r,e,t,n)=>{const i=K9();return i[0]=r,i[1]=e,i[2]=t,i[3]=n,i};var Tx=J9;const Ir=Ye,Q9=(r,...e)=>{const t=e.length,n=Ir.create(),i=Ir.create(),s=o=>{const a=e[o],c=e[(o+1)%t],u=e[(o+2)%t];return Ir.subtract(n,c,a),Ir.subtract(i,u,a),Ir.cross(n,n,i),Ir.normalize(n,n),n};return r[0]=0,r[1]=0,r[2]=0,t===3?Ir.copy(r,s(0)):(e.forEach((o,a)=>{Ir.add(r,r,s(a))}),Ir.normalize(r,r)),r[3]=Ir.dot(r,e[0]),r};var Lx=Q9;const{EPS:oh}=Tt,Un=Ye,e7=(r,e,t,n)=>{let i=Un.subtract(Un.create(),t,e),s=Un.subtract(Un.create(),n,e);Un.length(i)<oh&&(i=Un.orthogonal(i,s)),Un.length(s)<oh&&(s=Un.orthogonal(s,i));let o=Un.cross(Un.create(),i,s);Un.length(o)<oh&&(s=Un.orthogonal(s,i),o=Un.cross(o,i,s)),o=Un.normalize(o,o);const a=Un.dot(o,e);return r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=a,r};var t7=e7;const n7=Ye,r7=(r,e)=>{const t=e[0]*r[0]+e[1]*r[1]+e[2]*r[2]-r[3],n=e[0]-t*r[0],i=e[1]-t*r[1],s=e[2]-t*r[2];return n7.fromValues(n,i,s)};var i7=r7;const s7=Ye,o7=(r,e)=>s7.dot(r,e)-r[3];var Ix=o7;const a7=r=>`(${r[0].toFixed(9)}, ${r[1].toFixed(9)}, ${r[2].toFixed(9)}, ${r[3].toFixed(9)})`;var Dx=a7;const l7=_t,Vn=Ye,c7=Lx,u7=Px,h7=(r,e,t)=>{const n=l7.isMirroring(t),i=Vn.orthogonal(Vn.create(),e),s=Vn.cross(i,e,i),o=Vn.cross(Vn.create(),e,s);let a=Vn.fromScalar(Vn.create(),e[3]);Vn.multiply(a,a,e);let c=Vn.add(Vn.create(),a,s),u=Vn.add(Vn.create(),a,o);return a=Vn.transform(a,a,t),c=Vn.transform(c,c,t),u=Vn.transform(u,u,t),c7(r,a,c,u),n&&u7(r,r),r};var f7=h7,Wr={clone:Mx,copy:Ex,create:yu,equals:Ax,flip:Px,fromNormalAndPoint:Z9,fromValues:Tx,fromPoints:Lx,fromPointsRandom:t7,projectionOfPoint:i7,signedDistanceToPoint:Ix,toString:Dx,transform:f7};const dg=Wr,d7=ta,p7=r=>{const e=r.vertices.slice().reverse(),t=d7(e);return r.plane&&(t.plane=dg.flip(dg.create(),r.plane)),t};var m7=p7;const g7=r=>!!(r&&typeof r=="object"&&"vertices"in r&&Array.isArray(r.vertices));var Rx=g7;const pg=Wr,as=Ye,v7=r=>b7(r.vertices),b7=r=>{const e=r.length;if(e>2){const t=pg.fromPoints(pg.create(),...r);let n=r[e-2],i=r[e-1];for(let s=0;s<e;s++){const o=r[s];if(!x7(n,i,o,t))return!1;n=i,i=o}}return!0},x7=(r,e,t,n)=>{const i=as.cross(as.create(),as.subtract(as.create(),e,r),as.subtract(as.create(),t,e));return as.dot(i,n)>=0};var kx=v7;const mg=Wr,w7=r=>(r.plane||(r.plane=mg.fromPoints(mg.create(),...r.vertices)),r.plane);var Xf=w7;const y7=Xf,_7=r=>{const e=r.vertices.length;if(e<3)return 0;const t=r.vertices,n=y7(r),i=Math.abs(n[0]),s=Math.abs(n[1]),o=Math.abs(n[2]);if(i+s+o===0)return 0;let a=3;i>s&&i>o?a=1:s>o&&(a=2);let c=0,u=0,f=1,d=2;switch(a){case 1:for(f=1;f<e;f++)u=f-1,d=(f+1)%e,c+=t[f][1]*(t[d][2]-t[u][2]);c+=t[0][1]*(t[1][2]-t[e-1][2]),c/=2*n[0];break;case 2:for(f=1;f<e;f++)u=f-1,d=(f+1)%e,c+=t[f][2]*(t[d][0]-t[u][0]);c+=t[0][2]*(t[1][0]-t[e-1][0]),c/=2*n[1];break;case 3:default:for(f=1;f<e;f++)u=f-1,d=(f+1)%e,c+=t[f][0]*(t[d][1]-t[u][1]);c+=t[0][0]*(t[1][1]-t[e-1][1]),c/=2*n[2];break}return c};var Fx=_7;const Ia=Ye,S7=r=>{const e=r.vertices,t=e.length,n=t===0?Ia.create():Ia.clone(e[0]),i=Ia.clone(n);for(let s=1;s<t;s++)Ia.min(n,n,e[s]),Ia.max(i,i,e[s]);return[n,i]};var C7=S7;const M7=(r,e)=>r[0]*e[0]+r[1]*e[1]+r[2]*e[2]+r[3]*e[3];var E7=M7;const A7=(r,e)=>(r[0]=e,r[1]=e,r[2]=e,r[3]=e,r);var P7=A7;const T7=(r,e,t)=>{const[n,i,s,o]=e;return r[0]=t[0]*n+t[4]*i+t[8]*s+t[12]*o,r[1]=t[1]*n+t[5]*i+t[9]*s+t[13]*o,r[2]=t[2]*n+t[6]*i+t[10]*s+t[14]*o,r[3]=t[3]*n+t[7]*i+t[11]*s+t[15]*o,r};var L7=T7,I7={clone:Mx,copy:Ex,create:yu,dot:E7,equals:Ax,fromScalar:P7,fromValues:Tx,toString:Dx,transform:L7};const D7=I7,gg=new WeakMap,R7=r=>{let e=gg.get(r);if(e)return e;const t=r.vertices,n=D7.create();if(t.length===0)return n[0]=0,n[1]=0,n[2]=0,n[3]=0,n;let i=t[0],s=i,o=i,a=i,c=i,u=i;t.forEach(v=>{i[0]>v[0]&&(i=v),s[1]>v[1]&&(s=v),o[2]>v[2]&&(o=v),a[0]<v[0]&&(a=v),c[1]<v[1]&&(c=v),u[2]<v[2]&&(u=v)}),n[0]=(i[0]+a[0])*.5,n[1]=(s[1]+c[1])*.5,n[2]=(o[2]+u[2])*.5;const f=n[0]-a[0],d=n[1]-c[1],m=n[2]-u[2];return n[3]=Math.sqrt(f*f+d*d+m*m),gg.set(r,n),n};var k7=R7;const ah=Ye,F7=r=>{let e=0;const t=r.vertices,n=ah.create();for(let i=0;i<t.length-2;i++)ah.cross(n,t[i+1],t[i+2]),e+=ah.dot(t[0],n);return e/=6,e};var O7=F7;const B7=r=>r.vertices;var N7=B7;const U7=Ye,V7=r=>{let e="poly3: vertices: [";return r.vertices.forEach(t=>{e+=`${U7.toString(t)}, `}),e+="]",e};var z7=V7;const $7=_t,vg=Ye,G7=ta,H7=(r,e)=>{const t=e.vertices.map(n=>vg.transform(vg.create(),n,r));return $7.isMirroring(r)&&t.reverse(),G7(t)};var W7=H7;const q7=Ix,{NEPS:X7}=Tt,Y7=Ye,j7=Rx,Z7=kx,K7=Fx,J7=Xf,Q7=r=>{if(!j7(r))throw new Error("invalid poly3 structure");if(r.vertices.length<3)throw new Error(`poly3 not enough vertices ${r.vertices.length}`);if(K7(r)<=0)throw new Error("poly3 area must be greater than zero");for(let e=0;e<r.vertices.length;e++)if(Y7.equals(r.vertices[e],r.vertices[(e+1)%r.vertices.length]))throw new Error(`poly3 duplicate vertex ${r.vertices[e]}`);if(!Z7(r))throw new Error("poly3 must be convex");if(r.vertices.forEach(e=>{if(!e.every(Number.isFinite))throw new Error(`poly3 invalid vertex ${e}`)}),r.vertices.length>3){const e=J7(r);r.vertices.forEach(t=>{const n=Math.abs(q7(e,t));if(n>X7)throw new Error(`poly3 must be coplanar: vertex ${t} distance ${n}`)})}};var eL=Q7,Rt={clone:F9,create:ta,fromPoints:U9,fromPointsAndPlane:$9,invert:m7,isA:Rx,isConvex:kx,measureArea:Fx,measureBoundingBox:C7,measureBoundingSphere:k7,measureSignedVolume:O7,plane:Xf,toPoints:N7,toString:z7,transform:W7,validate:eL};const tL=Rt,nL=wu,rL=r=>{if(!Array.isArray(r))throw new Error("the given points must be an array");const e=r.map((n,i)=>tL.create(n));return nL(e)};var iL=rL;const sL=Ye,oL=_t,aL=Rt,lL=wu,cL=r=>{if(r[0]!==1)throw new Error("invalid compact binary data");const e=lL();e.transforms=oL.clone(r.slice(1,17));const t=r[21];let n=22,i=r.length-t*3;for(;i<r.length;){const s=r[n];n++;const o=[];for(let a=0;a<s;a++)o.push(sL.fromValues(r[i],r[i+1],r[i+2])),i+=3;e.polygons.push(aL.create(o))}return r[17]>=0&&(e.color=[r[17],r[18],r[19],r[20]]),e};var uL=cL;const bg=_t,hL=Rt,fL=r=>(bg.isIdentity(r.transforms)||(r.polygons=r.polygons.map(e=>hL.transform(r.transforms,e)),r.transforms=bg.create()),r);var dL=fL;const pL=dL,mL=r=>pL(r).polygons;var _u=mL;const gL=Rt,vL=wu,bL=_u,xL=r=>{const t=bL(r).map(n=>gL.invert(n));return vL(t)};var wL=xL;const yL=r=>!!(r&&typeof r=="object"&&"polygons"in r&&"transforms"in r&&Array.isArray(r.polygons)&&"length"in r.transforms);var Ox=yL;const _L=Rt,SL=_u,CL=r=>SL(r).map(n=>_L.toPoints(n));var ML=CL;const EL=Rt,AL=_u,PL=r=>{const e=AL(r);let t="geom3 ("+e.length+` polygons):
`;return e.forEach(n=>{t+="  "+EL.toString(n)+`
`}),t};var TL=PL;const LL=Rt,IL=r=>{const e=r.polygons,t=r.transforms,n=e.length,i=e.reduce((u,f)=>u+f.vertices.length,0);let s=[-1,-1,-1,-1];r.color&&(s=r.color);const o=new Float32Array(1+16+4+1+n+i*3);o[0]=1,o[1]=t[0],o[2]=t[1],o[3]=t[2],o[4]=t[3],o[5]=t[4],o[6]=t[5],o[7]=t[6],o[8]=t[7],o[9]=t[8],o[10]=t[9],o[11]=t[10],o[12]=t[11],o[13]=t[12],o[14]=t[13],o[15]=t[14],o[16]=t[15],o[17]=s[0],o[18]=s[1],o[19]=s[2],o[20]=s[3],o[21]=i;let a=22,c=a+n;return e.forEach(u=>{const f=LL.toPoints(u);o[a]=f.length,a++;for(let d=0;d<f.length;d++){const m=f[d];o[c+0]=m[0],o[c+1]=m[1],o[c+2]=m[2],c+=3}}),o};var DL=IL;const xg=_t,RL=(r,e)=>{const t=xg.multiply(xg.create(),r,e.transforms);return Object.assign({},e,{transforms:t})};var kL=RL;const FL=Rt,OL=Ox,BL=r=>{if(!OL(r))throw new Error("invalid geom3 structure");if(r.polygons.forEach(FL.validate),NL(r),!r.transforms.every(Number.isFinite))throw new Error(`geom3 invalid transforms ${r.transforms}`)},NL=r=>{const e=new Map;r.polygons.forEach(({vertices:n})=>{n.forEach((i,s)=>{const o=`${i}`,a=`${n[(s+1)%n.length]}`,c=`${o}/${a}`,u=e.has(c)?e.get(c):0;e.set(c,u+1)})});const t=[];if(e.forEach((n,i)=>{const s=i.split("/").reverse().join("/"),o=e.get(s);n!==o&&t.push(i.replace("/"," -> "))}),t.length>0)throw new Error(`non-manifold edges ${t.length}
${t.join(`
`)}`)};var UL=BL,vt={clone:P9,create:wu,fromPoints:iL,fromCompactBinary:uL,invert:wL,isA:Ox,toPoints:ML,toPolygons:_u,toString:TL,toCompactBinary:DL,transform:kL,validate:UL};const VL=r=>Object.assign({},r);var Yf=VL;const{EPS:wg}=Tt,zL=bt,$L=Yf,GL=r=>{if(r.isClosed)return r;const e=$L(r);if(e.isClosed=!0,e.points.length>1){const t=e.points,n=t[0];let i=t[t.length-1];for(;zL.distance(n,i)<wg*wg&&(t.pop(),t.length!==1);)i=t[t.length-1]}return e};var Bx=GL;const HL=_t,WL=r=>(r===void 0&&(r=[]),{points:r,isClosed:!1,transforms:HL.create()});var Su=WL;const{EPS:yg}=Tt,_g=bt,qL=Bx,XL=Su,YL=(r,e)=>{const t={closed:!1};let{closed:n}=Object.assign({},t,r),i=XL();if(i.points=e.map(s=>_g.clone(s)),i.points.length>1){const s=i.points[0],o=i.points[i.points.length-1];_g.distance(s,o)<yg*yg&&(n=!0)}return n===!0&&(i=qL(i)),i};var jf=YL;const Sg=_t,Cg=bt,jL=r=>(Sg.isIdentity(r.transforms)||(r.points=r.points.map(e=>Cg.transform(Cg.create(),e,r.transforms)),r.transforms=Sg.create()),r);var ZL=jL;const KL=ZL,JL=r=>KL(r).points;var na=JL;const{TAU:cc}=Tt,cn=bt,QL=jf,eI=na,tI=(r,e)=>{const t={radius:[0,0],xaxisrotation:0,clockwise:!1,large:!1,segments:16};let{endpoint:n,radius:i,xaxisrotation:s,clockwise:o,large:a,segments:c}=Object.assign({},t,r);if(!Array.isArray(n))throw new Error("endpoint must be an array of X and Y values");if(n.length<2)throw new Error("endpoint must contain X and Y values");if(n=cn.clone(n),!Array.isArray(i))throw new Error("radius must be an array of X and Y values");if(i.length<2)throw new Error("radius must contain X and Y values");if(c<4)throw new Error("segments must be four or more");const u=1e5;if(e.isClosed)throw new Error("the given path cannot be closed");const f=eI(e);if(f.length<1)throw new Error("the given path must contain one or more points (as the starting point for the arc)");let d=i[0],m=i[1];const v=f[f.length-1];d=Math.round(d*u)/u,m=Math.round(m*u)/u,n=cn.fromValues(Math.round(n[0]*u)/u,Math.round(n[1]*u)/u);const S=!o;let x=[];if(d===0||m===0)x.push(n);else{d=Math.abs(d),m=Math.abs(m);const A=s,T=Math.cos(A),E=Math.sin(A),P=cn.subtract(cn.create(),v,n);cn.scale(P,P,.5);const y=Math.round((T*P[0]+E*P[1])*u)/u,k=Math.round((-E*P[0]+T*P[1])*u)/u,F=cn.fromValues(y,k),M=F[0]*F[0]/(d*d)+F[1]*F[1]/(m*m);if(M>1){const K=Math.sqrt(M);d*=K,m*=K,d=Math.round(d*u)/u,m=Math.round(m*u)/u}let R=Math.sqrt((d*d*m*m-d*d*F[1]*F[1]-m*m*F[0]*F[0])/(d*d*F[1]*F[1]+m*m*F[0]*F[0]));S===a&&(R=-R);const O=cn.fromValues(d*F[1]/m,-m*F[0]/d);cn.scale(O,O,R);let z=cn.fromValues(T*O[0]-E*O[1],E*O[0]+T*O[1]);z=cn.add(z,z,cn.scale(cn.create(),cn.add(cn.create(),v,n),.5));const Q=cn.fromValues((F[0]-O[0])/d,(F[1]-O[1])/m),G=cn.fromValues((-F[0]-O[0])/d,(-F[1]-O[1])/m),V=cn.angleRadians(Q);let j=cn.angleRadians(G)-V;j=j%cc,!S&&j>0?j-=cc:S&&j<0&&(j+=cc);let ge=Math.ceil(Math.abs(j)/cc*c)+1;ge<1&&(ge=1);for(let K=1;K<ge;K++){const Ee=V+K/ge*j,Pe=Math.cos(Ee),re=Math.sin(Ee),ae=cn.fromValues(T*d*Pe-E*m*re,E*d*Pe+T*m*re);cn.add(ae,ae,z),x.push(ae)}ge&&x.push(r.endpoint)}return x=f.concat(x),QL({},x)};var nI=tI;const rI=jf,iI=na,{equals:sI}=bt,oI=(...r)=>{let e=!1,t=[];return r.forEach((n,i)=>{const s=iI(n).slice();if(t.length>0&&s.length>0&&sI(s[0],t[t.length-1])&&s.shift(),s.length>0&&e)throw new Error(`Cannot concatenate to a closed path; check the ${i}th path`);e=n.isClosed,t=t.concat(s)}),rI({closed:e},t)};var Nx=oI;const aI=Nx,lI=Su,cI=(r,e)=>aI(e,lI(r));var Ux=cI;const{TAU:uI}=Tt,rr=bt,hI=bt,fI=Ux,dI=na,pI=(r,e)=>{const t={segments:16};let{controlPoints:n,segments:i}=Object.assign({},t,r);if(!Array.isArray(n))throw new Error("controlPoints must be an array of one or more points");if(n.length<1)throw new Error("controlPoints must be an array of one or more points");if(i<4)throw new Error("segments must be four or more");if(e.isClosed)throw new Error("the given geometry cannot be closed");const s=dI(e);if(s.length<1)throw new Error("the given path must contain one or more points (as the starting point for the bezier curve)");if(n=n.slice(),n[0]===null){if(n.length<2)throw new Error("a null control point must be passed with one more control points");let k=s[s.length-2];if("lastBezierControlPoint"in e&&(k=e.lastBezierControlPoint),!Array.isArray(k))throw new Error("the given path must contain TWO or more points if given a null control point");const F=rr.scale(rr.create(),s[s.length-1],2);rr.subtract(F,F,k),n[0]=F}n.unshift(s[s.length-1]);const a=n.length-1,c=[];let u=1;for(let k=0;k<=a;++k)k>0&&(u*=k),c.push(u);const f=[];for(let k=0;k<=a;++k){const F=c[a]/(c[k]*c[a-k]);f.push(F)}const d=rr.create(),m=rr.create(),v=hI.create(),S=k=>{let F=1,M=Math.pow(1-k,a);const R=k!==1?1/(1-k):1,O=rr.create();for(let z=0;z<=a;++z){z===a&&(M=1);const Q=f[z]*F*M,G=rr.scale(d,n[z],Q);rr.add(O,O,G),F*=k,M*=R}return O},x=[],w=[],A=a+1;for(let k=0;k<A;++k){const F=k/(A-1),M=S(F);x.push(M),w.push(F)}let T=1;const E=uI/i,P=Math.sin(E);for(;T<x.length-1;){const k=rr.subtract(d,x[T],x[T-1]);rr.normalize(k,k);const F=rr.subtract(m,x[T+1],x[T]);rr.normalize(F,F);const M=rr.cross(v,k,F);if(Math.abs(M[2])>P){const R=w[T-1],O=w[T+1],z=R+(O-R)*1/3,Q=R+(O-R)*2/3,G=S(z),V=S(Q);x.splice(T,1,G,V),w.splice(T,1,z,Q),T--,T<1&&(T=1)}else++T}x.shift();const y=fI(x,e);return y.lastBezierControlPoint=n[n.length-2],y};var mI=pI;const gI=bt,Mg=na,vI=(r,e)=>{if(r.isClosed!==e.isClosed||r.points.length!==e.points.length)return!1;const t=Mg(r),n=Mg(e),i=t.length;let s=0;do{let o=!1;for(let a=0;a<i;a++)if(!gI.equals(t[a],n[(a+s)%i])){o=!0;break}if(o===!1)return!0;if(!r.isClosed)return!1}while(++s<i);return!1};var bI=vI;const xI=_t,wI=bt,yI=Su,_I=r=>{if(r[0]!==2)throw new Error("invalid compact binary data");const e=yI();e.transforms=xI.clone(r.slice(1,17)),e.isClosed=!!r[17];for(let t=22;t<r.length;t+=2){const n=wI.fromValues(r[t],r[t+1]);e.points.push(n)}return r[18]>=0&&(e.color=[r[18],r[19],r[20],r[21]]),e};var SI=_I;const CI=r=>!!(r&&typeof r=="object"&&"points"in r&&"transforms"in r&&"isClosed"in r&&Array.isArray(r.points)&&"length"in r.transforms);var Vx=CI;const MI=Yf,EI=r=>{const e=MI(r);return e.points=r.points.slice().reverse(),e};var AI=EI;const PI=bt,TI=na,LI=r=>{const e=TI(r);let t="path ("+e.length+" points, "+r.isClosed+`):
[
`;return e.forEach(n=>{t+="  "+PI.toString(n)+`,
`}),t+=`]
`,t};var II=LI;const DI=r=>{const e=r.points,t=r.transforms;let n=[-1,-1,-1,-1];r.color&&(n=r.color);const i=new Float32Array(1+16+1+4+e.length*2);i[0]=2,i[1]=t[0],i[2]=t[1],i[3]=t[2],i[4]=t[3],i[5]=t[4],i[6]=t[5],i[7]=t[6],i[8]=t[7],i[9]=t[8],i[10]=t[9],i[11]=t[10],i[12]=t[11],i[13]=t[12],i[14]=t[13],i[15]=t[14],i[16]=t[15],i[17]=r.isClosed?1:0,i[18]=n[0],i[19]=n[1],i[20]=n[2],i[21]=n[3];for(let s=0;s<e.length;s++){const o=s*2+22,a=e[s];i[o]=a[0],i[o+1]=a[1]}return i};var RI=DI;const Eg=_t,kI=(r,e)=>{const t=Eg.multiply(Eg.create(),r,e.transforms);return Object.assign({},e,{transforms:t})};var FI=kI;const OI=bt,BI=Vx,NI=r=>{if(!BI(r))throw new Error("invalid path2 structure");if(r.points.length>1){for(let e=0;e<r.points.length;e++)if(OI.equals(r.points[e],r.points[(e+1)%r.points.length]))throw new Error(`path2 duplicate points ${r.points[e]}`)}if(r.points.forEach(e=>{if(!e.every(Number.isFinite))throw new Error(`path2 invalid point ${e}`)}),!r.transforms.every(Number.isFinite))throw new Error(`path2 invalid transforms ${r.transforms}`)};var UI=NI,Kn={appendArc:nI,appendBezier:mI,appendPoints:Ux,clone:Yf,close:Bx,concat:Nx,create:Su,equals:bI,fromPoints:jf,fromCompactBinary:SI,isA:Vx,reverse:AI,toPoints:na,toString:II,toCompactBinary:RI,transform:FI,validate:UI};const VI=kt,zI=vt,$I=Kn,GI=r=>{let e;for(const t of r){let n=0;if(VI.isA(t)&&(n=1),zI.isA(t)&&(n=2),$I.isA(t)&&(n=3),e&&n!==e)return!1;e=n}return!0};var Cu=GI;const HI=r=>{let e=0;for(let t=0;t<r.length;t++){const n=(t+1)%r.length;e+=r[t][0]*r[n][1],e-=r[n][0]*r[t][1]}return e/2};var zx=HI;const WI=zx,qI=r=>WI(r.vertices);var $x=qI;const XI=r=>((r===void 0||r.length<3)&&(r=[]),{vertices:r});var Gx=XI;const YI=Gx,jI=r=>{const e=r.vertices.slice().reverse();return YI(e)};var Hx=jI;const ZI=$x,KI=Hx,JI=(r,e)=>{if(r.length===0)return 0;const t=e.vertices;return t.length<3?0:(ZI(e)<0&&(e=KI(e)),r.reduce((i,s)=>i+QI(s,t),0)===r.length?1:0)},QI=(r,e)=>{const t=e.length,n=r[0],i=r[1];let s=e[t-1],o=e[0],a=s[1]>i,c=0,u=0;for(let f=t+1;--f;){const d=o[1]>i;if(a!==d){const m=s[0]>n,v=o[0]>n;(m&&v||o[0]-(o[1]-i)*(s[0]-o[0])/(s[1]-o[1])>=n)&&(c=!c)}a=d,s=o,o=e[++u]}return c};var eD=JI,Wx={arePointsInside:eD,create:Gx,flip:Hx,measureArea:$x},qx={geom2:kt,geom3:vt,path2:Kn,poly2:Wx,poly3:Rt};const{EPS:tD}=Tt,nD=(r,e)=>{let t=0;for(let n=0;n<e;n++)t+=r[1][n]-r[0][n];return tD*t/e};var Xx=nD;const rD=Lt,Ur=bt,Da=Ye,Yx=kt,jx=vt,Zx=Kn,Ag=Rt,Ho=new WeakMap,iD=r=>{let e=Ho.get(r);if(e)return e;const t=Zx.toPoints(r);let n;t.length===0?n=Ur.create():n=Ur.clone(t[0]);let i=Ur.clone(n);return t.forEach(s=>{Ur.min(n,n,s),Ur.max(i,i,s)}),n=[n[0],n[1],0],i=[i[0],i[1],0],e=[n,i],Ho.set(r,e),e},sD=r=>{let e=Ho.get(r);if(e)return e;const t=Yx.toPoints(r);let n;t.length===0?n=Ur.create():n=Ur.clone(t[0]);let i=Ur.clone(n);return t.forEach(s=>{Ur.min(n,n,s),Ur.max(i,i,s)}),n=[n[0],n[1],0],i=[i[0],i[1],0],e=[n,i],Ho.set(r,e),e},oD=r=>{let e=Ho.get(r);if(e)return e;const t=jx.toPolygons(r);let n=Da.create();if(t.length>0){const s=Ag.toPoints(t[0]);Da.copy(n,s[0])}let i=Da.clone(n);return t.forEach(s=>{Ag.toPoints(s).forEach(o=>{Da.min(n,n,o),Da.max(i,i,o)})}),n=[n[0],n[1],n[2]],i=[i[0],i[1],i[2]],e=[n,i],Ho.set(r,e),e},aD=(...r)=>{if(r=rD(r),r.length===0)throw new Error("wrong number of arguments");const e=r.map(t=>Zx.isA(t)?iD(t):Yx.isA(t)?sD(t):jx.isA(t)?oD(t):[[0,0,0],[0,0,0]]);return e.length===1?e[0]:e};var Us=aD;const lD=Lt,{geom2:cD,geom3:uD,path2:hD}=qx,Zf=Xx,Kf=Us,fD=r=>Zf(Kf(r),2),dD=r=>Zf(Kf(r),2),pD=r=>Zf(Kf(r),3),mD=(...r)=>{if(r=lD(r),r.length===0)throw new Error("wrong number of arguments");const e=r.map(t=>hD.isA(t)?fD(t):cD.isA(t)?dD(t):uD.isA(t)?pD(t):0);return e.length===1?e[0]:e};var Sl=mD;const Pg=bt,gD=kt,vD=(r,e)=>{if(e.vertices.length<4)return null;const t=[],n=e.vertices.filter((o,a)=>o[2]>0?(t.push(a),!0):!1);if(n.length!==2)throw new Error("Assertion failed: fromFakePolygon: not enough points found");const i=n.map(o=>{const a=Math.round(o[0]/r)*r+0,c=Math.round(o[1]/r)*r+0;return Pg.fromValues(a,c)});if(Pg.equals(i[0],i[1]))return null;const s=t[1]-t[0];if(s===1||s===3)s===1&&i.reverse();else throw new Error("Assertion failed: fromFakePolygon: unknown index ordering");return i},bD=(r,e)=>{const t=e.map(n=>vD(r,n)).filter(n=>n!==null);return gD.create(t)};var Jf=bD;const Di=Ye,xD=kt,wD=vt,yD=Rt,_D=(r,e,t)=>{const n=[Di.fromVec2(Di.create(),t[0],r),Di.fromVec2(Di.create(),t[1],r),Di.fromVec2(Di.create(),t[1],e),Di.fromVec2(Di.create(),t[0],e)];return yD.create(n)},SD=(r,e)=>{const n=xD.toSides(e).map(s=>_D(r.z0,r.z1,s));return wD.create(n)};var Qf=SD;const{NEPS:lh}=Tt,CD=(r,e)=>Math.abs(r[0]-e[0])<=lh&&Math.abs(r[1]-e[1])<=lh&&Math.abs(r[2]-e[2])<=lh;var Kx=CD;const MD=()=>[0,1,0];var ed=MD;const ED=ed,AD=r=>{const e=ED();return e[0]=r[0],e[1]=r[1],e[2]=r[2],e};var PD=AD;const ch=bt,TD=r=>{const e=ch.normal(ch.create(),r);return ch.negate(e,e),e};var td=TD;const Tg=bt,LD=r=>Tg.scale(Tg.create(),r,r[2]);var Mu=LD;const ID=bt,DD=td,RD=Mu,kD=(r,e)=>{const t=RD(r),n=DD(r),i=(n[1]-t[1])/(n[0]-t[0]),s=t[1]-i*t[0],o=-1/i,c=(e[1]-o*e[0]-s)/(i-o),u=i*c+s;return ID.fromValues(c,u)};var FD=kD;const OD=(r,e)=>(r[0]=e[0],r[1]=e[1],r[2]=e[2],r);var Jx=OD;const BD=bt,ND=(r,e)=>{let t=BD.dot(e,r);return t=Math.abs(t-r[2]),t};var UD=ND;const VD=(r,e)=>r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2];var zD=VD;const Ra=bt,$D=(r,e,t)=>{const n=Ra.subtract(Ra.create(),t,e);Ra.normal(n,n),Ra.normalize(n,n);const i=Ra.dot(e,n);return r[0]=n[0],r[1]=n[1],r[2]=i,r};var Qx=$D;const GD=ed,HD=(r,e,t)=>{const n=GD();return n[0]=r,n[1]=e,n[2]=t,n};var e2=HD;const WD=(r,e,t)=>{let n=t-r[1],i=e[1]-r[1];i<0&&(n=-n,i=-i);let s;return n<=0?s=0:n>=i?s=1:i<1e-10?s=.5:s=n/i,r[0]+s*(e[0]-r[0])};var t2=WD;const qD=(r,e,t,n)=>{if(r[0]===e[0]&&r[1]===e[1]||t[0]===n[0]&&t[1]===n[1])return;const i=(n[1]-t[1])*(e[0]-r[0])-(n[0]-t[0])*(e[1]-r[1]);if(Math.abs(i)<Number.MIN_VALUE)return;const s=((n[0]-t[0])*(r[1]-t[1])-(n[1]-t[1])*(r[0]-t[0]))/i,o=((e[0]-r[0])*(r[1]-t[1])-(e[1]-r[1])*(r[0]-t[0]))/i;if(s<0||s>1||o<0||o>1)return;const a=r[0]+s*(e[0]-r[0]),c=r[1]+s*(e[1]-r[1]);return[a,c]};var XD=qD;const YD=(r,e,t,n,i,s)=>{const a=1/(r*n-e*t);let c=i*n-e*s,u=-i*t+r*s;return c*=a,u*=a,[c,u]};var jD=YD,n2={aboutEqualNormals:Kx,area:zx,cos:Cn.cos,interpolateBetween2DPointsForY:t2,intersect:XD,sin:Cn.sin,solve2Linear:jD};const ZD=bt,{solve2Linear:KD}=n2,JD=(r,e)=>{const t=KD(r[0],r[1],e[0],e[1],r[2],e[2]);return ZD.clone(t)};var QD=JD;const Lg=bt,eR=Jx,tR=e2,nR=(r,e)=>{const t=Lg.negate(Lg.create(),e),n=-e[2];return eR(r,tR(t[0],t[1],n))};var rR=nR;const iR=r=>`line2: (${r[0].toFixed(7)}, ${r[1].toFixed(7)}, ${r[2].toFixed(7)})`;var sR=iR;const Ig=bt,oR=Qx,aR=Mu,lR=td,cR=(r,e,t)=>{const n=aR(e),i=lR(e);return Ig.transform(n,n,t),Ig.transform(i,i,t),oR(r,n,i)};var uR=cR;const hR=Mu,fR=(r,e)=>{let t=(r[2]-r[1]*e)/r[0];return Number.isNaN(t)&&(t=hR(r)[0]),t};var dR=fR,pR={clone:PD,closestPoint:FD,copy:Jx,create:ed,direction:td,distanceToPoint:UD,equals:zD,fromPoints:Qx,fromValues:e2,intersectPointOfLines:QD,origin:Mu,reverse:rR,toString:sR,transform:uR,xAtY:dR};const Dg=_t,mR=bt,un=Ye,Os=function(r,e){arguments.length<2&&(e=un.orthogonal(un.create(),r)),this.v=un.normalize(un.create(),un.cross(un.create(),r,e)),this.u=un.cross(un.create(),this.v,r),this.plane=r,this.planeorigin=un.scale(un.create(),r,r[3])};Os.GetCartesian=function(r,e){const t=r+"/"+e;let n,i;if(t==="X/Y")n=[0,0,1],i=[1,0,0];else if(t==="Y/-X")n=[0,0,1],i=[0,1,0];else if(t==="-X/-Y")n=[0,0,1],i=[-1,0,0];else if(t==="-Y/X")n=[0,0,1],i=[0,-1,0];else if(t==="-X/Y")n=[0,0,-1],i=[-1,0,0];else if(t==="-Y/-X")n=[0,0,-1],i=[0,-1,0];else if(t==="X/-Y")n=[0,0,-1],i=[1,0,0];else if(t==="Y/X")n=[0,0,-1],i=[0,1,0];else if(t==="X/Z")n=[0,-1,0],i=[1,0,0];else if(t==="Z/-X")n=[0,-1,0],i=[0,0,1];else if(t==="-X/-Z")n=[0,-1,0],i=[-1,0,0];else if(t==="-Z/X")n=[0,-1,0],i=[0,0,-1];else if(t==="-X/Z")n=[0,1,0],i=[-1,0,0];else if(t==="-Z/-X")n=[0,1,0],i=[0,0,-1];else if(t==="X/-Z")n=[0,1,0],i=[1,0,0];else if(t==="Z/X")n=[0,1,0],i=[0,0,1];else if(t==="Y/Z")n=[1,0,0],i=[0,1,0];else if(t==="Z/-Y")n=[1,0,0],i=[0,0,1];else if(t==="-Y/-Z")n=[1,0,0],i=[0,-1,0];else if(t==="-Z/Y")n=[1,0,0],i=[0,0,-1];else if(t==="-Y/Z")n=[-1,0,0],i=[0,-1,0];else if(t==="-Z/-Y")n=[-1,0,0],i=[0,0,-1];else if(t==="Y/-Z")n=[-1,0,0],i=[0,1,0];else if(t==="Z/Y")n=[-1,0,0],i=[0,0,1];else throw new Error("OrthoNormalBasis.GetCartesian: invalid combination of axis identifiers. Should pass two string arguments from [X,Y,Z,-X,-Y,-Z], being two different axes.");return new Os(new Plane(new Vector3D(n),0),new Vector3D(i))};Os.Z0Plane=function(){const r=new Plane(new Vector3D([0,0,1]),0);return new Os(r,new Vector3D([1,0,0]))};Os.prototype={getProjectionMatrix:function(){return Dg.fromValues(this.u[0],this.v[0],this.plane[0],0,this.u[1],this.v[1],this.plane[1],0,this.u[2],this.v[2],this.plane[2],0,0,0,-this.plane[3],1)},getInverseProjectionMatrix:function(){const r=un.scale(un.create(),this.plane,this.plane[3]);return Dg.fromValues(this.u[0],this.u[1],this.u[2],0,this.v[0],this.v[1],this.v[2],0,this.plane[0],this.plane[1],this.plane[2],0,r[0],r[1],r[2],1)},to2D:function(r){return mR.fromValues(un.dot(r,this.u),un.dot(r,this.v))},to3D:function(r){const e=un.scale(un.create(),this.u,r[0]),t=un.scale(un.create(),this.v,r[1]),n=un.add(e,e,this.planeorigin);return un.add(t,t,n)},line3Dto2D:function(r){const e=r.point,t=r.direction.plus(e),n=this.to2D(e),i=this.to2D(t);return Line2D.fromPoints(n,i)},line2Dto3D:function(r){const e=r.origin(),t=r.direction().plus(e),n=this.to3D(e),i=this.to3D(t);return Line3D.fromPoints(n,i)},transform:function(r){const e=this.plane.transform(r),t=this.u.transform(r),n=new Vector3D(0,0,0).transform(r),i=t.minus(n);return new Os(e,i)}};var gR=Os;const vR=r=>r*.017453292519943295;var bR=vR;const xR=(r,e)=>r-e;var wR=xR;const yR=(r,e,t)=>{let n=0,i=r.length;for(;i>n;){const s=Math.floor((n+i)/2),o=r[s];t(e,o)>0?n=s+1:i=s}r.splice(n,0,e)};var _R=yR;const{TAU:Rg}=Tt,SR=(r,e,t)=>{const n=e>0?r*Rg/e:0,i=t>0?Rg/t:0;return Math.ceil(Math.max(n,i,4))};var CR=SR;const MR=r=>r*57.29577951308232;var ER=MR,AR={areAllShapesTheSameType:Cu,degToRad:bR,flatten:Lt,fnNumberSort:wR,insertSorted:_R,radiusToSegments:CR,radToDeg:ER};const{EPS:ci}=Tt,Ri=pR,Sr=bt,PR=gR,bo=t2,{insertSorted:TR,fnNumberSort:LR}=AR,kg=Rt,IR=r=>{if(r.length<2)return r;const e=[],t=r.length,n=kg.plane(r[0]),i=new PR(n),s=[],o=[],a=new Map,c=new Map,u=new Map,f=10/ci;for(let S=0;S<t;S++){const x=r[S];let w=[],A=x.vertices.length,T=-1;if(A>0){let E,P;for(let y=0;y<A;y++){let k=i.to2D(x.vertices[y]);const F=Math.floor(k[1]*f);let M;u.has(F)?M=u.get(F):u.has(F+1)?M=u.get(F+1):u.has(F-1)?M=u.get(F-1):(M=k[1],u.set(F,k[1])),k=Sr.fromValues(k[0],M),w.push(k);const R=k[1];(y===0||R<E)&&(E=R,T=y),(y===0||R>P)&&(P=R);let O=c.get(R);O||(O={},c.set(R,O)),O[S]=!0}if(E>=P)w=[],A=0,T=-1;else{let y=a.get(E);y||(y=[],a.set(E,y)),y.push(S)}}w.reverse(),T=A-T-1,s.push(w),o.push(T)}const d=[];c.forEach((S,x)=>d.push(x)),d.sort(LR);let m=[],v=[];for(let S=0;S<d.length;S++){const x=[],w=d[S],A=c.get(w);for(let E=0;E<m.length;++E){const P=m[E],y=P.polygonindex;if(A[y]){const k=s[y],F=k.length;let M=P.leftvertexindex,R=P.rightvertexindex;for(;;){let z=M+1;if(z>=F&&(z=0),k[z][1]!==w)break;M=z}let O=R-1;if(O<0&&(O=F-1),k[O][1]===w&&(R=O),M!==P.leftvertexindex&&M===R)m.splice(E,1),--E;else{P.leftvertexindex=M,P.rightvertexindex=R,P.topleft=k[M],P.topright=k[R];let z=M+1;z>=F&&(z=0),P.bottomleft=k[z];let Q=R-1;Q<0&&(Q=F-1),P.bottomright=k[Q]}}}let T;if(S>=d.length-1)m=[],T=null;else{T=Number(d[S+1]);const E=.5*(w+T),P=a.get(w);for(const y in P){const k=P[y],F=s[k],M=F.length,R=o[k];let O=R;for(;;){let q=O+1;if(q>=M&&(q=0),F[q][1]!==w||q===R)break;O=q}let z=R;for(;;){let q=z-1;if(q<0&&(q=M-1),F[q][1]!==w||q===O)break;z=q}let Q=O+1;Q>=M&&(Q=0);let G=z-1;G<0&&(G=M-1);const V={polygonindex:k,leftvertexindex:O,rightvertexindex:z,topleft:F[O],topright:F[z],bottomleft:F[Q],bottomright:F[G]};TR(m,V,(q,j)=>{const ge=bo(q.topleft,q.bottomleft,E),K=bo(j.topleft,j.bottomleft,E);return ge>K?1:ge<K?-1:0})}}for(const E in m){const P=m[E];let y=bo(P.topleft,P.bottomleft,w);const k=Sr.fromValues(y,w);y=bo(P.topright,P.bottomright,w);const F=Sr.fromValues(y,w);y=bo(P.topleft,P.bottomleft,T);const M=Sr.fromValues(y,T);y=bo(P.topright,P.bottomright,T);const R=Sr.fromValues(y,T),O={topleft:k,topright:F,bottomleft:M,bottomright:R,leftline:Ri.fromPoints(Ri.create(),k,M),rightline:Ri.fromPoints(Ri.create(),R,F)};if(x.length>0){const z=x[x.length-1],Q=Sr.distance(O.topleft,z.topright),G=Sr.distance(O.bottomleft,z.bottomright);Q<ci&&G<ci&&(O.topleft=z.topleft,O.leftline=z.leftline,O.bottomleft=z.bottomleft,x.splice(x.length-1,1))}x.push(O)}if(S>0){const E=new Set,P=new Set;for(let y=0;y<x.length;y++){const k=x[y];for(let F=0;F<v.length;F++)if(!P.has(F)){const M=v[F];if(Sr.distance(M.bottomleft,k.topleft)<ci&&Sr.distance(M.bottomright,k.topright)<ci){P.add(F);const R=Ri.direction(k.leftline),O=Ri.direction(M.leftline),z=R[0]-O[0],Q=Ri.direction(k.rightline),G=Ri.direction(M.rightline),V=Q[0]-G[0],q=Math.abs(z)<ci,j=Math.abs(V)<ci,ge=q||z>=0,K=j||V>=0;ge&&K&&(k.outpolygon=M.outpolygon,k.leftlinecontinues=q,k.rightlinecontinues=j,E.add(F));break}}}for(let y=0;y<v.length;y++)if(!E.has(y)){const k=v[y];k.outpolygon.rightpoints.push(k.bottomright),Sr.distance(k.bottomright,k.bottomleft)>ci&&k.outpolygon.leftpoints.push(k.bottomleft),k.outpolygon.leftpoints.reverse();const M=k.outpolygon.rightpoints.concat(k.outpolygon.leftpoints).map(O=>i.to3D(O)),R=kg.fromPointsAndPlane(M,n);R.vertices.length&&e.push(R)}}for(let E=0;E<x.length;E++){const P=x[E];P.outpolygon?(P.leftlinecontinues||P.outpolygon.leftpoints.push(P.topleft),P.rightlinecontinues||P.outpolygon.rightpoints.push(P.topright)):(P.outpolygon={leftpoints:[],rightpoints:[]},P.outpolygon.leftpoints.push(P.topleft),Sr.distance(P.topleft,P.topright)>ci&&P.outpolygon.rightpoints.push(P.topright))}v=x}return e};var DR=IR;const Fg=vt,Og=Rt,RR=Kx,kR=DR,FR=(r,e)=>Math.abs(r[3]-e[3])<15e-8?RR(r,e):!1,OR=r=>{if(r.isRetesselated)return r;const e=Fg.toPolygons(r),t=[];e.forEach(s=>{const o=t.find(a=>FR(a[0],Og.plane(s)));o?o[1].push(s):t.push([Og.plane(s),[s]])});let n=[];t.forEach(s=>{const o=s[1],a=kR(o);n=n.concat(a)});const i=Fg.create(n);return i.isRetesselated=!0,i};var nd=OR;const{EPS:xo}=Tt,Bg=Us,BR=(r,e)=>{if(r.polygons.length===0||e.polygons.length===0)return!1;const t=Bg(r),n=t[0],i=t[1],s=Bg(e),o=s[0],a=s[1];return!(o[0]-i[0]>xo||n[0]-a[0]>xo||o[1]-i[1]>xo||n[1]-a[1]>xo||o[2]-i[2]>xo||n[2]-a[2]>xo)};var rd=BR;const Ng=Wr,NR=Rt;let lf=class{constructor(e){this.plane=null,this.front=null,this.back=null,this.polygontreenodes=[],this.parent=e}invert(){const e=[this];let t;for(let n=0;n<e.length;n++){t=e[n],t.plane&&(t.plane=Ng.flip(Ng.create(),t.plane)),t.front&&e.push(t.front),t.back&&e.push(t.back);const i=t.front;t.front=t.back,t.back=i}}clipPolygons(e,t){let n={node:this,polygontreenodes:e},i;const s=[];do{if(i=n.node,e=n.polygontreenodes,i.plane){const o=i.plane,a=[],c=[],u=t?a:c,f=e.length;for(let m=0;m<f;m++){const v=e[m];v.isRemoved()||v.splitByPlane(o,u,a,c,a)}i.front&&c.length>0&&s.push({node:i.front,polygontreenodes:c});const d=a.length;if(i.back&&d>0)s.push({node:i.back,polygontreenodes:a});else for(let m=0;m<d;m++)a[m].remove()}n=s.pop()}while(n!==void 0)}clipTo(e,t){let n=this;const i=[];do n.polygontreenodes.length>0&&e.rootnode.clipPolygons(n.polygontreenodes,t),n.front&&i.push(n.front),n.back&&i.push(n.back),n=i.pop();while(n!==void 0)}addPolygonTreeNodes(e){let t={node:this,polygontreenodes:e};const n=[];do{const i=t.node,s=t.polygontreenodes;if(s.length===0){t=n.pop();continue}if(!i.plane){let u=0;u=Math.floor(s.length/2);const f=s[u].getPolygon();i.plane=NR.plane(f)}const o=[],a=[],c=s.length;for(let u=0;u<c;++u)s[u].splitByPlane(i.plane,i.polygontreenodes,a,o,a);o.length>0&&(i.front||(i.front=new lf(i)),c===o.length&&a.length===0?i.front.polygontreenodes=o:n.push({node:i.front,polygontreenodes:o})),a.length>0&&(i.back||(i.back=new lf(i)),c===a.length&&o.length===0?i.back.polygontreenodes=a:n.push({node:i.back,polygontreenodes:a})),t=n.pop()}while(t!==void 0)}};var UR=lf;const wo=Ye,VR=(r,e,t)=>{const n=wo.subtract(wo.create(),t,e);let i=(r[3]-wo.dot(r,e))/wo.dot(r,n);return Number.isNaN(i)&&(i=0),i>1&&(i=1),i<0&&(i=0),wo.scale(n,n,i),wo.add(n,e,n),n};var zR=VR;const{EPS:uc}=Tt,$R=Wr,hc=Ye,uh=Rt,GR=zR,HR=(r,e)=>{const t={type:null,front:null,back:null},n=e.vertices,i=n.length,s=uh.plane(e);if($R.equals(s,r))t.type=0;else{let o=!1,a=!1;const c=[],u=-uc;for(let f=0;f<i;f++){const d=hc.dot(r,n[f])-r[3],m=d<u;c.push(m),d>uc&&(o=!0),d<u&&(a=!0)}if(!o&&!a){const f=hc.dot(r,s);t.type=f>=0?0:1}else if(!a)t.type=2;else if(!o)t.type=3;else{t.type=4;const f=[],d=[];let m=c[0];for(let S=0;S<i;S++){const x=n[S];let w=S+1;w>=i&&(w=0);const A=c[w];if(m===A)m?d.push(x):f.push(x);else{const T=n[w],E=GR(r,x,T);m?(d.push(x),d.push(E),f.push(E)):(f.push(x),f.push(E),d.push(E))}m=A}const v=uc*uc;if(d.length>=3){let S=d[d.length-1];for(let x=0;x<d.length;x++){const w=d[x];hc.squaredDistance(w,S)<v&&(d.splice(x,1),x--),S=w}}if(f.length>=3){let S=f[f.length-1];for(let x=0;x<f.length;x++){const w=f[x];hc.squaredDistance(w,S)<v&&(f.splice(x,1),x--),S=w}}f.length>=3&&(t.front=uh.fromPointsAndPlane(f,s)),d.length>=3&&(t.back=uh.fromPointsAndPlane(d,s))}}return t};var WR=HR;const{EPS:qR}=Tt,XR=Ye,Ug=Rt,YR=WR;let r2=class{constructor(e,t){this.parent=e,this.children=[],this.polygon=t,this.removed=!1}addPolygons(e){if(!this.isRootNode())throw new Error("Assertion failed");const t=this;e.forEach(n=>{t.addChild(n)})}remove(){if(!this.removed){this.removed=!0,this.polygon=null;const e=this.parent.children,t=e.indexOf(this);if(t<0)throw new Error("Assertion failed");e.splice(t,1),this.parent.recursivelyInvalidatePolygon()}}isRemoved(){return this.removed}isRootNode(){return!this.parent}invert(){if(!this.isRootNode())throw new Error("Assertion failed");this.invertSub()}getPolygon(){if(!this.polygon)throw new Error("Assertion failed");return this.polygon}getPolygons(e){let t=[this];const n=[t];let i,s,o,a;for(i=0;i<n.length;++i)for(t=n[i],s=0,o=t.length;s<o;s++)a=t[s],a.polygon?e.push(a.polygon):a.children.length>0&&n.push(a.children)}splitByPlane(e,t,n,i,s){if(this.children.length){const o=[this.children];let a,c,u,f,d;for(a=0;a<o.length;a++)for(d=o[a],c=0,u=d.length;c<u;c++)f=d[c],f.children.length>0?o.push(f.children):f._splitByPlane(e,t,n,i,s)}else this._splitByPlane(e,t,n,i,s)}_splitByPlane(e,t,n,i,s){const o=this.polygon;if(o){const a=Ug.measureBoundingSphere(o),c=a[3]+qR,u=a,f=XR.dot(e,u)-e[3];if(f>c)i.push(this);else if(f<-c)s.push(this);else{const d=YR(e,o);switch(d.type){case 0:t.push(this);break;case 1:n.push(this);break;case 2:i.push(this);break;case 3:s.push(this);break;case 4:if(d.front){const m=this.addChild(d.front);i.push(m)}if(d.back){const m=this.addChild(d.back);s.push(m)}break}}}}addChild(e){const t=new r2(this,e);return this.children.push(t),t}invertSub(){let e=[this];const t=[e];let n,i,s,o;for(n=0;n<t.length;n++)for(e=t[n],i=0,s=e.length;i<s;i++)o=e[i],o.polygon&&(o.polygon=Ug.invert(o.polygon)),o.children.length>0&&t.push(o.children)}recursivelyInvalidatePolygon(){this.polygon=null,this.parent&&this.parent.recursivelyInvalidatePolygon()}clear(){let e=[this];const t=[e];for(let n=0;n<t.length;++n){e=t[n];const i=e.length;for(let s=0;s<i;s++){const o=e[s];o.polygon&&(o.polygon=null),o.parent&&(o.parent=null),o.children.length>0&&t.push(o.children),o.children=[]}}}toString(){let e="",t=[this];const n=[t];let i,s,o,a;for(i=0;i<n.length;++i){t=n[i];const c=" ".repeat(i);for(s=0,o=t.length;s<o;s++)a=t[s],e+=`${c}PolygonTreeNode (${a.isRootNode()}): ${a.children.length}`,a.polygon?e+=`
 ${c}polygon: ${a.polygon.vertices}
`:e+=`
`,a.children.length>0&&n.push(a.children)}return e}};var jR=r2;const ZR=UR,KR=jR;let JR=class{constructor(e){this.polygonTree=new KR,this.rootnode=new ZR(null),e&&this.addPolygons(e)}invert(){this.polygonTree.invert(),this.rootnode.invert()}clipTo(e,t=!1){this.rootnode.clipTo(e,t)}allPolygons(){const e=[];return this.polygonTree.getPolygons(e),e}addPolygons(e){const t=new Array(e.length);for(let n=0;n<e.length;n++)t[n]=this.polygonTree.addChild(e[n]);this.rootnode.addPolygonTreeNodes(t)}clear(){this.polygonTree.clear()}toString(){return"Tree: "+this.polygonTree.toString("")}};var QR=JR,id={Tree:QR};const fc=vt,ek=rd,{Tree:Vg}=id,tk=(r,e)=>{if(!ek(r,e))return fc.clone(r);const t=new Vg(fc.toPolygons(r)),n=new Vg(fc.toPolygons(e));t.invert(),t.clipTo(n),n.clipTo(t,!0),t.addPolygons(n.allPolygons()),t.invert();const i=t.allPolygons();return fc.create(i)};var nk=tk;const rk=Lt,ik=nd,sk=nk,ok=(...r)=>{r=rk(r);let e=r.shift();return r.forEach(t=>{e=sk(e,t)}),e=ik(e),e};var i2=ok;const ak=Lt,lk=vt,ck=Sl,uk=Jf,hk=Qf,fk=i2,dk=(...r)=>{r=ak(r);const e=r.map(i=>hk({z0:-1,z1:1},i)),t=fk(e),n=ck(t);return uk(n,lk.toPolygons(t))};var pk=dk;const mk=Lt,gk=Cu,vk=kt,bk=vt,xk=pk,wk=i2,yk=(...r)=>{if(r=mk(r),r.length===0)throw new Error("wrong number of arguments");if(!gk(r))throw new Error("only subtract of the types are supported");const e=r[0];return vk.isA(e)?xk(r):bk.isA(e)?wk(r):e};var s2=yk;const Uo=vt,_k=rd,{Tree:zg}=id,Sk=(r,e)=>{if(!_k(r,e))return Ck(r,e);const t=new zg(Uo.toPolygons(r)),n=new zg(Uo.toPolygons(e));t.clipTo(n,!1),n.clipTo(t),n.invert(),n.clipTo(t),n.invert();const i=t.allPolygons().concat(n.allPolygons());return Uo.create(i)},Ck=(r,e)=>{let t=Uo.toPolygons(r);return t=t.concat(Uo.toPolygons(e)),Uo.create(t)};var Mk=Sk;const Ek=Lt,Ak=nd,Pk=Mk,Tk=(...r)=>{r=Ek(r);let e;for(e=1;e<r.length;e+=2)r.push(Pk(r[e-1],r[e]));let t=r[e-1];return t=Ak(t),t};var o2=Tk;const Lk=Lt,Ik=vt,Dk=Sl,Rk=Jf,kk=Qf,Fk=o2,Ok=(...r)=>{r=Lk(r);const e=r.map(i=>kk({z0:-1,z1:1},i)),t=Fk(e),n=Dk(t);return Rk(n,Ik.toPolygons(t))};var Bk=Ok;const Nk=Lt,Uk=Cu,Vk=kt,zk=vt,$k=Bk,Gk=o2,Hk=(...r)=>{if(r=Nk(r),r.length===0)throw new Error("wrong number of arguments");if(!Uk(r))throw new Error("only unions of the same type are supported");const e=r[0];return Vk.isA(e)?$k(r):zk.isA(e)?Gk(r):e};var a2=Hk;const Wk=(r,e,t)=>{for(r=r.slice();r.length<t;)r.push(e);return r};var qk=Wk;const Xk=Lt,Yk=xx,jk=bx,Zk=Us,Kk=(...r)=>{if(r=Xk(r),r.length===0)throw new Error("measureAggregateBoundingBox: no geometries supplied");const e=Zk(r);if(r.length===1)return e;const t=[[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],[-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE]];return e.reduce((n,i)=>(n=[Yk(n[0],n[0],i[0]),jk(n[1],n[1],i[1])],n),t)};var sd=Kk;const Jk=Lt,$g=_t,Gg=kt,Hg=vt,Wg=Kn,Eu=(r,...e)=>{if(!Array.isArray(r))throw new Error("offset must be an array");if(e=Jk(e),e.length===0)throw new Error("wrong number of arguments");for(r=r.slice();r.length<3;)r.push(0);const t=$g.fromTranslation($g.create(),r),n=e.map(i=>Wg.isA(i)?Wg.transform(t,i):Gg.isA(i)?Gg.transform(t,i):Hg.isA(i)?Hg.transform(t,i):i);return n.length===1?n[0]:n},Qk=(r,...e)=>Eu([r,0,0],e),eF=(r,...e)=>Eu([0,r,0],e),tF=(r,...e)=>Eu([0,0,r],e);var bs={translate:Eu,translateX:Qk,translateY:eF,translateZ:tF};const nF=Lt,qg=qk,l2=sd,{translate:rF}=bs,iF=r=>{if(!Array.isArray(r.modes)||r.modes.length>3)throw new Error("align(): modes must be an array of length <= 3");if(r.modes=qg(r.modes,"none",3),r.modes.filter(e=>["center","max","min","none"].includes(e)).length!==3)throw new Error('align(): all modes must be one of "center", "max" or "min"');if(!Array.isArray(r.relativeTo)||r.relativeTo.length>3)throw new Error("align(): relativeTo must be an array of length <= 3");if(r.relativeTo=qg(r.relativeTo,0,3),r.relativeTo.filter(e=>Number.isFinite(e)||e==null).length!==3)throw new Error("align(): all relativeTo values must be a number, or null.");if(typeof r.grouped!="boolean")throw new Error("align(): grouped must be a boolean value.");return r},sF=(r,e,t)=>{for(let n=0;n<3;n++)r[n]==null&&(e[n]==="center"?r[n]=(t[0][n]+t[1][n])/2:e[n]==="max"?r[n]=t[1][n]:e[n]==="min"&&(r[n]=t[0][n]));return r},Xg=(r,e,t)=>{const n=l2(r),i=[0,0,0];for(let s=0;s<3;s++)e[s]==="center"?i[s]=t[s]-(n[0][s]+n[1][s])/2:e[s]==="max"?i[s]=t[s]-n[1][s]:e[s]==="min"&&(i[s]=t[s]-n[0][s]);return rF(i,r)},oF=(r,...e)=>{r=Object.assign({},{modes:["center","center","min"],relativeTo:[0,0,0],grouped:!1},r),r=iF(r);let{modes:n,relativeTo:i,grouped:s}=r;if(e=nF(e),e.length===0)throw new Error("align(): No geometries were provided to act upon");if(i.filter(o=>o==null).length){const o=l2(e);i=sF(i,n,o)}return s?e=Xg(e,n,i):e=e.map(o=>Xg(o,n,i)),e.length===1?e[0]:e};var c2=oF;const aF=Lt,lF=kt,cF=vt,uF=Kn,hF=Us,{translate:fF}=bs,hh=(r,e)=>{const t={axes:[!0,!0,!0],relativeTo:[0,0,0]},{axes:n,relativeTo:i}=Object.assign({},t,r),s=hF(e),o=[0,0,0];return n[0]&&(o[0]=i[0]-(s[0][0]+(s[1][0]-s[0][0])/2)),n[1]&&(o[1]=i[1]-(s[0][1]+(s[1][1]-s[0][1])/2)),n[2]&&(o[2]=i[2]-(s[0][2]+(s[1][2]-s[0][2])/2)),fF(o,e)},Au=(r,...e)=>{const t={axes:[!0,!0,!0],relativeTo:[0,0,0]},{axes:n,relativeTo:i}=Object.assign({},t,r);if(e=aF(e),e.length===0)throw new Error("wrong number of arguments");if(i.length!==3)throw new Error("relativeTo must be an array of length 3");r={axes:n,relativeTo:i};const s=e.map(o=>uF.isA(o)||lF.isA(o)||cF.isA(o)?hh(r,o):o);return s.length===1?s[0]:s},dF=(...r)=>Au({axes:[!0,!1,!1]},r),pF=(...r)=>Au({axes:[!1,!0,!1]},r),mF=(...r)=>Au({axes:[!1,!1,!0]},r);var dc={center:Au,centerX:dF,centerY:pF,centerZ:mF};const gF=Lt,Yg=_t,jg=Wr,Zg=kt,Kg=vt,Jg=Kn,Pu=(r,...e)=>{const t={origin:[0,0,0],normal:[0,0,1]},{origin:n,normal:i}=Object.assign({},t,r);if(e=gF(e),e.length===0)throw new Error("wrong number of arguments");const s=jg.fromNormalAndPoint(jg.create(),i,n);if(Number.isNaN(s[0]))throw new Error("the given origin and normal do not define a proper plane");const o=Yg.mirrorByPlane(Yg.create(),s),a=e.map(c=>Jg.isA(c)?Jg.transform(o,c):Zg.isA(c)?Zg.transform(o,c):Kg.isA(c)?Kg.transform(o,c):c);return a.length===1?a[0]:a},vF=(...r)=>Pu({normal:[1,0,0]},r),bF=(...r)=>Pu({normal:[0,1,0]},r),xF=(...r)=>Pu({normal:[0,0,1]},r);var Ha={mirror:Pu,mirrorX:vF,mirrorY:bF,mirrorZ:xF};const wF=Lt,Qg=_t,e1=kt,t1=vt,n1=Kn,Tu=(r,...e)=>{if(!Array.isArray(r))throw new Error("angles must be an array");if(e=wF(e),e.length===0)throw new Error("wrong number of arguments");for(r=r.slice();r.length<3;)r.push(0);const t=r[2],n=r[1],i=r[0],s=Qg.fromTaitBryanRotation(Qg.create(),t,n,i),o=e.map(a=>n1.isA(a)?n1.transform(s,a):e1.isA(a)?e1.transform(s,a):t1.isA(a)?t1.transform(s,a):a);return o.length===1?o[0]:o},yF=(r,...e)=>Tu([r,0,0],e),_F=(r,...e)=>Tu([0,r,0],e),SF=(r,...e)=>Tu([0,0,r],e);var Wa={rotate:Tu,rotateX:yF,rotateY:_F,rotateZ:SF};const CF=Lt,r1=_t,i1=kt,s1=vt,o1=Kn,Lu=(r,...e)=>{if(!Array.isArray(r))throw new Error("factors must be an array");if(e=CF(e),e.length===0)throw new Error("wrong number of arguments");for(r=r.slice();r.length<3;)r.push(1);if(r[0]<=0||r[1]<=0||r[2]<=0)throw new Error("factors must be positive");const t=r1.fromScaling(r1.create(),r),n=e.map(i=>o1.isA(i)?o1.transform(t,i):i1.isA(i)?i1.transform(t,i):s1.isA(i)?s1.transform(t,i):i);return n.length===1?n[0]:n},MF=(r,...e)=>Lu([r,1,1],e),EF=(r,...e)=>Lu([1,r,1],e),AF=(r,...e)=>Lu([1,1,r],e);var pc={scale:Lu,scaleX:MF,scaleY:EF,scaleZ:AF};const PF=Lt,a1=kt,l1=vt,c1=Kn,TF=(r,...e)=>{if(e=PF(e),e.length===0)throw new Error("wrong number of arguments");const t=e.map(n=>c1.isA(n)?c1.transform(r,n):a1.isA(n)?a1.transform(r,n):l1.isA(n)?l1.transform(r,n):n);return t.length===1?t[0]:t};var LF=TF,Kt={align:c2,center:dc.center,centerX:dc.centerX,centerY:dc.centerY,centerZ:dc.centerZ,mirror:Ha.mirror,mirrorX:Ha.mirrorX,mirrorY:Ha.mirrorY,mirrorZ:Ha.mirrorZ,rotate:Wa.rotate,rotateX:Wa.rotateX,rotateY:Wa.rotateY,rotateZ:Wa.rotateZ,scale:pc.scale,scaleX:pc.scaleX,scaleY:pc.scaleY,scaleZ:pc.scaleZ,transform:LF,translate:bs.translate,translateX:bs.translateX,translateY:bs.translateY,translateZ:bs.translateZ};function IF(r,e,t,n,i,s){const[o,a]=Ar(i),c={value:{x:i[0],y:i[1]}},u={x:{min:e,max:t,step:n},y:{min:e,max:t,step:n,inverted:!0},label:s},f=r.addInput(c,"value",u);return f.on("change",m=>{a([m.value.x,m.value.y])}),[o,m=>{a(()=>m),c.value={x:m[0],y:m[1]},f.refresh()}]}function u1(r,e,t){return Tf(r,e,{label:t})}function DF(r,e){Array.isArray(r)?e.push(...r):e.push(r)}function h1(r,e){r!==null&&e.push(r)}const RF=Lt,u2=kt,h2=vt,kF=Kn,FF=Rt,Wc=new WeakMap,OF=()=>0,BF=r=>{let e=Wc.get(r);return e||(e=u2.toSides(r).reduce((n,i)=>n+(i[0][0]*i[1][1]-i[0][1]*i[1][0]),0),e*=.5,Wc.set(r,e),e)},NF=r=>{let e=Wc.get(r);return e||(e=h2.toPolygons(r).reduce((n,i)=>n+FF.measureArea(i),0),Wc.set(r,e),e)},UF=(...r)=>{if(r=RF(r),r.length===0)throw new Error("wrong number of arguments");const e=r.map(t=>kF.isA(t)?OF():u2.isA(t)?BF(t):h2.isA(t)?NF(t):0);return e.length===1?e[0]:e};var f2=UF;const VF=Lt,zF=f2,$F=(...r)=>{if(r=VF(r),r.length===0)throw new Error("measureAggregateArea: no geometries supplied");const e=zF(r);if(r.length===1)return e;const t=0;return e.reduce((n,i)=>n+i,t)};var GF=$F;const HF=Lt,WF=sd,qF=Xx,{geom2:XF,geom3:YF,path2:jF}=qx,ZF=(...r)=>{if(r=HF(r),r.length===0)throw new Error("measureAggregateEpsilon: no geometries supplied");const e=WF(r);let t=0;return t=r.reduce((n,i)=>jF.isA(i)||XF.isA(i)?Math.max(n,2):YF.isA(i)?Math.max(n,3):0,t),qF(e,t)};var KF=ZF;const JF=Lt,QF=kt,d2=vt,eO=Kn,tO=Rt,f1=new WeakMap,nO=()=>0,rO=()=>0,iO=r=>{let e=f1.get(r);return e||(e=d2.toPolygons(r).reduce((n,i)=>n+tO.measureSignedVolume(i),0),f1.set(r,e),e)},sO=(...r)=>{if(r=JF(r),r.length===0)throw new Error("wrong number of arguments");const e=r.map(t=>eO.isA(t)?nO():QF.isA(t)?rO():d2.isA(t)?iO(t):0);return e.length===1?e[0]:e};var p2=sO;const oO=Lt,aO=p2,lO=(...r)=>{if(r=oO(r),r.length===0)throw new Error("measureAggregateVolume: no geometries supplied");const e=aO(r);if(r.length===1)return e;const t=0;return e.reduce((n,i)=>n+i,t)};var cO=lO;const uO=Lt,m2=bt,Xn=Ye,g2=kt,v2=vt,b2=Kn,d1=Rt,Wo=new WeakMap,hO=r=>{let e=Wo.get(r);if(e!==void 0)return e;const t=Xn.create();let n=0;const i=b2.toPoints(r);if(i.length>0){let s=0;const o=Xn.create();i.forEach(a=>{Xn.add(t,t,Xn.fromVec2(o,a,0)),s++}),Xn.scale(t,t,1/s),i.forEach(a=>{n=Math.max(n,m2.squaredDistance(t,a))}),n=Math.sqrt(n)}return e=[t,n],Wo.set(r,e),e},fO=r=>{let e=Wo.get(r);if(e!==void 0)return e;const t=Xn.create();let n=0;const i=g2.toSides(r);if(i.length>0){let s=0;const o=Xn.create();i.forEach(a=>{Xn.add(t,t,Xn.fromVec2(o,a[0],0)),s++}),Xn.scale(t,t,1/s),i.forEach(a=>{n=Math.max(n,m2.squaredDistance(t,a[0]))}),n=Math.sqrt(n)}return e=[t,n],Wo.set(r,e),e},dO=r=>{let e=Wo.get(r);if(e!==void 0)return e;const t=Xn.create();let n=0;const i=v2.toPolygons(r);if(i.length>0){let s=0;i.forEach(o=>{d1.toPoints(o).forEach(a=>{Xn.add(t,t,a),s++})}),Xn.scale(t,t,1/s),i.forEach(o=>{d1.toPoints(o).forEach(a=>{n=Math.max(n,Xn.squaredDistance(t,a))})}),n=Math.sqrt(n)}return e=[t,n],Wo.set(r,e),e},pO=(...r)=>{r=uO(r);const e=r.map(t=>b2.isA(t)?hO(t):g2.isA(t)?fO(t):v2.isA(t)?dO(t):[[0,0,0],0]);return e.length===1?e[0]:e};var mO=pO;const gO=Lt,vO=Us,bO=(...r)=>{r=gO(r);const e=r.map(t=>{const n=vO(t);return[n[0][0]+(n[1][0]-n[0][0])/2,n[0][1]+(n[1][1]-n[0][1])/2,n[0][2]+(n[1][2]-n[0][2])/2]});return e.length===1?e[0]:e};var xO=bO;const wO=Lt,kr=Ye,x2=kt,w2=vt,qc=new WeakMap,yO=r=>{let e=qc.get(r);if(e!==void 0)return e;const t=x2.toSides(r);let n=0,i=0,s=0;if(t.length>0){for(let a=0;a<t.length;a++){const c=t[a][0],u=t[a][1],f=c[0]*u[1]-c[1]*u[0];n+=f,i+=(c[0]+u[0])*f,s+=(c[1]+u[1])*f}n/=2;const o=1/(n*6);i*=o,s*=o}return e=kr.fromValues(i,s,0),qc.set(r,e),e},_O=r=>{let e=qc.get(r);if(e!==void 0)return e;e=kr.create();const t=w2.toPolygons(r);if(t.length===0)return e;let n=0;const i=kr.create();return t.forEach(s=>{const o=s.vertices;for(let a=0;a<o.length-2;a++){kr.cross(i,o[a+1],o[a+2]);const c=kr.dot(o[0],i)/6;n+=c,kr.add(i,o[0],o[a+1]),kr.add(i,i,o[a+2]);const u=kr.scale(i,i,1/4*c);kr.add(e,e,u)}}),kr.scale(e,e,1/n),qc.set(r,e),e},SO=(...r)=>{r=wO(r);const e=r.map(t=>x2.isA(t)?yO(t):w2.isA(t)?_O(t):[0,0,0]);return e.length===1?e[0]:e};var CO=SO;const MO=Lt,EO=Us,AO=(...r)=>{r=MO(r);const e=r.map(t=>{const n=EO(t);return[n[1][0]-n[0][0],n[1][1]-n[0][1],n[1][2]-n[0][2]]});return e.length===1?e[0]:e};var PO=AO,od={measureAggregateArea:GF,measureAggregateBoundingBox:sd,measureAggregateEpsilon:KF,measureAggregateVolume:cO,measureArea:f2,measureBoundingBox:Us,measureBoundingSphere:mO,measureCenter:xO,measureCenterOfMass:CO,measureDimensions:PO,measureEpsilon:Sl,measureVolume:p2};const TO=Math.PI/180;function LO(r){return r*TO}const IO=(r,e)=>Array.isArray(r)&&r.length>=e?r.every(t=>Number.isFinite(t)):!1,DO=(r,e)=>Number.isFinite(r)&&r>e,RO=(r,e)=>Number.isFinite(r)&&r>=e;var gn={isNumberArray:IO,isGT:DO,isGTE:RO};const{EPS:p1,TAU:yo}=Tt,ui=bt,kO=Kn,{isGT:FO,isGTE:fh,isNumberArray:OO}=gn,BO=r=>{const e={center:[0,0],radius:1,startAngle:0,endAngle:yo,makeTangent:!1,segments:32};let{center:t,radius:n,startAngle:i,endAngle:s,makeTangent:o,segments:a}=Object.assign({},e,r);if(!OO(t,2))throw new Error("center must be an array of X and Y values");if(!FO(n,0))throw new Error("radius must be greater than zero");if(!fh(i,0))throw new Error("startAngle must be positive");if(!fh(s,0))throw new Error("endAngle must be positive");if(!fh(a,4))throw new Error("segments must be four or more");i=i%yo,s=s%yo;let c=yo;i<s&&(c=s-i),i>s&&(c=s+(yo-i));const u=Math.acos((n*n+n*n-p1*p1)/(2*n*n)),f=ui.clone(t);let d;const m=[];if(c<u)d=ui.fromAngleRadians(ui.create(),i),ui.scale(d,d,n),ui.add(d,d,f),m.push(d);else{const v=Math.max(1,Math.floor(a*(c/yo)))+1;let S=v*.5/c;S>.25&&(S=.25);const x=o?v+2:v;for(let w=0;w<=x;w++){let A=w;o&&(A=(w-1)*(v-2*S)/v+S,A<0&&(A=0),A>v&&(A=v));const T=i+A*(c/v);d=ui.fromAngleRadians(ui.create(),T),ui.scale(d,d,n),ui.add(d,d,f),m.push(d)}}return kO.fromPoints({closed:!1},m)};var NO=BO;const{EPS:m1,TAU:ki}=Tt,dh=bt,UO=kt,{sin:VO,cos:zO}=Cn,{isGTE:ph,isNumberArray:g1}=gn,$O=r=>{const e={center:[0,0],radius:[1,1],startAngle:0,endAngle:ki,segments:32};let{center:t,radius:n,startAngle:i,endAngle:s,segments:o}=Object.assign({},e,r);if(!g1(t,2))throw new Error("center must be an array of X and Y values");if(!g1(n,2))throw new Error("radius must be an array of X and Y values");if(!n.every(v=>v>0))throw new Error("radius values must be greater than zero");if(!ph(i,0))throw new Error("startAngle must be positive");if(!ph(s,0))throw new Error("endAngle must be positive");if(!ph(o,3))throw new Error("segments must be three or more");i=i%ki,s=s%ki;let a=ki;i<s&&(a=s-i),i>s&&(a=s+(ki-i));const c=Math.min(n[0],n[1]),u=Math.acos((c*c+c*c-m1*m1)/(2*c*c));if(a<u)throw new Error("startAngle and endAngle do not define a significant rotation");o=Math.floor(o*(a/ki));const f=dh.clone(t),d=a/o,m=[];o=a<ki?o+1:o;for(let v=0;v<o;v++){const S=d*v+i,x=dh.fromValues(n[0]*zO(S),n[1]*VO(S));dh.add(x,f,x),m.push(x)}return a<ki&&m.push(f),UO.fromPoints(m)};var y2=$O;const{TAU:GO}=Tt,HO=y2,{isGT:WO}=gn,qO=r=>{const e={center:[0,0],radius:1,startAngle:0,endAngle:GO,segments:32};let{center:t,radius:n,startAngle:i,endAngle:s,segments:o}=Object.assign({},e,r);if(!WO(n,0))throw new Error("radius must be greater than zero");return n=[n,n],HO({center:t,radius:n,startAngle:i,endAngle:s,segments:o})};var _2=qO;const XO=vt,YO=Rt,{isNumberArray:v1}=gn,jO=r=>{const e={center:[0,0,0],size:[2,2,2]},{center:t,size:n}=Object.assign({},e,r);if(!v1(t,3))throw new Error("center must be an array of X, Y and Z values");if(!v1(n,3))throw new Error("size must be an array of width, depth and height values");if(!n.every(s=>s>0))throw new Error("size values must be greater than zero");return XO.create([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(s=>{const o=s[0].map(a=>[t[0]+n[0]/2*(2*!!(a&1)-1),t[1]+n[1]/2*(2*!!(a&2)-1),t[2]+n[2]/2*(2*!!(a&4)-1)]);return YO.create(o)}))};var ad=jO;const ZO=ad,{isGT:KO}=gn,JO=r=>{const e={center:[0,0,0],size:2};let{center:t,size:n}=Object.assign({},e,r);if(!KO(n,0))throw new Error("size must be greater than zero");return n=[n,n,n],ZO({center:t,size:n})};var QO=JO;const{EPS:b1,TAU:Fi}=Tt,bn=Ye,eB=vt,tB=Rt,{sin:nB,cos:rB}=Cn,{isGT:iB,isGTE:mh,isNumberArray:gh}=gn,sB=r=>{const e={center:[0,0,0],height:2,startRadius:[1,1],startAngle:0,endRadius:[1,1],endAngle:Fi,segments:32};let{center:t,height:n,startRadius:i,startAngle:s,endRadius:o,endAngle:a,segments:c}=Object.assign({},e,r);if(!gh(t,3))throw new Error("center must be an array of X, Y and Z values");if(!iB(n,0))throw new Error("height must be greater then zero");if(!gh(i,2))throw new Error("startRadius must be an array of X and Y values");if(!i.every(R=>R>=0))throw new Error("startRadius values must be positive");if(!gh(o,2))throw new Error("endRadius must be an array of X and Y values");if(!o.every(R=>R>=0))throw new Error("endRadius values must be positive");if(o.every(R=>R===0)&&i.every(R=>R===0))throw new Error("at least one radius must be positive");if(!mh(s,0))throw new Error("startAngle must be positive");if(!mh(a,0))throw new Error("endAngle must be positive");if(!mh(c,4))throw new Error("segments must be four or more");s=s%Fi,a=a%Fi;let u=Fi;s<a&&(u=a-s),s>a&&(u=a+(Fi-s));const f=Math.min(i[0],i[1],o[0],o[1]),d=Math.acos((f*f+f*f-b1*b1)/(2*f*f));if(u<d)throw new Error("startAngle and endAngle do not define a significant rotation");const m=Math.floor(c*(u/Fi)),v=bn.fromValues(0,0,-(n/2)),S=bn.fromValues(0,0,n/2),x=bn.subtract(bn.create(),S,v),w=bn.fromValues(1,0,0),A=bn.fromValues(0,1,0),T=bn.create(),E=bn.create(),P=bn.create(),y=(R,O,z)=>{const Q=O*u+s;return bn.scale(T,w,z[0]*rB(Q)),bn.scale(E,A,z[1]*nB(Q)),bn.add(T,T,E),bn.scale(P,x,R),bn.add(P,P,v),bn.add(bn.create(),T,P)},k=(...R)=>{const O=R.map(z=>bn.add(bn.create(),z,t));return tB.create(O)},F=[];for(let R=0;R<m;R++){const O=R/m;let z=(R+1)/m;u===Fi&&R===m-1&&(z=0),o[0]===i[0]&&o[1]===i[1]?(F.push(k(v,y(0,z,o),y(0,O,o))),F.push(k(y(0,z,o),y(1,z,o),y(1,O,o),y(0,O,o))),F.push(k(S,y(1,O,o),y(1,z,o)))):(i[0]>0&&i[1]>0&&F.push(k(v,y(0,z,i),y(0,O,i))),(i[0]>0||i[1]>0)&&F.push(k(y(0,O,i),y(0,z,i),y(1,O,o))),o[0]>0&&o[1]>0&&F.push(k(S,y(1,O,o),y(1,z,o))),(o[0]>0||o[1]>0)&&F.push(k(y(1,O,o),y(0,z,i),y(1,z,o))))}return u<Fi&&(F.push(k(v,y(0,0,i),S)),F.push(k(y(0,0,i),y(1,0,o),S)),F.push(k(v,S,y(0,1,i))),F.push(k(y(0,1,i),S,y(1,1,o)))),eB.create(F)};var S2=sB;const oB=S2,{isGT:aB}=gn,lB=r=>{const e={center:[0,0,0],height:2,radius:1,segments:32},{center:t,height:n,radius:i,segments:s}=Object.assign({},e,r);if(!aB(i,0))throw new Error("radius must be greater than zero");return oB({center:t,height:n,startRadius:[i,i],endRadius:[i,i],segments:s})};var cB=lB;const{TAU:x1}=Tt,Ke=Ye,uB=vt,w1=Rt,{sin:y1,cos:_1}=Cn,{isGTE:hB,isNumberArray:S1}=gn,fB=r=>{const e={center:[0,0,0],radius:[1,1,1],segments:32,axes:[[1,0,0],[0,-1,0],[0,0,1]]},{center:t,radius:n,segments:i,axes:s}=Object.assign({},e,r);if(!S1(t,3))throw new Error("center must be an array of X, Y and Z values");if(!S1(n,3))throw new Error("radius must be an array of X, Y and Z values");if(!n.every(S=>S>0))throw new Error("radius values must be greater than zero");if(!hB(i,4))throw new Error("segments must be four or more");const o=Ke.scale(Ke.create(),Ke.normalize(Ke.create(),s[0]),n[0]),a=Ke.scale(Ke.create(),Ke.normalize(Ke.create(),s[1]),n[1]),c=Ke.scale(Ke.create(),Ke.normalize(Ke.create(),s[2]),n[2]),u=Math.round(i/4);let f;const d=[],m=Ke.create(),v=Ke.create();for(let S=0;S<=i;S++){const x=x1*S/i,w=Ke.add(Ke.create(),Ke.scale(m,o,_1(x)),Ke.scale(v,a,y1(x)));if(S>0){let A,T;for(let E=0;E<=u;E++){const P=x1/4*E/u,y=_1(P),k=y1(P);if(E>0){let F=[],M;M=Ke.subtract(Ke.create(),Ke.scale(m,f,A),Ke.scale(v,c,T)),F.push(Ke.add(M,M,t)),M=Ke.subtract(Ke.create(),Ke.scale(m,w,A),Ke.scale(v,c,T)),F.push(Ke.add(M,M,t)),E<u&&(M=Ke.subtract(Ke.create(),Ke.scale(m,w,y),Ke.scale(v,c,k)),F.push(Ke.add(M,M,t))),M=Ke.subtract(Ke.create(),Ke.scale(m,f,y),Ke.scale(v,c,k)),F.push(Ke.add(M,M,t)),d.push(w1.create(F)),F=[],M=Ke.add(Ke.create(),Ke.scale(m,f,A),Ke.scale(v,c,T)),F.push(Ke.add(Ke.create(),t,M)),M=Ke.add(M,Ke.scale(m,w,A),Ke.scale(v,c,T)),F.push(Ke.add(Ke.create(),t,M)),E<u&&(M=Ke.add(M,Ke.scale(m,w,y),Ke.scale(v,c,k)),F.push(Ke.add(Ke.create(),t,M))),M=Ke.add(M,Ke.scale(m,f,y),Ke.scale(v,c,k)),F.push(Ke.add(Ke.create(),t,M)),F.reverse(),d.push(w1.create(F))}A=y,T=k}}f=w}return uB.create(d)};var C2=fB;const dB=vt,pB=Rt,{isNumberArray:C1}=gn,mB=r=>{const e={points:[],faces:[],colors:void 0,orientation:"outward"},{points:t,faces:n,colors:i,orientation:s}=Object.assign({},e,r);if(!(Array.isArray(t)&&Array.isArray(n)))throw new Error("points and faces must be arrays");if(t.length<3)throw new Error("three or more points are required");if(n.length<1)throw new Error("one or more faces are required");if(i){if(!Array.isArray(i))throw new Error("colors must be an array");if(i.length!==n.length)throw new Error("faces and colors must have the same length")}t.forEach((a,c)=>{if(!C1(a,3))throw new Error(`point ${c} must be an array of X, Y, Z values`)}),n.forEach((a,c)=>{if(a.length<3)throw new Error(`face ${c} must contain 3 or more indexes`);if(!C1(a,a.length))throw new Error(`face ${c} must be an array of numbers`)}),s!=="outward"&&n.forEach(a=>a.reverse());const o=n.map((a,c)=>{const u=pB.create(a.map(f=>t[f]));return i&&i[c]&&(u.color=i[c]),u});return dB.create(o)};var M2=mB;const M1=_t,E1=Ye,gB=vt,vB=M2,{isGT:bB,isGTE:xB}=gn,wB=r=>{const e={radius:1,frequency:6};let{radius:t,frequency:n}=Object.assign({},e,r);if(!bB(t,0))throw new Error("radius must be greater than zero");if(!xB(n,6))throw new Error("frequency must be six or more");n=Math.floor(n/6);const i=[[.850651,0,-.525731],[.850651,-0,.525731],[-.850651,-0,.525731],[-.850651,0,-.525731],[0,-.525731,.850651],[0,.525731,.850651],[0,.525731,-.850651],[0,-.525731,-.850651],[-.525731,-.850651,-0],[.525731,-.850651,-0],[.525731,.850651,0],[-.525731,.850651,0]],s=[[0,9,1],[1,10,0],[6,7,0],[10,6,0],[7,9,0],[5,1,4],[4,1,9],[5,10,1],[2,8,3],[3,11,2],[2,5,4],[4,8,2],[2,11,5],[3,7,6],[6,11,3],[8,7,3],[9,8,4],[11,10,5],[10,11,6],[8,9,7]],o=(m,v,S)=>{const x=m[0],w=m[1],A=m[2];let T=S;const E=[],P=[];for(let y=0;y<v;y++)for(let k=0;k<v-y;k++){const F=y/v,M=(y+1)/v,R=k/(v-y),O=(k+1)/(v-y),z=v-y-1?k/(v-y-1):1,Q=[];Q[0]=a(a(x,w,R),A,F),Q[1]=a(a(x,w,O),A,F),Q[2]=a(a(x,w,z),A,M);for(let G=0;G<3;G++){const V=E1.length(Q[G]);for(let q=0;q<3;q++)Q[G][q]/=V}if(E.push(Q[0],Q[1],Q[2]),P.push([T,T+1,T+2]),T+=3,k<v-y-1){const G=v-y-1?(k+1)/(v-y-1):1;Q[0]=a(a(x,w,O),A,F),Q[1]=a(a(x,w,G),A,M),Q[2]=a(a(x,w,z),A,M);for(let V=0;V<3;V++){const q=E1.length(Q[V]);for(let j=0;j<3;j++)Q[V][j]/=q}E.push(Q[0],Q[1],Q[2]),P.push([T,T+1,T+2]),T+=3}}return{points:E,triangles:P,offset:T}},a=(m,v,S)=>{const x=1-S,w=[];for(let A=0;A<3;A++)w[A]=m[A]*x+v[A]*S;return w};let c=[],u=[],f=0;for(let m=0;m<s.length;m++){const v=o([i[s[m][0]],i[s[m][1]],i[s[m][2]]],n,f);c=c.concat(v.points),u=u.concat(v.triangles),f=v.offset}let d=vB({points:c,faces:u,orientation:"inward"});return t!==1&&(d=gB.transform(M1.fromScaling(M1.create(),[t,t,t]),d)),d};var yB=wB;const _B=Kn,SB=r=>{if(!Array.isArray(r))throw new Error("points must be an array");return _B.fromPoints({},r)};var CB=SB;const vh=kt,MB=r=>{const e={points:[],paths:[]},{points:t,paths:n}=Object.assign({},e,r);if(!(Array.isArray(t)&&Array.isArray(n)))throw new Error("points and paths must be arrays");let i=t;Array.isArray(t[0])&&(Array.isArray(t[0][0])||(i=[t])),i.forEach((c,u)=>{if(!Array.isArray(c))throw new Error("list of points "+u+" must be an array");if(c.length<3)throw new Error("list of points "+u+" must contain three or more points");c.forEach((f,d)=>{if(!Array.isArray(f))throw new Error("list of points "+u+", point "+d+" must be an array");if(f.length<2)throw new Error("list of points "+u+", point "+d+" must contain by X and Y values")})});let s=n;if(n.length===0){let c=0;s=i.map(u=>u.map(f=>c++))}const o=[];i.forEach(c=>c.forEach(u=>o.push(u)));let a=[];return s.forEach(c=>{const u=c.map(d=>o[d]),f=vh.fromPoints(u);a=a.concat(vh.toSides(f))}),vh.create(a)};var EB=MB;const Oi=bt,AB=kt,{isNumberArray:A1}=gn,PB=r=>{const e={center:[0,0],size:[2,2]},{center:t,size:n}=Object.assign({},e,r);if(!A1(t,2))throw new Error("center must be an array of X and Y values");if(!A1(n,2))throw new Error("size must be an array of X and Y values");if(!n.every(a=>a>0))throw new Error("size values must be greater than zero");const i=[n[0]/2,n[1]/2],s=[i[0],-i[1]],o=[Oi.subtract(Oi.create(),t,i),Oi.add(Oi.create(),t,s),Oi.add(Oi.create(),t,i),Oi.subtract(Oi.create(),t,s)];return AB.fromPoints(o)};var E2=PB;const{EPS:kc,TAU:ka}=Tt,bh=bt,sn=Ye,TB=vt,qo=Rt,{sin:LB,cos:IB}=Cn,{isGT:DB,isGTE:RB,isNumberArray:P1}=gn,T1=(r,e,t,n,i,s)=>{const o=ka/4*i/n,a=IB(o),c=LB(o),u=n-i;let f=t*a,d=e[2]-(t-t*c);s||(d=t-t*c-e[2]),f=f>kc?f:0;const m=sn.add(sn.create(),r,[e[0]-t,e[1]-t,d]),v=sn.add(sn.create(),r,[t-e[0],e[1]-t,d]),S=sn.add(sn.create(),r,[t-e[0],t-e[1],d]),x=sn.add(sn.create(),r,[e[0]-t,t-e[1],d]),w=[],A=[],T=[],E=[];for(let P=0;P<=u;P++){const y=u>0?ka/4*P/u:0,k=bh.fromAngleRadians(bh.create(),y);bh.scale(k,k,f);const F=sn.fromVec2(sn.create(),k);w.push(sn.add(sn.create(),m,F)),sn.rotateZ(F,F,[0,0,0],ka/4),A.push(sn.add(sn.create(),v,F)),sn.rotateZ(F,F,[0,0,0],ka/4),T.push(sn.add(sn.create(),S,F)),sn.rotateZ(F,F,[0,0,0],ka/4),E.push(sn.add(sn.create(),x,F))}return s?[w,A,T,E]:(w.reverse(),A.reverse(),T.reverse(),E.reverse(),[E,T,A,w])},L1=(r,e)=>{const t=[];for(let n=0;n<r.length;n++){const i=r[n],s=e[n];for(let o=0;o<i.length-1;o++)t.push(qo.create([i[o],i[o+1],s[o]])),o<s.length-1&&t.push(qo.create([s[o],i[o+1],s[o+1]]))}return t},I1=(r,e)=>{const t=[];for(let n=0;n<r.length;n++){let i=r[n],s=e[n];const o=i[i.length-1],a=s[s.length-1],c=(n+1)%r.length;i=r[c],s=e[c];const u=i[0],f=s[0];t.push(qo.create([o,u,f,a]))}return t},kB=(r,e)=>{r=[r[3],r[2],r[1],r[0]],r=r.map(s=>s.slice().reverse());const t=[];r.forEach(s=>{s.forEach(o=>t.push(o))});const n=[];e.forEach(s=>{s.forEach(o=>n.push(o))});const i=[];for(let s=0;s<n.length;s++){const o=(s+1)%n.length;i.push(qo.create([t[s],t[o],n[o],n[s]]))}return i},FB=r=>{const e={center:[0,0,0],size:[2,2,2],roundRadius:.2,segments:32};let{center:t,size:n,roundRadius:i,segments:s}=Object.assign({},e,r);if(!P1(t,3))throw new Error("center must be an array of X, Y and Z values");if(!P1(n,3))throw new Error("size must be an array of X, Y and Z values");if(!n.every(u=>u>0))throw new Error("size values must be greater than zero");if(!DB(i,0))throw new Error("roundRadius must be greater than zero");if(!RB(s,4))throw new Error("segments must be four or more");if(n=n.map(u=>u/2),i>n[0]-kc||i>n[1]-kc||i>n[2]-kc)throw new Error("roundRadius must be smaller then the radius of all dimensions");s=Math.floor(s/4);let o=null,a=null,c=[];for(let u=0;u<=s;u++){const f=T1(t,n,i,s,u,!0),d=T1(t,n,i,s,u,!1);if(u===0&&(c=c.concat(kB(d,f))),o&&(c=c.concat(L1(o,f),I1(o,f))),a&&(c=c.concat(L1(a,d),I1(a,d))),u===s){let m=f.map(v=>v[0]);c.push(qo.create(m)),m=d.map(v=>v[0]),c.push(qo.create(m))}o=f,a=d}return TB.create(c)};var OB=FB;const{EPS:D1,TAU:R1}=Tt,ze=Ye,BB=vt,NB=Rt,{sin:k1,cos:F1}=Cn,{isGT:xh,isGTE:UB,isNumberArray:VB}=gn,zB=r=>{const e={center:[0,0,0],height:2,radius:1,roundRadius:.2,segments:32},{center:t,height:n,radius:i,roundRadius:s,segments:o}=Object.assign({},e,r);if(!VB(t,3))throw new Error("center must be an array of X, Y and Z values");if(!xh(n,0))throw new Error("height must be greater then zero");if(!xh(i,0))throw new Error("radius must be greater then zero");if(!xh(s,0))throw new Error("roundRadius must be greater then zero");if(s>i-D1)throw new Error("roundRadius must be smaller then the radius");if(!UB(o,4))throw new Error("segments must be four or more");const a=[0,0,-(n/2)],c=[0,0,n/2],u=ze.subtract(ze.create(),c,a),f=ze.length(u);if(2*s>f-D1)throw new Error("height must be larger than twice roundRadius");let d;Math.abs(u[0])>Math.abs(u[1])?d=ze.fromValues(0,1,0):d=ze.fromValues(1,0,0);const m=ze.scale(ze.create(),ze.normalize(ze.create(),u),s),v=ze.scale(ze.create(),ze.normalize(ze.create(),ze.cross(ze.create(),m,d)),i),S=ze.scale(ze.create(),ze.normalize(ze.create(),ze.cross(ze.create(),v,m)),i);ze.add(a,a,m),ze.subtract(c,c,m);const x=Math.floor(.25*o),w=k=>{const F=k.map(M=>ze.add(M,M,t));return NB.create(F)},A=[],T=ze.create(),E=ze.create();let P;for(let k=0;k<=o;k++){const F=R1*k/o,M=ze.add(ze.create(),ze.scale(T,v,F1(F)),ze.scale(E,S,k1(F)));if(k>0){let R=[];R.push(ze.add(ze.create(),a,M)),R.push(ze.add(ze.create(),a,P)),R.push(ze.add(ze.create(),c,P)),R.push(ze.add(ze.create(),c,M)),A.push(w(R));let O,z;for(let Q=0;Q<=x;Q++){const G=R1/4*Q/x,V=F1(G),q=k1(G);if(Q>0){R=[];let j;j=ze.add(ze.create(),a,ze.subtract(T,ze.scale(T,P,O),ze.scale(E,m,z))),R.push(j),j=ze.add(ze.create(),a,ze.subtract(T,ze.scale(T,M,O),ze.scale(E,m,z))),R.push(j),Q<x&&(j=ze.add(ze.create(),a,ze.subtract(T,ze.scale(T,M,V),ze.scale(E,m,q))),R.push(j)),j=ze.add(ze.create(),a,ze.subtract(T,ze.scale(T,P,V),ze.scale(E,m,q))),R.push(j),A.push(w(R)),R=[],j=ze.add(ze.create(),ze.scale(T,P,O),ze.scale(E,m,z)),ze.add(j,j,c),R.push(j),j=ze.add(ze.create(),ze.scale(T,M,O),ze.scale(E,m,z)),ze.add(j,j,c),R.push(j),Q<x&&(j=ze.add(ze.create(),ze.scale(T,M,V),ze.scale(E,m,q)),ze.add(j,j,c),R.push(j)),j=ze.add(ze.create(),ze.scale(T,P,V),ze.scale(E,m,q)),ze.add(j,j,c),R.push(j),R.reverse(),A.push(w(R))}O=V,z=q}}P=M}return BB.create(A)};var $B=zB;const{EPS:O1,TAU:mc}=Tt,Ut=bt,GB=kt,{isGT:HB,isGTE:WB,isNumberArray:B1}=gn,qB=r=>{const e={center:[0,0],size:[2,2],roundRadius:.2,segments:32};let{center:t,size:n,roundRadius:i,segments:s}=Object.assign({},e,r);if(!B1(t,2))throw new Error("center must be an array of X and Y values");if(!B1(n,2))throw new Error("size must be an array of X and Y values");if(!n.every(x=>x>0))throw new Error("size values must be greater than zero");if(!HB(i,0))throw new Error("roundRadius must be greater than zero");if(!WB(s,4))throw new Error("segments must be four or more");if(n=n.map(x=>x/2),i>n[0]-O1||i>n[1]-O1)throw new Error("roundRadius must be smaller then the radius of all dimensions");const o=Math.floor(s/4),a=Ut.add(Ut.create(),t,[n[0]-i,n[1]-i]),c=Ut.add(Ut.create(),t,[i-n[0],n[1]-i]),u=Ut.add(Ut.create(),t,[i-n[0],i-n[1]]),f=Ut.add(Ut.create(),t,[n[0]-i,i-n[1]]),d=[],m=[],v=[],S=[];for(let x=0;x<=o;x++){const w=mc/4*x/o,A=Ut.fromAngleRadians(Ut.create(),w);Ut.scale(A,A,i),d.push(Ut.add(Ut.create(),a,A)),Ut.rotate(A,A,Ut.create(),mc/4),m.push(Ut.add(Ut.create(),c,A)),Ut.rotate(A,A,Ut.create(),mc/4),v.push(Ut.add(Ut.create(),u,A)),Ut.rotate(A,A,Ut.create(),mc/4),S.push(Ut.add(Ut.create(),f,A))}return GB.fromPoints(d.concat(m,v,S))};var XB=qB;const YB=C2,{isGT:jB}=gn,ZB=r=>{const e={center:[0,0,0],radius:1,segments:32,axes:[[1,0,0],[0,-1,0],[0,0,1]]};let{center:t,radius:n,segments:i,axes:s}=Object.assign({},e,r);if(!jB(n,0))throw new Error("radius must be greater than zero");return n=[n,n,n],YB({center:t,radius:n,segments:i,axes:s})};var KB=ZB;const JB=E2,{isGT:QB}=gn,eN=r=>{const e={center:[0,0],size:2};let{center:t,size:n}=Object.assign({},e,r);if(!QB(n,0))throw new Error("size must be greater than zero");return n=[n,n],JB({center:t,size:n})};var tN=eN;const{TAU:A2}=Tt,qa=bt,nN=kt,{isGT:rN,isGTE:gc,isNumberArray:iN}=gn,sN=(r,e)=>r>0&&e>1&&e<r/2?Math.cos(Math.PI*e/r)/Math.cos(Math.PI*(e-1)/r):0,N1=(r,e,t,n)=>{const i=A2/r,s=[];for(let o=0;o<r;o++){const a=qa.fromAngleRadians(qa.create(),i*o+t);qa.scale(a,a,e),qa.add(a,n,a),s.push(a)}return s},oN=r=>{const e={center:[0,0],vertices:5,outerRadius:1,innerRadius:0,density:2,startAngle:0};let{center:t,vertices:n,outerRadius:i,innerRadius:s,density:o,startAngle:a}=Object.assign({},e,r);if(!iN(t,2))throw new Error("center must be an array of X and Y values");if(!gc(n,2))throw new Error("vertices must be two or more");if(!rN(i,0))throw new Error("outerRadius must be greater than zero");if(!gc(s,0))throw new Error("innerRadius must be greater than zero");if(!gc(a,0))throw new Error("startAngle must be greater than zero");if(n=Math.floor(n),o=Math.floor(o),a=a%A2,s===0){if(!gc(o,2))throw new Error("density must be two or more");s=i*sN(n,o)}const c=qa.clone(t),u=N1(n,i,a,c),f=N1(n,s,a+Math.PI/n,c),d=[];for(let m=0;m<n;m++)d.push(u[m]),d.push(f[m]);return nN.fromPoints(d)};var aN=oN;const U1=Wr,ls=Ye,lN=r=>{const e=r.edges;if(e.length<3)throw new Error("slices must have 3 or more edges to calculate a plane");const t=e.reduce((o,a)=>ls.add(ls.create(),o,a[0]),ls.create());ls.scale(t,t,1/e.length);let n,i=0;e.forEach(o=>{if(!ls.equals(o[0],o[1])){const a=ls.squaredDistance(t,o[0]);a>i&&(n=o,i=a)}});const s=e.find(o=>ls.equals(o[1],n[0]));return U1.fromPoints(U1.create(),s[0],n[0],n[1])};var P2=lN;const cN=r=>(r||(r=[]),{edges:r});var Vs=cN;const uN=Vs,V1=Ye,hN=(...r)=>{let e,t;return r.length===1?(e=uN(),t=r[0]):(e=r[0],t=r[1]),e.edges=t.edges.map(n=>[V1.clone(n[0]),V1.clone(n[1])]),e};var fN=hN;const dN=Ye,pN=(r,e)=>{const t=r.edges,n=e.edges;return t.length!==n.length?!1:t.reduce((s,o,a)=>{const c=n[a],u=dN.squaredDistance(o[0],c[0]);return s&&u<Number.EPSILON},!0)};var mN=pN;const vc=Ye,gN=Vs,vN=r=>{if(!Array.isArray(r))throw new Error("the given points must be an array");if(r.length<3)throw new Error("the given points must contain THREE or more points");const e=[];let t=r[r.length-1];return r.forEach(n=>{n.length===2&&e.push([vc.fromVec2(vc.create(),t),vc.fromVec2(vc.create(),n)]),n.length===3&&e.push([t,n]),t=n}),gN(e)};var bN=vN;const bc=Ye,xN=Vs,wN=r=>{if(!Array.isArray(r))throw new Error("the given sides must be an array");const e=[];return r.forEach(t=>{e.push([bc.fromVec2(bc.create(),t[0]),bc.fromVec2(bc.create(),t[1])])}),xN(e)};var yN=wN;const _N=r=>!!(r&&typeof r=="object"&&"edges"in r&&Array.isArray(r.edges));var SN=_N;const CN=Vs,MN=(...r)=>{let e,t;return r.length===1?(e=CN(),t=r[0]):(e=r[0],t=r[1]),e.edges=t.edges.map(n=>[n[1],n[0]]),e};var EN=MN;const AN=r=>r.edges;var PN=AN;const TN=(r,e)=>{let t,n,i,s,o,a=1;do{n=r,r=null;let c=null;for(o=0;n;){o++,i=n;let u=0;for(t=0;t<a&&(u++,i=i.nextZ,!!i);t++);let f=a;for(;u>0||f>0&&i;)u!==0&&(f===0||!i||e(n)<=e(i))?(s=n,n=n.nextZ,u--):(s=i,i=i.nextZ,f--),c?c.nextZ=s:r=s,s.prevZ=c,c=s;n=i}c.nextZ=null,a*=2}while(o>1);return r};var LN=TN;const IN=LN;let T2=class{constructor(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}};const DN=(r,e,t,n)=>{const i=new T2(r,e,t);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i},RN=r=>{r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)};var L2={Node:T2,insertNode:DN,removeNode:RN,sortLinked:IN};const kN=(r,e,t,n,i,s,o,a)=>(i-o)*(e-a)-(r-o)*(s-a)>=0&&(r-o)*(n-a)-(t-o)*(e-a)>=0&&(t-o)*(s-a)-(i-o)*(n-a)>=0,FN=(r,e,t)=>(e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y);var ld={area:FN,pointInTriangle:kN};const{Node:z1,insertNode:$1,removeNode:Xc}=L2,{area:Yn}=ld,ON=(r,e,t,n,i)=>{let s;if(i===$N(r,e,t,n)>0)for(let o=e;o<t;o+=n)s=$1(o,r[o],r[o+1],s);else for(let o=t-n;o>=e;o-=n)s=$1(o,r[o],r[o+1],s);return s&&Iu(s,s.next)&&(Xc(s),s=s.next),s},I2=(r,e)=>{if(!r)return r;e||(e=r);let t=r,n;do if(n=!1,!t.steiner&&(Iu(t,t.next)||Yn(t.prev,t,t.next)===0)){if(Xc(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e},BN=(r,e,t)=>{let n=r;do{const i=n.prev,s=n.next.next;!Iu(i,s)&&D2(i,n,n.next,s)&&fl(i,s)&&fl(s,i)&&(e.push(i.i/t),e.push(n.i/t),e.push(s.i/t),Xc(n),Xc(n.next),n=r=s),n=n.next}while(n!==r);return I2(n)},NN=(r,e)=>{let t=r;do{if(t.i!==r.i&&t.next.i!==r.i&&t.i!==e.i&&t.next.i!==e.i&&D2(t,t.next,r,e))return!0;t=t.next}while(t!==r);return!1},fl=(r,e)=>Yn(r.prev,r,r.next)<0?Yn(r,e,r.next)>=0&&Yn(r,r.prev,e)>=0:Yn(r,e,r.prev)<0||Yn(r,r.next,e)<0,UN=(r,e)=>{let t=r,n=!1;const i=(r.x+e.x)/2,s=(r.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==r);return n},VN=(r,e)=>{const t=new z1(r.i,r.x,r.y),n=new z1(e.i,e.x,e.y),i=r.next,s=e.prev;return r.next=e,e.prev=r,t.next=i,i.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n},zN=(r,e)=>r.next.i!==e.i&&r.prev.i!==e.i&&!NN(r,e)&&(fl(r,e)&&fl(e,r)&&UN(r,e)&&(Yn(r.prev,r,e.prev)||Yn(r,e.prev,e))||Iu(r,e)&&Yn(r.prev,r,r.next)>0&&Yn(e.prev,e,e.next)>0),D2=(r,e,t,n)=>{const i=Math.sign(Yn(r,e,t)),s=Math.sign(Yn(r,e,n)),o=Math.sign(Yn(t,n,r)),a=Math.sign(Yn(t,n,e));return!!(i!==s&&o!==a||i===0&&xc(r,t,e)||s===0&&xc(r,n,e)||o===0&&xc(t,r,n)||a===0&&xc(t,e,n))},xc=(r,e,t)=>e.x<=Math.max(r.x,t.x)&&e.x>=Math.min(r.x,t.x)&&e.y<=Math.max(r.y,t.y)&&e.y>=Math.min(r.y,t.y),$N=(r,e,t,n)=>{let i=0;for(let s=e,o=t-n;s<t;s+=n)i+=(r[o]-r[s])*(r[s+1]+r[o+1]),o=s;return i},Iu=(r,e)=>r.x===e.x&&r.y===e.y;var R2={cureLocalIntersections:BN,filterPoints:I2,isValidDiagonal:zN,linkedPolygon:ON,locallyInside:fl,splitPolygon:VN};const{filterPoints:cf,linkedPolygon:GN,locallyInside:HN,splitPolygon:WN}=R2,{area:G1,pointInTriangle:qN}=ld,XN=(r,e,t,n)=>{const i=[];for(let s=0,o=e.length;s<o;s++){const a=e[s]*n,c=s<o-1?e[s+1]*n:r.length,u=GN(r,a,c,n,!1);u===u.next&&(u.steiner=!0),i.push(KN(u))}i.sort((s,o)=>s.x-o.x);for(let s=0;s<i.length;s++)t=YN(i[s],t),t=cf(t,t.next);return t},YN=(r,e)=>{const t=jN(r,e);if(!t)return e;const n=WN(t,r),i=cf(t,t.next);return cf(n,n.next),e===t?i:e},jN=(r,e)=>{let t=e;const n=r.x,i=r.y;let s=-1/0,o;do{if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){const d=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=n&&d>s){if(s=d,d===n){if(i===t.y)return t;if(i===t.next.y)return t.next}o=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!o)return null;if(n===s)return o;const a=o,c=o.x,u=o.y;let f=1/0;t=o;do{if(n>=t.x&&t.x>=c&&n!==t.x&&qN(i<u?n:s,i,c,u,i<u?s:n,i,t.x,t.y)){const d=Math.abs(i-t.y)/(n-t.x);HN(t,r)&&(d<f||d===f&&(t.x>o.x||t.x===o.x&&ZN(o,t)))&&(o=t,f=d)}t=t.next}while(t!==a);return o},ZN=(r,e)=>G1(r.prev,r,e.prev)<0&&G1(e.next,r,r.next)<0,KN=r=>{let e=r,t=r;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==r);return t};var JN=XN;const QN=JN,{removeNode:eU,sortLinked:tU}=L2,{cureLocalIntersections:nU,filterPoints:Yc,isValidDiagonal:rU,linkedPolygon:iU,splitPolygon:sU}=R2,{area:ms,pointInTriangle:Xa}=ld,oU=(r,e,t=2)=>{const n=e&&e.length,i=n?e[0]*t:r.length;let s=iU(r,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,c,u,f,d;if(n&&(s=QN(r,e,s,t)),r.length>80*t){a=u=r[0],c=f=r[1];for(let m=t;m<i;m+=t){const v=r[m],S=r[m+1];v<a&&(a=v),S<c&&(c=S),v>u&&(u=v),S>f&&(f=S)}d=Math.max(u-a,f-c),d=d!==0?1/d:0}return dl(s,o,t,a,c,d),o},dl=(r,e,t,n,i,s,o)=>{if(!r)return;!o&&s&&uU(r,n,i,s);let a=r,c,u;for(;r.prev!==r.next;){if(c=r.prev,u=r.next,s?lU(r,n,i,s):aU(r)){e.push(c.i/t),e.push(r.i/t),e.push(u.i/t),eU(r),r=u.next,a=u.next;continue}if(r=u,r===a){o?o===1?(r=nU(Yc(r),e,t),dl(r,e,t,n,i,s,2)):o===2&&cU(r,e,t,n,i,s):dl(Yc(r),e,t,n,i,s,1);break}}},aU=r=>{const e=r.prev,t=r,n=r.next;if(ms(e,t,n)>=0)return!1;let i=r.next.next;for(;i!==r.prev;){if(Xa(e.x,e.y,t.x,t.y,n.x,n.y,i.x,i.y)&&ms(i.prev,i,i.next)>=0)return!1;i=i.next}return!0},lU=(r,e,t,n)=>{const i=r.prev,s=r,o=r.next;if(ms(i,s,o)>=0)return!1;const a=i.x<s.x?i.x<o.x?i.x:o.x:s.x<o.x?s.x:o.x,c=i.y<s.y?i.y<o.y?i.y:o.y:s.y<o.y?s.y:o.y,u=i.x>s.x?i.x>o.x?i.x:o.x:s.x>o.x?s.x:o.x,f=i.y>s.y?i.y>o.y?i.y:o.y:s.y>o.y?s.y:o.y,d=uf(a,c,e,t,n),m=uf(u,f,e,t,n);let v=r.prevZ,S=r.nextZ;for(;v&&v.z>=d&&S&&S.z<=m;){if(v!==r.prev&&v!==r.next&&Xa(i.x,i.y,s.x,s.y,o.x,o.y,v.x,v.y)&&ms(v.prev,v,v.next)>=0||(v=v.prevZ,S!==r.prev&&S!==r.next&&Xa(i.x,i.y,s.x,s.y,o.x,o.y,S.x,S.y)&&ms(S.prev,S,S.next)>=0))return!1;S=S.nextZ}for(;v&&v.z>=d;){if(v!==r.prev&&v!==r.next&&Xa(i.x,i.y,s.x,s.y,o.x,o.y,v.x,v.y)&&ms(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;S&&S.z<=m;){if(S!==r.prev&&S!==r.next&&Xa(i.x,i.y,s.x,s.y,o.x,o.y,S.x,S.y)&&ms(S.prev,S,S.next)>=0)return!1;S=S.nextZ}return!0},cU=(r,e,t,n,i,s)=>{let o=r;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&rU(o,a)){let c=sU(o,a);o=Yc(o,o.next),c=Yc(c,c.next),dl(o,e,t,n,i,s),dl(c,e,t,n,i,s);return}a=a.next}o=o.next}while(o!==r)},uU=(r,e,t,n)=>{let i=r;do i.z===null&&(i.z=uf(i.x,i.y,e,t,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==r);i.prevZ.nextZ=null,i.prevZ=null,tU(i,s=>s.z)},uf=(r,e,t,n,i)=>(r=32767*(r-t)*i,e=32767*(e-n)*i,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1);var hU=oU;const{area:fU}=n2,{toOutlines:dU}=kt,{arePointsInside:pU}=Wx,mU=r=>{const e=dU(r),t=[],n=[];e.forEach((o,a)=>{const c=fU(o);c<0?n.push(a):c>0&&t.push(a)});const i=[],s=[];return t.forEach((o,a)=>{const c=e[o];i[a]=[],n.forEach((u,f)=>{const d=e[u];pU([d[0]],{vertices:c})&&(i[a].push(u),s[f]||(s[f]=[]),s[f].push(a))})}),n.forEach((o,a)=>{if(s[a]&&s[a].length>1){const c=gU(s[a],u=>i[u].length);s[a].forEach((u,f)=>{f!==c&&(i[u]=i[u].filter(d=>d!==o))})}}),i.map((o,a)=>({solid:e[t[a]],holes:o.map(c=>e[c])}))},gU=(r,e)=>{let t,n;return r.forEach((i,s)=>{const o=e(i);(n===void 0||o<n)&&(t=s,n=o)}),t};var vU=mU;const bU=kt,H1=Wr,xU=bt,yn=Ye,wU=P2,yU=vU;let _U=class{constructor(e){this.plane=wU(e);const t=yn.orthogonal(yn.create(),this.plane),n=yn.cross(yn.create(),this.plane,t);this.v=yn.normalize(n,n),this.u=yn.cross(yn.create(),this.v,this.plane),this.basisMap=new Map;const i=e.edges.map(o=>o.map(a=>this.to2D(a))),s=bU.create(i);this.roots=yU(s)}to2D(e){const t=xU.fromValues(yn.dot(e,this.u),yn.dot(e,this.v));return this.basisMap.set(t,e),t}to3D(e){const t=this.basisMap.get(e);if(t)return t;{console.log("Warning: point not in original slice");const n=yn.scale(yn.create(),this.u,e[0]),i=yn.scale(yn.create(),this.v,e[1]),s=yn.scale(yn.create(),H1,H1[3]),o=yn.add(n,n,s);return yn.add(i,i,o)}}};var SU=_U;const CU=Rt,MU=hU,EU=SU,AU=r=>{const e=new EU(r),t=[];return e.roots.forEach(({solid:n,holes:i})=>{let s=n.length;const o=[];i.forEach((d,m)=>{o.push(s),s+=d.length});const a=[n,...i].flat(),c=a.flat(),u=d=>e.to3D(a[d]),f=MU(c,o);for(let d=0;d<f.length;d+=3){const m=f.slice(d,d+3).map(u);t.push(CU.fromPointsAndPlane(m,e.plane))}}),t};var PU=AU;const W1=Ye,TU=r=>r.reduce((e,t)=>e+=`[${W1.toString(t[0])}, ${W1.toString(t[1])}], `,""),LU=r=>`[${TU(r.edges)}]`;var IU=LU;const wc=Ye,DU=Vs,RU=(r,e)=>{const t=e.edges.map(n=>[wc.transform(wc.create(),n[0],r),wc.transform(wc.create(),n[1],r)]);return DU(t)};var kU=RU,Du={calculatePlane:P2,clone:fN,create:Vs,equals:mN,fromPoints:bN,fromSides:yN,isA:SN,reverse:EN,toEdges:PN,toPolygons:PU,toString:IU,transform:kU};const q1=Ye,FU=Vs,OU=r=>{if(!r.edges)return r;let e=r.edges;const t=new Map,n=new Map;e=e.filter(o=>!q1.equals(o[0],o[1])),e.forEach(o=>{const a=o[0].toString(),c=o[1].toString();t.set(a,o[0]),t.set(c,o[1]),n.set(a,(n.get(a)||0)+1),n.set(c,(n.get(c)||0)-1)});const i=[],s=[];return n.forEach((o,a)=>{o<0&&i.push(a),o>0&&s.push(a)}),i.forEach(o=>{const a=t.get(o);let c=1/0,u;s.forEach(f=>{const d=t.get(f),m=q1.distance(a,d);m<c&&(c=m,u=d)}),console.warn(`slice.repair: repairing vertex gap ${a} to ${u} distance ${c}`),e=e.map(f=>f[0].toString()===o?[u,f[1]]:f[1].toString()===o?[f[0],u]:f)}),FU(e)};var BU=OU;const{EPS:X1}=Tt,_o=Ye,yc=Rt,Y1=Du,hf=(r,e)=>r===e?r:r<e?hf(e,r):e===1?1:e===0?r:hf(e,r%e),NU=(r,e)=>r*e/hf(r,e),j1=(r,e)=>{const t=r/e.length;if(t===1)return e;const n=_o.fromValues(t,t,t),i=[];return e.forEach(s=>{const o=_o.subtract(_o.create(),s[1],s[0]);_o.divide(o,o,n);let a=s[0];for(let c=1;c<=t;++c){const u=_o.add(_o.create(),a,o);i.push([a,u]),a=u}}),i},Z1=X1*X1/2*Math.sin(Math.PI/3),UU=(r,e)=>{let t=Y1.toEdges(r),n=Y1.toEdges(e);if(t.length!==n.length){const s=NU(t.length,n.length);s!==t.length&&(t=j1(s,t)),s!==n.length&&(n=j1(s,n))}const i=[];return t.forEach((s,o)=>{const a=n[o],c=yc.create([s[0],s[1],a[1]]),u=yc.measureArea(c);Number.isFinite(u)&&u>Z1&&i.push(c);const f=yc.create([s[0],a[1],a[0]]),d=yc.measureArea(f);Number.isFinite(d)&&d>Z1&&i.push(f)}),i};var VU=UU;const K1=_t,J1=kt,zU=vt,ff=Rt,$i=Du,$U=BU,Q1=VU,GU=(r,e,t)=>{let n=null;return J1.isA(t)&&(n=$i.fromSides(J1.toSides(t))),ff.isA(t)&&(n=$i.fromPoints(ff.toPoints(t))),r===0||r===1?$i.transform(K1.fromTranslation(K1.create(),[0,0,r]),n):null},HU=(r,e)=>{const t={numberOfSlices:2,capStart:!0,capEnd:!0,close:!1,repair:!0,callback:GU},{numberOfSlices:n,capStart:i,capEnd:s,close:o,repair:a,callback:c}=Object.assign({},t,r);if(n<2)throw new Error("numberOfSlices must be 2 or more");a&&(e=$U(e));const u=n-1;let f=null,d=null,m=null,v=[];for(let S=0;S<n;S++){const x=c(S/u,S,e);if(x){if(!$i.isA(x))throw new Error("the callback function must return slice objects");if($i.toEdges(x).length===0)throw new Error("the callback function must return slices with one or more edges");m&&(v=v.concat(Q1(m,x))),S===0&&(f=x),S===n-1&&(d=x),m=x}}if(s){const S=$i.toPolygons(d);v=v.concat(S)}if(i){const S=$i.toPolygons(f).map(ff.invert);v=v.concat(S)}return!i&&!s&&o&&!$i.equals(d,f)&&(v=v.concat(Q1(d,f))),zU.create(v)};var WU=HU;const{TAU:ir}=Tt,Fa=_t,{mirrorX:qU}=Ha,Oa=kt,wh=Du,XU=WU,YU=(r,e)=>{const t={segments:12,startAngle:0,angle:ir,overflow:"cap"};let{segments:n,startAngle:i,angle:s,overflow:o}=Object.assign({},t,r);if(n<3)throw new Error("segments must be greater then 3");i=Math.abs(i)>ir?i%ir:i,s=Math.abs(s)>ir?s%ir:s;let a=i+s;if(a=Math.abs(a)>ir?a%ir:a,a<i){const T=i;i=a,a=T}let c=a-i;if(c<=0&&(c=ir),Math.abs(c)<ir){const T=ir/n;n=Math.floor(Math.abs(c)/T),Math.abs(c)>n*T&&n++}let u=Oa.toSides(e);if(u.length===0)throw new Error("the given geometry cannot be empty");const f=u.filter(T=>T[0][0]<0),d=u.filter(T=>T[0][0]>=0);f.length>0&&d.length>0&&o==="cap"&&(f.length>d.length?(u=u.map(T=>{let E=T[0],P=T[1];return E=[Math.min(E[0],0),E[1]],P=[Math.min(P[0],0),P[1]],[E,P]}),e=Oa.reverse(Oa.create(u)),e=qU(e)):d.length>=f.length&&(u=u.map(T=>{let E=T[0],P=T[1];return E=[Math.max(E[0],0),E[1]],P=[Math.max(P[0],0),P[1]],[E,P]}),e=Oa.create(u)));const v=c/n,S=Math.abs(c)<ir,x=wh.fromSides(Oa.toSides(e));wh.reverse(x,x);const w=Fa.create(),A=(T,E,P)=>{let y=v*E+i;return c===ir&&E===n&&(y=i),Fa.multiply(w,Fa.fromZRotation(w,y),Fa.fromXRotation(Fa.create(),ir/4)),wh.transform(w,P)};return r={numberOfSlices:n+1,capStart:S,capEnd:S,close:!S,callback:A},XU(r,x)};var jU=YU;const{TAU:ZU}=Tt,KU=jU,{rotate:JU}=Wa,{translate:QU}=bs,eV=_2,{isGT:yh,isGTE:_h}=gn,tV=r=>{const e={innerRadius:1,innerSegments:32,outerRadius:4,outerSegments:32,innerRotation:0,startAngle:0,outerRotation:ZU},{innerRadius:t,innerSegments:n,outerRadius:i,outerSegments:s,innerRotation:o,startAngle:a,outerRotation:c}=Object.assign({},e,r);if(!yh(t,0))throw new Error("innerRadius must be greater than zero");if(!_h(n,3))throw new Error("innerSegments must be three or more");if(!yh(i,0))throw new Error("outerRadius must be greater than zero");if(!_h(s,3))throw new Error("outerSegments must be three or more");if(!_h(a,0))throw new Error("startAngle must be positive");if(!yh(c,0))throw new Error("outerRotation must be greater than zero");if(t>=i)throw new Error("inner circle is two large to rotate about the outer circle");let u=eV({radius:t,segments:n});return o!==0&&(u=JU([0,0,o],u)),u=QU([i,0],u),KU({startAngle:a,angle:c,segments:s},u)};var nV=tV;const{NEPS:Xo}=Tt,Ba=bt,rV=kt,{isNumberArray:iV}=gn,df=(r,e,t)=>Math.acos((r*r+e*e-t*t)/(2*r*e)),sV=(r,e,t)=>e>Xo?Math.sqrt(r*r+t*t-2*r*t*Math.cos(e)):Math.sqrt((r-t)*(r-t)+r*t*e*e*(1-e*e/12)),oV=r=>{if(Math.abs(r[0]+r[1]+r[2]-Math.PI)>Xo)throw new Error("AAA triangles require angles that sum to PI");const t=r[0],n=r[1],i=Math.PI-t-n,s=1,o=s/Math.sin(i)*Math.sin(t),a=s/Math.sin(i)*Math.sin(n);return ra(t,n,i,o,a,s)},aV=r=>{const e=r[0],t=r[1],n=Math.PI+Xo-e-t;if(n<Xo)throw new Error("AAS triangles require angles that sum to PI");const i=r[2],s=i/Math.sin(e)*Math.sin(t),o=i/Math.sin(e)*Math.sin(n);return ra(e,t,n,i,s,o)},lV=r=>{const e=r[0],t=r[2],n=Math.PI+Xo-e-t;if(n<Xo)throw new Error("ASA triangles require angles that sum to PI");const i=r[1],s=i/Math.sin(n)*Math.sin(e),o=i/Math.sin(n)*Math.sin(t);return ra(e,t,n,s,o,i)},cV=r=>{const e=r[0],t=r[1],n=r[2],i=sV(e,t,n),s=df(i,e,n),o=Math.PI-s-t;return ra(s,t,o,n,i,e)},uV=r=>{const e=r[0],t=r[1],n=r[2],i=Math.asin(t*Math.sin(n)/e),s=Math.PI-i-n,o=e/Math.sin(n)*Math.sin(s);return ra(i,s,n,t,o,e)},hV=r=>{const e=r[1],t=r[2],n=r[0];if(e+t<=n||t+n<=e||n+e<=t)throw new Error("SSS triangle is incorrect, as the longest side is longer than the sum of the other sides");const i=df(t,n,e),s=df(n,e,t),o=Math.PI-i-s;return ra(i,s,o,e,t,n)},ra=(r,e,t,n,i,s)=>{const o=Ba.fromValues(0,0),a=Ba.fromValues(s,0),c=Ba.fromValues(n,0);return Ba.add(c,Ba.rotate(c,c,[0,0],Math.PI-e),a),rV.fromPoints([o,a,c])},fV=r=>{const e={type:"SSS",values:[1,1,1]};let{type:t,values:n}=Object.assign({},e,r);if(typeof t!="string")throw new Error("triangle type must be a string");if(t=t.toUpperCase(),!((t[0]==="A"||t[0]==="S")&&(t[1]==="A"||t[1]==="S")&&(t[2]==="A"||t[2]==="S")))throw new Error("triangle type must contain three letters; A or S");if(!iV(n,3))throw new Error("triangle values must contain three values");if(!n.every(i=>i>0))throw new Error("triangle values must be greater than zero");switch(t){case"AAA":return oV(n);case"AAS":return aV(n);case"ASA":return lV(n);case"SAS":return cV(n);case"SSA":return uV(n);case"SSS":return hV(n);default:throw new Error("invalid triangle type, try again")}};var dV=fV,Hn={arc:NO,circle:_2,cube:QO,cuboid:ad,cylinder:cB,cylinderElliptic:S2,ellipse:y2,ellipsoid:C2,geodesicSphere:yB,line:CB,polygon:EB,polyhedron:M2,rectangle:E2,roundedCuboid:OB,roundedCylinder:$B,roundedRectangle:XB,sphere:KB,square:tN,star:aN,torus:nV,triangle:dV};function pV(r){const e=[],t=[],n=r.getAttribute("position");for(let s=0;s<n.count;s++)e.push([n.getX(s),n.getY(s),n.getZ(s)]);if(r.index===null)for(let s=0;s<n.count;s+=3)t.push([s,s+1,s+2]);else for(let s=0;s<r.index.count;s+=3)t.push([r.index.getX(s),r.index.getX(s+1),r.index.getX(s+2)]);const i=Hn.polyhedron({points:e,faces:t});return i.polygons.buffer=r,i}function Zt(r,e){e<0&&(e+=r.length);const t=r[e];if(t===void 0)throw new Error(`No item at index ${e}`);return t}function mV(r,e=!1){const t=r[0].index!==null,n=new Set(Object.keys(r[0].attributes)),i=new Set(Object.keys(r[0].morphAttributes)),s={},o={},a=r[0].morphTargetsRelative,c=new Zn;let u=0;for(let f=0;f<r.length;++f){const d=r[f];let m=0;if(t!==(d.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+f+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(const v in d.attributes){if(!n.has(v))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+f+'. All geometries must have compatible attributes; make sure "'+v+'" attribute exists among all geometries, or in none of them.'),null;s[v]===void 0&&(s[v]=[]),s[v].push(d.attributes[v]),m++}if(m!==n.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+f+". Make sure all geometries have the same number of attributes."),null;if(a!==d.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+f+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(const v in d.morphAttributes){if(!i.has(v))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+f+".  .morphAttributes must be consistent throughout all geometries."),null;o[v]===void 0&&(o[v]=[]),o[v].push(d.morphAttributes[v])}if(e){let v;if(t)v=d.index.count;else if(d.attributes.position!==void 0)v=d.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+f+". The geometry must have either an index or a position attribute"),null;c.addGroup(u,v,f),u+=v}}if(t){let f=0;const d=[];for(let m=0;m<r.length;++m){const v=r[m].index;for(let S=0;S<v.count;++S)d.push(v.getX(S)+f);f+=r[m].attributes.position.count}c.setIndex(d)}for(const f in s){const d=ev(s[f]);if(!d)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+f+" attribute."),null;c.setAttribute(f,d)}for(const f in o){const d=o[f][0].length;if(d===0)break;c.morphAttributes=c.morphAttributes||{},c.morphAttributes[f]=[];for(let m=0;m<d;++m){const v=[];for(let x=0;x<o[f].length;++x)v.push(o[f][x][m]);const S=ev(v);if(!S)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+f+" morphAttribute."),null;c.morphAttributes[f].push(S)}}return c}function ev(r){let e,t,n,i=0;for(let a=0;a<r.length;++a){const c=r[a];if(c.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(e===void 0&&(e=c.array.constructor),e!==c.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(t===void 0&&(t=c.itemSize),t!==c.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(n===void 0&&(n=c.normalized),n!==c.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;i+=c.array.length}const s=new e(i);let o=0;for(let a=0;a<r.length;++a)s.set(r[a].array,o),o+=r[a].array.length;return new jn(s,t,n)}function gV(r,e,t){r.closePath();const n=r.getPoints(e),i=No.area(n);return i!==0&&t.push({points:n,holes:[],area:i}),new ol}function vV(r,e){const t=new sx(e.points);for(const n of e.holes)t.holes.push(new ol(n.points));return new Gf(t,{depth:r,bevelEnabled:!1})}const tv=1e-6;function bV(r,e){let t=0,n=r[r.length-1]??new Ne;for(const i of r){let s=i,o=n;n.y<i.y&&(s=n,o=i),s.y<e.y+tv&&o.y>e.y+tv&&(o.x-s.x)*(e.y-s.y)>(e.x-s.x)*(o.y-s.y)&&t++,n=i}return t%2!==0}function xV(r){r.sort((t,n)=>Math.abs(n.area)-Math.abs(t.area));const e=[];for(let t=0;t<r.length;t++){let n;for(let s=t-1;s>=0;s--){const o=r[t],a=r[s];if(o===void 0||a===void 0)throw new Error(`Undefined paths at ${t} and ${s}`);const c=o.points[0];if(c===void 0)throw new Error(`Empty path at ${t}`);if(bV(a.points,c)&&o.area*a.area<0){n=a;break}}const i=r[t];i!==void 0&&(n===void 0?e.push(i):n.holes.push(i))}for(const t of e)t.area<0&&(t.points.reverse(),t.holes.forEach(n=>n.points.reverse()));return e}function wV(r,e,t){const n=[];let i=new ol;for(const a of r)switch(a.command){case"moveTo":{const c=Zt(a.args,0),u=Zt(a.args,1);i.moveTo(c,u);break}case"lineTo":{const c=Zt(a.args,0),u=Zt(a.args,1);i.lineTo(c,u);break}case"bezierCurveTo":{const c=Zt(a.args,0),u=Zt(a.args,1),f=Zt(a.args,2),d=Zt(a.args,3),m=Zt(a.args,4),v=Zt(a.args,5);i.bezierCurveTo(c,u,f,d,m,v);break}case"quadraticCurveTo":{const c=Zt(a.args,0),u=Zt(a.args,1),f=Zt(a.args,2),d=Zt(a.args,3);i.quadraticCurveTo(c,u,f,d);break}case"closePath":i=gV(i,e,n);continue}const o=xV(n).map(vV.bind(null,t));return mV(o)}const Sh=new Map;let nv=null,rv=-1;function iv(r,e,t){return Bt(()=>{if(r().trim().length===0)return null;if(nv!==e()||rv!==t())Sh.clear(),nv=e(),rv=t();else{const u=Sh.get(r());if(u)return u}const n=e().layout(r()),i=1/e().unitsPerEm,s=[];let o=0;n.glyphs.forEach((u,f)=>{const d=Zt(n.positions,f);o+=d.xOffset;const m=u.path.translate(o,0).scale(i);s.push(...m.commands),o+=d.xAdvance});const a=wV(s,t(),2),c=pV(a);return Sh.set(r(),c),c})}function yV(r,e,t){const n=Ye.create(),i=Ye.create(),s=Ye.create();Ye.subtract(s,r,e),Ye.squaredLength(s)===0&&(s[2]=1),Ye.normalize(s,s),Ye.cross(n,t,s),Ye.squaredLength(n)===0&&(Math.abs(t[2])===1?s[0]+=1e-4:s[2]+=1e-4,Ye.normalize(s,s),Ye.cross(n,t,s)),Ye.normalize(n,n),Ye.cross(i,s,n);const o=_t.create();return o[0]=n[0],o[4]=i[0],o[8]=s[0],o[1]=n[1],o[5]=i[1],o[9]=s[1],o[2]=n[2],o[6]=i[2],o[10]=s[2],o}function k2(r){let e=0,t=0,n=0,i=0,[s,o,a]=Zt(r,r.length-1);for(const[d,m,v]of r){let S=d-s,x=m-o,w=v-a;const A=Math.hypot(S,x,w);e+=(s+d)/2*A,t+=(o+m)/2*A,n+=(a+v)/2*A,i+=A,s=d,o=m,a=v}const c=e/i,u=t/i,f=n/i;return Ye.fromValues(c,u,f)}function sv(r,e){switch(e.type){case"edge":{const{edges:t}=Du.fromPoints(r),n=Zt(t,e.index);return Ye.lerp(Ye.create(),n[0],n[1],.5)}case"vertex":return Zt(r,e.index);case"center":return k2(r)}}function F2(r,e){const t=Zt(vt.toPolygons(r),e.faceIndex),n=Rt.toPoints(t),[i,s,o]=Wr.fromPoints(Wr.create(),...n),a=Ye.fromValues(i,s,o),c=sv(n,e.from),u=sv(n,e.to);let f;e.polygonCenter?f=k2(n):f=Ye.lerp(Ye.create(),c,u,e.t??.5);const d=Ye.distance(c,u);let m=yV(u,f,a);return m=_t.rotateX(m,m,-nl),{center:f,length:d,rotationMatrix:m}}function _V(r,e,t,n,i,s){const o=n.text??`${r+1}`,a=o==="6"||o==="9"?"_":"";e=ul(e,`Face ${o}`,!1);const[c]=u1(e,o,"Text"),[u]=u1(e,a,"Mark"),[f]=Hf(e,!0,"Underscore"),[d]=xn(e,-2,2,.01,.1,"Gap"),[m]=xn(e,0,360,1,0,"Rotation"),[v]=IF(e,-2,2,.01,[0,0],"Text offset"),S=iv(c,i.textFont,i.segments),x=iv(u,i.markFont,i.segments),w=Bt(()=>{let M=S();return M===null?null:(M=Kt.align({modes:["center","center","center"]},M),M)}),A=Bt(()=>{let M=x();if(M===null)return null;const R=w();if(R===null)M=Kt.align({modes:["center","center","center"]},M);else{const O=od.measureDimensions(R),z=Ye.scale(Ye.create(),O,.5);if(f()){const Q=z[1]+d();M=Kt.align({modes:["center","max","center"]},M),M=Kt.translateY(-Q,M)}else{const Q=z[0]+d(),G=z[1];M=Kt.align({modes:["min","none","center"]},M),M=Kt.translate([Q,-G],M)}}return M}),T=Bt(()=>n.instances.map(M=>F2(t(),M))),E=Bt(()=>{const M=_t.create(),R=n.localRotation??0;return _t.translate(M,M,[...v(),0]),_t.rotateZ(M,M,R+LO(m())),M}),P=Bt(()=>T().map(M=>{const R=_t.create(),O=M.length*s();return _t.translate(R,R,M.center),_t.multiply(R,R,M.rotationMatrix),_t.scale(R,R,[O,O,i.depth()]),R})),y=Bt(()=>{const M=E();return P().map(R=>_t.multiply(_t.create(),R,M))}),k=Bt(()=>{const M=[];return h1(w(),M),h1(A(),M),M});return Bt(()=>{const M=k();let R=[];for(const O of y())DF(Kt.transform(O,M),R);return R})}function br(r,e,t,n){const i=ul(n.folder,t.name,!1),[s]=Hf(i,!1,"Hidden"),[o]=xn(i,1,40,1,t.defaultSize,"Size"),[a]=xn(i,.05,3,.05,t.faceScale??.75,"Font scale"),c=t.extraOptions(i,o),u={size:o,...c},f=Bt(x=>(x!==void 0&&ux(x)&&x.polygons.buffer.dispose(),t.base(u))),d=Bt(()=>{var x;return((x=t.facesBase)==null?void 0:x.call(t,u))??f()}),m=SV(i,d,t.faces,n.faceOptions,a),v=Bt(()=>{if(s())return null;let x=f();if(n.renderMode()==="preview")return x;switch(n.renderOperation()){case"subtract":x=s2(x,m());break;case"union":x=a2(x,m());break}if(n.renderMode()==="stl"){const w=t.faces[0];if(w!==void 0){const A=hl(w.instances),T=F2(d(),A),E=C6(_t.create(),T.rotationMatrix);x=Kt.transform(E,x),x=Kt.rotateY(J_,x)}x=c2({modes:["none","none","min"]},x)}return x}),S=Bt(()=>!s()&&n.renderMode()==="preview"?m():[]);return{x:r,y:e,size:o,base:v,faces:S}}function SV(r,e,t,n,i){const s=[];let o=0;for(const c of t){const u=_V(o++,r,e,c,n,i);s.push(u)}return Bt(()=>{const c=[];for(const u of s)c.push(...u());return c})}function CV(r,e,t){if(r%2!==0)throw new Error("Face count must be even number");const n=r/2,i=e,s=t,a=2*i*Math.tan(nl/n)**2/2,c=[[0,0,i],[0,0,-i]];for(let d=0;d<n;d++){const m=Math.PI*2/n*d,v=s*Math.cos(m),S=s*Math.sin(m);c.push([v,S,a])}for(let d=0;d<n;d++){const m=Math.PI/n+Math.PI*2/n*d,v=s*Math.cos(m),S=s*Math.sin(m);c.push([v,S,-a])}const u=[];for(let d=0;d<n;d++){const m=d+2,v=d+1===n?2:m+1,S=d+n+2;u.push([0,m,S,v])}for(let d=0;d<n;d++){const m=d+n+2,v=d+1===n?n+2:m+1,S=d+1===n?2:d+3;u.push([1,v,S,m])}return Hn.polyhedron({points:c,faces:u})}const MV=[0,8,2,5,3,9,1,7,4,6];function ov(r,e,t,n=!1){const i=MV.map((s,o)=>{const a={instances:[{faceIndex:s,polygonCenter:!0,from:{type:"vertex",index:0},to:{type:"vertex",index:2}}]};return o===9&&(a.text="0"),n&&(a.text??(a.text=`${o+1}`),a.text+="0",a.localRotation=nl),a});return br(r,e,{name:n?"d100":"d10",defaultSize:16,faceScale:n?.35:.5,faces:i,extraOptions(s,o){const[a]=xn(s,1,40,1,o()/2,"Radius");return{radius:a}},base({size:s,radius:o}){return CV(10,s()/2,o())}},t)}function Ru(r){const e=Hn.polyhedron(r),[,t]=od.measureBoundingSphere(e);return n=>{const i=Ye.fromScalar(Ye.create(),n/t);return Kt.scale(i,e)}}const Gt=(1+Math.sqrt(5))/4,dr=(3+Math.sqrt(5))/4,EV=Ru({points:[[0,.5,dr],[0,.5,-dr],[0,-.5,dr],[0,-.5,-dr],[dr,0,.5],[dr,0,-.5],[-dr,0,.5],[-dr,0,-.5],[.5,dr,0],[.5,-dr,0],[-.5,dr,0],[-.5,-dr,0],[Gt,Gt,Gt],[Gt,Gt,-Gt],[Gt,-Gt,Gt],[Gt,-Gt,-Gt],[-Gt,Gt,Gt],[-Gt,Gt,-Gt],[-Gt,-Gt,Gt],[-Gt,-Gt,-Gt]],faces:[[0,2,14,4,12],[0,12,8,10,16],[0,16,6,18,2],[7,6,16,10,17],[7,17,1,3,19],[7,19,11,18,6],[9,11,19,3,15],[9,15,5,4,14],[9,14,2,18,11],[13,1,17,10,8],[13,8,12,4,5],[13,5,15,3,1]]});function AV(r,e,t){return br(r,e,{name:"d12",defaultSize:16,faceScale:.6,faces:[{instances:[{faceIndex:8,polygonCenter:!0,from:{type:"vertex",index:2},to:{type:"edge",index:0}}]},{instances:[{faceIndex:7,polygonCenter:!0,from:{type:"vertex",index:2},to:{type:"edge",index:0}}]},{instances:[{faceIndex:4,polygonCenter:!0,from:{type:"vertex",index:4},to:{type:"edge",index:2}}]},{instances:[{faceIndex:6,polygonCenter:!0,from:{type:"vertex",index:3},to:{type:"edge",index:1}}]},{instances:[{faceIndex:2,polygonCenter:!0,from:{type:"vertex",index:1},to:{type:"edge",index:4}}]},{instances:[{faceIndex:5,polygonCenter:!0,from:{type:"vertex",index:0},to:{type:"edge",index:3}}]},{instances:[{faceIndex:10,polygonCenter:!0,from:{type:"vertex",index:3},to:{type:"edge",index:1}}]},{instances:[{faceIndex:11,polygonCenter:!0,from:{type:"vertex",index:2},to:{type:"edge",index:0}}]},{instances:[{faceIndex:1,polygonCenter:!0,from:{type:"vertex",index:0},to:{type:"edge",index:3}}]},{instances:[{faceIndex:0,polygonCenter:!0,from:{type:"vertex",index:4},to:{type:"edge",index:2}}]},{instances:[{faceIndex:3,polygonCenter:!0,from:{type:"vertex",index:1},to:{type:"edge",index:4}}]},{instances:[{faceIndex:9,polygonCenter:!0,from:{type:"vertex",index:1},to:{type:"edge",index:4}}]}],extraOptions(){return{}},base({size:n}){return EV(n()/2)}},t)}const Ht=3*Math.sqrt(2)/8,So=3*Math.sqrt(2)/4,PV=Ru({points:[[0,0,So],[0,0,-So],[So,0,0],[-So,0,0],[0,So,0],[0,-So,0],[Ht,Ht,Ht],[Ht,Ht,-Ht],[Ht,-Ht,Ht],[Ht,-Ht,-Ht],[-Ht,Ht,Ht],[-Ht,Ht,-Ht],[-Ht,-Ht,Ht],[-Ht,-Ht,-Ht]],faces:[[6,0,8,2],[6,2,7,4],[6,4,10,0],[9,1,7,2],[9,2,8,5],[9,5,13,1],[11,1,13,3],[11,3,10,4],[11,4,7,1],[12,0,10,3],[12,3,13,5],[12,5,8,0]]});function TV(r,e,t){return br(r,e,{name:"d12r",defaultSize:16,faceScale:.6,faces:[{instances:[{faceIndex:11,from:{type:"vertex",index:0},to:{type:"vertex",index:2}}]},{instances:[{faceIndex:9,from:{type:"vertex",index:2},to:{type:"vertex",index:0}}]},{instances:[{faceIndex:4,from:{type:"vertex",index:2},to:{type:"vertex",index:0}}]},{instances:[{faceIndex:0,from:{type:"vertex",index:2},to:{type:"vertex",index:0}}]},{instances:[{faceIndex:5,from:{type:"vertex",index:2},to:{type:"vertex",index:0}}]},{instances:[{faceIndex:10,from:{type:"vertex",index:2},to:{type:"vertex",index:0}}]},{instances:[{faceIndex:1,from:{type:"vertex",index:2},to:{type:"vertex",index:0}}]},{instances:[{faceIndex:2,from:{type:"vertex",index:0},to:{type:"vertex",index:2}}]},{instances:[{faceIndex:6,from:{type:"vertex",index:2},to:{type:"vertex",index:0}}]},{instances:[{faceIndex:7,from:{type:"vertex",index:2},to:{type:"vertex",index:0}}]},{instances:[{faceIndex:3,from:{type:"vertex",index:2},to:{type:"vertex",index:0}}]},{instances:[{faceIndex:8,from:{type:"vertex",index:0},to:{type:"vertex",index:2}}]}],extraOptions(){return{}},base({size:n}){return PV(n()/2)}},t)}function LV(r,e,t){return br(r,e,{name:"d2",defaultSize:16,faces:[{instances:[{faceIndex:5,from:{type:"edge",index:3},to:{type:"edge",index:1}}]},{instances:[{faceIndex:4,from:{type:"edge",index:0},to:{type:"edge",index:2}}]}],extraOptions(n){const[i]=xn(n,1,40,1,3,"Height"),[s]=xn(n,4,360,1,24,"Segments");return{height:i,segments:s}},base({size:n,height:i,segments:s}){return Hn.cylinder({radius:n()/2,height:i(),segments:s()})},facesBase({size:n,height:i}){return ad({size:[n(),n(),i()]})}},t)}const pr=(1+Math.sqrt(5))/4,IV=Ru({points:[[.5,0,pr],[.5,0,-pr],[-.5,0,pr],[-.5,0,-pr],[pr,.5,0],[pr,-.5,0],[-pr,.5,0],[-pr,-.5,0],[0,pr,.5],[0,pr,-.5],[0,-pr,.5],[0,-pr,-.5]],faces:[[0,2,10],[0,10,5],[0,5,4],[0,4,8],[0,8,2],[3,1,11],[3,11,7],[3,7,6],[3,6,9],[3,9,1],[2,6,7],[2,7,10],[10,7,11],[10,11,5],[5,11,1],[5,1,4],[4,1,9],[4,9,8],[8,9,6],[8,6,2]]});function DV(r,e,t){return br(r,e,{name:"d20",defaultSize:16,faceScale:.5,faces:[{instances:[{faceIndex:0,polygonCenter:!0,from:{type:"vertex",index:2},to:{type:"edge",index:1}}]},{instances:[{faceIndex:16,polygonCenter:!0,from:{type:"vertex",index:0},to:{type:"edge",index:2}}]},{instances:[{faceIndex:12,polygonCenter:!0,from:{type:"vertex",index:0},to:{type:"edge",index:2}}]},{instances:[{faceIndex:18,polygonCenter:!0,from:{type:"vertex",index:0},to:{type:"edge",index:2}}]},{instances:[{faceIndex:3,polygonCenter:!0,from:{type:"vertex",index:1},to:{type:"edge",index:0}}]},{instances:[{faceIndex:7,polygonCenter:!0,from:{type:"vertex",index:1},to:{type:"edge",index:0}}]},{instances:[{faceIndex:1,polygonCenter:!0,from:{type:"vertex",index:2},to:{type:"edge",index:1}}]},{instances:[{faceIndex:5,polygonCenter:!0,from:{type:"vertex",index:2},to:{type:"edge",index:1}}]},{instances:[{faceIndex:10,polygonCenter:!0,from:{type:"vertex",index:1},to:{type:"edge",index:0}}]},{instances:[{faceIndex:14,polygonCenter:!0,from:{type:"vertex",index:0},to:{type:"edge",index:2}}]},{instances:[{faceIndex:19,polygonCenter:!0,from:{type:"vertex",index:1},to:{type:"edge",index:0}}]},{instances:[{faceIndex:15,polygonCenter:!0,from:{type:"vertex",index:0},to:{type:"edge",index:2}}]},{instances:[{faceIndex:4,polygonCenter:!0,from:{type:"vertex",index:1},to:{type:"edge",index:0}}]},{instances:[{faceIndex:8,polygonCenter:!0,from:{type:"vertex",index:1},to:{type:"edge",index:0}}]},{instances:[{faceIndex:2,polygonCenter:!0,from:{type:"vertex",index:2},to:{type:"edge",index:1}}]},{instances:[{faceIndex:6,polygonCenter:!0,from:{type:"vertex",index:2},to:{type:"edge",index:1}}]},{instances:[{faceIndex:13,polygonCenter:!0,from:{type:"vertex",index:0},to:{type:"edge",index:2}}]},{instances:[{faceIndex:17,polygonCenter:!0,from:{type:"vertex",index:2},to:{type:"edge",index:1}}]},{instances:[{faceIndex:11,polygonCenter:!0,from:{type:"vertex",index:1},to:{type:"edge",index:0}}]},{instances:[{faceIndex:9,polygonCenter:!0,from:{type:"vertex",index:1},to:{type:"edge",index:0}}]}],extraOptions(){return{}},base({size:n}){return IV(n()/2)}},t)}const _c=vt,RV=rd,{Tree:av}=id,kV=(r,e)=>{if(!RV(r,e))return _c.create();const t=new av(_c.toPolygons(r)),n=new av(_c.toPolygons(e));t.invert(),n.clipTo(t),n.invert(),t.clipTo(n),n.clipTo(t),t.addPolygons(n.allPolygons()),t.invert();const i=t.allPolygons();return _c.create(i)};var FV=kV;const OV=Lt,BV=nd,NV=FV,UV=(...r)=>{r=OV(r);let e=r.shift();return r.forEach(t=>{e=NV(e,t)}),e=BV(e),e};var O2=UV;const VV=Lt,zV=vt,$V=Sl,GV=Jf,HV=Qf,WV=O2,qV=(...r)=>{r=VV(r);const e=r.map(i=>HV({z0:-1,z1:1},i)),t=WV(e),n=$V(t);return GV(n,zV.toPolygons(t))};var XV=qV;const YV=Lt,jV=Cu,ZV=kt,KV=vt,JV=XV,QV=O2,ez=(...r)=>{if(r=YV(r),r.length===0)throw new Error("wrong number of arguments");if(!jV(r))throw new Error("only intersect of the types are supported");const e=r[0];return ZV.isA(e)?JV(r):KV.isA(e)?QV(r):e};var tz=ez;const Ch=Ye,nz=Sl,lv=vt,rz=r=>r.sort((e,t)=>e-t).filter((e,t,n)=>!t||e!==n[t-1]),iz=(r,e,t)=>{const n=`${e}`,i=r.get(n);i===void 0?r.set(n,[t]):i.push(t)},sz=(r,e)=>{const t=`${e}`;return r.get(t)},oz=r=>{const e=nz(r),t=lv.toPolygons(r),n=t.length,i=new Map,s=Ch.create();t.forEach((f,d)=>{f.vertices.forEach(m=>{iz(i,Ch.snap(s,m,e),d)})});const o=t.map(f=>{let d=[];return f.vertices.forEach(m=>{d=d.concat(sz(i,Ch.snap(s,m,e)))}),{e:1,d:rz(d)}});i.clear();let a=0;const c=o.length;for(let f=0;f<c;f++){const d=o[f];if(d.e>0){const m=new Array(n);m[f]=!0;do a=0,m.forEach((v,S)=>{const x=o[S];if(x.e>0){x.e=-1;for(let w=0;w<x.d.length;w++)m[x.d[w]]=!0;a++}});while(a>0);d.indexes=m}}const u=[];for(let f=0;f<c;f++)if(o[f].indexes){const d=[];o[f].indexes.forEach((m,v)=>d.push(t[v])),u.push(lv.create(d))}return u};var az=oz;const lz=Lt,cz=vt,uz=az,hz=(...r)=>{if(r=lz(r),r.length===0)throw new Error("wrong number of arguments");const e=r.map(t=>cz.isA(t)?uz(t):t);return e.length===1?e[0]:e};var fz=hz,Es={intersect:tz,scission:fz,subtract:s2,union:a2};const dz=(()=>{let r=Hn.cube({size:1});r=Kt.translateZ(1/4,r);let e=r;return e=Es.intersect(e,r),e=Es.intersect(e,Kt.rotateX(Np*2,r)),e=Es.intersect(e,Kt.rotateX(-Np*2,r)),e})();function pz(r,e,t){return br(r,e,{name:"d3",defaultSize:16,faces:[{instances:[{faceIndex:0,from:{type:"edge",index:0},to:{type:"center"}},{faceIndex:1,from:{type:"edge",index:2},to:{type:"center"}}]},{instances:[{faceIndex:1,from:{type:"edge",index:0},to:{type:"center"}},{faceIndex:2,from:{type:"edge",index:2},to:{type:"center"}}]},{instances:[{faceIndex:0,from:{type:"edge",index:2},to:{type:"center"}},{faceIndex:2,from:{type:"edge",index:0},to:{type:"center"}}]}],extraOptions(n,i){const[s]=xn(n,24,360,1,24,"Segments"),o=Bt(()=>Kt.scale([i(),i(),i()],dz));return{segments:s,basePrism:o}},base({basePrism:n,size:i,segments:s}){const o=Hn.sphere({radius:i()/2,segments:s()});return Es.intersect(n(),o)},facesBase({basePrism:n}){return n()}},t)}function mz(r,e,t){return br(r,e,{name:"d4",defaultSize:16,faceScale:.5,faces:[{instances:[{faceIndex:3,from:{type:"vertex",index:1},to:{type:"center"}},{faceIndex:1,from:{type:"vertex",index:1},to:{type:"center"}},{faceIndex:2,from:{type:"vertex",index:0},to:{type:"center"}}]},{instances:[{faceIndex:3,from:{type:"vertex",index:0},to:{type:"center"}},{faceIndex:0,from:{type:"vertex",index:0},to:{type:"center"}},{faceIndex:2,from:{type:"vertex",index:1},to:{type:"center"}}]},{instances:[{faceIndex:3,from:{type:"vertex",index:2},to:{type:"center"}},{faceIndex:1,from:{type:"vertex",index:0},to:{type:"center"}},{faceIndex:0,from:{type:"vertex",index:1},to:{type:"center"}}]},{instances:[{faceIndex:0,from:{type:"vertex",index:2},to:{type:"center"}},{faceIndex:1,from:{type:"vertex",index:2},to:{type:"center"}},{faceIndex:2,from:{type:"vertex",index:2},to:{type:"center"}}]}],extraOptions(n,i){const s=Bt(()=>i()*Math.sqrt(3)/3),o=Bt(()=>i()*Math.sqrt(6)/3);return{baseRadius:s,pyramidHeight:o}},base({size:n,baseRadius:i,pyramidHeight:s}){const o=i(),a=n(),c=s(),u=a/2,f=-o/2;return Hn.polyhedron({points:[[0,o,0],[-u,f,0],[u,f,0],[0,0,c]],faces:[[0,1,2],[0,3,1],[0,2,3],[1,3,2]],orientation:"inward"})}},t)}function gz(r,e,t){return br(r,e,{name:"d4c",defaultSize:14,faces:[{instances:[{faceIndex:5,from:{type:"edge",index:3},to:{type:"edge",index:1}}]},{instances:[{faceIndex:0,from:{type:"edge",index:3},to:{type:"edge",index:1}}]},{instances:[{faceIndex:1,from:{type:"edge",index:2},to:{type:"edge",index:0}}]},{instances:[{faceIndex:4,from:{type:"edge",index:2},to:{type:"edge",index:0}}]}],extraOptions(n){const[i]=xn(n,1,40,1,21,"Body length"),[s]=xn(n,1,20,1,7,"Point length");return{length:i,pointLength:s}},base({size:n,length:i,pointLength:s}){const o=n()/2*Math.SQRT2;let a,c;return a=Hn.ellipsoid({radius:[o,s(),o],segments:4}),a=Kt.rotateY(Math.PI/4,a),c=Hn.cuboid({size:[n(),i(),n()]}),c=Es.union(c,Kt.translateY(-i()/2,a)),c=Es.union(c,Kt.translateY(i()/2,a)),c},facesBase({size:n}){return Hn.cube({size:n()})}},t)}function vz(r,e,t){return br(r,e,{name:"d4i",defaultSize:16,faces:[{instances:[{faceIndex:1,from:{type:"edge",index:3},to:{type:"edge",index:1}}]},{instances:[{faceIndex:3,from:{type:"edge",index:1},to:{type:"edge",index:3}}]},{instances:[{faceIndex:2,from:{type:"edge",index:0},to:{type:"edge",index:2}}]},{instances:[{faceIndex:0,from:{type:"edge",index:2},to:{type:"edge",index:0}}]}],extraOptions(n,i){const[s]=xn(n,0,20,.1,1.4,"Body length"),[o]=xn(n,4,360,2,24,"Curve segments");return{cylinderOffset:Bt(()=>i()/4+s()/2),length:s,segments:o}},base({size:n,cylinderOffset:i,segments:s}){const o=n(),a=o/2,c=i(),u=Hn.cylinder({height:o,radius:a,segments:s()}),f=Hn.cuboid({size:[o,c*2,o]}),d=Kt.translateY(c,u);let m=Kt.rotateY(nl,u);return m=Kt.translateY(-c,m),Es.union(d,f,m)},facesBase({size:n,cylinderOffset:i}){const s=i(),o=Hn.cube({size:n()}),a=Kt.translateY(s,o);let c=Kt.rotateY(nl,o);c=Kt.translateY(-s,c);const u=vt.toPolygons(a),f=vt.toPolygons(c);return vt.fromPoints([Zt(u,4).vertices,Zt(u,5).vertices,Zt(f,4).vertices,Zt(f,5).vertices])}},t)}const Sc=2/3;function bz(r,e,t){return br(r,e,{name:"d4p",defaultSize:14,faces:[{instances:[{faceIndex:2,from:{type:"edge",index:1},to:{type:"center"},t:Sc}]},{instances:[{faceIndex:3,from:{type:"edge",index:1},to:{type:"center"},t:Sc}]},{instances:[{faceIndex:1,from:{type:"edge",index:1},to:{type:"center"},t:Sc}]},{instances:[{faceIndex:0,from:{type:"edge",index:1},to:{type:"center"},t:Sc}]}],extraOptions(n){const[i]=xn(n,1,40,1,20,"Body length"),[s]=xn(n,1,40,1,6,"Point length");return{length1:i,length2:s}},base({size:n,length1:i,length2:s}){const o=n()/2,a=i(),c=s(),u=(i()-s())/2;return Hn.polyhedron({points:[[0,-a+u,0],[0,c+u,0],[-o,u,o],[o,u,o],[-o,u,-o],[o,u,-o]],faces:[[0,5,4],[0,3,5],[0,2,3],[0,4,2],[1,4,5],[1,5,3],[1,3,2],[1,2,4]],orientation:"inward"})}},t)}function xz(r,e,t){return br(r,e,{name:"d6",defaultSize:16,faces:[{instances:[{faceIndex:5,from:{type:"edge",index:3},to:{type:"edge",index:1}}]},{instances:[{faceIndex:2,from:{type:"edge",index:0},to:{type:"edge",index:2}}]},{instances:[{faceIndex:1,from:{type:"edge",index:1},to:{type:"edge",index:3}}]},{instances:[{faceIndex:0,from:{type:"edge",index:1},to:{type:"edge",index:3}}]},{instances:[{faceIndex:3,from:{type:"edge",index:2},to:{type:"edge",index:0}}]},{instances:[{faceIndex:4,from:{type:"edge",index:3},to:{type:"edge",index:1}}]}],extraOptions(){return{}},base({size:n}){return Hn.cube({size:n()})}},t)}const Co=Math.SQRT2/2,wz=Ru({points:[[0,0,Co],[0,0,-Co],[Co,0,0],[-Co,0,0],[0,Co,0],[0,-Co,0]],faces:[[0,2,4],[0,4,3],[0,3,5],[0,5,2],[1,2,5],[1,5,3],[1,3,4],[1,4,2]]}),yz=[0,4,3,7,2,6,1,5];function _z(r,e,t){const n=yz.map(i=>({instances:[{faceIndex:i,polygonCenter:!0,from:{type:"vertex",index:0},to:{type:"edge",index:2}}]}));return br(r,e,{name:"d8",defaultSize:16,faceScale:.6,faces:n,extraOptions(){return{}},base({size:i}){return wz(i()/2)}},t)}function Sz(r){document.addEventListener("dragover",e=>{e.preventDefault()}),document.addEventListener("drop",e=>{var i;e.preventDefault();const t=(i=e.dataTransfer)==null?void 0:i.files;if(t===void 0)return;const n=[];for(let s=0;s<t.length;s++){const o=t.item(s);o!==null&&n.push(o.arrayBuffer())}Promise.all(n).then(s=>{r(s)})})}function Cz(r){if(ux(r))return r.polygons.buffer;const e=[],t=[];let n=0;for(const o of r.polygons){const a=[],c=n;for(const u of o.vertices)e.push(...u),a.push(n++);for(let u=2;u<a.length;u++){const f=a[u-1]??c+u+1,d=a[u]??c+u+2;t.push(c,f,d)}}const i=new Zn,s=new jn(new Float32Array(e),3);return i.setAttribute("position",s),i.setIndex(t),i.computeVertexNormals(),r.polygons.buffer=i,i}function cv(r,e){const t=new mi(Cz(r),e);return t.applyMatrix4(new en().fromArray(r.transforms)),t.layers.mask=3,t}var cd={},ia={};ia.byteLength=Az;ia.toByteArray=Tz;ia.fromByteArray=Dz;var Vr=[],mr=[],Mz=typeof Uint8Array<"u"?Uint8Array:Array,Mh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Mo=0,Ez=Mh.length;Mo<Ez;++Mo)Vr[Mo]=Mh[Mo],mr[Mh.charCodeAt(Mo)]=Mo;mr["-".charCodeAt(0)]=62;mr["_".charCodeAt(0)]=63;function B2(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function Az(r){var e=B2(r),t=e[0],n=e[1];return(t+n)*3/4-n}function Pz(r,e,t){return(e+t)*3/4-t}function Tz(r){var e,t=B2(r),n=t[0],i=t[1],s=new Mz(Pz(r,n,i)),o=0,a=i>0?n-4:n,c;for(c=0;c<a;c+=4)e=mr[r.charCodeAt(c)]<<18|mr[r.charCodeAt(c+1)]<<12|mr[r.charCodeAt(c+2)]<<6|mr[r.charCodeAt(c+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=mr[r.charCodeAt(c)]<<2|mr[r.charCodeAt(c+1)]>>4,s[o++]=e&255),i===1&&(e=mr[r.charCodeAt(c)]<<10|mr[r.charCodeAt(c+1)]<<4|mr[r.charCodeAt(c+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function Lz(r){return Vr[r>>18&63]+Vr[r>>12&63]+Vr[r>>6&63]+Vr[r&63]}function Iz(r,e,t){for(var n,i=[],s=e;s<t;s+=3)n=(r[s]<<16&16711680)+(r[s+1]<<8&65280)+(r[s+2]&255),i.push(Lz(n));return i.join("")}function Dz(r){for(var e,t=r.length,n=t%3,i=[],s=16383,o=0,a=t-n;o<a;o+=s)i.push(Iz(r,o,o+s>a?a:o+s));return n===1?(e=r[t-1],i.push(Vr[e>>2]+Vr[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(Vr[e>>10]+Vr[e>>4&63]+Vr[e<<2&63]+"=")),i.join("")}var ud={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ud.read=function(r,e,t,n,i){var s,o,a=i*8-n-1,c=(1<<a)-1,u=c>>1,f=-7,d=t?i-1:0,m=t?-1:1,v=r[e+d];for(d+=m,s=v&(1<<-f)-1,v>>=-f,f+=a;f>0;s=s*256+r[e+d],d+=m,f-=8);for(o=s&(1<<-f)-1,s>>=-f,f+=n;f>0;o=o*256+r[e+d],d+=m,f-=8);if(s===0)s=1-u;else{if(s===c)return o?NaN:(v?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-u}return(v?-1:1)*o*Math.pow(2,s-n)};ud.write=function(r,e,t,n,i,s){var o,a,c,u=s*8-i-1,f=(1<<u)-1,d=f>>1,m=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=n?0:s-1,S=n?1:-1,x=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=f):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+d>=1?e+=m/c:e+=m*Math.pow(2,1-d),e*c>=2&&(o++,c/=2),o+d>=f?(a=0,o=f):o+d>=1?(a=(e*c-1)*Math.pow(2,i),o=o+d):(a=e*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;r[t+v]=a&255,v+=S,a/=256,i-=8);for(o=o<<i|a,u+=i;u>0;r[t+v]=o&255,v+=S,o/=256,u-=8);r[t+v-S]|=x*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){const e=ia,t=ud,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=a,r.SlowBuffer=T,r.INSPECT_MAX_BYTES=50;const i=2147483647;r.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const L=new Uint8Array(1),_={foo:function(){return 42}};return Object.setPrototypeOf(_,Uint8Array.prototype),Object.setPrototypeOf(L,_),L.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(L){if(L>i)throw new RangeError('The value "'+L+'" is invalid for option "size"');const _=new Uint8Array(L);return Object.setPrototypeOf(_,a.prototype),_}function a(L,_,b){if(typeof L=="number"){if(typeof _=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(L)}return c(L,_,b)}a.poolSize=8192;function c(L,_,b){if(typeof L=="string")return m(L,_);if(ArrayBuffer.isView(L))return S(L);if(L==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof L);if(N(L,ArrayBuffer)||L&&N(L.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(N(L,SharedArrayBuffer)||L&&N(L.buffer,SharedArrayBuffer)))return x(L,_,b);if(typeof L=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const I=L.valueOf&&L.valueOf();if(I!=null&&I!==L)return a.from(I,_,b);const $=w(L);if($)return $;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof L[Symbol.toPrimitive]=="function")return a.from(L[Symbol.toPrimitive]("string"),_,b);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof L)}a.from=function(L,_,b){return c(L,_,b)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function u(L){if(typeof L!="number")throw new TypeError('"size" argument must be of type number');if(L<0)throw new RangeError('The value "'+L+'" is invalid for option "size"')}function f(L,_,b){return u(L),L<=0?o(L):_!==void 0?typeof b=="string"?o(L).fill(_,b):o(L).fill(_):o(L)}a.alloc=function(L,_,b){return f(L,_,b)};function d(L){return u(L),o(L<0?0:A(L)|0)}a.allocUnsafe=function(L){return d(L)},a.allocUnsafeSlow=function(L){return d(L)};function m(L,_){if((typeof _!="string"||_==="")&&(_="utf8"),!a.isEncoding(_))throw new TypeError("Unknown encoding: "+_);const b=E(L,_)|0;let I=o(b);const $=I.write(L,_);return $!==b&&(I=I.slice(0,$)),I}function v(L){const _=L.length<0?0:A(L.length)|0,b=o(_);for(let I=0;I<_;I+=1)b[I]=L[I]&255;return b}function S(L){if(N(L,Uint8Array)){const _=new Uint8Array(L);return x(_.buffer,_.byteOffset,_.byteLength)}return v(L)}function x(L,_,b){if(_<0||L.byteLength<_)throw new RangeError('"offset" is outside of buffer bounds');if(L.byteLength<_+(b||0))throw new RangeError('"length" is outside of buffer bounds');let I;return _===void 0&&b===void 0?I=new Uint8Array(L):b===void 0?I=new Uint8Array(L,_):I=new Uint8Array(L,_,b),Object.setPrototypeOf(I,a.prototype),I}function w(L){if(a.isBuffer(L)){const _=A(L.length)|0,b=o(_);return b.length===0||L.copy(b,0,0,_),b}if(L.length!==void 0)return typeof L.length!="number"||B(L.length)?o(0):v(L);if(L.type==="Buffer"&&Array.isArray(L.data))return v(L.data)}function A(L){if(L>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return L|0}function T(L){return+L!=L&&(L=0),a.alloc(+L)}a.isBuffer=function(_){return _!=null&&_._isBuffer===!0&&_!==a.prototype},a.compare=function(_,b){if(N(_,Uint8Array)&&(_=a.from(_,_.offset,_.byteLength)),N(b,Uint8Array)&&(b=a.from(b,b.offset,b.byteLength)),!a.isBuffer(_)||!a.isBuffer(b))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(_===b)return 0;let I=_.length,$=b.length;for(let W=0,X=Math.min(I,$);W<X;++W)if(_[W]!==b[W]){I=_[W],$=b[W];break}return I<$?-1:$<I?1:0},a.isEncoding=function(_){switch(String(_).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(_,b){if(!Array.isArray(_))throw new TypeError('"list" argument must be an Array of Buffers');if(_.length===0)return a.alloc(0);let I;if(b===void 0)for(b=0,I=0;I<_.length;++I)b+=_[I].length;const $=a.allocUnsafe(b);let W=0;for(I=0;I<_.length;++I){let X=_[I];if(N(X,Uint8Array))W+X.length>$.length?(a.isBuffer(X)||(X=a.from(X)),X.copy($,W)):Uint8Array.prototype.set.call($,X,W);else if(a.isBuffer(X))X.copy($,W);else throw new TypeError('"list" argument must be an Array of Buffers');W+=X.length}return $};function E(L,_){if(a.isBuffer(L))return L.length;if(ArrayBuffer.isView(L)||N(L,ArrayBuffer))return L.byteLength;if(typeof L!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof L);const b=L.length,I=arguments.length>2&&arguments[2]===!0;if(!I&&b===0)return 0;let $=!1;for(;;)switch(_){case"ascii":case"latin1":case"binary":return b;case"utf8":case"utf-8":return Ie(L).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b*2;case"hex":return b>>>1;case"base64":return tt(L).length;default:if($)return I?-1:Ie(L).length;_=(""+_).toLowerCase(),$=!0}}a.byteLength=E;function P(L,_,b){let I=!1;if((_===void 0||_<0)&&(_=0),_>this.length||((b===void 0||b>this.length)&&(b=this.length),b<=0)||(b>>>=0,_>>>=0,b<=_))return"";for(L||(L="utf8");;)switch(L){case"hex":return Ee(this,_,b);case"utf8":case"utf-8":return V(this,_,b);case"ascii":return ge(this,_,b);case"latin1":case"binary":return K(this,_,b);case"base64":return G(this,_,b);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Pe(this,_,b);default:if(I)throw new TypeError("Unknown encoding: "+L);L=(L+"").toLowerCase(),I=!0}}a.prototype._isBuffer=!0;function y(L,_,b){const I=L[_];L[_]=L[b],L[b]=I}a.prototype.swap16=function(){const _=this.length;if(_%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let b=0;b<_;b+=2)y(this,b,b+1);return this},a.prototype.swap32=function(){const _=this.length;if(_%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let b=0;b<_;b+=4)y(this,b,b+3),y(this,b+1,b+2);return this},a.prototype.swap64=function(){const _=this.length;if(_%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let b=0;b<_;b+=8)y(this,b,b+7),y(this,b+1,b+6),y(this,b+2,b+5),y(this,b+3,b+4);return this},a.prototype.toString=function(){const _=this.length;return _===0?"":arguments.length===0?V(this,0,_):P.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(_){if(!a.isBuffer(_))throw new TypeError("Argument must be a Buffer");return this===_?!0:a.compare(this,_)===0},a.prototype.inspect=function(){let _="";const b=r.INSPECT_MAX_BYTES;return _=this.toString("hex",0,b).replace(/(.{2})/g,"$1 ").trim(),this.length>b&&(_+=" ... "),"<Buffer "+_+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(_,b,I,$,W){if(N(_,Uint8Array)&&(_=a.from(_,_.offset,_.byteLength)),!a.isBuffer(_))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof _);if(b===void 0&&(b=0),I===void 0&&(I=_?_.length:0),$===void 0&&($=0),W===void 0&&(W=this.length),b<0||I>_.length||$<0||W>this.length)throw new RangeError("out of range index");if($>=W&&b>=I)return 0;if($>=W)return-1;if(b>=I)return 1;if(b>>>=0,I>>>=0,$>>>=0,W>>>=0,this===_)return 0;let X=W-$,Te=I-b;const Be=Math.min(X,Te),We=this.slice($,W),qe=_.slice(b,I);for(let Xe=0;Xe<Be;++Xe)if(We[Xe]!==qe[Xe]){X=We[Xe],Te=qe[Xe];break}return X<Te?-1:Te<X?1:0};function k(L,_,b,I,$){if(L.length===0)return-1;if(typeof b=="string"?(I=b,b=0):b>2147483647?b=2147483647:b<-2147483648&&(b=-2147483648),b=+b,B(b)&&(b=$?0:L.length-1),b<0&&(b=L.length+b),b>=L.length){if($)return-1;b=L.length-1}else if(b<0)if($)b=0;else return-1;if(typeof _=="string"&&(_=a.from(_,I)),a.isBuffer(_))return _.length===0?-1:F(L,_,b,I,$);if(typeof _=="number")return _=_&255,typeof Uint8Array.prototype.indexOf=="function"?$?Uint8Array.prototype.indexOf.call(L,_,b):Uint8Array.prototype.lastIndexOf.call(L,_,b):F(L,[_],b,I,$);throw new TypeError("val must be string, number or Buffer")}function F(L,_,b,I,$){let W=1,X=L.length,Te=_.length;if(I!==void 0&&(I=String(I).toLowerCase(),I==="ucs2"||I==="ucs-2"||I==="utf16le"||I==="utf-16le")){if(L.length<2||_.length<2)return-1;W=2,X/=2,Te/=2,b/=2}function Be(qe,Xe){return W===1?qe[Xe]:qe.readUInt16BE(Xe*W)}let We;if($){let qe=-1;for(We=b;We<X;We++)if(Be(L,We)===Be(_,qe===-1?0:We-qe)){if(qe===-1&&(qe=We),We-qe+1===Te)return qe*W}else qe!==-1&&(We-=We-qe),qe=-1}else for(b+Te>X&&(b=X-Te),We=b;We>=0;We--){let qe=!0;for(let Xe=0;Xe<Te;Xe++)if(Be(L,We+Xe)!==Be(_,Xe)){qe=!1;break}if(qe)return We}return-1}a.prototype.includes=function(_,b,I){return this.indexOf(_,b,I)!==-1},a.prototype.indexOf=function(_,b,I){return k(this,_,b,I,!0)},a.prototype.lastIndexOf=function(_,b,I){return k(this,_,b,I,!1)};function M(L,_,b,I){b=Number(b)||0;const $=L.length-b;I?(I=Number(I),I>$&&(I=$)):I=$;const W=_.length;I>W/2&&(I=W/2);let X;for(X=0;X<I;++X){const Te=parseInt(_.substr(X*2,2),16);if(B(Te))return X;L[b+X]=Te}return X}function R(L,_,b,I){return Ze(Ie(_,L.length-b),L,b,I)}function O(L,_,b,I){return Ze(Ce(_),L,b,I)}function z(L,_,b,I){return Ze(tt(_),L,b,I)}function Q(L,_,b,I){return Ze(Oe(_,L.length-b),L,b,I)}a.prototype.write=function(_,b,I,$){if(b===void 0)$="utf8",I=this.length,b=0;else if(I===void 0&&typeof b=="string")$=b,I=this.length,b=0;else if(isFinite(b))b=b>>>0,isFinite(I)?(I=I>>>0,$===void 0&&($="utf8")):($=I,I=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const W=this.length-b;if((I===void 0||I>W)&&(I=W),_.length>0&&(I<0||b<0)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");$||($="utf8");let X=!1;for(;;)switch($){case"hex":return M(this,_,b,I);case"utf8":case"utf-8":return R(this,_,b,I);case"ascii":case"latin1":case"binary":return O(this,_,b,I);case"base64":return z(this,_,b,I);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Q(this,_,b,I);default:if(X)throw new TypeError("Unknown encoding: "+$);$=(""+$).toLowerCase(),X=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function G(L,_,b){return _===0&&b===L.length?e.fromByteArray(L):e.fromByteArray(L.slice(_,b))}function V(L,_,b){b=Math.min(L.length,b);const I=[];let $=_;for(;$<b;){const W=L[$];let X=null,Te=W>239?4:W>223?3:W>191?2:1;if($+Te<=b){let Be,We,qe,Xe;switch(Te){case 1:W<128&&(X=W);break;case 2:Be=L[$+1],(Be&192)===128&&(Xe=(W&31)<<6|Be&63,Xe>127&&(X=Xe));break;case 3:Be=L[$+1],We=L[$+2],(Be&192)===128&&(We&192)===128&&(Xe=(W&15)<<12|(Be&63)<<6|We&63,Xe>2047&&(Xe<55296||Xe>57343)&&(X=Xe));break;case 4:Be=L[$+1],We=L[$+2],qe=L[$+3],(Be&192)===128&&(We&192)===128&&(qe&192)===128&&(Xe=(W&15)<<18|(Be&63)<<12|(We&63)<<6|qe&63,Xe>65535&&Xe<1114112&&(X=Xe))}}X===null?(X=65533,Te=1):X>65535&&(X-=65536,I.push(X>>>10&1023|55296),X=56320|X&1023),I.push(X),$+=Te}return j(I)}const q=4096;function j(L){const _=L.length;if(_<=q)return String.fromCharCode.apply(String,L);let b="",I=0;for(;I<_;)b+=String.fromCharCode.apply(String,L.slice(I,I+=q));return b}function ge(L,_,b){let I="";b=Math.min(L.length,b);for(let $=_;$<b;++$)I+=String.fromCharCode(L[$]&127);return I}function K(L,_,b){let I="";b=Math.min(L.length,b);for(let $=_;$<b;++$)I+=String.fromCharCode(L[$]);return I}function Ee(L,_,b){const I=L.length;(!_||_<0)&&(_=0),(!b||b<0||b>I)&&(b=I);let $="";for(let W=_;W<b;++W)$+=oe[L[W]];return $}function Pe(L,_,b){const I=L.slice(_,b);let $="";for(let W=0;W<I.length-1;W+=2)$+=String.fromCharCode(I[W]+I[W+1]*256);return $}a.prototype.slice=function(_,b){const I=this.length;_=~~_,b=b===void 0?I:~~b,_<0?(_+=I,_<0&&(_=0)):_>I&&(_=I),b<0?(b+=I,b<0&&(b=0)):b>I&&(b=I),b<_&&(b=_);const $=this.subarray(_,b);return Object.setPrototypeOf($,a.prototype),$};function re(L,_,b){if(L%1!==0||L<0)throw new RangeError("offset is not uint");if(L+_>b)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(_,b,I){_=_>>>0,b=b>>>0,I||re(_,b,this.length);let $=this[_],W=1,X=0;for(;++X<b&&(W*=256);)$+=this[_+X]*W;return $},a.prototype.readUintBE=a.prototype.readUIntBE=function(_,b,I){_=_>>>0,b=b>>>0,I||re(_,b,this.length);let $=this[_+--b],W=1;for(;b>0&&(W*=256);)$+=this[_+--b]*W;return $},a.prototype.readUint8=a.prototype.readUInt8=function(_,b){return _=_>>>0,b||re(_,1,this.length),this[_]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(_,b){return _=_>>>0,b||re(_,2,this.length),this[_]|this[_+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(_,b){return _=_>>>0,b||re(_,2,this.length),this[_]<<8|this[_+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(_,b){return _=_>>>0,b||re(_,4,this.length),(this[_]|this[_+1]<<8|this[_+2]<<16)+this[_+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(_,b){return _=_>>>0,b||re(_,4,this.length),this[_]*16777216+(this[_+1]<<16|this[_+2]<<8|this[_+3])},a.prototype.readBigUInt64LE=Me(function(_){_=_>>>0,se(_,"offset");const b=this[_],I=this[_+7];(b===void 0||I===void 0)&&me(_,this.length-8);const $=b+this[++_]*2**8+this[++_]*2**16+this[++_]*2**24,W=this[++_]+this[++_]*2**8+this[++_]*2**16+I*2**24;return BigInt($)+(BigInt(W)<<BigInt(32))}),a.prototype.readBigUInt64BE=Me(function(_){_=_>>>0,se(_,"offset");const b=this[_],I=this[_+7];(b===void 0||I===void 0)&&me(_,this.length-8);const $=b*2**24+this[++_]*2**16+this[++_]*2**8+this[++_],W=this[++_]*2**24+this[++_]*2**16+this[++_]*2**8+I;return(BigInt($)<<BigInt(32))+BigInt(W)}),a.prototype.readIntLE=function(_,b,I){_=_>>>0,b=b>>>0,I||re(_,b,this.length);let $=this[_],W=1,X=0;for(;++X<b&&(W*=256);)$+=this[_+X]*W;return W*=128,$>=W&&($-=Math.pow(2,8*b)),$},a.prototype.readIntBE=function(_,b,I){_=_>>>0,b=b>>>0,I||re(_,b,this.length);let $=b,W=1,X=this[_+--$];for(;$>0&&(W*=256);)X+=this[_+--$]*W;return W*=128,X>=W&&(X-=Math.pow(2,8*b)),X},a.prototype.readInt8=function(_,b){return _=_>>>0,b||re(_,1,this.length),this[_]&128?(255-this[_]+1)*-1:this[_]},a.prototype.readInt16LE=function(_,b){_=_>>>0,b||re(_,2,this.length);const I=this[_]|this[_+1]<<8;return I&32768?I|4294901760:I},a.prototype.readInt16BE=function(_,b){_=_>>>0,b||re(_,2,this.length);const I=this[_+1]|this[_]<<8;return I&32768?I|4294901760:I},a.prototype.readInt32LE=function(_,b){return _=_>>>0,b||re(_,4,this.length),this[_]|this[_+1]<<8|this[_+2]<<16|this[_+3]<<24},a.prototype.readInt32BE=function(_,b){return _=_>>>0,b||re(_,4,this.length),this[_]<<24|this[_+1]<<16|this[_+2]<<8|this[_+3]},a.prototype.readBigInt64LE=Me(function(_){_=_>>>0,se(_,"offset");const b=this[_],I=this[_+7];(b===void 0||I===void 0)&&me(_,this.length-8);const $=this[_+4]+this[_+5]*2**8+this[_+6]*2**16+(I<<24);return(BigInt($)<<BigInt(32))+BigInt(b+this[++_]*2**8+this[++_]*2**16+this[++_]*2**24)}),a.prototype.readBigInt64BE=Me(function(_){_=_>>>0,se(_,"offset");const b=this[_],I=this[_+7];(b===void 0||I===void 0)&&me(_,this.length-8);const $=(b<<24)+this[++_]*2**16+this[++_]*2**8+this[++_];return(BigInt($)<<BigInt(32))+BigInt(this[++_]*2**24+this[++_]*2**16+this[++_]*2**8+I)}),a.prototype.readFloatLE=function(_,b){return _=_>>>0,b||re(_,4,this.length),t.read(this,_,!0,23,4)},a.prototype.readFloatBE=function(_,b){return _=_>>>0,b||re(_,4,this.length),t.read(this,_,!1,23,4)},a.prototype.readDoubleLE=function(_,b){return _=_>>>0,b||re(_,8,this.length),t.read(this,_,!0,52,8)},a.prototype.readDoubleBE=function(_,b){return _=_>>>0,b||re(_,8,this.length),t.read(this,_,!1,52,8)};function ae(L,_,b,I,$,W){if(!a.isBuffer(L))throw new TypeError('"buffer" argument must be a Buffer instance');if(_>$||_<W)throw new RangeError('"value" argument is out of bounds');if(b+I>L.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(_,b,I,$){if(_=+_,b=b>>>0,I=I>>>0,!$){const Te=Math.pow(2,8*I)-1;ae(this,_,b,I,Te,0)}let W=1,X=0;for(this[b]=_&255;++X<I&&(W*=256);)this[b+X]=_/W&255;return b+I},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(_,b,I,$){if(_=+_,b=b>>>0,I=I>>>0,!$){const Te=Math.pow(2,8*I)-1;ae(this,_,b,I,Te,0)}let W=I-1,X=1;for(this[b+W]=_&255;--W>=0&&(X*=256);)this[b+W]=_/X&255;return b+I},a.prototype.writeUint8=a.prototype.writeUInt8=function(_,b,I){return _=+_,b=b>>>0,I||ae(this,_,b,1,255,0),this[b]=_&255,b+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(_,b,I){return _=+_,b=b>>>0,I||ae(this,_,b,2,65535,0),this[b]=_&255,this[b+1]=_>>>8,b+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(_,b,I){return _=+_,b=b>>>0,I||ae(this,_,b,2,65535,0),this[b]=_>>>8,this[b+1]=_&255,b+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(_,b,I){return _=+_,b=b>>>0,I||ae(this,_,b,4,4294967295,0),this[b+3]=_>>>24,this[b+2]=_>>>16,this[b+1]=_>>>8,this[b]=_&255,b+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(_,b,I){return _=+_,b=b>>>0,I||ae(this,_,b,4,4294967295,0),this[b]=_>>>24,this[b+1]=_>>>16,this[b+2]=_>>>8,this[b+3]=_&255,b+4};function xe(L,_,b,I,$){te(_,I,$,L,b,7);let W=Number(_&BigInt(4294967295));L[b++]=W,W=W>>8,L[b++]=W,W=W>>8,L[b++]=W,W=W>>8,L[b++]=W;let X=Number(_>>BigInt(32)&BigInt(4294967295));return L[b++]=X,X=X>>8,L[b++]=X,X=X>>8,L[b++]=X,X=X>>8,L[b++]=X,b}function be(L,_,b,I,$){te(_,I,$,L,b,7);let W=Number(_&BigInt(4294967295));L[b+7]=W,W=W>>8,L[b+6]=W,W=W>>8,L[b+5]=W,W=W>>8,L[b+4]=W;let X=Number(_>>BigInt(32)&BigInt(4294967295));return L[b+3]=X,X=X>>8,L[b+2]=X,X=X>>8,L[b+1]=X,X=X>>8,L[b]=X,b+8}a.prototype.writeBigUInt64LE=Me(function(_,b=0){return xe(this,_,b,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Me(function(_,b=0){return be(this,_,b,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(_,b,I,$){if(_=+_,b=b>>>0,!$){const Be=Math.pow(2,8*I-1);ae(this,_,b,I,Be-1,-Be)}let W=0,X=1,Te=0;for(this[b]=_&255;++W<I&&(X*=256);)_<0&&Te===0&&this[b+W-1]!==0&&(Te=1),this[b+W]=(_/X>>0)-Te&255;return b+I},a.prototype.writeIntBE=function(_,b,I,$){if(_=+_,b=b>>>0,!$){const Be=Math.pow(2,8*I-1);ae(this,_,b,I,Be-1,-Be)}let W=I-1,X=1,Te=0;for(this[b+W]=_&255;--W>=0&&(X*=256);)_<0&&Te===0&&this[b+W+1]!==0&&(Te=1),this[b+W]=(_/X>>0)-Te&255;return b+I},a.prototype.writeInt8=function(_,b,I){return _=+_,b=b>>>0,I||ae(this,_,b,1,127,-128),_<0&&(_=255+_+1),this[b]=_&255,b+1},a.prototype.writeInt16LE=function(_,b,I){return _=+_,b=b>>>0,I||ae(this,_,b,2,32767,-32768),this[b]=_&255,this[b+1]=_>>>8,b+2},a.prototype.writeInt16BE=function(_,b,I){return _=+_,b=b>>>0,I||ae(this,_,b,2,32767,-32768),this[b]=_>>>8,this[b+1]=_&255,b+2},a.prototype.writeInt32LE=function(_,b,I){return _=+_,b=b>>>0,I||ae(this,_,b,4,2147483647,-2147483648),this[b]=_&255,this[b+1]=_>>>8,this[b+2]=_>>>16,this[b+3]=_>>>24,b+4},a.prototype.writeInt32BE=function(_,b,I){return _=+_,b=b>>>0,I||ae(this,_,b,4,2147483647,-2147483648),_<0&&(_=4294967295+_+1),this[b]=_>>>24,this[b+1]=_>>>16,this[b+2]=_>>>8,this[b+3]=_&255,b+4},a.prototype.writeBigInt64LE=Me(function(_,b=0){return xe(this,_,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Me(function(_,b=0){return be(this,_,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function De(L,_,b,I,$,W){if(b+I>L.length)throw new RangeError("Index out of range");if(b<0)throw new RangeError("Index out of range")}function ve(L,_,b,I,$){return _=+_,b=b>>>0,$||De(L,_,b,4),t.write(L,_,b,I,23,4),b+4}a.prototype.writeFloatLE=function(_,b,I){return ve(this,_,b,!0,I)},a.prototype.writeFloatBE=function(_,b,I){return ve(this,_,b,!1,I)};function Je(L,_,b,I,$){return _=+_,b=b>>>0,$||De(L,_,b,8),t.write(L,_,b,I,52,8),b+8}a.prototype.writeDoubleLE=function(_,b,I){return Je(this,_,b,!0,I)},a.prototype.writeDoubleBE=function(_,b,I){return Je(this,_,b,!1,I)},a.prototype.copy=function(_,b,I,$){if(!a.isBuffer(_))throw new TypeError("argument should be a Buffer");if(I||(I=0),!$&&$!==0&&($=this.length),b>=_.length&&(b=_.length),b||(b=0),$>0&&$<I&&($=I),$===I||_.length===0||this.length===0)return 0;if(b<0)throw new RangeError("targetStart out of bounds");if(I<0||I>=this.length)throw new RangeError("Index out of range");if($<0)throw new RangeError("sourceEnd out of bounds");$>this.length&&($=this.length),_.length-b<$-I&&($=_.length-b+I);const W=$-I;return this===_&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(b,I,$):Uint8Array.prototype.set.call(_,this.subarray(I,$),b),W},a.prototype.fill=function(_,b,I,$){if(typeof _=="string"){if(typeof b=="string"?($=b,b=0,I=this.length):typeof I=="string"&&($=I,I=this.length),$!==void 0&&typeof $!="string")throw new TypeError("encoding must be a string");if(typeof $=="string"&&!a.isEncoding($))throw new TypeError("Unknown encoding: "+$);if(_.length===1){const X=_.charCodeAt(0);($==="utf8"&&X<128||$==="latin1")&&(_=X)}}else typeof _=="number"?_=_&255:typeof _=="boolean"&&(_=Number(_));if(b<0||this.length<b||this.length<I)throw new RangeError("Out of range index");if(I<=b)return this;b=b>>>0,I=I===void 0?this.length:I>>>0,_||(_=0);let W;if(typeof _=="number")for(W=b;W<I;++W)this[W]=_;else{const X=a.isBuffer(_)?_:a.from(_,$),Te=X.length;if(Te===0)throw new TypeError('The value "'+_+'" is invalid for argument "value"');for(W=0;W<I-b;++W)this[W+b]=X[W%Te]}return this};const pe={};function he(L,_,b){pe[L]=class extends b{constructor(){super(),Object.defineProperty(this,"message",{value:_.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${L}]`,this.stack,delete this.name}get code(){return L}set code($){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:$,writable:!0})}toString(){return`${this.name} [${L}]: ${this.message}`}}}he("ERR_BUFFER_OUT_OF_BOUNDS",function(L){return L?`${L} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),he("ERR_INVALID_ARG_TYPE",function(L,_){return`The "${L}" argument must be of type number. Received type ${typeof _}`},TypeError),he("ERR_OUT_OF_RANGE",function(L,_,b){let I=`The value of "${L}" is out of range.`,$=b;return Number.isInteger(b)&&Math.abs(b)>2**32?$=le(String(b)):typeof b=="bigint"&&($=String(b),(b>BigInt(2)**BigInt(32)||b<-(BigInt(2)**BigInt(32)))&&($=le($)),$+="n"),I+=` It must be ${_}. Received ${$}`,I},RangeError);function le(L){let _="",b=L.length;const I=L[0]==="-"?1:0;for(;b>=I+4;b-=3)_=`_${L.slice(b-3,b)}${_}`;return`${L.slice(0,b)}${_}`}function ue(L,_,b){se(_,"offset"),(L[_]===void 0||L[_+b]===void 0)&&me(_,L.length-(b+1))}function te(L,_,b,I,$,W){if(L>b||L<_){const X=typeof _=="bigint"?"n":"";let Te;throw W>3?_===0||_===BigInt(0)?Te=`>= 0${X} and < 2${X} ** ${(W+1)*8}${X}`:Te=`>= -(2${X} ** ${(W+1)*8-1}${X}) and < 2 ** ${(W+1)*8-1}${X}`:Te=`>= ${_}${X} and <= ${b}${X}`,new pe.ERR_OUT_OF_RANGE("value",Te,L)}ue(I,$,W)}function se(L,_){if(typeof L!="number")throw new pe.ERR_INVALID_ARG_TYPE(_,"number",L)}function me(L,_,b){throw Math.floor(L)!==L?(se(L,b),new pe.ERR_OUT_OF_RANGE(b||"offset","an integer",L)):_<0?new pe.ERR_BUFFER_OUT_OF_BOUNDS:new pe.ERR_OUT_OF_RANGE(b||"offset",`>= ${b?1:0} and <= ${_}`,L)}const _e=/[^+/0-9A-Za-z-_]/g;function we(L){if(L=L.split("=")[0],L=L.trim().replace(_e,""),L.length<2)return"";for(;L.length%4!==0;)L=L+"=";return L}function Ie(L,_){_=_||1/0;let b;const I=L.length;let $=null;const W=[];for(let X=0;X<I;++X){if(b=L.charCodeAt(X),b>55295&&b<57344){if(!$){if(b>56319){(_-=3)>-1&&W.push(239,191,189);continue}else if(X+1===I){(_-=3)>-1&&W.push(239,191,189);continue}$=b;continue}if(b<56320){(_-=3)>-1&&W.push(239,191,189),$=b;continue}b=($-55296<<10|b-56320)+65536}else $&&(_-=3)>-1&&W.push(239,191,189);if($=null,b<128){if((_-=1)<0)break;W.push(b)}else if(b<2048){if((_-=2)<0)break;W.push(b>>6|192,b&63|128)}else if(b<65536){if((_-=3)<0)break;W.push(b>>12|224,b>>6&63|128,b&63|128)}else if(b<1114112){if((_-=4)<0)break;W.push(b>>18|240,b>>12&63|128,b>>6&63|128,b&63|128)}else throw new Error("Invalid code point")}return W}function Ce(L){const _=[];for(let b=0;b<L.length;++b)_.push(L.charCodeAt(b)&255);return _}function Oe(L,_){let b,I,$;const W=[];for(let X=0;X<L.length&&!((_-=2)<0);++X)b=L.charCodeAt(X),I=b>>8,$=b%256,W.push($),W.push(I);return W}function tt(L){return e.toByteArray(we(L))}function Ze(L,_,b,I){let $;for($=0;$<I&&!($+b>=_.length||$>=L.length);++$)_[$+b]=L[$];return $}function N(L,_){return L instanceof _||L!=null&&L.constructor!=null&&L.constructor.name!=null&&L.constructor.name===_.name}function B(L){return L!==L}const oe=function(){const L="0123456789abcdef",_=new Array(256);for(let b=0;b<16;++b){const I=b*16;for(let $=0;$<16;++$)_[I+$]=L[b]+L[$]}return _}();function Me(L){return typeof BigInt>"u"?Re:L}function Re(){throw new Error("BigInt not supported")}})(cd);var pf={},Rz={get exports(){return pf},set exports(r){pf=r}};(function(r,e){(function(t,n){n()})(Po,function(){function t(u,f){return typeof f>"u"?f={autoBom:!1}:typeof f!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),f={autoBom:!f}),f.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u}function n(u,f,d){var m=new XMLHttpRequest;m.open("GET",u),m.responseType="blob",m.onload=function(){c(m.response,f,d)},m.onerror=function(){console.error("could not download file")},m.send()}function i(u){var f=new XMLHttpRequest;f.open("HEAD",u,!1);try{f.send()}catch{}return 200<=f.status&&299>=f.status}function s(u){try{u.dispatchEvent(new MouseEvent("click"))}catch{var f=document.createEvent("MouseEvents");f.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(f)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Po=="object"&&Po.global===Po?Po:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(u,f,d){var m=o.URL||o.webkitURL,v=document.createElement("a");f=f||u.name||"download",v.download=f,v.rel="noopener",typeof u=="string"?(v.href=u,v.origin===location.origin?s(v):i(v.href)?n(u,f,d):s(v,v.target="_blank")):(v.href=m.createObjectURL(u),setTimeout(function(){m.revokeObjectURL(v.href)},4e4),setTimeout(function(){s(v)},0))}:"msSaveOrOpenBlob"in navigator?function(u,f,d){if(f=f||u.name||"download",typeof u!="string")navigator.msSaveOrOpenBlob(t(u,d),f);else if(i(u))n(u,f,d);else{var m=document.createElement("a");m.href=u,m.target="_blank",setTimeout(function(){s(m)})}}:function(u,f,d,m){if(m=m||open("","_blank"),m&&(m.document.title=m.document.body.innerText="downloading..."),typeof u=="string")return n(u,f,d);var v=u.type==="application/octet-stream",S=/constructor/i.test(o.HTMLElement)||o.safari,x=/CriOS\/[\d]+/.test(navigator.userAgent);if((x||v&&S||a)&&typeof FileReader<"u"){var w=new FileReader;w.onloadend=function(){var E=w.result;E=x?E:E.replace(/^data:[^;]*;/,"data:attachment/file;"),m?m.location.href=E:location=E,m=null},w.readAsDataURL(u)}else{var A=o.URL||o.webkitURL,T=A.createObjectURL(u);m?m.location=T:location.href=T,m=null,setTimeout(function(){A.revokeObjectURL(T)},4e4)}});o.saveAs=c.saveAs=c,r.exports=c})})(Rz);const kz={utf16le:"utf-16le",ucs2:"utf-16le",utf16be:"utf-16be"};class Sn{constructor(e){this.buffer=e,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.pos=0,this.length=this.buffer.length}readString(e,t="ascii"){t=kz[t]||t;let n=this.readBuffer(e);try{return new TextDecoder(t).decode(n)}catch{return n}}readBuffer(e){return this.buffer.slice(this.pos,this.pos+=e)}readUInt24BE(){return(this.readUInt16BE()<<8)+this.readUInt8()}readUInt24LE(){return this.readUInt16LE()+(this.readUInt8()<<16)}readInt24BE(){return(this.readInt16BE()<<8)+this.readUInt8()}readInt24LE(){return this.readUInt16LE()+(this.readInt8()<<16)}}Sn.TYPES={UInt8:1,UInt16:2,UInt24:3,UInt32:4,Int8:1,Int16:2,Int24:3,Int32:4,Float:4,Double:8};for(let r of Object.getOwnPropertyNames(DataView.prototype))if(r.slice(0,3)==="get"){let e=r.slice(3).replace("Ui","UI");e==="Float32"?e="Float":e==="Float64"&&(e="Double");let t=Sn.TYPES[e];Sn.prototype["read"+e+(t===1?"":"BE")]=function(){const n=this.view[r](this.pos,!1);return this.pos+=t,n},t!==1&&(Sn.prototype["read"+e+"LE"]=function(){const n=this.view[r](this.pos,!0);return this.pos+=t,n})}const Fz=new TextEncoder,uv=new Uint8Array(new Uint16Array([4660]).buffer)[0]==18;class jc{constructor(e){this.buffer=e,this.view=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),this.pos=0}writeBuffer(e){this.buffer.set(e,this.pos),this.pos+=e.length}writeString(e,t="ascii"){let n;switch(t){case"utf16le":case"utf16-le":case"ucs2":n=hv(e,uv);break;case"utf16be":case"utf16-be":n=hv(e,!uv);break;case"utf8":n=Fz.encode(e);break;case"ascii":n=Oz(e);break;default:throw new Error(`Unsupported encoding: ${t}`)}this.writeBuffer(n)}writeUInt24BE(e){this.buffer[this.pos++]=e>>>16&255,this.buffer[this.pos++]=e>>>8&255,this.buffer[this.pos++]=e&255}writeUInt24LE(e){this.buffer[this.pos++]=e&255,this.buffer[this.pos++]=e>>>8&255,this.buffer[this.pos++]=e>>>16&255}writeInt24BE(e){e>=0?this.writeUInt24BE(e):this.writeUInt24BE(e+16777215+1)}writeInt24LE(e){e>=0?this.writeUInt24LE(e):this.writeUInt24LE(e+16777215+1)}fill(e,t){if(t<this.buffer.length)this.buffer.fill(e,this.pos,this.pos+t),this.pos+=t;else{const n=new Uint8Array(t);n.fill(e),this.writeBuffer(n)}}}function hv(r,e){let t=new Uint16Array(r.length);for(let n=0;n<r.length;n++){let i=r.charCodeAt(n);e&&(i=i>>8|(i&255)<<8),t[n]=i}return new Uint8Array(t.buffer)}function Oz(r){let e=new Uint8Array(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}for(let r of Object.getOwnPropertyNames(DataView.prototype))if(r.slice(0,3)==="set"){let e=r.slice(3).replace("Ui","UI");e==="Float32"?e="Float":e==="Float64"&&(e="Double");let t=Sn.TYPES[e];jc.prototype["write"+e+(t===1?"":"BE")]=function(n){this.view[r](this.pos,n,!1),this.pos+=t},t!==1&&(jc.prototype["write"+e+"LE"]=function(n){this.view[r](this.pos,n,!0),this.pos+=t})}class xi{fromBuffer(e){let t=new Sn(e);return this.decode(t)}toBuffer(e){let t=this.size(e),n=new Uint8Array(t),i=new jc(n);return this.encode(i,e),n}}class Et extends xi{constructor(e,t="BE"){super(),this.type=e,this.endian=t,this.fn=this.type,this.type[this.type.length-1]!=="8"&&(this.fn+=this.endian)}size(){return Sn.TYPES[this.type]}decode(e){return e[`read${this.fn}`]()}encode(e,t){return e[`write${this.fn}`](t)}}const Ve=new Et("UInt8"),Bz=new Et("UInt16","BE"),C=Bz;new Et("UInt16","LE");const Nz=new Et("UInt24","BE"),Wi=Nz;new Et("UInt24","LE");const Uz=new Et("UInt32","BE"),ne=Uz;new Et("UInt32","LE");const dn=new Et("Int8"),Vz=new Et("Int16","BE"),Le=Vz;new Et("Int16","LE");new Et("Int24","BE");new Et("Int24","LE");const zz=new Et("Int32","BE"),xs=zz;new Et("Int32","LE");new Et("Float","BE");new Et("Float","LE");new Et("Double","BE");new Et("Double","LE");class zs extends Et{constructor(e,t,n=e>>1){super(`Int${e}`,t),this._point=1<<n}decode(e){return super.decode(e)/this._point}encode(e,t){return super.encode(e,t*this._point|0)}}const $z=new zs(16,"BE"),Gz=$z;new zs(16,"LE");const Hz=new zs(32,"BE"),nn=Hz;new zs(32,"LE");function qr(r,e,t){let n;if(typeof r=="number"?n=r:typeof r=="function"?n=r.call(t,t):t&&typeof r=="string"?n=t[r]:e&&r instanceof Et&&(n=r.decode(e)),isNaN(n))throw new Error("Not a fixed size");return n}class hd{constructor(e={}){this.enumerable=!0,this.configurable=!0;for(let t in e){const n=e[t];this[t]=n}}}class J extends xi{constructor(e,t,n="count"){super(),this.type=e,this.length=t,this.lengthType=n}decode(e,t){let n;const{pos:i}=e,s=[];let o=t;if(this.length!=null&&(n=qr(this.length,e,t)),this.length instanceof Et&&(Object.defineProperties(s,{parent:{value:t},_startOffset:{value:i},_currentOffset:{value:0,writable:!0},_length:{value:n}}),o=s),n==null||this.lengthType==="bytes"){const a=n!=null?e.pos+n:t!=null&&t._length?t._startOffset+t._length:e.length;for(;e.pos<a;)s.push(this.type.decode(e,o))}else for(let a=0,c=n;a<c;a++)s.push(this.type.decode(e,o));return s}size(e,t,n=!0){if(!e)return this.type.size(null,t)*qr(this.length,null,t);let i=0;this.length instanceof Et&&(i+=this.length.size(),t={parent:t,pointerSize:0});for(let s of e)i+=this.type.size(s,t);return t&&n&&this.length instanceof Et&&(i+=t.pointerSize),i}encode(e,t,n){let i=n;this.length instanceof Et&&(i={pointers:[],startOffset:e.pos,parent:n},i.pointerOffset=e.pos+this.size(t,i,!1),this.length.encode(e,t.length));for(let s of t)this.type.encode(e,s,i);if(this.length instanceof Et){let s=0;for(;s<i.pointers.length;){const o=i.pointers[s++];o.type.encode(e,o.val,o.parent)}}}}class It extends J{decode(e,t){const{pos:n}=e,i=qr(this.length,e,t);this.length instanceof Et&&(t={parent:t,_startOffset:n,_currentOffset:0,_length:i});const s=new Eh(this.type,i,e,t);return e.pos+=i*this.type.size(null,t),s}size(e,t){return e instanceof Eh&&(e=e.toArray()),super.size(e,t)}encode(e,t,n){return t instanceof Eh&&(t=t.toArray()),super.encode(e,t,n)}}class Eh{constructor(e,t,n,i){this.type=e,this.length=t,this.stream=n,this.ctx=i,this.base=this.stream.pos,this.items=[]}get(e){if(!(e<0||e>=this.length)){if(this.items[e]==null){const{pos:t}=this.stream;this.stream.pos=this.base+this.type.size(null,this.ctx)*e,this.items[e]=this.type.decode(this.stream,this.ctx),this.stream.pos=t}return this.items[e]}}toArray(){const e=[];for(let t=0,n=this.length;t<n;t++)e.push(this.get(t));return e}}class Tr extends xi{constructor(e,t=[]){super(),this.type=e,this.flags=t}decode(e){const t=this.type.decode(e),n={};for(let i=0;i<this.flags.length;i++){const s=this.flags[i];s!=null&&(n[s]=!!(t&1<<i))}return n}size(){return this.type.size()}encode(e,t){let n=0;for(let i=0;i<this.flags.length;i++){const s=this.flags[i];s!=null&&t[s]&&(n|=1<<i)}return this.type.encode(e,n)}}class Gr extends xi{constructor(e){super(),this.length=e}decode(e,t){const n=qr(this.length,e,t);return e.readBuffer(n)}size(e,t){if(!e)return qr(this.length,null,t);let n=e.length;return this.length instanceof Et&&(n+=this.length.size()),n}encode(e,t,n){return this.length instanceof Et&&this.length.encode(e,t.length),e.writeBuffer(t)}}class Zc extends xi{constructor(e,t=!0){super(),this.type=e,this.condition=t}decode(e,t){let{condition:n}=this;if(typeof n=="function"&&(n=n.call(t,t)),n)return this.type.decode(e,t)}size(e,t){let{condition:n}=this;return typeof n=="function"&&(n=n.call(t,t)),n?this.type.size(e,t):0}encode(e,t,n){let{condition:i}=this;if(typeof i=="function"&&(i=i.call(n,n)),i)return this.type.encode(e,t,n)}}class zt extends xi{constructor(e,t=1){super(),this.type=e,this.count=t}decode(e,t){e.pos+=this.size(null,t)}size(e,t){const n=qr(this.count,null,t);return this.type.size()*n}encode(e,t,n){return e.fill(0,this.size(t,n))}}class Pt extends xi{constructor(e,t="ascii"){super(),this.length=e,this.encoding=t}decode(e,t){let n,i;if(this.length!=null)n=qr(this.length,e,t);else{let a;for({buffer:a,length:n,pos:i}=e;i<n&&a[i]!==0;)++i;n=i-e.pos}let{encoding:s}=this;typeof s=="function"&&(s=s.call(t,t)||"ascii");const o=e.readString(n,s);return this.length==null&&e.pos<e.length&&e.pos++,o}size(e,t){if(!e)return qr(this.length,null,t);let{encoding:n}=this;typeof n=="function"&&(n=n.call(t!=null?t.val:void 0,t!=null?t.val:void 0)||"ascii"),n==="utf16be"&&(n="utf16le");let i=fv(e,n);return this.length instanceof Et&&(i+=this.length.size()),this.length==null&&i++,i}encode(e,t,n){let{encoding:i}=this;if(typeof i=="function"&&(i=i.call(n!=null?n.val:void 0,n!=null?n.val:void 0)||"ascii"),this.length instanceof Et&&this.length.encode(e,fv(t,i)),e.writeString(t,i),this.length==null)return e.writeUInt8(0)}}function fv(r,e){switch(e){case"ascii":return r.length;case"utf8":let t=0;for(let n=0;n<r.length;n++){let i=r.charCodeAt(n);if(i>=55296&&i<=56319&&n<r.length-1){let s=r.charCodeAt(++n);(s&64512)===56320?i=((i&1023)<<10)+(s&1023)+65536:n--}i&4294967168?i&4294965248?i&4294901760?i&4292870144||(t+=4):t+=3:t+=2:t++}return t;case"utf16le":case"utf16-le":case"utf16be":case"utf16-be":case"ucs2":return r.length*2;default:throw new Error("Unknown encoding "+e)}}class de extends xi{constructor(e={}){super(),this.fields=e}decode(e,t,n=0){const i=this._setup(e,t,n);return this._parseFields(e,i,this.fields),this.process!=null&&this.process.call(i,e),i}_setup(e,t,n){const i={};return Object.defineProperties(i,{parent:{value:t},_startOffset:{value:e.pos},_currentOffset:{value:0,writable:!0},_length:{value:n}}),i}_parseFields(e,t,n){for(let s in n){var i;const o=n[s];typeof o=="function"?i=o.call(t,t):i=o.decode(e,t),i!==void 0&&(i instanceof hd?Object.defineProperty(t,s,i):t[s]=i),t._currentOffset=e.pos-t._startOffset}}size(e,t,n=!0){e==null&&(e={});const i={parent:t,val:e,pointerSize:0};this.preEncode!=null&&this.preEncode.call(e);let s=0;for(let o in this.fields){const a=this.fields[o];a.size!=null&&(s+=a.size(e[o],i))}return n&&(s+=i.pointerSize),s}encode(e,t,n){let i;this.preEncode!=null&&this.preEncode.call(t,e);const s={pointers:[],startOffset:e.pos,parent:n,val:t,pointerSize:0};s.pointerOffset=e.pos+this.size(t,s,!1);for(let a in this.fields)i=this.fields[a],i.encode!=null&&i.encode(e,t[a],s);let o=0;for(;o<s.pointers.length;){const a=s.pointers[o++];a.type.encode(e,a.val,a.parent)}}}const Wz=(r,e)=>e.reduce((t,n)=>t&&t[n],r);class pt extends de{constructor(e,t={}){super(),this.type=e,this.versions=t,typeof e=="string"&&(this.versionPath=e.split("."))}decode(e,t,n=0){const i=this._setup(e,t,n);typeof this.type=="string"?i.version=Wz(t,this.versionPath):i.version=this.type.decode(e),this.versions.header&&this._parseFields(e,i,this.versions.header);const s=this.versions[i.version];if(s==null)throw new Error(`Unknown version ${i.version}`);return s instanceof pt?s.decode(e,t):(this._parseFields(e,i,s),this.process!=null&&this.process.call(i,e),i)}size(e,t,n=!0){let i,s;if(!e)throw new Error("Not a fixed size");this.preEncode!=null&&this.preEncode.call(e);const o={parent:t,val:e,pointerSize:0};let a=0;if(typeof this.type!="string"&&(a+=this.type.size(e.version,o)),this.versions.header)for(i in this.versions.header)s=this.versions.header[i],s.size!=null&&(a+=s.size(e[i],o));const c=this.versions[e.version];if(c==null)throw new Error(`Unknown version ${e.version}`);for(i in c)s=c[i],s.size!=null&&(a+=s.size(e[i],o));return n&&(a+=o.pointerSize),a}encode(e,t,n){let i,s;this.preEncode!=null&&this.preEncode.call(t,e);const o={pointers:[],startOffset:e.pos,parent:n,val:t,pointerSize:0};if(o.pointerOffset=e.pos+this.size(t,o,!1),typeof this.type!="string"&&this.type.encode(e,t.version),this.versions.header)for(i in this.versions.header)s=this.versions.header[i],s.encode!=null&&s.encode(e,t[i],o);const a=this.versions[t.version];for(i in a)s=a[i],s.encode!=null&&s.encode(e,t[i],o);let c=0;for(;c<o.pointers.length;){const u=o.pointers[c++];u.type.encode(e,u.val,u.parent)}}}class ee extends xi{constructor(e,t,n={}){if(super(),this.offsetType=e,this.type=t,this.options=n,this.type==="void"&&(this.type=null),this.options.type==null&&(this.options.type="local"),this.options.allowNull==null&&(this.options.allowNull=!0),this.options.nullValue==null&&(this.options.nullValue=0),this.options.lazy==null&&(this.options.lazy=!1),this.options.relativeTo){if(typeof this.options.relativeTo!="function")throw new Error("relativeTo option must be a function");this.relativeToGetter=n.relativeTo}}decode(e,t){const n=this.offsetType.decode(e,t);if(n===this.options.nullValue&&this.options.allowNull)return null;let i;switch(this.options.type){case"local":i=t._startOffset;break;case"immediate":i=e.pos-this.offsetType.size();break;case"parent":i=t.parent._startOffset;break;default:for(var s=t;s.parent;)s=s.parent;i=s._startOffset||0}this.options.relativeTo&&(i+=this.relativeToGetter(t));const o=n+i;if(this.type!=null){let a=null;const c=()=>{if(a!=null)return a;const{pos:u}=e;return e.pos=o,a=this.type.decode(e,t),e.pos=u,a};return this.options.lazy?new hd({get:c}):c()}else return o}size(e,t){const n=t;switch(this.options.type){case"local":case"immediate":break;case"parent":t=t.parent;break;default:for(;t.parent;)t=t.parent}let{type:i}=this;if(i==null){if(!(e instanceof mf))throw new Error("Must be a VoidPointer");({type:i}=e),e=e.value}if(e&&t){let s=i.size(e,n);t.pointerSize+=s}return this.offsetType.size()}encode(e,t,n){let i;const s=n;if(t==null){this.offsetType.encode(e,this.options.nullValue);return}switch(this.options.type){case"local":i=n.startOffset;break;case"immediate":i=e.pos+this.offsetType.size(t,s);break;case"parent":n=n.parent,i=n.startOffset;break;default:for(i=0;n.parent;)n=n.parent}this.options.relativeTo&&(i+=this.relativeToGetter(s.val)),this.offsetType.encode(e,n.pointerOffset-i);let{type:o}=this;if(o==null){if(!(t instanceof mf))throw new Error("Must be a VoidPointer");({type:o}=t),t=t.value}return n.pointers.push({type:o,val:t,parent:s}),n.pointerOffset+=o.size(t,s)}}class mf{constructor(e,t){this.type=e,this.value=t}}function Jn(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Mn(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s}var dv=function r(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,i,s;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(!r(e[i],t[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,s[i]))return!1;for(i=n;i--!==0;){var o=s[i];if(!r(e[o],t[o]))return!1}return!0}return e!==e&&t!==t},fd=0,N2=-3;function pl(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function qz(r,e){this.source=r,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=e,this.destLen=0,this.ltree=new pl,this.dtree=new pl}var U2=new pl,V2=new pl,dd=new Uint8Array(30),pd=new Uint16Array(30),z2=new Uint8Array(30),$2=new Uint16Array(30),Xz=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),pv=new pl,Dr=new Uint8Array(288+32);function G2(r,e,t,n){var i,s;for(i=0;i<t;++i)r[i]=0;for(i=0;i<30-t;++i)r[i+t]=i/t|0;for(s=n,i=0;i<30;++i)e[i]=s,s+=1<<r[i]}function Yz(r,e){var t;for(t=0;t<7;++t)r.table[t]=0;for(r.table[7]=24,r.table[8]=152,r.table[9]=112,t=0;t<24;++t)r.trans[t]=256+t;for(t=0;t<144;++t)r.trans[24+t]=t;for(t=0;t<8;++t)r.trans[24+144+t]=280+t;for(t=0;t<112;++t)r.trans[24+144+8+t]=144+t;for(t=0;t<5;++t)e.table[t]=0;for(e.table[5]=32,t=0;t<32;++t)e.trans[t]=t}var mv=new Uint16Array(16);function Ah(r,e,t,n){var i,s;for(i=0;i<16;++i)r.table[i]=0;for(i=0;i<n;++i)r.table[e[t+i]]++;for(r.table[0]=0,s=0,i=0;i<16;++i)mv[i]=s,s+=r.table[i];for(i=0;i<n;++i)e[t+i]&&(r.trans[mv[e[t+i]]++]=i)}function jz(r){r.bitcount--||(r.tag=r.source[r.sourceIndex++],r.bitcount=7);var e=r.tag&1;return r.tag>>>=1,e}function Or(r,e,t){if(!e)return t;for(;r.bitcount<24;)r.tag|=r.source[r.sourceIndex++]<<r.bitcount,r.bitcount+=8;var n=r.tag&65535>>>16-e;return r.tag>>>=e,r.bitcount-=e,n+t}function gf(r,e){for(;r.bitcount<24;)r.tag|=r.source[r.sourceIndex++]<<r.bitcount,r.bitcount+=8;var t=0,n=0,i=0,s=r.tag;do n=2*n+(s&1),s>>>=1,++i,t+=e.table[i],n-=e.table[i];while(n>=0);return r.tag=s,r.bitcount-=i,e.trans[t+n]}function Zz(r,e,t){var n,i,s,o,a,c;for(n=Or(r,5,257),i=Or(r,5,1),s=Or(r,4,4),o=0;o<19;++o)Dr[o]=0;for(o=0;o<s;++o){var u=Or(r,3,0);Dr[Xz[o]]=u}for(Ah(pv,Dr,0,19),a=0;a<n+i;){var f=gf(r,pv);switch(f){case 16:var d=Dr[a-1];for(c=Or(r,2,3);c;--c)Dr[a++]=d;break;case 17:for(c=Or(r,3,3);c;--c)Dr[a++]=0;break;case 18:for(c=Or(r,7,11);c;--c)Dr[a++]=0;break;default:Dr[a++]=f;break}}Ah(e,Dr,0,n),Ah(t,Dr,n,i)}function gv(r,e,t){for(;;){var n=gf(r,e);if(n===256)return fd;if(n<256)r.dest[r.destLen++]=n;else{var i,s,o,a;for(n-=257,i=Or(r,dd[n],pd[n]),s=gf(r,t),o=r.destLen-Or(r,z2[s],$2[s]),a=o;a<o+i;++a)r.dest[r.destLen++]=r.dest[a]}}}function Kz(r){for(var e,t,n;r.bitcount>8;)r.sourceIndex--,r.bitcount-=8;if(e=r.source[r.sourceIndex+1],e=256*e+r.source[r.sourceIndex],t=r.source[r.sourceIndex+3],t=256*t+r.source[r.sourceIndex+2],e!==(~t&65535))return N2;for(r.sourceIndex+=4,n=e;n;--n)r.dest[r.destLen++]=r.source[r.sourceIndex++];return r.bitcount=0,fd}function Jz(r,e){var t=new qz(r,e),n,i,s;do{switch(n=jz(t),i=Or(t,2,0),i){case 0:s=Kz(t);break;case 1:s=gv(t,U2,V2);break;case 2:Zz(t,t.ltree,t.dtree),s=gv(t,t.ltree,t.dtree);break;default:s=N2}if(s!==fd)throw new Error("Data error")}while(!n);return t.destLen<t.dest.length?typeof t.dest.slice=="function"?t.dest.slice(0,t.destLen):t.dest.subarray(0,t.destLen):t.dest}Yz(U2,V2);G2(dd,pd,4,3);G2(z2,$2,2,1);dd[28]=0;pd[28]=258;var H2=Jz;const Qz=new Uint8Array(new Uint32Array([305419896]).buffer)[0]===18,vv=(r,e,t)=>{let n=r[e];r[e]=r[t],r[t]=n},e$=r=>{const e=r.length;for(let t=0;t<e;t+=4)vv(r,t,t+3),vv(r,t+1,t+2)},t$=r=>{Qz&&e$(r)};var n$={swap32LE:t$};const bv=H2,{swap32LE:r$}=n$,md=6+5,As=5,i$=md-As,s$=65536>>md,o$=1<<i$,a$=o$-1,Fc=2,l$=1<<As,Ph=l$-1,W2=65536>>As,c$=1024>>As,u$=W2+c$,h$=u$,f$=32,d$=h$+f$,p$=1<<Fc;class m${constructor(e){const t=typeof e.readUInt32BE=="function"&&typeof e.slice=="function";if(t||e instanceof Uint8Array){let n;if(t)this.highStart=e.readUInt32LE(0),this.errorValue=e.readUInt32LE(4),n=e.readUInt32LE(8),e=e.slice(12);else{const i=new DataView(e.buffer);this.highStart=i.getUint32(0,!0),this.errorValue=i.getUint32(4,!0),n=i.getUint32(8,!0),e=e.subarray(12)}e=bv(e,new Uint8Array(n)),e=bv(e,new Uint8Array(n)),r$(e),this.data=new Uint32Array(e.buffer)}else({data:this.data,highStart:this.highStart,errorValue:this.errorValue}=e)}get(e){let t;return e<0||e>1114111?this.errorValue:e<55296||e>56319&&e<=65535?(t=(this.data[e>>As]<<Fc)+(e&Ph),this.data[t]):e<=65535?(t=(this.data[W2+(e-55296>>As)]<<Fc)+(e&Ph),this.data[t]):e<this.highStart?(t=this.data[d$-s$+(e>>md)],t=this.data[t+(e>>As&a$)],t=(t<<Fc)+(e&Ph),this.data[t]):this.data[this.data.length-p$]}}var ku=m$;function $s(r){return r&&r.__esModule?r.default:r}var Ki={};Ki=JSON.parse('{"categories":["Cc","Zs","Po","Sc","Ps","Pe","Sm","Pd","Nd","Lu","Sk","Pc","Ll","So","Lo","Pi","Cf","No","Pf","Lt","Lm","Mn","Me","Mc","Nl","Zl","Zp","Cs","Co"],"combiningClasses":["Not_Reordered","Above","Above_Right","Below","Attached_Above_Right","Attached_Below","Overlay","Iota_Subscript","Double_Below","Double_Above","Below_Right","Above_Left","CCC10","CCC11","CCC12","CCC13","CCC14","CCC15","CCC16","CCC17","CCC18","CCC19","CCC20","CCC21","CCC22","CCC23","CCC24","CCC25","CCC30","CCC31","CCC32","CCC27","CCC28","CCC29","CCC33","CCC34","CCC35","CCC36","Nukta","Virama","CCC84","CCC91","CCC103","CCC107","CCC118","CCC122","CCC129","CCC130","CCC132","Attached_Above","Below_Left","Left","Kana_Voicing","CCC26","Right"],"scripts":["Common","Latin","Bopomofo","Inherited","Greek","Coptic","Cyrillic","Armenian","Hebrew","Arabic","Syriac","Thaana","Nko","Samaritan","Mandaic","Devanagari","Bengali","Gurmukhi","Gujarati","Oriya","Tamil","Telugu","Kannada","Malayalam","Sinhala","Thai","Lao","Tibetan","Myanmar","Georgian","Hangul","Ethiopic","Cherokee","Canadian_Aboriginal","Ogham","Runic","Tagalog","Hanunoo","Buhid","Tagbanwa","Khmer","Mongolian","Limbu","Tai_Le","New_Tai_Lue","Buginese","Tai_Tham","Balinese","Sundanese","Batak","Lepcha","Ol_Chiki","Braille","Glagolitic","Tifinagh","Han","Hiragana","Katakana","Yi","Lisu","Vai","Bamum","Syloti_Nagri","Phags_Pa","Saurashtra","Kayah_Li","Rejang","Javanese","Cham","Tai_Viet","Meetei_Mayek","null","Linear_B","Lycian","Carian","Old_Italic","Gothic","Old_Permic","Ugaritic","Old_Persian","Deseret","Shavian","Osmanya","Osage","Elbasan","Caucasian_Albanian","Linear_A","Cypriot","Imperial_Aramaic","Palmyrene","Nabataean","Hatran","Phoenician","Lydian","Meroitic_Hieroglyphs","Meroitic_Cursive","Kharoshthi","Old_South_Arabian","Old_North_Arabian","Manichaean","Avestan","Inscriptional_Parthian","Inscriptional_Pahlavi","Psalter_Pahlavi","Old_Turkic","Old_Hungarian","Hanifi_Rohingya","Old_Sogdian","Sogdian","Elymaic","Brahmi","Kaithi","Sora_Sompeng","Chakma","Mahajani","Sharada","Khojki","Multani","Khudawadi","Grantha","Newa","Tirhuta","Siddham","Modi","Takri","Ahom","Dogra","Warang_Citi","Nandinagari","Zanabazar_Square","Soyombo","Pau_Cin_Hau","Bhaiksuki","Marchen","Masaram_Gondi","Gunjala_Gondi","Makasar","Cuneiform","Egyptian_Hieroglyphs","Anatolian_Hieroglyphs","Mro","Bassa_Vah","Pahawh_Hmong","Medefaidrin","Miao","Tangut","Nushu","Duployan","SignWriting","Nyiakeng_Puachue_Hmong","Wancho","Mende_Kikakui","Adlam"],"eaw":["N","Na","A","W","H","F"]}');const gd=new ku(ia.toByteArray("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")),g$=Math.log2||(r=>Math.log(r)/Math.LN2),Fu=r=>g$(r)+1|0,v$=Fu($s(Ki).categories.length-1),q2=Fu($s(Ki).combiningClasses.length-1),vd=Fu($s(Ki).scripts.length-1),bd=Fu($s(Ki).eaw.length-1),xd=10,b$=q2+vd+bd+xd,x$=vd+bd+xd,w$=bd+xd,y$=(1<<v$)-1,_$=(1<<q2)-1,S$=(1<<vd)-1;function Ou(r){const e=gd.get(r);return $s(Ki).categories[e>>b$&y$]}function C$(r){const e=gd.get(r);return $s(Ki).combiningClasses[e>>x$&_$]}function X2(r){const e=gd.get(r);return $s(Ki).scripts[e>>w$&S$]}function xv(r){return Ou(r)==="Nd"}function Y2(r){const e=Ou(r);return e==="Mn"||e==="Me"||e==="Mc"}var Th=1,Lh=0;class M${constructor(e){this.stateTable=e.stateTable,this.accepting=e.accepting,this.tags=e.tags}match(e){var t=this;return{*[Symbol.iterator](){for(var n=Th,i=null,s=null,o=null,a=0;a<e.length;a++){var c=e[a];o=n,n=t.stateTable[n][c],n===Lh&&(i!=null&&s!=null&&s>=i&&(yield[i,s,t.tags[o]]),n=t.stateTable[Th][c],i=null),n!==Lh&&i==null&&(i=a),t.accepting[n]&&(s=a),n===Lh&&(n=Th)}i!=null&&s!=null&&s>=i&&(yield[i,s,t.tags[n]])}}}apply(e,t){for(var[n,i,s]of this.match(e))for(var o of s)typeof t[o]=="function"&&t[o](n,i,e.slice(n,i+1))}}var j2=M$,Ka={},E$={get exports(){return Ka},set exports(r){Ka=r}};(function(r){var e=function(){function t(m,v){return v!=null&&m instanceof v}var n;try{n=Map}catch{n=function(){}}var i;try{i=Set}catch{i=function(){}}var s;try{s=Promise}catch{s=function(){}}function o(m,v,S,x,w){typeof v=="object"&&(S=v.depth,x=v.prototype,w=v.includeNonEnumerable,v=v.circular);var A=[],T=[],E=typeof Buffer<"u";typeof v>"u"&&(v=!0),typeof S>"u"&&(S=1/0);function P(y,k){if(y===null)return null;if(k===0)return y;var F,M;if(typeof y!="object")return y;if(t(y,n))F=new n;else if(t(y,i))F=new i;else if(t(y,s))F=new s(function(ge,K){y.then(function(Ee){ge(P(Ee,k-1))},function(Ee){K(P(Ee,k-1))})});else if(o.__isArray(y))F=[];else if(o.__isRegExp(y))F=new RegExp(y.source,d(y)),y.lastIndex&&(F.lastIndex=y.lastIndex);else if(o.__isDate(y))F=new Date(y.getTime());else{if(E&&Buffer.isBuffer(y))return Buffer.allocUnsafe?F=Buffer.allocUnsafe(y.length):F=new Buffer(y.length),y.copy(F),F;t(y,Error)?F=Object.create(y):typeof x>"u"?(M=Object.getPrototypeOf(y),F=Object.create(M)):(F=Object.create(x),M=x)}if(v){var R=A.indexOf(y);if(R!=-1)return T[R];A.push(y),T.push(F)}t(y,n)&&y.forEach(function(ge,K){var Ee=P(K,k-1),Pe=P(ge,k-1);F.set(Ee,Pe)}),t(y,i)&&y.forEach(function(ge){var K=P(ge,k-1);F.add(K)});for(var O in y){var z;M&&(z=Object.getOwnPropertyDescriptor(M,O)),!(z&&z.set==null)&&(F[O]=P(y[O],k-1))}if(Object.getOwnPropertySymbols)for(var Q=Object.getOwnPropertySymbols(y),O=0;O<Q.length;O++){var G=Q[O],V=Object.getOwnPropertyDescriptor(y,G);V&&!V.enumerable&&!w||(F[G]=P(y[G],k-1),V.enumerable||Object.defineProperty(F,G,{enumerable:!1}))}if(w)for(var q=Object.getOwnPropertyNames(y),O=0;O<q.length;O++){var j=q[O],V=Object.getOwnPropertyDescriptor(y,j);V&&V.enumerable||(F[j]=P(y[j],k-1),Object.defineProperty(F,j,{enumerable:!1}))}return F}return P(m,S)}o.clonePrototype=function(v){if(v===null)return null;var S=function(){};return S.prototype=v,new S};function a(m){return Object.prototype.toString.call(m)}o.__objToStr=a;function c(m){return typeof m=="object"&&a(m)==="[object Date]"}o.__isDate=c;function u(m){return typeof m=="object"&&a(m)==="[object Array]"}o.__isArray=u;function f(m){return typeof m=="object"&&a(m)==="[object RegExp]"}o.__isRegExp=f;function d(m){var v="";return m.global&&(v+="g"),m.ignoreCase&&(v+="i"),m.multiline&&(v+="m"),v}return o.__getRegExpFlags=d,o}();r.exports&&(r.exports=e)})(E$);var Na={},Kc={};function Z2(r){this.buffer=r,this.pos=0}Z2.prototype.read=function(r,e,t){this.pos+t>this.buffer.length&&(t=this.buffer.length-this.pos);for(var n=0;n<t;n++)r[e+n]=this.buffer[this.pos+n];return this.pos+=t,t};Kc.BrotliInput=Z2;function K2(r){this.buffer=r,this.pos=0}K2.prototype.write=function(r,e){if(this.pos+e>this.buffer.length)throw new Error("Output buffer is not large enough");return this.buffer.set(r.subarray(0,e),this.pos),this.pos+=e,e};Kc.BrotliOutput=K2;var ws=4096,A$=2*ws+32,J2=2*ws-1,P$=new Uint32Array([0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215]);function Gs(r){this.buf_=new Uint8Array(A$),this.input_=r,this.reset()}Gs.READ_SIZE=ws;Gs.IBUF_MASK=J2;Gs.prototype.reset=function(){this.buf_ptr_=0,this.val_=0,this.pos_=0,this.bit_pos_=0,this.bit_end_pos_=0,this.eos_=0,this.readMoreInput();for(var r=0;r<4;r++)this.val_|=this.buf_[this.pos_]<<8*r,++this.pos_;return this.bit_end_pos_>0};Gs.prototype.readMoreInput=function(){if(!(this.bit_end_pos_>256))if(this.eos_){if(this.bit_pos_>this.bit_end_pos_)throw new Error("Unexpected end of input "+this.bit_pos_+" "+this.bit_end_pos_)}else{var r=this.buf_ptr_,e=this.input_.read(this.buf_,r,ws);if(e<0)throw new Error("Unexpected end of input");if(e<ws){this.eos_=1;for(var t=0;t<32;t++)this.buf_[r+e+t]=0}if(r===0){for(var t=0;t<32;t++)this.buf_[(ws<<1)+t]=this.buf_[t];this.buf_ptr_=ws}else this.buf_ptr_=0;this.bit_end_pos_+=e<<3}};Gs.prototype.fillBitWindow=function(){for(;this.bit_pos_>=8;)this.val_>>>=8,this.val_|=this.buf_[this.pos_&J2]<<24,++this.pos_,this.bit_pos_=this.bit_pos_-8>>>0,this.bit_end_pos_=this.bit_end_pos_-8>>>0};Gs.prototype.readBits=function(r){32-this.bit_pos_<r&&this.fillBitWindow();var e=this.val_>>>this.bit_pos_&P$[r];return this.bit_pos_+=r,e};var T$=Gs,Bi={},Ih={},Dh,wv;function L$(){return wv||(wv=1,Dh="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"),Dh}var yv;function I$(){if(yv)return Ih;yv=1;var r=ia;return Ih.init=function(){var e=ew().BrotliDecompressBuffer,t=r.toByteArray(L$());return e(t)},Ih}var _v;function Q2(){if(_v)return Bi;_v=1;var r=I$();return Bi.init=function(){Bi.dictionary=r.init()},Bi.offsetsByLength=new Uint32Array([0,0,0,0,0,4096,9216,21504,35840,44032,53248,63488,74752,87040,93696,100864,104704,106752,108928,113536,115968,118528,119872,121280,122016]),Bi.sizeBitsByLength=new Uint8Array([0,0,0,0,10,10,11,11,10,10,10,10,10,9,9,8,7,7,8,7,7,6,6,5,5]),Bi.minDictionaryWordLength=4,Bi.maxDictionaryWordLength=24,Bi}var Jc={};function ko(r,e){this.bits=r,this.value=e}Jc.HuffmanCode=ko;var To=15;function Sv(r,e){for(var t=1<<e-1;r&t;)t>>=1;return(r&t-1)+t}function Cv(r,e,t,n,i){do n-=t,r[e+n]=new ko(i.bits,i.value);while(n>0)}function D$(r,e,t){for(var n=1<<e-t;e<To&&(n-=r[e],!(n<=0));)++e,n<<=1;return e-t}Jc.BrotliBuildHuffmanTable=function(r,e,t,n,i){var s=e,o,a,c,u,f,d,m,v,S,x,w,A=new Int32Array(To+1),T=new Int32Array(To+1);for(w=new Int32Array(i),c=0;c<i;c++)A[n[c]]++;for(T[1]=0,a=1;a<To;a++)T[a+1]=T[a]+A[a];for(c=0;c<i;c++)n[c]!==0&&(w[T[n[c]]++]=c);if(v=t,S=1<<v,x=S,T[To]===1){for(u=0;u<x;++u)r[e+u]=new ko(0,w[0]&65535);return x}for(u=0,c=0,a=1,f=2;a<=t;++a,f<<=1)for(;A[a]>0;--A[a])o=new ko(a&255,w[c++]&65535),Cv(r,e+u,f,S,o),u=Sv(u,a);for(m=x-1,d=-1,a=t+1,f=2;a<=To;++a,f<<=1)for(;A[a]>0;--A[a])(u&m)!==d&&(e+=S,v=D$(A,a,t),S=1<<v,x+=S,d=u&m,r[s+d]=new ko(v+t&255,e-s-d&65535)),o=new ko(a-t&255,w[c++]&65535),Cv(r,e+(u>>t),f,S,o),u=Sv(u,a);return x};var wd={};wd.lookup=new Uint8Array([0,0,0,0,0,0,0,0,0,4,4,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,12,16,12,12,20,12,16,24,28,12,12,32,12,36,12,44,44,44,44,44,44,44,44,44,44,32,32,24,40,28,12,12,48,52,52,52,48,52,52,52,48,52,52,52,52,52,48,52,52,52,52,52,48,52,52,52,52,52,24,12,28,12,12,12,56,60,60,60,56,60,60,60,56,60,60,60,60,60,56,60,60,60,60,60,56,60,60,60,60,60,24,12,28,12,0,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,0,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,56,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,6,6,6,6,7,7,7,7,8,8,8,8,9,9,9,9,10,10,10,10,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,14,15,15,15,15,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,22,22,22,22,23,23,23,23,24,24,24,24,25,25,25,25,26,26,26,26,27,27,27,27,28,28,28,28,29,29,29,29,30,30,30,30,31,31,31,31,32,32,32,32,33,33,33,33,34,34,34,34,35,35,35,35,36,36,36,36,37,37,37,37,38,38,38,38,39,39,39,39,40,40,40,40,41,41,41,41,42,42,42,42,43,43,43,43,44,44,44,44,45,45,45,45,46,46,46,46,47,47,47,47,48,48,48,48,49,49,49,49,50,50,50,50,51,51,51,51,52,52,52,52,53,53,53,53,54,54,54,54,55,55,55,55,56,56,56,56,57,57,57,57,58,58,58,58,59,59,59,59,60,60,60,60,61,61,61,61,62,62,62,62,63,63,63,63,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);wd.lookupOffsets=new Uint16Array([1024,1536,1280,1536,0,256,768,512]);var sa={};function Ge(r,e){this.offset=r,this.nbits=e}sa.kBlockLengthPrefixCode=[new Ge(1,2),new Ge(5,2),new Ge(9,2),new Ge(13,2),new Ge(17,3),new Ge(25,3),new Ge(33,3),new Ge(41,3),new Ge(49,4),new Ge(65,4),new Ge(81,4),new Ge(97,4),new Ge(113,5),new Ge(145,5),new Ge(177,5),new Ge(209,5),new Ge(241,6),new Ge(305,6),new Ge(369,7),new Ge(497,8),new Ge(753,9),new Ge(1265,10),new Ge(2289,11),new Ge(4337,12),new Ge(8433,13),new Ge(16625,24)];sa.kInsertLengthPrefixCode=[new Ge(0,0),new Ge(1,0),new Ge(2,0),new Ge(3,0),new Ge(4,0),new Ge(5,0),new Ge(6,1),new Ge(8,1),new Ge(10,2),new Ge(14,2),new Ge(18,3),new Ge(26,3),new Ge(34,4),new Ge(50,4),new Ge(66,5),new Ge(98,5),new Ge(130,6),new Ge(194,7),new Ge(322,8),new Ge(578,9),new Ge(1090,10),new Ge(2114,12),new Ge(6210,14),new Ge(22594,24)];sa.kCopyLengthPrefixCode=[new Ge(2,0),new Ge(3,0),new Ge(4,0),new Ge(5,0),new Ge(6,0),new Ge(7,0),new Ge(8,0),new Ge(9,0),new Ge(10,1),new Ge(12,1),new Ge(14,2),new Ge(18,2),new Ge(22,3),new Ge(30,3),new Ge(38,4),new Ge(54,4),new Ge(70,5),new Ge(102,5),new Ge(134,6),new Ge(198,7),new Ge(326,8),new Ge(582,9),new Ge(1094,10),new Ge(2118,24)];sa.kInsertRangeLut=[0,0,8,8,0,16,8,16,16];sa.kCopyRangeLut=[0,8,0,8,16,0,16,8,16];var Ua={},Mv;function R$(){if(Mv)return Ua;Mv=1;var r=Q2(),e=0,t=1,n=2,i=3,s=4,o=5,a=6,c=7,u=8,f=9,d=10,m=11,v=12,S=13,x=14,w=15,A=16,T=17,E=18,P=20;function y(M,R,O){this.prefix=new Uint8Array(M.length),this.transform=R,this.suffix=new Uint8Array(O.length);for(var z=0;z<M.length;z++)this.prefix[z]=M.charCodeAt(z);for(var z=0;z<O.length;z++)this.suffix[z]=O.charCodeAt(z)}var k=[new y("",e,""),new y("",e," "),new y(" ",e," "),new y("",v,""),new y("",d," "),new y("",e," the "),new y(" ",e,""),new y("s ",e," "),new y("",e," of "),new y("",d,""),new y("",e," and "),new y("",S,""),new y("",t,""),new y(", ",e," "),new y("",e,", "),new y(" ",d," "),new y("",e," in "),new y("",e," to "),new y("e ",e," "),new y("",e,'"'),new y("",e,"."),new y("",e,'">'),new y("",e,`
`),new y("",i,""),new y("",e,"]"),new y("",e," for "),new y("",x,""),new y("",n,""),new y("",e," a "),new y("",e," that "),new y(" ",d,""),new y("",e,". "),new y(".",e,""),new y(" ",e,", "),new y("",w,""),new y("",e," with "),new y("",e,"'"),new y("",e," from "),new y("",e," by "),new y("",A,""),new y("",T,""),new y(" the ",e,""),new y("",s,""),new y("",e,". The "),new y("",m,""),new y("",e," on "),new y("",e," as "),new y("",e," is "),new y("",c,""),new y("",t,"ing "),new y("",e,`
	`),new y("",e,":"),new y(" ",e,". "),new y("",e,"ed "),new y("",P,""),new y("",E,""),new y("",a,""),new y("",e,"("),new y("",d,", "),new y("",u,""),new y("",e," at "),new y("",e,"ly "),new y(" the ",e," of "),new y("",o,""),new y("",f,""),new y(" ",d,", "),new y("",d,'"'),new y(".",e,"("),new y("",m," "),new y("",d,'">'),new y("",e,'="'),new y(" ",e,"."),new y(".com/",e,""),new y(" the ",e," of the "),new y("",d,"'"),new y("",e,". This "),new y("",e,","),new y(".",e," "),new y("",d,"("),new y("",d,"."),new y("",e," not "),new y(" ",e,'="'),new y("",e,"er "),new y(" ",m," "),new y("",e,"al "),new y(" ",m,""),new y("",e,"='"),new y("",m,'"'),new y("",d,". "),new y(" ",e,"("),new y("",e,"ful "),new y(" ",d,". "),new y("",e,"ive "),new y("",e,"less "),new y("",m,"'"),new y("",e,"est "),new y(" ",d,"."),new y("",m,'">'),new y(" ",e,"='"),new y("",d,","),new y("",e,"ize "),new y("",m,"."),new y("Â ",e,""),new y(" ",e,","),new y("",d,'="'),new y("",m,'="'),new y("",e,"ous "),new y("",m,", "),new y("",d,"='"),new y(" ",d,","),new y(" ",m,'="'),new y(" ",m,", "),new y("",m,","),new y("",m,"("),new y("",m,". "),new y(" ",m,"."),new y("",m,"='"),new y(" ",m,". "),new y(" ",d,'="'),new y(" ",m,"='"),new y(" ",d,"='")];Ua.kTransforms=k,Ua.kNumTransforms=k.length;function F(M,R){return M[R]<192?(M[R]>=97&&M[R]<=122&&(M[R]^=32),1):M[R]<224?(M[R+1]^=32,2):(M[R+2]^=5,3)}return Ua.transformDictionaryWord=function(M,R,O,z,Q){var G=k[Q].prefix,V=k[Q].suffix,q=k[Q].transform,j=q<v?0:q-(v-1),ge=0,K=R,Ee;j>z&&(j=z);for(var Pe=0;Pe<G.length;)M[R++]=G[Pe++];for(O+=j,z-=j,q<=f&&(z-=q),ge=0;ge<z;ge++)M[R++]=r.dictionary[O+ge];if(Ee=R-z,q===d)F(M,Ee);else if(q===m)for(;z>0;){var re=F(M,Ee);Ee+=re,z-=re}for(var ae=0;ae<V.length;)M[R++]=V[ae++];return R-K},Ua}var Ev;function ew(){if(Ev)return Na;Ev=1;var r=Kc.BrotliInput,e=Kc.BrotliOutput,t=T$,n=Q2(),i=Jc.HuffmanCode,s=Jc.BrotliBuildHuffmanTable,o=wd,a=sa,c=R$(),u=8,f=16,d=256,m=704,v=26,S=6,x=2,w=8,A=255,T=1080,E=18,P=new Uint8Array([1,2,3,4,0,5,17,6,16,7,8,9,10,11,12,13,14,15]),y=16,k=new Uint8Array([3,2,1,0,3,3,3,3,3,3,2,2,2,2,2,2]),F=new Int8Array([0,0,0,0,-1,1,-2,2,-3,3,-1,1,-2,2,-3,3]),M=new Uint16Array([256,402,436,468,500,534,566,598,630,662,694,726,758,790,822,854,886,920,952,984,1016,1048,1080]);function R(pe){var he;return pe.readBits(1)===0?16:(he=pe.readBits(3),he>0?17+he:(he=pe.readBits(3),he>0?8+he:17))}function O(pe){if(pe.readBits(1)){var he=pe.readBits(3);return he===0?1:pe.readBits(he)+(1<<he)}return 0}function z(){this.meta_block_length=0,this.input_end=0,this.is_uncompressed=0,this.is_metadata=!1}function Q(pe){var he=new z,le,ue,te;if(he.input_end=pe.readBits(1),he.input_end&&pe.readBits(1))return he;if(le=pe.readBits(2)+4,le===7){if(he.is_metadata=!0,pe.readBits(1)!==0)throw new Error("Invalid reserved bit");if(ue=pe.readBits(2),ue===0)return he;for(te=0;te<ue;te++){var se=pe.readBits(8);if(te+1===ue&&ue>1&&se===0)throw new Error("Invalid size byte");he.meta_block_length|=se<<te*8}}else for(te=0;te<le;++te){var me=pe.readBits(4);if(te+1===le&&le>4&&me===0)throw new Error("Invalid size nibble");he.meta_block_length|=me<<te*4}return++he.meta_block_length,!he.input_end&&!he.is_metadata&&(he.is_uncompressed=pe.readBits(1)),he}function G(pe,he,le){var ue;return le.fillBitWindow(),he+=le.val_>>>le.bit_pos_&A,ue=pe[he].bits-w,ue>0&&(le.bit_pos_+=w,he+=pe[he].value,he+=le.val_>>>le.bit_pos_&(1<<ue)-1),le.bit_pos_+=pe[he].bits,pe[he].value}function V(pe,he,le,ue){for(var te=0,se=u,me=0,_e=0,we=32768,Ie=[],Ce=0;Ce<32;Ce++)Ie.push(new i(0,0));for(s(Ie,0,5,pe,E);te<he&&we>0;){var Oe=0,tt;if(ue.readMoreInput(),ue.fillBitWindow(),Oe+=ue.val_>>>ue.bit_pos_&31,ue.bit_pos_+=Ie[Oe].bits,tt=Ie[Oe].value&255,tt<f)me=0,le[te++]=tt,tt!==0&&(se=tt,we-=32768>>tt);else{var Ze=tt-14,N,B,oe=0;if(tt===f&&(oe=se),_e!==oe&&(me=0,_e=oe),N=me,me>0&&(me-=2,me<<=Ze),me+=ue.readBits(Ze)+3,B=me-N,te+B>he)throw new Error("[ReadHuffmanCodeLengths] symbol + repeat_delta > num_symbols");for(var Me=0;Me<B;Me++)le[te+Me]=_e;te+=B,_e!==0&&(we-=B<<15-_e)}}if(we!==0)throw new Error("[ReadHuffmanCodeLengths] space = "+we);for(;te<he;te++)le[te]=0}function q(pe,he,le,ue){var te=0,se,me=new Uint8Array(pe);if(ue.readMoreInput(),se=ue.readBits(2),se===1){for(var _e,we=pe-1,Ie=0,Ce=new Int32Array(4),Oe=ue.readBits(2)+1;we;)we>>=1,++Ie;for(_e=0;_e<Oe;++_e)Ce[_e]=ue.readBits(Ie)%pe,me[Ce[_e]]=2;switch(me[Ce[0]]=1,Oe){case 1:break;case 3:if(Ce[0]===Ce[1]||Ce[0]===Ce[2]||Ce[1]===Ce[2])throw new Error("[ReadHuffmanCode] invalid symbols");break;case 2:if(Ce[0]===Ce[1])throw new Error("[ReadHuffmanCode] invalid symbols");me[Ce[1]]=1;break;case 4:if(Ce[0]===Ce[1]||Ce[0]===Ce[2]||Ce[0]===Ce[3]||Ce[1]===Ce[2]||Ce[1]===Ce[3]||Ce[2]===Ce[3])throw new Error("[ReadHuffmanCode] invalid symbols");ue.readBits(1)?(me[Ce[2]]=3,me[Ce[3]]=3):me[Ce[0]]=2;break}}else{var _e,tt=new Uint8Array(E),Ze=32,N=0,B=[new i(2,0),new i(2,4),new i(2,3),new i(3,2),new i(2,0),new i(2,4),new i(2,3),new i(4,1),new i(2,0),new i(2,4),new i(2,3),new i(3,2),new i(2,0),new i(2,4),new i(2,3),new i(4,5)];for(_e=se;_e<E&&Ze>0;++_e){var oe=P[_e],Me=0,Re;ue.fillBitWindow(),Me+=ue.val_>>>ue.bit_pos_&15,ue.bit_pos_+=B[Me].bits,Re=B[Me].value,tt[oe]=Re,Re!==0&&(Ze-=32>>Re,++N)}if(!(N===1||Ze===0))throw new Error("[ReadHuffmanCode] invalid num_codes or space");V(tt,pe,me,ue)}if(te=s(he,le,w,me,pe),te===0)throw new Error("[ReadHuffmanCode] BuildHuffmanTable failed: ");return te}function j(pe,he,le){var ue,te;return ue=G(pe,he,le),te=a.kBlockLengthPrefixCode[ue].nbits,a.kBlockLengthPrefixCode[ue].offset+le.readBits(te)}function ge(pe,he,le){var ue;return pe<y?(le+=k[pe],le&=3,ue=he[le]+F[pe]):ue=pe-y+1,ue}function K(pe,he){for(var le=pe[he],ue=he;ue;--ue)pe[ue]=pe[ue-1];pe[0]=le}function Ee(pe,he){var le=new Uint8Array(256),ue;for(ue=0;ue<256;++ue)le[ue]=ue;for(ue=0;ue<he;++ue){var te=pe[ue];pe[ue]=le[te],te&&K(le,te)}}function Pe(pe,he){this.alphabet_size=pe,this.num_htrees=he,this.codes=new Array(he+he*M[pe+31>>>5]),this.htrees=new Uint32Array(he)}Pe.prototype.decode=function(pe){var he,le,ue=0;for(he=0;he<this.num_htrees;++he)this.htrees[he]=ue,le=q(this.alphabet_size,this.codes,ue,pe),ue+=le};function re(pe,he){var le={num_htrees:null,context_map:null},ue,te=0,se,me;he.readMoreInput();var _e=le.num_htrees=O(he)+1,we=le.context_map=new Uint8Array(pe);if(_e<=1)return le;for(ue=he.readBits(1),ue&&(te=he.readBits(4)+1),se=[],me=0;me<T;me++)se[me]=new i(0,0);for(q(_e+te,se,0,he),me=0;me<pe;){var Ie;if(he.readMoreInput(),Ie=G(se,0,he),Ie===0)we[me]=0,++me;else if(Ie<=te)for(var Ce=1+(1<<Ie)+he.readBits(Ie);--Ce;){if(me>=pe)throw new Error("[DecodeContextMap] i >= context_map_size");we[me]=0,++me}else we[me]=Ie-te,++me}return he.readBits(1)&&Ee(we,pe),le}function ae(pe,he,le,ue,te,se,me){var _e=le*2,we=le,Ie=G(he,le*T,me),Ce;Ie===0?Ce=te[_e+(se[we]&1)]:Ie===1?Ce=te[_e+(se[we]-1&1)]+1:Ce=Ie-2,Ce>=pe&&(Ce-=pe),ue[le]=Ce,te[_e+(se[we]&1)]=Ce,++se[we]}function xe(pe,he,le,ue,te,se){var me=te+1,_e=le&te,we=se.pos_&t.IBUF_MASK,Ie;if(he<8||se.bit_pos_+(he<<3)<se.bit_end_pos_){for(;he-- >0;)se.readMoreInput(),ue[_e++]=se.readBits(8),_e===me&&(pe.write(ue,me),_e=0);return}if(se.bit_end_pos_<32)throw new Error("[CopyUncompressedBlockToOutput] br.bit_end_pos_ < 32");for(;se.bit_pos_<32;)ue[_e]=se.val_>>>se.bit_pos_,se.bit_pos_+=8,++_e,--he;if(Ie=se.bit_end_pos_-se.bit_pos_>>3,we+Ie>t.IBUF_MASK){for(var Ce=t.IBUF_MASK+1-we,Oe=0;Oe<Ce;Oe++)ue[_e+Oe]=se.buf_[we+Oe];Ie-=Ce,_e+=Ce,he-=Ce,we=0}for(var Oe=0;Oe<Ie;Oe++)ue[_e+Oe]=se.buf_[we+Oe];if(_e+=Ie,he-=Ie,_e>=me){pe.write(ue,me),_e-=me;for(var Oe=0;Oe<_e;Oe++)ue[Oe]=ue[me+Oe]}for(;_e+he>=me;){if(Ie=me-_e,se.input_.read(ue,_e,Ie)<Ie)throw new Error("[CopyUncompressedBlockToOutput] not enough bytes");pe.write(ue,me),he-=Ie,_e=0}if(se.input_.read(ue,_e,he)<he)throw new Error("[CopyUncompressedBlockToOutput] not enough bytes");se.reset()}function be(pe){var he=pe.bit_pos_+7&-8,le=pe.readBits(he-pe.bit_pos_);return le==0}function De(pe){var he=new r(pe),le=new t(he);R(le);var ue=Q(le);return ue.meta_block_length}Na.BrotliDecompressedSize=De;function ve(pe,he){var le=new r(pe);he==null&&(he=De(pe));var ue=new Uint8Array(he),te=new e(ue);return Je(le,te),te.pos<te.buffer.length&&(te.buffer=te.buffer.subarray(0,te.pos)),te.buffer}Na.BrotliDecompressBuffer=ve;function Je(pe,he){var le,ue=0,te=0,se=0,me,_e=0,we,Ie,Ce,Oe,tt=[16,15,11,4],Ze=0,N=0,B=0,oe=[new Pe(0,0),new Pe(0,0),new Pe(0,0)],Me,Re,L,_=128+t.READ_SIZE;L=new t(pe),se=R(L),me=(1<<se)-16,we=1<<se,Ie=we-1,Ce=new Uint8Array(we+_+n.maxDictionaryWordLength),Oe=we,Me=[],Re=[];for(var b=0;b<3*T;b++)Me[b]=new i(0,0),Re[b]=new i(0,0);for(;!te;){var I=0,$,W=[1<<28,1<<28,1<<28],X=[0],Te=[1,1,1],Be=[0,1,0,1,0,1],We=[0],qe,Xe,Z,ye,ke=null,He=null,je,wt=null,qt,Xt=0,Fn=null,mt=0,An=0,Nt=null,Ji=0,xr=0,wi=0,Qn,U;for(le=0;le<3;++le)oe[le].codes=null,oe[le].htrees=null;L.readMoreInput();var fe=Q(L);if(I=fe.meta_block_length,ue+I>he.buffer.length){var Se=new Uint8Array(ue+I);Se.set(he.buffer),he.buffer=Se}if(te=fe.input_end,$=fe.is_uncompressed,fe.is_metadata){for(be(L);I>0;--I)L.readMoreInput(),L.readBits(8);continue}if(I!==0){if($){L.bit_pos_=L.bit_pos_+7&-8,xe(he,I,ue,Ce,Ie,L),ue+=I;continue}for(le=0;le<3;++le)Te[le]=O(L)+1,Te[le]>=2&&(q(Te[le]+2,Me,le*T,L),q(v,Re,le*T,L),W[le]=j(Re,le*T,L),We[le]=1);for(L.readMoreInput(),qe=L.readBits(2),Xe=y+(L.readBits(4)<<qe),Z=(1<<qe)-1,ye=Xe+(48<<qe),He=new Uint8Array(Te[0]),le=0;le<Te[0];++le)L.readMoreInput(),He[le]=L.readBits(2)<<1;var ce=re(Te[0]<<S,L);je=ce.num_htrees,ke=ce.context_map;var Ae=re(Te[2]<<x,L);for(qt=Ae.num_htrees,wt=Ae.context_map,oe[0]=new Pe(d,je),oe[1]=new Pe(m,Te[1]),oe[2]=new Pe(ye,qt),le=0;le<3;++le)oe[le].decode(L);for(Fn=0,Nt=0,Qn=He[X[0]],xr=o.lookupOffsets[Qn],wi=o.lookupOffsets[Qn+1],U=oe[1].htrees[0];I>0;){var Qe,nt,lt,ct,ut,rt,st,St,rn,Yt,Pn;for(L.readMoreInput(),W[1]===0&&(ae(Te[1],Me,1,X,Be,We,L),W[1]=j(Re,T,L),U=oe[1].htrees[X[1]]),--W[1],Qe=G(oe[1].codes,U,L),nt=Qe>>6,nt>=2?(nt-=2,st=-1):st=0,lt=a.kInsertRangeLut[nt]+(Qe>>3&7),ct=a.kCopyRangeLut[nt]+(Qe&7),ut=a.kInsertLengthPrefixCode[lt].offset+L.readBits(a.kInsertLengthPrefixCode[lt].nbits),rt=a.kCopyLengthPrefixCode[ct].offset+L.readBits(a.kCopyLengthPrefixCode[ct].nbits),N=Ce[ue-1&Ie],B=Ce[ue-2&Ie],Yt=0;Yt<ut;++Yt)L.readMoreInput(),W[0]===0&&(ae(Te[0],Me,0,X,Be,We,L),W[0]=j(Re,0,L),Xt=X[0]<<S,Fn=Xt,Qn=He[X[0]],xr=o.lookupOffsets[Qn],wi=o.lookupOffsets[Qn+1]),rn=o.lookup[xr+N]|o.lookup[wi+B],mt=ke[Fn+rn],--W[0],B=N,N=G(oe[0].codes,oe[0].htrees[mt],L),Ce[ue&Ie]=N,(ue&Ie)===Ie&&he.write(Ce,we),++ue;if(I-=ut,I<=0)break;if(st<0){var rn;if(L.readMoreInput(),W[2]===0&&(ae(Te[2],Me,2,X,Be,We,L),W[2]=j(Re,2*T,L),An=X[2]<<x,Nt=An),--W[2],rn=(rt>4?3:rt-2)&255,Ji=wt[Nt+rn],st=G(oe[2].codes,oe[2].htrees[Ji],L),st>=Xe){var Ft,ht,cr;st-=Xe,ht=st&Z,st>>=qe,Ft=(st>>1)+1,cr=(2+(st&1)<<Ft)-4,st=Xe+(cr+L.readBits(Ft)<<qe)+ht}}if(St=ge(st,tt,Ze),St<0)throw new Error("[BrotliDecompress] invalid distance");if(ue<me&&_e!==me?_e=ue:_e=me,Pn=ue&Ie,St>_e)if(rt>=n.minDictionaryWordLength&&rt<=n.maxDictionaryWordLength){var cr=n.offsetsByLength[rt],jt=St-_e-1,Tn=n.sizeBitsByLength[rt],Hs=(1<<Tn)-1,jr=jt&Hs,Zr=jt>>Tn;if(cr+=jr*rt,Zr<c.kNumTransforms){var tn=c.transformDictionaryWord(Ce,Pn,cr,rt,Zr);if(Pn+=tn,ue+=tn,I-=tn,Pn>=Oe){he.write(Ce,we);for(var On=0;On<Pn-Oe;On++)Ce[On]=Ce[Oe+On]}}else throw new Error("Invalid backward reference. pos: "+ue+" distance: "+St+" len: "+rt+" bytes left: "+I)}else throw new Error("Invalid backward reference. pos: "+ue+" distance: "+St+" len: "+rt+" bytes left: "+I);else{if(st>0&&(tt[Ze&3]=St,++Ze),rt>I)throw new Error("Invalid backward reference. pos: "+ue+" distance: "+St+" len: "+rt+" bytes left: "+I);for(Yt=0;Yt<rt;++Yt)Ce[ue&Ie]=Ce[ue-St&Ie],(ue&Ie)===Ie&&he.write(Ce,we),++ue,--I}N=Ce[ue-1&Ie],B=Ce[ue-2&Ie]}ue&=1073741823}}he.write(Ce,ue&Ie)}return Na.BrotliDecompress=Je,n.init(),Na}var k$=ew().BrotliDecompressBuffer;function Cl(r,e,t,n){Object.defineProperty(r,e,{get:t,set:n,enumerable:!0,configurable:!0})}function Bu(r){return r&&r.__esModule?r.default:r}var Ml={};Cl(Ml,"logErrors",()=>F$);Cl(Ml,"registerFormat",()=>oa);Cl(Ml,"create",()=>yd);Cl(Ml,"defaultLanguage",()=>Qc);Cl(Ml,"setDefaultLanguage",()=>O$);let F$=!1,vf=[];function oa(r){vf.push(r)}function yd(r,e){for(let t=0;t<vf.length;t++){let n=vf[t];if(n.probe(r)){let i=new n(new Sn(r));return e?i.getFont(e):i}}throw new Error("Unknown font format")}let Qc="en";function O$(r="en"){Qc=r}function En(r,e,t){if(t.get){let n=t.get;t.get=function(){let i=n.call(this);return Object.defineProperty(this,e,{value:i}),i}}else if(typeof t.value=="function"){let n=t.value;return{get(){let i=new Map;function s(...o){let a=o.length>0?o[0]:"value";if(i.has(a))return i.get(a);let c=n.apply(this,o);return i.set(a,c),c}return Object.defineProperty(this,e,{value:s}),s}}}}let B$=new de({firstCode:C,entryCount:C,idDelta:Le,idRangeOffset:C}),Rh=new de({startCharCode:ne,endCharCode:ne,glyphID:ne}),N$=new de({startUnicodeValue:Wi,additionalCount:Ve}),U$=new de({unicodeValue:Wi,glyphID:C}),V$=new J(N$,ne),z$=new J(U$,ne),$$=new de({varSelector:Wi,defaultUVS:new ee(ne,V$,{type:"parent"}),nonDefaultUVS:new ee(ne,z$,{type:"parent"})}),G$=new pt(C,{0:{length:C,language:C,codeMap:new It(Ve,256)},2:{length:C,language:C,subHeaderKeys:new J(C,256),subHeaderCount:r=>Math.max.apply(Math,r.subHeaderKeys),subHeaders:new It(B$,"subHeaderCount"),glyphIndexArray:new It(C,"subHeaderCount")},4:{length:C,language:C,segCountX2:C,segCount:r=>r.segCountX2>>1,searchRange:C,entrySelector:C,rangeShift:C,endCode:new It(C,"segCount"),reservedPad:new zt(C),startCode:new It(C,"segCount"),idDelta:new It(Le,"segCount"),idRangeOffset:new It(C,"segCount"),glyphIndexArray:new It(C,r=>(r.length-r._currentOffset)/2)},6:{length:C,language:C,firstCode:C,entryCount:C,glyphIndices:new It(C,"entryCount")},8:{reserved:new zt(C),length:ne,language:C,is32:new It(Ve,8192),nGroups:ne,groups:new It(Rh,"nGroups")},10:{reserved:new zt(C),length:ne,language:ne,firstCode:ne,entryCount:ne,glyphIndices:new It(C,"numChars")},12:{reserved:new zt(C),length:ne,language:ne,nGroups:ne,groups:new It(Rh,"nGroups")},13:{reserved:new zt(C),length:ne,language:ne,nGroups:ne,groups:new It(Rh,"nGroups")},14:{length:ne,numRecords:ne,varSelectors:new It($$,"numRecords")}}),H$=new de({platformID:C,encodingID:C,table:new ee(ne,G$,{type:"parent",lazy:!0})});var W$=new de({version:C,numSubtables:C,tables:new J(H$,"numSubtables")}),q$=new de({version:xs,revision:xs,checkSumAdjustment:ne,magicNumber:ne,flags:C,unitsPerEm:C,created:new J(xs,2),modified:new J(xs,2),xMin:Le,yMin:Le,xMax:Le,yMax:Le,macStyle:new Tr(C,["bold","italic","underline","outline","shadow","condensed","extended"]),lowestRecPPEM:C,fontDirectionHint:Le,indexToLocFormat:Le,glyphDataFormat:Le}),X$=new de({version:xs,ascent:Le,descent:Le,lineGap:Le,advanceWidthMax:C,minLeftSideBearing:Le,minRightSideBearing:Le,xMaxExtent:Le,caretSlopeRise:Le,caretSlopeRun:Le,caretOffset:Le,reserved:new zt(Le,4),metricDataFormat:Le,numberOfMetrics:C});let Y$=new de({advance:C,bearing:Le});var j$=new de({metrics:new It(Y$,r=>r.parent.hhea.numberOfMetrics),bearings:new It(Le,r=>r.parent.maxp.numGlyphs-r.parent.hhea.numberOfMetrics)}),Z$=new de({version:xs,numGlyphs:C,maxPoints:C,maxContours:C,maxComponentPoints:C,maxComponentContours:C,maxZones:C,maxTwilightPoints:C,maxStorage:C,maxFunctionDefs:C,maxInstructionDefs:C,maxStackElements:C,maxSizeOfInstructions:C,maxComponentElements:C,maxComponentDepth:C});function tw(r,e,t=0){return r===1&&Av[t]?Av[t]:eG[r][e]}const K$=new Set(["x-mac-roman","x-mac-cyrillic","iso-8859-6","iso-8859-8"]),J$={"x-mac-croatian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®Š™´¨≠ŽØ∞±≤≥∆µ∂∑∏š∫ªºΩžø¿¡¬√ƒ≈Ć«Č… ÀÃÕŒœĐ—“”‘’÷◊©⁄€‹›Æ»–·‚„‰ÂćÁčÈÍÎÏÌÓÔđÒÚÛÙıˆ˜¯πË˚¸Êæˇ","x-mac-gaelic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØḂ±≤≥ḃĊċḊḋḞḟĠġṀæøṁṖṗɼƒſṠ«»… ÀÃÕŒœ–—“”‘’ṡẛÿŸṪ€‹›Ŷŷṫ·Ỳỳ⁊ÂÊÁËÈÍÎÏÌÓÔ♣ÒÚÛÙıÝýŴŵẄẅẀẁẂẃ","x-mac-greek":"Ä¹²É³ÖÜ΅àâä΄¨çéèêë£™îï•½‰ôö¦€ùûü†ΓΔΘΛΞΠß®©ΣΪ§≠°·Α±≤≥¥ΒΕΖΗΙΚΜΦΫΨΩάΝ¬ΟΡ≈Τ«»… ΥΧΆΈœ–―“”‘’÷ΉΊΌΎέήίόΏύαβψδεφγηιξκλμνοπώρστθωςχυζϊϋΐΰ­","x-mac-icelandic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûüÝ°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€ÐðÞþý·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-inuit":"ᐃᐄᐅᐆᐊᐋᐱᐲᐳᐴᐸᐹᑉᑎᑏᑐᑑᑕᑖᑦᑭᑮᑯᑰᑲᑳᒃᒋᒌᒍᒎᒐᒑ°ᒡᒥᒦ•¶ᒧ®©™ᒨᒪᒫᒻᓂᓃᓄᓅᓇᓈᓐᓯᓰᓱᓲᓴᓵᔅᓕᓖᓗᓘᓚᓛᓪᔨᔩᔪᔫᔭ… ᔮᔾᕕᕖᕗ–—“”‘’ᕘᕙᕚᕝᕆᕇᕈᕉᕋᕌᕐᕿᖀᖁᖂᖃᖄᖅᖏᖐᖑᖒᖓᖔᖕᙱᙲᙳᙴᙵᙶᖖᖠᖡᖢᖣᖤᖥᖦᕼŁł","x-mac-ce":"ÄĀāÉĄÖÜáąČäčĆćéŹźĎíďĒēĖóėôöõúĚěü†°Ę£§•¶ß®©™ę¨≠ģĮįĪ≤≥īĶ∂∑łĻļĽľĹĺŅņŃ¬√ńŇ∆«»… ňŐÕőŌ–—“”‘’÷◊ōŔŕŘ‹›řŖŗŠ‚„šŚśÁŤťÍŽžŪÓÔūŮÚůŰűŲųÝýķŻŁżĢˇ","x-mac-romanian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ĂȘ∞±≤≥¥µ∂∑∏π∫ªºΩăș¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›Țț‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-turkish":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸĞğİıŞş‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙˆ˜¯˘˙˚¸˝˛ˇ"},kh=new Map;function Q$(r){let e=kh.get(r);if(e)return e;let t=J$[r];if(t){let n=new Map;for(let i=0;i<t.length;i++)n.set(t.charCodeAt(i),128+i);return kh.set(r,n),n}if(K$.has(r)){let n=new TextDecoder(r),i=new Uint8Array(128);for(let a=0;a<128;a++)i[a]=128+a;let s=new Map,o=n.decode(i);for(let a=0;a<128;a++)s.set(o.charCodeAt(a),128+a);return kh.set(r,s),s}}const eG=[["utf16be","utf16be","utf16be","utf16be","utf16be","utf16be"],["x-mac-roman","shift-jis","big5","euc-kr","iso-8859-6","iso-8859-8","x-mac-greek","x-mac-cyrillic","x-mac-symbol","x-mac-devanagari","x-mac-gurmukhi","x-mac-gujarati","Oriya","Bengali","Tamil","Telugu","Kannada","Malayalam","Sinhalese","Burmese","Khmer","iso-8859-11","Laotian","Georgian","Armenian","hz-gb-2312","Tibetan","Mongolian","Geez","x-mac-ce","Vietnamese","Sindhi"],["ascii"],["symbol","utf16be","shift-jis","gb18030","big5","x-cp20949","johab",null,null,null,"utf16be"]],Av={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"},tG=[[],{0:"en",30:"fo",60:"ks",90:"rw",1:"fr",31:"fa",61:"ku",91:"rn",2:"de",32:"ru",62:"sd",92:"ny",3:"it",33:"zh",63:"bo",93:"mg",4:"nl",34:"nl-BE",64:"ne",94:"eo",5:"sv",35:"ga",65:"sa",128:"cy",6:"es",36:"sq",66:"mr",129:"eu",7:"da",37:"ro",67:"bn",130:"ca",8:"pt",38:"cz",68:"as",131:"la",9:"no",39:"sk",69:"gu",132:"qu",10:"he",40:"si",70:"pa",133:"gn",11:"ja",41:"yi",71:"or",134:"ay",12:"ar",42:"sr",72:"ml",135:"tt",13:"fi",43:"mk",73:"kn",136:"ug",14:"el",44:"bg",74:"ta",137:"dz",15:"is",45:"uk",75:"te",138:"jv",16:"mt",46:"be",76:"si",139:"su",17:"tr",47:"uz",77:"my",140:"gl",18:"hr",48:"kk",78:"km",141:"af",19:"zh-Hant",49:"az-Cyrl",79:"lo",142:"br",20:"ur",50:"az-Arab",80:"vi",143:"iu",21:"hi",51:"hy",81:"id",144:"gd",22:"th",52:"ka",82:"tl",145:"gv",23:"ko",53:"mo",83:"ms",146:"ga",24:"lt",54:"ky",84:"ms-Arab",147:"to",25:"pl",55:"tg",85:"am",148:"el-polyton",26:"hu",56:"tk",86:"ti",149:"kl",27:"es",57:"mn-CN",87:"om",150:"az",28:"lv",58:"mn",88:"so",151:"nn",29:"se",59:"ps",89:"sw"},[],{1078:"af",16393:"en-IN",1159:"rw",1074:"tn",1052:"sq",6153:"en-IE",1089:"sw",1115:"si",1156:"gsw",8201:"en-JM",1111:"kok",1051:"sk",1118:"am",17417:"en-MY",1042:"ko",1060:"sl",5121:"ar-DZ",5129:"en-NZ",1088:"ky",11274:"es-AR",15361:"ar-BH",13321:"en-PH",1108:"lo",16394:"es-BO",3073:"ar",18441:"en-SG",1062:"lv",13322:"es-CL",2049:"ar-IQ",7177:"en-ZA",1063:"lt",9226:"es-CO",11265:"ar-JO",11273:"en-TT",2094:"dsb",5130:"es-CR",13313:"ar-KW",2057:"en-GB",1134:"lb",7178:"es-DO",12289:"ar-LB",1033:"en",1071:"mk",12298:"es-EC",4097:"ar-LY",12297:"en-ZW",2110:"ms-BN",17418:"es-SV",6145:"ary",1061:"et",1086:"ms",4106:"es-GT",8193:"ar-OM",1080:"fo",1100:"ml",18442:"es-HN",16385:"ar-QA",1124:"fil",1082:"mt",2058:"es-MX",1025:"ar-SA",1035:"fi",1153:"mi",19466:"es-NI",10241:"ar-SY",2060:"fr-BE",1146:"arn",6154:"es-PA",7169:"aeb",3084:"fr-CA",1102:"mr",15370:"es-PY",14337:"ar-AE",1036:"fr",1148:"moh",10250:"es-PE",9217:"ar-YE",5132:"fr-LU",1104:"mn",20490:"es-PR",1067:"hy",6156:"fr-MC",2128:"mn-CN",3082:"es",1101:"as",4108:"fr-CH",1121:"ne",1034:"es",2092:"az-Cyrl",1122:"fy",1044:"nb",21514:"es-US",1068:"az",1110:"gl",2068:"nn",14346:"es-UY",1133:"ba",1079:"ka",1154:"oc",8202:"es-VE",1069:"eu",3079:"de-AT",1096:"or",2077:"sv-FI",1059:"be",1031:"de",1123:"ps",1053:"sv",2117:"bn",5127:"de-LI",1045:"pl",1114:"syr",1093:"bn-IN",4103:"de-LU",1046:"pt",1064:"tg",8218:"bs-Cyrl",2055:"de-CH",2070:"pt-PT",2143:"tzm",5146:"bs",1032:"el",1094:"pa",1097:"ta",1150:"br",1135:"kl",1131:"qu-BO",1092:"tt",1026:"bg",1095:"gu",2155:"qu-EC",1098:"te",1027:"ca",1128:"ha",3179:"qu",1054:"th",3076:"zh-HK",1037:"he",1048:"ro",1105:"bo",5124:"zh-MO",1081:"hi",1047:"rm",1055:"tr",2052:"zh",1038:"hu",1049:"ru",1090:"tk",4100:"zh-SG",1039:"is",9275:"smn",1152:"ug",1028:"zh-TW",1136:"ig",4155:"smj-NO",1058:"uk",1155:"co",1057:"id",5179:"smj",1070:"hsb",1050:"hr",1117:"iu",3131:"se-FI",1056:"ur",4122:"hr-BA",2141:"iu-Latn",1083:"se",2115:"uz-Cyrl",1029:"cs",2108:"ga",2107:"se-SE",1091:"uz",1030:"da",1076:"xh",8251:"sms",1066:"vi",1164:"prs",1077:"zu",6203:"sma-NO",1106:"cy",1125:"dv",1040:"it",7227:"sms",1160:"wo",2067:"nl-BE",2064:"it-CH",1103:"sa",1157:"sah",1043:"nl",1041:"ja",7194:"sr-Cyrl-BA",1144:"ii",3081:"en-AU",1099:"kn",3098:"sr",1130:"yo",10249:"en-BZ",1087:"kk",6170:"sr-Latn-BA",4105:"en-CA",1107:"km",2074:"sr-Latn",9225:"en-029",1158:"quc",1132:"nso"}];let Pv=new de({platformID:C,encodingID:C,languageID:C,nameID:C,length:C,string:new ee(C,new Pt("length",r=>tw(r.platformID,r.encodingID,r.languageID)),{type:"parent",relativeTo:r=>r.parent.stringOffset,allowNull:!1})}),nG=new de({length:C,tag:new ee(C,new Pt("length","utf16be"),{type:"parent",relativeTo:r=>r.stringOffset})});var eu=new pt(C,{0:{count:C,stringOffset:C,records:new J(Pv,"count")},1:{count:C,stringOffset:C,records:new J(Pv,"count"),langTagCount:C,langTags:new J(nG,"langTagCount")}}),rG=eu;const bf=["copyright","fontFamily","fontSubfamily","uniqueSubfamily","fullName","version","postscriptName","trademark","manufacturer","designer","description","vendorURL","designerURL","license","licenseURL",null,"preferredFamily","preferredSubfamily","compatibleFull","sampleText","postscriptCIDFontName","wwsFamilyName","wwsSubfamilyName"];eu.process=function(r){var e={};for(let t of this.records){let n=tG[t.platformID][t.languageID];n==null&&this.langTags!=null&&t.languageID>=32768&&(n=this.langTags[t.languageID-32768].tag),n==null&&(n=t.platformID+"-"+t.languageID);let i=t.nameID>=256?"fontFeatures":bf[t.nameID]||t.nameID;e[i]==null&&(e[i]={});let s=e[i];t.nameID>=256&&(s=s[t.nameID]||(s[t.nameID]={})),(typeof t.string=="string"||typeof s[n]!="string")&&(s[n]=t.string)}this.records=e};eu.preEncode=function(){if(Array.isArray(this.records))return;this.version=0;let r=[];for(let e in this.records){let t=this.records[e];e!=="fontFeatures"&&(r.push({platformID:3,encodingID:1,languageID:1033,nameID:bf.indexOf(e),length:t.en.length*2,string:t.en}),e==="postscriptName"&&r.push({platformID:1,encodingID:0,languageID:0,nameID:bf.indexOf(e),length:t.en.length,string:t.en}))}this.records=r,this.count=r.length,this.stringOffset=eu.size(this,null,!1)};var nw=new pt(C,{header:{xAvgCharWidth:Le,usWeightClass:C,usWidthClass:C,fsType:new Tr(C,[null,"noEmbedding","viewOnly","editable",null,null,null,null,"noSubsetting","bitmapOnly"]),ySubscriptXSize:Le,ySubscriptYSize:Le,ySubscriptXOffset:Le,ySubscriptYOffset:Le,ySuperscriptXSize:Le,ySuperscriptYSize:Le,ySuperscriptXOffset:Le,ySuperscriptYOffset:Le,yStrikeoutSize:Le,yStrikeoutPosition:Le,sFamilyClass:Le,panose:new J(Ve,10),ulCharRange:new J(ne,4),vendorID:new Pt(4),fsSelection:new Tr(C,["italic","underscore","negative","outlined","strikeout","bold","regular","useTypoMetrics","wws","oblique"]),usFirstCharIndex:C,usLastCharIndex:C},0:{},1:{typoAscender:Le,typoDescender:Le,typoLineGap:Le,winAscent:C,winDescent:C,codePageRange:new J(ne,2)},2:{typoAscender:Le,typoDescender:Le,typoLineGap:Le,winAscent:C,winDescent:C,codePageRange:new J(ne,2),xHeight:Le,capHeight:Le,defaultChar:C,breakChar:C,maxContent:C},5:{typoAscender:Le,typoDescender:Le,typoLineGap:Le,winAscent:C,winDescent:C,codePageRange:new J(ne,2),xHeight:Le,capHeight:Le,defaultChar:C,breakChar:C,maxContent:C,usLowerOpticalPointSize:C,usUpperOpticalPointSize:C}});let Fh=nw.versions;Fh[3]=Fh[4]=Fh[2];var iG=nw,sG=new pt(nn,{header:{italicAngle:nn,underlinePosition:Le,underlineThickness:Le,isFixedPitch:ne,minMemType42:ne,maxMemType42:ne,minMemType1:ne,maxMemType1:ne},1:{},2:{numberOfGlyphs:C,glyphNameIndex:new J(C,"numberOfGlyphs"),names:new J(new Pt(Ve))},2.5:{numberOfGlyphs:C,offsets:new J(Ve,"numberOfGlyphs")},3:{},4:{map:new J(ne,r=>r.parent.maxp.numGlyphs)}}),oG=new de({controlValues:new J(Le)}),aG=new de({instructions:new J(Ve)});let _d=new pt("head.indexToLocFormat",{0:{offsets:new J(C)},1:{offsets:new J(ne)}});_d.process=function(){if(this.version===0&&!this._processed){for(let r=0;r<this.offsets.length;r++)this.offsets[r]<<=1;this._processed=!0}};_d.preEncode=function(){if(this.version===0&&this._processed!==!1){for(let r=0;r<this.offsets.length;r++)this.offsets[r]>>>=1;this._processed=!1}};var lG=_d,cG=new de({controlValueProgram:new J(Ve)}),uG=new J(new Gr);class zr{getCFFVersion(e){for(;e&&!e.hdrSize;)e=e.parent;return e?e.version:-1}decode(e,t){let i=this.getCFFVersion(t)>=2?e.readUInt32BE():e.readUInt16BE();if(i===0)return[];let s=e.readUInt8(),o;if(s===1)o=Ve;else if(s===2)o=C;else if(s===3)o=Wi;else if(s===4)o=ne;else throw new Error(`Bad offset size in CFFIndex: ${s} ${e.pos}`);let a=[],c=e.pos+(i+1)*s-1,u=o.decode(e);for(let f=0;f<i;f++){let d=o.decode(e);if(this.type!=null){let m=e.pos;e.pos=c+u,t.length=d-u,a.push(this.type.decode(e,t)),e.pos=m}else a.push({offset:c+u,length:d-u});u=d}return e.pos=c+u,a}size(e,t){let n=2;if(e.length===0)return n;let i=this.type||new Gr,s=1;for(let a=0;a<e.length;a++){let c=e[a];s+=i.size(c,t)}let o;if(s<=255)o=Ve;else if(s<=65535)o=C;else if(s<=16777215)o=Wi;else if(s<=4294967295)o=ne;else throw new Error("Bad offset in CFFIndex");return n+=1+o.size()*(e.length+1),n+=s-1,n}encode(e,t,n){if(e.writeUInt16BE(t.length),t.length===0)return;let i=this.type||new Gr,s=[],o=1;for(let c of t){let u=i.size(c,n);s.push(u),o+=u}let a;if(o<=255)a=Ve;else if(o<=65535)a=C;else if(o<=16777215)a=Wi;else if(o<=4294967295)a=ne;else throw new Error("Bad offset in CFFIndex");e.writeUInt8(a.size()),o=1,a.encode(e,o);for(let c of s)o+=c,a.encode(e,o);for(let c of t)i.encode(e,c,n)}constructor(e){this.type=e}}const Va=15,Tv=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"],Lv={".":10,E:11,"E-":12,"-":14};class Oh{static decode(e,t){if(32<=t&&t<=246)return t-139;if(247<=t&&t<=250)return(t-247)*256+e.readUInt8()+108;if(251<=t&&t<=254)return-(t-251)*256-e.readUInt8()-108;if(t===28)return e.readInt16BE();if(t===29)return e.readInt32BE();if(t===30){let n="";for(;;){let i=e.readUInt8(),s=i>>4;if(s===Va)break;n+=Tv[s];let o=i&15;if(o===Va)break;n+=Tv[o]}return parseFloat(n)}return null}static size(e){if(e.forceLarge&&(e=32768),(e|0)!==e){let t=""+e;return 1+Math.ceil((t.length+1)/2)}else return-107<=e&&e<=107?1:108<=e&&e<=1131||-1131<=e&&e<=-108?2:-32768<=e&&e<=32767?3:5}static encode(e,t){let n=Number(t);if(t.forceLarge)return e.writeUInt8(29),e.writeInt32BE(n);if((n|0)!==n){e.writeUInt8(30);let s=""+n;for(let o=0;o<s.length;o+=2){let a=s[o],c=Lv[a]||+a;if(o===s.length-1)var i=Va;else{let u=s[o+1];var i=Lv[u]||+u}e.writeUInt8(c<<4|i&15)}if(i!==Va)return e.writeUInt8(Va<<4)}else return-107<=n&&n<=107?e.writeUInt8(n+139):108<=n&&n<=1131?(n-=108,e.writeUInt8((n>>8)+247),e.writeUInt8(n&255)):-1131<=n&&n<=-108?(n=-n-108,e.writeUInt8((n>>8)+251),e.writeUInt8(n&255)):-32768<=n&&n<=32767?(e.writeUInt8(28),e.writeInt16BE(n)):(e.writeUInt8(29),e.writeInt32BE(n))}}class Nu{decodeOperands(e,t,n,i){if(Array.isArray(e))return i.map((s,o)=>this.decodeOperands(e[o],t,n,[s]));if(e.decode!=null)return e.decode(t,n,i);switch(e){case"number":case"offset":case"sid":return i[0];case"boolean":return!!i[0];default:return i}}encodeOperands(e,t,n,i){return Array.isArray(e)?i.map((s,o)=>this.encodeOperands(e[o],t,n,s)[0]):e.encode!=null?e.encode(t,i,n):typeof i=="number"?[i]:typeof i=="boolean"?[+i]:Array.isArray(i)?i:[i]}decode(e,t){let n=e.pos+t.length,i={},s=[];Object.defineProperties(i,{parent:{value:t},_startOffset:{value:e.pos}});for(let o in this.fields){let a=this.fields[o];i[a[1]]=a[3]}for(;e.pos<n;){let o=e.readUInt8();if(o<28){o===12&&(o=o<<8|e.readUInt8());let a=this.fields[o];if(!a)throw new Error(`Unknown operator ${o}`);let c=this.decodeOperands(a[2],e,i,s);c!=null&&(c instanceof hd?Object.defineProperty(i,a[1],c):i[a[1]]=c),s=[]}else s.push(Oh.decode(e,o))}return i}size(e,t,n=!0){let i={parent:t,val:e,pointerSize:0,startOffset:t.startOffset||0},s=0;for(let o in this.fields){let a=this.fields[o],c=e[a[1]];if(c==null||dv(c,a[3]))continue;let u=this.encodeOperands(a[2],null,i,c);for(let d of u)s+=Oh.size(d);let f=Array.isArray(a[0])?a[0]:[a[0]];s+=f.length}return n&&(s+=i.pointerSize),s}encode(e,t,n){let i={pointers:[],startOffset:e.pos,parent:n,val:t,pointerSize:0};i.pointerOffset=e.pos+this.size(t,i,!1);for(let o of this.ops){let a=t[o[1]];if(a==null||dv(a,o[3]))continue;let c=this.encodeOperands(o[2],e,i,a);for(let f of c)Oh.encode(e,f);let u=Array.isArray(o[0])?o[0]:[o[0]];for(let f of u)e.writeUInt8(f)}let s=0;for(;s<i.pointers.length;){let o=i.pointers[s++];o.type.encode(e,o.val,o.parent)}}constructor(e=[]){this.ops=e,this.fields={};for(let t of e){let n=Array.isArray(t[0])?t[0][0]<<8|t[0][1]:t[0];this.fields[n]=t}}}class Pr extends ee{decode(e,t,n){return this.offsetType={decode:()=>n[0]},super.decode(e,t,n)}encode(e,t,n){if(!e)return this.offsetType={size:()=>0},this.size(t,n),[new Iv(0)];let i=null;return this.offsetType={encode:(s,o)=>i=o},super.encode(e,t,n),[new Iv(i)]}constructor(e,t={}){t.type==null&&(t.type="global"),super(null,e,t)}}class Iv{valueOf(){return this.val}constructor(e){this.val=e,this.forceLarge=!0}}class hG{static decode(e,t,n){let i=n.pop();for(;n.length>i;)n.pop()}}var xf=new Nu([[6,"BlueValues","delta",null],[7,"OtherBlues","delta",null],[8,"FamilyBlues","delta",null],[9,"FamilyOtherBlues","delta",null],[[12,9],"BlueScale","number",.039625],[[12,10],"BlueShift","number",7],[[12,11],"BlueFuzz","number",1],[10,"StdHW","number",null],[11,"StdVW","number",null],[[12,12],"StemSnapH","delta",null],[[12,13],"StemSnapV","delta",null],[[12,14],"ForceBold","boolean",!1],[[12,17],"LanguageGroup","number",0],[[12,18],"ExpansionFactor","number",.06],[[12,19],"initialRandomSeed","number",0],[20,"defaultWidthX","number",0],[21,"nominalWidthX","number",0],[22,"vsindex","number",0],[23,"blend",hG,null],[19,"Subrs",new Pr(new zr,{type:"local"}),null]]),Oc=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"];let rw=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],fG=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],iw=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron"],dG=[".notdef","space","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","fi","fl","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],pG=[".notdef","space","dollaroldstyle","dollarsuperior","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","fi","fl","ffi","ffl","parenleftinferior","parenrightinferior","hyphensuperior","colonmonetary","onefitted","rupiah","centoldstyle","figuredash","hypheninferior","onequarter","onehalf","threequarters","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior"],sw=new de({reserved:new zt(C),reqFeatureIndex:C,featureCount:C,featureIndexes:new J(C,"featureCount")}),mG=new de({tag:new Pt(4),langSys:new ee(C,sw,{type:"parent"})}),gG=new de({defaultLangSys:new ee(C,sw),count:C,langSysRecords:new J(mG,"count")}),vG=new de({tag:new Pt(4),script:new ee(C,gG,{type:"parent"})}),ow=new J(vG,C),bG=new de({version:C,nameID:C}),aw=new de({featureParams:new ee(C,bG),lookupCount:C,lookupListIndexes:new J(C,"lookupCount")}),xG=new de({tag:new Pt(4),feature:new ee(C,aw,{type:"parent"})}),lw=new J(xG,C),wG=new de({markAttachmentType:Ve,flags:new Tr(Ve,["rightToLeft","ignoreBaseGlyphs","ignoreLigatures","ignoreMarks","useMarkFilteringSet"])});function tu(r){let e=new de({lookupType:C,flags:wG,subTableCount:C,subTables:new J(new ee(C,r),"subTableCount"),markFilteringSet:new Zc(C,t=>t.flags.flags.useMarkFilteringSet)});return new It(new ee(C,e),C)}let yG=new de({start:C,end:C,startCoverageIndex:C}),At=new pt(C,{1:{glyphCount:C,glyphs:new J(C,"glyphCount")},2:{rangeCount:C,rangeRecords:new J(yG,"rangeCount")}}),_G=new de({start:C,end:C,class:C}),qi=new pt(C,{1:{startGlyph:C,glyphCount:C,classValueArray:new J(C,"glyphCount")},2:{classRangeCount:C,classRangeRecord:new J(_G,"classRangeCount")}}),Gi=new de({a:C,b:C,deltaFormat:C}),El=new de({sequenceIndex:C,lookupListIndex:C}),SG=new de({glyphCount:C,lookupCount:C,input:new J(C,r=>r.glyphCount-1),lookupRecords:new J(El,"lookupCount")}),CG=new J(new ee(C,SG),C),MG=new de({glyphCount:C,lookupCount:C,classes:new J(C,r=>r.glyphCount-1),lookupRecords:new J(El,"lookupCount")}),EG=new J(new ee(C,MG),C),cw=new pt(C,{1:{coverage:new ee(C,At),ruleSetCount:C,ruleSets:new J(new ee(C,CG),"ruleSetCount")},2:{coverage:new ee(C,At),classDef:new ee(C,qi),classSetCnt:C,classSet:new J(new ee(C,EG),"classSetCnt")},3:{glyphCount:C,lookupCount:C,coverages:new J(new ee(C,At),"glyphCount"),lookupRecords:new J(El,"lookupCount")}}),AG=new de({backtrackGlyphCount:C,backtrack:new J(C,"backtrackGlyphCount"),inputGlyphCount:C,input:new J(C,r=>r.inputGlyphCount-1),lookaheadGlyphCount:C,lookahead:new J(C,"lookaheadGlyphCount"),lookupCount:C,lookupRecords:new J(El,"lookupCount")}),Dv=new J(new ee(C,AG),C),uw=new pt(C,{1:{coverage:new ee(C,At),chainCount:C,chainRuleSets:new J(new ee(C,Dv),"chainCount")},2:{coverage:new ee(C,At),backtrackClassDef:new ee(C,qi),inputClassDef:new ee(C,qi),lookaheadClassDef:new ee(C,qi),chainCount:C,chainClassSet:new J(new ee(C,Dv),"chainCount")},3:{backtrackGlyphCount:C,backtrackCoverage:new J(new ee(C,At),"backtrackGlyphCount"),inputGlyphCount:C,inputCoverage:new J(new ee(C,At),"inputGlyphCount"),lookaheadGlyphCount:C,lookaheadCoverage:new J(new ee(C,At),"lookaheadGlyphCount"),lookupCount:C,lookupRecords:new J(El,"lookupCount")}}),Ja=new zs(16,"BE",14),PG=new de({startCoord:Ja,peakCoord:Ja,endCoord:Ja}),TG=new de({axisCount:C,regionCount:C,variationRegions:new J(new J(PG,"axisCount"),"regionCount")}),LG=new de({shortDeltas:new J(Le,r=>r.parent.shortDeltaCount),regionDeltas:new J(dn,r=>r.parent.regionIndexCount-r.parent.shortDeltaCount),deltas:r=>r.shortDeltas.concat(r.regionDeltas)}),IG=new de({itemCount:C,shortDeltaCount:C,regionIndexCount:C,regionIndexes:new J(C,"regionIndexCount"),deltaSets:new J(LG,"itemCount")}),Uu=new de({format:C,variationRegionList:new ee(ne,TG),variationDataCount:C,itemVariationData:new J(new ee(ne,IG),"variationDataCount")}),DG=new pt(C,{1:{axisIndex:C,axisIndex:C,filterRangeMinValue:Ja,filterRangeMaxValue:Ja}}),RG=new de({conditionCount:C,conditionTable:new J(new ee(ne,DG),"conditionCount")}),kG=new de({featureIndex:C,alternateFeatureTable:new ee(ne,aw,{type:"parent"})}),FG=new de({version:nn,substitutionCount:C,substitutions:new J(kG,"substitutionCount")}),OG=new de({conditionSet:new ee(ne,RG,{type:"parent"}),featureTableSubstitution:new ee(ne,FG,{type:"parent"})}),hw=new de({majorVersion:C,minorVersion:C,featureVariationRecordCount:ne,featureVariationRecords:new J(OG,"featureVariationRecordCount")});class fw{decode(e,t,n){return this.predefinedOps[n[0]]?this.predefinedOps[n[0]]:this.type.decode(e,t,n)}size(e,t){return this.type.size(e,t)}encode(e,t,n){let i=this.predefinedOps.indexOf(t);return i!==-1?i:this.type.encode(e,t,n)}constructor(e,t){this.predefinedOps=e,this.type=t}}class BG extends Et{decode(e){return Ve.decode(e)&127}constructor(){super("UInt8")}}let dw=new de({first:C,nLeft:Ve}),NG=new de({first:C,nLeft:C}),UG=new pt(new BG,{0:{nCodes:Ve,codes:new J(Ve,"nCodes")},1:{nRanges:Ve,ranges:new J(dw,"nRanges")}}),VG=new fw([rw,fG],new Pr(UG,{lazy:!0}));class Rv extends J{decode(e,t){let n=qr(this.length,e,t),i=0,s=[];for(;i<n;){let o=this.type.decode(e,t);o.offset=i,i+=o.nLeft+1,s.push(o)}return s}}let zG=new pt(Ve,{0:{glyphs:new J(C,r=>r.parent.CharStrings.length-1)},1:{ranges:new Rv(dw,r=>r.parent.CharStrings.length-1)},2:{ranges:new Rv(NG,r=>r.parent.CharStrings.length-1)}}),$G=new fw([iw,dG,pG],new Pr(zG,{lazy:!0})),GG=new de({first:C,fd:Ve}),HG=new de({first:ne,fd:C}),pw=new pt(Ve,{0:{fds:new J(Ve,r=>r.parent.CharStrings.length)},3:{nRanges:C,ranges:new J(GG,"nRanges"),sentinel:C},4:{nRanges:ne,ranges:new J(HG,"nRanges"),sentinel:ne}}),Bh=new Pr(xf);class mw{decode(e,t,n){return t.length=n[0],Bh.decode(e,t,[n[1]])}size(e,t){return[xf.size(e,t,!1),Bh.size(e,t)[0]]}encode(e,t,n){return[xf.size(t,n,!1),Bh.encode(e,t,n)[0]]}}let gw=new Nu([[18,"Private",new mw,null],[[12,38],"FontName","sid",null],[[12,7],"FontMatrix","array",[.001,0,0,.001,0,0]],[[12,5],"PaintType","number",0]]),WG=new Nu([[[12,30],"ROS",["sid","sid","number"],null],[0,"version","sid",null],[1,"Notice","sid",null],[[12,0],"Copyright","sid",null],[2,"FullName","sid",null],[3,"FamilyName","sid",null],[4,"Weight","sid",null],[[12,1],"isFixedPitch","boolean",!1],[[12,2],"ItalicAngle","number",0],[[12,3],"UnderlinePosition","number",-100],[[12,4],"UnderlineThickness","number",50],[[12,5],"PaintType","number",0],[[12,6],"CharstringType","number",2],[[12,7],"FontMatrix","array",[.001,0,0,.001,0,0]],[13,"UniqueID","number",null],[5,"FontBBox","array",[0,0,0,0]],[[12,8],"StrokeWidth","number",0],[14,"XUID","array",null],[15,"charset",$G,iw],[16,"Encoding",VG,rw],[17,"CharStrings",new Pr(new zr),null],[18,"Private",new mw,null],[[12,20],"SyntheticBase","number",null],[[12,21],"PostScript","sid",null],[[12,22],"BaseFontName","sid",null],[[12,23],"BaseFontBlend","delta",null],[[12,31],"CIDFontVersion","number",0],[[12,32],"CIDFontRevision","number",0],[[12,33],"CIDFontType","number",0],[[12,34],"CIDCount","number",8720],[[12,35],"UIDBase","number",null],[[12,37],"FDSelect",new Pr(pw),null],[[12,36],"FDArray",new Pr(new zr(gw)),null],[[12,38],"FontName","sid",null]]),qG=new de({length:C,itemVariationStore:Uu}),XG=new Nu([[[12,7],"FontMatrix","array",[.001,0,0,.001,0,0]],[17,"CharStrings",new Pr(new zr),null],[[12,37],"FDSelect",new Pr(pw),null],[[12,36],"FDArray",new Pr(new zr(gw)),null],[24,"vstore",new Pr(qG),null],[25,"maxstack","number",193]]),YG=new pt(Gz,{1:{hdrSize:Ve,offSize:Ve,nameIndex:new zr(new Pt("length")),topDictIndex:new zr(WG),stringIndex:new zr(new Pt("length")),globalSubrIndex:new zr},2:{hdrSize:Ve,length:C,topDict:XG,globalSubrIndex:new zr}});var vw=YG;class Sd{static decode(e){return new Sd(e)}decode(){this.stream.pos;let e=vw.decode(this.stream);for(let t in e){let n=e[t];this[t]=n}if(this.version<2){if(this.topDictIndex.length!==1)throw new Error("Only a single font is allowed in CFF");this.topDict=this.topDictIndex[0]}return this.isCIDFont=this.topDict.ROS!=null,this}string(e){return this.version>=2?null:e<Oc.length?Oc[e]:this.stringIndex[e-Oc.length]}get postscriptName(){return this.version<2?this.nameIndex[0]:null}get fullName(){return this.string(this.topDict.FullName)}get familyName(){return this.string(this.topDict.FamilyName)}getCharString(e){return this.stream.pos=this.topDict.CharStrings[e].offset,this.stream.readBuffer(this.topDict.CharStrings[e].length)}getGlyphName(e){if(this.version>=2||this.isCIDFont)return null;let{charset:t}=this.topDict;if(Array.isArray(t))return t[e];if(e===0)return".notdef";switch(e-=1,t.version){case 0:return this.string(t.glyphs[e]);case 1:case 2:for(let n=0;n<t.ranges.length;n++){let i=t.ranges[n];if(i.offset<=e&&e<=i.offset+i.nLeft)return this.string(i.first+(e-i.offset))}break}return null}fdForGlyph(e){if(!this.topDict.FDSelect)return null;switch(this.topDict.FDSelect.version){case 0:return this.topDict.FDSelect.fds[e];case 3:case 4:let{ranges:t}=this.topDict.FDSelect,n=0,i=t.length-1;for(;n<=i;){let s=n+i>>1;if(e<t[s].first)i=s-1;else if(s<i&&e>=t[s+1].first)n=s+1;else return t[s].fd}default:throw new Error(`Unknown FDSelect version: ${this.topDict.FDSelect.version}`)}}privateDictForGlyph(e){if(this.topDict.FDSelect){let t=this.fdForGlyph(e);return this.topDict.FDArray[t]?this.topDict.FDArray[t].Private:null}return this.version<2?this.topDict.Private:this.topDict.FDArray[0].Private}constructor(e){this.stream=e,this.decode()}}var bw=Sd;let jG=new de({glyphIndex:C,vertOriginY:Le});var ZG=new de({majorVersion:C,minorVersion:C,defaultVertOriginY:Le,numVertOriginYMetrics:C,metrics:new J(jG,"numVertOriginYMetrics")});let Fo=new de({height:Ve,width:Ve,horiBearingX:dn,horiBearingY:dn,horiAdvance:Ve,vertBearingX:dn,vertBearingY:dn,vertAdvance:Ve}),Cc=new de({height:Ve,width:Ve,bearingX:dn,bearingY:dn,advance:Ve}),kv=new de({glyph:C,xOffset:dn,yOffset:dn});class Fv{}class Nh{}new pt("version",{1:{metrics:Cc,data:Fv},2:{metrics:Cc,data:Nh},5:{data:Nh},6:{metrics:Fo,data:Fv},7:{metrics:Fo,data:Nh},8:{metrics:Cc,pad:new zt(Ve),numComponents:C,components:new J(kv,"numComponents")},9:{metrics:Fo,pad:new zt(Ve),numComponents:C,components:new J(kv,"numComponents")},17:{metrics:Cc,dataLen:ne,data:new Gr("dataLen")},18:{metrics:Fo,dataLen:ne,data:new Gr("dataLen")},19:{dataLen:ne,data:new Gr("dataLen")}});let Ov=new de({ascender:dn,descender:dn,widthMax:Ve,caretSlopeNumerator:dn,caretSlopeDenominator:dn,caretOffset:dn,minOriginSB:dn,minAdvanceSB:dn,maxBeforeBL:dn,minAfterBL:dn,pad:new zt(dn,2)}),KG=new de({glyphCode:C,offset:C}),JG=new pt(C,{header:{imageFormat:C,imageDataOffset:ne},1:{offsetArray:new J(ne,r=>r.parent.lastGlyphIndex-r.parent.firstGlyphIndex+1)},2:{imageSize:ne,bigMetrics:Fo},3:{offsetArray:new J(C,r=>r.parent.lastGlyphIndex-r.parent.firstGlyphIndex+1)},4:{numGlyphs:ne,glyphArray:new J(KG,r=>r.numGlyphs+1)},5:{imageSize:ne,bigMetrics:Fo,numGlyphs:ne,glyphCodeArray:new J(C,"numGlyphs")}}),QG=new de({firstGlyphIndex:C,lastGlyphIndex:C,subtable:new ee(ne,JG)}),eH=new de({indexSubTableArray:new ee(ne,new J(QG,1),{type:"parent"}),indexTablesSize:ne,numberOfIndexSubTables:ne,colorRef:ne,hori:Ov,vert:Ov,startGlyphIndex:C,endGlyphIndex:C,ppemX:Ve,ppemY:Ve,bitDepth:Ve,flags:new Tr(Ve,["horizontal","vertical"])});var tH=new de({version:ne,numSizes:ne,sizes:new J(eH,"numSizes")});let nH=new de({ppem:C,resolution:C,imageOffsets:new J(new ee(ne,"void"),r=>r.parent.parent.maxp.numGlyphs+1)});var rH=new de({version:C,flags:new Tr(C,["renderOutlines"]),numImgTables:ne,imageTables:new J(new ee(ne,nH),"numImgTables")});let iH=new de({gid:C,paletteIndex:C}),sH=new de({gid:C,firstLayerIndex:C,numLayers:C});var oH=new de({version:C,numBaseGlyphRecords:C,baseGlyphRecord:new ee(ne,new J(sH,"numBaseGlyphRecords")),layerRecords:new ee(ne,new J(iH,"numLayerRecords"),{lazy:!0}),numLayerRecords:C});let aH=new de({blue:Ve,green:Ve,red:Ve,alpha:Ve});var lH=new pt(C,{header:{numPaletteEntries:C,numPalettes:C,numColorRecords:C,colorRecords:new ee(ne,new J(aH,"numColorRecords")),colorRecordIndices:new J(C,"numPalettes")},0:{},1:{offsetPaletteTypeArray:new ee(ne,new J(ne,"numPalettes")),offsetPaletteLabelArray:new ee(ne,new J(C,"numPalettes")),offsetPaletteEntryLabelArray:new ee(ne,new J(C,"numPaletteEntries"))}});let ml=new pt(C,{1:{coordinate:Le},2:{coordinate:Le,referenceGlyph:C,baseCoordPoint:C},3:{coordinate:Le,deviceTable:new ee(C,Gi)}}),cH=new de({defaultIndex:C,baseCoordCount:C,baseCoords:new J(new ee(C,ml),"baseCoordCount")}),uH=new de({tag:new Pt(4),minCoord:new ee(C,ml,{type:"parent"}),maxCoord:new ee(C,ml,{type:"parent"})}),xw=new de({minCoord:new ee(C,ml),maxCoord:new ee(C,ml),featMinMaxCount:C,featMinMaxRecords:new J(uH,"featMinMaxCount")}),hH=new de({tag:new Pt(4),minMax:new ee(C,xw,{type:"parent"})}),fH=new de({baseValues:new ee(C,cH),defaultMinMax:new ee(C,xw),baseLangSysCount:C,baseLangSysRecords:new J(hH,"baseLangSysCount")}),dH=new de({tag:new Pt(4),script:new ee(C,fH,{type:"parent"})}),pH=new J(dH,C),mH=new J(new Pt(4),C),Bv=new de({baseTagList:new ee(C,mH),baseScriptList:new ee(C,pH)});var gH=new pt(ne,{header:{horizAxis:new ee(C,Bv),vertAxis:new ee(C,Bv)},65536:{},65537:{itemVariationStore:new ee(ne,Uu)}});let vH=new J(C,C),bH=new de({coverage:new ee(C,At),glyphCount:C,attachPoints:new J(new ee(C,vH),"glyphCount")}),xH=new pt(C,{1:{coordinate:Le},2:{caretValuePoint:C},3:{coordinate:Le,deviceTable:new ee(C,Gi)}}),wH=new J(new ee(C,xH),C),yH=new de({coverage:new ee(C,At),ligGlyphCount:C,ligGlyphs:new J(new ee(C,wH),"ligGlyphCount")}),Nv=new de({markSetTableFormat:C,markSetCount:C,coverage:new J(new ee(ne,At),"markSetCount")});var _H=new pt(ne,{header:{glyphClassDef:new ee(C,qi),attachList:new ee(C,bH),ligCaretList:new ee(C,yH),markAttachClassDef:new ee(C,qi)},65536:{},65538:{markGlyphSetsDef:new ee(C,Nv)},65539:{markGlyphSetsDef:new ee(C,Nv),itemVariationStore:new ee(ne,Uu)}});let Eo=new Tr(C,["xPlacement","yPlacement","xAdvance","yAdvance","xPlaDevice","yPlaDevice","xAdvDevice","yAdvDevice"]),SH={xPlacement:Le,yPlacement:Le,xAdvance:Le,yAdvance:Le,xPlaDevice:new ee(C,Gi,{type:"global",relativeTo:r=>r.rel}),yPlaDevice:new ee(C,Gi,{type:"global",relativeTo:r=>r.rel}),xAdvDevice:new ee(C,Gi,{type:"global",relativeTo:r=>r.rel}),yAdvDevice:new ee(C,Gi,{type:"global",relativeTo:r=>r.rel})};class Yo{buildStruct(e){let t=e;for(;!t[this.key]&&t.parent;)t=t.parent;if(!t[this.key])return;let n={};n.rel=()=>t._startOffset;let i=t[this.key];for(let s in i)i[s]&&(n[s]=SH[s]);return new de(n)}size(e,t){return this.buildStruct(t).size(e,t)}decode(e,t){let n=this.buildStruct(t).decode(e,t);return delete n.rel,n}constructor(e="valueFormat"){this.key=e}}let CH=new de({secondGlyph:C,value1:new Yo("valueFormat1"),value2:new Yo("valueFormat2")}),MH=new J(CH,C),EH=new de({value1:new Yo("valueFormat1"),value2:new Yo("valueFormat2")}),gl=new pt(C,{1:{xCoordinate:Le,yCoordinate:Le},2:{xCoordinate:Le,yCoordinate:Le,anchorPoint:C},3:{xCoordinate:Le,yCoordinate:Le,xDeviceTable:new ee(C,Gi),yDeviceTable:new ee(C,Gi)}}),AH=new de({entryAnchor:new ee(C,gl,{type:"parent"}),exitAnchor:new ee(C,gl,{type:"parent"})}),PH=new de({class:C,markAnchor:new ee(C,gl,{type:"parent"})}),Uh=new J(PH,C),TH=new J(new ee(C,gl),r=>r.parent.classCount),Uv=new J(TH,C),LH=new J(new ee(C,gl),r=>r.parent.parent.classCount),IH=new J(LH,C),DH=new J(new ee(C,IH),C),vl=new pt("lookupType",{1:new pt(C,{1:{coverage:new ee(C,At),valueFormat:Eo,value:new Yo},2:{coverage:new ee(C,At),valueFormat:Eo,valueCount:C,values:new It(new Yo,"valueCount")}}),2:new pt(C,{1:{coverage:new ee(C,At),valueFormat1:Eo,valueFormat2:Eo,pairSetCount:C,pairSets:new It(new ee(C,MH),"pairSetCount")},2:{coverage:new ee(C,At),valueFormat1:Eo,valueFormat2:Eo,classDef1:new ee(C,qi),classDef2:new ee(C,qi),class1Count:C,class2Count:C,classRecords:new It(new It(EH,"class2Count"),"class1Count")}}),3:{format:C,coverage:new ee(C,At),entryExitCount:C,entryExitRecords:new J(AH,"entryExitCount")},4:{format:C,markCoverage:new ee(C,At),baseCoverage:new ee(C,At),classCount:C,markArray:new ee(C,Uh),baseArray:new ee(C,Uv)},5:{format:C,markCoverage:new ee(C,At),ligatureCoverage:new ee(C,At),classCount:C,markArray:new ee(C,Uh),ligatureArray:new ee(C,DH)},6:{format:C,mark1Coverage:new ee(C,At),mark2Coverage:new ee(C,At),classCount:C,mark1Array:new ee(C,Uh),mark2Array:new ee(C,Uv)},7:cw,8:uw,9:{posFormat:C,lookupType:C,extension:new ee(ne,null)}});vl.versions[9].extension.type=vl;var RH=new pt(ne,{header:{scriptList:new ee(C,ow),featureList:new ee(C,lw),lookupList:new ee(C,new tu(vl))},65536:{},65537:{featureVariations:new ee(ne,hw)}});let ww=new J(C,C),kH=ww,FH=new de({glyph:C,compCount:C,components:new J(C,r=>r.compCount-1)}),OH=new J(new ee(C,FH),C),wf=new pt("lookupType",{1:new pt(C,{1:{coverage:new ee(C,At),deltaGlyphID:Le},2:{coverage:new ee(C,At),glyphCount:C,substitute:new It(C,"glyphCount")}}),2:{substFormat:C,coverage:new ee(C,At),count:C,sequences:new It(new ee(C,ww),"count")},3:{substFormat:C,coverage:new ee(C,At),count:C,alternateSet:new It(new ee(C,kH),"count")},4:{substFormat:C,coverage:new ee(C,At),count:C,ligatureSets:new It(new ee(C,OH),"count")},5:cw,6:uw,7:{substFormat:C,lookupType:C,extension:new ee(ne,null)},8:{substFormat:C,coverage:new ee(C,At),backtrackCoverage:new J(new ee(C,At),"backtrackGlyphCount"),lookaheadGlyphCount:C,lookaheadCoverage:new J(new ee(C,At),"lookaheadGlyphCount"),glyphCount:C,substitutes:new J(C,"glyphCount")}});wf.versions[7].extension.type=wf;var BH=new pt(ne,{header:{scriptList:new ee(C,ow),featureList:new ee(C,lw),lookupList:new ee(C,new tu(wf))},65536:{},65537:{featureVariations:new ee(ne,hw)}});let Ni=new J(C,C),NH=new de({shrinkageEnableGSUB:new ee(C,Ni),shrinkageDisableGSUB:new ee(C,Ni),shrinkageEnableGPOS:new ee(C,Ni),shrinkageDisableGPOS:new ee(C,Ni),shrinkageJstfMax:new ee(C,new tu(vl)),extensionEnableGSUB:new ee(C,Ni),extensionDisableGSUB:new ee(C,Ni),extensionEnableGPOS:new ee(C,Ni),extensionDisableGPOS:new ee(C,Ni),extensionJstfMax:new ee(C,new tu(vl))}),yw=new J(new ee(C,NH),C),UH=new de({tag:new Pt(4),jstfLangSys:new ee(C,yw)}),VH=new de({extenderGlyphs:new ee(C,new J(C,C)),defaultLangSys:new ee(C,yw),langSysCount:C,langSysRecords:new J(UH,"langSysCount")}),zH=new de({tag:new Pt(4),script:new ee(C,VH,{type:"parent"})});var $H=new de({version:ne,scriptCount:C,scriptList:new J(zH,"scriptCount")});class GH{decode(e,t){switch(this.size(0,t)){case 1:return e.readUInt8();case 2:return e.readUInt16BE();case 3:return e.readUInt24BE();case 4:return e.readUInt32BE()}}size(e,t){return qr(this._size,null,t)}constructor(e){this._size=e}}let HH=new de({entry:new GH(r=>((r.parent.entryFormat&48)>>4)+1),outerIndex:r=>r.entry>>(r.parent.entryFormat&15)+1,innerIndex:r=>r.entry&(1<<(r.parent.entryFormat&15)+1)-1}),Vh=new de({entryFormat:C,mapCount:C,mapData:new J(HH,"mapCount")});var WH=new de({majorVersion:C,minorVersion:C,itemVariationStore:new ee(ne,Uu),advanceWidthMapping:new ee(ne,Vh),LSBMapping:new ee(ne,Vh),RSBMapping:new ee(ne,Vh)});let qH=new de({format:ne,length:ne,offset:ne}),XH=new de({reserved:new zt(C,2),cbSignature:ne,signature:new Gr("cbSignature")});var YH=new de({ulVersion:ne,usNumSigs:C,usFlag:C,signatures:new J(qH,"usNumSigs"),signatureBlocks:new J(XH,"usNumSigs")});let jH=new de({rangeMaxPPEM:C,rangeGaspBehavior:new Tr(C,["grayscale","gridfit","symmetricSmoothing","symmetricGridfit"])});var ZH=new de({version:C,numRanges:C,gaspRanges:new J(jH,"numRanges")});let KH=new de({pixelSize:Ve,maximumWidth:Ve,widths:new J(Ve,r=>r.parent.parent.maxp.numGlyphs)});var JH=new de({version:C,numRecords:Le,sizeDeviceRecord:xs,records:new J(KH,"numRecords")});let QH=new de({left:C,right:C,value:Le}),Vv=new de({firstGlyph:C,nGlyphs:C,offsets:new J(C,"nGlyphs"),max:r=>r.offsets.length&&Math.max.apply(Math,r.offsets)}),eW=new de({off:r=>r._startOffset-r.parent.parent._startOffset,len:r=>((r.parent.leftTable.max-r.off)/r.parent.rowWidth+1)*(r.parent.rowWidth/2),values:new It(Le,"len")}),zv=new pt("format",{0:{nPairs:C,searchRange:C,entrySelector:C,rangeShift:C,pairs:new J(QH,"nPairs")},2:{rowWidth:C,leftTable:new ee(C,Vv,{type:"parent"}),rightTable:new ee(C,Vv,{type:"parent"}),array:new ee(C,eW,{type:"parent"})},3:{glyphCount:C,kernValueCount:Ve,leftClassCount:Ve,rightClassCount:Ve,flags:Ve,kernValue:new J(Le,"kernValueCount"),leftClass:new J(Ve,"glyphCount"),rightClass:new J(Ve,"glyphCount"),kernIndex:new J(Ve,r=>r.leftClassCount*r.rightClassCount)}}),$v=new pt("version",{0:{subVersion:C,length:C,format:Ve,coverage:new Tr(Ve,["horizontal","minimum","crossStream","override"]),subtable:zv,padding:new zt(Ve,r=>r.length-r._currentOffset)},1:{length:ne,coverage:new Tr(Ve,[null,null,null,null,null,"variation","crossStream","vertical"]),format:Ve,tupleIndex:C,subtable:zv,padding:new zt(Ve,r=>r.length-r._currentOffset)}});var tW=new pt(C,{0:{nTables:C,tables:new J($v,"nTables")},1:{reserved:new zt(C),nTables:ne,tables:new J($v,"nTables")}}),nW=new de({version:C,numGlyphs:C,yPels:new J(Ve,"numGlyphs")}),rW=new de({version:C,fontNumber:ne,pitch:C,xHeight:C,style:C,typeFamily:C,capHeight:C,symbolSet:C,typeface:new Pt(16),characterComplement:new Pt(8),fileName:new Pt(6),strokeWeight:new Pt(1),widthType:new Pt(1),serifStyle:Ve,reserved:new zt(Ve)});let iW=new de({bCharSet:Ve,xRatio:Ve,yStartRatio:Ve,yEndRatio:Ve}),sW=new de({yPelHeight:C,yMax:Le,yMin:Le}),oW=new de({recs:C,startsz:Ve,endsz:Ve,entries:new J(sW,"recs")});var aW=new de({version:C,numRecs:C,numRatios:C,ratioRanges:new J(iW,"numRatios"),offsets:new J(C,"numRatios"),groups:new J(oW,"numRecs")}),lW=new de({version:C,ascent:Le,descent:Le,lineGap:Le,advanceHeightMax:Le,minTopSideBearing:Le,minBottomSideBearing:Le,yMaxExtent:Le,caretSlopeRise:Le,caretSlopeRun:Le,caretOffset:Le,reserved:new zt(Le,4),metricDataFormat:Le,numberOfMetrics:C});let cW=new de({advance:C,bearing:Le});var uW=new de({metrics:new It(cW,r=>r.parent.vhea.numberOfMetrics),bearings:new It(Le,r=>r.parent.maxp.numGlyphs-r.parent.vhea.numberOfMetrics)});let Gv=new zs(16,"BE",14),hW=new de({fromCoord:Gv,toCoord:Gv}),fW=new de({pairCount:C,correspondence:new J(hW,"pairCount")});var dW=new de({version:nn,axisCount:ne,segment:new J(fW,"axisCount")});class pW{getItem(e){if(this._items[e]==null){let t=this.stream.pos;this.stream.pos=this.base+this.type.size(null,this.parent)*e,this._items[e]=this.type.decode(this.stream,this.parent),this.stream.pos=t}return this._items[e]}inspect(){return`[UnboundedArray ${this.type.constructor.name}]`}constructor(e,t,n){this.type=e,this.stream=t,this.parent=n,this.base=this.stream.pos,this._items=[]}}class $r extends J{decode(e,t){return new pW(this.type,e,t)}constructor(e){super(e,0)}}let Yi=function(r=C){class e{decode(a,c){return c=c.parent.parent,this.type.decode(a,c)}size(a,c){return c=c.parent.parent,this.type.size(a,c)}encode(a,c,u){return u=u.parent.parent,this.type.encode(a,c,u)}constructor(a){this.type=a}}r=new e(r);let t=new de({unitSize:C,nUnits:C,searchRange:C,entrySelector:C,rangeShift:C}),n=new de({lastGlyph:C,firstGlyph:C,value:r}),i=new de({lastGlyph:C,firstGlyph:C,values:new ee(C,new J(r,o=>o.lastGlyph-o.firstGlyph+1),{type:"parent"})}),s=new de({glyph:C,value:r});return new pt(C,{0:{values:new $r(r)},2:{binarySearchHeader:t,segments:new J(n,o=>o.binarySearchHeader.nUnits)},4:{binarySearchHeader:t,segments:new J(i,o=>o.binarySearchHeader.nUnits)},6:{binarySearchHeader:t,segments:new J(s,o=>o.binarySearchHeader.nUnits)},8:{firstGlyph:C,count:C,values:new J(r,"count")}})};function Mc(r={},e=C){let t=Object.assign({newState:C,flags:C},r),n=new de(t),i=new $r(new J(C,o=>o.nClasses));return new de({nClasses:ne,classTable:new ee(ne,new Yi(e)),stateArray:new ee(ne,i),entryTable:new ee(ne,new $r(n))})}function mW(r={},e=C){let t=new de({version(){return 8},firstGlyph:C,values:new J(Ve,C)}),n=Object.assign({newStateOffset:C,newState:a=>(a.newStateOffset-(a.parent.stateArray.base-a.parent._startOffset))/a.parent.nClasses,flags:C},r),i=new de(n),s=new $r(new J(Ve,a=>a.nClasses));return new de({nClasses:C,classTable:new ee(C,t),stateArray:new ee(C,s),entryTable:new ee(C,new $r(i))})}let gW=new pt("format",{0:{deltas:new J(Le,32)},1:{deltas:new J(Le,32),mappingData:new Yi(C)},2:{standardGlyph:C,controlPoints:new J(C,32)},3:{standardGlyph:C,controlPoints:new J(C,32),mappingData:new Yi(C)}});var vW=new de({version:nn,format:C,defaultBaseline:C,subtable:gW});let bW=new de({setting:C,nameIndex:Le,name:r=>r.parent.parent.parent.name.records.fontFeatures[r.nameIndex]}),xW=new de({feature:C,nSettings:C,settingTable:new ee(ne,new J(bW,"nSettings"),{type:"parent"}),featureFlags:new Tr(Ve,[null,null,null,null,null,null,"hasDefault","exclusive"]),defaultSetting:Ve,nameIndex:Le,name:r=>r.parent.parent.name.records.fontFeatures[r.nameIndex]});var wW=new de({version:nn,featureNameCount:C,reserved1:new zt(C),reserved2:new zt(ne),featureNames:new J(xW,"featureNameCount")});let yW=new de({axisTag:new Pt(4),minValue:nn,defaultValue:nn,maxValue:nn,flags:C,nameID:C,name:r=>r.parent.parent.name.records.fontFeatures[r.nameID]}),_W=new de({nameID:C,name:r=>r.parent.parent.name.records.fontFeatures[r.nameID],flags:C,coord:new J(nn,r=>r.parent.axisCount),postscriptNameID:new Zc(C,r=>r.parent.instanceSize-r._currentOffset>0)});var SW=new de({version:nn,offsetToData:C,countSizePairs:C,axisCount:C,axisSize:C,instanceCount:C,instanceSize:C,axis:new J(yW,"axisCount"),instance:new J(_W,"instanceCount")});let CW=new zs(16,"BE",14);class MW{static decode(e,t){return t.flags?e.readUInt32BE():e.readUInt16BE()*2}}let EW=new de({version:C,reserved:new zt(C),axisCount:C,globalCoordCount:C,globalCoords:new ee(ne,new J(new J(CW,"axisCount"),"globalCoordCount")),glyphCount:C,flags:C,offsetToData:ne,offsets:new J(new ee(MW,"void",{relativeTo:r=>r.offsetToData,allowNull:!1}),r=>r.glyphCount+1)});var AW=EW;let PW=new de({length:C,coverage:C,subFeatureFlags:ne,stateTable:new mW}),TW=new de({justClass:ne,beforeGrowLimit:nn,beforeShrinkLimit:nn,afterGrowLimit:nn,afterShrinkLimit:nn,growFlags:C,shrinkFlags:C}),LW=new J(TW,ne),IW=new pt("actionType",{0:{lowerLimit:nn,upperLimit:nn,order:C,glyphs:new J(C,C)},1:{addGlyph:C},2:{substThreshold:nn,addGlyph:C,substGlyph:C},3:{},4:{variationAxis:ne,minimumLimit:nn,noStretchValue:nn,maximumLimit:nn},5:{flags:C,glyph:C}}),DW=new de({actionClass:C,actionType:C,actionLength:ne,actionData:IW,padding:new zt(Ve,r=>r.actionLength-r._currentOffset)}),RW=new J(DW,ne),kW=new de({lookupTable:new Yi(new ee(C,RW))}),Hv=new de({classTable:new ee(C,PW,{type:"parent"}),wdcOffset:C,postCompensationTable:new ee(C,kW,{type:"parent"}),widthDeltaClusters:new Yi(new ee(C,LW,{type:"parent",relativeTo:r=>r.wdcOffset}))});var FW=new de({version:ne,format:C,horizontal:new ee(C,Hv),vertical:new ee(C,Hv)});let OW={action:C},BW={markIndex:C,currentIndex:C},NW={currentInsertIndex:C,markedInsertIndex:C},UW=new de({items:new $r(new ee(ne,new Yi))}),VW=new pt("type",{0:{stateTable:new Mc},1:{stateTable:new Mc(BW),substitutionTable:new ee(ne,UW)},2:{stateTable:new Mc(OW),ligatureActions:new ee(ne,new $r(ne)),components:new ee(ne,new $r(C)),ligatureList:new ee(ne,new $r(C))},4:{lookupTable:new Yi},5:{stateTable:new Mc(NW),insertionActions:new ee(ne,new $r(C))}}),zW=new de({length:ne,coverage:Wi,type:Ve,subFeatureFlags:ne,table:VW,padding:new zt(Ve,r=>r.length-r._currentOffset)}),$W=new de({featureType:C,featureSetting:C,enableFlags:ne,disableFlags:ne}),GW=new de({defaultFlags:ne,chainLength:ne,nFeatureEntries:ne,nSubtables:ne,features:new J($W,"nFeatureEntries"),subtables:new J(zW,"nSubtables")});var HW=new de({version:C,unused:new zt(C),nChains:ne,chains:new J(GW,"nChains")});let WW=new de({left:Le,top:Le,right:Le,bottom:Le});var qW=new de({version:nn,format:C,lookupTable:new Yi(WW)});let at={};var nu=at;at.cmap=W$;at.head=q$;at.hhea=X$;at.hmtx=j$;at.maxp=Z$;at.name=rG;at["OS/2"]=iG;at.post=sG;at.fpgm=aG;at.loca=lG;at.prep=cG;at["cvt "]=oG;at.glyf=uG;at["CFF "]=bw;at.CFF2=bw;at.VORG=ZG;at.EBLC=tH;at.CBLC=at.EBLC;at.sbix=rH;at.COLR=oH;at.CPAL=lH;at.BASE=gH;at.GDEF=_H;at.GPOS=RH;at.GSUB=BH;at.JSTF=$H;at.HVAR=WH;at.DSIG=YH;at.gasp=ZH;at.hdmx=JH;at.kern=tW;at.LTSH=nW;at.PCLT=rW;at.VDMX=aW;at.vhea=lW;at.vmtx=uW;at.avar=dW;at.bsln=vW;at.feat=wW;at.fvar=SW;at.gvar=AW;at.just=FW;at.morx=HW;at.opbd=qW;let XW=new de({tag:new Pt(4),checkSum:ne,offset:new ee(ne,"void",{type:"global"}),length:ne}),Cd=new de({tag:new Pt(4),numTables:C,searchRange:C,entrySelector:C,rangeShift:C,tables:new J(XW,"numTables")});Cd.process=function(){let r={};for(let e of this.tables)r[e.tag]=e;this.tables=r};Cd.preEncode=function(){if(!Array.isArray(this.tables)){let t=[];for(let n in this.tables){let i=this.tables[n];i&&t.push({tag:n,checkSum:0,offset:new mf(nu[n],i),length:nu[n].size(i)})}this.tables=t}this.tag="true",this.numTables=this.tables.length;let r=Math.floor(Math.log(this.numTables)/Math.LN2),e=Math.pow(2,r);this.searchRange=e*16,this.entrySelector=Math.log(e)/Math.LN2,this.rangeShift=this.numTables*16-this.searchRange};var _w=Cd;function Bc(r,e){let t=0,n=r.length-1;for(;t<=n;){let i=t+n>>1,s=e(r[i]);if(s<0)n=i-1;else if(s>0)t=i+1;else return i}return-1}function Lo(r,e){let t=[];for(;r<e;)t.push(r++);return t}const Vu=new TextDecoder("ascii"),Wv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ya=new Uint8Array(256);for(let r=0;r<Wv.length;r++)Ya[Wv.charCodeAt(r)]=r;function Md(r){let e=r.length*.75;r[r.length-1]==="="&&(e--,r[r.length-2]==="="&&e--);let t=new Uint8Array(e),n=0;for(let i=0,s=r.length;i<s;i+=4){let o=Ya[r.charCodeAt(i)],a=Ya[r.charCodeAt(i+1)],c=Ya[r.charCodeAt(i+2)],u=Ya[r.charCodeAt(i+3)];t[n++]=o<<2|a>>4,t[n++]=(a&15)<<4|c>>2,t[n++]=(c&3)<<6|u&63}return t}class Ed{findSubtable(e,t){for(let[n,i]of t)for(let s of e.tables)if(s.platformID===n&&s.encodingID===i)return s.table;return null}lookup(e,t){if(this.encoding)e=this.encoding.get(e)||e;else if(t){let i=this.getVariationSelector(e,t);if(i)return i}let n=this.cmap;switch(n.version){case 0:return n.codeMap.get(e)||0;case 4:{let i=0,s=n.segCount-1;for(;i<=s;){let o=i+s>>1;if(e<n.startCode.get(o))s=o-1;else if(e>n.endCode.get(o))i=o+1;else{let a=n.idRangeOffset.get(o),c;if(a===0)c=e+n.idDelta.get(o);else{let u=a/2+(e-n.startCode.get(o))-(n.segCount-o);c=n.glyphIndexArray.get(u)||0,c!==0&&(c+=n.idDelta.get(o))}return c&65535}}return 0}case 8:throw new Error("TODO: cmap format 8");case 6:case 10:return n.glyphIndices.get(e-n.firstCode)||0;case 12:case 13:{let i=0,s=n.nGroups-1;for(;i<=s;){let o=i+s>>1,a=n.groups.get(o);if(e<a.startCharCode)s=o-1;else if(e>a.endCharCode)i=o+1;else return n.version===12?a.glyphID+(e-a.startCharCode):a.glyphID}return 0}case 14:throw new Error("TODO: cmap format 14");default:throw new Error(`Unknown cmap format ${n.version}`)}}getVariationSelector(e,t){if(!this.uvs)return 0;let n=this.uvs.varSelectors.toArray(),i=Bc(n,o=>t-o.varSelector),s=n[i];return i!==-1&&s.defaultUVS&&(i=Bc(s.defaultUVS,o=>e<o.startUnicodeValue?-1:e>o.startUnicodeValue+o.additionalCount?1:0)),i!==-1&&s.nonDefaultUVS&&(i=Bc(s.nonDefaultUVS,o=>e-o.unicodeValue),i!==-1)?s.nonDefaultUVS[i].glyphID:0}getCharacterSet(){let e=this.cmap;switch(e.version){case 0:return Lo(0,e.codeMap.length);case 4:{let t=[],n=e.endCode.toArray();for(let i=0;i<n.length;i++){let s=n[i]+1,o=e.startCode.get(i);t.push(...Lo(o,s))}return t}case 8:throw new Error("TODO: cmap format 8");case 6:case 10:return Lo(e.firstCode,e.firstCode+e.glyphIndices.length);case 12:case 13:{let t=[];for(let n of e.groups.toArray())t.push(...Lo(n.startCharCode,n.endCharCode+1));return t}case 14:throw new Error("TODO: cmap format 14");default:throw new Error(`Unknown cmap format ${e.version}`)}}codePointsForGlyph(e){let t=this.cmap;switch(t.version){case 0:{let i=[];for(let s=0;s<256;s++)t.codeMap.get(s)===e&&i.push(s);return i}case 4:{let i=[];for(let s=0;s<t.segCount;s++){let o=t.endCode.get(s),a=t.startCode.get(s),c=t.idRangeOffset.get(s),u=t.idDelta.get(s);for(var n=a;n<=o;n++){let f=0;if(c===0)f=n+u;else{let d=c/2+(n-a)-(t.segCount-s);f=t.glyphIndexArray.get(d)||0,f!==0&&(f+=u)}f===e&&i.push(n)}}return i}case 12:{let i=[];for(let s of t.groups.toArray())e>=s.glyphID&&e<=s.glyphID+(s.endCharCode-s.startCharCode)&&i.push(s.startCharCode+(e-s.glyphID));return i}case 13:{let i=[];for(let s of t.groups.toArray())e===s.glyphID&&i.push(...Lo(s.startCharCode,s.endCharCode+1));return i}default:throw new Error(`Unknown cmap format ${t.version}`)}}constructor(e){if(this.encoding=null,this.cmap=this.findSubtable(e,[[3,10],[0,6],[0,4],[3,1],[0,3],[0,2],[0,1],[0,0]]),!this.cmap)for(let t of e.tables){let n=tw(t.platformID,t.encodingID,t.table.language-1),i=Q$(n);i&&(this.cmap=t.table,this.encoding=i)}if(!this.cmap)throw new Error("Could not find a supported cmap table");this.uvs=this.findSubtable(e,[[0,5]]),this.uvs&&this.uvs.version!==14&&(this.uvs=null)}}Mn([En],Ed.prototype,"getCharacterSet",null);Mn([En],Ed.prototype,"codePointsForGlyph",null);class YW{process(e,t){for(let n=0;n<e.length-1;n++){let i=e[n].id,s=e[n+1].id;t[n].xAdvance+=this.getKerning(i,s)}}getKerning(e,t){let n=0;for(let i of this.kern.tables){if(i.coverage.crossStream)continue;switch(i.version){case 0:if(!i.coverage.horizontal)continue;break;case 1:if(i.coverage.vertical||i.coverage.variation)continue;break;default:throw new Error(`Unsupported kerning table version ${i.version}`)}let s=0,o=i.subtable;switch(i.format){case 0:let a=Bc(o.pairs,function(d){return e-d.left||t-d.right});a>=0&&(s=o.pairs[a].value);break;case 2:let c=0,u=0;e>=o.leftTable.firstGlyph&&e<o.leftTable.firstGlyph+o.leftTable.nGlyphs?c=o.leftTable.offsets[e-o.leftTable.firstGlyph]:c=o.array.off,t>=o.rightTable.firstGlyph&&t<o.rightTable.firstGlyph+o.rightTable.nGlyphs&&(u=o.rightTable.offsets[t-o.rightTable.firstGlyph]);let f=(c+u-o.array.off)/2;s=o.array.values.get(f);break;case 3:if(e>=o.glyphCount||t>=o.glyphCount)return 0;s=o.kernValue[o.kernIndex[o.leftClass[e]*o.rightClassCount+o.rightClass[t]]];break;default:throw new Error(`Unsupported kerning sub-table format ${i.format}`)}i.coverage.override?n=s:n+=s}return n}constructor(e){this.kern=e.kern}}class jW{positionGlyphs(e,t){let n=0,i=0;for(let s=0;s<e.length;s++)e[s].isMark?i=s:(n!==i&&this.positionCluster(e,t,n,i),n=i=s);return n!==i&&this.positionCluster(e,t,n,i),t}positionCluster(e,t,n,i){let s=e[n],o=s.cbox.copy();s.codePoints.length>1&&(o.minX+=(s.codePoints.length-1)*o.width/s.codePoints.length);let a=-t[n].xAdvance,c=0,u=this.font.unitsPerEm/16;for(let f=n+1;f<=i;f++){let d=e[f],m=d.cbox,v=t[f],S=this.getCombiningClass(d.codePoints[0]);if(S!=="Not_Reordered"){switch(v.xOffset=v.yOffset=0,S){case"Double_Above":case"Double_Below":v.xOffset+=o.minX-m.width/2-m.minX;break;case"Attached_Below_Left":case"Below_Left":case"Above_Left":v.xOffset+=o.minX-m.minX;break;case"Attached_Above_Right":case"Below_Right":case"Above_Right":v.xOffset+=o.maxX-m.width-m.minX;break;default:v.xOffset+=o.minX+(o.width-m.width)/2-m.minX}switch(S){case"Double_Below":case"Below_Left":case"Below":case"Below_Right":case"Attached_Below_Left":case"Attached_Below":(S==="Attached_Below_Left"||S==="Attached_Below")&&(o.minY+=u),v.yOffset=-o.minY-m.maxY,o.minY+=m.height;break;case"Double_Above":case"Above_Left":case"Above":case"Above_Right":case"Attached_Above":case"Attached_Above_Right":(S==="Attached_Above"||S==="Attached_Above_Right")&&(o.maxY+=u),v.yOffset=o.maxY-m.minY,o.maxY+=m.height;break}v.xAdvance=v.yAdvance=0,v.xOffset+=a,v.yOffset+=c}else a-=v.xAdvance,c-=v.yAdvance}}getCombiningClass(e){let t=C$(e);if((e&-256)===3584){if(t==="Not_Reordered")switch(e){case 3633:case 3636:case 3637:case 3638:case 3639:case 3655:case 3660:case 3645:case 3662:return"Above_Right";case 3761:case 3764:case 3765:case 3766:case 3767:case 3771:case 3788:case 3789:return"Above";case 3772:return"Below"}else if(e===3642)return"Below_Right"}switch(t){case"CCC10":case"CCC11":case"CCC12":case"CCC13":case"CCC14":case"CCC15":case"CCC16":case"CCC17":case"CCC18":case"CCC20":case"CCC22":return"Below";case"CCC23":return"Attached_Above";case"CCC24":return"Above_Right";case"CCC25":case"CCC19":return"Above_Left";case"CCC26":return"Above";case"CCC21":break;case"CCC27":case"CCC28":case"CCC30":case"CCC31":case"CCC33":case"CCC34":case"CCC35":case"CCC36":return"Above";case"CCC29":case"CCC32":return"Below";case"CCC103":return"Below_Right";case"CCC107":return"Above_Right";case"CCC118":return"Below";case"CCC122":return"Above";case"CCC129":case"CCC132":return"Below";case"CCC130":return"Above"}return t}constructor(e){this.font=e}}class ji{get width(){return this.maxX-this.minX}get height(){return this.maxY-this.minY}addPoint(e,t){Math.abs(e)!==1/0&&(e<this.minX&&(this.minX=e),e>this.maxX&&(this.maxX=e)),Math.abs(t)!==1/0&&(t<this.minY&&(this.minY=t),t>this.maxY&&(this.maxY=t))}copy(){return new ji(this.minX,this.minY,this.maxX,this.maxY)}constructor(e=1/0,t=1/0,n=-1/0,i=-1/0){this.minX=e,this.minY=t,this.maxX=n,this.maxY=i}}const jo={Caucasian_Albanian:"aghb",Arabic:"arab",Imperial_Aramaic:"armi",Armenian:"armn",Avestan:"avst",Balinese:"bali",Bamum:"bamu",Bassa_Vah:"bass",Batak:"batk",Bengali:["bng2","beng"],Bopomofo:"bopo",Brahmi:"brah",Braille:"brai",Buginese:"bugi",Buhid:"buhd",Chakma:"cakm",Canadian_Aboriginal:"cans",Carian:"cari",Cham:"cham",Cherokee:"cher",Coptic:"copt",Cypriot:"cprt",Cyrillic:"cyrl",Devanagari:["dev2","deva"],Deseret:"dsrt",Duployan:"dupl",Egyptian_Hieroglyphs:"egyp",Elbasan:"elba",Ethiopic:"ethi",Georgian:"geor",Glagolitic:"glag",Gothic:"goth",Grantha:"gran",Greek:"grek",Gujarati:["gjr2","gujr"],Gurmukhi:["gur2","guru"],Hangul:"hang",Han:"hani",Hanunoo:"hano",Hebrew:"hebr",Hiragana:"hira",Pahawh_Hmong:"hmng",Katakana_Or_Hiragana:"hrkt",Old_Italic:"ital",Javanese:"java",Kayah_Li:"kali",Katakana:"kana",Kharoshthi:"khar",Khmer:"khmr",Khojki:"khoj",Kannada:["knd2","knda"],Kaithi:"kthi",Tai_Tham:"lana",Lao:"lao ",Latin:"latn",Lepcha:"lepc",Limbu:"limb",Linear_A:"lina",Linear_B:"linb",Lisu:"lisu",Lycian:"lyci",Lydian:"lydi",Mahajani:"mahj",Mandaic:"mand",Manichaean:"mani",Mende_Kikakui:"mend",Meroitic_Cursive:"merc",Meroitic_Hieroglyphs:"mero",Malayalam:["mlm2","mlym"],Modi:"modi",Mongolian:"mong",Mro:"mroo",Meetei_Mayek:"mtei",Myanmar:["mym2","mymr"],Old_North_Arabian:"narb",Nabataean:"nbat",Nko:"nko ",Ogham:"ogam",Ol_Chiki:"olck",Old_Turkic:"orkh",Oriya:["ory2","orya"],Osmanya:"osma",Palmyrene:"palm",Pau_Cin_Hau:"pauc",Old_Permic:"perm",Phags_Pa:"phag",Inscriptional_Pahlavi:"phli",Psalter_Pahlavi:"phlp",Phoenician:"phnx",Miao:"plrd",Inscriptional_Parthian:"prti",Rejang:"rjng",Runic:"runr",Samaritan:"samr",Old_South_Arabian:"sarb",Saurashtra:"saur",Shavian:"shaw",Sharada:"shrd",Siddham:"sidd",Khudawadi:"sind",Sinhala:"sinh",Sora_Sompeng:"sora",Sundanese:"sund",Syloti_Nagri:"sylo",Syriac:"syrc",Tagbanwa:"tagb",Takri:"takr",Tai_Le:"tale",New_Tai_Lue:"talu",Tamil:["tml2","taml"],Tai_Viet:"tavt",Telugu:["tel2","telu"],Tifinagh:"tfng",Tagalog:"tglg",Thaana:"thaa",Thai:"thai",Tibetan:"tibt",Tirhuta:"tirh",Ugaritic:"ugar",Vai:"vai ",Warang_Citi:"wara",Old_Persian:"xpeo",Cuneiform:"xsux",Yi:"yi  ",Inherited:"zinh",Common:"zyyy",Unknown:"zzzz"},yf={};for(let r in jo){let e=jo[r];if(Array.isArray(e))for(let t of e)yf[t]=r;else yf[e]=r}function ZW(r){return yf[r]}function KW(r){let e=r.length,t=0;for(;t<e;){let n=r.charCodeAt(t++);if(55296<=n&&n<=56319&&t<e){let s=r.charCodeAt(t);56320<=s&&s<=57343&&(t++,n=((n&1023)<<10)+(s&1023)+65536)}let i=X2(n);if(i!=="Common"&&i!=="Inherited"&&i!=="Unknown")return jo[i]}return jo.Unknown}function JW(r){for(let e=0;e<r.length;e++){let t=r[e],n=X2(t);if(n!=="Common"&&n!=="Inherited"&&n!=="Unknown")return jo[n]}return jo.Unknown}const QW={arab:!0,hebr:!0,syrc:!0,thaa:!0,cprt:!0,khar:!0,phnx:!0,"nko ":!0,lydi:!0,avst:!0,armi:!0,phli:!0,prti:!0,sarb:!0,orkh:!0,samr:!0,mand:!0,merc:!0,mero:!0,mani:!0,mend:!0,nbat:!0,narb:!0,palm:!0,phlp:!0};function Sw(r){return QW[r]?"rtl":"ltr"}class eq{get advanceWidth(){let e=0;for(let t of this.positions)e+=t.xAdvance;return e}get advanceHeight(){let e=0;for(let t of this.positions)e+=t.yAdvance;return e}get bbox(){let e=new ji,t=0,n=0;for(let i=0;i<this.glyphs.length;i++){let s=this.glyphs[i],o=this.positions[i],a=s.bbox;e.addPoint(a.minX+t+o.xOffset,a.minY+n+o.yOffset),e.addPoint(a.maxX+t+o.xOffset,a.maxY+n+o.yOffset),t+=o.xAdvance,n+=o.yAdvance}return e}constructor(e,t,n,i,s){if(this.glyphs=e,this.positions=null,this.script=n,this.language=i||null,this.direction=s||Sw(n),this.features={},Array.isArray(t))for(let o of t)this.features[o]=!0;else typeof t=="object"&&(this.features=t)}}class tq{constructor(e=0,t=0,n=0,i=0){this.xAdvance=e,this.yAdvance=t,this.xOffset=n,this.yOffset=i}}const ys={allTypographicFeatures:{code:0,exclusive:!1,allTypeFeatures:0},ligatures:{code:1,exclusive:!1,requiredLigatures:0,commonLigatures:2,rareLigatures:4,rebusPictures:8,diphthongLigatures:10,squaredLigatures:12,abbrevSquaredLigatures:14,symbolLigatures:16,contextualLigatures:18,historicalLigatures:20},cursiveConnection:{code:2,exclusive:!0,unconnected:0,partiallyConnected:1,cursive:2},letterCase:{code:3,exclusive:!0},verticalSubstitution:{code:4,exclusive:!1,substituteVerticalForms:0},linguisticRearrangement:{code:5,exclusive:!1,linguisticRearrangement:0},numberSpacing:{code:6,exclusive:!0,monospacedNumbers:0,proportionalNumbers:1,thirdWidthNumbers:2,quarterWidthNumbers:3},smartSwash:{code:8,exclusive:!1,wordInitialSwashes:0,wordFinalSwashes:2,nonFinalSwashes:8},diacritics:{code:9,exclusive:!0,showDiacritics:0,hideDiacritics:1,decomposeDiacritics:2},verticalPosition:{code:10,exclusive:!0,normalPosition:0,superiors:1,inferiors:2,ordinals:3,scientificInferiors:4},fractions:{code:11,exclusive:!0,noFractions:0,verticalFractions:1,diagonalFractions:2},overlappingCharacters:{code:13,exclusive:!1,preventOverlap:0},typographicExtras:{code:14,exclusive:!1,slashedZero:4},mathematicalExtras:{code:15,exclusive:!1,mathematicalGreek:10},ornamentSets:{code:16,exclusive:!0,noOrnaments:0,dingbats:1,piCharacters:2,fleurons:3,decorativeBorders:4,internationalSymbols:5,mathSymbols:6},characterAlternatives:{code:17,exclusive:!0,noAlternates:0},designComplexity:{code:18,exclusive:!0,designLevel1:0,designLevel2:1,designLevel3:2,designLevel4:3,designLevel5:4},styleOptions:{code:19,exclusive:!0,noStyleOptions:0,displayText:1,engravedText:2,illuminatedCaps:3,titlingCaps:4,tallCaps:5},characterShape:{code:20,exclusive:!0,traditionalCharacters:0,simplifiedCharacters:1,JIS1978Characters:2,JIS1983Characters:3,JIS1990Characters:4,traditionalAltOne:5,traditionalAltTwo:6,traditionalAltThree:7,traditionalAltFour:8,traditionalAltFive:9,expertCharacters:10,JIS2004Characters:11,hojoCharacters:12,NLCCharacters:13,traditionalNamesCharacters:14},numberCase:{code:21,exclusive:!0,lowerCaseNumbers:0,upperCaseNumbers:1},textSpacing:{code:22,exclusive:!0,proportionalText:0,monospacedText:1,halfWidthText:2,thirdWidthText:3,quarterWidthText:4,altProportionalText:5,altHalfWidthText:6},transliteration:{code:23,exclusive:!0,noTransliteration:0},annotation:{code:24,exclusive:!0,noAnnotation:0,boxAnnotation:1,roundedBoxAnnotation:2,circleAnnotation:3,invertedCircleAnnotation:4,parenthesisAnnotation:5,periodAnnotation:6,romanNumeralAnnotation:7,diamondAnnotation:8,invertedBoxAnnotation:9,invertedRoundedBoxAnnotation:10},kanaSpacing:{code:25,exclusive:!0,fullWidthKana:0,proportionalKana:1},ideographicSpacing:{code:26,exclusive:!0,fullWidthIdeographs:0,proportionalIdeographs:1,halfWidthIdeographs:2},unicodeDecomposition:{code:27,exclusive:!1,canonicalComposition:0,compatibilityComposition:2,transcodingComposition:4},rubyKana:{code:28,exclusive:!1,rubyKana:2},CJKSymbolAlternatives:{code:29,exclusive:!0,noCJKSymbolAlternatives:0,CJKSymbolAltOne:1,CJKSymbolAltTwo:2,CJKSymbolAltThree:3,CJKSymbolAltFour:4,CJKSymbolAltFive:5},ideographicAlternatives:{code:30,exclusive:!0,noIdeographicAlternatives:0,ideographicAltOne:1,ideographicAltTwo:2,ideographicAltThree:3,ideographicAltFour:4,ideographicAltFive:5},CJKVerticalRomanPlacement:{code:31,exclusive:!0,CJKVerticalRomanCentered:0,CJKVerticalRomanHBaseline:1},italicCJKRoman:{code:32,exclusive:!1,CJKItalicRoman:2},caseSensitiveLayout:{code:33,exclusive:!1,caseSensitiveLayout:0,caseSensitiveSpacing:2},alternateKana:{code:34,exclusive:!1,alternateHorizKana:0,alternateVertKana:2},stylisticAlternatives:{code:35,exclusive:!1,noStylisticAlternates:0,stylisticAltOne:2,stylisticAltTwo:4,stylisticAltThree:6,stylisticAltFour:8,stylisticAltFive:10,stylisticAltSix:12,stylisticAltSeven:14,stylisticAltEight:16,stylisticAltNine:18,stylisticAltTen:20,stylisticAltEleven:22,stylisticAltTwelve:24,stylisticAltThirteen:26,stylisticAltFourteen:28,stylisticAltFifteen:30,stylisticAltSixteen:32,stylisticAltSeventeen:34,stylisticAltEighteen:36,stylisticAltNineteen:38,stylisticAltTwenty:40},contextualAlternates:{code:36,exclusive:!1,contextualAlternates:0,swashAlternates:2,contextualSwashAlternates:4},lowerCase:{code:37,exclusive:!0,defaultLowerCase:0,lowerCaseSmallCaps:1,lowerCasePetiteCaps:2},upperCase:{code:38,exclusive:!0,defaultUpperCase:0,upperCaseSmallCaps:1,upperCasePetiteCaps:2},languageTag:{code:39,exclusive:!0},CJKRomanSpacing:{code:103,exclusive:!0,halfWidthCJKRoman:0,proportionalCJKRoman:1,defaultCJKRoman:2,fullWidthCJKRoman:3}},Ue=(r,e)=>[ys[r].code,ys[r][e]],ru={rlig:Ue("ligatures","requiredLigatures"),clig:Ue("ligatures","contextualLigatures"),dlig:Ue("ligatures","rareLigatures"),hlig:Ue("ligatures","historicalLigatures"),liga:Ue("ligatures","commonLigatures"),hist:Ue("ligatures","historicalLigatures"),smcp:Ue("lowerCase","lowerCaseSmallCaps"),pcap:Ue("lowerCase","lowerCasePetiteCaps"),frac:Ue("fractions","diagonalFractions"),dnom:Ue("fractions","diagonalFractions"),numr:Ue("fractions","diagonalFractions"),afrc:Ue("fractions","verticalFractions"),case:Ue("caseSensitiveLayout","caseSensitiveLayout"),ccmp:Ue("unicodeDecomposition","canonicalComposition"),cpct:Ue("CJKVerticalRomanPlacement","CJKVerticalRomanCentered"),valt:Ue("CJKVerticalRomanPlacement","CJKVerticalRomanCentered"),swsh:Ue("contextualAlternates","swashAlternates"),cswh:Ue("contextualAlternates","contextualSwashAlternates"),curs:Ue("cursiveConnection","cursive"),c2pc:Ue("upperCase","upperCasePetiteCaps"),c2sc:Ue("upperCase","upperCaseSmallCaps"),init:Ue("smartSwash","wordInitialSwashes"),fin2:Ue("smartSwash","wordFinalSwashes"),medi:Ue("smartSwash","nonFinalSwashes"),med2:Ue("smartSwash","nonFinalSwashes"),fin3:Ue("smartSwash","wordFinalSwashes"),fina:Ue("smartSwash","wordFinalSwashes"),pkna:Ue("kanaSpacing","proportionalKana"),half:Ue("textSpacing","halfWidthText"),halt:Ue("textSpacing","altHalfWidthText"),hkna:Ue("alternateKana","alternateHorizKana"),vkna:Ue("alternateKana","alternateVertKana"),ital:Ue("italicCJKRoman","CJKItalicRoman"),lnum:Ue("numberCase","upperCaseNumbers"),onum:Ue("numberCase","lowerCaseNumbers"),mgrk:Ue("mathematicalExtras","mathematicalGreek"),calt:Ue("contextualAlternates","contextualAlternates"),vrt2:Ue("verticalSubstitution","substituteVerticalForms"),vert:Ue("verticalSubstitution","substituteVerticalForms"),tnum:Ue("numberSpacing","monospacedNumbers"),pnum:Ue("numberSpacing","proportionalNumbers"),sups:Ue("verticalPosition","superiors"),subs:Ue("verticalPosition","inferiors"),ordn:Ue("verticalPosition","ordinals"),pwid:Ue("textSpacing","proportionalText"),hwid:Ue("textSpacing","halfWidthText"),qwid:Ue("textSpacing","quarterWidthText"),twid:Ue("textSpacing","thirdWidthText"),fwid:Ue("textSpacing","proportionalText"),palt:Ue("textSpacing","altProportionalText"),trad:Ue("characterShape","traditionalCharacters"),smpl:Ue("characterShape","simplifiedCharacters"),jp78:Ue("characterShape","JIS1978Characters"),jp83:Ue("characterShape","JIS1983Characters"),jp90:Ue("characterShape","JIS1990Characters"),jp04:Ue("characterShape","JIS2004Characters"),expt:Ue("characterShape","expertCharacters"),hojo:Ue("characterShape","hojoCharacters"),nlck:Ue("characterShape","NLCCharacters"),tnam:Ue("characterShape","traditionalNamesCharacters"),ruby:Ue("rubyKana","rubyKana"),titl:Ue("styleOptions","titlingCaps"),zero:Ue("typographicExtras","slashedZero"),ss01:Ue("stylisticAlternatives","stylisticAltOne"),ss02:Ue("stylisticAlternatives","stylisticAltTwo"),ss03:Ue("stylisticAlternatives","stylisticAltThree"),ss04:Ue("stylisticAlternatives","stylisticAltFour"),ss05:Ue("stylisticAlternatives","stylisticAltFive"),ss06:Ue("stylisticAlternatives","stylisticAltSix"),ss07:Ue("stylisticAlternatives","stylisticAltSeven"),ss08:Ue("stylisticAlternatives","stylisticAltEight"),ss09:Ue("stylisticAlternatives","stylisticAltNine"),ss10:Ue("stylisticAlternatives","stylisticAltTen"),ss11:Ue("stylisticAlternatives","stylisticAltEleven"),ss12:Ue("stylisticAlternatives","stylisticAltTwelve"),ss13:Ue("stylisticAlternatives","stylisticAltThirteen"),ss14:Ue("stylisticAlternatives","stylisticAltFourteen"),ss15:Ue("stylisticAlternatives","stylisticAltFifteen"),ss16:Ue("stylisticAlternatives","stylisticAltSixteen"),ss17:Ue("stylisticAlternatives","stylisticAltSeventeen"),ss18:Ue("stylisticAlternatives","stylisticAltEighteen"),ss19:Ue("stylisticAlternatives","stylisticAltNineteen"),ss20:Ue("stylisticAlternatives","stylisticAltTwenty")};for(let r=1;r<=99;r++)ru[`cv${`00${r}`.slice(-2)}`]=[ys.characterAlternatives.code,r];let _s={};for(let r in ru){let e=ru[r];_s[e[0]]==null&&(_s[e[0]]={}),_s[e[0]][e[1]]=r}function nq(r){let e={};for(let t in r){let n;(n=ru[t])&&(e[n[0]]==null&&(e[n[0]]={}),e[n[0]][n[1]]=r[t])}return e}function qv(r){let[e,t]=r;if(isNaN(e))var n=ys[e]&&ys[e].code;else var n=e;if(isNaN(t))var i=ys[e]&&ys[e][t];else var i=t;return[n,i]}function rq(r){let e={};if(Array.isArray(r))for(let t=0;t<r.length;t++){let n,i=qv(r[t]);(n=_s[i[0]]&&_s[i[0]][i[1]])&&(e[n]=!0)}else if(typeof r=="object")for(let t in r){let n=r[t];for(let i in n){let s,o=qv([t,i]);n[i]&&(s=_s[o[0]]&&_s[o[0]][o[1]])&&(e[s]=!0)}}return Object.keys(e)}class Qa{lookup(e){switch(this.table.version){case 0:return this.table.values.getItem(e);case 2:case 4:{let i=0,s=this.table.binarySearchHeader.nUnits-1;for(;i<=s;){var t=i+s>>1,n=this.table.segments[t];if(n.firstGlyph===65535)return null;if(e<n.firstGlyph)s=t-1;else if(e>n.lastGlyph)i=t+1;else return this.table.version===2?n.value:n.values[e-n.firstGlyph]}return null}case 6:{let i=0,s=this.table.binarySearchHeader.nUnits-1;for(;i<=s;){var t=i+s>>1,n=this.table.segments[t];if(n.glyph===65535)return null;if(e<n.glyph)s=t-1;else if(e>n.glyph)i=t+1;else return n.value}return null}case 8:return this.table.values[e-this.table.firstGlyph];default:throw new Error(`Unknown lookup table format: ${this.table.version}`)}}glyphsForValue(e){let t=[];switch(this.table.version){case 2:case 4:for(let n of this.table.segments)if(this.table.version===2&&n.value===e)t.push(...Lo(n.firstGlyph,n.lastGlyph+1));else for(let i=0;i<n.values.length;i++)n.values[i]===e&&t.push(n.firstGlyph+i);break;case 6:for(let n of this.table.segments)n.value===e&&t.push(n.glyph);break;case 8:for(let n=0;n<this.table.values.length;n++)this.table.values[n]===e&&t.push(this.table.firstGlyph+n);break;default:throw new Error(`Unknown lookup table format: ${this.table.version}`)}return t}constructor(e){this.table=e}}Mn([En],Qa.prototype,"glyphsForValue",null);const iq=0,Xv=0,Yv=1,jv=2,sq=16384;class oq{process(e,t,n){let i=iq,s=t?e.length-1:0,o=t?-1:1;for(;o===1&&s<=e.length||o===-1&&s>=-1;){let a=null,c=Yv,u=!0;s===e.length||s===-1?c=Xv:(a=e[s],a.id===65535?c=jv:(c=this.lookupTable.lookup(a.id),c==null&&(c=Yv)));let d=this.stateTable.stateArray.getItem(i)[c],m=this.stateTable.entryTable.getItem(d);c!==Xv&&c!==jv&&(n(a,m,s),u=!(m.flags&sq)),i=m.newState,u&&(s+=o)}return e}traverse(e,t=0,n=new Set){if(n.has(t))return;n.add(t);let{nClasses:i,stateArray:s,entryTable:o}=this.stateTable,a=s.getItem(t);for(let c=4;c<i;c++){let u=a[c],f=o.getItem(u);for(let d of this.lookupTable.glyphsForValue(c))e.enter&&e.enter(d,f),f.newState!==0&&this.traverse(e,f.newState,n),e.exit&&e.exit(d,f)}}constructor(e){this.stateTable=e,this.lookupTable=new Qa(e.classTable)}}const aq=32768,lq=8192,cq=15,Zv=32768,uq=32768,hq=8192,fq=2147483648,dq=1073741824,pq=1073741823,Kv=4194304,mq=2048,gq=1024,vq=992,bq=31;class Cw{process(e,t={}){for(let i of this.morx.chains){let s=i.defaultFlags;for(let o of i.features){let a;(a=t[o.featureType])&&(a[o.featureSetting]?(s&=o.disableFlags,s|=o.enableFlags):a[o.featureSetting]===!1&&(s|=~o.disableFlags,s&=~o.enableFlags))}for(let o of i.subtables)o.subFeatureFlags&s&&this.processSubtable(o,e)}let n=e.length-1;for(;n>=0;)e[n].id===65535&&e.splice(n,1),n--;return e}processSubtable(e,t){if(this.subtable=e,this.glyphs=t,this.subtable.type===4){this.processNoncontextualSubstitutions(this.subtable,this.glyphs);return}this.ligatureStack=[],this.markedGlyph=null,this.firstGlyph=null,this.lastGlyph=null,this.markedIndex=null;let n=this.getStateMachine(e),i=this.getProcessor(),s=!!(this.subtable.coverage&Kv);return n.process(this.glyphs,s,i)}getStateMachine(e){return new oq(e.table.stateTable)}getProcessor(){switch(this.subtable.type){case 0:return this.processIndicRearragement;case 1:return this.processContextualSubstitution;case 2:return this.processLigature;case 4:return this.processNoncontextualSubstitutions;case 5:return this.processGlyphInsertion;default:throw new Error(`Invalid morx subtable type: ${this.subtable.type}`)}}processIndicRearragement(e,t,n){t.flags&aq&&(this.firstGlyph=n),t.flags&lq&&(this.lastGlyph=n),xq(this.glyphs,t.flags&cq,this.firstGlyph,this.lastGlyph)}processContextualSubstitution(e,t,n){let i=this.subtable.table.substitutionTable.items;if(t.markIndex!==65535){let o=i.getItem(t.markIndex),a=new Qa(o);e=this.glyphs[this.markedGlyph];var s=a.lookup(e.id);s&&(this.glyphs[this.markedGlyph]=this.font.getGlyph(s,e.codePoints))}if(t.currentIndex!==65535){let o=i.getItem(t.currentIndex),a=new Qa(o);e=this.glyphs[n];var s=a.lookup(e.id);s&&(this.glyphs[n]=this.font.getGlyph(s,e.codePoints))}t.flags&Zv&&(this.markedGlyph=n)}processLigature(e,t,n){if(t.flags&uq&&this.ligatureStack.push(n),t.flags&hq){let i=this.subtable.table.ligatureActions,s=this.subtable.table.components,o=this.subtable.table.ligatureList,a=t.action,c=!1,u=0,f=[],d=[];for(;!c;){let m=this.ligatureStack.pop();f.unshift(...this.glyphs[m].codePoints);let v=i.getItem(a++);c=!!(v&fq);let S=!!(v&dq),x=(v&pq)<<2>>2;x+=this.glyphs[m].id;let w=s.getItem(x);if(u+=w,c||S){let A=o.getItem(u);this.glyphs[m]=this.font.getGlyph(A,f),d.push(m),u=0,f=[]}else this.glyphs[m]=this.font.getGlyph(65535)}this.ligatureStack.push(...d)}}processNoncontextualSubstitutions(e,t,n){let i=new Qa(e.table.lookupTable);for(n=0;n<t.length;n++){let s=t[n];if(s.id!==65535){let o=i.lookup(s.id);o&&(t[n]=this.font.getGlyph(o,s.codePoints))}}}_insertGlyphs(e,t,n,i){let s=[];for(;n--;){let o=this.subtable.table.insertionActions.getItem(t++);s.push(this.font.getGlyph(o))}i||e++,this.glyphs.splice(e,0,...s)}processGlyphInsertion(e,t,n){if(t.flags&Zv&&(this.markedIndex=n),t.markedInsertIndex!==65535){let i=(t.flags&bq)>>>5,s=!!(t.flags&gq);this._insertGlyphs(this.markedIndex,t.markedInsertIndex,i,s)}if(t.currentInsertIndex!==65535){let i=(t.flags&vq)>>>5,s=!!(t.flags&mq);this._insertGlyphs(n,t.currentInsertIndex,i,s)}}getSupportedFeatures(){let e=[];for(let t of this.morx.chains)for(let n of t.features)e.push([n.featureType,n.featureSetting]);return e}generateInputs(e){return this.inputCache||this.generateInputCache(),this.inputCache[e]||[]}generateInputCache(){this.inputCache={};for(let e of this.morx.chains){let t=e.defaultFlags;for(let n of e.subtables)n.subFeatureFlags&t&&this.generateInputsForSubtable(n)}}generateInputsForSubtable(e){if(e.type!==2)return;if(!!(e.coverage&Kv))throw new Error("Reverse subtable, not supported.");this.subtable=e,this.ligatureStack=[];let n=this.getStateMachine(e),i=this.getProcessor(),s=[],o=[];this.glyphs=[],n.traverse({enter:(a,c)=>{let u=this.glyphs;o.push({glyphs:u.slice(),ligatureStack:this.ligatureStack.slice()});let f=this.font.getGlyph(a);s.push(f),u.push(s[s.length-1]),i(u[u.length-1],c,u.length-1);let d=0,m=0;for(let v=0;v<u.length&&d<=1;v++)u[v].id!==65535&&(d++,m=u[v].id);if(d===1){let v=s.map(x=>x.id),S=this.inputCache[m];S?S.push(v):this.inputCache[m]=[v]}},exit:()=>{({glyphs:this.glyphs,ligatureStack:this.ligatureStack}=o.pop()),s.pop()}})}constructor(e){this.processIndicRearragement=this.processIndicRearragement.bind(this),this.processContextualSubstitution=this.processContextualSubstitution.bind(this),this.processLigature=this.processLigature.bind(this),this.processNoncontextualSubstitutions=this.processNoncontextualSubstitutions.bind(this),this.processGlyphInsertion=this.processGlyphInsertion.bind(this),this.font=e,this.morx=e.morx,this.inputCache=null}}Mn([En],Cw.prototype,"getStateMachine",null);function zn(r,e,t,n=!1,i=!1){let s=r.splice(t[0]-(t[1]-1),t[1]);i&&s.reverse();let o=r.splice(e[0],e[1],...s);return n&&o.reverse(),r.splice(t[0]-(e[1]-1),0,...o),r}function xq(r,e,t,n){switch(e){case 0:return r;case 1:return zn(r,[t,1],[n,0]);case 2:return zn(r,[t,0],[n,1]);case 3:return zn(r,[t,1],[n,1]);case 4:return zn(r,[t,2],[n,0]);case 5:return zn(r,[t,2],[n,0],!0,!1);case 6:return zn(r,[t,0],[n,2]);case 7:return zn(r,[t,0],[n,2],!1,!0);case 8:return zn(r,[t,1],[n,2]);case 9:return zn(r,[t,1],[n,2],!1,!0);case 10:return zn(r,[t,2],[n,1]);case 11:return zn(r,[t,2],[n,1],!0,!1);case 12:return zn(r,[t,2],[n,2]);case 13:return zn(r,[t,2],[n,2],!0,!1);case 14:return zn(r,[t,2],[n,2],!1,!0);case 15:return zn(r,[t,2],[n,2],!0,!0);default:throw new Error(`Unknown verb: ${e}`)}}class wq{substitute(e){e.direction==="rtl"&&e.glyphs.reverse(),this.morxProcessor.process(e.glyphs,nq(e.features))}getAvailableFeatures(e,t){return rq(this.morxProcessor.getSupportedFeatures())}stringsForGlyph(e){let t=this.morxProcessor.generateInputs(e),n=new Set;for(let i of t)this._addStrings(i,0,n,"");return n}_addStrings(e,t,n,i){let s=this.font._cmapProcessor.codePointsForGlyph(e[t]);for(let o of s){let a=i+String.fromCodePoint(o);t<e.length-1?this._addStrings(e,t+1,n,a):n.add(a)}}constructor(e){this.font=e,this.morxProcessor=new Cw(e),this.fallbackPosition=!1}}class yq{_addFeatures(e,t){let n=this.stages.length-1,i=this.stages[n];for(let s of e)this.allFeatures[s]==null&&(i.push(s),this.allFeatures[s]=n,t&&(this.globalFeatures[s]=!0))}add(e,t=!0){if(this.stages.length===0&&this.stages.push([]),typeof e=="string"&&(e=[e]),Array.isArray(e))this._addFeatures(e,t);else if(typeof e=="object")this._addFeatures(e.global||[],!0),this._addFeatures(e.local||[],!1);else throw new Error("Unsupported argument to ShapingPlan#add")}addStage(e,t){typeof e=="function"?this.stages.push(e,[]):(this.stages.push([]),this.add(e,t))}setFeatureOverrides(e){if(Array.isArray(e))this.add(e);else if(typeof e=="object"){for(let t in e)if(e[t])this.add(t);else if(this.allFeatures[t]!=null){let n=this.stages[this.allFeatures[t]];n.splice(n.indexOf(t),1),delete this.allFeatures[t],delete this.globalFeatures[t]}}}assignGlobalFeatures(e){for(let t of e)for(let n in this.globalFeatures)t.features[n]=!0}process(e,t,n){for(let i of this.stages)typeof i=="function"?n||i(this.font,t,this):i.length>0&&e.applyFeatures(i,t,n)}constructor(e,t,n){this.font=e,this.script=t,this.direction=n,this.stages=[],this.globalFeatures={},this.allFeatures={}}}const _q=["rvrn"],Sq=["ccmp","locl","rlig","mark","mkmk"],Cq=["frac","numr","dnom"],Mq=["calt","clig","liga","rclt","curs","kern"],Eq={ltr:["ltra","ltrm"],rtl:["rtla","rtlm"]};class Zi{static plan(e,t,n){this.planPreprocessing(e),this.planFeatures(e),this.planPostprocessing(e,n),e.assignGlobalFeatures(t),this.assignFeatures(e,t)}static planPreprocessing(e){e.add({global:[..._q,...Eq[e.direction]],local:Cq})}static planFeatures(e){}static planPostprocessing(e,t){e.add([...Sq,...Mq]),e.setFeatureOverrides(t)}static assignFeatures(e,t){for(let n=0;n<t.length;n++){let i=t[n];if(i.codePoints[0]===8260){let s=n,o=n+1;for(;s>0&&xv(t[s-1].codePoints[0]);)t[s-1].features.numr=!0,t[s-1].features.frac=!0,s--;for(;o<t.length&&xv(t[o].codePoints[0]);)t[o].features.dnom=!0,t[o].features.frac=!0,o++;i.features.frac=!0,n=o-1}}}}Jn(Zi,"zeroMarkWidths","AFTER_GPOS");const Aq=new ku(Md("ABABAAAAAACgMQAAAZUBav7t2CtPA0EUBeDZB00pin9AJZIEgyUEj0QhweDAgQOJxCBRBElQSBwSicLgkOAwnNKZ5GaY2c7uzj4o5yZfZrrbefbuIx2nSq3CGmzAWH/+K+UO7MIe7MMhHMMpnMMFXMIVXIt2t3CnP088iPqjqNN8e4Ij7Rle4LUH82rLm6i/92A+RERERERERERNmfz/89GDeRARERERzbN8ceps2Iwt9H0C9/AJ6yOlDkbTczcot5VSm8Pm1vcFWfb7+BKOLTuOd2UlTX4wGP85Eg953lWPFbnuN7PkjtLmalOWbNenkHOSa7T3KmR9MVTZ2zZkVj1kHa68MueVKH0R4zqQ44WEXLM8VjcWHP0PtKLfPzQnMtGn3W4QYf6qxFxceVI394r2xnV+1rih0fV1Vzf3fO1n3evL5J78ruvZ5ptX2Rwy92Tfb1wlEqut3U+sZ3HXOeJ7/zDrbyuP6+Zz0fqa6Nv3vhY7Yu1xWnGevmsvsUpTT/RYIe8waUH/rvHMWKFzLfN8L+rTfp645mfX7ftlnfDtYxN59w0=")),Jv=["isol","fina","fin2","fin3","medi","med2","init"],_f={Non_Joining:0,Left_Joining:1,Right_Joining:2,Dual_Joining:3,Join_Causing:3,ALAPH:4,"DALATH RISH":5,Transparent:6},Ot="isol",Ui="fina",zh="fin2",Pq="fin3",Ec="medi",Ac="med2",Pc="init",yt=null,Tq=[[[yt,yt,0],[yt,Ot,2],[yt,Ot,1],[yt,Ot,2],[yt,Ot,1],[yt,Ot,6]],[[yt,yt,0],[yt,Ot,2],[yt,Ot,1],[yt,Ot,2],[yt,zh,5],[yt,Ot,6]],[[yt,yt,0],[yt,Ot,2],[Pc,Ui,1],[Pc,Ui,3],[Pc,Ui,4],[Pc,Ui,6]],[[yt,yt,0],[yt,Ot,2],[Ec,Ui,1],[Ec,Ui,3],[Ec,Ui,4],[Ec,Ui,6]],[[yt,yt,0],[yt,Ot,2],[Ac,Ot,1],[Ac,Ot,2],[Ac,zh,5],[Ac,Ot,6]],[[yt,yt,0],[yt,Ot,2],[Ot,Ot,1],[Ot,Ot,2],[Ot,zh,5],[Ot,Ot,6]],[[yt,yt,0],[yt,Ot,2],[yt,Ot,1],[yt,Ot,2],[yt,Pq,5],[yt,Ot,6]]];class Vi extends Zi{static planFeatures(e){e.add(["ccmp","locl"]);for(let t=0;t<Jv.length;t++){let n=Jv[t];e.addStage(n,!1)}e.addStage("mset")}static assignFeatures(e,t){super.assignFeatures(e,t);let n=-1,i=0,s=[];for(let a=0;a<t.length;a++){let c,u;var o=t[a];let f=Lq(o.codePoints[0]);if(f===_f.Transparent){s[a]=yt;continue}[u,c,i]=Tq[i][f],u!==yt&&n!==-1&&(s[n]=u),s[a]=c,n=a}for(let a=0;a<t.length;a++){let c;var o=t[a];(c=s[a])&&(o.features[c]=!0)}}}function Lq(r){let e=Aq.get(r);if(e)return e-1;let t=Ou(r);return t==="Mn"||t==="Me"||t==="Cf"?_f.Transparent:_f.Non_Joining}class Iq{reset(e={},t=0){this.options=e,this.flags=e.flags||{},this.markAttachmentType=e.markAttachmentType||0,this.index=t}get cur(){return this.glyphs[this.index]||null}shouldIgnore(e){return this.flags.ignoreMarks&&e.isMark||this.flags.ignoreBaseGlyphs&&e.isBase||this.flags.ignoreLigatures&&e.isLigature||this.markAttachmentType&&e.isMark&&e.markAttachmentType!==this.markAttachmentType}move(e){for(this.index+=e;0<=this.index&&this.index<this.glyphs.length&&this.shouldIgnore(this.glyphs[this.index]);)this.index+=e;return 0>this.index||this.index>=this.glyphs.length?null:this.glyphs[this.index]}next(){return this.move(1)}prev(){return this.move(-1)}peek(e=1){let t=this.index,n=this.increment(e);return this.index=t,n}peekIndex(e=1){let t=this.index;this.increment(e);let n=this.index;return this.index=t,n}increment(e=1){let t=e<0?-1:1;for(e=Math.abs(e);e--;)this.move(t);return this.glyphs[this.index]}constructor(e,t){this.glyphs=e,this.reset(t)}}const Dq=["DFLT","dflt","latn"];class iu{findScript(e){if(this.table.scriptList==null)return null;Array.isArray(e)||(e=[e]);for(let t of e)for(let n of this.table.scriptList)if(n.tag===t)return n;return null}selectScript(e,t,n){let i=!1,s;if(!this.script||e!==this.scriptTag){if(s=this.findScript(e),s||(s=this.findScript(Dq)),!s)return this.scriptTag;this.scriptTag=s.tag,this.script=s.script,this.language=null,this.languageTag=null,i=!0}if((!n||n!==this.direction)&&(this.direction=n||Sw(e)),t&&t.length<4&&(t+=" ".repeat(4-t.length)),!t||t!==this.languageTag){this.language=null;for(let o of this.script.langSysRecords)if(o.tag===t){this.language=o.langSys,this.languageTag=o.tag;break}this.language||(this.language=this.script.defaultLangSys,this.languageTag=null),i=!0}if(i&&(this.features={},this.language))for(let o of this.language.featureIndexes){let a=this.table.featureList[o],c=this.substituteFeatureForVariations(o);this.features[a.tag]=c||a.feature}return this.scriptTag}lookupsForFeatures(e=[],t){let n=[];for(let i of e){let s=this.features[i];if(s)for(let o of s.lookupListIndexes)t&&t.indexOf(o)!==-1||n.push({feature:i,index:o,lookup:this.table.lookupList.get(o)})}return n.sort((i,s)=>i.index-s.index),n}substituteFeatureForVariations(e){if(this.variationsIndex===-1)return null;let n=this.table.featureVariations.featureVariationRecords[this.variationsIndex].featureTableSubstitution.substitutions;for(let i of n)if(i.featureIndex===e)return i.alternateFeatureTable;return null}findVariationsIndex(e){let t=this.table.featureVariations;if(!t)return-1;let n=t.featureVariationRecords;for(let i=0;i<n.length;i++){let s=n[i].conditionSet.conditionTable;if(this.variationConditionsMatch(s,e))return i}return-1}variationConditionsMatch(e,t){return e.every(n=>{let i=n.axisIndex<t.length?t[n.axisIndex]:0;return n.filterRangeMinValue<=i&&i<=n.filterRangeMaxValue})}applyFeatures(e,t,n){let i=this.lookupsForFeatures(e);this.applyLookups(i,t,n)}applyLookups(e,t,n){this.glyphs=t,this.positions=n,this.glyphIterator=new Iq(t);for(let{feature:i,lookup:s}of e)for(this.currentFeature=i,this.glyphIterator.reset(s.flags);this.glyphIterator.index<t.length;){if(!(i in this.glyphIterator.cur.features)){this.glyphIterator.next();continue}for(let o of s.subTables)if(this.applyLookup(s.lookupType,o))break;this.glyphIterator.next()}}applyLookup(e,t){throw new Error("applyLookup must be implemented by subclasses")}applyLookupList(e){let t=this.glyphIterator.options,n=this.glyphIterator.index;for(let i of e){this.glyphIterator.reset(t,n),this.glyphIterator.increment(i.sequenceIndex);let s=this.table.lookupList.get(i.lookupListIndex);this.glyphIterator.reset(s.flags,this.glyphIterator.index);for(let o of s.subTables)if(this.applyLookup(s.lookupType,o))break}return this.glyphIterator.reset(t,n),!0}coverageIndex(e,t){switch(t==null&&(t=this.glyphIterator.cur.id),e.version){case 1:return e.glyphs.indexOf(t);case 2:for(let n of e.rangeRecords)if(n.start<=t&&t<=n.end)return n.startCoverageIndex+t-n.start;break}return-1}match(e,t,n,i){let s=this.glyphIterator.index,o=this.glyphIterator.increment(e),a=0;for(;a<t.length&&o&&n(t[a],o);)i&&i.push(this.glyphIterator.index),a++,o=this.glyphIterator.next();return this.glyphIterator.index=s,a<t.length?!1:i||!0}sequenceMatches(e,t){return this.match(e,t,(n,i)=>n===i.id)}sequenceMatchIndices(e,t){return this.match(e,t,(n,i)=>this.currentFeature in i.features?n===i.id:!1,[])}coverageSequenceMatches(e,t){return this.match(e,t,(n,i)=>this.coverageIndex(n,i.id)>=0)}getClassID(e,t){switch(t.version){case 1:let n=e-t.startGlyph;if(n>=0&&n<t.classValueArray.length)return t.classValueArray[n];break;case 2:for(let i of t.classRangeRecord)if(i.start<=e&&e<=i.end)return i.class;break}return 0}classSequenceMatches(e,t,n){return this.match(e,t,(i,s)=>i===this.getClassID(s.id,n))}applyContext(e){let t,n;switch(e.version){case 1:if(t=this.coverageIndex(e.coverage),t===-1)return!1;n=e.ruleSets[t];for(let i of n)if(this.sequenceMatches(1,i.input))return this.applyLookupList(i.lookupRecords);break;case 2:if(this.coverageIndex(e.coverage)===-1||(t=this.getClassID(this.glyphIterator.cur.id,e.classDef),t===-1))return!1;n=e.classSet[t];for(let i of n)if(this.classSequenceMatches(1,i.classes,e.classDef))return this.applyLookupList(i.lookupRecords);break;case 3:if(this.coverageSequenceMatches(0,e.coverages))return this.applyLookupList(e.lookupRecords);break}return!1}applyChainingContext(e){let t;switch(e.version){case 1:if(t=this.coverageIndex(e.coverage),t===-1)return!1;let n=e.chainRuleSets[t];for(let s of n)if(this.sequenceMatches(-s.backtrack.length,s.backtrack)&&this.sequenceMatches(1,s.input)&&this.sequenceMatches(1+s.input.length,s.lookahead))return this.applyLookupList(s.lookupRecords);break;case 2:if(this.coverageIndex(e.coverage)===-1)return!1;t=this.getClassID(this.glyphIterator.cur.id,e.inputClassDef);let i=e.chainClassSet[t];if(!i)return!1;for(let s of i)if(this.classSequenceMatches(-s.backtrack.length,s.backtrack,e.backtrackClassDef)&&this.classSequenceMatches(1,s.input,e.inputClassDef)&&this.classSequenceMatches(1+s.input.length,s.lookahead,e.lookaheadClassDef))return this.applyLookupList(s.lookupRecords);break;case 3:if(this.coverageSequenceMatches(-e.backtrackGlyphCount,e.backtrackCoverage)&&this.coverageSequenceMatches(0,e.inputCoverage)&&this.coverageSequenceMatches(e.inputGlyphCount,e.lookaheadCoverage))return this.applyLookupList(e.lookupRecords);break}return!1}constructor(e,t){this.font=e,this.table=t,this.script=null,this.scriptTag=null,this.language=null,this.languageTag=null,this.features={},this.lookups={},this.variationsIndex=e._variationProcessor?this.findVariationsIndex(e._variationProcessor.normalizedCoords):-1,this.selectScript(),this.glyphs=[],this.positions=[],this.ligatureID=1,this.currentFeature=null}}class Lr{get id(){return this._id}set id(e){this._id=e,this.substituted=!0;let t=this._font.GDEF;if(t&&t.glyphClassDef){let n=iu.prototype.getClassID(e,t.glyphClassDef);this.isBase=n===1,this.isLigature=n===2,this.isMark=n===3,this.markAttachmentType=t.markAttachClassDef?iu.prototype.getClassID(e,t.markAttachClassDef):0}else this.isMark=this.codePoints.length>0&&this.codePoints.every(Y2),this.isBase=!this.isMark,this.isLigature=this.codePoints.length>1,this.markAttachmentType=0}copy(){return new Lr(this._font,this.id,this.codePoints,this.features)}constructor(e,t,n=[],i){if(this._font=e,this.codePoints=n,this.id=t,this.features={},Array.isArray(i))for(let s=0;s<i.length;s++){let o=i[s];this.features[o]=!0}else typeof i=="object"&&Object.assign(this.features,i);this.ligatureID=null,this.ligatureComponent=null,this.isLigated=!1,this.cursiveAttachment=null,this.markAttachment=null,this.shaperInfo=null,this.substituted=!1,this.isMultiplied=!1}}class Mw extends Zi{static planFeatures(e){e.add(["ljmo","vjmo","tjmo"],!1)}static assignFeatures(e,t){let n=0,i=0;for(;i<t.length;){let s,a=t[i].codePoints[0],c=lu(a);switch([s,n]=Zq[n][c],s){case fi:e.font.hasGlyphForCodePoint(a)||(i=Pw(t,i,e.font));break;case Sf:i=Kq(t,i,e.font);break;case Cf:Qq(t,i,e.font);break;case Mf:i=eX(t,i,e.font);break}i++}}}Jn(Mw,"zeroMarkWidths","NONE");const Zo=44032,Ew=55204,Rq=Ew-Zo+1,zu=4352,$u=4449,Ps=4519,kq=19,su=21,bl=28,Fq=zu+kq-1,Oq=$u+su-1,Bq=Ps+bl-1,Qv=9676,Nq=r=>4352<=r&&r<=4447||43360<=r&&r<=43388,Uq=r=>4448<=r&&r<=4519||55216<=r&&r<=55238,Vq=r=>4520<=r&&r<=4607||55243<=r&&r<=55291,zq=r=>12334<=r&&r<=12335,$q=r=>Zo<=r&&r<=Ew,Gq=r=>r-Zo<Rq&&(r-Zo)%bl===0,Hq=r=>zu<=r&&r<=Fq,Wq=r=>$u<=r&&r<=Oq,qq=r=>1<=r&&r<=Bq,Xq=0,Yq=1,ou=2,Ad=3,au=4,Aw=5,jq=6;function lu(r){return Nq(r)?Yq:Uq(r)?ou:Vq(r)?Ad:Gq(r)?au:$q(r)?Aw:zq(r)?jq:Xq}const qn=0,fi=1,Sf=2,Cf=4,Mf=5,Zq=[[[qn,0],[qn,1],[qn,0],[qn,0],[fi,2],[fi,3],[Mf,0]],[[qn,0],[qn,1],[Sf,2],[qn,0],[fi,2],[fi,3],[Mf,0]],[[qn,0],[qn,1],[qn,0],[Sf,3],[fi,2],[fi,3],[Cf,0]],[[qn,0],[qn,1],[qn,0],[qn,0],[fi,2],[fi,3],[Cf,0]]];function el(r,e,t){return new Lr(r,r.glyphForCodePoint(e).id,[e],t)}function Pw(r,e,t){let n=r[e],s=n.codePoints[0]-Zo,o=Ps+s%bl;s=s/bl|0;let a=zu+s/su|0,c=$u+s%su;if(!t.hasGlyphForCodePoint(a)||!t.hasGlyphForCodePoint(c)||o!==Ps&&!t.hasGlyphForCodePoint(o))return e;let u=el(t,a,n.features);u.features.ljmo=!0;let f=el(t,c,n.features);f.features.vjmo=!0;let d=[u,f];if(o>Ps){let m=el(t,o,n.features);m.features.tjmo=!0,d.push(m)}return r.splice(e,1,...d),e+d.length-1}function Kq(r,e,t){let n=r[e],i=r[e].codePoints[0],s=lu(i),o=r[e-1].codePoints[0],a=lu(o),c,u,f,d;if(a===au&&s===Ad)c=o,d=n;else{s===ou?(u=r[e-1],f=n):(u=r[e-2],f=r[e-1],d=n);let v=u.codePoints[0],S=f.codePoints[0];Hq(v)&&Wq(S)&&(c=Zo+((v-zu)*su+(S-$u))*bl)}let m=d&&d.codePoints[0]||Ps;if(c!=null&&(m===Ps||qq(m))){let v=c+(m-Ps);if(t.hasGlyphForCodePoint(v)){let S=a===ou?3:2;return r.splice(e-S+1,S,el(t,v,n.features)),e-S+1}}return u&&(u.features.ljmo=!0),f&&(f.features.vjmo=!0),d&&(d.features.tjmo=!0),a===au?(Pw(r,e-1,t),e+1):e}function Jq(r){switch(lu(r)){case au:case Aw:return 1;case ou:return 2;case Ad:return 3}}function Qq(r,e,t){let n=r[e],i=r[e].codePoints[0];if(t.glyphForCodePoint(i).advanceWidth===0)return;let s=r[e-1].codePoints[0],o=Jq(s);return r.splice(e,1),r.splice(e-o,0,n)}function eX(r,e,t){let n=r[e],i=r[e].codePoints[0];if(t.hasGlyphForCodePoint(Qv)){let s=el(t,Qv,n.features),o=t.glyphForCodePoint(i).advanceWidth===0?e:e+1;r.splice(o,0,s),e++}return e}var Tw={};Tw=JSON.parse('{"stateTable":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,2,3,4,5,6,7,8,9,0,10,11,11,12,13,14,15,16,17],[0,0,0,18,19,20,21,22,23,0,24,0,0,25,26,0,0,27,0],[0,0,0,28,29,30,31,32,33,0,34,0,0,35,36,0,0,37,0],[0,0,0,38,5,7,7,8,9,0,10,0,0,0,13,0,0,16,0],[0,39,0,0,0,40,41,0,9,0,10,0,0,0,42,0,39,0,0],[0,0,0,0,43,44,44,8,9,0,0,0,0,12,43,0,0,0,0],[0,0,0,0,43,44,44,8,9,0,0,0,0,0,43,0,0,0,0],[0,0,0,45,46,47,48,49,9,0,10,0,0,0,42,0,0,0,0],[0,0,0,0,0,50,0,0,51,0,10,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,52,0,0,0,0,0,0,0,0],[0,0,0,53,54,55,56,57,58,0,59,0,0,60,61,0,0,62,0],[0,0,0,4,5,7,7,8,9,0,10,0,0,0,13,0,0,16,0],[0,63,64,0,0,40,41,0,9,0,10,0,0,0,42,0,63,0,0],[0,2,3,4,5,6,7,8,9,0,10,11,11,12,13,0,2,16,0],[0,0,0,18,65,20,21,22,23,0,24,0,0,25,26,0,0,27,0],[0,0,0,0,66,67,67,8,9,0,10,0,0,0,68,0,0,0,0],[0,0,0,69,0,70,70,0,71,0,72,0,0,0,0,0,0,0,0],[0,0,0,73,19,74,74,22,23,0,24,0,0,0,26,0,0,27,0],[0,75,0,0,0,76,77,0,23,0,24,0,0,0,78,0,75,0,0],[0,0,0,0,79,80,80,22,23,0,0,0,0,25,79,0,0,0,0],[0,0,0,18,19,20,74,22,23,0,24,0,0,25,26,0,0,27,0],[0,0,0,81,82,83,84,85,23,0,24,0,0,0,78,0,0,0,0],[0,0,0,0,0,86,0,0,87,0,24,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,88,0,0,0,0,0,0,0,0],[0,0,0,18,19,74,74,22,23,0,24,0,0,0,26,0,0,27,0],[0,89,90,0,0,76,77,0,23,0,24,0,0,0,78,0,89,0,0],[0,0,0,0,91,92,92,22,23,0,24,0,0,0,93,0,0,0,0],[0,0,0,94,29,95,31,32,33,0,34,0,0,0,36,0,0,37,0],[0,96,0,0,0,97,98,0,33,0,34,0,0,0,99,0,96,0,0],[0,0,0,0,100,101,101,32,33,0,0,0,0,35,100,0,0,0,0],[0,0,0,0,100,101,101,32,33,0,0,0,0,0,100,0,0,0,0],[0,0,0,102,103,104,105,106,33,0,34,0,0,0,99,0,0,0,0],[0,0,0,0,0,107,0,0,108,0,34,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,109,0,0,0,0,0,0,0,0],[0,0,0,28,29,95,31,32,33,0,34,0,0,0,36,0,0,37,0],[0,110,111,0,0,97,98,0,33,0,34,0,0,0,99,0,110,0,0],[0,0,0,0,112,113,113,32,33,0,34,0,0,0,114,0,0,0,0],[0,0,0,0,5,7,7,8,9,0,10,0,0,0,13,0,0,16,0],[0,0,0,115,116,117,118,8,9,0,10,0,0,119,120,0,0,16,0],[0,0,0,0,0,121,121,0,9,0,10,0,0,0,42,0,0,0,0],[0,39,0,122,0,123,123,8,9,0,10,0,0,0,42,0,39,0,0],[0,124,64,0,0,0,0,0,0,0,0,0,0,0,0,0,124,0,0],[0,39,0,0,0,121,125,0,9,0,10,0,0,0,42,0,39,0,0],[0,0,0,0,0,126,126,8,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,46,47,48,49,9,0,10,0,0,0,42,0,0,0,0],[0,0,0,0,0,47,47,49,9,0,10,0,0,0,42,0,0,0,0],[0,0,0,0,0,127,127,49,9,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,128,127,127,49,9,0,0,0,0,0,0,0,0,0,0],[0,0,0,129,130,131,132,133,9,0,10,0,0,0,42,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,10,0,0,0,0,0,0,0,0],[0,0,0,0,0,50,0,0,0,0,10,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,134,0,0,0,0,0,0,0,0],[0,0,0,135,54,56,56,57,58,0,59,0,0,0,61,0,0,62,0],[0,136,0,0,0,137,138,0,58,0,59,0,0,0,139,0,136,0,0],[0,0,0,0,140,141,141,57,58,0,0,0,0,60,140,0,0,0,0],[0,0,0,0,140,141,141,57,58,0,0,0,0,0,140,0,0,0,0],[0,0,0,142,143,144,145,146,58,0,59,0,0,0,139,0,0,0,0],[0,0,0,0,0,147,0,0,148,0,59,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,149,0,0,0,0,0,0,0,0],[0,0,0,53,54,56,56,57,58,0,59,0,0,0,61,0,0,62,0],[0,150,151,0,0,137,138,0,58,0,59,0,0,0,139,0,150,0,0],[0,0,0,0,152,153,153,57,58,0,59,0,0,0,154,0,0,0,0],[0,0,0,155,116,156,157,8,9,0,10,0,0,158,120,0,0,16,0],[0,0,0,0,0,121,121,0,9,0,10,0,0,0,0,0,0,0,0],[0,75,3,4,5,159,160,8,161,0,162,0,11,12,163,0,75,16,0],[0,0,0,0,0,40,164,0,9,0,10,0,0,0,42,0,0,0,0],[0,0,0,0,165,44,44,8,9,0,0,0,0,0,165,0,0,0,0],[0,124,64,0,0,40,164,0,9,0,10,0,0,0,42,0,124,0,0],[0,0,0,0,0,70,70,0,71,0,72,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,71,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,166,0,0,167,0,72,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,168,0,0,0,0,0,0,0,0],[0,0,0,0,19,74,74,22,23,0,24,0,0,0,26,0,0,27,0],[0,0,0,0,79,80,80,22,23,0,0,0,0,0,79,0,0,0,0],[0,0,0,169,170,171,172,22,23,0,24,0,0,173,174,0,0,27,0],[0,0,0,0,0,175,175,0,23,0,24,0,0,0,78,0,0,0,0],[0,75,0,176,0,177,177,22,23,0,24,0,0,0,78,0,75,0,0],[0,178,90,0,0,0,0,0,0,0,0,0,0,0,0,0,178,0,0],[0,75,0,0,0,175,179,0,23,0,24,0,0,0,78,0,75,0,0],[0,0,0,0,0,180,180,22,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,82,83,84,85,23,0,24,0,0,0,78,0,0,0,0],[0,0,0,0,0,83,83,85,23,0,24,0,0,0,78,0,0,0,0],[0,0,0,0,0,181,181,85,23,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,182,181,181,85,23,0,0,0,0,0,0,0,0,0,0],[0,0,0,183,184,185,186,187,23,0,24,0,0,0,78,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,24,0,0,0,0,0,0,0,0],[0,0,0,0,0,86,0,0,0,0,24,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,188,0,0,0,0,0,0,0,0],[0,0,0,189,170,190,191,22,23,0,24,0,0,192,174,0,0,27,0],[0,0,0,0,0,175,175,0,23,0,24,0,0,0,0,0,0,0,0],[0,0,0,0,0,76,193,0,23,0,24,0,0,0,78,0,0,0,0],[0,0,0,0,194,80,80,22,23,0,0,0,0,0,194,0,0,0,0],[0,178,90,0,0,76,193,0,23,0,24,0,0,0,78,0,178,0,0],[0,0,0,0,29,95,31,32,33,0,34,0,0,0,36,0,0,37,0],[0,0,0,0,100,101,101,32,33,0,0,0,0,0,100,0,0,0,0],[0,0,0,195,196,197,198,32,33,0,34,0,0,199,200,0,0,37,0],[0,0,0,0,0,201,201,0,33,0,34,0,0,0,99,0,0,0,0],[0,96,0,202,0,203,203,32,33,0,34,0,0,0,99,0,96,0,0],[0,204,111,0,0,0,0,0,0,0,0,0,0,0,0,0,204,0,0],[0,96,0,0,0,201,205,0,33,0,34,0,0,0,99,0,96,0,0],[0,0,0,0,0,206,206,32,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,103,104,105,106,33,0,34,0,0,0,99,0,0,0,0],[0,0,0,0,0,104,104,106,33,0,34,0,0,0,99,0,0,0,0],[0,0,0,0,0,207,207,106,33,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,208,207,207,106,33,0,0,0,0,0,0,0,0,0,0],[0,0,0,209,210,211,212,213,33,0,34,0,0,0,99,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,34,0,0,0,0,0,0,0,0],[0,0,0,0,0,107,0,0,0,0,34,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,214,0,0,0,0,0,0,0,0],[0,0,0,215,196,216,217,32,33,0,34,0,0,218,200,0,0,37,0],[0,0,0,0,0,201,201,0,33,0,34,0,0,0,0,0,0,0,0],[0,0,0,0,0,97,219,0,33,0,34,0,0,0,99,0,0,0,0],[0,0,0,0,220,101,101,32,33,0,0,0,0,0,220,0,0,0,0],[0,204,111,0,0,97,219,0,33,0,34,0,0,0,99,0,204,0,0],[0,0,0,221,116,222,222,8,9,0,10,0,0,0,120,0,0,16,0],[0,223,0,0,0,40,224,0,9,0,10,0,0,0,42,0,223,0,0],[0,0,0,0,225,44,44,8,9,0,0,0,0,119,225,0,0,0,0],[0,0,0,115,116,117,222,8,9,0,10,0,0,119,120,0,0,16,0],[0,0,0,115,116,222,222,8,9,0,10,0,0,0,120,0,0,16,0],[0,226,64,0,0,40,224,0,9,0,10,0,0,0,42,0,226,0,0],[0,0,0,0,0,0,0,0,9,0,0,0,0,0,0,0,0,0,0],[0,39,0,0,0,121,121,0,9,0,10,0,0,0,42,0,39,0,0],[0,0,0,0,0,44,44,8,9,0,0,0,0,0,0,0,0,0,0],[0,0,0,227,0,228,229,0,9,0,10,0,0,230,0,0,0,0,0],[0,39,0,122,0,121,121,0,9,0,10,0,0,0,42,0,39,0,0],[0,0,0,0,0,0,0,8,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,231,231,49,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,232,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,130,131,132,133,9,0,10,0,0,0,42,0,0,0,0],[0,0,0,0,0,131,131,133,9,0,10,0,0,0,42,0,0,0,0],[0,0,0,0,0,233,233,133,9,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,234,233,233,133,9,0,0,0,0,0,0,0,0,0,0],[0,0,0,235,236,237,238,239,9,0,10,0,0,0,42,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,54,56,56,57,58,0,59,0,0,0,61,0,0,62,0],[0,0,0,240,241,242,243,57,58,0,59,0,0,244,245,0,0,62,0],[0,0,0,0,0,246,246,0,58,0,59,0,0,0,139,0,0,0,0],[0,136,0,247,0,248,248,57,58,0,59,0,0,0,139,0,136,0,0],[0,249,151,0,0,0,0,0,0,0,0,0,0,0,0,0,249,0,0],[0,136,0,0,0,246,250,0,58,0,59,0,0,0,139,0,136,0,0],[0,0,0,0,0,251,251,57,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,143,144,145,146,58,0,59,0,0,0,139,0,0,0,0],[0,0,0,0,0,144,144,146,58,0,59,0,0,0,139,0,0,0,0],[0,0,0,0,0,252,252,146,58,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,253,252,252,146,58,0,0,0,0,0,0,0,0,0,0],[0,0,0,254,255,256,257,258,58,0,59,0,0,0,139,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,59,0,0,0,0,0,0,0,0],[0,0,0,0,0,147,0,0,0,0,59,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,259,0,0,0,0,0,0,0,0],[0,0,0,260,241,261,262,57,58,0,59,0,0,263,245,0,0,62,0],[0,0,0,0,0,246,246,0,58,0,59,0,0,0,0,0,0,0,0],[0,0,0,0,0,137,264,0,58,0,59,0,0,0,139,0,0,0,0],[0,0,0,0,265,141,141,57,58,0,0,0,0,0,265,0,0,0,0],[0,249,151,0,0,137,264,0,58,0,59,0,0,0,139,0,249,0,0],[0,0,0,221,116,222,222,8,9,0,10,0,0,0,120,0,0,16,0],[0,0,0,0,225,44,44,8,9,0,0,0,0,158,225,0,0,0,0],[0,0,0,155,116,156,222,8,9,0,10,0,0,158,120,0,0,16,0],[0,0,0,155,116,222,222,8,9,0,10,0,0,0,120,0,0,16,0],[0,0,0,0,43,266,266,8,161,0,24,0,0,12,267,0,0,0,0],[0,75,0,176,43,268,268,269,161,0,24,0,0,0,267,0,75,0,0],[0,0,0,0,0,270,0,0,271,0,162,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,272,0,0,0,0,0,0,0,0],[0,273,274,0,0,40,41,0,9,0,10,0,0,0,42,0,273,0,0],[0,0,0,40,0,123,123,8,9,0,10,0,0,0,42,0,0,0,0],[0,0,0,0,0,121,275,0,9,0,10,0,0,0,42,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,72,0,0,0,0,0,0,0,0],[0,0,0,0,0,166,0,0,0,0,72,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,276,0,0,0,0,0,0,0,0],[0,0,0,277,170,278,278,22,23,0,24,0,0,0,174,0,0,27,0],[0,279,0,0,0,76,280,0,23,0,24,0,0,0,78,0,279,0,0],[0,0,0,0,281,80,80,22,23,0,0,0,0,173,281,0,0,0,0],[0,0,0,169,170,171,278,22,23,0,24,0,0,173,174,0,0,27,0],[0,0,0,169,170,278,278,22,23,0,24,0,0,0,174,0,0,27,0],[0,282,90,0,0,76,280,0,23,0,24,0,0,0,78,0,282,0,0],[0,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,0,0,0],[0,75,0,0,0,175,175,0,23,0,24,0,0,0,78,0,75,0,0],[0,0,0,0,0,80,80,22,23,0,0,0,0,0,0,0,0,0,0],[0,0,0,283,0,284,285,0,23,0,24,0,0,286,0,0,0,0,0],[0,75,0,176,0,175,175,0,23,0,24,0,0,0,78,0,75,0,0],[0,0,0,0,0,0,0,22,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,287,287,85,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,288,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,184,185,186,187,23,0,24,0,0,0,78,0,0,0,0],[0,0,0,0,0,185,185,187,23,0,24,0,0,0,78,0,0,0,0],[0,0,0,0,0,289,289,187,23,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,290,289,289,187,23,0,0,0,0,0,0,0,0,0,0],[0,0,0,291,292,293,294,295,23,0,24,0,0,0,78,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,277,170,278,278,22,23,0,24,0,0,0,174,0,0,27,0],[0,0,0,0,281,80,80,22,23,0,0,0,0,192,281,0,0,0,0],[0,0,0,189,170,190,278,22,23,0,24,0,0,192,174,0,0,27,0],[0,0,0,189,170,278,278,22,23,0,24,0,0,0,174,0,0,27,0],[0,0,0,76,0,177,177,22,23,0,24,0,0,0,78,0,0,0,0],[0,0,0,0,0,175,296,0,23,0,24,0,0,0,78,0,0,0,0],[0,0,0,297,196,298,298,32,33,0,34,0,0,0,200,0,0,37,0],[0,299,0,0,0,97,300,0,33,0,34,0,0,0,99,0,299,0,0],[0,0,0,0,301,101,101,32,33,0,0,0,0,199,301,0,0,0,0],[0,0,0,195,196,197,298,32,33,0,34,0,0,199,200,0,0,37,0],[0,0,0,195,196,298,298,32,33,0,34,0,0,0,200,0,0,37,0],[0,302,111,0,0,97,300,0,33,0,34,0,0,0,99,0,302,0,0],[0,0,0,0,0,0,0,0,33,0,0,0,0,0,0,0,0,0,0],[0,96,0,0,0,201,201,0,33,0,34,0,0,0,99,0,96,0,0],[0,0,0,0,0,101,101,32,33,0,0,0,0,0,0,0,0,0,0],[0,0,0,303,0,304,305,0,33,0,34,0,0,306,0,0,0,0,0],[0,96,0,202,0,201,201,0,33,0,34,0,0,0,99,0,96,0,0],[0,0,0,0,0,0,0,32,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,307,307,106,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,308,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,210,211,212,213,33,0,34,0,0,0,99,0,0,0,0],[0,0,0,0,0,211,211,213,33,0,34,0,0,0,99,0,0,0,0],[0,0,0,0,0,309,309,213,33,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,310,309,309,213,33,0,0,0,0,0,0,0,0,0,0],[0,0,0,311,312,313,314,315,33,0,34,0,0,0,99,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,297,196,298,298,32,33,0,34,0,0,0,200,0,0,37,0],[0,0,0,0,301,101,101,32,33,0,0,0,0,218,301,0,0,0,0],[0,0,0,215,196,216,298,32,33,0,34,0,0,218,200,0,0,37,0],[0,0,0,215,196,298,298,32,33,0,34,0,0,0,200,0,0,37,0],[0,0,0,97,0,203,203,32,33,0,34,0,0,0,99,0,0,0,0],[0,0,0,0,0,201,316,0,33,0,34,0,0,0,99,0,0,0,0],[0,0,0,0,116,222,222,8,9,0,10,0,0,0,120,0,0,16,0],[0,0,0,0,225,44,44,8,9,0,0,0,0,0,225,0,0,0,0],[0,0,0,317,318,319,320,8,9,0,10,0,0,321,322,0,0,16,0],[0,223,0,323,0,123,123,8,9,0,10,0,0,0,42,0,223,0,0],[0,223,0,0,0,121,324,0,9,0,10,0,0,0,42,0,223,0,0],[0,0,0,325,318,326,327,8,9,0,10,0,0,328,322,0,0,16,0],[0,0,0,64,0,121,121,0,9,0,10,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,9,0,0,0,0,230,0,0,0,0,0],[0,0,0,227,0,228,121,0,9,0,10,0,0,230,0,0,0,0,0],[0,0,0,227,0,121,121,0,9,0,10,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,49,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,46,0,0],[0,0,0,0,0,329,329,133,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,330,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,236,237,238,239,9,0,10,0,0,0,42,0,0,0,0],[0,0,0,0,0,237,237,239,9,0,10,0,0,0,42,0,0,0,0],[0,0,0,0,0,331,331,239,9,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,332,331,331,239,9,0,0,0,0,0,0,0,0,0,0],[0,0,0,333,40,121,334,0,9,0,10,0,0,0,42,0,0,0,0],[0,0,0,335,241,336,336,57,58,0,59,0,0,0,245,0,0,62,0],[0,337,0,0,0,137,338,0,58,0,59,0,0,0,139,0,337,0,0],[0,0,0,0,339,141,141,57,58,0,0,0,0,244,339,0,0,0,0],[0,0,0,240,241,242,336,57,58,0,59,0,0,244,245,0,0,62,0],[0,0,0,240,241,336,336,57,58,0,59,0,0,0,245,0,0,62,0],[0,340,151,0,0,137,338,0,58,0,59,0,0,0,139,0,340,0,0],[0,0,0,0,0,0,0,0,58,0,0,0,0,0,0,0,0,0,0],[0,136,0,0,0,246,246,0,58,0,59,0,0,0,139,0,136,0,0],[0,0,0,0,0,141,141,57,58,0,0,0,0,0,0,0,0,0,0],[0,0,0,341,0,342,343,0,58,0,59,0,0,344,0,0,0,0,0],[0,136,0,247,0,246,246,0,58,0,59,0,0,0,139,0,136,0,0],[0,0,0,0,0,0,0,57,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,345,345,146,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,346,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,255,256,257,258,58,0,59,0,0,0,139,0,0,0,0],[0,0,0,0,0,256,256,258,58,0,59,0,0,0,139,0,0,0,0],[0,0,0,0,0,347,347,258,58,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,348,347,347,258,58,0,0,0,0,0,0,0,0,0,0],[0,0,0,349,350,351,352,353,58,0,59,0,0,0,139,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,335,241,336,336,57,58,0,59,0,0,0,245,0,0,62,0],[0,0,0,0,339,141,141,57,58,0,0,0,0,263,339,0,0,0,0],[0,0,0,260,241,261,336,57,58,0,59,0,0,263,245,0,0,62,0],[0,0,0,260,241,336,336,57,58,0,59,0,0,0,245,0,0,62,0],[0,0,0,137,0,248,248,57,58,0,59,0,0,0,139,0,0,0,0],[0,0,0,0,0,246,354,0,58,0,59,0,0,0,139,0,0,0,0],[0,0,0,0,0,126,126,8,23,0,0,0,0,0,0,0,0,0,0],[0,355,90,0,0,121,125,0,9,0,10,0,0,0,42,0,355,0,0],[0,0,0,0,0,356,356,269,23,0,0,0,0,0,0,0,0,0,0],[0,0,0,357,358,359,360,361,161,0,162,0,0,0,362,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,162,0,0,0,0,0,0,0,0],[0,0,0,0,0,270,0,0,0,0,162,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,363,0,0,0,0,0,0,0,0],[0,0,0,364,116,365,366,8,161,0,162,0,0,367,120,0,0,16,0],[0,0,0,0,0,368,368,0,161,0,162,0,0,0,0,0,0,0,0],[0,0,0,40,0,121,121,0,9,0,10,0,0,0,42,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,170,278,278,22,23,0,24,0,0,0,174,0,0,27,0],[0,0,0,0,281,80,80,22,23,0,0,0,0,0,281,0,0,0,0],[0,0,0,369,370,371,372,22,23,0,24,0,0,373,374,0,0,27,0],[0,279,0,375,0,177,177,22,23,0,24,0,0,0,78,0,279,0,0],[0,279,0,0,0,175,376,0,23,0,24,0,0,0,78,0,279,0,0],[0,0,0,377,370,378,379,22,23,0,24,0,0,380,374,0,0,27,0],[0,0,0,90,0,175,175,0,23,0,24,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,23,0,0,0,0,286,0,0,0,0,0],[0,0,0,283,0,284,175,0,23,0,24,0,0,286,0,0,0,0,0],[0,0,0,283,0,175,175,0,23,0,24,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,85,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,82,0,0],[0,0,0,0,0,381,381,187,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,382,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,292,293,294,295,23,0,24,0,0,0,78,0,0,0,0],[0,0,0,0,0,293,293,295,23,0,24,0,0,0,78,0,0,0,0],[0,0,0,0,0,383,383,295,23,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,384,383,383,295,23,0,0,0,0,0,0,0,0,0,0],[0,0,0,385,76,175,386,0,23,0,24,0,0,0,78,0,0,0,0],[0,0,0,76,0,175,175,0,23,0,24,0,0,0,78,0,0,0,0],[0,0,0,0,196,298,298,32,33,0,34,0,0,0,200,0,0,37,0],[0,0,0,0,301,101,101,32,33,0,0,0,0,0,301,0,0,0,0],[0,0,0,387,388,389,390,32,33,0,34,0,0,391,392,0,0,37,0],[0,299,0,393,0,203,203,32,33,0,34,0,0,0,99,0,299,0,0],[0,299,0,0,0,201,394,0,33,0,34,0,0,0,99,0,299,0,0],[0,0,0,395,388,396,397,32,33,0,34,0,0,398,392,0,0,37,0],[0,0,0,111,0,201,201,0,33,0,34,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,33,0,0,0,0,306,0,0,0,0,0],[0,0,0,303,0,304,201,0,33,0,34,0,0,306,0,0,0,0,0],[0,0,0,303,0,201,201,0,33,0,34,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,106,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,103,0,0],[0,0,0,0,0,399,399,213,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,400,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,312,313,314,315,33,0,34,0,0,0,99,0,0,0,0],[0,0,0,0,0,313,313,315,33,0,34,0,0,0,99,0,0,0,0],[0,0,0,0,0,401,401,315,33,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,402,401,401,315,33,0,0,0,0,0,0,0,0,0,0],[0,0,0,403,97,201,404,0,33,0,34,0,0,0,99,0,0,0,0],[0,0,0,97,0,201,201,0,33,0,34,0,0,0,99,0,0,0,0],[0,0,0,405,318,406,406,8,9,0,10,0,0,0,322,0,0,16,0],[0,407,0,0,0,40,408,0,9,0,10,0,0,0,42,0,407,0,0],[0,0,0,0,409,44,44,8,9,0,0,0,0,321,409,0,0,0,0],[0,0,0,317,318,319,406,8,9,0,10,0,0,321,322,0,0,16,0],[0,0,0,317,318,406,406,8,9,0,10,0,0,0,322,0,0,16,0],[0,410,64,0,0,40,408,0,9,0,10,0,0,0,42,0,410,0,0],[0,223,0,0,0,121,121,0,9,0,10,0,0,0,42,0,223,0,0],[0,223,0,323,0,121,121,0,9,0,10,0,0,0,42,0,223,0,0],[0,0,0,405,318,406,406,8,9,0,10,0,0,0,322,0,0,16,0],[0,0,0,0,409,44,44,8,9,0,0,0,0,328,409,0,0,0,0],[0,0,0,325,318,326,406,8,9,0,10,0,0,328,322,0,0,16,0],[0,0,0,325,318,406,406,8,9,0,10,0,0,0,322,0,0,16,0],[0,0,0,0,0,0,0,133,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,130,0,0],[0,0,0,0,0,411,411,239,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,412,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,40,121,334,0,9,0,10,0,0,0,42,0,0,0,0],[0,0,0,0,413,0,0,0,9,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,241,336,336,57,58,0,59,0,0,0,245,0,0,62,0],[0,0,0,0,339,141,141,57,58,0,0,0,0,0,339,0,0,0,0],[0,0,0,414,415,416,417,57,58,0,59,0,0,418,419,0,0,62,0],[0,337,0,420,0,248,248,57,58,0,59,0,0,0,139,0,337,0,0],[0,337,0,0,0,246,421,0,58,0,59,0,0,0,139,0,337,0,0],[0,0,0,422,415,423,424,57,58,0,59,0,0,425,419,0,0,62,0],[0,0,0,151,0,246,246,0,58,0,59,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,58,0,0,0,0,344,0,0,0,0,0],[0,0,0,341,0,342,246,0,58,0,59,0,0,344,0,0,0,0,0],[0,0,0,341,0,246,246,0,58,0,59,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,146,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,143,0,0],[0,0,0,0,0,426,426,258,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,427,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,350,351,352,353,58,0,59,0,0,0,139,0,0,0,0],[0,0,0,0,0,351,351,353,58,0,59,0,0,0,139,0,0,0,0],[0,0,0,0,0,428,428,353,58,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,429,428,428,353,58,0,0,0,0,0,0,0,0,0,0],[0,0,0,430,137,246,431,0,58,0,59,0,0,0,139,0,0,0,0],[0,0,0,137,0,246,246,0,58,0,59,0,0,0,139,0,0,0,0],[0,0,0,432,116,433,434,8,161,0,162,0,0,435,120,0,0,16,0],[0,0,0,0,0,180,180,269,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,358,359,360,361,161,0,162,0,0,0,362,0,0,0,0],[0,0,0,0,0,359,359,361,161,0,162,0,0,0,362,0,0,0,0],[0,0,0,0,0,436,436,361,161,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,437,436,436,361,161,0,0,0,0,0,0,0,0,0,0],[0,0,0,438,439,440,441,442,161,0,162,0,0,0,362,0,0,0,0],[0,443,274,0,0,0,0,0,0,0,0,0,0,0,0,0,443,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,444,116,445,445,8,161,0,162,0,0,0,120,0,0,16,0],[0,0,0,0,225,44,44,8,161,0,0,0,0,367,225,0,0,0,0],[0,0,0,364,116,365,445,8,161,0,162,0,0,367,120,0,0,16,0],[0,0,0,364,116,445,445,8,161,0,162,0,0,0,120,0,0,16,0],[0,0,0,0,0,0,0,0,161,0,0,0,0,0,0,0,0,0,0],[0,0,0,446,370,447,447,22,23,0,24,0,0,0,374,0,0,27,0],[0,448,0,0,0,76,449,0,23,0,24,0,0,0,78,0,448,0,0],[0,0,0,0,450,80,80,22,23,0,0,0,0,373,450,0,0,0,0],[0,0,0,369,370,371,447,22,23,0,24,0,0,373,374,0,0,27,0],[0,0,0,369,370,447,447,22,23,0,24,0,0,0,374,0,0,27,0],[0,451,90,0,0,76,449,0,23,0,24,0,0,0,78,0,451,0,0],[0,279,0,0,0,175,175,0,23,0,24,0,0,0,78,0,279,0,0],[0,279,0,375,0,175,175,0,23,0,24,0,0,0,78,0,279,0,0],[0,0,0,446,370,447,447,22,23,0,24,0,0,0,374,0,0,27,0],[0,0,0,0,450,80,80,22,23,0,0,0,0,380,450,0,0,0,0],[0,0,0,377,370,378,447,22,23,0,24,0,0,380,374,0,0,27,0],[0,0,0,377,370,447,447,22,23,0,24,0,0,0,374,0,0,27,0],[0,0,0,0,0,0,0,187,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,184,0,0],[0,0,0,0,0,452,452,295,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,453,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,76,175,386,0,23,0,24,0,0,0,78,0,0,0,0],[0,0,0,0,454,0,0,0,23,0,0,0,0,0,0,0,0,0,0],[0,0,0,455,388,456,456,32,33,0,34,0,0,0,392,0,0,37,0],[0,457,0,0,0,97,458,0,33,0,34,0,0,0,99,0,457,0,0],[0,0,0,0,459,101,101,32,33,0,0,0,0,391,459,0,0,0,0],[0,0,0,387,388,389,456,32,33,0,34,0,0,391,392,0,0,37,0],[0,0,0,387,388,456,456,32,33,0,34,0,0,0,392,0,0,37,0],[0,460,111,0,0,97,458,0,33,0,34,0,0,0,99,0,460,0,0],[0,299,0,0,0,201,201,0,33,0,34,0,0,0,99,0,299,0,0],[0,299,0,393,0,201,201,0,33,0,34,0,0,0,99,0,299,0,0],[0,0,0,455,388,456,456,32,33,0,34,0,0,0,392,0,0,37,0],[0,0,0,0,459,101,101,32,33,0,0,0,0,398,459,0,0,0,0],[0,0,0,395,388,396,456,32,33,0,34,0,0,398,392,0,0,37,0],[0,0,0,395,388,456,456,32,33,0,34,0,0,0,392,0,0,37,0],[0,0,0,0,0,0,0,213,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,210,0,0],[0,0,0,0,0,461,461,315,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,462,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,97,201,404,0,33,0,34,0,0,0,99,0,0,0,0],[0,0,0,0,463,0,0,0,33,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,318,406,406,8,9,0,10,0,0,0,322,0,0,16,0],[0,0,0,0,409,44,44,8,9,0,0,0,0,0,409,0,0,0,0],[0,0,0,464,465,466,467,8,9,0,10,0,0,468,469,0,0,16,0],[0,407,0,470,0,123,123,8,9,0,10,0,0,0,42,0,407,0,0],[0,407,0,0,0,121,471,0,9,0,10,0,0,0,42,0,407,0,0],[0,0,0,472,465,473,474,8,9,0,10,0,0,475,469,0,0,16,0],[0,0,0,0,0,0,0,239,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,236,0,0],[0,0,0,0,0,0,476,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,477,415,478,478,57,58,0,59,0,0,0,419,0,0,62,0],[0,479,0,0,0,137,480,0,58,0,59,0,0,0,139,0,479,0,0],[0,0,0,0,481,141,141,57,58,0,0,0,0,418,481,0,0,0,0],[0,0,0,414,415,416,478,57,58,0,59,0,0,418,419,0,0,62,0],[0,0,0,414,415,478,478,57,58,0,59,0,0,0,419,0,0,62,0],[0,482,151,0,0,137,480,0,58,0,59,0,0,0,139,0,482,0,0],[0,337,0,0,0,246,246,0,58,0,59,0,0,0,139,0,337,0,0],[0,337,0,420,0,246,246,0,58,0,59,0,0,0,139,0,337,0,0],[0,0,0,477,415,478,478,57,58,0,59,0,0,0,419,0,0,62,0],[0,0,0,0,481,141,141,57,58,0,0,0,0,425,481,0,0,0,0],[0,0,0,422,415,423,478,57,58,0,59,0,0,425,419,0,0,62,0],[0,0,0,422,415,478,478,57,58,0,59,0,0,0,419,0,0,62,0],[0,0,0,0,0,0,0,258,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0],[0,0,0,0,0,483,483,353,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,484,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,137,246,431,0,58,0,59,0,0,0,139,0,0,0,0],[0,0,0,0,485,0,0,0,58,0,0,0,0,0,0,0,0,0,0],[0,0,0,444,116,445,445,8,161,0,162,0,0,0,120,0,0,16,0],[0,0,0,0,225,44,44,8,161,0,0,0,0,435,225,0,0,0,0],[0,0,0,432,116,433,445,8,161,0,162,0,0,435,120,0,0,16,0],[0,0,0,432,116,445,445,8,161,0,162,0,0,0,120,0,0,16,0],[0,0,0,0,0,486,486,361,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,487,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,439,440,441,442,161,0,162,0,0,0,362,0,0,0,0],[0,0,0,0,0,440,440,442,161,0,162,0,0,0,362,0,0,0,0],[0,0,0,0,0,488,488,442,161,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,489,488,488,442,161,0,0,0,0,0,0,0,0,0,0],[0,0,0,490,491,492,493,494,161,0,162,0,0,0,362,0,0,0,0],[0,0,0,495,0,496,497,0,161,0,162,0,0,498,0,0,0,0,0],[0,0,0,0,116,445,445,8,161,0,162,0,0,0,120,0,0,16,0],[0,0,0,0,225,44,44,8,161,0,0,0,0,0,225,0,0,0,0],[0,0,0,0,370,447,447,22,23,0,24,0,0,0,374,0,0,27,0],[0,0,0,0,450,80,80,22,23,0,0,0,0,0,450,0,0,0,0],[0,0,0,499,500,501,502,22,23,0,24,0,0,503,504,0,0,27,0],[0,448,0,505,0,177,177,22,23,0,24,0,0,0,78,0,448,0,0],[0,448,0,0,0,175,506,0,23,0,24,0,0,0,78,0,448,0,0],[0,0,0,507,500,508,509,22,23,0,24,0,0,510,504,0,0,27,0],[0,0,0,0,0,0,0,295,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,292,0,0],[0,0,0,0,0,0,511,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,388,456,456,32,33,0,34,0,0,0,392,0,0,37,0],[0,0,0,0,459,101,101,32,33,0,0,0,0,0,459,0,0,0,0],[0,0,0,512,513,514,515,32,33,0,34,0,0,516,517,0,0,37,0],[0,457,0,518,0,203,203,32,33,0,34,0,0,0,99,0,457,0,0],[0,457,0,0,0,201,519,0,33,0,34,0,0,0,99,0,457,0,0],[0,0,0,520,513,521,522,32,33,0,34,0,0,523,517,0,0,37,0],[0,0,0,0,0,0,0,315,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,312,0,0],[0,0,0,0,0,0,524,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,525,465,526,526,8,9,0,10,0,0,0,469,0,0,16,0],[0,527,0,0,0,40,528,0,9,0,10,0,0,0,42,0,527,0,0],[0,0,0,0,529,44,44,8,9,0,0,0,0,468,529,0,0,0,0],[0,0,0,464,465,466,526,8,9,0,10,0,0,468,469,0,0,16,0],[0,0,0,464,465,526,526,8,9,0,10,0,0,0,469,0,0,16,0],[0,530,64,0,0,40,528,0,9,0,10,0,0,0,42,0,530,0,0],[0,407,0,0,0,121,121,0,9,0,10,0,0,0,42,0,407,0,0],[0,407,0,470,0,121,121,0,9,0,10,0,0,0,42,0,407,0,0],[0,0,0,525,465,526,526,8,9,0,10,0,0,0,469,0,0,16,0],[0,0,0,0,529,44,44,8,9,0,0,0,0,475,529,0,0,0,0],[0,0,0,472,465,473,526,8,9,0,10,0,0,475,469,0,0,16,0],[0,0,0,472,465,526,526,8,9,0,10,0,0,0,469,0,0,16,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40,0,0],[0,0,0,0,415,478,478,57,58,0,59,0,0,0,419,0,0,62,0],[0,0,0,0,481,141,141,57,58,0,0,0,0,0,481,0,0,0,0],[0,0,0,531,532,533,534,57,58,0,59,0,0,535,536,0,0,62,0],[0,479,0,537,0,248,248,57,58,0,59,0,0,0,139,0,479,0,0],[0,479,0,0,0,246,538,0,58,0,59,0,0,0,139,0,479,0,0],[0,0,0,539,532,540,541,57,58,0,59,0,0,542,536,0,0,62,0],[0,0,0,0,0,0,0,353,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,350,0,0],[0,0,0,0,0,0,543,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,361,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,358,0,0],[0,0,0,0,0,544,544,442,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,545,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,491,492,493,494,161,0,162,0,0,0,362,0,0,0,0],[0,0,0,0,0,492,492,494,161,0,162,0,0,0,362,0,0,0,0],[0,0,0,0,0,546,546,494,161,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,547,546,546,494,161,0,0,0,0,0,0,0,0,0,0],[0,0,0,548,549,368,550,0,161,0,162,0,0,0,362,0,0,0,0],[0,0,0,274,0,368,368,0,161,0,162,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,161,0,0,0,0,498,0,0,0,0,0],[0,0,0,495,0,496,368,0,161,0,162,0,0,498,0,0,0,0,0],[0,0,0,495,0,368,368,0,161,0,162,0,0,0,0,0,0,0,0],[0,0,0,551,500,552,552,22,23,0,24,0,0,0,504,0,0,27,0],[0,553,0,0,0,76,554,0,23,0,24,0,0,0,78,0,553,0,0],[0,0,0,0,555,80,80,22,23,0,0,0,0,503,555,0,0,0,0],[0,0,0,499,500,501,552,22,23,0,24,0,0,503,504,0,0,27,0],[0,0,0,499,500,552,552,22,23,0,24,0,0,0,504,0,0,27,0],[0,556,90,0,0,76,554,0,23,0,24,0,0,0,78,0,556,0,0],[0,448,0,0,0,175,175,0,23,0,24,0,0,0,78,0,448,0,0],[0,448,0,505,0,175,175,0,23,0,24,0,0,0,78,0,448,0,0],[0,0,0,551,500,552,552,22,23,0,24,0,0,0,504,0,0,27,0],[0,0,0,0,555,80,80,22,23,0,0,0,0,510,555,0,0,0,0],[0,0,0,507,500,508,552,22,23,0,24,0,0,510,504,0,0,27,0],[0,0,0,507,500,552,552,22,23,0,24,0,0,0,504,0,0,27,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,76,0,0],[0,0,0,557,513,558,558,32,33,0,34,0,0,0,517,0,0,37,0],[0,559,0,0,0,97,560,0,33,0,34,0,0,0,99,0,559,0,0],[0,0,0,0,561,101,101,32,33,0,0,0,0,516,561,0,0,0,0],[0,0,0,512,513,514,558,32,33,0,34,0,0,516,517,0,0,37,0],[0,0,0,512,513,558,558,32,33,0,34,0,0,0,517,0,0,37,0],[0,562,111,0,0,97,560,0,33,0,34,0,0,0,99,0,562,0,0],[0,457,0,0,0,201,201,0,33,0,34,0,0,0,99,0,457,0,0],[0,457,0,518,0,201,201,0,33,0,34,0,0,0,99,0,457,0,0],[0,0,0,557,513,558,558,32,33,0,34,0,0,0,517,0,0,37,0],[0,0,0,0,561,101,101,32,33,0,0,0,0,523,561,0,0,0,0],[0,0,0,520,513,521,558,32,33,0,34,0,0,523,517,0,0,37,0],[0,0,0,520,513,558,558,32,33,0,34,0,0,0,517,0,0,37,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,97,0,0],[0,0,0,0,465,526,526,8,9,0,10,0,0,0,469,0,0,16,0],[0,0,0,0,529,44,44,8,9,0,0,0,0,0,529,0,0,0,0],[0,0,0,563,66,564,565,8,9,0,10,0,0,566,68,0,0,16,0],[0,527,0,567,0,123,123,8,9,0,10,0,0,0,42,0,527,0,0],[0,527,0,0,0,121,568,0,9,0,10,0,0,0,42,0,527,0,0],[0,0,0,569,66,570,571,8,9,0,10,0,0,572,68,0,0,16,0],[0,0,0,573,532,574,574,57,58,0,59,0,0,0,536,0,0,62,0],[0,575,0,0,0,137,576,0,58,0,59,0,0,0,139,0,575,0,0],[0,0,0,0,577,141,141,57,58,0,0,0,0,535,577,0,0,0,0],[0,0,0,531,532,533,574,57,58,0,59,0,0,535,536,0,0,62,0],[0,0,0,531,532,574,574,57,58,0,59,0,0,0,536,0,0,62,0],[0,578,151,0,0,137,576,0,58,0,59,0,0,0,139,0,578,0,0],[0,479,0,0,0,246,246,0,58,0,59,0,0,0,139,0,479,0,0],[0,479,0,537,0,246,246,0,58,0,59,0,0,0,139,0,479,0,0],[0,0,0,573,532,574,574,57,58,0,59,0,0,0,536,0,0,62,0],[0,0,0,0,577,141,141,57,58,0,0,0,0,542,577,0,0,0,0],[0,0,0,539,532,540,574,57,58,0,59,0,0,542,536,0,0,62,0],[0,0,0,539,532,574,574,57,58,0,59,0,0,0,536,0,0,62,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,137,0,0],[0,0,0,0,0,0,0,442,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,439,0,0],[0,0,0,0,0,579,579,494,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,580,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,549,368,550,0,161,0,162,0,0,0,362,0,0,0,0],[0,0,0,0,0,368,368,0,161,0,162,0,0,0,362,0,0,0,0],[0,0,0,0,581,0,0,0,161,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,500,552,552,22,23,0,24,0,0,0,504,0,0,27,0],[0,0,0,0,555,80,80,22,23,0,0,0,0,0,555,0,0,0,0],[0,0,0,582,91,583,584,22,23,0,24,0,0,585,93,0,0,27,0],[0,553,0,586,0,177,177,22,23,0,24,0,0,0,78,0,553,0,0],[0,553,0,0,0,175,587,0,23,0,24,0,0,0,78,0,553,0,0],[0,0,0,588,91,589,590,22,23,0,24,0,0,591,93,0,0,27,0],[0,0,0,0,513,558,558,32,33,0,34,0,0,0,517,0,0,37,0],[0,0,0,0,561,101,101,32,33,0,0,0,0,0,561,0,0,0,0],[0,0,0,592,112,593,594,32,33,0,34,0,0,595,114,0,0,37,0],[0,559,0,596,0,203,203,32,33,0,34,0,0,0,99,0,559,0,0],[0,559,0,0,0,201,597,0,33,0,34,0,0,0,99,0,559,0,0],[0,0,0,598,112,599,600,32,33,0,34,0,0,601,114,0,0,37,0],[0,0,0,602,66,67,67,8,9,0,10,0,0,0,68,0,0,16,0],[0,0,0,0,165,44,44,8,9,0,0,0,0,566,165,0,0,0,0],[0,0,0,563,66,564,67,8,9,0,10,0,0,566,68,0,0,16,0],[0,0,0,563,66,67,67,8,9,0,10,0,0,0,68,0,0,16,0],[0,527,0,0,0,121,121,0,9,0,10,0,0,0,42,0,527,0,0],[0,527,0,567,0,121,121,0,9,0,10,0,0,0,42,0,527,0,0],[0,0,0,602,66,67,67,8,9,0,10,0,0,0,68,0,0,16,0],[0,0,0,0,165,44,44,8,9,0,0,0,0,572,165,0,0,0,0],[0,0,0,569,66,570,67,8,9,0,10,0,0,572,68,0,0,16,0],[0,0,0,569,66,67,67,8,9,0,10,0,0,0,68,0,0,16,0],[0,0,0,0,532,574,574,57,58,0,59,0,0,0,536,0,0,62,0],[0,0,0,0,577,141,141,57,58,0,0,0,0,0,577,0,0,0,0],[0,0,0,603,152,604,605,57,58,0,59,0,0,606,154,0,0,62,0],[0,575,0,607,0,248,248,57,58,0,59,0,0,0,139,0,575,0,0],[0,575,0,0,0,246,608,0,58,0,59,0,0,0,139,0,575,0,0],[0,0,0,609,152,610,611,57,58,0,59,0,0,612,154,0,0,62,0],[0,0,0,0,0,0,0,494,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,491,0,0],[0,0,0,0,0,0,613,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,614,91,92,92,22,23,0,24,0,0,0,93,0,0,27,0],[0,0,0,0,194,80,80,22,23,0,0,0,0,585,194,0,0,0,0],[0,0,0,582,91,583,92,22,23,0,24,0,0,585,93,0,0,27,0],[0,0,0,582,91,92,92,22,23,0,24,0,0,0,93,0,0,27,0],[0,553,0,0,0,175,175,0,23,0,24,0,0,0,78,0,553,0,0],[0,553,0,586,0,175,175,0,23,0,24,0,0,0,78,0,553,0,0],[0,0,0,614,91,92,92,22,23,0,24,0,0,0,93,0,0,27,0],[0,0,0,0,194,80,80,22,23,0,0,0,0,591,194,0,0,0,0],[0,0,0,588,91,589,92,22,23,0,24,0,0,591,93,0,0,27,0],[0,0,0,588,91,92,92,22,23,0,24,0,0,0,93,0,0,27,0],[0,0,0,615,112,113,113,32,33,0,34,0,0,0,114,0,0,37,0],[0,0,0,0,220,101,101,32,33,0,0,0,0,595,220,0,0,0,0],[0,0,0,592,112,593,113,32,33,0,34,0,0,595,114,0,0,37,0],[0,0,0,592,112,113,113,32,33,0,34,0,0,0,114,0,0,37,0],[0,559,0,0,0,201,201,0,33,0,34,0,0,0,99,0,559,0,0],[0,559,0,596,0,201,201,0,33,0,34,0,0,0,99,0,559,0,0],[0,0,0,615,112,113,113,32,33,0,34,0,0,0,114,0,0,37,0],[0,0,0,0,220,101,101,32,33,0,0,0,0,601,220,0,0,0,0],[0,0,0,598,112,599,113,32,33,0,34,0,0,601,114,0,0,37,0],[0,0,0,598,112,113,113,32,33,0,34,0,0,0,114,0,0,37,0],[0,0,0,0,66,67,67,8,9,0,10,0,0,0,68,0,0,16,0],[0,0,0,616,152,153,153,57,58,0,59,0,0,0,154,0,0,62,0],[0,0,0,0,265,141,141,57,58,0,0,0,0,606,265,0,0,0,0],[0,0,0,603,152,604,153,57,58,0,59,0,0,606,154,0,0,62,0],[0,0,0,603,152,153,153,57,58,0,59,0,0,0,154,0,0,62,0],[0,575,0,0,0,246,246,0,58,0,59,0,0,0,139,0,575,0,0],[0,575,0,607,0,246,246,0,58,0,59,0,0,0,139,0,575,0,0],[0,0,0,616,152,153,153,57,58,0,59,0,0,0,154,0,0,62,0],[0,0,0,0,265,141,141,57,58,0,0,0,0,612,265,0,0,0,0],[0,0,0,609,152,610,153,57,58,0,59,0,0,612,154,0,0,62,0],[0,0,0,609,152,153,153,57,58,0,59,0,0,0,154,0,0,62,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,549,0,0],[0,0,0,0,91,92,92,22,23,0,24,0,0,0,93,0,0,27,0],[0,0,0,0,112,113,113,32,33,0,34,0,0,0,114,0,0,37,0],[0,0,0,0,152,153,153,57,58,0,59,0,0,0,154,0,0,62,0]],"accepting":[false,true,true,true,true,true,false,false,true,true,true,true,true,true,true,true,true,true,true,true,false,true,true,true,true,true,true,true,true,true,false,true,true,true,true,true,true,true,true,true,true,true,false,true,false,true,true,false,false,true,true,true,true,true,true,false,false,true,true,true,true,true,true,true,true,true,true,false,true,true,false,true,true,true,false,true,true,true,false,true,false,true,true,false,false,true,true,true,true,true,true,true,false,true,true,false,true,true,true,false,true,false,true,true,false,false,true,true,true,true,true,true,true,false,true,true,true,false,true,true,true,false,true,false,true,true,false,false,false,true,true,false,false,true,true,true,true,true,true,false,true,false,true,true,false,false,true,true,true,true,true,true,true,false,true,true,false,true,true,true,true,true,true,true,true,true,true,true,true,true,true,false,true,true,true,false,true,false,true,true,false,false,false,true,true,false,false,true,true,true,false,true,true,true,true,true,true,false,true,true,true,false,true,false,true,true,false,false,false,true,true,false,false,true,true,true,false,true,true,true,true,true,false,true,true,true,true,true,false,true,true,false,false,false,false,true,true,false,false,true,true,true,false,true,true,true,false,true,false,true,true,false,false,false,true,true,false,false,true,true,true,false,true,true,true,true,false,true,false,true,true,true,true,true,true,true,true,true,false,true,true,true,true,true,false,true,true,false,false,false,false,true,true,false,false,true,true,true,false,true,true,true,true,true,false,true,true,false,false,false,false,true,true,false,false,true,true,true,true,false,true,true,true,true,true,true,false,true,true,false,false,false,false,true,false,true,false,true,true,true,true,true,false,true,true,false,false,false,false,true,true,false,false,true,true,true,false,true,true,false,false,true,false,true,true,false,true,true,false,true,true,false,true,true,true,true,true,true,false,true,true,false,false,false,false,true,false,true,true,false,true,true,true,true,true,true,false,true,true,false,false,false,false,true,false,true,false,true,true,true,true,false,false,false,true,true,false,true,true,true,true,true,true,false,true,true,false,false,false,false,true,false,true,false,true,true,false,false,true,true,false,false,true,true,true,false,true,false,true,true,true,true,false,false,false,true,false,true,true,true,true,false,false,false,true,true,false,true,true,true,true,true,true,false,true,true,false,true,false,true,true,true,true,false,false,false,false,false,false,false,true,true,false,false,true,true,false,true,true,true,true,false,true,true,true,true,true,true,false,true,true,false,true,true,false,true,true,true,true,true,true,false,true,true,false,true,false,true,true,true,true,true,true,false,true,true,true,true,true,true,false,true,true,false,false,false,false,false,true,true,false,true,false,true,true,true,true,true,false,true,true,true,true,true,false,true,true,true,true,true,false,true,true,true,false,true,true,true,true,false,false,false,true,false,true,true,true,true,true,false,true,true,true,false,true,true,true,true,true,false,true,true,true,true,false,true,true,true,true,true,false,true,true,false,true,true,true],"tags":[[],["broken_cluster"],["consonant_syllable"],["vowel_syllable"],["broken_cluster"],["broken_cluster"],[],[],["broken_cluster"],["broken_cluster"],["broken_cluster"],["standalone_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],["consonant_syllable"],["broken_cluster"],["symbol_cluster"],["consonant_syllable"],["consonant_syllable"],[],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],["vowel_syllable"],["vowel_syllable"],[],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],[],["broken_cluster"],[],["broken_cluster"],["broken_cluster"],[],[],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],["standalone_cluster"],["standalone_cluster"],[],[],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],["broken_cluster"],["broken_cluster"],["consonant_syllable","broken_cluster"],["broken_cluster"],[],["broken_cluster"],["symbol_cluster"],[],["symbol_cluster"],["symbol_cluster"],["consonant_syllable"],[],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],[],["consonant_syllable"],[],["consonant_syllable"],["consonant_syllable"],[],[],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],[],["consonant_syllable"],["vowel_syllable"],[],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],[],["vowel_syllable"],[],["vowel_syllable"],["vowel_syllable"],[],[],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],[],["vowel_syllable"],["broken_cluster"],["broken_cluster"],[],["broken_cluster"],["broken_cluster"],["broken_cluster"],[],["broken_cluster"],[],["broken_cluster"],["broken_cluster"],[],[],[],["broken_cluster"],["broken_cluster"],[],[],["broken_cluster"],["broken_cluster"],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],[],["standalone_cluster"],[],["standalone_cluster"],["standalone_cluster"],[],[],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],[],["standalone_cluster"],["broken_cluster"],[],["broken_cluster"],["broken_cluster"],["consonant_syllable"],["consonant_syllable"],["consonant_syllable","broken_cluster"],["consonant_syllable","broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],["symbol_cluster"],["symbol_cluster"],["symbol_cluster"],["consonant_syllable"],["consonant_syllable"],[],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],[],["consonant_syllable"],[],["consonant_syllable"],["consonant_syllable"],[],[],[],["consonant_syllable"],["consonant_syllable"],[],[],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],[],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],["vowel_syllable"],["vowel_syllable"],[],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],[],["vowel_syllable"],[],["vowel_syllable"],["vowel_syllable"],[],[],[],["vowel_syllable"],["vowel_syllable"],[],[],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],[],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],["broken_cluster"],[],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],[],["broken_cluster"],["broken_cluster"],[],[],[],[],["broken_cluster"],["broken_cluster"],[],[],["broken_cluster"],["standalone_cluster"],["standalone_cluster"],[],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],[],["standalone_cluster"],[],["standalone_cluster"],["standalone_cluster"],[],[],[],["standalone_cluster"],["standalone_cluster"],[],[],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],[],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],[],["broken_cluster"],[],["consonant_syllable","broken_cluster"],["consonant_syllable","broken_cluster"],["consonant_syllable","broken_cluster"],["consonant_syllable","broken_cluster"],["consonant_syllable","broken_cluster"],["consonant_syllable","broken_cluster"],["broken_cluster"],["symbol_cluster"],["consonant_syllable"],[],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],[],["consonant_syllable"],["consonant_syllable"],[],[],[],[],["consonant_syllable"],["consonant_syllable"],[],[],["consonant_syllable"],["consonant_syllable"],["vowel_syllable"],[],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],[],["vowel_syllable"],["vowel_syllable"],[],[],[],[],["vowel_syllable"],["vowel_syllable"],[],[],["vowel_syllable"],["vowel_syllable"],["broken_cluster"],["broken_cluster"],[],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],[],["broken_cluster"],["broken_cluster"],[],[],[],[],["broken_cluster"],[],["standalone_cluster"],[],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],[],["standalone_cluster"],["standalone_cluster"],[],[],[],[],["standalone_cluster"],["standalone_cluster"],[],[],["standalone_cluster"],["standalone_cluster"],["consonant_syllable","broken_cluster"],[],["consonant_syllable","broken_cluster"],["consonant_syllable","broken_cluster"],[],[],["consonant_syllable","broken_cluster"],[],["consonant_syllable","broken_cluster"],["consonant_syllable","broken_cluster"],[],["consonant_syllable","broken_cluster"],["consonant_syllable","broken_cluster"],[],["consonant_syllable"],["consonant_syllable"],[],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],[],["consonant_syllable"],["consonant_syllable"],[],[],[],[],["consonant_syllable"],[],["vowel_syllable"],["vowel_syllable"],[],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],[],["vowel_syllable"],["vowel_syllable"],[],[],[],[],["vowel_syllable"],[],["broken_cluster"],[],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],[],[],[],["standalone_cluster"],["standalone_cluster"],[],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],[],["standalone_cluster"],["standalone_cluster"],[],[],[],[],["standalone_cluster"],[],["consonant_syllable","broken_cluster"],[],["consonant_syllable","broken_cluster"],["consonant_syllable","broken_cluster"],[],[],["consonant_syllable","broken_cluster"],["consonant_syllable","broken_cluster"],[],[],["consonant_syllable","broken_cluster"],["consonant_syllable","broken_cluster"],["consonant_syllable","broken_cluster"],[],["consonant_syllable"],[],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],[],[],[],["vowel_syllable"],[],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],[],[],[],["broken_cluster"],["broken_cluster"],[],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],[],["broken_cluster"],["broken_cluster"],[],["standalone_cluster"],[],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],[],[],[],[],[],[],[],["consonant_syllable","broken_cluster"],["consonant_syllable","broken_cluster"],[],[],["consonant_syllable","broken_cluster"],["consonant_syllable","broken_cluster"],[],["consonant_syllable","broken_cluster"],["consonant_syllable","broken_cluster"],["consonant_syllable"],["consonant_syllable"],[],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],[],["consonant_syllable"],["consonant_syllable"],[],["vowel_syllable"],["vowel_syllable"],[],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],[],["vowel_syllable"],["vowel_syllable"],[],["broken_cluster"],[],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],["standalone_cluster"],["standalone_cluster"],[],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],[],["standalone_cluster"],["standalone_cluster"],[],[],[],[],[],["consonant_syllable","broken_cluster"],["consonant_syllable","broken_cluster"],[],["consonant_syllable"],[],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],["vowel_syllable"],[],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],["broken_cluster"],[],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],[],["broken_cluster"],["broken_cluster"],["standalone_cluster"],[],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],[],[],[],["consonant_syllable"],[],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],[],["consonant_syllable"],["consonant_syllable"],["vowel_syllable"],[],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],[],["vowel_syllable"],["vowel_syllable"],["broken_cluster"],["standalone_cluster"],[],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],[],["standalone_cluster"],["standalone_cluster"],[],["consonant_syllable"],["vowel_syllable"],["standalone_cluster"]]}');var Gu={};Gu=JSON.parse('{"categories":["O","IND","S","GB","B","FM","CGJ","VMAbv","VMPst","VAbv","VPst","CMBlw","VPre","VBlw","H","VMBlw","CMAbv","MBlw","CS","R","SUB","MPst","MPre","FAbv","FPst","FBlw","SMAbv","SMBlw","VMPre","ZWNJ","ZWJ","WJ","VS","N","HN","MAbv"],"decompositions":{"2507":[2503,2494],"2508":[2503,2519],"2888":[2887,2902],"2891":[2887,2878],"2892":[2887,2903],"3018":[3014,3006],"3019":[3015,3006],"3020":[3014,3031],"3144":[3142,3158],"3264":[3263,3285],"3271":[3270,3285],"3272":[3270,3286],"3274":[3270,3266],"3275":[3270,3266,3285],"3402":[3398,3390],"3403":[3399,3390],"3404":[3398,3415],"3546":[3545,3530],"3548":[3545,3535],"3549":[3545,3535,3530],"3550":[3545,3551],"3635":[3661,3634],"3763":[3789,3762],"3955":[3953,3954],"3957":[3953,3956],"3958":[4018,3968],"3959":[4018,3953,3968],"3960":[4019,3968],"3961":[4019,3953,3968],"3969":[3953,3968],"6971":[6970,6965],"6973":[6972,6965],"6976":[6974,6965],"6977":[6975,6965],"6979":[6978,6965],"69934":[69937,69927],"69935":[69938,69927],"70475":[70471,70462],"70476":[70471,70487],"70843":[70841,70842],"70844":[70841,70832],"70846":[70841,70845],"71098":[71096,71087],"71099":[71097,71087]},"stateTable":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[2,2,3,4,4,5,0,6,7,8,9,10,11,12,13,14,15,16,0,17,18,11,19,20,21,22,0,0,23,0,0,2,0,24,0,25],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,26,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,27,28,0,0,0,0,27,0,0,0],[0,0,0,0,0,29,0,30,31,32,33,34,35,36,37,38,39,40,0,0,41,35,42,43,44,45,0,0,46,0,0,0,39,0,0,47],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,5,0,6,7,0,0,0,0,0,0,14,0,0,0,0,0,0,0,20,21,22,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,5,0,0,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20,21,22,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,5,0,6,7,8,9,0,0,12,0,14,0,0,0,0,0,0,0,20,21,22,0,0,23,0,0,0,0,0,0,0],[0,0,0,0,0,5,0,6,7,0,9,0,0,0,0,14,0,0,0,0,0,0,0,20,21,22,0,0,23,0,0,0,0,0,0,0],[0,0,0,0,0,5,0,6,7,8,9,10,11,12,13,14,0,16,0,0,18,11,19,20,21,22,0,0,23,0,0,0,0,0,0,25],[0,0,0,0,0,5,0,6,7,8,9,0,11,12,0,14,0,0,0,0,0,0,0,20,21,22,0,0,23,0,0,0,0,0,0,0],[0,0,0,0,0,5,0,6,7,0,9,0,0,12,0,14,0,0,0,0,0,0,0,20,21,22,0,0,23,0,0,0,0,0,0,0],[0,0,0,0,18,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,5,0,0,7,0,0,0,0,0,0,14,0,0,0,0,0,0,0,20,21,22,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,5,0,6,7,8,9,10,11,12,13,14,15,16,0,0,18,11,19,20,21,22,0,0,23,0,0,0,0,0,0,25],[0,0,0,0,0,5,0,6,7,8,9,0,11,12,0,14,0,0,0,0,0,11,0,20,21,22,0,0,23,0,0,0,0,0,0,0],[0,0,0,4,4,5,0,6,7,8,9,10,11,12,13,14,15,16,0,0,18,11,19,20,21,22,0,0,23,0,0,0,0,0,0,25],[0,0,0,0,0,5,0,6,7,8,9,48,11,12,13,14,48,16,0,0,18,11,19,20,21,22,0,0,23,0,0,0,49,0,0,25],[0,0,0,0,0,5,0,6,7,8,9,0,11,12,0,14,0,16,0,0,0,11,0,20,21,22,0,0,23,0,0,0,0,0,0,25],[0,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20,21,22,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,21,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,21,22,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,5,0,6,7,0,0,0,0,0,0,14,0,0,0,0,0,0,0,20,21,22,0,0,23,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,50,0,51,0],[0,0,0,0,0,5,0,6,7,8,9,0,11,12,0,14,0,16,0,0,0,11,0,20,21,22,0,0,23,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,27,28,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,28,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,29,0,30,31,0,0,0,0,0,0,38,0,0,0,0,0,0,0,43,44,45,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,29,0,0,31,0,0,0,0,0,0,0,0,0,0,0,0,0,0,43,44,45,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,29,0,30,31,32,33,0,0,36,0,38,0,0,0,0,0,0,0,43,44,45,0,0,46,0,0,0,0,0,0,0],[0,0,0,0,0,29,0,30,31,0,33,0,0,0,0,38,0,0,0,0,0,0,0,43,44,45,0,0,46,0,0,0,0,0,0,0],[0,0,0,0,0,29,0,30,31,32,33,34,35,36,37,38,0,40,0,0,41,35,42,43,44,45,0,0,46,0,0,0,0,0,0,47],[0,0,0,0,0,29,0,30,31,32,33,0,35,36,0,38,0,0,0,0,0,0,0,43,44,45,0,0,46,0,0,0,0,0,0,0],[0,0,0,0,0,29,0,30,31,0,33,0,0,36,0,38,0,0,0,0,0,0,0,43,44,45,0,0,46,0,0,0,0,0,0,0],[0,0,0,0,41,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,29,0,0,31,0,0,0,0,0,0,38,0,0,0,0,0,0,0,43,44,45,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,29,0,30,31,32,33,34,35,36,37,38,39,40,0,0,41,35,42,43,44,45,0,0,46,0,0,0,0,0,0,47],[0,0,0,0,0,29,0,30,31,32,33,0,35,36,0,38,0,0,0,0,0,35,0,43,44,45,0,0,46,0,0,0,0,0,0,0],[0,0,0,0,0,29,0,30,31,32,33,52,35,36,37,38,52,40,0,0,41,35,42,43,44,45,0,0,46,0,0,0,53,0,0,47],[0,0,0,0,0,29,0,30,31,32,33,0,35,36,0,38,0,40,0,0,0,35,0,43,44,45,0,0,46,0,0,0,0,0,0,47],[0,0,0,0,0,29,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,43,44,45,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,29,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,44,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,29,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,44,45,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,29,0,30,31,0,0,0,0,0,0,38,0,0,0,0,0,0,0,43,44,45,0,0,46,0,0,0,0,0,0,0],[0,0,0,0,0,29,0,30,31,32,33,0,35,36,0,38,0,40,0,0,0,35,0,43,44,45,0,0,46,0,0,0,0,0,0,0],[0,0,0,0,0,5,0,6,7,8,9,48,11,12,13,14,0,16,0,0,18,11,19,20,21,22,0,0,23,0,0,0,0,0,0,25],[0,0,0,0,0,5,0,6,7,8,9,48,11,12,13,14,48,16,0,0,18,11,19,20,21,22,0,0,23,0,0,0,0,0,0,25],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,51,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,54,0,0],[0,0,0,0,0,29,0,30,31,32,33,52,35,36,37,38,0,40,0,0,41,35,42,43,44,45,0,0,46,0,0,0,0,0,0,47],[0,0,0,0,0,29,0,30,31,32,33,52,35,36,37,38,52,40,0,0,41,35,42,43,44,45,0,0,46,0,0,0,0,0,0,47],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,50,0,51,0]],"accepting":[false,true,true,true,true,true,true,true,true,true,true,true,true,false,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true],"tags":[[],["broken_cluster"],["independent_cluster"],["symbol_cluster"],["standard_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],[],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],["numeral_cluster"],["broken_cluster"],["independent_cluster"],["symbol_cluster"],["symbol_cluster"],["standard_cluster"],["standard_cluster"],["standard_cluster"],["standard_cluster"],["standard_cluster"],["standard_cluster"],["standard_cluster"],["standard_cluster"],["virama_terminated_cluster"],["standard_cluster"],["standard_cluster"],["standard_cluster"],["standard_cluster"],["standard_cluster"],["standard_cluster"],["standard_cluster"],["standard_cluster"],["standard_cluster"],["standard_cluster"],["broken_cluster"],["broken_cluster"],["numeral_cluster"],["number_joiner_terminated_cluster"],["standard_cluster"],["standard_cluster"],["numeral_cluster"]]}');const gt={X:1,C:2,V:4,N:8,H:16,ZWNJ:32,ZWJ:64,M:128,SM:256,VD:512,A:1024,Placeholder:2048,Dotted_Circle:4096,RS:8192,Coeng:16384,Repha:32768,Ra:65536,CM:131072,Symbol:262144},it={Start:1,Ra_To_Become_Reph:2,Pre_M:4,Pre_C:8,Base_C:16,After_Main:32,Above_C:64,Before_Sub:128,Below_C:256,After_Sub:512,Before_Post:1024,Post_C:2048,After_Post:4096,Final_C:8192,SMVD:16384,End:32768},tX=gt.C|gt.Ra|gt.CM|gt.V|gt.Placeholder|gt.Dotted_Circle,Lw=gt.ZWJ|gt.ZWNJ,tl=gt.H|gt.Coeng,eb={Default:{hasOldSpec:!1,virama:0,basePos:"Last",rephPos:it.Before_Post,rephMode:"Implicit",blwfMode:"Pre_And_Post"},Devanagari:{hasOldSpec:!0,virama:2381,basePos:"Last",rephPos:it.Before_Post,rephMode:"Implicit",blwfMode:"Pre_And_Post"},Bengali:{hasOldSpec:!0,virama:2509,basePos:"Last",rephPos:it.After_Sub,rephMode:"Implicit",blwfMode:"Pre_And_Post"},Gurmukhi:{hasOldSpec:!0,virama:2637,basePos:"Last",rephPos:it.Before_Sub,rephMode:"Implicit",blwfMode:"Pre_And_Post"},Gujarati:{hasOldSpec:!0,virama:2765,basePos:"Last",rephPos:it.Before_Post,rephMode:"Implicit",blwfMode:"Pre_And_Post"},Oriya:{hasOldSpec:!0,virama:2893,basePos:"Last",rephPos:it.After_Main,rephMode:"Implicit",blwfMode:"Pre_And_Post"},Tamil:{hasOldSpec:!0,virama:3021,basePos:"Last",rephPos:it.After_Post,rephMode:"Implicit",blwfMode:"Pre_And_Post"},Telugu:{hasOldSpec:!0,virama:3149,basePos:"Last",rephPos:it.After_Post,rephMode:"Explicit",blwfMode:"Post_Only"},Kannada:{hasOldSpec:!0,virama:3277,basePos:"Last",rephPos:it.After_Post,rephMode:"Implicit",blwfMode:"Post_Only"},Malayalam:{hasOldSpec:!0,virama:3405,basePos:"Last",rephPos:it.After_Main,rephMode:"Log_Repha",blwfMode:"Pre_And_Post"},Khmer:{hasOldSpec:!1,virama:6098,basePos:"First",rephPos:it.Ra_To_Become_Reph,rephMode:"Vis_Repha",blwfMode:"Pre_And_Post"}},nX={6078:[6081,6078],6079:[6081,6079],6080:[6081,6080],6084:[6081,6084],6085:[6081,6085]},{decompositions:rX}=Bu(Gu),Iw=new ku(Md("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")),iX=new j2(Bu(Tw));class on extends Zi{static planFeatures(e){e.addStage(sX),e.addStage(["locl","ccmp"]),e.addStage(aX),e.addStage("nukt"),e.addStage("akhn"),e.addStage("rphf",!1),e.addStage("rkrf"),e.addStage("pref",!1),e.addStage("blwf",!1),e.addStage("abvf",!1),e.addStage("half",!1),e.addStage("pstf",!1),e.addStage("vatu"),e.addStage("cjct"),e.addStage("cfar",!1),e.addStage(lX),e.addStage({local:["init"],global:["pres","abvs","blws","psts","haln","dist","abvm","blwm","calt","clig"]}),e.unicodeScript=ZW(e.script),e.indicConfig=eb[e.unicodeScript]||eb.Default,e.isOldSpec=e.indicConfig.hasOldSpec&&e.script[e.script.length-1]!=="2"}static assignFeatures(e,t){for(let n=t.length-1;n>=0;n--){let i=t[n].codePoints[0],s=nX[i]||rX[i];if(s){let o=s.map(a=>{let c=e.font.glyphForCodePoint(a);return new Lr(e.font,c.id,[a],t[n].features)});t.splice(n,1,...o)}}}}Jn(on,"zeroMarkWidths","NONE");function Ef(r){return Iw.get(r.codePoints[0])>>8}function Dw(r){return 1<<(Iw.get(r.codePoints[0])&255)}class Nc{constructor(e,t,n,i){this.category=e,this.position=t,this.syllableType=n,this.syllable=i}}function sX(r,e){let t=0,n=0;for(let[i,s,o]of iX.match(e.map(Ef))){if(i>n){++t;for(let a=n;a<i;a++)e[a].shaperInfo=new Nc(gt.X,it.End,"non_indic_cluster",t)}++t;for(let a=i;a<=s;a++)e[a].shaperInfo=new Nc(1<<Ef(e[a]),Dw(e[a]),o[0],t);n=s+1}if(n<e.length){++t;for(let i=n;i<e.length;i++)e[i].shaperInfo=new Nc(gt.X,it.End,"non_indic_cluster",t)}}function fs(r){return r.shaperInfo.category&tX}function Nr(r){return r.shaperInfo.category&Lw}function hi(r){return r.shaperInfo.category&tl}function di(r,e){for(let n of r)n.features={[e]:!0};return r[0]._font._layoutEngine.engine.GSUBProcessor.applyFeatures([e],r),r.length===1}function oX(r,e,t){let n=[t,e,t];return di(n.slice(0,2),"blwf")||di(n.slice(1,3),"blwf")?it.Below_C:di(n.slice(0,2),"pstf")||di(n.slice(1,3),"pstf")||di(n.slice(0,2),"pref")||di(n.slice(1,3),"pref")?it.Post_C:it.Base_C}function aX(r,e,t){let n=t.indicConfig,i=r._layoutEngine.engine.GSUBProcessor.features,s=r.glyphForCodePoint(9676).id,o=r.glyphForCodePoint(n.virama).id;if(o){let a=new Lr(r,o,[n.virama]);for(let c=0;c<e.length;c++)e[c].shaperInfo.position===it.Base_C&&(e[c].shaperInfo.position=oX(r,e[c].copy(),a))}for(let a=0,c=cu(e,0);a<e.length;a=c,c=cu(e,a)){let{category:u,syllableType:f}=e[a].shaperInfo;if(f==="symbol_cluster"||f==="non_indic_cluster")continue;if(f==="broken_cluster"&&s){let E=new Lr(r,s,[9676]);E.shaperInfo=new Nc(1<<Ef(E),Dw(E),e[a].shaperInfo.syllableType,e[a].shaperInfo.syllable);let P=a;for(;P<c&&e[P].shaperInfo.category===gt.Repha;)P++;e.splice(P++,0,E),c++}let d=c,m=a,v=!1;if(n.rephPos!==it.Ra_To_Become_Reph&&i.rphf&&a+3<=c&&(n.rephMode==="Implicit"&&!Nr(e[a+2])||n.rephMode==="Explicit"&&e[a+2].shaperInfo.category===gt.ZWJ)){let E=[e[a].copy(),e[a+1].copy(),e[a+2].copy()];if(di(E.slice(0,2),"rphf")||n.rephMode==="Explicit"&&di(E,"rphf")){for(m+=2;m<c&&Nr(e[m]);)m++;d=a,v=!0}}else if(n.rephMode==="Log_Repha"&&e[a].shaperInfo.category===gt.Repha){for(m++;m<c&&Nr(e[m]);)m++;d=a,v=!0}switch(n.basePos){case"Last":{let E=c,P=!1;do{let y=e[--E].shaperInfo;if(fs(e[E])){if(y.position!==it.Below_C&&(y.position!==it.Post_C||P)){d=E;break}y.position===it.Below_C&&(P=!0),d=E}else if(a<E&&y.category===gt.ZWJ&&e[E-1].shaperInfo.category===gt.H)break}while(E>m);break}case"First":d=a;for(let E=d+1;E<c;E++)fs(e[E])&&(e[E].shaperInfo.position=it.Below_C)}v&&d===a&&m-d<=2&&(v=!1);for(let E=a;E<d;E++){let P=e[E].shaperInfo;P.position=Math.min(it.Pre_C,P.position)}d<c&&(e[d].shaperInfo.position=it.Base_C);for(let E=d+1;E<c;E++)if(e[E].shaperInfo.category===gt.M){for(let P=E+1;P<c;P++)if(fs(e[P])){e[P].shaperInfo.position=it.Final_C;break}break}if(v&&(e[a].shaperInfo.position=it.Ra_To_Become_Reph),t.isOldSpec){let E=t.unicodeScript!=="Malayalam";for(let P=d+1;P<c;P++)if(e[P].shaperInfo.category===gt.H){let y;for(y=c-1;y>P&&!(fs(e[y])||E&&e[y].shaperInfo.category===gt.H);y--);if(e[y].shaperInfo.category!==gt.H&&y>P){let k=e[P];e.splice(P,0,...e.splice(P+1,y-P)),e[y]=k}break}}let S=it.Start;for(let E=a;E<c;E++){let P=e[E].shaperInfo;if(P.category&(Lw|gt.N|gt.RS|gt.CM|tl&P.category)){if(P.position=S,P.category===gt.H&&P.position===it.Pre_M){for(let y=E;y>a;y--)if(e[y-1].shaperInfo.position!==it.Pre_M){P.position=e[y-1].shaperInfo.position;break}}}else P.position!==it.SMVD&&(S=P.position)}let x=d;for(let E=d+1;E<c;E++)if(fs(e[E])){for(let P=x+1;P<E;P++)e[P].shaperInfo.position<it.SMVD&&(e[P].shaperInfo.position=e[E].shaperInfo.position);x=E}else e[E].shaperInfo.category===gt.M&&(x=E);let w=e.slice(a,c);w.sort((E,P)=>E.shaperInfo.position-P.shaperInfo.position),e.splice(a,w.length,...w);for(let E=a;E<c;E++)if(e[E].shaperInfo.position===it.Base_C){d=E;break}for(let E=a;E<c&&e[E].shaperInfo.position===it.Ra_To_Become_Reph;E++)e[E].features.rphf=!0;let A=!t.isOldSpec&&n.blwfMode==="Pre_And_Post";for(let E=a;E<d;E++)e[E].features.half=!0,A&&(e[E].features.blwf=!0);for(let E=d+1;E<c;E++)e[E].features.abvf=!0,e[E].features.pstf=!0,e[E].features.blwf=!0;if(t.isOldSpec&&t.unicodeScript==="Devanagari")for(let E=a;E+1<d;E++)e[E].shaperInfo.category===gt.Ra&&e[E+1].shaperInfo.category===gt.H&&(E+1===d||e[E+2].shaperInfo.category===gt.ZWJ)&&(e[E].features.blwf=!0,e[E+1].features.blwf=!0);let T=2;if(i.pref&&d+T<c)for(let E=d+1;E+T-1<c;E++){let P=[e[E].copy(),e[E+1].copy()];if(di(P,"pref")){for(let y=0;y<T;y++)e[E++].features.pref=!0;if(i.cfar)for(;E<c;E++)e[E].features.cfar=!0;break}}for(let E=a+1;E<c;E++)if(Nr(e[E])){let P=e[E].shaperInfo.category===gt.ZWNJ,y=E;do y--,P&&delete e[y].features.half;while(y>a&&!fs(e[y]))}}}function lX(r,e,t){let n=t.indicConfig,i=r._layoutEngine.engine.GSUBProcessor.features;for(let s=0,o=cu(e,0);s<e.length;s=o,o=cu(e,s)){let a=!!i.pref,c=s;for(;c<o;c++)if(e[c].shaperInfo.position>=it.Base_C){if(a&&c+1<o){for(let u=c+1;u<o;u++)if(e[u].features.pref){if(!(e[u].substituted&&e[u].isLigated&&!e[u].isMultiplied)){for(c=u;c<o&&hi(e[c]);)c++;e[c].shaperInfo.position=it.BASE_C,a=!1}break}}if(t.unicodeScript==="Malayalam")for(let u=c+1;u<o;u++){for(;u<o&&Nr(e[u]);)u++;if(u===o||!hi(e[u]))break;for(u++;u<o&&Nr(e[u]);)u++;u<o&&fs(e[u])&&e[u].shaperInfo.position===it.Below_C&&(c=u,e[c].shaperInfo.position=it.Base_C)}s<c&&e[c].shaperInfo.position>it.Base_C&&c--;break}if(c===o&&s<c&&e[c-1].shaperInfo.category===gt.ZWJ&&c--,c<o)for(;s<c&&e[c].shaperInfo.category&(gt.N|tl);)c--;if(s+1<o&&s<c){let u=c===o?c-2:c-1;if(t.unicodeScript!=="Malayalam"&&t.unicodeScript!=="Tamil"){for(;u>s&&!(e[u].shaperInfo.category&(gt.M|tl));)u--;hi(e[u])&&e[u].shaperInfo.position!==it.Pre_M?u+1<o&&Nr(e[u+1])&&u++:u=s}if(s<u&&e[u].shaperInfo.position!==it.Pre_M){for(let f=u;f>s;f--)if(e[f-1].shaperInfo.position===it.Pre_M){let d=f-1;d<c&&c<=u&&c--;let m=e[d];e.splice(d,0,...e.splice(d+1,u-d)),e[u]=m,u--}}}if(s+1<o&&e[s].shaperInfo.position===it.Ra_To_Become_Reph&&e[s].shaperInfo.category===gt.Repha!==(e[s].isLigated&&!e[s].isMultiplied)){let u,f=n.rephPos,d=!1;if(f!==it.After_Post){for(u=s+1;u<c&&!hi(e[u]);)u++;if(u<c&&hi(e[u])&&(u+1<c&&Nr(e[u+1])&&u++,d=!0),!d&&f===it.After_Main){for(u=c;u+1<o&&e[u+1].shaperInfo.position<=it.After_Main;)u++;d=u<o}if(!d&&f===it.After_Sub){for(u=c;u+1<o&&!(e[u+1].shaperInfo.position&(it.Post_C|it.After_Post|it.SMVD));)u++;d=u<o}}if(!d){for(u=s+1;u<c&&!hi(e[u]);)u++;u<c&&hi(e[u])&&(u+1<c&&Nr(e[u+1])&&u++,d=!0)}if(!d){for(u=o-1;u>s&&e[u].shaperInfo.position===it.SMVD;)u--;if(hi(e[u]))for(let v=c+1;v<u;v++)e[v].shaperInfo.category===gt.M&&u--}let m=e[s];e.splice(s,0,...e.splice(s+1,u-s)),e[u]=m,s<c&&c<=u&&c--}if(a&&c+1<o){for(let u=c+1;u<o;u++)if(e[u].features.pref){if(e[u].isLigated&&!e[u].isMultiplied){let f=c;if(t.unicodeScript!=="Malayalam"&&t.unicodeScript!=="Tamil"){for(;f>s&&!(e[f-1].shaperInfo.category&(gt.M|tl));)f--;if(f>s&&e[f-1].shaperInfo.category===gt.M){let v=u;for(let S=c+1;S<v;S++)if(e[S].shaperInfo.category===gt.M){f--;break}}}f>s&&hi(e[f-1])&&f<o&&Nr(e[f])&&f++;let d=u,m=e[d];e.splice(f+1,0,...e.splice(f,d-f)),e[f]=m,f<=c&&c<d&&c++}break}}e[s].shaperInfo.position===it.Pre_M&&(!s||!/Cf|Mn/.test(Ou(e[s-1].codePoints[0])))&&(e[s].features.init=!0)}}function cu(r,e){if(e>=r.length)return e;let t=r[e].shaperInfo.syllable;for(;++e<r.length&&r[e].shaperInfo.syllable===t;);return e}const{categories:cX,decompositions:tb}=Bu(Gu),uX=new ku(Md("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")),hX=new j2(Bu(Gu));class ft extends Zi{static planFeatures(e){e.addStage(dX),e.addStage(["locl","ccmp","nukt","akhn"]),e.addStage(rb),e.addStage(["rphf"],!1),e.addStage(pX),e.addStage(rb),e.addStage(["pref"]),e.addStage(mX),e.addStage(["rkrf","abvf","blwf","half","pstf","vatu","cjct"]),e.addStage(gX),e.addStage(["abvs","blws","pres","psts","dist","abvm","blwm"])}static assignFeatures(e,t){for(let n=t.length-1;n>=0;n--){let i=t[n].codePoints[0];if(tb[i]){let s=tb[i].map(o=>{let a=e.font.glyphForCodePoint(o);return new Lr(e.font,a.id,[o],t[n].features)});t.splice(n,1,...s)}}}}Jn(ft,"zeroMarkWidths","BEFORE_GPOS");function nb(r){return uX.get(r.codePoints[0])}class fX{constructor(e,t,n){this.category=e,this.syllableType=t,this.syllable=n}}function dX(r,e){let t=0;for(let[n,i,s]of hX.match(e.map(nb))){++t;for(let a=n;a<=i;a++)e[a].shaperInfo=new fX(cX[nb(e[a])],s[0],t);let o=e[n].shaperInfo.category==="R"?1:Math.min(3,i-n);for(let a=n;a<n+o;a++)e[a].features.rphf=!0}}function rb(r,e){for(let t of e)t.substituted=!1}function pX(r,e){for(let t of e)t.substituted&&t.features.rphf&&(t.shaperInfo.category="R")}function mX(r,e){for(let t of e)t.substituted&&(t.shaperInfo.category="VPre")}function gX(r,e){let t=r.glyphForCodePoint(9676).id;for(let n=0,i=ib(e,0);n<e.length;n=i,i=ib(e,n)){let s,o,a=e[n].shaperInfo,c=a.syllableType;if(!(c!=="virama_terminated_cluster"&&c!=="standard_cluster"&&c!=="broken_cluster")){if(c==="broken_cluster"&&t){let u=new Lr(r,t,[9676]);for(u.shaperInfo=a,s=n;s<i&&e[s].shaperInfo.category==="R";s++);e.splice(++s,0,u),i++}if(a.category==="R"&&i-n>1){for(s=n+1;s<i;s++)if(a=e[s].shaperInfo,sb(a)||Tc(e[s])){Tc(e[s])&&s--,e.splice(n,0,...e.splice(n+1,s-n),e[s]);break}}for(s=n,o=i;s<i;s++)a=e[s].shaperInfo,sb(a)||Tc(e[s])?o=Tc(e[s])?s+1:s:(a.category==="VPre"||a.category==="VMPre")&&o<s&&e.splice(o,1,e[s],...e.splice(o,s-o))}}}function ib(r,e){if(e>=r.length)return e;let t=r[e].shaperInfo.syllable;for(;++e<r.length&&r[e].shaperInfo.syllable===t;);return e}function Tc(r){return r.shaperInfo.category==="H"&&!r.isLigated}function sb(r){return r.category==="B"||r.category==="GB"}const vX={arab:Vi,mong:Vi,syrc:Vi,"nko ":Vi,phag:Vi,mand:Vi,mani:Vi,phlp:Vi,hang:Mw,bng2:on,beng:on,dev2:on,deva:on,gjr2:on,gujr:on,guru:on,gur2:on,knda:on,knd2:on,mlm2:on,mlym:on,ory2:on,orya:on,taml:on,tml2:on,telu:on,tel2:on,khmr:on,bali:ft,batk:ft,brah:ft,bugi:ft,buhd:ft,cakm:ft,cham:ft,dupl:ft,egyp:ft,gran:ft,hano:ft,java:ft,kthi:ft,kali:ft,khar:ft,khoj:ft,sind:ft,lepc:ft,limb:ft,mahj:ft,mtei:ft,modi:ft,hmng:ft,rjng:ft,saur:ft,shrd:ft,sidd:ft,sinh:on,sund:ft,sylo:ft,tglg:ft,tagb:ft,tale:ft,lana:ft,tavt:ft,takr:ft,tibt:ft,tfng:ft,tirh:ft,latn:Zi,DFLT:Zi};function bX(r){Array.isArray(r)||(r=[r]);for(let e of r){let t=vX[e];if(t)return t}return Zi}class xX extends iu{applyLookup(e,t){switch(e){case 1:{let i=this.coverageIndex(t.coverage);if(i===-1)return!1;let s=this.glyphIterator.cur;switch(t.version){case 1:s.id=s.id+t.deltaGlyphID&65535;break;case 2:s.id=t.substitute.get(i);break}return!0}case 2:{let i=this.coverageIndex(t.coverage);if(i!==-1){let s=t.sequences.get(i);if(s.length===0)return this.glyphs.splice(this.glyphIterator.index,1),!0;this.glyphIterator.cur.id=s[0],this.glyphIterator.cur.ligatureComponent=0;let o=this.glyphIterator.cur.features,a=this.glyphIterator.cur,c=s.slice(1).map((u,f)=>{let d=new Lr(this.font,u,void 0,o);return d.shaperInfo=a.shaperInfo,d.isLigated=a.isLigated,d.ligatureComponent=f+1,d.substituted=!0,d.isMultiplied=!0,d});return this.glyphs.splice(this.glyphIterator.index+1,0,...c),!0}return!1}case 3:{let i=this.coverageIndex(t.coverage);if(i!==-1){let s=0;return this.glyphIterator.cur.id=t.alternateSet.get(i)[s],!0}return!1}case 4:{let i=this.coverageIndex(t.coverage);if(i===-1)return!1;for(let s of t.ligatureSets.get(i)){let o=this.sequenceMatchIndices(1,s.components);if(!o)continue;let a=this.glyphIterator.cur,c=a.codePoints.slice();for(let x of o)c.push(...this.glyphs[x].codePoints);let u=new Lr(this.font,s.glyph,c,a.features);u.shaperInfo=a.shaperInfo,u.isLigated=!0,u.substituted=!0;let f=a.isMark;for(let x=0;x<o.length&&f;x++)f=this.glyphs[o[x]].isMark;u.ligatureID=f?null:this.ligatureID++;let d=a.ligatureID,m=a.codePoints.length,v=m,S=this.glyphIterator.index+1;for(let x of o){if(f)S=x;else for(;S<x;){var n=v-m+Math.min(this.glyphs[S].ligatureComponent||1,m);this.glyphs[S].ligatureID=u.ligatureID,this.glyphs[S].ligatureComponent=n,S++}d=this.glyphs[S].ligatureID,m=this.glyphs[S].codePoints.length,v+=m,S++}if(d&&!f)for(let x=S;x<this.glyphs.length&&this.glyphs[x].ligatureID===d;x++){var n=v-m+Math.min(this.glyphs[x].ligatureComponent||1,m);this.glyphs[x].ligatureComponent=n}for(let x=o.length-1;x>=0;x--)this.glyphs.splice(o[x],1);return this.glyphs[this.glyphIterator.index]=u,!0}return!1}case 5:return this.applyContext(t);case 6:return this.applyChainingContext(t);case 7:return this.applyLookup(t.lookupType,t.extension);default:throw new Error(`GSUB lookupType ${e} is not supported`)}}}class wX extends iu{applyPositionValue(e,t){let n=this.positions[this.glyphIterator.peekIndex(e)];t.xAdvance!=null&&(n.xAdvance+=t.xAdvance),t.yAdvance!=null&&(n.yAdvance+=t.yAdvance),t.xPlacement!=null&&(n.xOffset+=t.xPlacement),t.yPlacement!=null&&(n.yOffset+=t.yPlacement);let i=this.font._variationProcessor,s=this.font.GDEF&&this.font.GDEF.itemVariationStore;i&&s&&(t.xPlaDevice&&(n.xOffset+=i.getDelta(s,t.xPlaDevice.a,t.xPlaDevice.b)),t.yPlaDevice&&(n.yOffset+=i.getDelta(s,t.yPlaDevice.a,t.yPlaDevice.b)),t.xAdvDevice&&(n.xAdvance+=i.getDelta(s,t.xAdvDevice.a,t.xAdvDevice.b)),t.yAdvDevice&&(n.yAdvance+=i.getDelta(s,t.yAdvDevice.a,t.yAdvDevice.b)))}applyLookup(e,t){switch(e){case 1:{let i=this.coverageIndex(t.coverage);if(i===-1)return!1;switch(t.version){case 1:this.applyPositionValue(0,t.value);break;case 2:this.applyPositionValue(0,t.values.get(i));break}return!0}case 2:{let i=this.glyphIterator.peek();if(!i)return!1;let s=this.coverageIndex(t.coverage);if(s===-1)return!1;switch(t.version){case 1:let o=t.pairSets.get(s);for(let u of o)if(u.secondGlyph===i.id)return this.applyPositionValue(0,u.value1),this.applyPositionValue(1,u.value2),!0;return!1;case 2:let a=this.getClassID(this.glyphIterator.cur.id,t.classDef1),c=this.getClassID(i.id,t.classDef2);if(a===-1||c===-1)return!1;var n=t.classRecords.get(a).get(c);return this.applyPositionValue(0,n.value1),this.applyPositionValue(1,n.value2),!0}}case 3:{let i=this.glyphIterator.peekIndex(),s=this.glyphs[i];if(!s)return!1;let o=t.entryExitRecords[this.coverageIndex(t.coverage)];if(!o||!o.exitAnchor)return!1;let a=t.entryExitRecords[this.coverageIndex(t.coverage,s.id)];if(!a||!a.entryAnchor)return!1;let c=this.getAnchor(a.entryAnchor),u=this.getAnchor(o.exitAnchor),f=this.positions[this.glyphIterator.index],d=this.positions[i],m;switch(this.direction){case"ltr":f.xAdvance=u.x+f.xOffset,m=c.x+d.xOffset,d.xAdvance-=m,d.xOffset-=m;break;case"rtl":m=u.x+f.xOffset,f.xAdvance-=m,f.xOffset-=m,d.xAdvance=c.x+d.xOffset;break}return this.glyphIterator.flags.rightToLeft?(this.glyphIterator.cur.cursiveAttachment=i,f.yOffset=c.y-u.y):(s.cursiveAttachment=this.glyphIterator.index,f.yOffset=u.y-c.y),!0}case 4:{let i=this.coverageIndex(t.markCoverage);if(i===-1)return!1;let s=this.glyphIterator.index;for(;--s>=0&&(this.glyphs[s].isMark||this.glyphs[s].ligatureComponent>0););if(s<0)return!1;let o=this.coverageIndex(t.baseCoverage,this.glyphs[s].id);if(o===-1)return!1;let a=t.markArray[i],c=t.baseArray[o][a.class];return this.applyAnchor(a,c,s),!0}case 5:{let i=this.coverageIndex(t.markCoverage);if(i===-1)return!1;let s=this.glyphIterator.index;for(;--s>=0&&this.glyphs[s].isMark;);if(s<0)return!1;let o=this.coverageIndex(t.ligatureCoverage,this.glyphs[s].id);if(o===-1)return!1;let a=t.ligatureArray[o],c=this.glyphIterator.cur,u=this.glyphs[s],f=u.ligatureID&&u.ligatureID===c.ligatureID&&c.ligatureComponent>0?Math.min(c.ligatureComponent,u.codePoints.length)-1:u.codePoints.length-1,d=t.markArray[i],m=a[f][d.class];return this.applyAnchor(d,m,s),!0}case 6:{let i=this.coverageIndex(t.mark1Coverage);if(i===-1)return!1;let s=this.glyphIterator.peekIndex(-1),o=this.glyphs[s];if(!o||!o.isMark)return!1;let a=this.glyphIterator.cur,c=!1;if(a.ligatureID===o.ligatureID?a.ligatureID?a.ligatureComponent===o.ligatureComponent&&(c=!0):c=!0:(a.ligatureID&&!a.ligatureComponent||o.ligatureID&&!o.ligatureComponent)&&(c=!0),!c)return!1;let u=this.coverageIndex(t.mark2Coverage,o.id);if(u===-1)return!1;let f=t.mark1Array[i],d=t.mark2Array[u][f.class];return this.applyAnchor(f,d,s),!0}case 7:return this.applyContext(t);case 8:return this.applyChainingContext(t);case 9:return this.applyLookup(t.lookupType,t.extension);default:throw new Error(`Unsupported GPOS table: ${e}`)}}applyAnchor(e,t,n){let i=this.getAnchor(t),s=this.getAnchor(e.markAnchor);this.positions[n];let o=this.positions[this.glyphIterator.index];o.xOffset=i.x-s.x,o.yOffset=i.y-s.y,this.glyphIterator.cur.markAttachment=n}getAnchor(e){let t=e.xCoordinate,n=e.yCoordinate,i=this.font._variationProcessor,s=this.font.GDEF&&this.font.GDEF.itemVariationStore;return i&&s&&(e.xDeviceTable&&(t+=i.getDelta(s,e.xDeviceTable.a,e.xDeviceTable.b)),e.yDeviceTable&&(n+=i.getDelta(s,e.yDeviceTable.a,e.yDeviceTable.b))),{x:t,y:n}}applyFeatures(e,t,n){super.applyFeatures(e,t,n);for(var i=0;i<this.glyphs.length;i++)this.fixCursiveAttachment(i);this.fixMarkAttachment()}fixCursiveAttachment(e){let t=this.glyphs[e];if(t.cursiveAttachment!=null){let n=t.cursiveAttachment;t.cursiveAttachment=null,this.fixCursiveAttachment(n),this.positions[e].yOffset+=this.positions[n].yOffset}}fixMarkAttachment(){for(let e=0;e<this.glyphs.length;e++){let t=this.glyphs[e];if(t.markAttachment!=null){let n=t.markAttachment;if(this.positions[e].xOffset+=this.positions[n].xOffset,this.positions[e].yOffset+=this.positions[n].yOffset,this.direction==="ltr")for(let i=n;i<e;i++)this.positions[e].xOffset-=this.positions[i].xAdvance,this.positions[e].yOffset-=this.positions[i].yAdvance;else for(let i=n+1;i<e+1;i++)this.positions[e].xOffset+=this.positions[i].xAdvance,this.positions[e].yOffset+=this.positions[i].yAdvance}}}}class yX{setup(e){this.glyphInfos=e.glyphs.map(n=>new Lr(this.font,n.id,[...n.codePoints]));let t=null;this.GPOSProcessor&&(t=this.GPOSProcessor.selectScript(e.script,e.language,e.direction)),this.GSUBProcessor&&(t=this.GSUBProcessor.selectScript(e.script,e.language,e.direction)),this.shaper=bX(t),this.plan=new yq(this.font,t,e.direction),this.shaper.plan(this.plan,this.glyphInfos,e.features);for(let n in this.plan.allFeatures)e.features[n]=!0}substitute(e){this.GSUBProcessor&&(this.plan.process(this.GSUBProcessor,this.glyphInfos),e.glyphs=this.glyphInfos.map(t=>this.font.getGlyph(t.id,t.codePoints)))}position(e){return this.shaper.zeroMarkWidths==="BEFORE_GPOS"&&this.zeroMarkAdvances(e.positions),this.GPOSProcessor&&this.plan.process(this.GPOSProcessor,this.glyphInfos,e.positions),this.shaper.zeroMarkWidths==="AFTER_GPOS"&&this.zeroMarkAdvances(e.positions),e.direction==="rtl"&&(e.glyphs.reverse(),e.positions.reverse()),this.GPOSProcessor&&this.GPOSProcessor.features}zeroMarkAdvances(e){for(let t=0;t<this.glyphInfos.length;t++)this.glyphInfos[t].isMark&&(e[t].xAdvance=0,e[t].yAdvance=0)}cleanup(){this.glyphInfos=null,this.plan=null,this.shaper=null}getAvailableFeatures(e,t){let n=[];return this.GSUBProcessor&&(this.GSUBProcessor.selectScript(e,t),n.push(...Object.keys(this.GSUBProcessor.features))),this.GPOSProcessor&&(this.GPOSProcessor.selectScript(e,t),n.push(...Object.keys(this.GPOSProcessor.features))),n}constructor(e){this.font=e,this.glyphInfos=null,this.plan=null,this.GSUBProcessor=null,this.GPOSProcessor=null,this.fallbackPosition=!0,e.GSUB&&(this.GSUBProcessor=new xX(e,e.GSUB)),e.GPOS&&(this.GPOSProcessor=new wX(e,e.GPOS))}}class _X{layout(e,t,n,i,s){if(typeof t=="string"&&(s=i,i=n,n=t,t=[]),typeof e=="string"){n==null&&(n=KW(e));var o=this.font.glyphsForString(e)}else{if(n==null){let u=[];for(let f of e)u.push(...f.codePoints);n=JW(u)}var o=e}let a=new eq(o,t,n,i,s);return o.length===0?(a.positions=[],a):(this.engine&&this.engine.setup&&this.engine.setup(a),this.substitute(a),this.position(a),this.hideDefaultIgnorables(a.glyphs,a.positions),this.engine&&this.engine.cleanup&&this.engine.cleanup(),a)}substitute(e){this.engine&&this.engine.substitute&&this.engine.substitute(e)}position(e){e.positions=e.glyphs.map(n=>new tq(n.advanceWidth));let t=null;this.engine&&this.engine.position&&(t=this.engine.position(e)),!t&&(!this.engine||this.engine.fallbackPosition)&&(this.unicodeLayoutEngine||(this.unicodeLayoutEngine=new jW(this.font)),this.unicodeLayoutEngine.positionGlyphs(e.glyphs,e.positions)),(!t||!t.kern)&&e.features.kern!==!1&&this.font.kern&&(this.kernProcessor||(this.kernProcessor=new YW(this.font)),this.kernProcessor.process(e.glyphs,e.positions),e.features.kern=!0)}hideDefaultIgnorables(e,t){let n=this.font.glyphForCodePoint(32);for(let i=0;i<e.length;i++)this.isDefaultIgnorable(e[i].codePoints[0])&&(e[i]=n,t[i].xAdvance=0,t[i].yAdvance=0)}isDefaultIgnorable(e){let t=e>>16;if(t===0)switch(e>>8){case 0:return e===173;case 3:return e===847;case 6:return e===1564;case 23:return 6068<=e&&e<=6069;case 24:return 6155<=e&&e<=6158;case 32:return 8203<=e&&e<=8207||8234<=e&&e<=8238||8288<=e&&e<=8303;case 254:return 65024<=e&&e<=65039||e===65279;case 255:return 65520<=e&&e<=65528;default:return!1}else switch(t){case 1:return 113824<=e&&e<=113827||119155<=e&&e<=119162;case 14:return 917504<=e&&e<=921599;default:return!1}}getAvailableFeatures(e,t){let n=[];return this.engine&&n.push(...this.engine.getAvailableFeatures(e,t)),this.font.kern&&n.indexOf("kern")===-1&&n.push("kern"),n}stringsForGlyph(e){let t=new Set,n=this.font._cmapProcessor.codePointsForGlyph(e);for(let i of n)t.add(String.fromCodePoint(i));if(this.engine&&this.engine.stringsForGlyph)for(let i of this.engine.stringsForGlyph(e))t.add(i);return Array.from(t)}constructor(e){this.font=e,this.unicodeLayoutEngine=null,this.kernProcessor=null,this.font.morx?this.engine=new wq(this.font):(this.font.GSUB||this.font.GPOS)&&(this.engine=new yX(this.font))}}const SX={moveTo:"M",lineTo:"L",quadraticCurveTo:"Q",bezierCurveTo:"C",closePath:"Z"};class aa{toFunction(){return e=>{this.commands.forEach(t=>e[t.command].apply(e,t.args))}}toSVG(){return this.commands.map(t=>{let n=t.args.map(i=>Math.round(i*100)/100);return`${SX[t.command]}${n.join(" ")}`}).join("")}get cbox(){if(!this._cbox){let e=new ji;for(let t of this.commands)for(let n=0;n<t.args.length;n+=2)e.addPoint(t.args[n],t.args[n+1]);this._cbox=Object.freeze(e)}return this._cbox}get bbox(){if(this._bbox)return this._bbox;let e=new ji,t=0,n=0,i=T=>Math.pow(1-T,3)*v[A]+3*Math.pow(1-T,2)*T*S[A]+3*(1-T)*Math.pow(T,2)*x[A]+Math.pow(T,3)*w[A];for(let T of this.commands)switch(T.command){case"moveTo":case"lineTo":let[E,P]=T.args;e.addPoint(E,P),t=E,n=P;break;case"quadraticCurveTo":case"bezierCurveTo":if(T.command==="quadraticCurveTo")var[s,o,d,m]=T.args,a=t+2/3*(s-t),c=n+2/3*(o-n),u=d+2/3*(s-d),f=m+2/3*(o-m);else var[a,c,u,f,d,m]=T.args;e.addPoint(d,m);for(var v=[t,n],S=[a,c],x=[u,f],w=[d,m],A=0;A<=1;A++){let y=6*v[A]-12*S[A]+6*x[A],k=-3*v[A]+9*S[A]-9*x[A]+3*w[A];if(T=3*S[A]-3*v[A],k===0){if(y===0)continue;let O=-T/y;0<O&&O<1&&(A===0?e.addPoint(i(O),e.maxY):A===1&&e.addPoint(e.maxX,i(O)));continue}let F=Math.pow(y,2)-4*T*k;if(F<0)continue;let M=(-y+Math.sqrt(F))/(2*k);0<M&&M<1&&(A===0?e.addPoint(i(M),e.maxY):A===1&&e.addPoint(e.maxX,i(M)));let R=(-y-Math.sqrt(F))/(2*k);0<R&&R<1&&(A===0?e.addPoint(i(R),e.maxY):A===1&&e.addPoint(e.maxX,i(R)))}t=d,n=m;break}return this._bbox=Object.freeze(e)}mapPoints(e){let t=new aa;for(let n of this.commands){let i=[];for(let s=0;s<n.args.length;s+=2){let[o,a]=e(n.args[s],n.args[s+1]);i.push(o,a)}t[n.command](...i)}return t}transform(e,t,n,i,s,o){return this.mapPoints((a,c)=>{const u=e*a+n*c+s,f=t*a+i*c+o;return[u,f]})}translate(e,t){return this.transform(1,0,0,1,e,t)}rotate(e){let t=Math.cos(e),n=Math.sin(e);return this.transform(t,n,-n,t,0,0)}scale(e,t=e){return this.transform(e,0,0,t,0,0)}constructor(){this.commands=[],this._bbox=null,this._cbox=null}}for(let r of["moveTo","lineTo","quadraticCurveTo","bezierCurveTo","closePath"])aa.prototype[r]=function(...e){return this._bbox=this._cbox=null,this.commands.push({command:r,args:e}),this};var za=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];class Xr{_getPath(){return new aa}_getCBox(){return this.path.cbox}_getBBox(){return this.path.bbox}_getTableMetrics(e){if(this.id<e.metrics.length)return e.metrics.get(this.id);let t=e.metrics.get(e.metrics.length-1);return{advance:t?t.advance:0,bearing:e.bearings.get(this.id-e.metrics.length)||0}}_getMetrics(e){if(this._metrics)return this._metrics;let{advance:t,bearing:n}=this._getTableMetrics(this._font.hmtx);if(this._font.vmtx)var{advance:i,bearing:s}=this._getTableMetrics(this._font.vmtx);else{let o;if((typeof e>"u"||e===null)&&({cbox:e}=this),(o=this._font["OS/2"])&&o.version>0)var i=Math.abs(o.typoAscender-o.typoDescender),s=o.typoAscender-e.maxY;else{let{hhea:a}=this._font;var i=Math.abs(a.ascent-a.descent),s=a.ascent-e.maxY}}return this._font._variationProcessor&&this._font.HVAR&&(t+=this._font._variationProcessor.getAdvanceAdjustment(this.id,this._font.HVAR)),this._metrics={advanceWidth:t,advanceHeight:i,leftBearing:n,topBearing:s}}get cbox(){return this._getCBox()}get bbox(){return this._getBBox()}get path(){return this._getPath()}getScaledPath(e){let t=1/this._font.unitsPerEm*e;return this.path.scale(t)}get advanceWidth(){return this._getMetrics().advanceWidth}get advanceHeight(){return this._getMetrics().advanceHeight}get ligatureCaretPositions(){}_getName(){let{post:e}=this._font;if(!e)return null;switch(e.version){case 1:return za[this.id];case 2:let t=e.glyphNameIndex[this.id];return t<za.length?za[t]:e.names[t-za.length];case 2.5:return za[this.id+e.offsets[this.id]];case 4:return String.fromCharCode(e.map[this.id])}}get name(){return this._getName()}render(e,t){e.save();let n=1/this._font.head.unitsPerEm*t;e.scale(n,n),this.path.toFunction()(e),e.fill(),e.restore()}constructor(e,t,n){this.id=e,this.codePoints=t,this._font=n,this.isMark=this.codePoints.length>0&&this.codePoints.every(Y2),this.isLigature=this.codePoints.length>1}}Mn([En],Xr.prototype,"cbox",null);Mn([En],Xr.prototype,"bbox",null);Mn([En],Xr.prototype,"path",null);Mn([En],Xr.prototype,"advanceWidth",null);Mn([En],Xr.prototype,"advanceHeight",null);Mn([En],Xr.prototype,"name",null);let ob=new de({numberOfContours:Le,xMin:Le,yMin:Le,xMax:Le,yMax:Le});const CX=1,MX=2,EX=4,AX=8,PX=16,TX=32,LX=1,IX=8,ab=32,DX=64,RX=128,kX=256;class Cr{copy(){return new Cr(this.onCurve,this.endContour,this.x,this.y)}constructor(e,t,n=0,i=0){this.onCurve=e,this.endContour=t,this.x=n,this.y=i}}class FX{constructor(e,t,n){this.glyphID=e,this.dx=t,this.dy=n,this.pos=0,this.scaleX=this.scaleY=1,this.scale01=this.scale10=0}}class Hu extends Xr{_getCBox(e){if(this._font._variationProcessor&&!e)return this.path.cbox;let t=this._font._getTableStream("glyf");t.pos+=this._font.loca.offsets[this.id];let n=ob.decode(t),i=new ji(n.xMin,n.yMin,n.xMax,n.yMax);return Object.freeze(i)}_parseGlyphCoord(e,t,n,i){if(n){var s=e.readUInt8();i||(s=-s),s+=t}else if(i)var s=t;else var s=t+e.readInt16BE();return s}_decode(){let e=this._font.loca.offsets[this.id],t=this._font.loca.offsets[this.id+1];if(e===t)return null;let n=this._font._getTableStream("glyf");n.pos+=e;let i=n.pos,s=ob.decode(n);return s.numberOfContours>0?this._decodeSimple(s,n):s.numberOfContours<0&&this._decodeComposite(s,n,i),s}_decodeSimple(e,t){e.points=[];let n=new J(C,e.numberOfContours).decode(t);e.instructions=new J(Ve,C).decode(t);let i=[],s=n[n.length-1]+1;for(;i.length<s;){var o=t.readUInt8();if(i.push(o),o&AX){let f=t.readUInt8();for(let d=0;d<f;d++)i.push(o)}}for(var a=0;a<i.length;a++){var o=i[a];let d=new Cr(!!(o&CX),n.indexOf(a)>=0,0,0);e.points.push(d)}let c=0;for(var a=0;a<i.length;a++){var o=i[a];e.points[a].x=c=this._parseGlyphCoord(t,c,o&MX,o&PX)}let u=0;for(var a=0;a<i.length;a++){var o=i[a];e.points[a].y=u=this._parseGlyphCoord(t,u,o&EX,o&TX)}if(this._font._variationProcessor){let f=e.points.slice();f.push(...this._getPhantomPoints(e)),this._font._variationProcessor.transformPoints(this.id,f),e.phantomPoints=f.slice(-4)}}_decodeComposite(e,t,n=0){e.components=[];let i=!1,s=ab;for(;s&ab;){s=t.readUInt16BE();let u=t.pos-n,f=t.readUInt16BE();if(i||(i=(s&kX)!==0),s&LX)var o=t.readInt16BE(),a=t.readInt16BE();else var o=t.readInt8(),a=t.readInt8();var c=new FX(f,o,a);c.pos=u,s&IX?c.scaleX=c.scaleY=(t.readUInt8()<<24|t.readUInt8()<<16)/1073741824:s&DX?(c.scaleX=(t.readUInt8()<<24|t.readUInt8()<<16)/1073741824,c.scaleY=(t.readUInt8()<<24|t.readUInt8()<<16)/1073741824):s&RX&&(c.scaleX=(t.readUInt8()<<24|t.readUInt8()<<16)/1073741824,c.scale01=(t.readUInt8()<<24|t.readUInt8()<<16)/1073741824,c.scale10=(t.readUInt8()<<24|t.readUInt8()<<16)/1073741824,c.scaleY=(t.readUInt8()<<24|t.readUInt8()<<16)/1073741824),e.components.push(c)}if(this._font._variationProcessor){let u=[];for(let f=0;f<e.components.length;f++){var c=e.components[f];u.push(new Cr(!0,!0,c.dx,c.dy))}u.push(...this._getPhantomPoints(e)),this._font._variationProcessor.transformPoints(this.id,u),e.phantomPoints=u.splice(-4,4);for(let f=0;f<u.length;f++){let d=u[f];e.components[f].dx=d.x,e.components[f].dy=d.y}}return i}_getPhantomPoints(e){let t=this._getCBox(!0);this._metrics==null&&(this._metrics=Xr.prototype._getMetrics.call(this,t));let{advanceWidth:n,advanceHeight:i,leftBearing:s,topBearing:o}=this._metrics;return[new Cr(!1,!0,e.xMin-s,0),new Cr(!1,!0,e.xMin-s+n,0),new Cr(!1,!0,0,e.yMax+o),new Cr(!1,!0,0,e.yMax+o+i)]}_getContours(){let e=this._decode();if(!e)return[];let t=[];if(e.numberOfContours<0)for(let o of e.components){let a=this._font.getGlyph(o.glyphID)._getContours();for(let c=0;c<a.length;c++){let u=a[c];for(let f=0;f<u.length;f++){let d=u[f],m=d.x*o.scaleX+d.y*o.scale01+o.dx,v=d.y*o.scaleY+d.x*o.scale10+o.dy;t.push(new Cr(d.onCurve,d.endContour,m,v))}}}else t=e.points||[];e.phantomPoints&&!this._font.directory.tables.HVAR&&(this._metrics.advanceWidth=e.phantomPoints[1].x-e.phantomPoints[0].x,this._metrics.advanceHeight=e.phantomPoints[3].y-e.phantomPoints[2].y,this._metrics.leftBearing=e.xMin-e.phantomPoints[0].x,this._metrics.topBearing=e.phantomPoints[2].y-e.yMax);let n=[],i=[];for(let o=0;o<t.length;o++){var s=t[o];i.push(s),s.endContour&&(n.push(i),i=[])}return n}_getMetrics(){if(this._metrics)return this._metrics;let e=this._getCBox(!0);return super._getMetrics(e),this._font._variationProcessor&&!this._font.HVAR&&this.path,this._metrics}_getPath(){let e=this._getContours(),t=new aa;for(let i=0;i<e.length;i++){let s=e[i],o=s[0],a=s[s.length-1],c=0;if(o.onCurve){var n=null;c=1}else{a.onCurve?o=a:o=new Cr(!1,!1,(o.x+a.x)/2,(o.y+a.y)/2);var n=o}t.moveTo(o.x,o.y);for(let u=c;u<s.length;u++){let f=s[u],d=u===0?o:s[u-1];if(d.onCurve&&f.onCurve)t.lineTo(f.x,f.y);else if(d.onCurve&&!f.onCurve)var n=f;else if(!d.onCurve&&!f.onCurve){let v=(d.x+f.x)/2,S=(d.y+f.y)/2;t.quadraticCurveTo(d.x,d.y,v,S);var n=f}else if(!d.onCurve&&f.onCurve){t.quadraticCurveTo(n.x,n.y,f.x,f.y);var n=null}else throw new Error("Unknown TTF path state")}n&&t.quadraticCurveTo(n.x,n.y,o.x,o.y),t.closePath()}return t}constructor(...e){super(...e),Jn(this,"type","TTF")}}class OX extends Xr{_getName(){return this._font.CFF2?super._getName():this._font["CFF "].getGlyphName(this.id)}bias(e){return e.length<1240?107:e.length<33900?1131:32768}_getPath(){let e=this._font.CFF2||this._font["CFF "],{stream:t}=e,n=e.topDict.CharStrings[this.id],i=n.offset+n.length;t.pos=n.offset;let s=new aa,o=[],a=[],c=null,u=0,f=0,d=0,m,v,S=!1;this._usedGsubrs=m={},this._usedSubrs=v={};let x=e.globalSubrIndex||[],w=this.bias(x),A=e.privateDictForGlyph(this.id)||{},T=A.Subrs||[],E=this.bias(T),P=e.topDict.vstore&&e.topDict.vstore.itemVariationStore,y=A.vsindex,k=this._font._variationProcessor;function F(){c==null&&(c=o.shift()+A.nominalWidthX)}function M(){return o.length%2!==0&&F(),u+=o.length>>1,o.length=0}function R(z,Q){S&&s.closePath(),s.moveTo(z,Q),S=!0}let O=function(){for(;t.pos<i;){let Ee=t.readUInt8();if(Ee<32){let Pe,re,ae;switch(Ee){case 1:case 3:case 18:case 23:M();break;case 4:o.length>1&&F(),d+=o.shift(),R(f,d);break;case 5:for(;o.length>=2;)f+=o.shift(),d+=o.shift(),s.lineTo(f,d);break;case 6:case 7:for(ae=Ee===6;o.length>=1;)ae?f+=o.shift():d+=o.shift(),s.lineTo(f,d),ae=!ae;break;case 8:for(;o.length>0;){var G=f+o.shift(),V=d+o.shift(),q=G+o.shift(),j=V+o.shift();f=q+o.shift(),d=j+o.shift(),s.bezierCurveTo(G,V,q,j,f,d)}break;case 10:if(Pe=o.pop()+E,re=T[Pe],re){v[Pe]=!0;var z=t.pos,Q=i;t.pos=re.offset,i=re.offset+re.length,O(),t.pos=z,i=Q}break;case 11:if(e.version>=2)break;return;case 14:if(e.version>=2)break;o.length>0&&F(),S&&(s.closePath(),S=!1);break;case 15:if(e.version<2)throw new Error("vsindex operator not supported in CFF v1");y=o.pop();break;case 16:{if(e.version<2)throw new Error("blend operator not supported in CFF v1");if(!k)throw new Error("blend operator in non-variation font");let xe=k.getBlendVector(P,y),be=o.pop(),De=be*xe.length,ve=o.length-De,Je=ve-be;for(let pe=0;pe<be;pe++){let he=o[Je+pe];for(let le=0;le<xe.length;le++)he+=xe[le]*o[ve++];o[Je+pe]=he}for(;De--;)o.pop();break}case 19:case 20:M(),t.pos+=u+7>>3;break;case 21:o.length>2&&F(),f+=o.shift(),d+=o.shift(),R(f,d);break;case 22:o.length>1&&F(),f+=o.shift(),R(f,d);break;case 24:for(;o.length>=8;){var G=f+o.shift(),V=d+o.shift(),q=G+o.shift(),j=V+o.shift();f=q+o.shift(),d=j+o.shift(),s.bezierCurveTo(G,V,q,j,f,d)}f+=o.shift(),d+=o.shift(),s.lineTo(f,d);break;case 25:for(;o.length>=8;)f+=o.shift(),d+=o.shift(),s.lineTo(f,d);var G=f+o.shift(),V=d+o.shift(),q=G+o.shift(),j=V+o.shift();f=q+o.shift(),d=j+o.shift(),s.bezierCurveTo(G,V,q,j,f,d);break;case 26:for(o.length%2&&(f+=o.shift());o.length>=4;)G=f,V=d+o.shift(),q=G+o.shift(),j=V+o.shift(),f=q,d=j+o.shift(),s.bezierCurveTo(G,V,q,j,f,d);break;case 27:for(o.length%2&&(d+=o.shift());o.length>=4;)G=f+o.shift(),V=d,q=G+o.shift(),j=V+o.shift(),f=q+o.shift(),d=j,s.bezierCurveTo(G,V,q,j,f,d);break;case 28:o.push(t.readInt16BE());break;case 29:if(Pe=o.pop()+w,re=x[Pe],re){m[Pe]=!0;var z=t.pos,Q=i;t.pos=re.offset,i=re.offset+re.length,O(),t.pos=z,i=Q}break;case 30:case 31:for(ae=Ee===31;o.length>=4;)ae?(G=f+o.shift(),V=d,q=G+o.shift(),j=V+o.shift(),d=j+o.shift(),f=q+(o.length===1?o.shift():0)):(G=f,V=d+o.shift(),q=G+o.shift(),j=V+o.shift(),f=q+o.shift(),d=j+(o.length===1?o.shift():0)),s.bezierCurveTo(G,V,q,j,f,d),ae=!ae;break;case 12:switch(Ee=t.readUInt8(),Ee){case 3:let xe=o.pop(),be=o.pop();o.push(xe&&be?1:0);break;case 4:xe=o.pop(),be=o.pop(),o.push(xe||be?1:0);break;case 5:xe=o.pop(),o.push(xe?0:1);break;case 9:xe=o.pop(),o.push(Math.abs(xe));break;case 10:xe=o.pop(),be=o.pop(),o.push(xe+be);break;case 11:xe=o.pop(),be=o.pop(),o.push(xe-be);break;case 12:xe=o.pop(),be=o.pop(),o.push(xe/be);break;case 14:xe=o.pop(),o.push(-xe);break;case 15:xe=o.pop(),be=o.pop(),o.push(xe===be?1:0);break;case 18:o.pop();break;case 20:let De=o.pop(),ve=o.pop();a[ve]=De;break;case 21:ve=o.pop(),o.push(a[ve]||0);break;case 22:let Je=o.pop(),pe=o.pop(),he=o.pop(),le=o.pop();o.push(he<=le?Je:pe);break;case 23:o.push(Math.random());break;case 24:xe=o.pop(),be=o.pop(),o.push(xe*be);break;case 26:xe=o.pop(),o.push(Math.sqrt(xe));break;case 27:xe=o.pop(),o.push(xe,xe);break;case 28:xe=o.pop(),be=o.pop(),o.push(be,xe);break;case 29:ve=o.pop(),ve<0?ve=0:ve>o.length-1&&(ve=o.length-1),o.push(o[ve]);break;case 30:let ue=o.pop(),te=o.pop();if(te>=0)for(;te>0;){var ge=o[ue-1];for(let oe=ue-2;oe>=0;oe--)o[oe+1]=o[oe];o[0]=ge,te--}else for(;te<0;){var ge=o[0];for(let Me=0;Me<=ue;Me++)o[Me]=o[Me+1];o[ue-1]=ge,te++}break;case 34:G=f+o.shift(),V=d,q=G+o.shift(),j=V+o.shift();let se=q+o.shift(),me=j,_e=se+o.shift(),we=me,Ie=_e+o.shift(),Ce=we,Oe=Ie+o.shift(),tt=Ce;f=Oe,d=tt,s.bezierCurveTo(G,V,q,j,se,me),s.bezierCurveTo(_e,we,Ie,Ce,Oe,tt);break;case 35:let Ze=[];for(let oe=0;oe<=5;oe++)f+=o.shift(),d+=o.shift(),Ze.push(f,d);s.bezierCurveTo(...Ze.slice(0,6)),s.bezierCurveTo(...Ze.slice(6)),o.shift();break;case 36:G=f+o.shift(),V=d+o.shift(),q=G+o.shift(),j=V+o.shift(),se=q+o.shift(),me=j,_e=se+o.shift(),we=me,Ie=_e+o.shift(),Ce=we+o.shift(),Oe=Ie+o.shift(),tt=Ce,f=Oe,d=tt,s.bezierCurveTo(G,V,q,j,se,me),s.bezierCurveTo(_e,we,Ie,Ce,Oe,tt);break;case 37:let N=f,B=d;Ze=[];for(let oe=0;oe<=4;oe++)f+=o.shift(),d+=o.shift(),Ze.push(f,d);Math.abs(f-N)>Math.abs(d-B)?(f+=o.shift(),d=B):(f=N,d+=o.shift()),Ze.push(f,d),s.bezierCurveTo(...Ze.slice(0,6)),s.bezierCurveTo(...Ze.slice(6));break;default:throw new Error(`Unknown op: 12 ${Ee}`)}break;default:throw new Error(`Unknown op: ${Ee}`)}}else if(Ee<247)o.push(Ee-139);else if(Ee<251){var K=t.readUInt8();o.push((Ee-247)*256+K+108)}else if(Ee<255){var K=t.readUInt8();o.push(-(Ee-251)*256-K-108)}else o.push(t.readInt32BE()/65536)}};return O(),S&&s.closePath(),s}constructor(...e){super(...e),Jn(this,"type","CFF")}}let BX=new de({originX:C,originY:C,type:new Pt(4),data:new Gr(r=>r.parent.buflen-r._currentOffset)});class NX extends Hu{getImageForSize(e){for(let o=0;o<this._font.sbix.imageTables.length;o++){var t=this._font.sbix.imageTables[o];if(t.ppem>=e)break}let n=t.imageOffsets,i=n[this.id],s=n[this.id+1];return i===s?null:(this._font.stream.pos=i,BX.decode(this._font.stream,{buflen:s-i}))}render(e,t){let n=this.getImageForSize(t);if(n!=null){let i=t/this._font.unitsPerEm;e.image(n.data,{height:t,x:n.originX,y:(this.bbox.minY-n.originY)*i})}this._font.sbix.flags.renderOutlines&&super.render(e,t)}constructor(...e){super(...e),Jn(this,"type","SBIX")}}class lb{constructor(e,t){this.glyph=e,this.color=t}}class UX extends Xr{_getBBox(){let e=new ji;for(let t=0;t<this.layers.length;t++){let i=this.layers[t].glyph.bbox;e.addPoint(i.minX,i.minY),e.addPoint(i.maxX,i.maxY)}return e}get layers(){let e=this._font.CPAL,t=this._font.COLR,n=0,i=t.baseGlyphRecord.length-1;for(;n<=i;){let f=n+i>>1;var s=t.baseGlyphRecord[f];if(this.id<s.gid)i=f-1;else if(this.id>s.gid)n=f+1;else{var o=s;break}}if(o==null){var a=this._font._getBaseGlyph(this.id),c={red:0,green:0,blue:0,alpha:255};return[new lb(a,c)]}let u=[];for(let f=o.firstLayerIndex;f<o.firstLayerIndex+o.numLayers;f++){var s=t.layerRecords[f],c=e.colorRecords[s.paletteIndex],a=this._font._getBaseGlyph(s.gid);u.push(new lb(a,c))}return u}render(e,t){for(let{glyph:n,color:i}of this.layers)e.fillColor([i.red,i.green,i.blue],i.alpha/255*100),n.render(e,t)}constructor(...e){super(...e),Jn(this,"type","COLR")}}const VX=32768,zX=4095,$X=32768,cb=16384,GX=8192,ub=4095,hb=128,fb=127,HX=128,WX=64,qX=63;class XX{normalizeCoords(e){let t=[];for(var n=0;n<this.font.fvar.axis.length;n++){let i=this.font.fvar.axis[n];e[n]<i.defaultValue?t.push((e[n]-i.defaultValue+Number.EPSILON)/(i.defaultValue-i.minValue+Number.EPSILON)):t.push((e[n]-i.defaultValue+Number.EPSILON)/(i.maxValue-i.defaultValue+Number.EPSILON))}if(this.font.avar)for(var n=0;n<this.font.avar.segment.length;n++){let s=this.font.avar.segment[n];for(let o=0;o<s.correspondence.length;o++){let a=s.correspondence[o];if(o>=1&&t[n]<a.fromCoord){let c=s.correspondence[o-1];t[n]=((t[n]-c.fromCoord)*(a.toCoord-c.toCoord)+Number.EPSILON)/(a.fromCoord-c.fromCoord+Number.EPSILON)+c.toCoord;break}}}return t}transformPoints(e,t){if(!this.font.fvar||!this.font.gvar)return;let{gvar:n}=this.font;if(e>=n.glyphCount)return;let i=n.offsets[e];if(i===n.offsets[e+1])return;let{stream:s}=this.font;if(s.pos=i,s.pos>=s.length)return;let o=s.readUInt16BE(),a=i+s.readUInt16BE();if(o&VX){var c=s.pos;s.pos=a;var u=this.decodePoints();a=s.pos,s.pos=c}let f=t.map(w=>w.copy());o&=zX;for(let w=0;w<o;w++){let A=s.readUInt16BE(),T=s.readUInt16BE();if(T&$X){var d=[];for(let M=0;M<n.axisCount;M++)d.push(s.readInt16BE()/16384)}else{if((T&ub)>=n.globalCoordCount)throw new Error("Invalid gvar table");var d=n.globalCoords[T&ub]}if(T&cb){var m=[];for(let M=0;M<n.axisCount;M++)m.push(s.readInt16BE()/16384);var v=[];for(let M=0;M<n.axisCount;M++)v.push(s.readInt16BE()/16384)}let E=this.tupleFactor(T,d,m,v);if(E===0){a+=A;continue}var c=s.pos;if(s.pos=a,T&GX)var S=this.decodePoints();else var S=u;let y=S.length===0?t.length:S.length,k=this.decodeDeltas(y),F=this.decodeDeltas(y);if(S.length===0)for(let M=0;M<t.length;M++){var x=t[M];x.x+=Math.round(k[M]*E),x.y+=Math.round(F[M]*E)}else{let M=f.map(O=>O.copy()),R=t.map(()=>!1);for(let O=0;O<S.length;O++){let z=S[O];if(z<t.length){let Q=M[z];R[z]=!0,Q.x+=Math.round(k[O]*E),Q.y+=Math.round(F[O]*E)}}this.interpolateMissingDeltas(M,f,R);for(let O=0;O<t.length;O++){let z=M[O].x-f[O].x,Q=M[O].y-f[O].y;t[O].x+=z,t[O].y+=Q}}a+=A,s.pos=c}}decodePoints(){let e=this.font.stream,t=e.readUInt8();t&hb&&(t=(t&fb)<<8|e.readUInt8());let n=new Uint16Array(t),i=0,s=0;for(;i<t;){let o=e.readUInt8(),a=(o&fb)+1,c=o&hb?e.readUInt16:e.readUInt8;for(let u=0;u<a&&i<t;u++)s+=c.call(e),n[i++]=s}return n}decodeDeltas(e){let t=this.font.stream,n=0,i=new Int16Array(e);for(;n<e;){let s=t.readUInt8(),o=(s&qX)+1;if(s&HX)n+=o;else{let a=s&WX?t.readInt16BE:t.readInt8;for(let c=0;c<o&&n<e;c++)i[n++]=a.call(t)}}return i}tupleFactor(e,t,n,i){let s=this.normalizedCoords,{gvar:o}=this.font,a=1;for(let c=0;c<o.axisCount;c++)if(t[c]!==0){if(s[c]===0)return 0;if(e&cb){if(s[c]<n[c]||s[c]>i[c])return 0;s[c]<t[c]?a=a*(s[c]-n[c]+Number.EPSILON)/(t[c]-n[c]+Number.EPSILON):a=a*(i[c]-s[c]+Number.EPSILON)/(i[c]-t[c]+Number.EPSILON)}else{if(s[c]<Math.min(0,t[c])||s[c]>Math.max(0,t[c]))return 0;a=(a*s[c]+Number.EPSILON)/(t[c]+Number.EPSILON)}}return a}interpolateMissingDeltas(e,t,n){if(e.length===0)return;let i=0;for(;i<e.length;){let s=i,o=i,a=e[o];for(;!a.endContour;)a=e[++o];for(;i<=o&&!n[i];)i++;if(i>o)continue;let c=i,u=i;for(i++;i<=o;)n[i]&&(this.deltaInterpolate(u+1,i-1,u,i,t,e),u=i),i++;u===c?this.deltaShift(s,o,u,t,e):(this.deltaInterpolate(u+1,o,u,c,t,e),c>0&&this.deltaInterpolate(s,c-1,u,c,t,e)),i=o+1}}deltaInterpolate(e,t,n,i,s,o){if(e>t)return;let a=["x","y"];for(let u=0;u<a.length;u++){let f=a[u];if(s[n][f]>s[i][f]){var c=n;n=i,i=c}let d=s[n][f],m=s[i][f],v=o[n][f],S=o[i][f];if(d!==m||v===S){let x=d===m?0:(S-v)/(m-d);for(let w=e;w<=t;w++){let A=s[w][f];A<=d?A+=v-d:A>=m?A+=S-m:A=v+(A-d)*x,o[w][f]=A}}}}deltaShift(e,t,n,i,s){let o=s[n].x-i[n].x,a=s[n].y-i[n].y;if(!(o===0&&a===0))for(let c=e;c<=t;c++)c!==n&&(s[c].x+=o,s[c].y+=a)}getAdvanceAdjustment(e,t){let n,i;if(t.advanceWidthMapping){let s=e;s>=t.advanceWidthMapping.mapCount&&(s=t.advanceWidthMapping.mapCount-1),t.advanceWidthMapping.entryFormat,{outerIndex:n,innerIndex:i}=t.advanceWidthMapping.mapData[s]}else n=0,i=e;return this.getDelta(t.itemVariationStore,n,i)}getDelta(e,t,n){if(t>=e.itemVariationData.length)return 0;let i=e.itemVariationData[t];if(n>=i.deltaSets.length)return 0;let s=i.deltaSets[n],o=this.getBlendVector(e,t),a=0;for(let c=0;c<i.regionIndexCount;c++)a+=s.deltas[c]*o[c];return a}getBlendVector(e,t){let n=e.itemVariationData[t];if(this.blendVectors.has(n))return this.blendVectors.get(n);let i=this.normalizedCoords,s=[];for(let o=0;o<n.regionIndexCount;o++){let a=1,c=n.regionIndexes[o],u=e.variationRegionList.variationRegions[c];for(let f=0;f<u.length;f++){let d=u[f],m;d.startCoord>d.peakCoord||d.peakCoord>d.endCoord||d.startCoord<0&&d.endCoord>0&&d.peakCoord!==0||d.peakCoord===0?m=1:i[f]<d.startCoord||i[f]>d.endCoord?m=0:i[f]===d.peakCoord?m=1:i[f]<d.peakCoord?m=(i[f]-d.startCoord+Number.EPSILON)/(d.peakCoord-d.startCoord+Number.EPSILON):m=(d.endCoord-i[f]+Number.EPSILON)/(d.endCoord-d.peakCoord+Number.EPSILON),a*=m}s[o]=a}return this.blendVectors.set(n,s),s}constructor(e,t){this.font=e,this.normalizedCoords=this.normalizeCoords(t),this.blendVectors=new Map}}Promise.resolve();class Rw{includeGlyph(e){return typeof e=="object"&&(e=e.id),this.mapping[e]==null&&(this.glyphs.push(e),this.mapping[e]=this.glyphs.length-1),this.mapping[e]}constructor(e){this.font=e,this.glyphs=[],this.mapping={},this.includeGlyph(0)}}const YX=1,jX=2,ZX=4,KX=8,JX=16,QX=32;class db{static size(e){return e>=0&&e<=255?1:2}static encode(e,t){t>=0&&t<=255?e.writeUInt8(t):e.writeInt16BE(t)}}let pb=new de({numberOfContours:Le,xMin:Le,yMin:Le,xMax:Le,yMax:Le,endPtsOfContours:new J(C,"numberOfContours"),instructions:new J(Ve,C),flags:new J(Ve,0),xPoints:new J(db,0),yPoints:new J(db,0)});class eY{encodeSimple(e,t=[]){let n=[],i=[],s=[],o=[],a=0,c=0,u=0,f=0,d=0;for(let A=0;A<e.commands.length;A++){let T=e.commands[A];for(let E=0;E<T.args.length;E+=2){let P=T.args[E],y=T.args[E+1],k=0;if(T.command==="quadraticCurveTo"&&E===2){let F=e.commands[A+1];if(F&&F.command==="quadraticCurveTo"){let M=(c+F.args[0])/2,R=(u+F.args[1])/2;if(P===M&&y===R)continue}}T.command==="quadraticCurveTo"&&E===0||(k|=YX),k=this._encodePoint(P,c,i,k,jX,JX),k=this._encodePoint(y,u,s,k,ZX,QX),k===f&&a<255?(o[o.length-1]|=KX,a++):(a>0&&(o.push(a),a=0),o.push(k),f=k),c=P,u=y,d++}T.command==="closePath"&&n.push(d-1)}e.commands.length>1&&e.commands[e.commands.length-1].command!=="closePath"&&n.push(d-1);let m=e.bbox,v={numberOfContours:n.length,xMin:m.minX,yMin:m.minY,xMax:m.maxX,yMax:m.maxY,endPtsOfContours:n,instructions:t,flags:o,xPoints:i,yPoints:s},S=pb.size(v),x=4-S%4,w=new jc(S+x);return pb.encode(w,v),x!==0&&w.fill(0,x),w.buffer}_encodePoint(e,t,n,i,s,o){let a=e-t;return e===t?i|=o:(-255<=a&&a<=255&&(i|=s,a<0?a=-a:i|=o),n.push(a)),i}}class tY extends Rw{_addGlyph(e){let t=this.font.getGlyph(e),n=t._decode(),i=this.font.loca.offsets[e],s=this.font.loca.offsets[e+1],o=this.font._getTableStream("glyf");o.pos+=i;let a=o.readBuffer(s-i);if(n&&n.numberOfContours<0){a=new Uint8Array(a);let c=new DataView(a.buffer);for(let u of n.components)e=this.includeGlyph(u.glyphID),c.setUint16(u.pos,e)}else n&&this.font._variationProcessor&&(a=this.glyphEncoder.encodeSimple(t.path,n.instructions));return this.glyf.push(a),this.loca.offsets.push(this.offset),this.hmtx.metrics.push({advance:t.advanceWidth,bearing:t._getMetrics().leftBearing}),this.offset+=a.length,this.glyf.length-1}encode(){this.glyf=[],this.offset=0,this.loca={offsets:[],version:this.font.loca.version},this.hmtx={metrics:[],bearings:[]};let e=0;for(;e<this.glyphs.length;)this._addGlyph(this.glyphs[e++]);let t=Ka(this.font.maxp);t.numGlyphs=this.glyf.length,this.loca.offsets.push(this.offset);let n=Ka(this.font.head);n.indexToLocFormat=this.loca.version;let i=Ka(this.font.hhea);return i.numberOfMetrics=this.hmtx.metrics.length,_w.toBuffer({tables:{head:n,hhea:i,loca:this.loca,maxp:t,"cvt ":this.font["cvt "],prep:this.font.prep,glyf:this.glyf,hmtx:this.hmtx,fpgm:this.font.fpgm}})}constructor(e){super(e),this.glyphEncoder=new eY}}class nY extends Rw{subsetCharstrings(){this.charstrings=[];let e={};for(let t of this.glyphs){this.charstrings.push(this.cff.getCharString(t));let n=this.font.getGlyph(t);n.path;for(let i in n._usedGsubrs)e[i]=!0}this.gsubrs=this.subsetSubrs(this.cff.globalSubrIndex,e)}subsetSubrs(e,t){let n=[];for(let i=0;i<e.length;i++){let s=e[i];t[i]?(this.cff.stream.pos=s.offset,n.push(this.cff.stream.readBuffer(s.length))):n.push(new Uint8Array([11]))}return n}subsetFontdict(e){e.FDArray=[],e.FDSelect={version:0,fds:[]};let t={},n=[],i={};for(let s of this.glyphs){let o=this.cff.fdForGlyph(s);if(o==null)continue;t[o]||(e.FDArray.push(Object.assign({},this.cff.topDict.FDArray[o])),n.push({}),i[o]=e.FDArray.length-1),t[o]=!0,e.FDSelect.fds.push(i[o]);let a=this.font.getGlyph(s);a.path;for(let c in a._usedSubrs)n[i[o]][c]=!0}for(let s=0;s<e.FDArray.length;s++){let o=e.FDArray[s];delete o.FontName,o.Private&&o.Private.Subrs&&(o.Private=Object.assign({},o.Private),o.Private.Subrs=this.subsetSubrs(o.Private.Subrs,n[s]))}}createCIDFontdict(e){let t={};for(let i of this.glyphs){let s=this.font.getGlyph(i);s.path;for(let o in s._usedSubrs)t[o]=!0}let n=Object.assign({},this.cff.topDict.Private);return this.cff.topDict.Private&&this.cff.topDict.Private.Subrs&&(n.Subrs=this.subsetSubrs(this.cff.topDict.Private.Subrs,t)),e.FDArray=[{Private:n}],e.FDSelect={version:3,nRanges:1,ranges:[{first:0,fd:0}],sentinel:this.charstrings.length}}addString(e){return e?(this.strings||(this.strings=[]),this.strings.push(e),Oc.length+this.strings.length-1):null}encode(){this.subsetCharstrings();let e={version:this.charstrings.length>255?2:1,ranges:[{first:1,nLeft:this.charstrings.length-2}]},t=Object.assign({},this.cff.topDict);t.Private=null,t.charset=e,t.Encoding=null,t.CharStrings=this.charstrings;for(let i of["version","Notice","Copyright","FullName","FamilyName","Weight","PostScript","BaseFontName","FontName"])t[i]=this.addString(this.cff.string(t[i]));t.ROS=[this.addString("Adobe"),this.addString("Identity"),0],t.CIDCount=this.charstrings.length,this.cff.isCIDFont?this.subsetFontdict(t):this.createCIDFontdict(t);let n={version:1,hdrSize:this.cff.hdrSize,offSize:4,header:this.cff.header,nameIndex:[this.cff.postscriptName],topDictIndex:[t],stringIndex:this.strings,globalSubrIndex:this.gsubrs};return vw.toBuffer(n)}constructor(e){if(super(e),this.cff=this.font["CFF "],!this.cff)throw new Error("Not a CFF Font")}}class kn{static probe(e){let t=Vu.decode(e.slice(0,4));return t==="true"||t==="OTTO"||t===String.fromCharCode(0,1,0,0)}setDefaultLanguage(e=null){this.defaultLanguage=e}_getTable(e){if(!(e.tag in this._tables))try{this._tables[e.tag]=this._decodeTable(e)}catch{}return this._tables[e.tag]}_getTableStream(e){let t=this.directory.tables[e];return t?(this.stream.pos=t.offset,this.stream):null}_decodeDirectory(){return this.directory=_w.decode(this.stream,{_startOffset:0})}_decodeTable(e){let t=this.stream.pos,n=this._getTableStream(e.tag),i=nu[e.tag].decode(n,this,e.length);return this.stream.pos=t,i}getName(e,t=this.defaultLanguage||Qc){let n=this.name&&this.name.records[e];return n&&(n[t]||n[this.defaultLanguage]||n[Qc]||n.en||n[Object.keys(n)[0]])||null}get postscriptName(){return this.getName("postscriptName")}get fullName(){return this.getName("fullName")}get familyName(){return this.getName("fontFamily")}get subfamilyName(){return this.getName("fontSubfamily")}get copyright(){return this.getName("copyright")}get version(){return this.getName("version")}get ascent(){return this.hhea.ascent}get descent(){return this.hhea.descent}get lineGap(){return this.hhea.lineGap}get underlinePosition(){return this.post.underlinePosition}get underlineThickness(){return this.post.underlineThickness}get italicAngle(){return this.post.italicAngle}get capHeight(){let e=this["OS/2"];return e?e.capHeight:this.ascent}get xHeight(){let e=this["OS/2"];return e?e.xHeight:0}get numGlyphs(){return this.maxp.numGlyphs}get unitsPerEm(){return this.head.unitsPerEm}get bbox(){return Object.freeze(new ji(this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax))}get _cmapProcessor(){return new Ed(this.cmap)}get characterSet(){return this._cmapProcessor.getCharacterSet()}hasGlyphForCodePoint(e){return!!this._cmapProcessor.lookup(e)}glyphForCodePoint(e){return this.getGlyph(this._cmapProcessor.lookup(e),[e])}glyphsForString(e){let t=[],n=e.length,i=0,s=-1,o=-1;for(;i<=n;){let a=0,c=0;if(i<n){if(a=e.charCodeAt(i++),55296<=a&&a<=56319&&i<n){let u=e.charCodeAt(i);56320<=u&&u<=57343&&(i++,a=((a&1023)<<10)+(u&1023)+65536)}c=65024<=a&&a<=65039||917760<=a&&a<=917999?1:0}else i++;o===0&&c===1?t.push(this.getGlyph(this._cmapProcessor.lookup(s,a),[s,a])):o===0&&c===0&&t.push(this.glyphForCodePoint(s)),s=a,o=c}return t}get _layoutEngine(){return new _X(this)}layout(e,t,n,i,s){return this._layoutEngine.layout(e,t,n,i,s)}stringsForGlyph(e){return this._layoutEngine.stringsForGlyph(e)}get availableFeatures(){return this._layoutEngine.getAvailableFeatures()}getAvailableFeatures(e,t){return this._layoutEngine.getAvailableFeatures(e,t)}_getBaseGlyph(e,t=[]){return this._glyphs[e]||(this.directory.tables.glyf?this._glyphs[e]=new Hu(e,t,this):(this.directory.tables["CFF "]||this.directory.tables.CFF2)&&(this._glyphs[e]=new OX(e,t,this))),this._glyphs[e]||null}getGlyph(e,t=[]){return this._glyphs[e]||(this.directory.tables.sbix?this._glyphs[e]=new NX(e,t,this):this.directory.tables.COLR&&this.directory.tables.CPAL?this._glyphs[e]=new UX(e,t,this):this._getBaseGlyph(e,t)),this._glyphs[e]||null}createSubset(){return this.directory.tables["CFF "]?new nY(this):new tY(this)}get variationAxes(){let e={};if(!this.fvar)return e;for(let t of this.fvar.axis)e[t.axisTag.trim()]={name:t.name.en,min:t.minValue,default:t.defaultValue,max:t.maxValue};return e}get namedVariations(){let e={};if(!this.fvar)return e;for(let t of this.fvar.instance){let n={};for(let i=0;i<this.fvar.axis.length;i++){let s=this.fvar.axis[i];n[s.axisTag.trim()]=t.coord[i]}e[t.name.en]=n}return e}getVariation(e){if(!(this.directory.tables.fvar&&(this.directory.tables.gvar&&this.directory.tables.glyf||this.directory.tables.CFF2)))throw new Error("Variations require a font with the fvar, gvar and glyf, or CFF2 tables.");if(typeof e=="string"&&(e=this.namedVariations[e]),typeof e!="object")throw new Error("Variation settings must be either a variation name or settings object.");let t=this.fvar.axis.map((s,o)=>{let a=s.axisTag.trim();return a in e?Math.max(s.minValue,Math.min(s.maxValue,e[a])):s.defaultValue}),n=new Sn(this.stream.buffer);n.pos=this._directoryPos;let i=new kn(n,t);return i._tables=this._tables,i}get _variationProcessor(){if(!this.fvar)return null;let e=this.variationCoords;return!e&&!this.CFF2?null:(e||(e=this.fvar.axis.map(t=>t.defaultValue)),new XX(this,e))}getFont(e){return this.getVariation(e)}constructor(e,t=null){Jn(this,"type","TTF"),this.defaultLanguage=null,this.stream=e,this.variationCoords=t,this._directoryPos=this.stream.pos,this._tables={},this._glyphs={},this._decodeDirectory();for(let n in this.directory.tables){let i=this.directory.tables[n];nu[n]&&i.length>0&&Object.defineProperty(this,n,{get:this._getTable.bind(this,i)})}}}Mn([En],kn.prototype,"bbox",null);Mn([En],kn.prototype,"_cmapProcessor",null);Mn([En],kn.prototype,"characterSet",null);Mn([En],kn.prototype,"_layoutEngine",null);Mn([En],kn.prototype,"variationAxes",null);Mn([En],kn.prototype,"namedVariations",null);Mn([En],kn.prototype,"_variationProcessor",null);let rY=new de({tag:new Pt(4),offset:new ee(ne,"void",{type:"global"}),compLength:ne,length:ne,origChecksum:ne}),kw=new de({tag:new Pt(4),flavor:ne,length:ne,numTables:C,reserved:new zt(C),totalSfntSize:ne,majorVersion:C,minorVersion:C,metaOffset:ne,metaLength:ne,metaOrigLength:ne,privOffset:ne,privLength:ne,tables:new J(rY,"numTables")});kw.process=function(){let r={};for(let e of this.tables)r[e.tag]=e;this.tables=r};var iY=kw;class sY extends kn{static probe(e){return Vu.decode(e.slice(0,4))==="wOFF"}_decodeDirectory(){this.directory=iY.decode(this.stream,{_startOffset:0})}_getTableStream(e){let t=this.directory.tables[e];if(t)if(this.stream.pos=t.offset,t.compLength<t.length){this.stream.pos+=2;let n=new Uint8Array(t.length),i=H2(this.stream.readBuffer(t.compLength-2),n);return new Sn(i)}else return this.stream;return null}constructor(...e){super(...e),Jn(this,"type","WOFF")}}class oY extends Hu{_decode(){return this._font._transformedGlyphs[this.id]}_getCBox(){return this.path.bbox}constructor(...e){super(...e),Jn(this,"type","WOFF2")}}const mb={decode(r){let e=0,t=[0,1,2,3,4];for(let n=0;n<t.length;n++){let i=r.readUInt8();if(e&3758096384)throw new Error("Overflow");if(e=e<<7|i&127,!(i&128))return e}throw new Error("Bad base 128 number")}};let aY=["cmap","head","hhea","hmtx","maxp","name","OS/2","post","cvt ","fpgm","glyf","loca","prep","CFF ","VORG","EBDT","EBLC","gasp","hdmx","kern","LTSH","PCLT","VDMX","vhea","vmtx","BASE","GDEF","GPOS","GSUB","EBSC","JSTF","MATH","CBDT","CBLC","COLR","CPAL","SVG ","sbix","acnt","avar","bdat","bloc","bsln","cvar","fdsc","feat","fmtx","fvar","gvar","hsty","just","lcar","mort","morx","opbd","prop","trak","Zapf","Silf","Glat","Gloc","Feat","Sill"],lY=new de({flags:Ve,customTag:new Zc(new Pt(4),r=>(r.flags&63)===63),tag:r=>r.customTag||aY[r.flags&63],length:mb,transformVersion:r=>r.flags>>>6&3,transformed:r=>r.tag==="glyf"||r.tag==="loca"?r.transformVersion===0:r.transformVersion!==0,transformLength:new Zc(mb,r=>r.transformed)}),Fw=new de({tag:new Pt(4),flavor:ne,length:ne,numTables:C,reserved:new zt(C),totalSfntSize:ne,totalCompressedSize:ne,majorVersion:C,minorVersion:C,metaOffset:ne,metaLength:ne,metaOrigLength:ne,privOffset:ne,privLength:ne,tables:new J(lY,"numTables")});Fw.process=function(){let r={};for(let e=0;e<this.tables.length;e++){let t=this.tables[e];r[t.tag]=t}return this.tables=r};var cY=Fw;class uY extends kn{static probe(e){return Vu.decode(e.slice(0,4))==="wOF2"}_decodeDirectory(){this.directory=cY.decode(this.stream),this._dataPos=this.stream.pos}_decompress(){if(!this._decompressed){this.stream.pos=this._dataPos;let e=this.stream.readBuffer(this.directory.totalCompressedSize),t=0;for(let i in this.directory.tables){let s=this.directory.tables[i];s.offset=t,t+=s.transformLength!=null?s.transformLength:s.length}let n=k$(e,t);if(!n)throw new Error("Error decoding compressed data in WOFF2");this.stream=new Sn(n),this._decompressed=!0}}_decodeTable(e){return this._decompress(),super._decodeTable(e)}_getBaseGlyph(e,t=[]){if(!this._glyphs[e])return this.directory.tables.glyf&&this.directory.tables.glyf.transformed?(this._transformedGlyphs||this._transformGlyfTable(),this._glyphs[e]=new oY(e,t,this)):super._getBaseGlyph(e,t)}_transformGlyfTable(){this._decompress(),this.stream.pos=this.directory.tables.glyf.offset;let e=hY.decode(this.stream),t=[];for(let i=0;i<e.numGlyphs;i++){let s={},o=e.nContours.readInt16BE();if(s.numberOfContours=o,o>0){let a=[],c=0;for(let u=0;u<o;u++){let f=$h(e.nPoints);c+=f,a.push(c)}s.points=mY(e.flags,e.glyphs,c);for(let u=0;u<o;u++)s.points[a[u]-1].endContour=!0;var n=$h(e.glyphs)}else if(o<0&&Hu.prototype._decodeComposite.call({_font:this},s,e.composites))var n=$h(e.glyphs);t.push(s)}this._transformedGlyphs=t}constructor(...e){super(...e),Jn(this,"type","WOFF2")}}class cs{decode(e,t){return new Sn(this._buf.decode(e,t))}constructor(e){this.length=e,this._buf=new Gr(e)}}let hY=new de({version:ne,numGlyphs:C,indexFormat:C,nContourStreamSize:ne,nPointsStreamSize:ne,flagStreamSize:ne,glyphStreamSize:ne,compositeStreamSize:ne,bboxStreamSize:ne,instructionStreamSize:ne,nContours:new cs("nContourStreamSize"),nPoints:new cs("nPointsStreamSize"),flags:new cs("flagStreamSize"),glyphs:new cs("glyphStreamSize"),composites:new cs("compositeStreamSize"),bboxes:new cs("bboxStreamSize"),instructions:new cs("instructionStreamSize")});const fY=253,dY=254,pY=255,gb=253;function $h(r){let e=r.readUInt8();return e===fY?r.readUInt16BE():e===pY?r.readUInt8()+gb:e===dY?r.readUInt8()+gb*2:e}function Rr(r,e){return r&1?e:-e}function mY(r,e,t){let n,i=n=0,s=[];for(let c=0;c<t;c++){let u=0,f=0,d=r.readUInt8(),m=!(d>>7);if(d&=127,d<10)u=0,f=Rr(d,((d&14)<<7)+e.readUInt8());else if(d<20)u=Rr(d,((d-10&14)<<7)+e.readUInt8()),f=0;else if(d<84){var o=d-20,a=e.readUInt8();u=Rr(d,1+(o&48)+(a>>4)),f=Rr(d>>1,1+((o&12)<<2)+(a&15))}else if(d<120){var o=d-84;u=Rr(d,1+(o/12<<8)+e.readUInt8()),f=Rr(d>>1,1+(o%12>>2<<8)+e.readUInt8())}else if(d<124){var a=e.readUInt8();let S=e.readUInt8();u=Rr(d,(a<<4)+(S>>4)),f=Rr(d>>1,((S&15)<<8)+e.readUInt8())}else u=Rr(d,e.readUInt16BE()),f=Rr(d>>1,e.readUInt16BE());i+=u,n+=f,s.push(new Cr(m,!1,i,n))}return s}let gY=new pt(ne,{65536:{numFonts:ne,offsets:new J(ne,"numFonts")},131072:{numFonts:ne,offsets:new J(ne,"numFonts"),dsigTag:ne,dsigLength:ne,dsigOffset:ne}});class vY{static probe(e){return Vu.decode(e.slice(0,4))==="ttcf"}getFont(e){for(let t of this.header.offsets){let n=new Sn(this.stream.buffer);n.pos=t;let i=new kn(n);if(i.postscriptName===e||i.postscriptName instanceof Uint8Array&&e instanceof Uint8Array&&i.postscriptName.every((s,o)=>e[o]===s))return i}return null}get fonts(){let e=[];for(let t of this.header.offsets){let n=new Sn(this.stream.buffer);n.pos=t,e.push(new kn(n))}return e}constructor(e){if(Jn(this,"type","TTC"),this.stream=e,e.readString(4)!=="ttcf")throw new Error("Not a TrueType collection");this.header=gY.decode(e)}}let bY=new Pt(Ve);new de({len:ne,buf:new Gr("len")});let xY=new de({id:C,nameOffset:Le,attr:Ve,dataOffset:Wi,handle:ne}),wY=new de({name:new Pt(4),maxTypeIndex:C,refList:new ee(C,new J(xY,r=>r.maxTypeIndex+1),{type:"parent"})}),yY=new de({length:C,types:new J(wY,r=>r.length+1)}),_Y=new de({reserved:new zt(Ve,24),typeList:new ee(C,yY),nameListOffset:new ee(C,"void")}),vb=new de({dataOffset:ne,map:new ee(ne,_Y),dataLength:ne,mapLength:ne});class SY{static probe(e){let t=new Sn(e);try{var n=vb.decode(t)}catch{return!1}for(let i of n.map.typeList.types)if(i.name==="sfnt")return!0;return!1}getFont(e){if(!this.sfnt)return null;for(let t of this.sfnt.refList){let n=this.header.dataOffset+t.dataOffset+4,i=new Sn(this.stream.buffer.slice(n)),s=new kn(i);if(s.postscriptName===e||s.postscriptName instanceof Uint8Array&&e instanceof Uint8Array&&s.postscriptName.every((o,a)=>e[a]===o))return s}return null}get fonts(){let e=[];for(let t of this.sfnt.refList){let n=this.header.dataOffset+t.dataOffset+4,i=new Sn(this.stream.buffer.slice(n));e.push(new kn(i))}return e}constructor(e){Jn(this,"type","DFont"),this.stream=e,this.header=vb.decode(this.stream);for(let t of this.header.map.typeList.types){for(let n of t.refList)n.nameOffset>=0?(this.stream.pos=n.nameOffset+this.header.map.nameListOffset,n.name=bY.decode(this.stream)):n.name=null;t.name==="sfnt"&&(this.sfnt=t)}}}oa(kn);oa(sY);oa(uY);oa(vY);oa(SY);class CY{parse(e,t={}){t=Object.assign({binary:!1},t);const n=t.binary,i=[];let s=0;e.traverse(function(A){if(A.isMesh){const T=A.geometry,E=T.index,P=T.getAttribute("position");s+=E!==null?E.count/3:P.count/3,i.push({object3d:A,geometry:T})}});let o,a=80;if(n===!0){const A=s*2+s*3*4*4+80+4,T=new ArrayBuffer(A);o=new DataView(T),o.setUint32(a,s,!0),a+=4}else o="",o+=`solid exported
`;const c=new Y,u=new Y,f=new Y,d=new Y,m=new Y,v=new Y;for(let A=0,T=i.length;A<T;A++){const E=i[A].object3d,P=i[A].geometry,y=P.index,k=P.getAttribute("position");if(y!==null)for(let F=0;F<y.count;F+=3){const M=y.getX(F+0),R=y.getX(F+1),O=y.getX(F+2);S(M,R,O,k,E)}else for(let F=0;F<k.count;F+=3){const M=F+0,R=F+1,O=F+2;S(M,R,O,k,E)}}return n===!1&&(o+=`endsolid exported
`),o;function S(A,T,E,P,y){c.fromBufferAttribute(P,A),u.fromBufferAttribute(P,T),f.fromBufferAttribute(P,E),y.isSkinnedMesh===!0&&(y.boneTransform(A,c),y.boneTransform(T,u),y.boneTransform(E,f)),c.applyMatrix4(y.matrixWorld),u.applyMatrix4(y.matrixWorld),f.applyMatrix4(y.matrixWorld),x(c,u,f),w(c),w(u),w(f),n===!0?(o.setUint16(a,0,!0),a+=2):(o+=`		endloop
`,o+=`	endfacet
`)}function x(A,T,E){d.subVectors(E,T),m.subVectors(A,T),d.cross(m).normalize(),v.copy(d).normalize(),n===!0?(o.setFloat32(a,v.x,!0),a+=4,o.setFloat32(a,v.y,!0),a+=4,o.setFloat32(a,v.z,!0),a+=4):(o+="	facet normal "+v.x+" "+v.y+" "+v.z+`
`,o+=`		outer loop
`)}function w(A){n===!0?(o.setFloat32(a,A.x,!0),a+=4,o.setFloat32(a,A.y,!0),a+=4,o.setFloat32(a,A.z,!0),a+=4):o+="			vertex "+A.x+" "+A.y+" "+A.z+`
`}}}var uu={},MY={get exports(){return uu},set exports(r){uu=r}};/*! Tweakpane 3.1.4 (c) 2016 cocopon, licensed under the MIT license. */(function(r,e){(function(t,n){n(e)})(Po,function(t){class n{constructor(l){const[h,g]=l.split("-"),D=h.split(".");this.major=parseInt(D[0],10),this.minor=parseInt(D[1],10),this.patch=parseInt(D[2],10),this.prerelease=g??null}toString(){const l=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[l,this.prerelease].join("-"):l}}class i{constructor(l){this.controller_=l}get element(){return this.controller_.view.element}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(l){this.controller_.viewProps.set("disabled",l)}get hidden(){return this.controller_.viewProps.get("hidden")}set hidden(l){this.controller_.viewProps.set("hidden",l)}dispose(){this.controller_.viewProps.set("disposed",!0)}}class s{constructor(l){this.target=l}}class o extends s{constructor(l,h,g,D){super(l),this.value=h,this.presetKey=g,this.last=D??!0}}class a extends s{constructor(l,h,g){super(l),this.value=h,this.presetKey=g}}class c extends s{constructor(l,h){super(l),this.expanded=h}}class u extends s{constructor(l,h){super(l),this.index=h}}function f(p){return p}function d(p){return p==null}function m(p,l){if(p.length!==l.length)return!1;for(let h=0;h<p.length;h++)if(p[h]!==l[h])return!1;return!0}function v(p,l){let h=p;do{const g=Object.getOwnPropertyDescriptor(h,l);if(g&&(g.set!==void 0||g.writable===!0))return!0;h=Object.getPrototypeOf(h)}while(h!==null);return!1}const S={alreadydisposed:()=>"View has been already disposed",invalidparams:p=>`Invalid parameters for '${p.name}'`,nomatchingcontroller:p=>`No matching controller for '${p.key}'`,nomatchingview:p=>`No matching view for '${JSON.stringify(p.params)}'`,notbindable:()=>"Value is not bindable",propertynotfound:p=>`Property '${p.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class x{constructor(l){var h;this.message=(h=S[l.type](l.context))!==null&&h!==void 0?h:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=l.type}static alreadyDisposed(){return new x({type:"alreadydisposed"})}static notBindable(){return new x({type:"notbindable"})}static propertyNotFound(l){return new x({type:"propertynotfound",context:{name:l}})}static shouldNeverHappen(){return new x({type:"shouldneverhappen"})}}class w{constructor(l,h,g){this.obj_=l,this.key_=h,this.presetKey_=g??h}static isBindable(l){return!(l===null||typeof l!="object")}get key(){return this.key_}get presetKey(){return this.presetKey_}read(){return this.obj_[this.key_]}write(l){this.obj_[this.key_]=l}writeProperty(l,h){const g=this.read();if(!w.isBindable(g))throw x.notBindable();if(!(l in g))throw x.propertyNotFound(l);g[l]=h}}class A extends i{get label(){return this.controller_.props.get("label")}set label(l){this.controller_.props.set("label",l)}get title(){var l;return(l=this.controller_.valueController.props.get("title"))!==null&&l!==void 0?l:""}set title(l){this.controller_.valueController.props.set("title",l)}on(l,h){const g=h.bind(this);return this.controller_.valueController.emitter.on(l,()=>{g(new s(this))}),this}}class T{constructor(){this.observers_={}}on(l,h){let g=this.observers_[l];return g||(g=this.observers_[l]=[]),g.push({handler:h}),this}off(l,h){const g=this.observers_[l];return g&&(this.observers_[l]=g.filter(D=>D.handler!==h)),this}emit(l,h){const g=this.observers_[l];g&&g.forEach(D=>{D.handler(h)})}}const E="tp";function P(p){return(h,g)=>[E,"-",p,"v",h?`_${h}`:"",g?`-${g}`:""].join("")}function y(p,l){return h=>l(p(h))}function k(p){return p.rawValue}function F(p,l){p.emitter.on("change",y(k,l)),l(p.rawValue)}function M(p,l,h){F(p.value(l),h)}function R(p,l,h){h?p.classList.add(l):p.classList.remove(l)}function O(p,l){return h=>{R(p,l,h)}}function z(p,l){F(p,h=>{l.textContent=h??""})}const Q=P("btn");class G{constructor(l,h){this.element=l.createElement("div"),this.element.classList.add(Q()),h.viewProps.bindClassModifiers(this.element);const g=l.createElement("button");g.classList.add(Q("b")),h.viewProps.bindDisabled(g),this.element.appendChild(g),this.buttonElement=g;const D=l.createElement("div");D.classList.add(Q("t")),z(h.props.value("title"),D),this.buttonElement.appendChild(D)}}class V{constructor(l,h){this.emitter=new T,this.onClick_=this.onClick_.bind(this),this.props=h.props,this.viewProps=h.viewProps,this.view=new G(l,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class q{constructor(l,h){var g;this.constraint_=h==null?void 0:h.constraint,this.equals_=(g=h==null?void 0:h.equals)!==null&&g!==void 0?g:(D,H)=>D===H,this.emitter=new T,this.rawValue_=l}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(l){this.setRawValue(l,{forceEmit:!1,last:!0})}setRawValue(l,h){const g=h??{forceEmit:!1,last:!0},D=this.constraint_?this.constraint_.constrain(l):l,H=this.rawValue_;this.equals_(H,D)&&!g.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=D,this.emitter.emit("change",{options:g,previousRawValue:H,rawValue:D,sender:this}))}}class j{constructor(l){this.emitter=new T,this.value_=l}get rawValue(){return this.value_}set rawValue(l){this.setRawValue(l,{forceEmit:!1,last:!0})}setRawValue(l,h){const g=h??{forceEmit:!1,last:!0},D=this.value_;D===l&&!g.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=l,this.emitter.emit("change",{options:g,previousRawValue:D,rawValue:this.value_,sender:this}))}}function ge(p,l){const h=l==null?void 0:l.constraint,g=l==null?void 0:l.equals;return!h&&!g?new j(p):new q(p,l)}class K{constructor(l){this.emitter=new T,this.valMap_=l;for(const h in this.valMap_)this.valMap_[h].emitter.on("change",()=>{this.emitter.emit("change",{key:h,sender:this})})}static createCore(l){return Object.keys(l).reduce((g,D)=>Object.assign(g,{[D]:ge(l[D])}),{})}static fromObject(l){const h=this.createCore(l);return new K(h)}get(l){return this.valMap_[l].rawValue}set(l,h){this.valMap_[l].rawValue=h}value(l){return this.valMap_[l]}}function Ee(p,l){const g=Object.keys(l).reduce((D,H)=>{if(D===void 0)return;const ie=l[H],Fe=ie(p[H]);return Fe.succeeded?Object.assign(Object.assign({},D),{[H]:Fe.value}):void 0},{});return g}function Pe(p,l){return p.reduce((h,g)=>{if(h===void 0)return;const D=l(g);if(!(!D.succeeded||D.value===void 0))return[...h,D.value]},[])}function re(p){return p===null?!1:typeof p=="object"}function ae(p){return l=>h=>{if(!l&&h===void 0)return{succeeded:!1,value:void 0};if(l&&h===void 0)return{succeeded:!0,value:void 0};const g=p(h);return g!==void 0?{succeeded:!0,value:g}:{succeeded:!1,value:void 0}}}function xe(p){return{custom:l=>ae(l)(p),boolean:ae(l=>typeof l=="boolean"?l:void 0)(p),number:ae(l=>typeof l=="number"?l:void 0)(p),string:ae(l=>typeof l=="string"?l:void 0)(p),function:ae(l=>typeof l=="function"?l:void 0)(p),constant:l=>ae(h=>h===l?l:void 0)(p),raw:ae(l=>l)(p),object:l=>ae(h=>{if(re(h))return Ee(h,l)})(p),array:l=>ae(h=>{if(Array.isArray(h))return Pe(h,l)})(p)}}const be={optional:xe(!0),required:xe(!1)};function De(p,l){const h=be.required.object(l)(p);return h.succeeded?h.value:void 0}function ve(p){console.warn([`Missing '${p.key}' of ${p.target} in ${p.place}.`,"Please rebuild plugins with the latest core package."].join(" "))}function Je(p){return p&&p.parentElement&&p.parentElement.removeChild(p),null}class pe{constructor(l){this.value_=l}static create(l){return[new pe(l),(h,g)=>{l.setRawValue(h,g)}]}get emitter(){return this.value_.emitter}get rawValue(){return this.value_.rawValue}}const he=P("");function le(p,l){return O(p,he(void 0,l))}class ue extends K{constructor(l){var h;super(l),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=pe.create(ge(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(h=this.get("parent"))===null||h===void 0||h.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(l){var h,g,D;const H=l??{};return new ue(K.createCore({disabled:(h=H.disabled)!==null&&h!==void 0?h:!1,disposed:!1,hidden:(g=H.hidden)!==null&&g!==void 0?g:!1,parent:(D=H.parent)!==null&&D!==void 0?D:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(l){F(this.globalDisabled_,le(l,"disabled")),M(this,"hidden",le(l,"hidden"))}bindDisabled(l){F(this.globalDisabled_,h=>{l.disabled=h})}bindTabIndex(l){F(this.globalDisabled_,h=>{l.tabIndex=h?-1:0})}handleDispose(l){this.value("disposed").emitter.on("change",h=>{h&&l()})}getGlobalDisabled_(){const l=this.get("parent");return(l?l.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(l){var h;const g=l.previousRawValue;g==null||g.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(h=this.get("parent"))===null||h===void 0||h.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}function te(){return["veryfirst","first","last","verylast"]}const se=P(""),me={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class _e{constructor(l){this.parent_=null,this.blade=l.blade,this.view=l.view,this.viewProps=l.viewProps;const h=this.view.element;this.blade.value("positions").emitter.on("change",()=>{te().forEach(g=>{h.classList.remove(se(void 0,me[g]))}),this.blade.get("positions").forEach(g=>{h.classList.add(se(void 0,me[g]))})}),this.viewProps.handleDispose(()=>{Je(h)})}get parent(){return this.parent_}set parent(l){if(this.parent_=l,!("parent"in this.viewProps.valMap_)){ve({key:"parent",target:ue.name,place:"BladeController.parent"});return}this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}}const we="http://www.w3.org/2000/svg";function Ie(p){p.offsetHeight}function Ce(p,l){const h=p.style.transition;p.style.transition="none",l(),p.style.transition=h}function Oe(p){return p.ontouchstart!==void 0}function tt(){return globalThis}function Ze(){return tt().document}function N(p){const l=p.ownerDocument.defaultView;return l&&"document"in l?p.getContext("2d",{willReadFrequently:!0}):null}const B={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function oe(p,l){const h=p.createElementNS(we,"svg");return h.innerHTML=B[l],h}function Me(p,l,h){p.insertBefore(l,p.children[h])}function Re(p){p.parentElement&&p.parentElement.removeChild(p)}function L(p){for(;p.children.length>0;)p.removeChild(p.children[0])}function _(p){for(;p.childNodes.length>0;)p.removeChild(p.childNodes[0])}function b(p){return p.relatedTarget?p.relatedTarget:"explicitOriginalTarget"in p?p.explicitOriginalTarget:null}const I=P("lbl");function $(p,l){const h=p.createDocumentFragment();return l.split(`
`).map(D=>p.createTextNode(D)).forEach((D,H)=>{H>0&&h.appendChild(p.createElement("br")),h.appendChild(D)}),h}class W{constructor(l,h){this.element=l.createElement("div"),this.element.classList.add(I()),h.viewProps.bindClassModifiers(this.element);const g=l.createElement("div");g.classList.add(I("l")),M(h.props,"label",H=>{d(H)?this.element.classList.add(I(void 0,"nol")):(this.element.classList.remove(I(void 0,"nol")),_(g),g.appendChild($(l,H)))}),this.element.appendChild(g),this.labelElement=g;const D=l.createElement("div");D.classList.add(I("v")),this.element.appendChild(D),this.valueElement=D}}class X extends _e{constructor(l,h){const g=h.valueController.viewProps;super(Object.assign(Object.assign({},h),{view:new W(l,{props:h.props,viewProps:g}),viewProps:g})),this.props=h.props,this.valueController=h.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}const Te={id:"button",type:"blade",accept(p){const l=be,h=De(p,{title:l.required.string,view:l.required.constant("button"),label:l.optional.string});return h?{params:h}:null},controller(p){return new X(p.document,{blade:p.blade,props:K.fromObject({label:p.params.label}),valueController:new V(p.document,{props:K.fromObject({title:p.params.title}),viewProps:p.viewProps})})},api(p){return!(p.controller instanceof X)||!(p.controller.valueController instanceof V)?null:new A(p.controller)}};class Be extends _e{constructor(l){super(l),this.value=l.value}}function We(){return new K({positions:ge([],{equals:m})})}class qe extends K{constructor(l){super(l)}static create(l){const h={completed:!0,expanded:l,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},g=K.createCore(h);return new qe(g)}get styleExpanded(){var l;return(l=this.get("temporaryExpanded"))!==null&&l!==void 0?l:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const l=this.get("expandedHeight");return this.get("shouldFixHeight")&&!d(l)?`${l}px`:"auto"}bindExpandedClass(l,h){const g=()=>{this.styleExpanded?l.classList.add(h):l.classList.remove(h)};M(this,"expanded",g),M(this,"temporaryExpanded",g)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function Xe(p,l){let h=0;return Ce(l,()=>{p.set("expandedHeight",null),p.set("temporaryExpanded",!0),Ie(l),h=l.clientHeight,p.set("temporaryExpanded",null),Ie(l)}),h}function Z(p,l){l.style.height=p.styleHeight}function ye(p,l){p.value("expanded").emitter.on("beforechange",()=>{p.set("completed",!1),d(p.get("expandedHeight"))&&p.set("expandedHeight",Xe(p,l)),p.set("shouldFixHeight",!0),Ie(l)}),p.emitter.on("change",()=>{Z(p,l)}),Z(p,l),l.addEventListener("transitionend",h=>{h.propertyName==="height"&&p.cleanUpTransition()})}class ke extends i{constructor(l,h){super(l),this.rackApi_=h}}function He(p,l){return p.addBlade(Object.assign(Object.assign({},l),{view:"button"}))}function je(p,l){return p.addBlade(Object.assign(Object.assign({},l),{view:"folder"}))}function wt(p,l){const h=l??{};return p.addBlade(Object.assign(Object.assign({},h),{view:"separator"}))}function qt(p,l){return p.addBlade(Object.assign(Object.assign({},l),{view:"tab"}))}class Xt{constructor(l){this.emitter=new T,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=l}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(l){for(const h of this.allItems())if(l(h))return h;return null}includes(l){return this.cache_.has(l)}add(l,h){if(this.includes(l))throw x.shouldNeverHappen();const g=h!==void 0?h:this.items_.length;this.items_.splice(g,0,l),this.cache_.add(l);const D=this.extract_(l);D&&(D.emitter.on("add",this.onSubListAdd_),D.emitter.on("remove",this.onSubListRemove_),D.allItems().forEach(H=>{this.cache_.add(H)})),this.emitter.emit("add",{index:g,item:l,root:this,target:this})}remove(l){const h=this.items_.indexOf(l);if(h<0)return;this.items_.splice(h,1),this.cache_.delete(l);const g=this.extract_(l);g&&(g.emitter.off("add",this.onSubListAdd_),g.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:h,item:l,root:this,target:this})}onSubListAdd_(l){this.cache_.add(l.item),this.emitter.emit("add",{index:l.index,item:l.item,root:this,target:l.target})}onSubListRemove_(l){this.cache_.delete(l.item),this.emitter.emit("remove",{index:l.index,item:l.item,root:this,target:l.target})}}class Fn extends i{constructor(l){super(l),this.onBindingChange_=this.onBindingChange_.bind(this),this.emitter_=new T,this.controller_.binding.emitter.on("change",this.onBindingChange_)}get label(){return this.controller_.props.get("label")}set label(l){this.controller_.props.set("label",l)}on(l,h){const g=h.bind(this);return this.emitter_.on(l,D=>{g(D.event)}),this}refresh(){this.controller_.binding.read()}onBindingChange_(l){const h=l.sender.target.read();this.emitter_.emit("change",{event:new o(this,h,this.controller_.binding.target.presetKey,l.options.last)})}}class mt extends X{constructor(l,h){super(l,h),this.binding=h.binding}}class An extends i{constructor(l){super(l),this.onBindingUpdate_=this.onBindingUpdate_.bind(this),this.emitter_=new T,this.controller_.binding.emitter.on("update",this.onBindingUpdate_)}get label(){return this.controller_.props.get("label")}set label(l){this.controller_.props.set("label",l)}on(l,h){const g=h.bind(this);return this.emitter_.on(l,D=>{g(D.event)}),this}refresh(){this.controller_.binding.read()}onBindingUpdate_(l){const h=l.sender.target.read();this.emitter_.emit("update",{event:new a(this,h,this.controller_.binding.target.presetKey)})}}class Nt extends X{constructor(l,h){super(l,h),this.binding=h.binding,this.viewProps.bindDisabled(this.binding.ticker),this.viewProps.handleDispose(()=>{this.binding.dispose()})}}function Ji(p){return p instanceof Qn?p.apiSet_:p instanceof ke?p.rackApi_.apiSet_:null}function xr(p,l){const h=p.find(g=>g.controller_===l);if(!h)throw x.shouldNeverHappen();return h}function wi(p,l,h){if(!w.isBindable(p))throw x.notBindable();return new w(p,l,h)}class Qn extends i{constructor(l,h){super(l),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.onRackInputChange_=this.onRackInputChange_.bind(this),this.onRackMonitorUpdate_=this.onRackMonitorUpdate_.bind(this),this.emitter_=new T,this.apiSet_=new Xt(Ji),this.pool_=h;const g=this.controller_.rack;g.emitter.on("add",this.onRackAdd_),g.emitter.on("remove",this.onRackRemove_),g.emitter.on("inputchange",this.onRackInputChange_),g.emitter.on("monitorupdate",this.onRackMonitorUpdate_),g.children.forEach(D=>{this.setUpApi_(D)})}get children(){return this.controller_.rack.children.map(l=>xr(this.apiSet_,l))}addInput(l,h,g){const D=g??{},H=this.controller_.view.element.ownerDocument,ie=this.pool_.createInput(H,wi(l,h,D.presetKey),D),Fe=new Fn(ie);return this.add(Fe,D.index)}addMonitor(l,h,g){const D=g??{},H=this.controller_.view.element.ownerDocument,ie=this.pool_.createMonitor(H,wi(l,h),D),Fe=new An(ie);return this.add(Fe,D.index)}addFolder(l){return je(this,l)}addButton(l){return He(this,l)}addSeparator(l){return wt(this,l)}addTab(l){return qt(this,l)}add(l,h){this.controller_.rack.add(l.controller_,h);const g=this.apiSet_.find(D=>D.controller_===l.controller_);return g&&this.apiSet_.remove(g),this.apiSet_.add(l),l}remove(l){this.controller_.rack.remove(l.controller_)}addBlade(l){const h=this.controller_.view.element.ownerDocument,g=this.pool_.createBlade(h,l),D=this.pool_.createBladeApi(g);return this.add(D,l.index)}on(l,h){const g=h.bind(this);return this.emitter_.on(l,D=>{g(D.event)}),this}setUpApi_(l){this.apiSet_.find(g=>g.controller_===l)||this.apiSet_.add(this.pool_.createBladeApi(l))}onRackAdd_(l){this.setUpApi_(l.bladeController)}onRackRemove_(l){if(l.isRoot){const h=xr(this.apiSet_,l.bladeController);this.apiSet_.remove(h)}}onRackInputChange_(l){const h=l.bladeController;if(h instanceof mt){const g=xr(this.apiSet_,h),D=h.binding;this.emitter_.emit("change",{event:new o(g,D.target.read(),D.target.presetKey,l.options.last)})}else if(h instanceof Be){const g=xr(this.apiSet_,h);this.emitter_.emit("change",{event:new o(g,h.value.rawValue,void 0,l.options.last)})}}onRackMonitorUpdate_(l){if(!(l.bladeController instanceof Nt))throw x.shouldNeverHappen();const h=xr(this.apiSet_,l.bladeController),g=l.bladeController.binding;this.emitter_.emit("update",{event:new a(h,g.target.read(),g.target.presetKey)})}}class U extends ke{constructor(l,h){super(l,new Qn(l.rackController,h)),this.emitter_=new T,this.controller_.foldable.value("expanded").emitter.on("change",g=>{this.emitter_.emit("fold",{event:new c(this,g.sender.rawValue)})}),this.rackApi_.on("change",g=>{this.emitter_.emit("change",{event:g})}),this.rackApi_.on("update",g=>{this.emitter_.emit("update",{event:g})})}get expanded(){return this.controller_.foldable.get("expanded")}set expanded(l){this.controller_.foldable.set("expanded",l)}get title(){return this.controller_.props.get("title")}set title(l){this.controller_.props.set("title",l)}get children(){return this.rackApi_.children}addInput(l,h,g){return this.rackApi_.addInput(l,h,g)}addMonitor(l,h,g){return this.rackApi_.addMonitor(l,h,g)}addFolder(l){return this.rackApi_.addFolder(l)}addButton(l){return this.rackApi_.addButton(l)}addSeparator(l){return this.rackApi_.addSeparator(l)}addTab(l){return this.rackApi_.addTab(l)}add(l,h){return this.rackApi_.add(l,h)}remove(l){this.rackApi_.remove(l)}addBlade(l){return this.rackApi_.addBlade(l)}on(l,h){const g=h.bind(this);return this.emitter_.on(l,D=>{g(D.event)}),this}}class fe extends _e{constructor(l){super({blade:l.blade,view:l.view,viewProps:l.rackController.viewProps}),this.rackController=l.rackController}}class Se{constructor(l,h){const g=P(h.viewName);this.element=l.createElement("div"),this.element.classList.add(g()),h.viewProps.bindClassModifiers(this.element)}}function ce(p,l){for(let h=0;h<p.length;h++){const g=p[h];if(g instanceof mt&&g.binding===l)return g}return null}function Ae(p,l){for(let h=0;h<p.length;h++){const g=p[h];if(g instanceof Nt&&g.binding===l)return g}return null}function Qe(p,l){for(let h=0;h<p.length;h++){const g=p[h];if(g instanceof Be&&g.value===l)return g}return null}function nt(p){return p instanceof ut?p.rack:p instanceof fe?p.rackController.rack:null}function lt(p){const l=nt(p);return l?l.bcSet_:null}class ct{constructor(l){var h,g;this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildInputChange_=this.onChildInputChange_.bind(this),this.onChildMonitorUpdate_=this.onChildMonitorUpdate_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onDescendantLayout_=this.onDescendantLayout_.bind(this),this.onDescendantInputChange_=this.onDescendantInputChange_.bind(this),this.onDescendantMonitorUpdate_=this.onDescendantMonitorUpdate_.bind(this),this.emitter=new T,this.blade_=(h=l.blade)!==null&&h!==void 0?h:null,(g=this.blade_)===null||g===void 0||g.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=l.viewProps,this.bcSet_=new Xt(lt),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(l,h){var g;(g=l.parent)===null||g===void 0||g.remove(l),v(l,"parent")?l.parent=this:(l.parent_=this,ve({key:"parent",target:"BladeController",place:"BladeRack.add"})),this.bcSet_.add(l,h)}remove(l){v(l,"parent")?l.parent=null:(l.parent_=null,ve({key:"parent",target:"BladeController",place:"BladeRack.remove"})),this.bcSet_.remove(l)}find(l){return this.bcSet_.allItems().filter(h=>h instanceof l)}onSetAdd_(l){this.updatePositions_();const h=l.target===l.root;if(this.emitter.emit("add",{bladeController:l.item,index:l.index,isRoot:h,sender:this}),!h)return;const g=l.item;if(g.viewProps.emitter.on("change",this.onChildViewPropsChange_),g.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),g.viewProps.handleDispose(this.onChildDispose_),g instanceof mt)g.binding.emitter.on("change",this.onChildInputChange_);else if(g instanceof Nt)g.binding.emitter.on("update",this.onChildMonitorUpdate_);else if(g instanceof Be)g.value.emitter.on("change",this.onChildValueChange_);else{const D=nt(g);if(D){const H=D.emitter;H.on("layout",this.onDescendantLayout_),H.on("inputchange",this.onDescendantInputChange_),H.on("monitorupdate",this.onDescendantMonitorUpdate_)}}}onSetRemove_(l){this.updatePositions_();const h=l.target===l.root;if(this.emitter.emit("remove",{bladeController:l.item,isRoot:h,sender:this}),!h)return;const g=l.item;if(g instanceof mt)g.binding.emitter.off("change",this.onChildInputChange_);else if(g instanceof Nt)g.binding.emitter.off("update",this.onChildMonitorUpdate_);else if(g instanceof Be)g.value.emitter.off("change",this.onChildValueChange_);else{const D=nt(g);if(D){const H=D.emitter;H.off("layout",this.onDescendantLayout_),H.off("inputchange",this.onDescendantInputChange_),H.off("monitorupdate",this.onDescendantMonitorUpdate_)}}}updatePositions_(){const l=this.bcSet_.items.filter(D=>!D.viewProps.get("hidden")),h=l[0],g=l[l.length-1];this.bcSet_.items.forEach(D=>{const H=[];D===h&&(H.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&H.push("veryfirst")),D===g&&(H.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&H.push("verylast")),D.blade.set("positions",H)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(l){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(h=>h.viewProps.get("disposed")).forEach(h=>{this.bcSet_.remove(h)})}onChildInputChange_(l){const h=ce(this.find(mt),l.sender);if(!h)throw x.alreadyDisposed();this.emitter.emit("inputchange",{bladeController:h,options:l.options,sender:this})}onChildMonitorUpdate_(l){const h=Ae(this.find(Nt),l.sender);if(!h)throw x.alreadyDisposed();this.emitter.emit("monitorupdate",{bladeController:h,sender:this})}onChildValueChange_(l){const h=Qe(this.find(Be),l.sender);if(!h)throw x.alreadyDisposed();this.emitter.emit("inputchange",{bladeController:h,options:l.options,sender:this})}onDescendantLayout_(l){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onDescendantInputChange_(l){this.emitter.emit("inputchange",{bladeController:l.bladeController,options:l.options,sender:this})}onDescendantMonitorUpdate_(l){this.emitter.emit("monitorupdate",{bladeController:l.bladeController,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class ut extends _e{constructor(l,h){super(Object.assign(Object.assign({},h),{view:new Se(l,{viewName:"brk",viewProps:h.viewProps})})),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const g=new ct({blade:h.root?void 0:h.blade,viewProps:h.viewProps});g.emitter.on("add",this.onRackAdd_),g.emitter.on("remove",this.onRackRemove_),this.rack=g,this.viewProps.handleDispose(()=>{for(let D=this.rack.children.length-1;D>=0;D--)this.rack.children[D].viewProps.set("disposed",!0)})}onRackAdd_(l){l.isRoot&&Me(this.view.element,l.bladeController.view.element,l.index)}onRackRemove_(l){l.isRoot&&Re(l.bladeController.view.element)}}const rt=P("cnt");class st{constructor(l,h){var g;this.className_=P((g=h.viewName)!==null&&g!==void 0?g:"fld"),this.element=l.createElement("div"),this.element.classList.add(this.className_(),rt()),h.viewProps.bindClassModifiers(this.element),this.foldable_=h.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),M(this.foldable_,"completed",O(this.element,this.className_(void 0,"cpl")));const D=l.createElement("button");D.classList.add(this.className_("b")),M(h.props,"title",ot=>{d(ot)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),h.viewProps.bindDisabled(D),this.element.appendChild(D),this.buttonElement=D;const H=l.createElement("div");H.classList.add(this.className_("i")),this.element.appendChild(H);const ie=l.createElement("div");ie.classList.add(this.className_("t")),z(h.props.value("title"),ie),this.buttonElement.appendChild(ie),this.titleElement=ie;const Fe=l.createElement("div");Fe.classList.add(this.className_("m")),this.buttonElement.appendChild(Fe);const et=h.containerElement;et.classList.add(this.className_("c")),this.element.appendChild(et),this.containerElement=et}}class St extends fe{constructor(l,h){var g;const D=qe.create((g=h.expanded)!==null&&g!==void 0?g:!0),H=new ut(l,{blade:h.blade,root:h.root,viewProps:h.viewProps});super(Object.assign(Object.assign({},h),{rackController:H,view:new st(l,{containerElement:H.view.element,foldable:D,props:h.props,viewName:h.root?"rot":void 0,viewProps:h.viewProps})})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=h.props,this.foldable=D,ye(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}const rn={id:"folder",type:"blade",accept(p){const l=be,h=De(p,{title:l.required.string,view:l.required.constant("folder"),expanded:l.optional.boolean});return h?{params:h}:null},controller(p){return new St(p.document,{blade:p.blade,expanded:p.params.expanded,props:K.fromObject({title:p.params.title}),viewProps:p.viewProps})},api(p){return p.controller instanceof St?new U(p.controller,p.pool):null}};class Yt extends Be{constructor(l,h){const g=h.valueController.viewProps;super(Object.assign(Object.assign({},h),{value:h.valueController.value,view:new W(l,{props:h.props,viewProps:g}),viewProps:g})),this.props=h.props,this.valueController=h.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}class Pn extends i{}const Ft=P("spr");class ht{constructor(l,h){this.element=l.createElement("div"),this.element.classList.add(Ft()),h.viewProps.bindClassModifiers(this.element);const g=l.createElement("hr");g.classList.add(Ft("r")),this.element.appendChild(g)}}class cr extends _e{constructor(l,h){super(Object.assign(Object.assign({},h),{view:new ht(l,{viewProps:h.viewProps})}))}}const jt={id:"separator",type:"blade",accept(p){const h=De(p,{view:be.required.constant("separator")});return h?{params:h}:null},controller(p){return new cr(p.document,{blade:p.blade,viewProps:p.viewProps})},api(p){return p.controller instanceof cr?new Pn(p.controller):null}},Tn=P("tbi");class Hs{constructor(l,h){this.element=l.createElement("div"),this.element.classList.add(Tn()),h.viewProps.bindClassModifiers(this.element),M(h.props,"selected",H=>{H?this.element.classList.add(Tn(void 0,"sel")):this.element.classList.remove(Tn(void 0,"sel"))});const g=l.createElement("button");g.classList.add(Tn("b")),h.viewProps.bindDisabled(g),this.element.appendChild(g),this.buttonElement=g;const D=l.createElement("div");D.classList.add(Tn("t")),z(h.props.value("title"),D),this.buttonElement.appendChild(D),this.titleElement=D}}class jr{constructor(l,h){this.emitter=new T,this.onClick_=this.onClick_.bind(this),this.props=h.props,this.viewProps=h.viewProps,this.view=new Hs(l,{props:h.props,viewProps:h.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class Zr{constructor(l,h){this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new jr(l,{props:h.itemProps,viewProps:ue.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.cc_=new ut(l,{blade:We(),viewProps:ue.create()}),this.props=h.props,M(this.props,"selected",g=>{this.itemController.props.set("selected",g),this.contentController.viewProps.set("hidden",!g)})}get itemController(){return this.ic_}get contentController(){return this.cc_}onItemClick_(){this.props.set("selected",!0)}}class tn{constructor(l,h){this.controller_=l,this.rackApi_=h}get title(){var l;return(l=this.controller_.itemController.props.get("title"))!==null&&l!==void 0?l:""}set title(l){this.controller_.itemController.props.set("title",l)}get selected(){return this.controller_.props.get("selected")}set selected(l){this.controller_.props.set("selected",l)}get children(){return this.rackApi_.children}addButton(l){return this.rackApi_.addButton(l)}addFolder(l){return this.rackApi_.addFolder(l)}addSeparator(l){return this.rackApi_.addSeparator(l)}addTab(l){return this.rackApi_.addTab(l)}add(l,h){this.rackApi_.add(l,h)}remove(l){this.rackApi_.remove(l)}addInput(l,h,g){return this.rackApi_.addInput(l,h,g)}addMonitor(l,h,g){return this.rackApi_.addMonitor(l,h,g)}addBlade(l){return this.rackApi_.addBlade(l)}}class On extends ke{constructor(l,h){super(l,new Qn(l.rackController,h)),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.onSelect_=this.onSelect_.bind(this),this.emitter_=new T,this.pageApiMap_=new Map,this.rackApi_.on("change",g=>{this.emitter_.emit("change",{event:g})}),this.rackApi_.on("update",g=>{this.emitter_.emit("update",{event:g})}),this.controller_.tab.selectedIndex.emitter.on("change",this.onSelect_),this.controller_.pageSet.emitter.on("add",this.onPageAdd_),this.controller_.pageSet.emitter.on("remove",this.onPageRemove_),this.controller_.pageSet.items.forEach(g=>{this.setUpPageApi_(g)})}get pages(){return this.controller_.pageSet.items.map(l=>{const h=this.pageApiMap_.get(l);if(!h)throw x.shouldNeverHappen();return h})}addPage(l){const h=this.controller_.view.element.ownerDocument,g=new Zr(h,{itemProps:K.fromObject({selected:!1,title:l.title}),props:K.fromObject({selected:!1})});this.controller_.add(g,l.index);const D=this.pageApiMap_.get(g);if(!D)throw x.shouldNeverHappen();return D}removePage(l){this.controller_.remove(l)}on(l,h){const g=h.bind(this);return this.emitter_.on(l,D=>{g(D.event)}),this}setUpPageApi_(l){const h=this.rackApi_.apiSet_.find(D=>D.controller_===l.contentController);if(!h)throw x.shouldNeverHappen();const g=new tn(l,h);this.pageApiMap_.set(l,g)}onPageAdd_(l){this.setUpPageApi_(l.item)}onPageRemove_(l){if(!this.pageApiMap_.get(l.item))throw x.shouldNeverHappen();this.pageApiMap_.delete(l.item)}onSelect_(l){this.emitter_.emit("select",{event:new u(this,l.rawValue)})}}const Ws=-1;class Bn{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=ge(!0),this.selectedIndex=ge(Ws),this.items_=[]}add(l,h){const g=h??this.items_.length;this.items_.splice(g,0,l),l.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(l){const h=this.items_.indexOf(l);h<0||(this.items_.splice(h,1),l.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=Ws,this.empty.rawValue=!0;return}const l=this.items_.findIndex(h=>h.rawValue);l<0?(this.items_.forEach((h,g)=>{h.rawValue=g===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((h,g)=>{h.rawValue=g===l}),this.selectedIndex.rawValue=l),this.empty.rawValue=!1}onItemSelectedChange_(l){if(l.rawValue){const h=this.items_.findIndex(g=>g===l.sender);this.items_.forEach((g,D)=>{g.rawValue=D===h}),this.selectedIndex.rawValue=h}else this.keepSelection_()}}const Kr=P("tab");class Wu{constructor(l,h){this.element=l.createElement("div"),this.element.classList.add(Kr(),rt()),h.viewProps.bindClassModifiers(this.element),F(h.empty,O(this.element,Kr(void 0,"nop")));const g=l.createElement("div");g.classList.add(Kr("t")),this.element.appendChild(g),this.itemsElement=g;const D=l.createElement("div");D.classList.add(Kr("i")),this.element.appendChild(D);const H=h.contentsElement;H.classList.add(Kr("c")),this.element.appendChild(H),this.contentsElement=H}}class la extends fe{constructor(l,h){const g=new ut(l,{blade:h.blade,viewProps:h.viewProps}),D=new Bn;super({blade:h.blade,rackController:g,view:new Wu(l,{contentsElement:g.view.element,empty:D.empty,viewProps:h.viewProps})}),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.pageSet_=new Xt(()=>null),this.pageSet_.emitter.on("add",this.onPageAdd_),this.pageSet_.emitter.on("remove",this.onPageRemove_),this.tab=D}get pageSet(){return this.pageSet_}add(l,h){this.pageSet_.add(l,h)}remove(l){this.pageSet_.remove(this.pageSet_.items[l])}onPageAdd_(l){const h=l.item;Me(this.view.itemsElement,h.itemController.view.element,l.index),h.itemController.viewProps.set("parent",this.viewProps),this.rackController.rack.add(h.contentController,l.index),this.tab.add(h.props.value("selected"))}onPageRemove_(l){const h=l.item;Re(h.itemController.view.element),h.itemController.viewProps.set("parent",null),this.rackController.rack.remove(h.contentController),this.tab.remove(h.props.value("selected"))}}const Pd={id:"tab",type:"blade",accept(p){const l=be,h=De(p,{pages:l.required.array(l.required.object({title:l.required.string})),view:l.required.constant("tab")});return!h||h.pages.length===0?null:{params:h}},controller(p){const l=new la(p.document,{blade:p.blade,viewProps:p.viewProps});return p.params.pages.forEach(h=>{const g=new Zr(p.document,{itemProps:K.fromObject({selected:!1,title:h.title}),props:K.fromObject({selected:!1})});l.add(g)}),l},api(p){return p.controller instanceof la?new On(p.controller,p.pool):null}};function Bw(p,l){const h=p.accept(l.params);if(!h)return null;const g=be.optional.boolean(l.params.disabled).value,D=be.optional.boolean(l.params.hidden).value;return p.controller({blade:We(),document:l.document,params:Object.assign(Object.assign({},h.params),{disabled:g,hidden:D}),viewProps:ue.create({disabled:g,hidden:D})})}class Nw{constructor(){this.disabled=!1,this.emitter=new T}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class Uw{constructor(l,h){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=l,this.emitter=new T,this.interval_=h,this.setTimer_()}get disabled(){return this.disabled_}set disabled(l){this.disabled_=l,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const l=this.doc_.defaultView;l&&l.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const l=this.doc_.defaultView;l&&(this.timerId_=l.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class ca{constructor(l){this.constraints=l}constrain(l){return this.constraints.reduce((h,g)=>g.constrain(h),l)}}function Jr(p,l){if(p instanceof l)return p;if(p instanceof ca){const h=p.constraints.reduce((g,D)=>g||(D instanceof l?D:null),null);if(h)return h}return null}class qs{constructor(l){this.values=K.fromObject({max:l.max,min:l.min})}constrain(l){const h=this.values.get("max"),g=this.values.get("min");return Math.min(Math.max(l,g),h)}}class ua{constructor(l){this.values=K.fromObject({options:l})}get options(){return this.values.get("options")}constrain(l){const h=this.values.get("options");return h.length===0||h.filter(D=>D.value===l).length>0?l:h[0].value}}class Td{constructor(l){this.values=K.fromObject({max:l.max,min:l.min})}get maxValue(){return this.values.get("max")}get minValue(){return this.values.get("min")}constrain(l){const h=this.values.get("max"),g=this.values.get("min");let D=l;return d(g)||(D=Math.max(D,g)),d(h)||(D=Math.min(D,h)),D}}class Al{constructor(l,h=0){this.step=l,this.origin=h}constrain(l){const h=this.origin%this.step,g=Math.round((l-h)/this.step);return h+g*this.step}}const qu=P("lst");class Vw{constructor(l,h){this.onValueChange_=this.onValueChange_.bind(this),this.props_=h.props,this.element=l.createElement("div"),this.element.classList.add(qu()),h.viewProps.bindClassModifiers(this.element);const g=l.createElement("select");g.classList.add(qu("s")),M(this.props_,"options",H=>{L(g),H.forEach((ie,Fe)=>{const et=l.createElement("option");et.dataset.index=String(Fe),et.textContent=ie.text,et.value=String(ie.value),g.appendChild(et)})}),h.viewProps.bindDisabled(g),this.element.appendChild(g),this.selectElement=g;const D=l.createElement("div");D.classList.add(qu("m")),D.appendChild(oe(l,"dropdown")),this.element.appendChild(D),h.value.emitter.on("change",this.onValueChange_),this.value_=h.value,this.update_()}update_(){this.selectElement.value=String(this.value_.rawValue)}onValueChange_(){this.update_()}}class ha{constructor(l,h){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=h.props,this.value=h.value,this.viewProps=h.viewProps,this.view=new Vw(l,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(l){const g=l.currentTarget.selectedOptions.item(0);if(!g)return;const D=Number(g.dataset.index);this.value.rawValue=this.props.get("options")[D].value}}const Ld=P("pop");class zw{constructor(l,h){this.element=l.createElement("div"),this.element.classList.add(Ld()),h.viewProps.bindClassModifiers(this.element),F(h.shows,O(this.element,Ld(void 0,"v")))}}class Id{constructor(l,h){this.shows=ge(!1),this.viewProps=h.viewProps,this.view=new zw(l,{shows:this.shows,viewProps:this.viewProps})}}const Dd=P("txt");class $w{constructor(l,h){this.onChange_=this.onChange_.bind(this),this.element=l.createElement("div"),this.element.classList.add(Dd()),h.viewProps.bindClassModifiers(this.element),this.props_=h.props,this.props_.emitter.on("change",this.onChange_);const g=l.createElement("input");g.classList.add(Dd("i")),g.type="text",h.viewProps.bindDisabled(g),this.element.appendChild(g),this.inputElement=g,h.value.emitter.on("change",this.onChange_),this.value_=h.value,this.refresh()}refresh(){const l=this.props_.get("formatter");this.inputElement.value=l(this.value_.rawValue)}onChange_(){this.refresh()}}class Pl{constructor(l,h){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=h.parser,this.props=h.props,this.value=h.value,this.viewProps=h.viewProps,this.view=new $w(l,{props:h.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(l){const g=l.currentTarget.value,D=this.parser_(g);d(D)||(this.value.rawValue=D),this.view.refresh()}}function Gw(p){return String(p)}function Rd(p){return p==="false"?!1:!!p}function kd(p){return Gw(p)}class Hw{constructor(l){this.text=l}evaluate(){return Number(this.text)}toString(){return this.text}}const Ww={"**":(p,l)=>Math.pow(p,l),"*":(p,l)=>p*l,"/":(p,l)=>p/l,"%":(p,l)=>p%l,"+":(p,l)=>p+l,"-":(p,l)=>p-l,"<<":(p,l)=>p<<l,">>":(p,l)=>p>>l,">>>":(p,l)=>p>>>l,"&":(p,l)=>p&l,"^":(p,l)=>p^l,"|":(p,l)=>p|l};class qw{constructor(l,h,g){this.left=h,this.operator=l,this.right=g}evaluate(){const l=Ww[this.operator];if(!l)throw new Error(`unexpected binary operator: '${this.operator}`);return l(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const Xw={"+":p=>p,"-":p=>-p,"~":p=>~p};class Yw{constructor(l,h){this.operator=l,this.expression=h}evaluate(){const l=Xw[this.operator];if(!l)throw new Error(`unexpected unary operator: '${this.operator}`);return l(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function Xu(p){return(l,h)=>{for(let g=0;g<p.length;g++){const D=p[g](l,h);if(D!=="")return D}return""}}function fa(p,l){var h;const g=p.substr(l).match(/^\s+/);return(h=g&&g[0])!==null&&h!==void 0?h:""}function jw(p,l){const h=p.substr(l,1);return h.match(/^[1-9]$/)?h:""}function da(p,l){var h;const g=p.substr(l).match(/^[0-9]+/);return(h=g&&g[0])!==null&&h!==void 0?h:""}function Zw(p,l){const h=da(p,l);if(h!=="")return h;const g=p.substr(l,1);if(l+=1,g!=="-"&&g!=="+")return"";const D=da(p,l);return D===""?"":g+D}function Yu(p,l){const h=p.substr(l,1);if(l+=1,h.toLowerCase()!=="e")return"";const g=Zw(p,l);return g===""?"":h+g}function Fd(p,l){const h=p.substr(l,1);if(h==="0")return h;const g=jw(p,l);return l+=g.length,g===""?"":g+da(p,l)}function Kw(p,l){const h=Fd(p,l);if(l+=h.length,h==="")return"";const g=p.substr(l,1);if(l+=g.length,g!==".")return"";const D=da(p,l);return l+=D.length,h+g+D+Yu(p,l)}function Jw(p,l){const h=p.substr(l,1);if(l+=h.length,h!==".")return"";const g=da(p,l);return l+=g.length,g===""?"":h+g+Yu(p,l)}function Qw(p,l){const h=Fd(p,l);return l+=h.length,h===""?"":h+Yu(p,l)}const ey=Xu([Kw,Jw,Qw]);function ty(p,l){var h;const g=p.substr(l).match(/^[01]+/);return(h=g&&g[0])!==null&&h!==void 0?h:""}function ny(p,l){const h=p.substr(l,2);if(l+=h.length,h.toLowerCase()!=="0b")return"";const g=ty(p,l);return g===""?"":h+g}function ry(p,l){var h;const g=p.substr(l).match(/^[0-7]+/);return(h=g&&g[0])!==null&&h!==void 0?h:""}function iy(p,l){const h=p.substr(l,2);if(l+=h.length,h.toLowerCase()!=="0o")return"";const g=ry(p,l);return g===""?"":h+g}function sy(p,l){var h;const g=p.substr(l).match(/^[0-9a-f]+/i);return(h=g&&g[0])!==null&&h!==void 0?h:""}function oy(p,l){const h=p.substr(l,2);if(l+=h.length,h.toLowerCase()!=="0x")return"";const g=sy(p,l);return g===""?"":h+g}const ay=Xu([ny,iy,oy]),ly=Xu([ay,ey]);function cy(p,l){const h=ly(p,l);return l+=h.length,h===""?null:{evaluable:new Hw(h),cursor:l}}function uy(p,l){const h=p.substr(l,1);if(l+=h.length,h!=="(")return null;const g=Bd(p,l);if(!g)return null;l=g.cursor,l+=fa(p,l).length;const D=p.substr(l,1);return l+=D.length,D!==")"?null:{evaluable:g.evaluable,cursor:l}}function hy(p,l){var h;return(h=cy(p,l))!==null&&h!==void 0?h:uy(p,l)}function Od(p,l){const h=hy(p,l);if(h)return h;const g=p.substr(l,1);if(l+=g.length,g!=="+"&&g!=="-"&&g!=="~")return null;const D=Od(p,l);return D?(l=D.cursor,{cursor:l,evaluable:new Yw(g,D.evaluable)}):null}function fy(p,l,h){h+=fa(l,h).length;const g=p.filter(D=>l.startsWith(D,h))[0];return g?(h+=g.length,h+=fa(l,h).length,{cursor:h,operator:g}):null}function dy(p,l){return(h,g)=>{const D=p(h,g);if(!D)return null;g=D.cursor;let H=D.evaluable;for(;;){const ie=fy(l,h,g);if(!ie)break;g=ie.cursor;const Fe=p(h,g);if(!Fe)return null;g=Fe.cursor,H=new qw(ie.operator,H,Fe.evaluable)}return H?{cursor:g,evaluable:H}:null}}const py=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((p,l)=>dy(p,l),Od);function Bd(p,l){return l+=fa(p,l).length,py(p,l)}function my(p){const l=Bd(p,0);return!l||l.cursor+fa(p,l.cursor).length!==p.length?null:l.evaluable}function Qr(p){var l;const h=my(p);return(l=h==null?void 0:h.evaluate())!==null&&l!==void 0?l:null}function Nd(p){if(typeof p=="number")return p;if(typeof p=="string"){const l=Qr(p);if(!d(l))return l}return 0}function gy(p){return String(p)}function wn(p){return l=>l.toFixed(Math.max(Math.min(p,20),0))}const vy=wn(0);function Tl(p){return vy(p)+"%"}function Ud(p){return String(p)}function ju(p){return p}function Vd(p,l){for(;p.length<l;)p.push(void 0)}function by(p){const l=[];return Vd(l,p),ge(l)}function xy(p){const l=p.indexOf(void 0);return l<0?p:p.slice(0,l)}function wy(p,l){const h=[...xy(p),l];return h.length>p.length?h.splice(0,h.length-p.length):Vd(h,p.length),h}function pa({primary:p,secondary:l,forward:h,backward:g}){let D=!1;function H(ie){D||(D=!0,ie(),D=!1)}p.emitter.on("change",ie=>{H(()=>{l.setRawValue(h(p,l),ie.options)})}),l.emitter.on("change",ie=>{H(()=>{p.setRawValue(g(p,l),ie.options)}),H(()=>{l.setRawValue(h(p,l),ie.options)})}),H(()=>{l.setRawValue(h(p,l),{forceEmit:!1,last:!0})})}function Wn(p,l){const h=p*(l.altKey?.1:1)*(l.shiftKey?10:1);return l.upKey?+h:l.downKey?-h:0}function ma(p){return{altKey:p.altKey,downKey:p.key==="ArrowDown",shiftKey:p.shiftKey,upKey:p.key==="ArrowUp"}}function ei(p){return{altKey:p.altKey,downKey:p.key==="ArrowLeft",shiftKey:p.shiftKey,upKey:p.key==="ArrowRight"}}function yy(p){return p==="ArrowUp"||p==="ArrowDown"}function zd(p){return yy(p)||p==="ArrowLeft"||p==="ArrowRight"}function Zu(p,l){var h,g;const D=l.ownerDocument.defaultView,H=l.getBoundingClientRect();return{x:p.pageX-(((h=D&&D.scrollX)!==null&&h!==void 0?h:0)+H.left),y:p.pageY-(((g=D&&D.scrollY)!==null&&g!==void 0?g:0)+H.top)}}class Qi{constructor(l){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=l,this.emitter=new T,l.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),l.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),l.addEventListener("touchend",this.onTouchEnd_),l.addEventListener("mousedown",this.onMouseDown_)}computePosition_(l){const h=this.elem_.getBoundingClientRect();return{bounds:{width:h.width,height:h.height},point:l?{x:l.x,y:l.y}:null}}onMouseDown_(l){var h;l.preventDefault(),(h=l.currentTarget)===null||h===void 0||h.focus();const g=this.elem_.ownerDocument;g.addEventListener("mousemove",this.onDocumentMouseMove_),g.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:l.altKey,data:this.computePosition_(Zu(l,this.elem_)),sender:this,shiftKey:l.shiftKey})}onDocumentMouseMove_(l){this.emitter.emit("move",{altKey:l.altKey,data:this.computePosition_(Zu(l,this.elem_)),sender:this,shiftKey:l.shiftKey})}onDocumentMouseUp_(l){const h=this.elem_.ownerDocument;h.removeEventListener("mousemove",this.onDocumentMouseMove_),h.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:l.altKey,data:this.computePosition_(Zu(l,this.elem_)),sender:this,shiftKey:l.shiftKey})}onTouchStart_(l){l.preventDefault();const h=l.targetTouches.item(0),g=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:l.altKey,data:this.computePosition_(h?{x:h.clientX-g.left,y:h.clientY-g.top}:void 0),sender:this,shiftKey:l.shiftKey}),this.lastTouch_=h}onTouchMove_(l){const h=l.targetTouches.item(0),g=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:l.altKey,data:this.computePosition_(h?{x:h.clientX-g.left,y:h.clientY-g.top}:void 0),sender:this,shiftKey:l.shiftKey}),this.lastTouch_=h}onTouchEnd_(l){var h;const g=(h=l.targetTouches.item(0))!==null&&h!==void 0?h:this.lastTouch_,D=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:l.altKey,data:this.computePosition_(g?{x:g.clientX-D.left,y:g.clientY-D.top}:void 0),sender:this,shiftKey:l.shiftKey})}}function $t(p,l,h,g,D){const H=(p-l)/(h-l);return g+H*(D-g)}function $d(p){return String(p.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function hn(p,l,h){return Math.min(Math.max(p,l),h)}function Gd(p,l){return(p%l+l)%l}const ur=P("txt");class _y{constructor(l,h){this.onChange_=this.onChange_.bind(this),this.props_=h.props,this.props_.emitter.on("change",this.onChange_),this.element=l.createElement("div"),this.element.classList.add(ur(),ur(void 0,"num")),h.arrayPosition&&this.element.classList.add(ur(void 0,h.arrayPosition)),h.viewProps.bindClassModifiers(this.element);const g=l.createElement("input");g.classList.add(ur("i")),g.type="text",h.viewProps.bindDisabled(g),this.element.appendChild(g),this.inputElement=g,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=h.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(ur()),this.inputElement.classList.add(ur("i"));const D=l.createElement("div");D.classList.add(ur("k")),this.element.appendChild(D),this.knobElement=D;const H=l.createElementNS(we,"svg");H.classList.add(ur("g")),this.knobElement.appendChild(H);const ie=l.createElementNS(we,"path");ie.classList.add(ur("gb")),H.appendChild(ie),this.guideBodyElem_=ie;const Fe=l.createElementNS(we,"path");Fe.classList.add(ur("gh")),H.appendChild(Fe),this.guideHeadElem_=Fe;const et=l.createElement("div");et.classList.add(P("tt")()),this.knobElement.appendChild(et),this.tooltipElem_=et,h.value.emitter.on("change",this.onChange_),this.value=h.value,this.refresh()}onDraggingChange_(l){if(l.rawValue===null){this.element.classList.remove(ur(void 0,"drg"));return}this.element.classList.add(ur(void 0,"drg"));const h=l.rawValue/this.props_.get("draggingScale"),g=h+(h>0?-1:h<0?1:0),D=hn(-g,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${g+D},0 L${g},4 L${g+D},8`,`M ${h},-1 L${h},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${h},4`);const H=this.props_.get("formatter");this.tooltipElem_.textContent=H(this.value.rawValue),this.tooltipElem_.style.left=`${h}px`}refresh(){const l=this.props_.get("formatter");this.inputElement.value=l(this.value.rawValue)}onChange_(){this.refresh()}}class ga{constructor(l,h){var g;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=h.baseStep,this.parser_=h.parser,this.props=h.props,this.sliderProps_=(g=h.sliderProps)!==null&&g!==void 0?g:null,this.value=h.value,this.viewProps=h.viewProps,this.dragging_=ge(null),this.view=new _y(l,{arrayPosition:h.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const D=new Qi(this.view.knobElement);D.emitter.on("down",this.onPointerDown_),D.emitter.on("move",this.onPointerMove_),D.emitter.on("up",this.onPointerUp_)}constrainValue_(l){var h,g;const D=(h=this.sliderProps_)===null||h===void 0?void 0:h.get("minValue"),H=(g=this.sliderProps_)===null||g===void 0?void 0:g.get("maxValue");let ie=l;return D!==void 0&&(ie=Math.max(ie,D)),H!==void 0&&(ie=Math.min(ie,H)),ie}onInputChange_(l){const g=l.currentTarget.value,D=this.parser_(g);d(D)||(this.value.rawValue=this.constrainValue_(D)),this.view.refresh()}onInputKeyDown_(l){const h=Wn(this.baseStep_,ma(l));h!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+h),{forceEmit:!1,last:!1})}onInputKeyUp_(l){Wn(this.baseStep_,ma(l))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(l){if(!l.point)return null;const h=l.point.x-l.bounds.width/2;return this.constrainValue_(this.originRawValue_+h*this.props.get("draggingScale"))}onPointerMove_(l){const h=this.computeDraggingValue_(l.data);h!==null&&(this.value.setRawValue(h,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(l){const h=this.computeDraggingValue_(l.data);h!==null&&(this.value.setRawValue(h,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const Ku=P("sld");class Sy{constructor(l,h){this.onChange_=this.onChange_.bind(this),this.props_=h.props,this.props_.emitter.on("change",this.onChange_),this.element=l.createElement("div"),this.element.classList.add(Ku()),h.viewProps.bindClassModifiers(this.element);const g=l.createElement("div");g.classList.add(Ku("t")),h.viewProps.bindTabIndex(g),this.element.appendChild(g),this.trackElement=g;const D=l.createElement("div");D.classList.add(Ku("k")),this.trackElement.appendChild(D),this.knobElement=D,h.value.emitter.on("change",this.onChange_),this.value=h.value,this.update_()}update_(){const l=hn($t(this.value.rawValue,this.props_.get("minValue"),this.props_.get("maxValue"),0,100),0,100);this.knobElement.style.width=`${l}%`}onChange_(){this.update_()}}class Cy{constructor(l,h){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=h.baseStep,this.value=h.value,this.viewProps=h.viewProps,this.props=h.props,this.view=new Sy(l,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Qi(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(l,h){l.point&&this.value.setRawValue($t(hn(l.point.x,0,l.bounds.width),0,l.bounds.width,this.props.get("minValue"),this.props.get("maxValue")),h)}onPointerDownOrMove_(l){this.handlePointerEvent_(l.data,{forceEmit:!1,last:!1})}onPointerUp_(l){this.handlePointerEvent_(l.data,{forceEmit:!0,last:!0})}onKeyDown_(l){const h=Wn(this.baseStep_,ei(l));h!==0&&this.value.setRawValue(this.value.rawValue+h,{forceEmit:!1,last:!1})}onKeyUp_(l){Wn(this.baseStep_,ei(l))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Ju=P("sldtxt");class My{constructor(l,h){this.element=l.createElement("div"),this.element.classList.add(Ju());const g=l.createElement("div");g.classList.add(Ju("s")),this.sliderView_=h.sliderView,g.appendChild(this.sliderView_.element),this.element.appendChild(g);const D=l.createElement("div");D.classList.add(Ju("t")),this.textView_=h.textView,D.appendChild(this.textView_.element),this.element.appendChild(D)}}class Qu{constructor(l,h){this.value=h.value,this.viewProps=h.viewProps,this.sliderC_=new Cy(l,{baseStep:h.baseStep,props:h.sliderProps,value:h.value,viewProps:this.viewProps}),this.textC_=new ga(l,{baseStep:h.baseStep,parser:h.parser,props:h.textProps,sliderProps:h.sliderProps,value:h.value,viewProps:h.viewProps}),this.view=new My(l,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}}function va(p,l){p.write(l)}function Ll(p){const l=be;if(Array.isArray(p))return l.required.array(l.required.object({text:l.required.string,value:l.required.raw}))(p).value;if(typeof p=="object")return l.required.raw(p).value}function Hd(p){if(p==="inline"||p==="popup")return p}function yi(p){const l=be;return l.required.object({max:l.optional.number,min:l.optional.number,step:l.optional.number})(p).value}function Wd(p){if(Array.isArray(p))return p;const l=[];return Object.keys(p).forEach(h=>{l.push({text:h,value:p[h]})}),l}function e0(p){return d(p)?null:new ua(Wd(p))}function Ey(p){const l=p?Jr(p,Al):null;return l?l.step:null}function Il(p,l){const h=p&&Jr(p,Al);return h?$d(h.step):Math.max($d(l),2)}function Xs(p){const l=Ey(p);return l??1}function Ys(p,l){var h;const g=p&&Jr(p,Al),D=Math.abs((h=g==null?void 0:g.step)!==null&&h!==void 0?h:l);return D===0?.1:Math.pow(10,Math.floor(Math.log10(D))-1)}const Dl=P("ckb");class Ay{constructor(l,h){this.onValueChange_=this.onValueChange_.bind(this),this.element=l.createElement("div"),this.element.classList.add(Dl()),h.viewProps.bindClassModifiers(this.element);const g=l.createElement("label");g.classList.add(Dl("l")),this.element.appendChild(g);const D=l.createElement("input");D.classList.add(Dl("i")),D.type="checkbox",g.appendChild(D),this.inputElement=D,h.viewProps.bindDisabled(this.inputElement);const H=l.createElement("div");H.classList.add(Dl("w")),g.appendChild(H);const ie=oe(l,"check");H.appendChild(ie),h.value.emitter.on("change",this.onValueChange_),this.value=h.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class Py{constructor(l,h){this.onInputChange_=this.onInputChange_.bind(this),this.value=h.value,this.viewProps=h.viewProps,this.view=new Ay(l,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(l){const h=l.currentTarget;this.value.rawValue=h.checked}}function Ty(p){const l=[],h=e0(p.options);return h&&l.push(h),new ca(l)}const Ly={id:"input-bool",type:"input",accept:(p,l)=>{if(typeof p!="boolean")return null;const g=De(l,{options:be.optional.custom(Ll)});return g?{initialValue:p,params:g}:null},binding:{reader:p=>Rd,constraint:p=>Ty(p.params),writer:p=>va},controller:p=>{const l=p.document,h=p.value,g=p.constraint,D=g&&Jr(g,ua);return D?new ha(l,{props:new K({options:D.values.value("options")}),value:h,viewProps:p.viewProps}):new Py(l,{value:h,viewProps:p.viewProps})}},es=P("col");class Iy{constructor(l,h){this.element=l.createElement("div"),this.element.classList.add(es()),h.foldable.bindExpandedClass(this.element,es(void 0,"expanded")),M(h.foldable,"completed",O(this.element,es(void 0,"cpl")));const g=l.createElement("div");g.classList.add(es("h")),this.element.appendChild(g);const D=l.createElement("div");D.classList.add(es("s")),g.appendChild(D),this.swatchElement=D;const H=l.createElement("div");if(H.classList.add(es("t")),g.appendChild(H),this.textElement=H,h.pickerLayout==="inline"){const ie=l.createElement("div");ie.classList.add(es("p")),this.element.appendChild(ie),this.pickerElement=ie}else this.pickerElement=null}}function Dy(p,l,h){const g=hn(p/255,0,1),D=hn(l/255,0,1),H=hn(h/255,0,1),ie=Math.max(g,D,H),Fe=Math.min(g,D,H),et=ie-Fe;let ot=0,Ct=0;const Mt=(Fe+ie)/2;return et!==0&&(Ct=et/(1-Math.abs(ie+Fe-1)),g===ie?ot=(D-H)/et:D===ie?ot=2+(H-g)/et:ot=4+(g-D)/et,ot=ot/6+(ot<0?1:0)),[ot*360,Ct*100,Mt*100]}function Ry(p,l,h){const g=(p%360+360)%360,D=hn(l/100,0,1),H=hn(h/100,0,1),ie=(1-Math.abs(2*H-1))*D,Fe=ie*(1-Math.abs(g/60%2-1)),et=H-ie/2;let ot,Ct,Mt;return g>=0&&g<60?[ot,Ct,Mt]=[ie,Fe,0]:g>=60&&g<120?[ot,Ct,Mt]=[Fe,ie,0]:g>=120&&g<180?[ot,Ct,Mt]=[0,ie,Fe]:g>=180&&g<240?[ot,Ct,Mt]=[0,Fe,ie]:g>=240&&g<300?[ot,Ct,Mt]=[Fe,0,ie]:[ot,Ct,Mt]=[ie,0,Fe],[(ot+et)*255,(Ct+et)*255,(Mt+et)*255]}function ky(p,l,h){const g=hn(p/255,0,1),D=hn(l/255,0,1),H=hn(h/255,0,1),ie=Math.max(g,D,H),Fe=Math.min(g,D,H),et=ie-Fe;let ot;et===0?ot=0:ie===g?ot=60*(((D-H)/et%6+6)%6):ie===D?ot=60*((H-g)/et+2):ot=60*((g-D)/et+4);const Ct=ie===0?0:et/ie,Mt=ie;return[ot,Ct*100,Mt*100]}function qd(p,l,h){const g=Gd(p,360),D=hn(l/100,0,1),H=hn(h/100,0,1),ie=H*D,Fe=ie*(1-Math.abs(g/60%2-1)),et=H-ie;let ot,Ct,Mt;return g>=0&&g<60?[ot,Ct,Mt]=[ie,Fe,0]:g>=60&&g<120?[ot,Ct,Mt]=[Fe,ie,0]:g>=120&&g<180?[ot,Ct,Mt]=[0,ie,Fe]:g>=180&&g<240?[ot,Ct,Mt]=[0,Fe,ie]:g>=240&&g<300?[ot,Ct,Mt]=[Fe,0,ie]:[ot,Ct,Mt]=[ie,0,Fe],[(ot+et)*255,(Ct+et)*255,(Mt+et)*255]}function Fy(p,l,h){const g=h+l*(100-Math.abs(2*h-100))/200;return[p,g!==0?l*(100-Math.abs(2*h-100))/g:0,h+l*(100-Math.abs(2*h-100))/(2*100)]}function Oy(p,l,h){const g=100-Math.abs(h*(200-l)/100-100);return[p,g!==0?l*h/g:0,h*(200-l)/(2*100)]}function ts(p){return[p[0],p[1],p[2]]}function Xd(p,l){return[p[0],p[1],p[2],l]}const By={hsl:{hsl:(p,l,h)=>[p,l,h],hsv:Fy,rgb:Ry},hsv:{hsl:Oy,hsv:(p,l,h)=>[p,l,h],rgb:qd},rgb:{hsl:Dy,hsv:ky,rgb:(p,l,h)=>[p,l,h]}};function Rl(p,l){return[l==="float"?1:p==="rgb"?255:360,l==="float"?1:p==="rgb"?255:100,l==="float"?1:p==="rgb"?255:100]}function Ny(p,l){return p===l?l:Gd(p,l)}function Uy(p,l,h){var g;const D=Rl(l,h);return[l==="rgb"?hn(p[0],0,D[0]):Ny(p[0],D[0]),hn(p[1],0,D[1]),hn(p[2],0,D[2]),hn((g=p[3])!==null&&g!==void 0?g:1,0,1)]}function Yd(p,l,h,g){const D=Rl(l,h),H=Rl(l,g);return p.map((ie,Fe)=>ie/D[Fe]*H[Fe])}function Vy(p,l,h){const g=Yd(p,l.mode,l.type,"int"),D=By[l.mode][h.mode](...g);return Yd(D,h.mode,"int",h.type)}function kl(p,l){return typeof p!="object"||d(p)?!1:l in p&&typeof p[l]=="number"}class xt{constructor(l,h,g="int"){this.mode=h,this.type=g,this.comps_=Uy(l,h,g)}static black(l="int"){return new xt([0,0,0],"rgb",l)}static fromObject(l,h="int"){const g="a"in l?[l.r,l.g,l.b,l.a]:[l.r,l.g,l.b];return new xt(g,"rgb",h)}static toRgbaObject(l,h="int"){return l.toRgbaObject(h)}static isRgbColorObject(l){return kl(l,"r")&&kl(l,"g")&&kl(l,"b")}static isRgbaColorObject(l){return this.isRgbColorObject(l)&&kl(l,"a")}static isColorObject(l){return this.isRgbColorObject(l)}static equals(l,h){if(l.mode!==h.mode)return!1;const g=l.comps_,D=h.comps_;for(let H=0;H<g.length;H++)if(g[H]!==D[H])return!1;return!0}getComponents(l,h="int"){return Xd(Vy(ts(this.comps_),{mode:this.mode,type:this.type},{mode:l??this.mode,type:h}),this.comps_[3])}toRgbaObject(l="int"){const h=this.getComponents("rgb",l);return{r:h[0],g:h[1],b:h[2],a:h[3]}}}const _i=P("colp");class zy{constructor(l,h){this.alphaViews_=null,this.element=l.createElement("div"),this.element.classList.add(_i()),h.viewProps.bindClassModifiers(this.element);const g=l.createElement("div");g.classList.add(_i("hsv"));const D=l.createElement("div");D.classList.add(_i("sv")),this.svPaletteView_=h.svPaletteView,D.appendChild(this.svPaletteView_.element),g.appendChild(D);const H=l.createElement("div");H.classList.add(_i("h")),this.hPaletteView_=h.hPaletteView,H.appendChild(this.hPaletteView_.element),g.appendChild(H),this.element.appendChild(g);const ie=l.createElement("div");if(ie.classList.add(_i("rgb")),this.textView_=h.textView,ie.appendChild(this.textView_.element),this.element.appendChild(ie),h.alphaViews){this.alphaViews_={palette:h.alphaViews.palette,text:h.alphaViews.text};const Fe=l.createElement("div");Fe.classList.add(_i("a"));const et=l.createElement("div");et.classList.add(_i("ap")),et.appendChild(this.alphaViews_.palette.element),Fe.appendChild(et);const ot=l.createElement("div");ot.classList.add(_i("at")),ot.appendChild(this.alphaViews_.text.element),Fe.appendChild(ot),this.element.appendChild(Fe)}}get allFocusableElements(){const l=[this.svPaletteView_.element,this.hPaletteView_.element,this.textView_.modeSelectElement,...this.textView_.textViews.map(h=>h.inputElement)];return this.alphaViews_&&l.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),l}}function $y(p){return p==="int"?"int":p==="float"?"float":void 0}function t0(p){const l=be;return De(p,{alpha:l.optional.boolean,color:l.optional.object({alpha:l.optional.boolean,type:l.optional.custom($y)}),expanded:l.optional.boolean,picker:l.optional.custom(Hd)})}function ns(p){return p?.1:1}function rs(p){var l;return(l=p.color)===null||l===void 0?void 0:l.type}function Gy(p,l){return p.alpha===l.alpha&&p.mode===l.mode&&p.notation===l.notation&&p.type===l.type}function hr(p,l){const h=p.match(/^(.+)%$/);return Math.min(h?parseFloat(h[1])*.01*l:parseFloat(p),l)}const Hy={deg:p=>p,grad:p=>p*360/400,rad:p=>p*360/(2*Math.PI),turn:p=>p*360};function jd(p){const l=p.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!l)return parseFloat(p);const h=parseFloat(l[1]),g=l[2];return Hy[g](h)}function Zd(p){const l=p.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!l)return null;const h=[hr(l[1],255),hr(l[2],255),hr(l[3],255)];return isNaN(h[0])||isNaN(h[1])||isNaN(h[2])?null:h}function Kd(p){return l=>{const h=Zd(l);return h?new xt(h,"rgb",p):null}}function Jd(p){const l=p.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!l)return null;const h=[hr(l[1],255),hr(l[2],255),hr(l[3],255),hr(l[4],1)];return isNaN(h[0])||isNaN(h[1])||isNaN(h[2])||isNaN(h[3])?null:h}function Qd(p){return l=>{const h=Jd(l);return h?new xt(h,"rgb",p):null}}function ep(p){const l=p.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!l)return null;const h=[jd(l[1]),hr(l[2],100),hr(l[3],100)];return isNaN(h[0])||isNaN(h[1])||isNaN(h[2])?null:h}function tp(p){return l=>{const h=ep(l);return h?new xt(h,"hsl",p):null}}function np(p){const l=p.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!l)return null;const h=[jd(l[1]),hr(l[2],100),hr(l[3],100),hr(l[4],1)];return isNaN(h[0])||isNaN(h[1])||isNaN(h[2])||isNaN(h[3])?null:h}function rp(p){return l=>{const h=np(l);return h?new xt(h,"hsl",p):null}}function ip(p){const l=p.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(l)return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)];const h=p.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return h?[parseInt(h[1],16),parseInt(h[2],16),parseInt(h[3],16)]:null}function Wy(p){const l=ip(p);return l?new xt(l,"rgb","int"):null}function sp(p){const l=p.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(l)return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16),$t(parseInt(l[4]+l[4],16),0,255,0,1)];const h=p.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return h?[parseInt(h[1],16),parseInt(h[2],16),parseInt(h[3],16),$t(parseInt(h[4],16),0,255,0,1)]:null}function qy(p){const l=sp(p);return l?new xt(l,"rgb","int"):null}function op(p){const l=p.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!l)return null;const h=[parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3])];return isNaN(h[0])||isNaN(h[1])||isNaN(h[2])?null:h}function ap(p){return l=>{const h=op(l);return h?new xt(h,"rgb",p):null}}function lp(p){const l=p.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!l)return null;const h=[parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3]),parseFloat(l[4])];return isNaN(h[0])||isNaN(h[1])||isNaN(h[2])||isNaN(h[3])?null:h}function cp(p){return l=>{const h=lp(l);return h?new xt(h,"rgb",p):null}}const Xy=[{parser:ip,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:sp,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:Zd,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:Jd,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:ep,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:np,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:op,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:lp,result:{alpha:!0,mode:"rgb",notation:"object"}}];function Yy(p){return Xy.reduce((l,{parser:h,result:g})=>l||(h(p)?g:null),null)}function n0(p,l="int"){const h=Yy(p);return h?h.notation==="hex"&&l!=="float"?Object.assign(Object.assign({},h),{type:"int"}):h.notation==="func"?Object.assign(Object.assign({},h),{type:l}):null:null}const up={int:[Wy,qy,Kd("int"),Qd("int"),tp("int"),rp("int"),ap("int"),cp("int")],float:[Kd("float"),Qd("float"),tp("float"),rp("float"),ap("float"),cp("float")]};function jy(p){const l=up[p];return h=>{if(typeof h!="string")return xt.black(p);const g=l.reduce((D,H)=>D||H(h),null);return g??xt.black(p)}}function r0(p){const l=up[p];return h=>l.reduce((g,D)=>g||D(h),null)}function hp(p){const l=hn(Math.floor(p),0,255).toString(16);return l.length===1?`0${l}`:l}function fp(p,l="#"){const h=ts(p.getComponents("rgb")).map(hp).join("");return`${l}${h}`}function i0(p,l="#"){const h=p.getComponents("rgb"),g=[h[0],h[1],h[2],h[3]*255].map(hp).join("");return`${l}${g}`}function dp(p,l){const h=wn(l==="float"?2:0);return`rgb(${ts(p.getComponents("rgb",l)).map(D=>h(D)).join(", ")})`}function Zy(p){return l=>dp(l,p)}function Fl(p,l){const h=wn(2),g=wn(l==="float"?2:0);return`rgba(${p.getComponents("rgb",l).map((H,ie)=>(ie===3?h:g)(H)).join(", ")})`}function Ky(p){return l=>Fl(l,p)}function Jy(p){const l=[wn(0),Tl,Tl];return`hsl(${ts(p.getComponents("hsl")).map((g,D)=>l[D](g)).join(", ")})`}function Qy(p){const l=[wn(0),Tl,Tl,wn(2)];return`hsla(${p.getComponents("hsl").map((g,D)=>l[D](g)).join(", ")})`}function pp(p,l){const h=wn(l==="float"?2:0),g=["r","g","b"];return`{${ts(p.getComponents("rgb",l)).map((H,ie)=>`${g[ie]}: ${h(H)}`).join(", ")}}`}function e3(p){return l=>pp(l,p)}function mp(p,l){const h=wn(2),g=wn(l==="float"?2:0),D=["r","g","b","a"];return`{${p.getComponents("rgb",l).map((ie,Fe)=>{const et=Fe===3?h:g;return`${D[Fe]}: ${et(ie)}`}).join(", ")}}`}function t3(p){return l=>mp(l,p)}const n3=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:fp},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:i0},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:Jy},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:Qy},...["int","float"].reduce((p,l)=>[...p,{format:{alpha:!1,mode:"rgb",notation:"func",type:l},stringifier:Zy(l)},{format:{alpha:!0,mode:"rgb",notation:"func",type:l},stringifier:Ky(l)},{format:{alpha:!1,mode:"rgb",notation:"object",type:l},stringifier:e3(l)},{format:{alpha:!0,mode:"rgb",notation:"object",type:l},stringifier:t3(l)}],[])];function s0(p){return n3.reduce((l,h)=>l||(Gy(h.format,p)?h.stringifier:null),null)}const ba=P("apl");class r3{constructor(l,h){this.onValueChange_=this.onValueChange_.bind(this),this.value=h.value,this.value.emitter.on("change",this.onValueChange_),this.element=l.createElement("div"),this.element.classList.add(ba()),h.viewProps.bindClassModifiers(this.element),h.viewProps.bindTabIndex(this.element);const g=l.createElement("div");g.classList.add(ba("b")),this.element.appendChild(g);const D=l.createElement("div");D.classList.add(ba("c")),g.appendChild(D),this.colorElem_=D;const H=l.createElement("div");H.classList.add(ba("m")),this.element.appendChild(H),this.markerElem_=H;const ie=l.createElement("div");ie.classList.add(ba("p")),this.markerElem_.appendChild(ie),this.previewElem_=ie,this.update_()}update_(){const l=this.value.rawValue,h=l.getComponents("rgb"),g=new xt([h[0],h[1],h[2],0],"rgb"),D=new xt([h[0],h[1],h[2],255],"rgb"),H=["to right",Fl(g),Fl(D)];this.colorElem_.style.background=`linear-gradient(${H.join(",")})`,this.previewElem_.style.backgroundColor=Fl(l);const ie=$t(h[3],0,1,0,100);this.markerElem_.style.left=`${ie}%`}onValueChange_(){this.update_()}}class i3{constructor(l,h){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=h.value,this.viewProps=h.viewProps,this.view=new r3(l,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Qi(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(l,h){if(!l.point)return;const g=l.point.x/l.bounds.width,D=this.value.rawValue,[H,ie,Fe]=D.getComponents("hsv");this.value.setRawValue(new xt([H,ie,Fe,g],"hsv"),h)}onPointerDown_(l){this.handlePointerEvent_(l.data,{forceEmit:!1,last:!1})}onPointerMove_(l){this.handlePointerEvent_(l.data,{forceEmit:!1,last:!1})}onPointerUp_(l){this.handlePointerEvent_(l.data,{forceEmit:!0,last:!0})}onKeyDown_(l){const h=Wn(ns(!0),ei(l));if(h===0)return;const g=this.value.rawValue,[D,H,ie,Fe]=g.getComponents("hsv");this.value.setRawValue(new xt([D,H,ie,Fe+h],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(l){Wn(ns(!0),ei(l))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const js=P("coltxt");function s3(p){const l=p.createElement("select"),h=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"}];return l.appendChild(h.reduce((g,D)=>{const H=p.createElement("option");return H.textContent=D.text,H.value=D.value,g.appendChild(H),g},p.createDocumentFragment())),l}class o3{constructor(l,h){this.element=l.createElement("div"),this.element.classList.add(js()),h.viewProps.bindClassModifiers(this.element);const g=l.createElement("div");g.classList.add(js("m")),this.modeElem_=s3(l),this.modeElem_.classList.add(js("ms")),g.appendChild(this.modeSelectElement),h.viewProps.bindDisabled(this.modeElem_);const D=l.createElement("div");D.classList.add(js("mm")),D.appendChild(oe(l,"dropdown")),g.appendChild(D),this.element.appendChild(g);const H=l.createElement("div");H.classList.add(js("w")),this.element.appendChild(H),this.textsElem_=H,this.textViews_=h.textViews,this.applyTextViews_(),F(h.colorMode,ie=>{this.modeElem_.value=ie})}get modeSelectElement(){return this.modeElem_}get textViews(){return this.textViews_}set textViews(l){this.textViews_=l,this.applyTextViews_()}applyTextViews_(){L(this.textsElem_);const l=this.element.ownerDocument;this.textViews_.forEach(h=>{const g=l.createElement("div");g.classList.add(js("c")),g.appendChild(h.element),this.textsElem_.appendChild(g)})}}function a3(p){return wn(p==="float"?2:0)}function l3(p,l,h){const g=Rl(p,l)[h];return new qs({min:0,max:g})}function o0(p,l,h){return new ga(p,{arrayPosition:h===0?"fst":h===3-1?"lst":"mid",baseStep:ns(!1),parser:l.parser,props:K.fromObject({draggingScale:l.colorType==="float"?.01:1,formatter:a3(l.colorType)}),value:ge(0,{constraint:l3(l.colorMode,l.colorType,h)}),viewProps:l.viewProps})}class c3{constructor(l,h){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=h.colorType,this.parser_=h.parser,this.value=h.value,this.viewProps=h.viewProps,this.colorMode=ge(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(l),this.view=new o3(l,{colorMode:this.colorMode,textViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(l){const h={colorMode:this.colorMode.rawValue,colorType:this.colorType_,parser:this.parser_,viewProps:this.viewProps},g=[o0(l,h,0),o0(l,h,1),o0(l,h,2)];return g.forEach((D,H)=>{pa({primary:this.value,secondary:D.value,forward:ie=>ie.rawValue.getComponents(this.colorMode.rawValue,this.colorType_)[H],backward:(ie,Fe)=>{const et=this.colorMode.rawValue,ot=ie.rawValue.getComponents(et,this.colorType_);return ot[H]=Fe.rawValue,new xt(Xd(ts(ot),ot[3]),et,this.colorType_)}})}),g}onModeSelectChange_(l){const h=l.currentTarget;this.colorMode.rawValue=h.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.textViews=[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]}}const a0=P("hpl");class u3{constructor(l,h){this.onValueChange_=this.onValueChange_.bind(this),this.value=h.value,this.value.emitter.on("change",this.onValueChange_),this.element=l.createElement("div"),this.element.classList.add(a0()),h.viewProps.bindClassModifiers(this.element),h.viewProps.bindTabIndex(this.element);const g=l.createElement("div");g.classList.add(a0("c")),this.element.appendChild(g);const D=l.createElement("div");D.classList.add(a0("m")),this.element.appendChild(D),this.markerElem_=D,this.update_()}update_(){const l=this.value.rawValue,[h]=l.getComponents("hsv");this.markerElem_.style.backgroundColor=dp(new xt([h,100,100],"hsv"));const g=$t(h,0,360,0,100);this.markerElem_.style.left=`${g}%`}onValueChange_(){this.update_()}}class h3{constructor(l,h){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=h.value,this.viewProps=h.viewProps,this.view=new u3(l,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Qi(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(l,h){if(!l.point)return;const g=$t(hn(l.point.x,0,l.bounds.width),0,l.bounds.width,0,360),D=this.value.rawValue,[,H,ie,Fe]=D.getComponents("hsv");this.value.setRawValue(new xt([g,H,ie,Fe],"hsv"),h)}onPointerDown_(l){this.handlePointerEvent_(l.data,{forceEmit:!1,last:!1})}onPointerMove_(l){this.handlePointerEvent_(l.data,{forceEmit:!1,last:!1})}onPointerUp_(l){this.handlePointerEvent_(l.data,{forceEmit:!0,last:!0})}onKeyDown_(l){const h=Wn(ns(!1),ei(l));if(h===0)return;const g=this.value.rawValue,[D,H,ie,Fe]=g.getComponents("hsv");this.value.setRawValue(new xt([D+h,H,ie,Fe],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(l){Wn(ns(!1),ei(l))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const l0=P("svp"),gp=64;class f3{constructor(l,h){this.onValueChange_=this.onValueChange_.bind(this),this.value=h.value,this.value.emitter.on("change",this.onValueChange_),this.element=l.createElement("div"),this.element.classList.add(l0()),h.viewProps.bindClassModifiers(this.element),h.viewProps.bindTabIndex(this.element);const g=l.createElement("canvas");g.height=gp,g.width=gp,g.classList.add(l0("c")),this.element.appendChild(g),this.canvasElement=g;const D=l.createElement("div");D.classList.add(l0("m")),this.element.appendChild(D),this.markerElem_=D,this.update_()}update_(){const l=N(this.canvasElement);if(!l)return;const g=this.value.rawValue.getComponents("hsv"),D=this.canvasElement.width,H=this.canvasElement.height,ie=l.getImageData(0,0,D,H),Fe=ie.data;for(let Ct=0;Ct<H;Ct++)for(let Mt=0;Mt<D;Mt++){const ni=$t(Mt,0,D,0,100),wa=$t(Ct,0,H,100,0),ya=qd(g[0],ni,wa),Qs=(Ct*D+Mt)*4;Fe[Qs]=ya[0],Fe[Qs+1]=ya[1],Fe[Qs+2]=ya[2],Fe[Qs+3]=255}l.putImageData(ie,0,0);const et=$t(g[1],0,100,0,100);this.markerElem_.style.left=`${et}%`;const ot=$t(g[2],0,100,100,0);this.markerElem_.style.top=`${ot}%`}onValueChange_(){this.update_()}}class d3{constructor(l,h){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=h.value,this.viewProps=h.viewProps,this.view=new f3(l,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Qi(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(l,h){if(!l.point)return;const g=$t(l.point.x,0,l.bounds.width,0,100),D=$t(l.point.y,0,l.bounds.height,100,0),[H,,,ie]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new xt([H,g,D,ie],"hsv"),h)}onPointerDown_(l){this.handlePointerEvent_(l.data,{forceEmit:!1,last:!1})}onPointerMove_(l){this.handlePointerEvent_(l.data,{forceEmit:!1,last:!1})}onPointerUp_(l){this.handlePointerEvent_(l.data,{forceEmit:!0,last:!0})}onKeyDown_(l){zd(l.key)&&l.preventDefault();const[h,g,D,H]=this.value.rawValue.getComponents("hsv"),ie=ns(!1),Fe=Wn(ie,ei(l)),et=Wn(ie,ma(l));Fe===0&&et===0||this.value.setRawValue(new xt([h,g+Fe,D+et,H],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(l){const h=ns(!1),g=Wn(h,ei(l)),D=Wn(h,ma(l));g===0&&D===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class p3{constructor(l,h){this.value=h.value,this.viewProps=h.viewProps,this.hPaletteC_=new h3(l,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new d3(l,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=h.supportsAlpha?{palette:new i3(l,{value:this.value,viewProps:this.viewProps}),text:new ga(l,{parser:Qr,baseStep:.1,props:K.fromObject({draggingScale:.01,formatter:wn(2)}),value:ge(0,{constraint:new qs({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&pa({primary:this.value,secondary:this.alphaIcs_.text.value,forward:g=>g.rawValue.getComponents()[3],backward:(g,D)=>{const H=g.rawValue.getComponents();return H[3]=D.rawValue,new xt(H,g.rawValue.mode)}}),this.textC_=new c3(l,{colorType:h.colorType,parser:Qr,value:this.value,viewProps:this.viewProps}),this.view=new zy(l,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:h.supportsAlpha,svPaletteView:this.svPaletteC_.view,textView:this.textC_.view,viewProps:this.viewProps})}get textController(){return this.textC_}}const c0=P("colsw");class m3{constructor(l,h){this.onValueChange_=this.onValueChange_.bind(this),h.value.emitter.on("change",this.onValueChange_),this.value=h.value,this.element=l.createElement("div"),this.element.classList.add(c0()),h.viewProps.bindClassModifiers(this.element);const g=l.createElement("div");g.classList.add(c0("sw")),this.element.appendChild(g),this.swatchElem_=g;const D=l.createElement("button");D.classList.add(c0("b")),h.viewProps.bindDisabled(D),this.element.appendChild(D),this.buttonElement=D,this.update_()}update_(){const l=this.value.rawValue;this.swatchElem_.style.backgroundColor=i0(l)}onValueChange_(){this.update_()}}class g3{constructor(l,h){this.value=h.value,this.viewProps=h.viewProps,this.view=new m3(l,{value:this.value,viewProps:this.viewProps})}}class u0{constructor(l,h){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=h.value,this.viewProps=h.viewProps,this.foldable_=qe.create(h.expanded),this.swatchC_=new g3(l,{value:this.value,viewProps:this.viewProps});const g=this.swatchC_.view.buttonElement;g.addEventListener("blur",this.onButtonBlur_),g.addEventListener("click",this.onButtonClick_),this.textC_=new Pl(l,{parser:h.parser,props:K.fromObject({formatter:h.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new Iy(l,{foldable:this.foldable_,pickerLayout:h.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=h.pickerLayout==="popup"?new Id(l,{viewProps:this.viewProps}):null;const D=new p3(l,{colorType:h.colorType,supportsAlpha:h.supportsAlpha,value:this.value,viewProps:this.viewProps});D.view.allFocusableElements.forEach(H=>{H.addEventListener("blur",this.onPopupChildBlur_),H.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=D,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(D.view.element),pa({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:H=>H.rawValue,backward:(H,ie)=>ie.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),ye(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(l){if(!this.popC_)return;const h=this.view.element,g=l.relatedTarget;(!g||!h.contains(g))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(l){if(!this.popC_)return;const h=this.popC_.view.element,g=b(l);g&&h.contains(g)||g&&g===this.swatchC_.view.buttonElement&&!Oe(h.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(l){this.popC_?l.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&l.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function v3(p,l){return xt.isColorObject(p)?xt.fromObject(p,l):xt.black(l)}function b3(p){return ts(p.getComponents("rgb")).reduce((l,h)=>l<<8|Math.floor(h)&255,0)}function x3(p){return p.getComponents("rgb").reduce((l,h,g)=>{const D=Math.floor(g===3?h*255:h)&255;return l<<8|D},0)>>>0}function w3(p){return new xt([p>>16&255,p>>8&255,p&255],"rgb")}function y3(p){return new xt([p>>24&255,p>>16&255,p>>8&255,$t(p&255,0,255,0,1)],"rgb")}function _3(p){return typeof p!="number"?xt.black():w3(p)}function S3(p){return typeof p!="number"?xt.black():y3(p)}function C3(p){const l=s0(p);return l?(h,g)=>{va(h,l(g))}:null}function M3(p){const l=p?x3:b3;return(h,g)=>{va(h,l(g))}}function E3(p,l,h){const g=l.toRgbaObject(h);p.writeProperty("r",g.r),p.writeProperty("g",g.g),p.writeProperty("b",g.b),p.writeProperty("a",g.a)}function A3(p,l,h){const g=l.toRgbaObject(h);p.writeProperty("r",g.r),p.writeProperty("g",g.g),p.writeProperty("b",g.b)}function P3(p,l){return(h,g)=>{p?E3(h,g,l):A3(h,g,l)}}function h0(p){var l;return!!(p!=null&&p.alpha||!((l=p==null?void 0:p.color)===null||l===void 0)&&l.alpha)}function T3(p){return p?l=>i0(l,"0x"):l=>fp(l,"0x")}function L3(p){return"color"in p||"view"in p&&p.view==="color"}const I3={id:"input-color-number",type:"input",accept:(p,l)=>{if(typeof p!="number"||!L3(l))return null;const h=t0(l);return h?{initialValue:p,params:h}:null},binding:{reader:p=>h0(p.params)?S3:_3,equals:xt.equals,writer:p=>M3(h0(p.params))},controller:p=>{const l=h0(p.params),h="expanded"in p.params?p.params.expanded:void 0,g="picker"in p.params?p.params.picker:void 0;return new u0(p.document,{colorType:"int",expanded:h??!1,formatter:T3(l),parser:r0("int"),pickerLayout:g??"popup",supportsAlpha:l,value:p.value,viewProps:p.viewProps})}};function D3(p){return xt.isRgbaColorObject(p)}function R3(p){return l=>v3(l,p)}function k3(p,l){return h=>p?mp(h,l):pp(h,l)}const F3={id:"input-color-object",type:"input",accept:(p,l)=>{if(!xt.isColorObject(p))return null;const h=t0(l);return h?{initialValue:p,params:h}:null},binding:{reader:p=>R3(rs(p.params)),equals:xt.equals,writer:p=>P3(D3(p.initialValue),rs(p.params))},controller:p=>{var l;const h=xt.isRgbaColorObject(p.initialValue),g="expanded"in p.params?p.params.expanded:void 0,D="picker"in p.params?p.params.picker:void 0,H=(l=rs(p.params))!==null&&l!==void 0?l:"int";return new u0(p.document,{colorType:H,expanded:g??!1,formatter:k3(h,H),parser:r0(H),pickerLayout:D??"popup",supportsAlpha:h,value:p.value,viewProps:p.viewProps})}},O3={id:"input-color-string",type:"input",accept:(p,l)=>{if(typeof p!="string"||"view"in l&&l.view==="text")return null;const h=n0(p,rs(l));if(!h||!s0(h))return null;const D=t0(l);return D?{initialValue:p,params:D}:null},binding:{reader:p=>{var l;return jy((l=rs(p.params))!==null&&l!==void 0?l:"int")},equals:xt.equals,writer:p=>{const l=n0(p.initialValue,rs(p.params));if(!l)throw x.shouldNeverHappen();const h=C3(l);if(!h)throw x.notBindable();return h}},controller:p=>{const l=n0(p.initialValue,rs(p.params));if(!l)throw x.shouldNeverHappen();const h=s0(l);if(!h)throw x.shouldNeverHappen();const g="expanded"in p.params?p.params.expanded:void 0,D="picker"in p.params?p.params.picker:void 0;return new u0(p.document,{colorType:l.type,expanded:g??!1,formatter:h,parser:r0(l.type),pickerLayout:D??"popup",supportsAlpha:l.alpha,value:p.value,viewProps:p.viewProps})}};class Si{constructor(l){this.components=l.components,this.asm_=l.assembly}constrain(l){const h=this.asm_.toComponents(l).map((g,D)=>{var H,ie;return(ie=(H=this.components[D])===null||H===void 0?void 0:H.constrain(g))!==null&&ie!==void 0?ie:g});return this.asm_.fromComponents(h)}}const vp=P("pndtxt");class B3{constructor(l,h){this.textViews=h.textViews,this.element=l.createElement("div"),this.element.classList.add(vp()),this.textViews.forEach(g=>{const D=l.createElement("div");D.classList.add(vp("a")),D.appendChild(g.element),this.element.appendChild(D)})}}function N3(p,l,h){return new ga(p,{arrayPosition:h===0?"fst":h===l.axes.length-1?"lst":"mid",baseStep:l.axes[h].baseStep,parser:l.parser,props:l.axes[h].textProps,value:ge(0,{constraint:l.axes[h].constraint}),viewProps:l.viewProps})}class f0{constructor(l,h){this.value=h.value,this.viewProps=h.viewProps,this.acs_=h.axes.map((g,D)=>N3(l,h,D)),this.acs_.forEach((g,D)=>{pa({primary:this.value,secondary:g.value,forward:H=>h.assembly.toComponents(H.rawValue)[D],backward:(H,ie)=>{const Fe=h.assembly.toComponents(H.rawValue);return Fe[D]=ie.rawValue,h.assembly.fromComponents(Fe)}})}),this.view=new B3(l,{textViews:this.acs_.map(g=>g.view)})}}function bp(p,l){return"step"in p&&!d(p.step)?new Al(p.step,l):null}function xp(p){return!d(p.max)&&!d(p.min)?new qs({max:p.max,min:p.min}):!d(p.max)||!d(p.min)?new Td({max:p.max,min:p.min}):null}function U3(p){const l=Jr(p,qs);if(l)return[l.values.get("min"),l.values.get("max")];const h=Jr(p,Td);return h?[h.minValue,h.maxValue]:[void 0,void 0]}function V3(p,l){const h=[],g=bp(p,l);g&&h.push(g);const D=xp(p);D&&h.push(D);const H=e0(p.options);return H&&h.push(H),new ca(h)}const z3={id:"input-number",type:"input",accept:(p,l)=>{if(typeof p!="number")return null;const h=be,g=De(l,{format:h.optional.function,max:h.optional.number,min:h.optional.number,options:h.optional.custom(Ll),step:h.optional.number});return g?{initialValue:p,params:g}:null},binding:{reader:p=>Nd,constraint:p=>V3(p.params,p.initialValue),writer:p=>va},controller:p=>{var l;const h=p.value,g=p.constraint,D=g&&Jr(g,ua);if(D)return new ha(p.document,{props:new K({options:D.values.value("options")}),value:h,viewProps:p.viewProps});const H=(l="format"in p.params?p.params.format:void 0)!==null&&l!==void 0?l:wn(Il(g,h.rawValue)),ie=g&&Jr(g,qs);return ie?new Qu(p.document,{baseStep:Xs(g),parser:Qr,sliderProps:new K({maxValue:ie.values.value("max"),minValue:ie.values.value("min")}),textProps:K.fromObject({draggingScale:Ys(g,h.rawValue),formatter:H}),value:h,viewProps:p.viewProps}):new ga(p.document,{baseStep:Xs(g),parser:Qr,props:K.fromObject({draggingScale:Ys(g,h.rawValue),formatter:H}),value:h,viewProps:p.viewProps})}};class Ci{constructor(l=0,h=0){this.x=l,this.y=h}getComponents(){return[this.x,this.y]}static isObject(l){if(d(l))return!1;const h=l.x,g=l.y;return!(typeof h!="number"||typeof g!="number")}static equals(l,h){return l.x===h.x&&l.y===h.y}toObject(){return{x:this.x,y:this.y}}}const wp={toComponents:p=>p.getComponents(),fromComponents:p=>new Ci(...p)},Zs=P("p2d");class $3{constructor(l,h){this.element=l.createElement("div"),this.element.classList.add(Zs()),h.viewProps.bindClassModifiers(this.element),F(h.expanded,O(this.element,Zs(void 0,"expanded")));const g=l.createElement("div");g.classList.add(Zs("h")),this.element.appendChild(g);const D=l.createElement("button");D.classList.add(Zs("b")),D.appendChild(oe(l,"p2dpad")),h.viewProps.bindDisabled(D),g.appendChild(D),this.buttonElement=D;const H=l.createElement("div");if(H.classList.add(Zs("t")),g.appendChild(H),this.textElement=H,h.pickerLayout==="inline"){const ie=l.createElement("div");ie.classList.add(Zs("p")),this.element.appendChild(ie),this.pickerElement=ie}else this.pickerElement=null}}const Mi=P("p2dp");class G3{constructor(l,h){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.invertsY_=h.invertsY,this.maxValue_=h.maxValue,this.element=l.createElement("div"),this.element.classList.add(Mi()),h.layout==="popup"&&this.element.classList.add(Mi(void 0,"p")),h.viewProps.bindClassModifiers(this.element);const g=l.createElement("div");g.classList.add(Mi("p")),h.viewProps.bindTabIndex(g),this.element.appendChild(g),this.padElement=g;const D=l.createElementNS(we,"svg");D.classList.add(Mi("g")),this.padElement.appendChild(D),this.svgElem_=D;const H=l.createElementNS(we,"line");H.classList.add(Mi("ax")),H.setAttributeNS(null,"x1","0"),H.setAttributeNS(null,"y1","50%"),H.setAttributeNS(null,"x2","100%"),H.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(H);const ie=l.createElementNS(we,"line");ie.classList.add(Mi("ax")),ie.setAttributeNS(null,"x1","50%"),ie.setAttributeNS(null,"y1","0"),ie.setAttributeNS(null,"x2","50%"),ie.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(ie);const Fe=l.createElementNS(we,"line");Fe.classList.add(Mi("l")),Fe.setAttributeNS(null,"x1","50%"),Fe.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(Fe),this.lineElem_=Fe;const et=l.createElement("div");et.classList.add(Mi("m")),this.padElement.appendChild(et),this.markerElem_=et,h.value.emitter.on("change",this.onValueChange_),this.value=h.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[l,h]=this.value.rawValue.getComponents(),g=this.maxValue_,D=$t(l,-g,+g,0,100),H=$t(h,-g,+g,0,100),ie=this.invertsY_?100-H:H;this.lineElem_.setAttributeNS(null,"x2",`${D}%`),this.lineElem_.setAttributeNS(null,"y2",`${ie}%`),this.markerElem_.style.left=`${D}%`,this.markerElem_.style.top=`${ie}%`}onValueChange_(){this.update_()}onFoldableChange_(){this.update_()}}function yp(p,l,h){return[Wn(l[0],ei(p)),Wn(l[1],ma(p))*(h?1:-1)]}class H3{constructor(l,h){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=h.value,this.viewProps=h.viewProps,this.baseSteps_=h.baseSteps,this.maxValue_=h.maxValue,this.invertsY_=h.invertsY,this.view=new G3(l,{invertsY:this.invertsY_,layout:h.layout,maxValue:this.maxValue_,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Qi(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(l,h){if(!l.point)return;const g=this.maxValue_,D=$t(l.point.x,0,l.bounds.width,-g,+g),H=$t(this.invertsY_?l.bounds.height-l.point.y:l.point.y,0,l.bounds.height,-g,+g);this.value.setRawValue(new Ci(D,H),h)}onPointerDown_(l){this.handlePointerEvent_(l.data,{forceEmit:!1,last:!1})}onPointerMove_(l){this.handlePointerEvent_(l.data,{forceEmit:!1,last:!1})}onPointerUp_(l){this.handlePointerEvent_(l.data,{forceEmit:!0,last:!0})}onPadKeyDown_(l){zd(l.key)&&l.preventDefault();const[h,g]=yp(l,this.baseSteps_,this.invertsY_);h===0&&g===0||this.value.setRawValue(new Ci(this.value.rawValue.x+h,this.value.rawValue.y+g),{forceEmit:!1,last:!1})}onPadKeyUp_(l){const[h,g]=yp(l,this.baseSteps_,this.invertsY_);h===0&&g===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class W3{constructor(l,h){var g,D;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=h.value,this.viewProps=h.viewProps,this.foldable_=qe.create(h.expanded),this.popC_=h.pickerLayout==="popup"?new Id(l,{viewProps:this.viewProps}):null;const H=new H3(l,{baseSteps:[h.axes[0].baseStep,h.axes[1].baseStep],invertsY:h.invertsY,layout:h.pickerLayout,maxValue:h.maxValue,value:this.value,viewProps:this.viewProps});H.view.allFocusableElements.forEach(ie=>{ie.addEventListener("blur",this.onPopupChildBlur_),ie.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=H,this.textC_=new f0(l,{assembly:wp,axes:h.axes,parser:h.parser,value:this.value,viewProps:this.viewProps}),this.view=new $3(l,{expanded:this.foldable_.value("expanded"),pickerLayout:h.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(g=this.view.buttonElement)===null||g===void 0||g.addEventListener("blur",this.onPadButtonBlur_),(D=this.view.buttonElement)===null||D===void 0||D.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),pa({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:ie=>ie.rawValue,backward:(ie,Fe)=>Fe.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),ye(this.foldable_,this.view.pickerElement))}onPadButtonBlur_(l){if(!this.popC_)return;const h=this.view.element,g=l.relatedTarget;(!g||!h.contains(g))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(l){if(!this.popC_)return;const h=this.popC_.view.element,g=b(l);g&&h.contains(g)||g&&g===this.view.buttonElement&&!Oe(h.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(l){this.popC_?l.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&l.key==="Escape"&&this.view.buttonElement.focus()}}class Ks{constructor(l=0,h=0,g=0){this.x=l,this.y=h,this.z=g}getComponents(){return[this.x,this.y,this.z]}static isObject(l){if(d(l))return!1;const h=l.x,g=l.y,D=l.z;return!(typeof h!="number"||typeof g!="number"||typeof D!="number")}static equals(l,h){return l.x===h.x&&l.y===h.y&&l.z===h.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const _p={toComponents:p=>p.getComponents(),fromComponents:p=>new Ks(...p)};function q3(p){return Ks.isObject(p)?new Ks(p.x,p.y,p.z):new Ks}function X3(p,l){p.writeProperty("x",l.x),p.writeProperty("y",l.y),p.writeProperty("z",l.z)}function Y3(p,l){return new Si({assembly:_p,components:[ti("x"in p?p.x:void 0,l.x),ti("y"in p?p.y:void 0,l.y),ti("z"in p?p.z:void 0,l.z)]})}function d0(p,l){return{baseStep:Xs(l),constraint:l,textProps:K.fromObject({draggingScale:Ys(l,p),formatter:wn(Il(l,p))})}}const j3={id:"input-point3d",type:"input",accept:(p,l)=>{if(!Ks.isObject(p))return null;const h=be,g=De(l,{x:h.optional.custom(yi),y:h.optional.custom(yi),z:h.optional.custom(yi)});return g?{initialValue:p,params:g}:null},binding:{reader:p=>q3,constraint:p=>Y3(p.params,p.initialValue),equals:Ks.equals,writer:p=>X3},controller:p=>{const l=p.value,h=p.constraint;if(!(h instanceof Si))throw x.shouldNeverHappen();return new f0(p.document,{assembly:_p,axes:[d0(l.rawValue.x,h.components[0]),d0(l.rawValue.y,h.components[1]),d0(l.rawValue.z,h.components[2])],parser:Qr,value:l,viewProps:p.viewProps})}};class Js{constructor(l=0,h=0,g=0,D=0){this.x=l,this.y=h,this.z=g,this.w=D}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(l){if(d(l))return!1;const h=l.x,g=l.y,D=l.z,H=l.w;return!(typeof h!="number"||typeof g!="number"||typeof D!="number"||typeof H!="number")}static equals(l,h){return l.x===h.x&&l.y===h.y&&l.z===h.z&&l.w===h.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const Sp={toComponents:p=>p.getComponents(),fromComponents:p=>new Js(...p)};function Z3(p){return Js.isObject(p)?new Js(p.x,p.y,p.z,p.w):new Js}function K3(p,l){p.writeProperty("x",l.x),p.writeProperty("y",l.y),p.writeProperty("z",l.z),p.writeProperty("w",l.w)}function J3(p,l){return new Si({assembly:Sp,components:[ti("x"in p?p.x:void 0,l.x),ti("y"in p?p.y:void 0,l.y),ti("z"in p?p.z:void 0,l.z),ti("w"in p?p.w:void 0,l.w)]})}function Q3(p,l){return{baseStep:Xs(l),constraint:l,textProps:K.fromObject({draggingScale:Ys(l,p),formatter:wn(Il(l,p))})}}const e_={id:"input-point4d",type:"input",accept:(p,l)=>{if(!Js.isObject(p))return null;const h=be,g=De(l,{x:h.optional.custom(yi),y:h.optional.custom(yi),z:h.optional.custom(yi),w:h.optional.custom(yi)});return g?{initialValue:p,params:g}:null},binding:{reader:p=>Z3,constraint:p=>J3(p.params,p.initialValue),equals:Js.equals,writer:p=>K3},controller:p=>{const l=p.value,h=p.constraint;if(!(h instanceof Si))throw x.shouldNeverHappen();return new f0(p.document,{assembly:Sp,axes:l.rawValue.getComponents().map((g,D)=>Q3(g,h.components[D])),parser:Qr,value:l,viewProps:p.viewProps})}};function t_(p){const l=[],h=e0(p.options);return h&&l.push(h),new ca(l)}const n_={id:"input-string",type:"input",accept:(p,l)=>{if(typeof p!="string")return null;const g=De(l,{options:be.optional.custom(Ll)});return g?{initialValue:p,params:g}:null},binding:{reader:p=>Ud,constraint:p=>t_(p.params),writer:p=>va},controller:p=>{const l=p.document,h=p.value,g=p.constraint,D=g&&Jr(g,ua);return D?new ha(l,{props:new K({options:D.values.value("options")}),value:h,viewProps:p.viewProps}):new Pl(l,{parser:H=>H,props:K.fromObject({formatter:ju}),value:h,viewProps:p.viewProps})}},xa={monitor:{defaultInterval:200,defaultLineCount:3}},Cp=P("mll");class r_{constructor(l,h){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=h.formatter,this.element=l.createElement("div"),this.element.classList.add(Cp()),h.viewProps.bindClassModifiers(this.element);const g=l.createElement("textarea");g.classList.add(Cp("i")),g.style.height=`calc(var(--bld-us) * ${h.lineCount})`,g.readOnly=!0,h.viewProps.bindDisabled(g),this.element.appendChild(g),this.textareaElem_=g,h.value.emitter.on("change",this.onValueUpdate_),this.value=h.value,this.update_()}update_(){const l=this.textareaElem_,h=l.scrollTop===l.scrollHeight-l.clientHeight,g=[];this.value.rawValue.forEach(D=>{D!==void 0&&g.push(this.formatter_(D))}),l.textContent=g.join(`
`),h&&(l.scrollTop=l.scrollHeight)}onValueUpdate_(){this.update_()}}class p0{constructor(l,h){this.value=h.value,this.viewProps=h.viewProps,this.view=new r_(l,{formatter:h.formatter,lineCount:h.lineCount,value:this.value,viewProps:this.viewProps})}}const Mp=P("sgl");class i_{constructor(l,h){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=h.formatter,this.element=l.createElement("div"),this.element.classList.add(Mp()),h.viewProps.bindClassModifiers(this.element);const g=l.createElement("input");g.classList.add(Mp("i")),g.readOnly=!0,g.type="text",h.viewProps.bindDisabled(g),this.element.appendChild(g),this.inputElement=g,h.value.emitter.on("change",this.onValueUpdate_),this.value=h.value,this.update_()}update_(){const l=this.value.rawValue,h=l[l.length-1];this.inputElement.value=h!==void 0?this.formatter_(h):""}onValueUpdate_(){this.update_()}}class m0{constructor(l,h){this.value=h.value,this.viewProps=h.viewProps,this.view=new i_(l,{formatter:h.formatter,value:this.value,viewProps:this.viewProps})}}const s_={id:"monitor-bool",type:"monitor",accept:(p,l)=>{if(typeof p!="boolean")return null;const g=De(l,{lineCount:be.optional.number});return g?{initialValue:p,params:g}:null},binding:{reader:p=>Rd},controller:p=>{var l;return p.value.rawValue.length===1?new m0(p.document,{formatter:kd,value:p.value,viewProps:p.viewProps}):new p0(p.document,{formatter:kd,lineCount:(l=p.params.lineCount)!==null&&l!==void 0?l:xa.monitor.defaultLineCount,value:p.value,viewProps:p.viewProps})}},Ei=P("grl");class o_{constructor(l,h){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=l.createElement("div"),this.element.classList.add(Ei()),h.viewProps.bindClassModifiers(this.element),this.formatter_=h.formatter,this.props_=h.props,this.cursor_=h.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const g=l.createElementNS(we,"svg");g.classList.add(Ei("g")),g.style.height=`calc(var(--bld-us) * ${h.lineCount})`,this.element.appendChild(g),this.svgElem_=g;const D=l.createElementNS(we,"polyline");this.svgElem_.appendChild(D),this.lineElem_=D;const H=l.createElement("div");H.classList.add(Ei("t"),P("tt")()),this.element.appendChild(H),this.tooltipElem_=H,h.value.emitter.on("change",this.onValueUpdate_),this.value=h.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const l=this.svgElem_.getBoundingClientRect(),h=this.value.rawValue.length-1,g=this.props_.get("minValue"),D=this.props_.get("maxValue"),H=[];this.value.rawValue.forEach((Ct,Mt)=>{if(Ct===void 0)return;const ni=$t(Mt,0,h,0,l.width),wa=$t(Ct,g,D,l.height,0);H.push([ni,wa].join(","))}),this.lineElem_.setAttributeNS(null,"points",H.join(" "));const ie=this.tooltipElem_,Fe=this.value.rawValue[this.cursor_.rawValue];if(Fe===void 0){ie.classList.remove(Ei("t","a"));return}const et=$t(this.cursor_.rawValue,0,h,0,l.width),ot=$t(Fe,g,D,l.height,0);ie.style.left=`${et}px`,ie.style.top=`${ot}px`,ie.textContent=`${this.formatter_(Fe)}`,ie.classList.contains(Ei("t","a"))||(ie.classList.add(Ei("t","a"),Ei("t","in")),Ie(ie),ie.classList.remove(Ei("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class a_{constructor(l,h){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props_=h.props,this.value=h.value,this.viewProps=h.viewProps,this.cursor_=ge(-1),this.view=new o_(l,{cursor:this.cursor_,formatter:h.formatter,lineCount:h.lineCount,props:this.props_,value:this.value,viewProps:this.viewProps}),!Oe(l))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const g=new Qi(this.view.element);g.emitter.on("down",this.onGraphPointerDown_),g.emitter.on("move",this.onGraphPointerMove_),g.emitter.on("up",this.onGraphPointerUp_)}}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(l){const h=this.view.element.getBoundingClientRect();this.cursor_.rawValue=Math.floor($t(l.offsetX,0,h.width,0,this.value.rawValue.length))}onGraphPointerDown_(l){this.onGraphPointerMove_(l)}onGraphPointerMove_(l){if(!l.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor($t(l.data.point.x,0,l.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function g0(p){return"format"in p&&!d(p.format)?p.format:wn(2)}function l_(p){var l;return p.value.rawValue.length===1?new m0(p.document,{formatter:g0(p.params),value:p.value,viewProps:p.viewProps}):new p0(p.document,{formatter:g0(p.params),lineCount:(l=p.params.lineCount)!==null&&l!==void 0?l:xa.monitor.defaultLineCount,value:p.value,viewProps:p.viewProps})}function c_(p){var l,h,g;return new a_(p.document,{formatter:g0(p.params),lineCount:(l=p.params.lineCount)!==null&&l!==void 0?l:xa.monitor.defaultLineCount,props:K.fromObject({maxValue:(h="max"in p.params?p.params.max:null)!==null&&h!==void 0?h:100,minValue:(g="min"in p.params?p.params.min:null)!==null&&g!==void 0?g:0}),value:p.value,viewProps:p.viewProps})}function Ep(p){return"view"in p&&p.view==="graph"}const u_={id:"monitor-number",type:"monitor",accept:(p,l)=>{if(typeof p!="number")return null;const h=be,g=De(l,{format:h.optional.function,lineCount:h.optional.number,max:h.optional.number,min:h.optional.number,view:h.optional.string});return g?{initialValue:p,params:g}:null},binding:{defaultBufferSize:p=>Ep(p)?64:1,reader:p=>Nd},controller:p=>Ep(p.params)?c_(p):l_(p)},h_={id:"monitor-string",type:"monitor",accept:(p,l)=>{if(typeof p!="string")return null;const h=be,g=De(l,{lineCount:h.optional.number,multiline:h.optional.boolean});return g?{initialValue:p,params:g}:null},binding:{reader:p=>Ud},controller:p=>{var l;const h=p.value;return h.rawValue.length>1||"multiline"in p.params&&p.params.multiline?new p0(p.document,{formatter:ju,lineCount:(l=p.params.lineCount)!==null&&l!==void 0?l:xa.monitor.defaultLineCount,value:h,viewProps:p.viewProps}):new m0(p.document,{formatter:ju,value:h,viewProps:p.viewProps})}};class f_{constructor(l){this.onValueChange_=this.onValueChange_.bind(this),this.reader=l.reader,this.writer=l.writer,this.emitter=new T,this.value=l.value,this.value.emitter.on("change",this.onValueChange_),this.target=l.target,this.read()}read(){const l=this.target.read();l!==void 0&&(this.value.rawValue=this.reader(l))}write_(l){this.writer(this.target,l)}onValueChange_(l){this.write_(l.rawValue),this.emitter.emit("change",{options:l.options,rawValue:l.rawValue,sender:this})}}function d_(p,l){const h=p.accept(l.target.read(),l.params);if(d(h))return null;const g=be,D={target:l.target,initialValue:h.initialValue,params:h.params},H=p.binding.reader(D),ie=p.binding.constraint?p.binding.constraint(D):void 0,Fe=ge(H(h.initialValue),{constraint:ie,equals:p.binding.equals}),et=new f_({reader:H,target:l.target,value:Fe,writer:p.binding.writer(D)}),ot=g.optional.boolean(l.params.disabled).value,Ct=g.optional.boolean(l.params.hidden).value,Mt=p.controller({constraint:ie,document:l.document,initialValue:h.initialValue,params:h.params,value:et.value,viewProps:ue.create({disabled:ot,hidden:Ct})}),ni=g.optional.string(l.params.label).value;return new mt(l.document,{binding:et,blade:We(),props:K.fromObject({label:ni??l.target.key}),valueController:Mt})}class p_{constructor(l){this.onTick_=this.onTick_.bind(this),this.reader_=l.reader,this.target=l.target,this.emitter=new T,this.value=l.value,this.ticker=l.ticker,this.ticker.emitter.on("tick",this.onTick_),this.read()}dispose(){this.ticker.dispose()}read(){const l=this.target.read();if(l===void 0)return;const h=this.value.rawValue,g=this.reader_(l);this.value.rawValue=wy(h,g),this.emitter.emit("update",{rawValue:g,sender:this})}onTick_(l){this.read()}}function m_(p,l){return l===0?new Nw:new Uw(p,l??xa.monitor.defaultInterval)}function g_(p,l){var h,g,D;const H=be,ie=p.accept(l.target.read(),l.params);if(d(ie))return null;const Fe={target:l.target,initialValue:ie.initialValue,params:ie.params},et=p.binding.reader(Fe),ot=(g=(h=H.optional.number(l.params.bufferSize).value)!==null&&h!==void 0?h:p.binding.defaultBufferSize&&p.binding.defaultBufferSize(ie.params))!==null&&g!==void 0?g:1,Ct=H.optional.number(l.params.interval).value,Mt=new p_({reader:et,target:l.target,ticker:m_(l.document,Ct),value:by(ot)}),ni=H.optional.boolean(l.params.disabled).value,wa=H.optional.boolean(l.params.hidden).value,ya=p.controller({document:l.document,params:ie.params,value:Mt.value,viewProps:ue.create({disabled:ni,hidden:wa})}),Qs=(D=H.optional.string(l.params.label).value)!==null&&D!==void 0?D:l.target.key;return new Nt(l.document,{binding:Mt,blade:We(),props:K.fromObject({label:Qs}),valueController:ya})}class v_{constructor(){this.pluginsMap_={blades:[],inputs:[],monitors:[]}}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(l){l.type==="blade"?this.pluginsMap_.blades.unshift(l):l.type==="input"?this.pluginsMap_.inputs.unshift(l):l.type==="monitor"&&this.pluginsMap_.monitors.unshift(l)}createInput(l,h,g){const D=h.read();if(d(D))throw new x({context:{key:h.key},type:"nomatchingcontroller"});const H=this.pluginsMap_.inputs.reduce((ie,Fe)=>ie??d_(Fe,{document:l,target:h,params:g}),null);if(H)return H;throw new x({context:{key:h.key},type:"nomatchingcontroller"})}createMonitor(l,h,g){const D=this.pluginsMap_.monitors.reduce((H,ie)=>H??g_(ie,{document:l,params:g,target:h}),null);if(D)return D;throw new x({context:{key:h.key},type:"nomatchingcontroller"})}createBlade(l,h){const g=this.pluginsMap_.blades.reduce((D,H)=>D??Bw(H,{document:l,params:h}),null);if(!g)throw new x({type:"nomatchingview",context:{params:h}});return g}createBladeApi(l){if(l instanceof mt)return new Fn(l);if(l instanceof Nt)return new An(l);if(l instanceof ut)return new Qn(l,this);const h=this.pluginsMap_.blades.reduce((g,D)=>g??D.api({controller:l,pool:this}),null);if(!h)throw x.shouldNeverHappen();return h}}function b_(){const p=new v_;return[C_,j3,e_,n_,z3,O3,F3,I3,Ly,s_,h_,u_,Te,rn,jt,Pd].forEach(l=>{p.register(l)}),p}function x_(p){return Ci.isObject(p)?new Ci(p.x,p.y):new Ci}function w_(p,l){p.writeProperty("x",l.x),p.writeProperty("y",l.y)}function ti(p,l){if(!p)return;const h=[],g=bp(p,l);g&&h.push(g);const D=xp(p);return D&&h.push(D),new ca(h)}function y_(p,l){return new Si({assembly:wp,components:[ti("x"in p?p.x:void 0,l.x),ti("y"in p?p.y:void 0,l.y)]})}function Ap(p,l){const[h,g]=p?U3(p):[];if(!d(h)||!d(g))return Math.max(Math.abs(h??0),Math.abs(g??0));const D=Xs(p);return Math.max(Math.abs(D)*10,Math.abs(l)*10)}function __(p,l){const h=l instanceof Si?l.components[0]:void 0,g=l instanceof Si?l.components[1]:void 0,D=Ap(h,p.x),H=Ap(g,p.y);return Math.max(D,H)}function Pp(p,l){return{baseStep:Xs(l),constraint:l,textProps:K.fromObject({draggingScale:Ys(l,p),formatter:wn(Il(l,p))})}}function S_(p){if(!("y"in p))return!1;const l=p.y;return l&&"inverted"in l?!!l.inverted:!1}const C_={id:"input-point2d",type:"input",accept:(p,l)=>{if(!Ci.isObject(p))return null;const h=be,g=De(l,{expanded:h.optional.boolean,picker:h.optional.custom(Hd),x:h.optional.custom(yi),y:h.optional.object({inverted:h.optional.boolean,max:h.optional.number,min:h.optional.number,step:h.optional.number})});return g?{initialValue:p,params:g}:null},binding:{reader:p=>x_,constraint:p=>y_(p.params,p.initialValue),equals:Ci.equals,writer:p=>w_},controller:p=>{const l=p.document,h=p.value,g=p.constraint;if(!(g instanceof Si))throw x.shouldNeverHappen();const D="expanded"in p.params?p.params.expanded:void 0,H="picker"in p.params?p.params.picker:void 0;return new W3(l,{axes:[Pp(h.rawValue.x,g.components[0]),Pp(h.rawValue.y,g.components[1])],expanded:D??!1,invertsY:S_(p.params),maxValue:__(h.rawValue,g),parser:Qr,pickerLayout:H??"popup",value:h,viewProps:p.viewProps})}};class Tp extends i{constructor(l){super(l),this.emitter_=new T,this.controller_.valueController.value.emitter.on("change",h=>{this.emitter_.emit("change",{event:new o(this,h.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(l){this.controller_.props.set("label",l)}get options(){return this.controller_.valueController.props.get("options")}set options(l){this.controller_.valueController.props.set("options",l)}get value(){return this.controller_.valueController.value.rawValue}set value(l){this.controller_.valueController.value.rawValue=l}on(l,h){const g=h.bind(this);return this.emitter_.on(l,D=>{g(D.event)}),this}}class Lp extends i{constructor(l){super(l),this.emitter_=new T,this.controller_.valueController.value.emitter.on("change",h=>{this.emitter_.emit("change",{event:new o(this,h.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(l){this.controller_.props.set("label",l)}get maxValue(){return this.controller_.valueController.sliderController.props.get("maxValue")}set maxValue(l){this.controller_.valueController.sliderController.props.set("maxValue",l)}get minValue(){return this.controller_.valueController.sliderController.props.get("minValue")}set minValue(l){this.controller_.valueController.sliderController.props.set("minValue",l)}get value(){return this.controller_.valueController.value.rawValue}set value(l){this.controller_.valueController.value.rawValue=l}on(l,h){const g=h.bind(this);return this.emitter_.on(l,D=>{g(D.event)}),this}}class Ip extends i{constructor(l){super(l),this.emitter_=new T,this.controller_.valueController.value.emitter.on("change",h=>{this.emitter_.emit("change",{event:new o(this,h.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(l){this.controller_.props.set("label",l)}get formatter(){return this.controller_.valueController.props.get("formatter")}set formatter(l){this.controller_.valueController.props.set("formatter",l)}get value(){return this.controller_.valueController.value.rawValue}set value(l){this.controller_.valueController.value.rawValue=l}on(l,h){const g=h.bind(this);return this.emitter_.on(l,D=>{g(D.event)}),this}}const M_=function(){return{id:"list",type:"blade",accept(p){const l=be,h=De(p,{options:l.required.custom(Ll),value:l.required.raw,view:l.required.constant("list"),label:l.optional.string});return h?{params:h}:null},controller(p){const l=new ua(Wd(p.params.options)),h=ge(p.params.value,{constraint:l}),g=new ha(p.document,{props:new K({options:l.values.value("options")}),value:h,viewProps:p.viewProps});return new Yt(p.document,{blade:p.blade,props:K.fromObject({label:p.params.label}),valueController:g})},api(p){return!(p.controller instanceof Yt)||!(p.controller.valueController instanceof ha)?null:new Tp(p.controller)}}}();function E_(p){return p.reduce((l,h)=>Object.assign(l,{[h.presetKey]:h.read()}),{})}function A_(p,l){p.forEach(h=>{const g=l[h.presetKey];g!==void 0&&h.write(g)})}class P_ extends U{constructor(l,h){super(l,h)}get element(){return this.controller_.view.element}importPreset(l){const h=this.controller_.rackController.rack.find(mt).map(g=>g.binding.target);A_(h,l),this.refresh()}exportPreset(){const l=this.controller_.rackController.rack.find(mt).map(h=>h.binding.target);return E_(l)}refresh(){this.controller_.rackController.rack.find(mt).forEach(l=>{l.binding.read()}),this.controller_.rackController.rack.find(Nt).forEach(l=>{l.binding.read()})}}class T_ extends St{constructor(l,h){super(l,{expanded:h.expanded,blade:h.blade,props:h.props,root:!0,viewProps:h.viewProps})}}const L_={id:"slider",type:"blade",accept(p){const l=be,h=De(p,{max:l.required.number,min:l.required.number,view:l.required.constant("slider"),format:l.optional.function,label:l.optional.string,value:l.optional.number});return h?{params:h}:null},controller(p){var l,h;const g=(l=p.params.value)!==null&&l!==void 0?l:0,D=new qs({max:p.params.max,min:p.params.min}),H=new Qu(p.document,{baseStep:1,parser:Qr,sliderProps:new K({maxValue:D.values.value("max"),minValue:D.values.value("min")}),textProps:K.fromObject({draggingScale:Ys(void 0,g),formatter:(h=p.params.format)!==null&&h!==void 0?h:gy}),value:ge(g,{constraint:D}),viewProps:p.viewProps});return new Yt(p.document,{blade:p.blade,props:K.fromObject({label:p.params.label}),valueController:H})},api(p){return!(p.controller instanceof Yt)||!(p.controller.valueController instanceof Qu)?null:new Lp(p.controller)}},I_=function(){return{id:"text",type:"blade",accept(p){const l=be,h=De(p,{parse:l.required.function,value:l.required.raw,view:l.required.constant("text"),format:l.optional.function,label:l.optional.string});return h?{params:h}:null},controller(p){var l;const h=new Pl(p.document,{parser:p.params.parse,props:K.fromObject({formatter:(l=p.params.format)!==null&&l!==void 0?l:g=>String(g)}),value:ge(p.params.value),viewProps:p.viewProps});return new Yt(p.document,{blade:p.blade,props:K.fromObject({label:p.params.label}),valueController:h})},api(p){return!(p.controller instanceof Yt)||!(p.controller.valueController instanceof Pl)?null:new Ip(p.controller)}}}();function D_(p){const l=p.createElement("div");return l.classList.add(P("dfw")()),p.body&&p.body.appendChild(l),l}function Dp(p,l,h){if(p.querySelector(`style[data-tp-style=${l}]`))return;const g=p.createElement("style");g.dataset.tpStyle=l,g.textContent=h,p.head.appendChild(g)}class R_ extends P_{constructor(l){var h,g;const D=l??{},H=(h=D.document)!==null&&h!==void 0?h:Ze(),ie=b_(),Fe=new T_(H,{expanded:D.expanded,blade:We(),props:K.fromObject({title:D.title}),viewProps:ue.create()});super(Fe,ie),this.pool_=ie,this.containerElem_=(g=D.container)!==null&&g!==void 0?g:D_(H),this.containerElem_.appendChild(this.element),this.doc_=H,this.usesDefaultWrapper_=!D.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw x.alreadyDisposed();return this.doc_}dispose(){const l=this.containerElem_;if(!l)throw x.alreadyDisposed();if(this.usesDefaultWrapper_){const h=l.parentElement;h&&h.removeChild(l)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(l){("plugin"in l?[l.plugin]:"plugins"in l?l.plugins:[]).forEach(g=>{this.pool_.register(g),this.embedPluginStyle_(g)})}embedPluginStyle_(l){l.css&&Dp(this.document,`plugin-${l.id}`,l.css)}setUpDefaultPlugins_(){Dp(this.document,"default",'.tp-tbiv_b,.tp-coltxtv_ms,.tp-ckbv_i,.tp-rotv_b,.tp-fldv_b,.tp-mllv_i,.tp-sglv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-mllv_i,.tp-sglv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--mo-fg);height:var(--bld-us);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-mllv_i::-webkit-scrollbar,.tp-sglv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-mllv_i::-webkit-scrollbar-corner,.tp-sglv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-mllv_i::-webkit-scrollbar-thumb,.tp-sglv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-br: var(--tp-base-border-radius, 6px);--cnt-h-p: var(--tp-container-horizontal-padding, 4px);--cnt-v-p: var(--tp-container-vertical-padding, 4px);--elm-br: var(--tp-element-border-radius, 2px);--bld-s: var(--tp-blade-spacing, 4px);--bld-us: var(--tp-blade-unit-size, 20px);--bs-bg: var(--tp-base-background-color, hsl(230deg, 7%, 17%));--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--btn-bg: var(--tp-button-background-color, hsl(230deg, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230deg, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230deg, 7%, 75%));--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230deg, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tabv_c .tp-brkv>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-v-p))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tabv_c .tp-brkv>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--bld-s)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tabv_c .tp-brkv>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tabv_c .tp-brkv>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--elm-br);border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tabv_c .tp-brkv .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tabv_c .tp-brkv>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tabv_c .tp-brkv>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--elm-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);overflow:hidden;padding-left:var(--cnt-h-p);padding-right:calc(4px + var(--bld-us) + var(--cnt-h-p));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(var(--cnt-h-p) + (var(--bld-us) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--elm-br);cursor:pointer;display:block;height:var(--bld-us);position:relative;width:var(--bld-us)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--bld-s);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--bld-s)}.tp-colpv_rgb{display:flex;margin-top:var(--bld-s);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-v-p);padding-top:calc(var(--cnt-v-p) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--elm-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--bld-us)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--elm-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--elm-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;cursor:pointer;display:block;height:var(--bld-us);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--bld-us)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--elm-br);bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--elm-br);color:var(--lbl-fg);cursor:pointer;height:var(--bld-us);line-height:var(--bld-us);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv.tp-fldv-not .tp-fldv_b{display:none}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--bld-us) + 4px);width:var(--bs-br)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--bld-us)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding:0 4px}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--bld-us)*3);line-height:var(--bld-us);padding:0 4px;resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--bld-s);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-p2dpv{padding-left:calc(var(--bld-us) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:6px;box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:168px;padding:var(--cnt-v-p) var(--cnt-h-p);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--bld-us);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--elm-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:"";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--bld-us) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_c{padding-bottom:var(--cnt-v-p);padding-left:4px;padding-top:var(--cnt-v-p)}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--bld-us) + 4px);width:var(--bs-br)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-h-p) + 4px);padding-right:calc(var(--cnt-h-p) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);bottom:2px;content:"";left:0;pointer-events:none;position:absolute;right:0;top:0}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);opacity:.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-txtv{position:relative}.tp-txtv_i{padding:0 4px}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:-3px;position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--bld-us) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--elm-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--bld-us) + var(--cnt-h-p));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv.tp-rotv-not .tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}'),this.pool_.getAll().forEach(l=>{this.embedPluginStyle_(l)}),this.registerPlugin({plugins:[L_,M_,Pd,I_]})}}const k_=new n("3.1.4");t.BladeApi=i,t.ButtonApi=A,t.FolderApi=U,t.InputBindingApi=Fn,t.ListApi=Tp,t.MonitorBindingApi=An,t.Pane=R_,t.SeparatorApi=Pn,t.SliderApi=Lp,t.TabApi=On,t.TabPageApi=tn,t.TextApi=Ip,t.TpChangeEvent=o,t.VERSION=k_,Object.defineProperty(t,"__esModule",{value:!0})})})(MY,uu);function EY(r){const e=new uu.Pane({title:r,expanded:!1});return xl(()=>{e.dispose()}),e}function Af(r,e,t,n){t??(t=hl(e).value);const[i,s]=Ar(t),o={view:"list",options:e,value:t,label:n},a=r.addBlade(o);a.on("change",f=>{s(()=>f.value)});const c=f=>{s(()=>f),a.value=f};return[i,c,(f,d)=>{a.options=f,d!==void 0&&c(d)}]}function AY(r,e,t,n,i){t??(t=hl(e).value);const s={view:"list",options:e,value:t,label:n},o=r.addBlade(s);o.on("change",i);const a=u=>{o.value=u};return[a,(u,f)=>{o.options=u,f!==void 0&&a(f)}]}function bb(r,e,t){r=ul(r,t,!1);const[n,i]=Ar(e),s=Bt(()=>{const x=new Map;for(const w of n())x.set(Hh(w),w);return x}),[o,a]=Ar(hl(e)),[c,u]=AY(r,xb(e),Hh(o()),"Font family",x=>{const w=s().get(x.value);if(w===void 0)throw new Error(`Unknown font "${x.value}"`);kp(()=>{a(w),m(Gh(w),"Default")})}),[f,d,m]=Af(r,Gh(o()),null,"Font variation");return[Bt(()=>f()==="Default"?o():o().getVariation(f())),x=>{kp(()=>{i(A=>[...A,...x]);const w=hl(x);u(xb(n())),m(Gh(w)),a(w),c(Hh(w))})}]}function xb(r){return r.map(e=>{const t=e.fullName;return{text:t,value:t}})}function Gh(r){return[{value:"Default",text:"Default"},...Object.keys(r.namedVariations).map(e=>({value:e,text:e}))]}function Hh(r){return r.fullName}const wb={type:"change"},Wh={type:"start"},yb={type:"end"};class PY extends Bs{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new Y,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:to.ROTATE,MIDDLE:to.DOLLY,RIGHT:to.PAN},this.touches={ONE:no.ROTATE,TWO:no.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(b){b.addEventListener("keydown",Ze),this._domElementKeyEvents=b},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(wb),n.update(),s=i.NONE},this.update=function(){const b=new Y,I=new Rs().setFromUnitVectors(e.up,new Y(0,1,0)),$=I.clone().invert(),W=new Y,X=new Rs,Te=2*Math.PI;return function(){const We=n.object.position;b.copy(We).sub(n.target),b.applyQuaternion(I),a.setFromVector3(b),n.autoRotate&&s===i.NONE&&R(F()),n.enableDamping?(a.theta+=c.theta*n.dampingFactor,a.phi+=c.phi*n.dampingFactor):(a.theta+=c.theta,a.phi+=c.phi);let qe=n.minAzimuthAngle,Xe=n.maxAzimuthAngle;return isFinite(qe)&&isFinite(Xe)&&(qe<-Math.PI?qe+=Te:qe>Math.PI&&(qe-=Te),Xe<-Math.PI?Xe+=Te:Xe>Math.PI&&(Xe-=Te),qe<=Xe?a.theta=Math.max(qe,Math.min(Xe,a.theta)):a.theta=a.theta>(qe+Xe)/2?Math.max(qe,a.theta):Math.min(Xe,a.theta)),a.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,a.phi)),a.makeSafe(),a.radius*=u,a.radius=Math.max(n.minDistance,Math.min(n.maxDistance,a.radius)),n.enableDamping===!0?n.target.addScaledVector(f,n.dampingFactor):n.target.add(f),b.setFromSpherical(a),b.applyQuaternion($),We.copy(n.target).add(b),n.object.lookAt(n.target),n.enableDamping===!0?(c.theta*=1-n.dampingFactor,c.phi*=1-n.dampingFactor,f.multiplyScalar(1-n.dampingFactor)):(c.set(0,0,0),f.set(0,0,0)),u=1,d||W.distanceToSquared(n.object.position)>o||8*(1-X.dot(n.object.quaternion))>o?(n.dispatchEvent(wb),W.copy(n.object.position),X.copy(n.object.quaternion),d=!1,!0):!1}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",oe),n.domElement.removeEventListener("pointerdown",me),n.domElement.removeEventListener("pointercancel",Ie),n.domElement.removeEventListener("wheel",tt),n.domElement.removeEventListener("pointermove",_e),n.domElement.removeEventListener("pointerup",we),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",Ze)};const n=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=i.NONE;const o=1e-6,a=new lg,c=new lg;let u=1;const f=new Y;let d=!1;const m=new Ne,v=new Ne,S=new Ne,x=new Ne,w=new Ne,A=new Ne,T=new Ne,E=new Ne,P=new Ne,y=[],k={};function F(){return 2*Math.PI/60/60*n.autoRotateSpeed}function M(){return Math.pow(.95,n.zoomSpeed)}function R(b){c.theta-=b}function O(b){c.phi-=b}const z=function(){const b=new Y;return function($,W){b.setFromMatrixColumn(W,0),b.multiplyScalar(-$),f.add(b)}}(),Q=function(){const b=new Y;return function($,W){n.screenSpacePanning===!0?b.setFromMatrixColumn(W,1):(b.setFromMatrixColumn(W,0),b.crossVectors(n.object.up,b)),b.multiplyScalar($),f.add(b)}}(),G=function(){const b=new Y;return function($,W){const X=n.domElement;if(n.object.isPerspectiveCamera){const Te=n.object.position;b.copy(Te).sub(n.target);let Be=b.length();Be*=Math.tan(n.object.fov/2*Math.PI/180),z(2*$*Be/X.clientHeight,n.object.matrix),Q(2*W*Be/X.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(z($*(n.object.right-n.object.left)/n.object.zoom/X.clientWidth,n.object.matrix),Q(W*(n.object.top-n.object.bottom)/n.object.zoom/X.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function V(b){n.object.isPerspectiveCamera?u/=b:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*b)),n.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function q(b){n.object.isPerspectiveCamera?u*=b:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/b)),n.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function j(b){m.set(b.clientX,b.clientY)}function ge(b){T.set(b.clientX,b.clientY)}function K(b){x.set(b.clientX,b.clientY)}function Ee(b){v.set(b.clientX,b.clientY),S.subVectors(v,m).multiplyScalar(n.rotateSpeed);const I=n.domElement;R(2*Math.PI*S.x/I.clientHeight),O(2*Math.PI*S.y/I.clientHeight),m.copy(v),n.update()}function Pe(b){E.set(b.clientX,b.clientY),P.subVectors(E,T),P.y>0?V(M()):P.y<0&&q(M()),T.copy(E),n.update()}function re(b){w.set(b.clientX,b.clientY),A.subVectors(w,x).multiplyScalar(n.panSpeed),G(A.x,A.y),x.copy(w),n.update()}function ae(b){b.deltaY<0?q(M()):b.deltaY>0&&V(M()),n.update()}function xe(b){let I=!1;switch(b.code){case n.keys.UP:b.ctrlKey||b.metaKey||b.shiftKey?O(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):G(0,n.keyPanSpeed),I=!0;break;case n.keys.BOTTOM:b.ctrlKey||b.metaKey||b.shiftKey?O(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):G(0,-n.keyPanSpeed),I=!0;break;case n.keys.LEFT:b.ctrlKey||b.metaKey||b.shiftKey?R(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):G(n.keyPanSpeed,0),I=!0;break;case n.keys.RIGHT:b.ctrlKey||b.metaKey||b.shiftKey?R(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):G(-n.keyPanSpeed,0),I=!0;break}I&&(b.preventDefault(),n.update())}function be(){if(y.length===1)m.set(y[0].pageX,y[0].pageY);else{const b=.5*(y[0].pageX+y[1].pageX),I=.5*(y[0].pageY+y[1].pageY);m.set(b,I)}}function De(){if(y.length===1)x.set(y[0].pageX,y[0].pageY);else{const b=.5*(y[0].pageX+y[1].pageX),I=.5*(y[0].pageY+y[1].pageY);x.set(b,I)}}function ve(){const b=y[0].pageX-y[1].pageX,I=y[0].pageY-y[1].pageY,$=Math.sqrt(b*b+I*I);T.set(0,$)}function Je(){n.enableZoom&&ve(),n.enablePan&&De()}function pe(){n.enableZoom&&ve(),n.enableRotate&&be()}function he(b){if(y.length==1)v.set(b.pageX,b.pageY);else{const $=_(b),W=.5*(b.pageX+$.x),X=.5*(b.pageY+$.y);v.set(W,X)}S.subVectors(v,m).multiplyScalar(n.rotateSpeed);const I=n.domElement;R(2*Math.PI*S.x/I.clientHeight),O(2*Math.PI*S.y/I.clientHeight),m.copy(v)}function le(b){if(y.length===1)w.set(b.pageX,b.pageY);else{const I=_(b),$=.5*(b.pageX+I.x),W=.5*(b.pageY+I.y);w.set($,W)}A.subVectors(w,x).multiplyScalar(n.panSpeed),G(A.x,A.y),x.copy(w)}function ue(b){const I=_(b),$=b.pageX-I.x,W=b.pageY-I.y,X=Math.sqrt($*$+W*W);E.set(0,X),P.set(0,Math.pow(E.y/T.y,n.zoomSpeed)),V(P.y),T.copy(E)}function te(b){n.enableZoom&&ue(b),n.enablePan&&le(b)}function se(b){n.enableZoom&&ue(b),n.enableRotate&&he(b)}function me(b){n.enabled!==!1&&(y.length===0&&(n.domElement.setPointerCapture(b.pointerId),n.domElement.addEventListener("pointermove",_e),n.domElement.addEventListener("pointerup",we)),Me(b),b.pointerType==="touch"?N(b):Ce(b))}function _e(b){n.enabled!==!1&&(b.pointerType==="touch"?B(b):Oe(b))}function we(b){Re(b),y.length===0&&(n.domElement.releasePointerCapture(b.pointerId),n.domElement.removeEventListener("pointermove",_e),n.domElement.removeEventListener("pointerup",we)),n.dispatchEvent(yb),s=i.NONE}function Ie(b){Re(b)}function Ce(b){let I;switch(b.button){case 0:I=n.mouseButtons.LEFT;break;case 1:I=n.mouseButtons.MIDDLE;break;case 2:I=n.mouseButtons.RIGHT;break;default:I=-1}switch(I){case to.DOLLY:if(n.enableZoom===!1)return;ge(b),s=i.DOLLY;break;case to.ROTATE:if(b.ctrlKey||b.metaKey||b.shiftKey){if(n.enablePan===!1)return;K(b),s=i.PAN}else{if(n.enableRotate===!1)return;j(b),s=i.ROTATE}break;case to.PAN:if(b.ctrlKey||b.metaKey||b.shiftKey){if(n.enableRotate===!1)return;j(b),s=i.ROTATE}else{if(n.enablePan===!1)return;K(b),s=i.PAN}break;default:s=i.NONE}s!==i.NONE&&n.dispatchEvent(Wh)}function Oe(b){switch(s){case i.ROTATE:if(n.enableRotate===!1)return;Ee(b);break;case i.DOLLY:if(n.enableZoom===!1)return;Pe(b);break;case i.PAN:if(n.enablePan===!1)return;re(b);break}}function tt(b){n.enabled===!1||n.enableZoom===!1||s!==i.NONE||(b.preventDefault(),n.dispatchEvent(Wh),ae(b),n.dispatchEvent(yb))}function Ze(b){n.enabled===!1||n.enablePan===!1||xe(b)}function N(b){switch(L(b),y.length){case 1:switch(n.touches.ONE){case no.ROTATE:if(n.enableRotate===!1)return;be(),s=i.TOUCH_ROTATE;break;case no.PAN:if(n.enablePan===!1)return;De(),s=i.TOUCH_PAN;break;default:s=i.NONE}break;case 2:switch(n.touches.TWO){case no.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Je(),s=i.TOUCH_DOLLY_PAN;break;case no.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;pe(),s=i.TOUCH_DOLLY_ROTATE;break;default:s=i.NONE}break;default:s=i.NONE}s!==i.NONE&&n.dispatchEvent(Wh)}function B(b){switch(L(b),s){case i.TOUCH_ROTATE:if(n.enableRotate===!1)return;he(b),n.update();break;case i.TOUCH_PAN:if(n.enablePan===!1)return;le(b),n.update();break;case i.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;te(b),n.update();break;case i.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;se(b),n.update();break;default:s=i.NONE}}function oe(b){n.enabled!==!1&&b.preventDefault()}function Me(b){y.push(b)}function Re(b){delete k[b.pointerId];for(let I=0;I<y.length;I++)if(y[I].pointerId==b.pointerId){y.splice(I,1);return}}function L(b){let I=k[b.pointerId];I===void 0&&(I=new Ne,k[b.pointerId]=I),I.set(b.pageX,b.pageY)}function _(b){const I=b.pointerId===y[0].pointerId?y[1]:y[0];return k[I.pointerId]}n.domElement.addEventListener("contextmenu",oe),n.domElement.addEventListener("pointerdown",me),n.domElement.addEventListener("pointercancel",Ie),n.domElement.addEventListener("wheel",tt,{passive:!1}),this.update()}}function TY(r){const e=new Qb,t=new sr,n=new PY(t,e.domElement),i=new j5,s=new Ne,o=new FA,a=new BA(new Rn,16777215),c=new kA(8355711),u=new RA(8355711),f=new OA(256,256,2039583,4144959);let d=null;o.layers.mask=2,ds(()=>{f.visible=r(),x()});function m(){u.position.copy(t.position),x()}function v(M,R){e.setSize(M,R),t.aspect=M/R,t.updateProjectionMatrix(),x()}function S(){const M=e.domElement.parentElement??e.domElement;v(M.offsetWidth,M.offsetHeight)}function x(){e.render(i,t)}const w=(...M)=>{i.add(...M),x()},A=()=>{i.add(c,u,f),t.position.set(24,24,24),t.lookAt(0,0,0),m(),window.addEventListener("resize",S),n.addEventListener("change",m),e.domElement.addEventListener("dblclick",M=>{M.preventDefault(),P()}),e.domElement.addEventListener("mousemove",M=>{E(M)}),e.domElement.addEventListener("touchmove",M=>{const R=M.changedTouches[0];if(R===void 0)throw new Error("Unexpected condition");E(R)}),S()};function T(){o.setFromCamera(s,t);const[M]=o.intersectObjects(i.children);M===void 0?(i.remove(a),d=null):(a.setFromObject(M.object).update(),i.add(a),d=M),x()}function E(M){const{top:R,left:O,width:z,height:Q}=e.domElement.getBoundingClientRect();s.x=(M.clientX-O)/z*2-1,s.y=-(M.clientY-R)/Q*2+1,T()}function P(){if(d===null){y();return}k(F())}function y(){k(new Y)}function k(M){n.target.copy(M),n.update()}function F(){let M=a.geometry.boundingSphere;if(M===null&&(a.geometry.computeBoundingSphere(),M=a.geometry.boundingSphere),M===null)throw new Error("Can't compute highlight bounding sphere");return M.center}return xl(()=>{e.dispose()}),[e.domElement,w,A,x]}const qh=new LA({transparent:!0,opacity:.9}),LY=new TA,IY=K_('<div class="render-container"></div>'),DY=["https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Me5WZLCzYlKw.ttf","https://fonts.gstatic.com/s/robotoslab/v24/BngbUXZYTXPIvIBgJJSb6s3BzlRRfKOFbvjojISWaG5iddG-1A.ttf","https://fonts.gstatic.com/s/lobster/v28/neILzCirqoswsqX9_oWsMqEzSJQ.ttf","https://fonts.gstatic.com/s/righteous/v13/1cXxaUPXBpj2rGoU7C9mj3uEicG01A.ttf","https://fonts.gstatic.com/s/edunswactfoundation/v2/raxRHjqJtsNBFUi8WO0vUBgc9D-2lV_oQdCAYlt_QTQ0vUxJki9tovGLeC-sfguJ.ttf"];function RY(r){return console.error(r),r instanceof Error?`${r.name}: ${r.message}`:String(r)}const kY=()=>{const[r]=N_(async()=>{const e=DY.map(async t=>{const i=await(await fetch(t)).arrayBuffer();return yd(cd.Buffer.from(i))});return Promise.all(e)});return Ic(Y_,{fallback:RY,get children(){return Ic(X_,{get when(){return r()},fallback:"Loading ...",keyed:!0,children:e=>Ic(FY,{fonts:e})})}})},FY=r=>{const e=EY("Settings"),t=ul(e,"Scene options"),[n]=Hf(t,!0,"Show grid"),[i]=xn(t,.1,1,.1,qh.opacity,"Base opacity");ds(()=>{qh.opacity=i(),c()});const[s,o,a,c]=TY(n),u=ul(e,"Shared die options"),[f,d]=bb(u,r.fonts,"Text font"),[m,v]=bb(u,r.fonts,"Mark font");Sz(R=>{const O=R.map(z=>yd(cd.Buffer.from(z)));d(O),v(O)});const[S]=xn(u,.01,2,.01,1,"Global font scale"),[x]=xn(u,1,24,1,4,"Font quality"),[w]=xn(u,.01,2,.01,.7,"Text depth"),[A,T]=Af(t,[{text:"Preview",value:"preview"},{text:"Render",value:"render"},{text:"STL",value:"stl"}],"preview","Render mode"),[E]=Af(t,[{text:"Subtract",value:"subtract"},{text:"Union",value:"union"}],"subtract","Render operation"),P=t.addButton({title:"Export STL"}),y={folder:e,faceOptions:{textFont:f,markFont:m,fontScale:S,depth:w,segments:x},renderMode:A,renderOperation:E},k=[LV(1,-1,y),pz(-1,-2,y),mz(0,-1,y),gz(-1,-1,y),bz(0,-2,y),vz(1,-2,y),xz(0,0,y),_z(0,1,y),ov(-1,1,y),ov(-1,0,y,!0),AV(1,1,y),TV(0,2,y),DV(1,0,y)],F=k.map(R=>{const O=new Do,z=Bt(()=>{const G=R.base();return G===null?null:cv(G,qh)}),Q=q_(R.faces,G=>cv(G,LY));return ds(G=>{G==null||G.removeFromParent();const V=z();return V===null?null:(O.add(V),c(),V)}),ds(G=>{G.forEach(q=>q.removeFromParent());const V=Q();return O.add(...V),c(),V},[]),ds(()=>{const[G,V]=M();O.position.set(R.x*G,R.y*V,0)}),O}),M=Bt(()=>{const[R,O]=k.reduce((z,Q)=>{const G=Q.base();if(G===null)return z;const[V,q]=od.measureDimensions(G);return[Math.max(z[0],V),Math.max(z[1],q)]},[0,0]);return[R*1.5,O*1.25]});return ds(U_(M,c)),V_(()=>{a();const R=new Do;R.rotation.x=-Math.PI/2,R.add(...F),o(R),P.on("click",()=>{const O=A();T("stl"),R.rotation.x=0,R.updateWorldMatrix(!0,!0);const Q=new CY().parse(R,{binary:!0});R.rotation.x=-Math.PI/2;const G=new Date;let V=`${G.getFullYear()}`.padStart(4,"0");V+="-"+`${G.getMonth()}`.padStart(2,"0"),V+="-"+`${G.getDate()}`.padStart(2,"0"),V+="_"+`${G.getHours()}`.padStart(2,"0"),V+="-"+`${G.getMinutes()}`.padStart(2,"0"),V+="-"+`${G.getSeconds()}`.padStart(2,"0"),pf.saveAs(new Blob([Q]),`dice-${V}.stl`),T(O)})}),(()=>{const R=IY.cloneNode(!0);return Ib(R,s),R})()},Ow=document.getElementById("app");if(Ow===null)throw new Error("No app root");Z_(()=>Ic(kY,{}),Ow);
