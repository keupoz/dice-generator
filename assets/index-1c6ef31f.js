var fP=Object.defineProperty;var hP=(r,e,t)=>e in r?fP(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var ml=(r,e,t)=>(hP(r,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();const Zn={};function dP(r){Zn.context=r}const pP=(r,e)=>r===e,Bs=Symbol("solid-proxy"),Lg=Symbol("solid-track"),d0={equals:pP};let Ts=null,Yy=Jy;const es=1,p0=2,qy={owned:null,cleanups:null,context:null,owner:null},nh={};var _n=null;let xo=null,Cn=null,nr=null,Ki=null,Dp=0;function mP(r,e){const t=Cn,n=_n,i=r.length===0,s=i?qy:{owned:null,cleanups:null,context:null,owner:e||n},o=i?r:()=>r(()=>zs(()=>H0(s)));_n=s,Cn=null;try{return Gs(o,!0)}finally{Cn=t,_n=n}}function Ds(r,e){e=e?Object.assign({},d0,e):d0;const t={value:r,observers:null,observerSlots:null,comparator:e.equals||void 0},n=i=>(typeof i=="function"&&(i=i(t.value)),Ky(t,i));return[jy.bind(t),n]}function Dg(r,e,t){const n=X0(r,e,!0,es);qa(n)}function zd(r,e,t){const n=X0(r,e,!1,es);qa(n)}function m0(r,e,t){Yy=wP;const n=X0(r,e,!1,es);n.user=!0,Ki?Ki.push(n):qa(n)}function bn(r,e,t){t=t?Object.assign({},d0,t):d0;const n=X0(r,e,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=t.equals||void 0,qa(n),jy.bind(n)}function gP(r,e,t){let n,i,s;arguments.length===2&&typeof e=="object"||arguments.length===1?(n=!0,i=r,s=e||{}):(n=r,i=e,s=t||{});let o=null,a=nh,u=null,f=!1,h="initialValue"in s,p=typeof n=="function"&&bn(n);const g=new Set,[b,C]=(s.storage||Ds)(s.initialValue),[y,w]=Ds(void 0),[A,O]=Ds(void 0,{equals:!1}),[E,T]=Ds(h?"ready":"unresolved");if(Zn.context){u=`${Zn.context.id}${Zn.context.count++}`;let N;s.ssrLoadFrom==="initial"?a=s.initialValue:Zn.load&&(N=Zn.load(u))&&(a=N[0])}function M(N,G,X,J){return o===N&&(o=null,h=!0,(N===a||G===a)&&s.onHydrated&&queueMicrotask(()=>s.onHydrated(J,{value:G})),a=nh,B(G,X)),G}function B(N,G){Gs(()=>{G||C(()=>N),T(G?"errored":"ready"),w(G);for(const X of g.keys())X.decrement();g.clear()},!1)}function F(){const N=xP,G=b(),X=y();if(X&&!o)throw X;return Cn&&!Cn.user&&N&&Dg(()=>{A(),o&&(N.resolved||g.has(N)||(N.increment(),g.add(N)))}),G}function I(N=!0){if(N!==!1&&f)return;f=!1;const G=p?p():n;if(G==null||G===!1){M(o,zs(b));return}const X=a!==nh?a:zs(()=>i(G,{value:b(),refetching:N}));return typeof X!="object"||!(X&&"then"in X)?(M(o,X,void 0,G),X):(o=X,f=!0,queueMicrotask(()=>f=!1),Gs(()=>{T(h?"refreshing":"pending"),O()},!1),X.then(J=>M(X,J,void 0,G),J=>M(X,void 0,e2(J),G)))}return Object.defineProperties(F,{state:{get:()=>E()},error:{get:()=>y()},loading:{get(){const N=E();return N==="pending"||N==="refreshing"}},latest:{get(){if(!h)return F();const N=y();if(N&&!o)throw N;return b()}}}),p?Dg(()=>I(!1)):I(!1),[F,{refetch:I,mutate:C}]}function Qu(r){return Gs(r,!1)}function zs(r){const e=Cn;Cn=null;try{return r()}finally{Cn=e}}function vP(r){m0(()=>zs(r))}function Lo(r){return _n===null||(_n.cleanups===null?_n.cleanups=[r]:_n.cleanups.push(r)),r}function Og(r){Ts||(Ts=Symbol("error")),_n===null||(_n.context===null?_n.context={[Ts]:[r]}:_n.context[Ts]?_n.context[Ts].push(r):_n.context[Ts]=[r])}function Zy(){return Cn}let xP;function jy(){const r=xo;if(this.sources&&(this.state||r))if(this.state===es||r)qa(this);else{const e=nr;nr=null,Gs(()=>v0(this),!1),nr=e}if(Cn){const e=this.observers?this.observers.length:0;Cn.sources?(Cn.sources.push(this),Cn.sourceSlots.push(e)):(Cn.sources=[this],Cn.sourceSlots=[e]),this.observers?(this.observers.push(Cn),this.observerSlots.push(Cn.sources.length-1)):(this.observers=[Cn],this.observerSlots=[Cn.sources.length-1])}return this.value}function Ky(r,e,t){let n=r.value;return(!r.comparator||!r.comparator(n,e))&&(r.value=e,r.observers&&r.observers.length&&Gs(()=>{for(let i=0;i<r.observers.length;i+=1){const s=r.observers[i],o=xo&&xo.running;o&&xo.disposed.has(s),(o&&!s.tState||!o&&!s.state)&&(s.pure?nr.push(s):Ki.push(s),s.observers&&Qy(s)),o||(s.state=es)}if(nr.length>1e6)throw nr=[],new Error},!1)),e}function qa(r){if(!r.fn)return;H0(r);const e=_n,t=Cn,n=Dp;Cn=_n=r,bP(r,r.value,n),Cn=t,_n=e}function bP(r,e,t){let n;try{n=r.fn(e)}catch(i){r.pure&&(r.state=es,r.owned&&r.owned.forEach(H0),r.owned=null),t2(i)}(!r.updatedAt||r.updatedAt<=t)&&(r.updatedAt!=null&&"observers"in r?Ky(r,n):r.value=n,r.updatedAt=t)}function X0(r,e,t,n=es,i){const s={fn:r,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:_n,context:null,pure:t};return _n===null||_n!==qy&&(_n.owned?_n.owned.push(s):_n.owned=[s]),s}function g0(r){const e=xo;if(r.state===0||e)return;if(r.state===p0||e)return v0(r);if(r.suspense&&zs(r.suspense.inFallback))return r.suspense.effects.push(r);const t=[r];for(;(r=r.owner)&&(!r.updatedAt||r.updatedAt<Dp);)(r.state||e)&&t.push(r);for(let n=t.length-1;n>=0;n--)if(r=t[n],r.state===es||e)qa(r);else if(r.state===p0||e){const i=nr;nr=null,Gs(()=>v0(r,t[0]),!1),nr=i}}function Gs(r,e){if(nr)return r();let t=!1;e||(nr=[]),Ki?t=!0:Ki=[],Dp++;try{const n=r();return yP(t),n}catch(n){nr||(Ki=null),t2(n)}}function yP(r){if(nr&&(Jy(nr),nr=null),r)return;const e=Ki;Ki=null,e.length&&Gs(()=>Yy(e),!1)}function Jy(r){for(let e=0;e<r.length;e++)g0(r[e])}function wP(r){let e,t=0;for(e=0;e<r.length;e++){const n=r[e];n.user?r[t++]=n:g0(n)}for(Zn.context&&dP(),e=0;e<t;e++)g0(r[e])}function v0(r,e){const t=xo;r.state=0;for(let n=0;n<r.sources.length;n+=1){const i=r.sources[n];i.sources&&(i.state===es||t?i!==e&&g0(i):(i.state===p0||t)&&v0(i,e))}}function Qy(r){const e=xo;for(let t=0;t<r.observers.length;t+=1){const n=r.observers[t];(!n.state||e)&&(n.state=p0,n.pure?nr.push(n):Ki.push(n),n.observers&&Qy(n))}}function H0(r){let e;if(r.sources)for(;r.sources.length;){const t=r.sources.pop(),n=r.sourceSlots.pop(),i=t.observers;if(i&&i.length){const s=i.pop(),o=t.observerSlots.pop();n<i.length&&(s.sourceSlots[o]=n,i[n]=s,t.observerSlots[n]=o)}}if(r.owned){for(e=0;e<r.owned.length;e++)H0(r.owned[e]);r.owned=null}if(r.cleanups){for(e=0;e<r.cleanups.length;e++)r.cleanups[e]();r.cleanups=null}r.state=0,r.context=null}function e2(r){return r instanceof Error||typeof r=="string"?r:new Error("Unknown error")}function t2(r){r=e2(r);const e=Ts&&n2(_n,Ts);if(!e)throw r;for(const t of e)t(r)}function n2(r,e){return r?r.context&&r.context[e]!==void 0?r.context[e]:n2(r.owner,e):void 0}function e0(r,e){return zs(()=>r(e||{}))}function _P(r){let e=!1;const t=r.keyed,n=bn(()=>r.when,void 0,{equals:(i,s)=>e?i===s:!i==!s});return bn(()=>{const i=n();if(i){const s=r.children,o=typeof s=="function"&&s.length>0;return e=t||o,o?zs(()=>s(i)):s}return r.fallback},void 0,void 0)}let $c;function SP(r){let e,t;Zn.context&&Zn.load&&(t=Zn.load(Zn.context.id+Zn.context.count))&&(e=t[0]);const[n,i]=Ds(e,void 0);return $c||($c=new Set),$c.add(i),Lo(()=>$c.delete(i)),bn(()=>{let s;if(s=n()){const o=r.fallback,a=typeof o=="function"&&o.length?zs(()=>o(s,()=>i())):o;return Og(i),a}return Og(i),r.children},void 0,void 0)}function CP(r,e,t){let n=t.length,i=e.length,s=n,o=0,a=0,u=e[i-1].nextSibling,f=null;for(;o<i||a<s;){if(e[o]===t[a]){o++,a++;continue}for(;e[i-1]===t[s-1];)i--,s--;if(i===o){const h=s<n?a?t[a-1].nextSibling:t[s-a]:u;for(;a<s;)r.insertBefore(t[a++],h)}else if(s===a)for(;o<i;)(!f||!f.has(e[o]))&&e[o].remove(),o++;else if(e[o]===t[s-1]&&t[a]===e[i-1]){const h=e[--i].nextSibling;r.insertBefore(t[a++],e[o++].nextSibling),r.insertBefore(t[--s],h),e[i]=t[s]}else{if(!f){f=new Map;let p=a;for(;p<s;)f.set(t[p],p++)}const h=f.get(e[o]);if(h!=null)if(a<h&&h<s){let p=o,g=1,b;for(;++p<i&&p<s&&!((b=f.get(e[p]))==null||b!==h+g);)g++;if(g>h-a){const C=e[o];for(;a<h;)r.insertBefore(t[a++],C)}else r.replaceChild(t[a++],e[o++])}else o++;else e[o++].remove()}}}function PP(r,e,t,n={}){let i;return mP(s=>{i=s,e===document?r():r2(e,r(),e.firstChild?null:void 0,t)},n.owner),()=>{i(),e.textContent=""}}function MP(r,e,t){const n=document.createElement("template");n.innerHTML=r;let i=n.content.firstChild;return t&&(i=i.firstChild),i}function r2(r,e,t,n){if(t!==void 0&&!n&&(n=[]),typeof e!="function")return x0(r,e,n,t);zd(i=>x0(r,e(),i,t),n)}function x0(r,e,t,n,i){for(Zn.context&&!t&&(t=[...r.childNodes]);typeof t=="function";)t=t();if(e===t)return t;const s=typeof e,o=n!==void 0;if(r=o&&t[0]&&t[0].parentNode||r,s==="string"||s==="number"){if(Zn.context)return t;if(s==="number"&&(e=e.toString()),o){let a=t[0];a&&a.nodeType===3?a.data=e:a=document.createTextNode(e),t=Ho(r,t,n,a)}else t!==""&&typeof t=="string"?t=r.firstChild.data=e:t=r.textContent=e}else if(e==null||s==="boolean"){if(Zn.context)return t;t=Ho(r,t,n)}else{if(s==="function")return zd(()=>{let a=e();for(;typeof a=="function";)a=a();t=x0(r,a,t,n)}),()=>t;if(Array.isArray(e)){const a=[],u=t&&Array.isArray(t);if(Gd(a,e,t,i))return zd(()=>t=x0(r,a,t,n,!0)),()=>t;if(Zn.context){if(!a.length)return t;for(let f=0;f<a.length;f++)if(a[f].parentNode)return t=a}if(a.length===0){if(t=Ho(r,t,n),o)return t}else u?t.length===0?Rg(r,a,n):CP(r,t,a):(t&&Ho(r),Rg(r,a));t=a}else if(e instanceof Node){if(Zn.context&&e.parentNode)return t=o?[e]:e;if(Array.isArray(t)){if(o)return t=Ho(r,t,n,e);Ho(r,t,null,e)}else t==null||t===""||!r.firstChild?r.appendChild(e):r.replaceChild(e,r.firstChild);t=e}}return t}function Gd(r,e,t,n){let i=!1;for(let s=0,o=e.length;s<o;s++){let a=e[s],u=t&&t[s];if(a instanceof Node)r.push(a);else if(!(a==null||a===!0||a===!1))if(Array.isArray(a))i=Gd(r,a,u)||i;else if(typeof a=="function")if(n){for(;typeof a=="function";)a=a();i=Gd(r,Array.isArray(a)?a:[a],Array.isArray(u)?u:[u])||i}else r.push(a),i=!0;else{const f=String(a);u&&u.nodeType===3&&u.data===f?r.push(u):r.push(document.createTextNode(f))}}return i}function Rg(r,e,t=null){for(let n=0,i=e.length;n<i;n++)r.insertBefore(e[n],t)}function Ho(r,e,t,n){if(t===void 0)return r.textContent="";const i=n||document.createTextNode("");if(e.length){let s=!1;for(let o=e.length-1;o>=0;o--){const a=e[o];if(i!==a){const u=a.parentNode===r;!s&&!o?u?r.replaceChild(i,a):r.insertBefore(i,t):u&&a.remove()}else s=!0}}else r.insertBefore(i,t);return[i]}const EP=""+new URL("Inter-VariableFont_slnt_wght-4a772478.ttf",import.meta.url).href,AP=""+new URL("PathwayExtreme-VariableFont_opsz_wdth_wght-cea84f96.ttf",import.meta.url).href,TP=""+new URL("Raleway-VariableFont_wght-3548e08b.ttf",import.meta.url).href;function Op(r,e,t){const[n,i]=Ds(e),s={value:e},o=r.addInput(s,"value",t);return o.on("change",u=>{i(()=>u.value)}),[n,u=>{i(()=>u),s.value=u,o.refresh()}]}function wr(r,e,t,n,i,s){return Op(r,i,{min:e,max:t,step:n,label:s})}const IP=Math.PI,oc=Math.PI/2,Bg=Math.PI/3;/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Rp="148",Yo={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},qo={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},LP=0,Fg=1,DP=2,i2=1,OP=2,Gl=3,Qi=0,Lr=1,Mc=2,Wc=3,Fs=0,La=1,Ng=2,kg=3,Ug=4,RP=5,wa=100,BP=101,FP=102,Vg=103,zg=104,NP=200,kP=201,UP=202,VP=203,s2=204,o2=205,zP=206,GP=207,$P=208,WP=209,XP=210,HP=0,YP=1,qP=2,$d=3,ZP=4,jP=5,KP=6,JP=7,Bp=0,QP=1,e4=2,Ji=0,t4=1,n4=2,r4=3,i4=4,s4=5,a2=300,Fa=301,Na=302,Wd=303,Xd=304,Y0=306,Hd=1e3,ei=1001,Yd=1002,hr=1003,Gg=1004,rh=1005,Gr=1006,o4=1007,ac=1008,Co=1009,a4=1010,l4=1011,l2=1012,c4=1013,uo=1014,fo=1015,lc=1016,u4=1017,f4=1018,Da=1020,h4=1021,d4=1022,ti=1023,p4=1024,m4=1025,bo=1026,ka=1027,g4=1028,v4=1029,x4=1030,b4=1031,y4=1033,ih=33776,sh=33777,oh=33778,ah=33779,$g=35840,Wg=35841,Xg=35842,Hg=35843,w4=36196,Yg=37492,qg=37496,Zg=37808,jg=37809,Kg=37810,Jg=37811,Qg=37812,ev=37813,tv=37814,nv=37815,rv=37816,iv=37817,sv=37818,ov=37819,av=37820,lv=37821,cv=36492,Po=3e3,hn=3001,_4=3200,S4=3201,Fp=0,C4=1,fi="srgb",cc="srgb-linear",lh=7680,P4=519,uv=35044,fv="300 es",qd=1035;class Do{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const tr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],ch=Math.PI/180,hv=180/Math.PI;function Za(){const r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(tr[r&255]+tr[r>>8&255]+tr[r>>16&255]+tr[r>>24&255]+"-"+tr[e&255]+tr[e>>8&255]+"-"+tr[e>>16&15|64]+tr[e>>24&255]+"-"+tr[t&63|128]+tr[t>>8&255]+"-"+tr[t>>16&255]+tr[t>>24&255]+tr[n&255]+tr[n>>8&255]+tr[n>>16&255]+tr[n>>24&255]).toLowerCase()}function qn(r,e,t){return Math.max(e,Math.min(t,r))}function M4(r,e){return(r%e+e)%e}function uh(r,e,t){return(1-t)*r+t*e}function dv(r){return(r&r-1)===0&&r!==0}function Zd(r){return Math.pow(2,Math.floor(Math.log(r)/Math.LN2))}function Xc(r,e){switch(e.constructor){case Float32Array:return r;case Uint16Array:return r/65535;case Uint8Array:return r/255;case Int16Array:return Math.max(r/32767,-1);case Int8Array:return Math.max(r/127,-1);default:throw new Error("Invalid component type.")}}function Pr(r,e){switch(e.constructor){case Float32Array:return r;case Uint16Array:return Math.round(r*65535);case Uint8Array:return Math.round(r*255);case Int16Array:return Math.round(r*32767);case Int8Array:return Math.round(r*127);default:throw new Error("Invalid component type.")}}class je{constructor(e=0,t=0){je.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*n-o*i+e.x,this.y=s*i+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class br{constructor(){br.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,n,i,s,o,a,u,f){const h=this.elements;return h[0]=e,h[1]=i,h[2]=a,h[3]=t,h[4]=s,h[5]=u,h[6]=n,h[7]=o,h[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,s=this.elements,o=n[0],a=n[3],u=n[6],f=n[1],h=n[4],p=n[7],g=n[2],b=n[5],C=n[8],y=i[0],w=i[3],A=i[6],O=i[1],E=i[4],T=i[7],M=i[2],B=i[5],F=i[8];return s[0]=o*y+a*O+u*M,s[3]=o*w+a*E+u*B,s[6]=o*A+a*T+u*F,s[1]=f*y+h*O+p*M,s[4]=f*w+h*E+p*B,s[7]=f*A+h*T+p*F,s[2]=g*y+b*O+C*M,s[5]=g*w+b*E+C*B,s[8]=g*A+b*T+C*F,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],f=e[7],h=e[8];return t*o*h-t*a*f-n*s*h+n*a*u+i*s*f-i*o*u}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],f=e[7],h=e[8],p=h*o-a*f,g=a*u-h*s,b=f*s-o*u,C=t*p+n*g+i*b;if(C===0)return this.set(0,0,0,0,0,0,0,0,0);const y=1/C;return e[0]=p*y,e[1]=(i*f-h*n)*y,e[2]=(a*n-i*o)*y,e[3]=g*y,e[4]=(h*t-i*u)*y,e[5]=(i*s-a*t)*y,e[6]=b*y,e[7]=(n*u-f*t)*y,e[8]=(o*t-n*s)*y,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,s,o,a){const u=Math.cos(s),f=Math.sin(s);return this.set(n*u,n*f,-n*(u*o+f*a)+o+e,-i*f,i*u,-i*(-f*o+u*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(fh.makeScale(e,t)),this}rotate(e){return this.premultiply(fh.makeRotation(-e)),this}translate(e,t){return this.premultiply(fh.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const fh=new br;function c2(r){for(let e=r.length-1;e>=0;--e)if(r[e]>=65535)return!0;return!1}function b0(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}function yo(r){return r<.04045?r*.0773993808:Math.pow(r*.9478672986+.0521327014,2.4)}function t0(r){return r<.0031308?r*12.92:1.055*Math.pow(r,.41666)-.055}const hh={[fi]:{[cc]:yo},[cc]:{[fi]:t0}},or={legacyMode:!0,get workingColorSpace(){return cc},set workingColorSpace(r){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(r,e,t){if(this.legacyMode||e===t||!e||!t)return r;if(hh[e]&&hh[e][t]!==void 0){const n=hh[e][t];return r.r=n(r.r),r.g=n(r.g),r.b=n(r.b),r}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(r,e){return this.convert(r,this.workingColorSpace,e)},toWorkingColorSpace:function(r,e){return this.convert(r,e,this.workingColorSpace)}},u2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Rn={r:0,g:0,b:0},Zr={h:0,s:0,l:0},Hc={h:0,s:0,l:0};function dh(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*6*(2/3-t):r}function Yc(r,e){return e.r=r.r,e.g=r.g,e.b=r.b,e}class tn{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&n===void 0?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=fi){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,or.toWorkingColorSpace(this,t),this}setRGB(e,t,n,i=or.workingColorSpace){return this.r=e,this.g=t,this.b=n,or.toWorkingColorSpace(this,i),this}setHSL(e,t,n,i=or.workingColorSpace){if(e=M4(e,1),t=qn(t,0,1),n=qn(n,0,1),t===0)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+t):n+t-n*t,o=2*n-s;this.r=dh(o,s,e+1/3),this.g=dh(o,s,e),this.b=dh(o,s,e-1/3)}return or.toWorkingColorSpace(this,i),this}setStyle(e,t=fi){function n(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,or.toWorkingColorSpace(this,t),n(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,or.toWorkingColorSpace(this,t),n(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const u=parseFloat(s[1])/360,f=parseFloat(s[2])/100,h=parseFloat(s[3])/100;return n(s[4]),this.setHSL(u,f,h,t)}break}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,or.toWorkingColorSpace(this,t),this;if(o===6)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,or.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=fi){const n=u2[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=yo(e.r),this.g=yo(e.g),this.b=yo(e.b),this}copyLinearToSRGB(e){return this.r=t0(e.r),this.g=t0(e.g),this.b=t0(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=fi){return or.fromWorkingColorSpace(Yc(this,Rn),e),qn(Rn.r*255,0,255)<<16^qn(Rn.g*255,0,255)<<8^qn(Rn.b*255,0,255)<<0}getHexString(e=fi){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=or.workingColorSpace){or.fromWorkingColorSpace(Yc(this,Rn),t);const n=Rn.r,i=Rn.g,s=Rn.b,o=Math.max(n,i,s),a=Math.min(n,i,s);let u,f;const h=(a+o)/2;if(a===o)u=0,f=0;else{const p=o-a;switch(f=h<=.5?p/(o+a):p/(2-o-a),o){case n:u=(i-s)/p+(i<s?6:0);break;case i:u=(s-n)/p+2;break;case s:u=(n-i)/p+4;break}u/=6}return e.h=u,e.s=f,e.l=h,e}getRGB(e,t=or.workingColorSpace){return or.fromWorkingColorSpace(Yc(this,Rn),t),e.r=Rn.r,e.g=Rn.g,e.b=Rn.b,e}getStyle(e=fi){return or.fromWorkingColorSpace(Yc(this,Rn),e),e!==fi?`color(${e} ${Rn.r} ${Rn.g} ${Rn.b})`:`rgb(${Rn.r*255|0},${Rn.g*255|0},${Rn.b*255|0})`}offsetHSL(e,t,n){return this.getHSL(Zr),Zr.h+=e,Zr.s+=t,Zr.l+=n,this.setHSL(Zr.h,Zr.s,Zr.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Zr),e.getHSL(Hc);const n=uh(Zr.h,Hc.h,t),i=uh(Zr.s,Hc.s,t),s=uh(Zr.l,Hc.l,t);return this.setHSL(n,i,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}tn.NAMES=u2;let Zo;class f2{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Zo===void 0&&(Zo=b0("canvas")),Zo.width=e.width,Zo.height=e.height;const n=Zo.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Zo}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=b0("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=yo(s[o]/255)*255;return n.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(yo(t[n]/255)*255):t[n]=yo(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class h2{constructor(e=null){this.isSource=!0,this.uuid=Za(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(ph(i[o].image)):s.push(ph(i[o]))}else s=ph(i);n.url=s}return t||(e.images[this.uuid]=n),n}}function ph(r){return typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap?f2.getDataURL(r):r.data?{data:Array.from(r.data),width:r.width,height:r.height,type:r.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let E4=0;class Dr extends Do{constructor(e=Dr.DEFAULT_IMAGE,t=Dr.DEFAULT_MAPPING,n=ei,i=ei,s=Gr,o=ac,a=ti,u=Co,f=Dr.DEFAULT_ANISOTROPY,h=Po){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:E4++}),this.uuid=Za(),this.name="",this.source=new h2(e),this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=f,this.format=a,this.internalFormat=null,this.type=u,this.offset=new je(0,0),this.repeat=new je(1,1),this.center=new je(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new br,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=h,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==a2)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Hd:e.x=e.x-Math.floor(e.x);break;case ei:e.x=e.x<0?0:1;break;case Yd:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Hd:e.y=e.y-Math.floor(e.y);break;case ei:e.y=e.y<0?0:1;break;case Yd:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}Dr.DEFAULT_IMAGE=null;Dr.DEFAULT_MAPPING=a2;Dr.DEFAULT_ANISOTROPY=1;class Zt{constructor(e=0,t=0,n=0,i=1){Zt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*n+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*n+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*n+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,s;const u=e.elements,f=u[0],h=u[4],p=u[8],g=u[1],b=u[5],C=u[9],y=u[2],w=u[6],A=u[10];if(Math.abs(h-g)<.01&&Math.abs(p-y)<.01&&Math.abs(C-w)<.01){if(Math.abs(h+g)<.1&&Math.abs(p+y)<.1&&Math.abs(C+w)<.1&&Math.abs(f+b+A-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const E=(f+1)/2,T=(b+1)/2,M=(A+1)/2,B=(h+g)/4,F=(p+y)/4,I=(C+w)/4;return E>T&&E>M?E<.01?(n=0,i=.707106781,s=.707106781):(n=Math.sqrt(E),i=B/n,s=F/n):T>M?T<.01?(n=.707106781,i=0,s=.707106781):(i=Math.sqrt(T),n=B/i,s=I/i):M<.01?(n=.707106781,i=.707106781,s=0):(s=Math.sqrt(M),n=F/s,i=I/s),this.set(n,i,s,t),this}let O=Math.sqrt((w-C)*(w-C)+(p-y)*(p-y)+(g-h)*(g-h));return Math.abs(O)<.001&&(O=1),this.x=(w-C)/O,this.y=(p-y)/O,this.z=(g-h)/O,this.w=Math.acos((f+b+A-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Mo extends Do{constructor(e=1,t=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Zt(0,0,e,t),this.scissorTest=!1,this.viewport=new Zt(0,0,e,t);const i={width:e,height:t,depth:1};this.texture=new Dr(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.internalFormat=n.internalFormat!==void 0?n.internalFormat:null,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Gr,this.depthBuffer=n.depthBuffer!==void 0?n.depthBuffer:!0,this.stencilBuffer=n.stencilBuffer!==void 0?n.stencilBuffer:!1,this.depthTexture=n.depthTexture!==void 0?n.depthTexture:null,this.samples=n.samples!==void 0?n.samples:0}setSize(e,t,n=1){(this.width!==e||this.height!==t||this.depth!==n)&&(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new h2(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class d2 extends Dr{constructor(e=null,t=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=hr,this.minFilter=hr,this.wrapR=ei,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class A4 extends Dr{constructor(e=null,t=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=hr,this.minFilter=hr,this.wrapR=ei,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Eo{constructor(e=0,t=0,n=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,s,o,a){let u=n[i+0],f=n[i+1],h=n[i+2],p=n[i+3];const g=s[o+0],b=s[o+1],C=s[o+2],y=s[o+3];if(a===0){e[t+0]=u,e[t+1]=f,e[t+2]=h,e[t+3]=p;return}if(a===1){e[t+0]=g,e[t+1]=b,e[t+2]=C,e[t+3]=y;return}if(p!==y||u!==g||f!==b||h!==C){let w=1-a;const A=u*g+f*b+h*C+p*y,O=A>=0?1:-1,E=1-A*A;if(E>Number.EPSILON){const M=Math.sqrt(E),B=Math.atan2(M,A*O);w=Math.sin(w*B)/M,a=Math.sin(a*B)/M}const T=a*O;if(u=u*w+g*T,f=f*w+b*T,h=h*w+C*T,p=p*w+y*T,w===1-a){const M=1/Math.sqrt(u*u+f*f+h*h+p*p);u*=M,f*=M,h*=M,p*=M}}e[t]=u,e[t+1]=f,e[t+2]=h,e[t+3]=p}static multiplyQuaternionsFlat(e,t,n,i,s,o){const a=n[i],u=n[i+1],f=n[i+2],h=n[i+3],p=s[o],g=s[o+1],b=s[o+2],C=s[o+3];return e[t]=a*C+h*p+u*b-f*g,e[t+1]=u*C+h*g+f*p-a*b,e[t+2]=f*C+h*b+a*g-u*p,e[t+3]=h*C-a*p-u*g-f*b,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const n=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,u=Math.sin,f=a(n/2),h=a(i/2),p=a(s/2),g=u(n/2),b=u(i/2),C=u(s/2);switch(o){case"XYZ":this._x=g*h*p+f*b*C,this._y=f*b*p-g*h*C,this._z=f*h*C+g*b*p,this._w=f*h*p-g*b*C;break;case"YXZ":this._x=g*h*p+f*b*C,this._y=f*b*p-g*h*C,this._z=f*h*C-g*b*p,this._w=f*h*p+g*b*C;break;case"ZXY":this._x=g*h*p-f*b*C,this._y=f*b*p+g*h*C,this._z=f*h*C+g*b*p,this._w=f*h*p-g*b*C;break;case"ZYX":this._x=g*h*p-f*b*C,this._y=f*b*p+g*h*C,this._z=f*h*C-g*b*p,this._w=f*h*p+g*b*C;break;case"YZX":this._x=g*h*p+f*b*C,this._y=f*b*p+g*h*C,this._z=f*h*C-g*b*p,this._w=f*h*p-g*b*C;break;case"XZY":this._x=g*h*p-f*b*C,this._y=f*b*p-g*h*C,this._z=f*h*C+g*b*p,this._w=f*h*p+g*b*C;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],s=t[8],o=t[1],a=t[5],u=t[9],f=t[2],h=t[6],p=t[10],g=n+a+p;if(g>0){const b=.5/Math.sqrt(g+1);this._w=.25/b,this._x=(h-u)*b,this._y=(s-f)*b,this._z=(o-i)*b}else if(n>a&&n>p){const b=2*Math.sqrt(1+n-a-p);this._w=(h-u)/b,this._x=.25*b,this._y=(i+o)/b,this._z=(s+f)/b}else if(a>p){const b=2*Math.sqrt(1+a-n-p);this._w=(s-f)/b,this._x=(i+o)/b,this._y=.25*b,this._z=(u+h)/b}else{const b=2*Math.sqrt(1+p-n-a);this._w=(o-i)/b,this._x=(s+f)/b,this._y=(u+h)/b,this._z=.25*b}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(qn(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,s=e._z,o=e._w,a=t._x,u=t._y,f=t._z,h=t._w;return this._x=n*h+o*a+i*f-s*u,this._y=i*h+o*u+s*a-n*f,this._z=s*h+o*f+n*u-i*a,this._w=o*h-n*a-i*u-s*f,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+n*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=i,this._z=s,this;const u=1-a*a;if(u<=Number.EPSILON){const b=1-t;return this._w=b*o+t*this._w,this._x=b*n+t*this._x,this._y=b*i+t*this._y,this._z=b*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const f=Math.sqrt(u),h=Math.atan2(f,a),p=Math.sin((1-t)*h)/f,g=Math.sin(t*h)/f;return this._w=o*p+this._w*g,this._x=n*p+this._x*g,this._y=i*p+this._y*g,this._z=s*p+this._z*g,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(i),n*Math.sin(s),n*Math.cos(s),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class K{constructor(e=0,t=0,n=0){K.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(pv.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(pv.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*i,this.y=s[1]*t+s[4]*n+s[7]*i,this.z=s[2]*t+s[5]*n+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*n+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*n+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*n+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,s=e.x,o=e.y,a=e.z,u=e.w,f=u*t+o*i-a*n,h=u*n+a*t-s*i,p=u*i+s*n-o*t,g=-s*t-o*n-a*i;return this.x=f*u+g*-s+h*-a-p*-o,this.y=h*u+g*-o+p*-s-f*-a,this.z=p*u+g*-a+f*-o-h*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*i,this.y=s[1]*t+s[5]*n+s[9]*i,this.z=s[2]*t+s[6]*n+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,s=e.z,o=t.x,a=t.y,u=t.z;return this.x=i*u-s*a,this.y=s*o-n*u,this.z=n*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return mh.copy(this).projectOnVector(e),this.sub(mh)}reflect(e){return this.sub(mh.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(qn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const mh=new K,pv=new Eo;class Wr{constructor(e=new K(1/0,1/0,1/0),t=new K(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,i=1/0,s=-1/0,o=-1/0,a=-1/0;for(let u=0,f=e.length;u<f;u+=3){const h=e[u],p=e[u+1],g=e[u+2];h<t&&(t=h),p<n&&(n=p),g<i&&(i=g),h>s&&(s=h),p>o&&(o=p),g>a&&(a=g)}return this.min.set(t,n,i),this.max.set(s,o,a),this}setFromBufferAttribute(e){let t=1/0,n=1/0,i=1/0,s=-1/0,o=-1/0,a=-1/0;for(let u=0,f=e.count;u<f;u++){const h=e.getX(u),p=e.getY(u),g=e.getZ(u);h<t&&(t=h),p<n&&(n=p),g<i&&(i=g),h>s&&(s=h),p>o&&(o=p),g>a&&(a=g)}return this.min.set(t,n,i),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Js.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0)if(t&&n.attributes!=null&&n.attributes.position!==void 0){const s=n.attributes.position;for(let o=0,a=s.count;o<a;o++)Js.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(Js)}else n.boundingBox===null&&n.computeBoundingBox(),gh.copy(n.boundingBox),gh.applyMatrix4(e.matrixWorld),this.union(gh);const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Js),Js.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(gl),qc.subVectors(this.max,gl),jo.subVectors(e.a,gl),Ko.subVectors(e.b,gl),Jo.subVectors(e.c,gl),ds.subVectors(Ko,jo),ps.subVectors(Jo,Ko),Qs.subVectors(jo,Jo);let t=[0,-ds.z,ds.y,0,-ps.z,ps.y,0,-Qs.z,Qs.y,ds.z,0,-ds.x,ps.z,0,-ps.x,Qs.z,0,-Qs.x,-ds.y,ds.x,0,-ps.y,ps.x,0,-Qs.y,Qs.x,0];return!vh(t,jo,Ko,Jo,qc)||(t=[1,0,0,0,1,0,0,0,1],!vh(t,jo,Ko,Jo,qc))?!1:(Zc.crossVectors(ds,ps),t=[Zc.x,Zc.y,Zc.z],vh(t,jo,Ko,Jo,qc))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Js.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(Js).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Bi[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Bi[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Bi[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Bi[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Bi[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Bi[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Bi[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Bi[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Bi),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Bi=[new K,new K,new K,new K,new K,new K,new K,new K],Js=new K,gh=new Wr,jo=new K,Ko=new K,Jo=new K,ds=new K,ps=new K,Qs=new K,gl=new K,qc=new K,Zc=new K,eo=new K;function vh(r,e,t,n,i){for(let s=0,o=r.length-3;s<=o;s+=3){eo.fromArray(r,s);const a=i.x*Math.abs(eo.x)+i.y*Math.abs(eo.y)+i.z*Math.abs(eo.z),u=e.dot(eo),f=t.dot(eo),h=n.dot(eo);if(Math.max(-Math.max(u,f,h),Math.min(u,f,h))>a)return!1}return!0}const T4=new Wr,vl=new K,xh=new K;class Ec{constructor(e=new K,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):T4.setFromPoints(e).getCenter(n);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;vl.subVectors(e,this.center);const t=vl.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),i=(n-this.radius)*.5;this.center.addScaledVector(vl,i/n),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(xh.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(vl.copy(e.center).add(xh)),this.expandByPoint(vl.copy(e.center).sub(xh))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Fi=new K,bh=new K,jc=new K,ms=new K,yh=new K,Kc=new K,wh=new K;class q0{constructor(e=new K,t=new K(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Fi)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Fi.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Fi.copy(this.direction).multiplyScalar(t).add(this.origin),Fi.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){bh.copy(e).add(t).multiplyScalar(.5),jc.copy(t).sub(e).normalize(),ms.copy(this.origin).sub(bh);const s=e.distanceTo(t)*.5,o=-this.direction.dot(jc),a=ms.dot(this.direction),u=-ms.dot(jc),f=ms.lengthSq(),h=Math.abs(1-o*o);let p,g,b,C;if(h>0)if(p=o*u-a,g=o*a-u,C=s*h,p>=0)if(g>=-C)if(g<=C){const y=1/h;p*=y,g*=y,b=p*(p+o*g+2*a)+g*(o*p+g+2*u)+f}else g=s,p=Math.max(0,-(o*g+a)),b=-p*p+g*(g+2*u)+f;else g=-s,p=Math.max(0,-(o*g+a)),b=-p*p+g*(g+2*u)+f;else g<=-C?(p=Math.max(0,-(-o*s+a)),g=p>0?-s:Math.min(Math.max(-s,-u),s),b=-p*p+g*(g+2*u)+f):g<=C?(p=0,g=Math.min(Math.max(-s,-u),s),b=g*(g+2*u)+f):(p=Math.max(0,-(o*s+a)),g=p>0?s:Math.min(Math.max(-s,-u),s),b=-p*p+g*(g+2*u)+f);else g=o>0?-s:s,p=Math.max(0,-(o*g+a)),b=-p*p+g*(g+2*u)+f;return n&&n.copy(this.direction).multiplyScalar(p).add(this.origin),i&&i.copy(jc).multiplyScalar(g).add(bh),b}intersectSphere(e,t){Fi.subVectors(e.center,this.origin);const n=Fi.dot(this.direction),i=Fi.dot(Fi)-n*n,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=n-o,u=n+o;return a<0&&u<0?null:a<0?this.at(u,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,s,o,a,u;const f=1/this.direction.x,h=1/this.direction.y,p=1/this.direction.z,g=this.origin;return f>=0?(n=(e.min.x-g.x)*f,i=(e.max.x-g.x)*f):(n=(e.max.x-g.x)*f,i=(e.min.x-g.x)*f),h>=0?(s=(e.min.y-g.y)*h,o=(e.max.y-g.y)*h):(s=(e.max.y-g.y)*h,o=(e.min.y-g.y)*h),n>o||s>i||((s>n||isNaN(n))&&(n=s),(o<i||isNaN(i))&&(i=o),p>=0?(a=(e.min.z-g.z)*p,u=(e.max.z-g.z)*p):(a=(e.max.z-g.z)*p,u=(e.min.z-g.z)*p),n>u||a>i)||((a>n||n!==n)&&(n=a),(u<i||i!==i)&&(i=u),i<0)?null:this.at(n>=0?n:i,t)}intersectsBox(e){return this.intersectBox(e,Fi)!==null}intersectTriangle(e,t,n,i,s){yh.subVectors(t,e),Kc.subVectors(n,e),wh.crossVectors(yh,Kc);let o=this.direction.dot(wh),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;ms.subVectors(this.origin,e);const u=a*this.direction.dot(Kc.crossVectors(ms,Kc));if(u<0)return null;const f=a*this.direction.dot(yh.cross(ms));if(f<0||u+f>o)return null;const h=-a*ms.dot(wh);return h<0?null:this.at(h/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Gt{constructor(){Gt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,n,i,s,o,a,u,f,h,p,g,b,C,y,w){const A=this.elements;return A[0]=e,A[4]=t,A[8]=n,A[12]=i,A[1]=s,A[5]=o,A[9]=a,A[13]=u,A[2]=f,A[6]=h,A[10]=p,A[14]=g,A[3]=b,A[7]=C,A[11]=y,A[15]=w,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Gt().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/Qo.setFromMatrixColumn(e,0).length(),s=1/Qo.setFromMatrixColumn(e,1).length(),o=1/Qo.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,i=e.y,s=e.z,o=Math.cos(n),a=Math.sin(n),u=Math.cos(i),f=Math.sin(i),h=Math.cos(s),p=Math.sin(s);if(e.order==="XYZ"){const g=o*h,b=o*p,C=a*h,y=a*p;t[0]=u*h,t[4]=-u*p,t[8]=f,t[1]=b+C*f,t[5]=g-y*f,t[9]=-a*u,t[2]=y-g*f,t[6]=C+b*f,t[10]=o*u}else if(e.order==="YXZ"){const g=u*h,b=u*p,C=f*h,y=f*p;t[0]=g+y*a,t[4]=C*a-b,t[8]=o*f,t[1]=o*p,t[5]=o*h,t[9]=-a,t[2]=b*a-C,t[6]=y+g*a,t[10]=o*u}else if(e.order==="ZXY"){const g=u*h,b=u*p,C=f*h,y=f*p;t[0]=g-y*a,t[4]=-o*p,t[8]=C+b*a,t[1]=b+C*a,t[5]=o*h,t[9]=y-g*a,t[2]=-o*f,t[6]=a,t[10]=o*u}else if(e.order==="ZYX"){const g=o*h,b=o*p,C=a*h,y=a*p;t[0]=u*h,t[4]=C*f-b,t[8]=g*f+y,t[1]=u*p,t[5]=y*f+g,t[9]=b*f-C,t[2]=-f,t[6]=a*u,t[10]=o*u}else if(e.order==="YZX"){const g=o*u,b=o*f,C=a*u,y=a*f;t[0]=u*h,t[4]=y-g*p,t[8]=C*p+b,t[1]=p,t[5]=o*h,t[9]=-a*h,t[2]=-f*h,t[6]=b*p+C,t[10]=g-y*p}else if(e.order==="XZY"){const g=o*u,b=o*f,C=a*u,y=a*f;t[0]=u*h,t[4]=-p,t[8]=f*h,t[1]=g*p+y,t[5]=o*h,t[9]=b*p-C,t[2]=C*p-b,t[6]=a*h,t[10]=y*p+g}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(I4,e,L4)}lookAt(e,t,n){const i=this.elements;return Mr.subVectors(e,t),Mr.lengthSq()===0&&(Mr.z=1),Mr.normalize(),gs.crossVectors(n,Mr),gs.lengthSq()===0&&(Math.abs(n.z)===1?Mr.x+=1e-4:Mr.z+=1e-4,Mr.normalize(),gs.crossVectors(n,Mr)),gs.normalize(),Jc.crossVectors(Mr,gs),i[0]=gs.x,i[4]=Jc.x,i[8]=Mr.x,i[1]=gs.y,i[5]=Jc.y,i[9]=Mr.y,i[2]=gs.z,i[6]=Jc.z,i[10]=Mr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,s=this.elements,o=n[0],a=n[4],u=n[8],f=n[12],h=n[1],p=n[5],g=n[9],b=n[13],C=n[2],y=n[6],w=n[10],A=n[14],O=n[3],E=n[7],T=n[11],M=n[15],B=i[0],F=i[4],I=i[8],N=i[12],G=i[1],X=i[5],J=i[9],Z=i[13],H=i[2],ne=i[6],ie=i[10],be=i[14],oe=i[3],Te=i[7],Ie=i[11],ve=i[15];return s[0]=o*B+a*G+u*H+f*oe,s[4]=o*F+a*X+u*ne+f*Te,s[8]=o*I+a*J+u*ie+f*Ie,s[12]=o*N+a*Z+u*be+f*ve,s[1]=h*B+p*G+g*H+b*oe,s[5]=h*F+p*X+g*ne+b*Te,s[9]=h*I+p*J+g*ie+b*Ie,s[13]=h*N+p*Z+g*be+b*ve,s[2]=C*B+y*G+w*H+A*oe,s[6]=C*F+y*X+w*ne+A*Te,s[10]=C*I+y*J+w*ie+A*Ie,s[14]=C*N+y*Z+w*be+A*ve,s[3]=O*B+E*G+T*H+M*oe,s[7]=O*F+E*X+T*ne+M*Te,s[11]=O*I+E*J+T*ie+M*Ie,s[15]=O*N+E*Z+T*be+M*ve,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],s=e[12],o=e[1],a=e[5],u=e[9],f=e[13],h=e[2],p=e[6],g=e[10],b=e[14],C=e[3],y=e[7],w=e[11],A=e[15];return C*(+s*u*p-i*f*p-s*a*g+n*f*g+i*a*b-n*u*b)+y*(+t*u*b-t*f*g+s*o*g-i*o*b+i*f*h-s*u*h)+w*(+t*f*p-t*a*b-s*o*p+n*o*b+s*a*h-n*f*h)+A*(-i*a*h-t*u*p+t*a*g+i*o*p-n*o*g+n*u*h)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],f=e[7],h=e[8],p=e[9],g=e[10],b=e[11],C=e[12],y=e[13],w=e[14],A=e[15],O=p*w*f-y*g*f+y*u*b-a*w*b-p*u*A+a*g*A,E=C*g*f-h*w*f-C*u*b+o*w*b+h*u*A-o*g*A,T=h*y*f-C*p*f+C*a*b-o*y*b-h*a*A+o*p*A,M=C*p*u-h*y*u-C*a*g+o*y*g+h*a*w-o*p*w,B=t*O+n*E+i*T+s*M;if(B===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const F=1/B;return e[0]=O*F,e[1]=(y*g*s-p*w*s-y*i*b+n*w*b+p*i*A-n*g*A)*F,e[2]=(a*w*s-y*u*s+y*i*f-n*w*f-a*i*A+n*u*A)*F,e[3]=(p*u*s-a*g*s-p*i*f+n*g*f+a*i*b-n*u*b)*F,e[4]=E*F,e[5]=(h*w*s-C*g*s+C*i*b-t*w*b-h*i*A+t*g*A)*F,e[6]=(C*u*s-o*w*s-C*i*f+t*w*f+o*i*A-t*u*A)*F,e[7]=(o*g*s-h*u*s+h*i*f-t*g*f-o*i*b+t*u*b)*F,e[8]=T*F,e[9]=(C*p*s-h*y*s-C*n*b+t*y*b+h*n*A-t*p*A)*F,e[10]=(o*y*s-C*a*s+C*n*f-t*y*f-o*n*A+t*a*A)*F,e[11]=(h*a*s-o*p*s-h*n*f+t*p*f+o*n*b-t*a*b)*F,e[12]=M*F,e[13]=(h*y*i-C*p*i+C*n*g-t*y*g-h*n*w+t*p*w)*F,e[14]=(C*a*i-o*y*i-C*n*u+t*y*u+o*n*w-t*a*w)*F,e[15]=(o*p*i-h*a*i+h*n*u-t*p*u-o*n*g+t*a*g)*F,this}scale(e){const t=this.elements,n=e.x,i=e.y,s=e.z;return t[0]*=n,t[4]*=i,t[8]*=s,t[1]*=n,t[5]*=i,t[9]*=s,t[2]*=n,t[6]*=i,t[10]*=s,t[3]*=n,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),s=1-n,o=e.x,a=e.y,u=e.z,f=s*o,h=s*a;return this.set(f*o+n,f*a-i*u,f*u+i*a,0,f*a+i*u,h*a+n,h*u-i*o,0,f*u-i*a,h*u+i*o,s*u*u+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,s,o){return this.set(1,n,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,s=t._x,o=t._y,a=t._z,u=t._w,f=s+s,h=o+o,p=a+a,g=s*f,b=s*h,C=s*p,y=o*h,w=o*p,A=a*p,O=u*f,E=u*h,T=u*p,M=n.x,B=n.y,F=n.z;return i[0]=(1-(y+A))*M,i[1]=(b+T)*M,i[2]=(C-E)*M,i[3]=0,i[4]=(b-T)*B,i[5]=(1-(g+A))*B,i[6]=(w+O)*B,i[7]=0,i[8]=(C+E)*F,i[9]=(w-O)*F,i[10]=(1-(g+y))*F,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let s=Qo.set(i[0],i[1],i[2]).length();const o=Qo.set(i[4],i[5],i[6]).length(),a=Qo.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],jr.copy(this);const f=1/s,h=1/o,p=1/a;return jr.elements[0]*=f,jr.elements[1]*=f,jr.elements[2]*=f,jr.elements[4]*=h,jr.elements[5]*=h,jr.elements[6]*=h,jr.elements[8]*=p,jr.elements[9]*=p,jr.elements[10]*=p,t.setFromRotationMatrix(jr),n.x=s,n.y=o,n.z=a,this}makePerspective(e,t,n,i,s,o){const a=this.elements,u=2*s/(t-e),f=2*s/(n-i),h=(t+e)/(t-e),p=(n+i)/(n-i),g=-(o+s)/(o-s),b=-2*o*s/(o-s);return a[0]=u,a[4]=0,a[8]=h,a[12]=0,a[1]=0,a[5]=f,a[9]=p,a[13]=0,a[2]=0,a[6]=0,a[10]=g,a[14]=b,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,n,i,s,o){const a=this.elements,u=1/(t-e),f=1/(n-i),h=1/(o-s),p=(t+e)*u,g=(n+i)*f,b=(o+s)*h;return a[0]=2*u,a[4]=0,a[8]=0,a[12]=-p,a[1]=0,a[5]=2*f,a[9]=0,a[13]=-g,a[2]=0,a[6]=0,a[10]=-2*h,a[14]=-b,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Qo=new K,jr=new Gt,I4=new K(0,0,0),L4=new K(1,1,1),gs=new K,Jc=new K,Mr=new K,mv=new Gt,gv=new Eo;class Ac{constructor(e=0,t=0,n=0,i=Ac.DefaultOrder){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,i=this._order){return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],u=i[1],f=i[5],h=i[9],p=i[2],g=i[6],b=i[10];switch(t){case"XYZ":this._y=Math.asin(qn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,b),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(g,f),this._z=0);break;case"YXZ":this._x=Math.asin(-qn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(a,b),this._z=Math.atan2(u,f)):(this._y=Math.atan2(-p,s),this._z=0);break;case"ZXY":this._x=Math.asin(qn(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(-p,b),this._z=Math.atan2(-o,f)):(this._y=0,this._z=Math.atan2(u,s));break;case"ZYX":this._y=Math.asin(-qn(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(g,b),this._z=Math.atan2(u,s)):(this._x=0,this._z=Math.atan2(-o,f));break;case"YZX":this._z=Math.asin(qn(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-h,f),this._y=Math.atan2(-p,s)):(this._x=0,this._y=Math.atan2(a,b));break;case"XZY":this._z=Math.asin(-qn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(g,f),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-h,b),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return mv.makeRotationFromQuaternion(e),this.setFromRotationMatrix(mv,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return gv.setFromEuler(this),this.setFromQuaternion(gv,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}Ac.DefaultOrder="XYZ";Ac.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Np{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let D4=0;const vv=new K,ea=new Eo,Ni=new Gt,Qc=new K,xl=new K,O4=new K,R4=new Eo,xv=new K(1,0,0),bv=new K(0,1,0),yv=new K(0,0,1),B4={type:"added"},wv={type:"removed"};class rr extends Do{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:D4++}),this.uuid=Za(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=rr.DefaultUp.clone();const e=new K,t=new Ac,n=new Eo,i=new K(1,1,1);function s(){n.setFromEuler(t,!1)}function o(){t.setFromQuaternion(n,void 0,!1)}t._onChange(s),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Gt},normalMatrix:{value:new br}}),this.matrix=new Gt,this.matrixWorld=new Gt,this.matrixAutoUpdate=rr.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=rr.DefaultMatrixWorldAutoUpdate,this.layers=new Np,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return ea.setFromAxisAngle(e,t),this.quaternion.multiply(ea),this}rotateOnWorldAxis(e,t){return ea.setFromAxisAngle(e,t),this.quaternion.premultiply(ea),this}rotateX(e){return this.rotateOnAxis(xv,e)}rotateY(e){return this.rotateOnAxis(bv,e)}rotateZ(e){return this.rotateOnAxis(yv,e)}translateOnAxis(e,t){return vv.copy(e).applyQuaternion(this.quaternion),this.position.add(vv.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(xv,e)}translateY(e){return this.translateOnAxis(bv,e)}translateZ(e){return this.translateOnAxis(yv,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Ni.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?Qc.copy(e):Qc.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),xl.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ni.lookAt(xl,Qc,this.up):Ni.lookAt(Qc,xl,this.up),this.quaternion.setFromRotationMatrix(Ni),i&&(Ni.extractRotation(i.matrixWorld),ea.setFromRotationMatrix(Ni),this.quaternion.premultiply(ea.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(B4)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(wv)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(wv)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Ni.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Ni.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ni),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const o=this.children[n].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t){let n=[];this[e]===t&&n.push(this);for(let i=0,s=this.children.length;i<s;i++){const o=this.children[i].getObjectsByProperty(e,t);o.length>0&&(n=n.concat(o))}return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(xl,e,O4),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(xl,R4,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++){const s=t[n];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.matrixWorldAutoUpdate===!0&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++){const a=i[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function s(a,u){return a[u.uuid]===void 0&&(a[u.uuid]=u.toJSON(e)),u.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const u=a.shapes;if(Array.isArray(u))for(let f=0,h=u.length;f<h;f++){const p=u[f];s(e.shapes,p)}else s(e.shapes,u)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let u=0,f=this.material.length;u<f;u++)a.push(s(e.materials,this.material[u]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const u=this.animations[a];i.animations.push(s(e.animations,u))}}if(t){const a=o(e.geometries),u=o(e.materials),f=o(e.textures),h=o(e.images),p=o(e.shapes),g=o(e.skeletons),b=o(e.animations),C=o(e.nodes);a.length>0&&(n.geometries=a),u.length>0&&(n.materials=u),f.length>0&&(n.textures=f),h.length>0&&(n.images=h),p.length>0&&(n.shapes=p),g.length>0&&(n.skeletons=g),b.length>0&&(n.animations=b),C.length>0&&(n.nodes=C)}return n.object=i,n;function o(a){const u=[];for(const f in a){const h=a[f];delete h.metadata,u.push(h)}return u}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const i=e.children[n];this.add(i.clone())}return this}}rr.DefaultUp=new K(0,1,0);rr.DefaultMatrixAutoUpdate=!0;rr.DefaultMatrixWorldAutoUpdate=!0;const Kr=new K,ki=new K,_h=new K,Ui=new K,ta=new K,na=new K,_v=new K,Sh=new K,Ch=new K,Ph=new K;class Dn{constructor(e=new K,t=new K,n=new K){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),Kr.subVectors(e,t),i.cross(Kr);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,n,i,s){Kr.subVectors(i,t),ki.subVectors(n,t),_h.subVectors(e,t);const o=Kr.dot(Kr),a=Kr.dot(ki),u=Kr.dot(_h),f=ki.dot(ki),h=ki.dot(_h),p=o*f-a*a;if(p===0)return s.set(-2,-1,-1);const g=1/p,b=(f*u-a*h)*g,C=(o*h-a*u)*g;return s.set(1-b-C,C,b)}static containsPoint(e,t,n,i){return this.getBarycoord(e,t,n,i,Ui),Ui.x>=0&&Ui.y>=0&&Ui.x+Ui.y<=1}static getUV(e,t,n,i,s,o,a,u){return this.getBarycoord(e,t,n,i,Ui),u.set(0,0),u.addScaledVector(s,Ui.x),u.addScaledVector(o,Ui.y),u.addScaledVector(a,Ui.z),u}static isFrontFacing(e,t,n,i){return Kr.subVectors(n,t),ki.subVectors(e,t),Kr.cross(ki).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Kr.subVectors(this.c,this.b),ki.subVectors(this.a,this.b),Kr.cross(ki).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Dn.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Dn.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,i,s){return Dn.getUV(e,this.a,this.b,this.c,t,n,i,s)}containsPoint(e){return Dn.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Dn.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,i=this.b,s=this.c;let o,a;ta.subVectors(i,n),na.subVectors(s,n),Sh.subVectors(e,n);const u=ta.dot(Sh),f=na.dot(Sh);if(u<=0&&f<=0)return t.copy(n);Ch.subVectors(e,i);const h=ta.dot(Ch),p=na.dot(Ch);if(h>=0&&p<=h)return t.copy(i);const g=u*p-h*f;if(g<=0&&u>=0&&h<=0)return o=u/(u-h),t.copy(n).addScaledVector(ta,o);Ph.subVectors(e,s);const b=ta.dot(Ph),C=na.dot(Ph);if(C>=0&&b<=C)return t.copy(s);const y=b*f-u*C;if(y<=0&&f>=0&&C<=0)return a=f/(f-C),t.copy(n).addScaledVector(na,a);const w=h*C-b*p;if(w<=0&&p-h>=0&&b-C>=0)return _v.subVectors(s,i),a=(p-h)/(p-h+(b-C)),t.copy(i).addScaledVector(_v,a);const A=1/(w+y+g);return o=y*A,a=g*A,t.copy(n).addScaledVector(ta,o).addScaledVector(na,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let F4=0;class Oo extends Do{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:F4++}),this.uuid=Za(),this.name="",this.type="Material",this.blending=La,this.side=Qi,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=s2,this.blendDst=o2,this.blendEquation=wa,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=$d,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=P4,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=lh,this.stencilZFail=lh,this.stencilZPass=lh,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const i=this[t];if(i===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==La&&(n.blending=this.blending),this.side!==Qi&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(n.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=this.flatShading),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function i(s){const o=[];for(const a in s){const u=s[a];delete u.metadata,o.push(u)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(n.textures=s),o.length>0&&(n.images=o)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const i=t.length;n=new Array(i);for(let s=0;s!==i;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class p2 extends Oo{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new tn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Bp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Tn=new K,eu=new je;class jn{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=uv,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)eu.fromBufferAttribute(this,t),eu.applyMatrix3(e),this.setXY(t,eu.x,eu.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)Tn.fromBufferAttribute(this,t),Tn.applyMatrix3(e),this.setXYZ(t,Tn.x,Tn.y,Tn.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Tn.fromBufferAttribute(this,t),Tn.applyMatrix4(e),this.setXYZ(t,Tn.x,Tn.y,Tn.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Tn.fromBufferAttribute(this,t),Tn.applyNormalMatrix(e),this.setXYZ(t,Tn.x,Tn.y,Tn.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Tn.fromBufferAttribute(this,t),Tn.transformDirection(e),this.setXYZ(t,Tn.x,Tn.y,Tn.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Xc(t,this.array)),t}setX(e,t){return this.normalized&&(t=Pr(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Xc(t,this.array)),t}setY(e,t){return this.normalized&&(t=Pr(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Xc(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Pr(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Xc(t,this.array)),t}setW(e,t){return this.normalized&&(t=Pr(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Pr(t,this.array),n=Pr(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=Pr(t,this.array),n=Pr(n,this.array),i=Pr(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,s){return e*=this.itemSize,this.normalized&&(t=Pr(t,this.array),n=Pr(n,this.array),i=Pr(i,this.array),s=Pr(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==uv&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class m2 extends jn{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class g2 extends jn{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class Or extends jn{constructor(e,t,n){super(new Float32Array(e),t,n)}}let N4=0;const kr=new Gt,Mh=new rr,ra=new K,Er=new Wr,bl=new Wr,zn=new K;class Rr extends Do{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:N4++}),this.uuid=Za(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(c2(e)?g2:m2)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new br().getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return kr.makeRotationFromQuaternion(e),this.applyMatrix4(kr),this}rotateX(e){return kr.makeRotationX(e),this.applyMatrix4(kr),this}rotateY(e){return kr.makeRotationY(e),this.applyMatrix4(kr),this}rotateZ(e){return kr.makeRotationZ(e),this.applyMatrix4(kr),this}translate(e,t,n){return kr.makeTranslation(e,t,n),this.applyMatrix4(kr),this}scale(e,t,n){return kr.makeScale(e,t,n),this.applyMatrix4(kr),this}lookAt(e){return Mh.lookAt(e),Mh.updateMatrix(),this.applyMatrix4(Mh.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ra).negate(),this.translate(ra.x,ra.y,ra.z),this}setFromPoints(e){const t=[];for(let n=0,i=e.length;n<i;n++){const s=e[n];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Or(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Wr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new K(-1/0,-1/0,-1/0),new K(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,i=t.length;n<i;n++){const s=t[n];Er.setFromBufferAttribute(s),this.morphTargetsRelative?(zn.addVectors(this.boundingBox.min,Er.min),this.boundingBox.expandByPoint(zn),zn.addVectors(this.boundingBox.max,Er.max),this.boundingBox.expandByPoint(zn)):(this.boundingBox.expandByPoint(Er.min),this.boundingBox.expandByPoint(Er.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ec);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new K,1/0);return}if(e){const n=this.boundingSphere.center;if(Er.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];bl.setFromBufferAttribute(a),this.morphTargetsRelative?(zn.addVectors(Er.min,bl.min),Er.expandByPoint(zn),zn.addVectors(Er.max,bl.max),Er.expandByPoint(zn)):(Er.expandByPoint(bl.min),Er.expandByPoint(bl.max))}Er.getCenter(n);let i=0;for(let s=0,o=e.count;s<o;s++)zn.fromBufferAttribute(e,s),i=Math.max(i,n.distanceToSquared(zn));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],u=this.morphTargetsRelative;for(let f=0,h=a.count;f<h;f++)zn.fromBufferAttribute(a,f),u&&(ra.fromBufferAttribute(e,f),zn.add(ra)),i=Math.max(i,n.distanceToSquared(zn))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=e.array,i=t.position.array,s=t.normal.array,o=t.uv.array,a=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new jn(new Float32Array(4*a),4));const u=this.getAttribute("tangent").array,f=[],h=[];for(let G=0;G<a;G++)f[G]=new K,h[G]=new K;const p=new K,g=new K,b=new K,C=new je,y=new je,w=new je,A=new K,O=new K;function E(G,X,J){p.fromArray(i,G*3),g.fromArray(i,X*3),b.fromArray(i,J*3),C.fromArray(o,G*2),y.fromArray(o,X*2),w.fromArray(o,J*2),g.sub(p),b.sub(p),y.sub(C),w.sub(C);const Z=1/(y.x*w.y-w.x*y.y);isFinite(Z)&&(A.copy(g).multiplyScalar(w.y).addScaledVector(b,-y.y).multiplyScalar(Z),O.copy(b).multiplyScalar(y.x).addScaledVector(g,-w.x).multiplyScalar(Z),f[G].add(A),f[X].add(A),f[J].add(A),h[G].add(O),h[X].add(O),h[J].add(O))}let T=this.groups;T.length===0&&(T=[{start:0,count:n.length}]);for(let G=0,X=T.length;G<X;++G){const J=T[G],Z=J.start,H=J.count;for(let ne=Z,ie=Z+H;ne<ie;ne+=3)E(n[ne+0],n[ne+1],n[ne+2])}const M=new K,B=new K,F=new K,I=new K;function N(G){F.fromArray(s,G*3),I.copy(F);const X=f[G];M.copy(X),M.sub(F.multiplyScalar(F.dot(X))).normalize(),B.crossVectors(I,X);const Z=B.dot(h[G])<0?-1:1;u[G*4]=M.x,u[G*4+1]=M.y,u[G*4+2]=M.z,u[G*4+3]=Z}for(let G=0,X=T.length;G<X;++G){const J=T[G],Z=J.start,H=J.count;for(let ne=Z,ie=Z+H;ne<ie;ne+=3)N(n[ne+0]),N(n[ne+1]),N(n[ne+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new jn(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let g=0,b=n.count;g<b;g++)n.setXYZ(g,0,0,0);const i=new K,s=new K,o=new K,a=new K,u=new K,f=new K,h=new K,p=new K;if(e)for(let g=0,b=e.count;g<b;g+=3){const C=e.getX(g+0),y=e.getX(g+1),w=e.getX(g+2);i.fromBufferAttribute(t,C),s.fromBufferAttribute(t,y),o.fromBufferAttribute(t,w),h.subVectors(o,s),p.subVectors(i,s),h.cross(p),a.fromBufferAttribute(n,C),u.fromBufferAttribute(n,y),f.fromBufferAttribute(n,w),a.add(h),u.add(h),f.add(h),n.setXYZ(C,a.x,a.y,a.z),n.setXYZ(y,u.x,u.y,u.z),n.setXYZ(w,f.x,f.y,f.z)}else for(let g=0,b=t.count;g<b;g+=3)i.fromBufferAttribute(t,g+0),s.fromBufferAttribute(t,g+1),o.fromBufferAttribute(t,g+2),h.subVectors(o,s),p.subVectors(i,s),h.cross(p),n.setXYZ(g+0,h.x,h.y,h.z),n.setXYZ(g+1,h.x,h.y,h.z),n.setXYZ(g+2,h.x,h.y,h.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)zn.fromBufferAttribute(e,t),zn.normalize(),e.setXYZ(t,zn.x,zn.y,zn.z)}toNonIndexed(){function e(a,u){const f=a.array,h=a.itemSize,p=a.normalized,g=new f.constructor(u.length*h);let b=0,C=0;for(let y=0,w=u.length;y<w;y++){a.isInterleavedBufferAttribute?b=u[y]*a.data.stride+a.offset:b=u[y]*h;for(let A=0;A<h;A++)g[C++]=f[b++]}return new jn(g,h,p)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Rr,n=this.index.array,i=this.attributes;for(const a in i){const u=i[a],f=e(u,n);t.setAttribute(a,f)}const s=this.morphAttributes;for(const a in s){const u=[],f=s[a];for(let h=0,p=f.length;h<p;h++){const g=f[h],b=e(g,n);u.push(b)}t.morphAttributes[a]=u}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,u=o.length;a<u;a++){const f=o[a];t.addGroup(f.start,f.count,f.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const u=this.parameters;for(const f in u)u[f]!==void 0&&(e[f]=u[f]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const u in n){const f=n[u];e.data.attributes[u]=f.toJSON(e.data)}const i={};let s=!1;for(const u in this.morphAttributes){const f=this.morphAttributes[u],h=[];for(let p=0,g=f.length;p<g;p++){const b=f[p];h.push(b.toJSON(e.data))}h.length>0&&(i[u]=h,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const i=e.attributes;for(const f in i){const h=i[f];this.setAttribute(f,h.clone(t))}const s=e.morphAttributes;for(const f in s){const h=[],p=s[f];for(let g=0,b=p.length;g<b;g++)h.push(p[g].clone(t));this.morphAttributes[f]=h}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let f=0,h=o.length;f<h;f++){const p=o[f];this.addGroup(p.start,p.count,p.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const u=e.boundingSphere;return u!==null&&(this.boundingSphere=u.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const Sv=new Gt,ia=new q0,Eh=new Ec,yl=new K,wl=new K,_l=new K,Ah=new K,tu=new K,nu=new je,ru=new je,iu=new je,Th=new K,su=new K;class ji extends rr{constructor(e=new Rr,t=new p2){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const n=this.geometry,i=n.attributes.position,s=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){tu.set(0,0,0);for(let u=0,f=s.length;u<f;u++){const h=a[u],p=s[u];h!==0&&(Ah.fromBufferAttribute(p,e),o?tu.addScaledVector(Ah,h):tu.addScaledVector(Ah.sub(t),h))}t.add(tu)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}raycast(e,t){const n=this.geometry,i=this.material,s=this.matrixWorld;if(i===void 0||(n.boundingSphere===null&&n.computeBoundingSphere(),Eh.copy(n.boundingSphere),Eh.applyMatrix4(s),e.ray.intersectsSphere(Eh)===!1)||(Sv.copy(s).invert(),ia.copy(e.ray).applyMatrix4(Sv),n.boundingBox!==null&&ia.intersectsBox(n.boundingBox)===!1))return;let o;const a=n.index,u=n.attributes.position,f=n.attributes.uv,h=n.attributes.uv2,p=n.groups,g=n.drawRange;if(a!==null)if(Array.isArray(i))for(let b=0,C=p.length;b<C;b++){const y=p[b],w=i[y.materialIndex],A=Math.max(y.start,g.start),O=Math.min(a.count,Math.min(y.start+y.count,g.start+g.count));for(let E=A,T=O;E<T;E+=3){const M=a.getX(E),B=a.getX(E+1),F=a.getX(E+2);o=ou(this,w,e,ia,f,h,M,B,F),o&&(o.faceIndex=Math.floor(E/3),o.face.materialIndex=y.materialIndex,t.push(o))}}else{const b=Math.max(0,g.start),C=Math.min(a.count,g.start+g.count);for(let y=b,w=C;y<w;y+=3){const A=a.getX(y),O=a.getX(y+1),E=a.getX(y+2);o=ou(this,i,e,ia,f,h,A,O,E),o&&(o.faceIndex=Math.floor(y/3),t.push(o))}}else if(u!==void 0)if(Array.isArray(i))for(let b=0,C=p.length;b<C;b++){const y=p[b],w=i[y.materialIndex],A=Math.max(y.start,g.start),O=Math.min(u.count,Math.min(y.start+y.count,g.start+g.count));for(let E=A,T=O;E<T;E+=3){const M=E,B=E+1,F=E+2;o=ou(this,w,e,ia,f,h,M,B,F),o&&(o.faceIndex=Math.floor(E/3),o.face.materialIndex=y.materialIndex,t.push(o))}}else{const b=Math.max(0,g.start),C=Math.min(u.count,g.start+g.count);for(let y=b,w=C;y<w;y+=3){const A=y,O=y+1,E=y+2;o=ou(this,i,e,ia,f,h,A,O,E),o&&(o.faceIndex=Math.floor(y/3),t.push(o))}}}}function k4(r,e,t,n,i,s,o,a){let u;if(e.side===Lr?u=n.intersectTriangle(o,s,i,!0,a):u=n.intersectTriangle(i,s,o,e.side===Qi,a),u===null)return null;su.copy(a),su.applyMatrix4(r.matrixWorld);const f=t.ray.origin.distanceTo(su);return f<t.near||f>t.far?null:{distance:f,point:su.clone(),object:r}}function ou(r,e,t,n,i,s,o,a,u){r.getVertexPosition(o,yl),r.getVertexPosition(a,wl),r.getVertexPosition(u,_l);const f=k4(r,e,t,n,yl,wl,_l,Th);if(f){i&&(nu.fromBufferAttribute(i,o),ru.fromBufferAttribute(i,a),iu.fromBufferAttribute(i,u),f.uv=Dn.getUV(Th,yl,wl,_l,nu,ru,iu,new je)),s&&(nu.fromBufferAttribute(s,o),ru.fromBufferAttribute(s,a),iu.fromBufferAttribute(s,u),f.uv2=Dn.getUV(Th,yl,wl,_l,nu,ru,iu,new je));const h={a:o,b:a,c:u,normal:new K,materialIndex:0};Dn.getNormal(yl,wl,_l,h.normal),f.face=h}return f}class Tc extends Rr{constructor(e=1,t=1,n=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const u=[],f=[],h=[],p=[];let g=0,b=0;C("z","y","x",-1,-1,n,t,e,o,s,0),C("z","y","x",1,-1,n,t,-e,o,s,1),C("x","z","y",1,1,e,n,t,i,o,2),C("x","z","y",1,-1,e,n,-t,i,o,3),C("x","y","z",1,-1,e,t,n,i,s,4),C("x","y","z",-1,-1,e,t,-n,i,s,5),this.setIndex(u),this.setAttribute("position",new Or(f,3)),this.setAttribute("normal",new Or(h,3)),this.setAttribute("uv",new Or(p,2));function C(y,w,A,O,E,T,M,B,F,I,N){const G=T/F,X=M/I,J=T/2,Z=M/2,H=B/2,ne=F+1,ie=I+1;let be=0,oe=0;const Te=new K;for(let Ie=0;Ie<ie;Ie++){const ve=Ie*X-Z;for(let he=0;he<ne;he++){const Be=he*G-J;Te[y]=Be*O,Te[w]=ve*E,Te[A]=H,f.push(Te.x,Te.y,Te.z),Te[y]=0,Te[w]=0,Te[A]=B>0?1:-1,h.push(Te.x,Te.y,Te.z),p.push(he/F),p.push(1-Ie/I),be+=1}}for(let Ie=0;Ie<I;Ie++)for(let ve=0;ve<F;ve++){const he=g+ve+ne*Ie,Be=g+ve+ne*(Ie+1),Ae=g+(ve+1)+ne*(Ie+1),$e=g+(ve+1)+ne*Ie;u.push(he,Be,$e),u.push(Be,Ae,$e),oe+=6}a.addGroup(b,oe,N),b+=oe,g+=be}}static fromJSON(e){return new Tc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Ua(r){const e={};for(const t in r){e[t]={};for(const n in r[t]){const i=r[t][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?e[t][n]=i.clone():Array.isArray(i)?e[t][n]=i.slice():e[t][n]=i}}return e}function fr(r){const e={};for(let t=0;t<r.length;t++){const n=Ua(r[t]);for(const i in n)e[i]=n[i]}return e}function U4(r){const e=[];for(let t=0;t<r.length;t++)e.push(r[t].clone());return e}function v2(r){return r.getRenderTarget()===null&&r.outputEncoding===hn?fi:cc}const V4={clone:Ua,merge:fr};var z4=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,G4=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ao extends Oo{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=z4,this.fragmentShader=G4,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Ua(e.uniforms),this.uniformsGroups=U4(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const i in this.extensions)this.extensions[i]===!0&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class x2 extends rr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Gt,this.projectionMatrix=new Gt,this.projectionMatrixInverse=new Gt}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Ir extends x2{constructor(e=50,t=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=hv*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(ch*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return hv*2*Math.atan(Math.tan(ch*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(ch*.5*this.fov)/this.zoom,n=2*t,i=this.aspect*n,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const u=o.fullWidth,f=o.fullHeight;s+=o.offsetX*i/u,t-=o.offsetY*n/f,i*=o.width/u,n*=o.height/f}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const sa=-90,oa=1;class $4 extends rr{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n;const i=new Ir(sa,oa,e,t);i.layers=this.layers,i.up.set(0,1,0),i.lookAt(1,0,0),this.add(i);const s=new Ir(sa,oa,e,t);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),this.add(s);const o=new Ir(sa,oa,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(0,1,0),this.add(o);const a=new Ir(sa,oa,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);const u=new Ir(sa,oa,e,t);u.layers=this.layers,u.up.set(0,1,0),u.lookAt(0,0,1),this.add(u);const f=new Ir(sa,oa,e,t);f.layers=this.layers,f.up.set(0,1,0),f.lookAt(0,0,-1),this.add(f)}update(e,t){this.parent===null&&this.updateMatrixWorld();const n=this.renderTarget,[i,s,o,a,u,f]=this.children,h=e.getRenderTarget(),p=e.toneMapping,g=e.xr.enabled;e.toneMapping=Ji,e.xr.enabled=!1;const b=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,i),e.setRenderTarget(n,1),e.render(t,s),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,a),e.setRenderTarget(n,4),e.render(t,u),n.texture.generateMipmaps=b,e.setRenderTarget(n,5),e.render(t,f),e.setRenderTarget(h),e.toneMapping=p,e.xr.enabled=g,n.texture.needsPMREMUpdate=!0}}class b2 extends Dr{constructor(e,t,n,i,s,o,a,u,f,h){e=e!==void 0?e:[],t=t!==void 0?t:Fa,super(e,t,n,i,s,o,a,u,f,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class W4 extends Mo{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];this.texture=new b2(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Gr}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Tc(5,5,5),s=new Ao({name:"CubemapFromEquirect",uniforms:Ua(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Lr,blending:Fs});s.uniforms.tEquirect.value=t;const o=new ji(i,s),a=t.minFilter;return t.minFilter===ac&&(t.minFilter=Gr),new $4(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,i);e.setRenderTarget(s)}}const Ih=new K,X4=new K,H4=new br;let di=class{constructor(e=new K(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=Ih.subVectors(n,t).cross(X4.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const n=e.delta(Ih),i=this.normal.dot(n);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(n).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||H4.getNormalMatrix(e),i=this.coplanarPoint(Ih).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}};const aa=new Ec,au=new K;class kp{constructor(e=new di,t=new di,n=new di,i=new di,s=new di,o=new di){this.planes=[e,t,n,i,s,o]}set(e,t,n,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,i=n[0],s=n[1],o=n[2],a=n[3],u=n[4],f=n[5],h=n[6],p=n[7],g=n[8],b=n[9],C=n[10],y=n[11],w=n[12],A=n[13],O=n[14],E=n[15];return t[0].setComponents(a-i,p-u,y-g,E-w).normalize(),t[1].setComponents(a+i,p+u,y+g,E+w).normalize(),t[2].setComponents(a+s,p+f,y+b,E+A).normalize(),t[3].setComponents(a-s,p-f,y-b,E-A).normalize(),t[4].setComponents(a-o,p-h,y-C,E-O).normalize(),t[5].setComponents(a+o,p+h,y+C,E+O).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),aa.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(aa)}intersectsSprite(e){return aa.center.set(0,0,0),aa.radius=.7071067811865476,aa.applyMatrix4(e.matrixWorld),this.intersectsSphere(aa)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(au.x=i.normal.x>0?e.max.x:e.min.x,au.y=i.normal.y>0?e.max.y:e.min.y,au.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(au)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function y2(){let r=null,e=!1,t=null,n=null;function i(s,o){t(s,o),n=r.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(n=r.requestAnimationFrame(i),e=!0)},stop:function(){r.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){r=s}}}function Y4(r,e){const t=e.isWebGL2,n=new WeakMap;function i(f,h){const p=f.array,g=f.usage,b=r.createBuffer();r.bindBuffer(h,b),r.bufferData(h,p,g),f.onUploadCallback();let C;if(p instanceof Float32Array)C=5126;else if(p instanceof Uint16Array)if(f.isFloat16BufferAttribute)if(t)C=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else C=5123;else if(p instanceof Int16Array)C=5122;else if(p instanceof Uint32Array)C=5125;else if(p instanceof Int32Array)C=5124;else if(p instanceof Int8Array)C=5120;else if(p instanceof Uint8Array)C=5121;else if(p instanceof Uint8ClampedArray)C=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+p);return{buffer:b,type:C,bytesPerElement:p.BYTES_PER_ELEMENT,version:f.version}}function s(f,h,p){const g=h.array,b=h.updateRange;r.bindBuffer(p,f),b.count===-1?r.bufferSubData(p,0,g):(t?r.bufferSubData(p,b.offset*g.BYTES_PER_ELEMENT,g,b.offset,b.count):r.bufferSubData(p,b.offset*g.BYTES_PER_ELEMENT,g.subarray(b.offset,b.offset+b.count)),b.count=-1),h.onUploadCallback()}function o(f){return f.isInterleavedBufferAttribute&&(f=f.data),n.get(f)}function a(f){f.isInterleavedBufferAttribute&&(f=f.data);const h=n.get(f);h&&(r.deleteBuffer(h.buffer),n.delete(f))}function u(f,h){if(f.isGLBufferAttribute){const g=n.get(f);(!g||g.version<f.version)&&n.set(f,{buffer:f.buffer,type:f.type,bytesPerElement:f.elementSize,version:f.version});return}f.isInterleavedBufferAttribute&&(f=f.data);const p=n.get(f);p===void 0?n.set(f,i(f,h)):p.version<f.version&&(s(p.buffer,f,h),p.version=f.version)}return{get:o,remove:a,update:u}}class Up extends Rr{constructor(e=1,t=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(n),u=Math.floor(i),f=a+1,h=u+1,p=e/a,g=t/u,b=[],C=[],y=[],w=[];for(let A=0;A<h;A++){const O=A*g-o;for(let E=0;E<f;E++){const T=E*p-s;C.push(T,-O,0),y.push(0,0,1),w.push(E/a),w.push(1-A/u)}}for(let A=0;A<u;A++)for(let O=0;O<a;O++){const E=O+f*A,T=O+f*(A+1),M=O+1+f*(A+1),B=O+1+f*A;b.push(E,T,B),b.push(T,M,B)}this.setIndex(b),this.setAttribute("position",new Or(C,3)),this.setAttribute("normal",new Or(y,3)),this.setAttribute("uv",new Or(w,2))}static fromJSON(e){return new Up(e.width,e.height,e.widthSegments,e.heightSegments)}}var q4=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,Z4=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,j4=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,K4=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,J4=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Q4=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,eM="vec3 transformed = vec3( position );",tM=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,nM=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,rM=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,iM=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,sM=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,oM=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,aM=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,lM=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,cM=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,uM=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,fM=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,hM=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,dM=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,pM=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,mM=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,gM=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,vM=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,xM=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,bM=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,yM="gl_FragColor = linearToOutputTexel( gl_FragColor );",wM=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,_M=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,SM=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,CM=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,PM=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,MM=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,EM=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,AM=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,TM=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,IM=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,LM=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,DM=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,OM=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,RM=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,BM=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,FM=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,NM=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,kM=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,UM=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,VM=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,zM=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,GM=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,$M=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,WM=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,XM=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,HM=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,YM=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,qM=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,ZM=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,jM=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,KM=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,JM=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,QM=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,eE=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,tE=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,nE=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,rE=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,iE=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,sE=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,oE=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,aE=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,lE=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,cE=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,uE=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,fE=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,hE=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,dE=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,pE=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,mE=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,gE=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,vE=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,xE=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,bE=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,yE=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,wE=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,_E=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,SE=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,CE=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,PE=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,ME=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,EE=`#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,AE=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,TE=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,IE=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,LE=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,DE=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,OE=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,RE=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,BE=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,FE=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,NE=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,kE=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,UE=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,VE=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,zE=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,GE=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,$E=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,WE=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,XE=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const HE=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,YE=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,qE=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,ZE=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,jE=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,KE=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,JE=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,QE=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,eA=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,tA=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,nA=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,rA=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,iA=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,sA=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,oA=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,aA=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,lA=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,cA=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,uA=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,fA=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,hA=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,dA=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,pA=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,mA=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,gA=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,vA=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,xA=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,bA=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,yA=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,wA=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,_A=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,SA=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,CA=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,PA=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Lt={alphamap_fragment:q4,alphamap_pars_fragment:Z4,alphatest_fragment:j4,alphatest_pars_fragment:K4,aomap_fragment:J4,aomap_pars_fragment:Q4,begin_vertex:eM,beginnormal_vertex:tM,bsdfs:nM,iridescence_fragment:rM,bumpmap_pars_fragment:iM,clipping_planes_fragment:sM,clipping_planes_pars_fragment:oM,clipping_planes_pars_vertex:aM,clipping_planes_vertex:lM,color_fragment:cM,color_pars_fragment:uM,color_pars_vertex:fM,color_vertex:hM,common:dM,cube_uv_reflection_fragment:pM,defaultnormal_vertex:mM,displacementmap_pars_vertex:gM,displacementmap_vertex:vM,emissivemap_fragment:xM,emissivemap_pars_fragment:bM,encodings_fragment:yM,encodings_pars_fragment:wM,envmap_fragment:_M,envmap_common_pars_fragment:SM,envmap_pars_fragment:CM,envmap_pars_vertex:PM,envmap_physical_pars_fragment:NM,envmap_vertex:MM,fog_vertex:EM,fog_pars_vertex:AM,fog_fragment:TM,fog_pars_fragment:IM,gradientmap_pars_fragment:LM,lightmap_fragment:DM,lightmap_pars_fragment:OM,lights_lambert_fragment:RM,lights_lambert_pars_fragment:BM,lights_pars_begin:FM,lights_toon_fragment:kM,lights_toon_pars_fragment:UM,lights_phong_fragment:VM,lights_phong_pars_fragment:zM,lights_physical_fragment:GM,lights_physical_pars_fragment:$M,lights_fragment_begin:WM,lights_fragment_maps:XM,lights_fragment_end:HM,logdepthbuf_fragment:YM,logdepthbuf_pars_fragment:qM,logdepthbuf_pars_vertex:ZM,logdepthbuf_vertex:jM,map_fragment:KM,map_pars_fragment:JM,map_particle_fragment:QM,map_particle_pars_fragment:eE,metalnessmap_fragment:tE,metalnessmap_pars_fragment:nE,morphcolor_vertex:rE,morphnormal_vertex:iE,morphtarget_pars_vertex:sE,morphtarget_vertex:oE,normal_fragment_begin:aE,normal_fragment_maps:lE,normal_pars_fragment:cE,normal_pars_vertex:uE,normal_vertex:fE,normalmap_pars_fragment:hE,clearcoat_normal_fragment_begin:dE,clearcoat_normal_fragment_maps:pE,clearcoat_pars_fragment:mE,iridescence_pars_fragment:gE,output_fragment:vE,packing:xE,premultiplied_alpha_fragment:bE,project_vertex:yE,dithering_fragment:wE,dithering_pars_fragment:_E,roughnessmap_fragment:SE,roughnessmap_pars_fragment:CE,shadowmap_pars_fragment:PE,shadowmap_pars_vertex:ME,shadowmap_vertex:EE,shadowmask_pars_fragment:AE,skinbase_vertex:TE,skinning_pars_vertex:IE,skinning_vertex:LE,skinnormal_vertex:DE,specularmap_fragment:OE,specularmap_pars_fragment:RE,tonemapping_fragment:BE,tonemapping_pars_fragment:FE,transmission_fragment:NE,transmission_pars_fragment:kE,uv_pars_fragment:UE,uv_pars_vertex:VE,uv_vertex:zE,uv2_pars_fragment:GE,uv2_pars_vertex:$E,uv2_vertex:WE,worldpos_vertex:XE,background_vert:HE,background_frag:YE,backgroundCube_vert:qE,backgroundCube_frag:ZE,cube_vert:jE,cube_frag:KE,depth_vert:JE,depth_frag:QE,distanceRGBA_vert:eA,distanceRGBA_frag:tA,equirect_vert:nA,equirect_frag:rA,linedashed_vert:iA,linedashed_frag:sA,meshbasic_vert:oA,meshbasic_frag:aA,meshlambert_vert:lA,meshlambert_frag:cA,meshmatcap_vert:uA,meshmatcap_frag:fA,meshnormal_vert:hA,meshnormal_frag:dA,meshphong_vert:pA,meshphong_frag:mA,meshphysical_vert:gA,meshphysical_frag:vA,meshtoon_vert:xA,meshtoon_frag:bA,points_vert:yA,points_frag:wA,shadow_vert:_A,shadow_frag:SA,sprite_vert:CA,sprite_frag:PA},tt={common:{diffuse:{value:new tn(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new br},uv2Transform:{value:new br},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new je(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new tn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new tn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new br}},sprite:{diffuse:{value:new tn(16777215)},opacity:{value:1},center:{value:new je(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new br}}},pi={basic:{uniforms:fr([tt.common,tt.specularmap,tt.envmap,tt.aomap,tt.lightmap,tt.fog]),vertexShader:Lt.meshbasic_vert,fragmentShader:Lt.meshbasic_frag},lambert:{uniforms:fr([tt.common,tt.specularmap,tt.envmap,tt.aomap,tt.lightmap,tt.emissivemap,tt.bumpmap,tt.normalmap,tt.displacementmap,tt.fog,tt.lights,{emissive:{value:new tn(0)}}]),vertexShader:Lt.meshlambert_vert,fragmentShader:Lt.meshlambert_frag},phong:{uniforms:fr([tt.common,tt.specularmap,tt.envmap,tt.aomap,tt.lightmap,tt.emissivemap,tt.bumpmap,tt.normalmap,tt.displacementmap,tt.fog,tt.lights,{emissive:{value:new tn(0)},specular:{value:new tn(1118481)},shininess:{value:30}}]),vertexShader:Lt.meshphong_vert,fragmentShader:Lt.meshphong_frag},standard:{uniforms:fr([tt.common,tt.envmap,tt.aomap,tt.lightmap,tt.emissivemap,tt.bumpmap,tt.normalmap,tt.displacementmap,tt.roughnessmap,tt.metalnessmap,tt.fog,tt.lights,{emissive:{value:new tn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Lt.meshphysical_vert,fragmentShader:Lt.meshphysical_frag},toon:{uniforms:fr([tt.common,tt.aomap,tt.lightmap,tt.emissivemap,tt.bumpmap,tt.normalmap,tt.displacementmap,tt.gradientmap,tt.fog,tt.lights,{emissive:{value:new tn(0)}}]),vertexShader:Lt.meshtoon_vert,fragmentShader:Lt.meshtoon_frag},matcap:{uniforms:fr([tt.common,tt.bumpmap,tt.normalmap,tt.displacementmap,tt.fog,{matcap:{value:null}}]),vertexShader:Lt.meshmatcap_vert,fragmentShader:Lt.meshmatcap_frag},points:{uniforms:fr([tt.points,tt.fog]),vertexShader:Lt.points_vert,fragmentShader:Lt.points_frag},dashed:{uniforms:fr([tt.common,tt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Lt.linedashed_vert,fragmentShader:Lt.linedashed_frag},depth:{uniforms:fr([tt.common,tt.displacementmap]),vertexShader:Lt.depth_vert,fragmentShader:Lt.depth_frag},normal:{uniforms:fr([tt.common,tt.bumpmap,tt.normalmap,tt.displacementmap,{opacity:{value:1}}]),vertexShader:Lt.meshnormal_vert,fragmentShader:Lt.meshnormal_frag},sprite:{uniforms:fr([tt.sprite,tt.fog]),vertexShader:Lt.sprite_vert,fragmentShader:Lt.sprite_frag},background:{uniforms:{uvTransform:{value:new br},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Lt.background_vert,fragmentShader:Lt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Lt.backgroundCube_vert,fragmentShader:Lt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Lt.cube_vert,fragmentShader:Lt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Lt.equirect_vert,fragmentShader:Lt.equirect_frag},distanceRGBA:{uniforms:fr([tt.common,tt.displacementmap,{referencePosition:{value:new K},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Lt.distanceRGBA_vert,fragmentShader:Lt.distanceRGBA_frag},shadow:{uniforms:fr([tt.lights,tt.fog,{color:{value:new tn(0)},opacity:{value:1}}]),vertexShader:Lt.shadow_vert,fragmentShader:Lt.shadow_frag}};pi.physical={uniforms:fr([pi.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new je(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new tn(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new je},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new tn(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new tn(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Lt.meshphysical_vert,fragmentShader:Lt.meshphysical_frag};const lu={r:0,b:0,g:0};function MA(r,e,t,n,i,s,o){const a=new tn(0);let u=s===!0?0:1,f,h,p=null,g=0,b=null;function C(w,A){let O=!1,E=A.isScene===!0?A.background:null;E&&E.isTexture&&(E=(A.backgroundBlurriness>0?t:e).get(E));const T=r.xr,M=T.getSession&&T.getSession();M&&M.environmentBlendMode==="additive"&&(E=null),E===null?y(a,u):E&&E.isColor&&(y(E,1),O=!0),(r.autoClear||O)&&r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil),E&&(E.isCubeTexture||E.mapping===Y0)?(h===void 0&&(h=new ji(new Tc(1,1,1),new Ao({name:"BackgroundCubeMaterial",uniforms:Ua(pi.backgroundCube.uniforms),vertexShader:pi.backgroundCube.vertexShader,fragmentShader:pi.backgroundCube.fragmentShader,side:Lr,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(B,F,I){this.matrixWorld.copyPosition(I.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(h)),h.material.uniforms.envMap.value=E,h.material.uniforms.flipEnvMap.value=E.isCubeTexture&&E.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=A.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=A.backgroundIntensity,h.material.toneMapped=E.encoding!==hn,(p!==E||g!==E.version||b!==r.toneMapping)&&(h.material.needsUpdate=!0,p=E,g=E.version,b=r.toneMapping),h.layers.enableAll(),w.unshift(h,h.geometry,h.material,0,0,null)):E&&E.isTexture&&(f===void 0&&(f=new ji(new Up(2,2),new Ao({name:"BackgroundMaterial",uniforms:Ua(pi.background.uniforms),vertexShader:pi.background.vertexShader,fragmentShader:pi.background.fragmentShader,side:Qi,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(f)),f.material.uniforms.t2D.value=E,f.material.uniforms.backgroundIntensity.value=A.backgroundIntensity,f.material.toneMapped=E.encoding!==hn,E.matrixAutoUpdate===!0&&E.updateMatrix(),f.material.uniforms.uvTransform.value.copy(E.matrix),(p!==E||g!==E.version||b!==r.toneMapping)&&(f.material.needsUpdate=!0,p=E,g=E.version,b=r.toneMapping),f.layers.enableAll(),w.unshift(f,f.geometry,f.material,0,0,null))}function y(w,A){w.getRGB(lu,v2(r)),n.buffers.color.setClear(lu.r,lu.g,lu.b,A,o)}return{getClearColor:function(){return a},setClearColor:function(w,A=1){a.set(w),u=A,y(a,u)},getClearAlpha:function(){return u},setClearAlpha:function(w){u=w,y(a,u)},render:C}}function EA(r,e,t,n){const i=r.getParameter(34921),s=n.isWebGL2?null:e.get("OES_vertex_array_object"),o=n.isWebGL2||s!==null,a={},u=w(null);let f=u,h=!1;function p(H,ne,ie,be,oe){let Te=!1;if(o){const Ie=y(be,ie,ne);f!==Ie&&(f=Ie,b(f.object)),Te=A(H,be,ie,oe),Te&&O(H,be,ie,oe)}else{const Ie=ne.wireframe===!0;(f.geometry!==be.id||f.program!==ie.id||f.wireframe!==Ie)&&(f.geometry=be.id,f.program=ie.id,f.wireframe=Ie,Te=!0)}oe!==null&&t.update(oe,34963),(Te||h)&&(h=!1,I(H,ne,ie,be),oe!==null&&r.bindBuffer(34963,t.get(oe).buffer))}function g(){return n.isWebGL2?r.createVertexArray():s.createVertexArrayOES()}function b(H){return n.isWebGL2?r.bindVertexArray(H):s.bindVertexArrayOES(H)}function C(H){return n.isWebGL2?r.deleteVertexArray(H):s.deleteVertexArrayOES(H)}function y(H,ne,ie){const be=ie.wireframe===!0;let oe=a[H.id];oe===void 0&&(oe={},a[H.id]=oe);let Te=oe[ne.id];Te===void 0&&(Te={},oe[ne.id]=Te);let Ie=Te[be];return Ie===void 0&&(Ie=w(g()),Te[be]=Ie),Ie}function w(H){const ne=[],ie=[],be=[];for(let oe=0;oe<i;oe++)ne[oe]=0,ie[oe]=0,be[oe]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:ne,enabledAttributes:ie,attributeDivisors:be,object:H,attributes:{},index:null}}function A(H,ne,ie,be){const oe=f.attributes,Te=ne.attributes;let Ie=0;const ve=ie.getAttributes();for(const he in ve)if(ve[he].location>=0){const Ae=oe[he];let $e=Te[he];if($e===void 0&&(he==="instanceMatrix"&&H.instanceMatrix&&($e=H.instanceMatrix),he==="instanceColor"&&H.instanceColor&&($e=H.instanceColor)),Ae===void 0||Ae.attribute!==$e||$e&&Ae.data!==$e.data)return!0;Ie++}return f.attributesNum!==Ie||f.index!==be}function O(H,ne,ie,be){const oe={},Te=ne.attributes;let Ie=0;const ve=ie.getAttributes();for(const he in ve)if(ve[he].location>=0){let Ae=Te[he];Ae===void 0&&(he==="instanceMatrix"&&H.instanceMatrix&&(Ae=H.instanceMatrix),he==="instanceColor"&&H.instanceColor&&(Ae=H.instanceColor));const $e={};$e.attribute=Ae,Ae&&Ae.data&&($e.data=Ae.data),oe[he]=$e,Ie++}f.attributes=oe,f.attributesNum=Ie,f.index=be}function E(){const H=f.newAttributes;for(let ne=0,ie=H.length;ne<ie;ne++)H[ne]=0}function T(H){M(H,0)}function M(H,ne){const ie=f.newAttributes,be=f.enabledAttributes,oe=f.attributeDivisors;ie[H]=1,be[H]===0&&(r.enableVertexAttribArray(H),be[H]=1),oe[H]!==ne&&((n.isWebGL2?r:e.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](H,ne),oe[H]=ne)}function B(){const H=f.newAttributes,ne=f.enabledAttributes;for(let ie=0,be=ne.length;ie<be;ie++)ne[ie]!==H[ie]&&(r.disableVertexAttribArray(ie),ne[ie]=0)}function F(H,ne,ie,be,oe,Te){n.isWebGL2===!0&&(ie===5124||ie===5125)?r.vertexAttribIPointer(H,ne,ie,oe,Te):r.vertexAttribPointer(H,ne,ie,be,oe,Te)}function I(H,ne,ie,be){if(n.isWebGL2===!1&&(H.isInstancedMesh||be.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;E();const oe=be.attributes,Te=ie.getAttributes(),Ie=ne.defaultAttributeValues;for(const ve in Te){const he=Te[ve];if(he.location>=0){let Be=oe[ve];if(Be===void 0&&(ve==="instanceMatrix"&&H.instanceMatrix&&(Be=H.instanceMatrix),ve==="instanceColor"&&H.instanceColor&&(Be=H.instanceColor)),Be!==void 0){const Ae=Be.normalized,$e=Be.itemSize,Ee=t.get(Be);if(Ee===void 0)continue;const ut=Ee.buffer,Se=Ee.type,we=Ee.bytesPerElement;if(Be.isInterleavedBufferAttribute){const de=Be.data,ye=de.stride,ue=Be.offset;if(de.isInstancedInterleavedBuffer){for(let pe=0;pe<he.locationSize;pe++)M(he.location+pe,de.meshPerAttribute);H.isInstancedMesh!==!0&&be._maxInstanceCount===void 0&&(be._maxInstanceCount=de.meshPerAttribute*de.count)}else for(let pe=0;pe<he.locationSize;pe++)T(he.location+pe);r.bindBuffer(34962,ut);for(let pe=0;pe<he.locationSize;pe++)F(he.location+pe,$e/he.locationSize,Se,Ae,ye*we,(ue+$e/he.locationSize*pe)*we)}else{if(Be.isInstancedBufferAttribute){for(let de=0;de<he.locationSize;de++)M(he.location+de,Be.meshPerAttribute);H.isInstancedMesh!==!0&&be._maxInstanceCount===void 0&&(be._maxInstanceCount=Be.meshPerAttribute*Be.count)}else for(let de=0;de<he.locationSize;de++)T(he.location+de);r.bindBuffer(34962,ut);for(let de=0;de<he.locationSize;de++)F(he.location+de,$e/he.locationSize,Se,Ae,$e*we,$e/he.locationSize*de*we)}}else if(Ie!==void 0){const Ae=Ie[ve];if(Ae!==void 0)switch(Ae.length){case 2:r.vertexAttrib2fv(he.location,Ae);break;case 3:r.vertexAttrib3fv(he.location,Ae);break;case 4:r.vertexAttrib4fv(he.location,Ae);break;default:r.vertexAttrib1fv(he.location,Ae)}}}}B()}function N(){J();for(const H in a){const ne=a[H];for(const ie in ne){const be=ne[ie];for(const oe in be)C(be[oe].object),delete be[oe];delete ne[ie]}delete a[H]}}function G(H){if(a[H.id]===void 0)return;const ne=a[H.id];for(const ie in ne){const be=ne[ie];for(const oe in be)C(be[oe].object),delete be[oe];delete ne[ie]}delete a[H.id]}function X(H){for(const ne in a){const ie=a[ne];if(ie[H.id]===void 0)continue;const be=ie[H.id];for(const oe in be)C(be[oe].object),delete be[oe];delete ie[H.id]}}function J(){Z(),h=!0,f!==u&&(f=u,b(f.object))}function Z(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:p,reset:J,resetDefaultState:Z,dispose:N,releaseStatesOfGeometry:G,releaseStatesOfProgram:X,initAttributes:E,enableAttribute:T,disableUnusedAttributes:B}}function AA(r,e,t,n){const i=n.isWebGL2;let s;function o(f){s=f}function a(f,h){r.drawArrays(s,f,h),t.update(h,s,1)}function u(f,h,p){if(p===0)return;let g,b;if(i)g=r,b="drawArraysInstanced";else if(g=e.get("ANGLE_instanced_arrays"),b="drawArraysInstancedANGLE",g===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}g[b](s,f,h,p),t.update(h,s,p)}this.setMode=o,this.render=a,this.renderInstances=u}function TA(r,e,t){let n;function i(){if(n!==void 0)return n;if(e.has("EXT_texture_filter_anisotropic")===!0){const F=e.get("EXT_texture_filter_anisotropic");n=r.getParameter(F.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n}function s(F){if(F==="highp"){if(r.getShaderPrecisionFormat(35633,36338).precision>0&&r.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";F="mediump"}return F==="mediump"&&r.getShaderPrecisionFormat(35633,36337).precision>0&&r.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&r instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&r instanceof WebGL2ComputeRenderingContext;let a=t.precision!==void 0?t.precision:"highp";const u=s(a);u!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",u,"instead."),a=u);const f=o||e.has("WEBGL_draw_buffers"),h=t.logarithmicDepthBuffer===!0,p=r.getParameter(34930),g=r.getParameter(35660),b=r.getParameter(3379),C=r.getParameter(34076),y=r.getParameter(34921),w=r.getParameter(36347),A=r.getParameter(36348),O=r.getParameter(36349),E=g>0,T=o||e.has("OES_texture_float"),M=E&&T,B=o?r.getParameter(36183):0;return{isWebGL2:o,drawBuffers:f,getMaxAnisotropy:i,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:h,maxTextures:p,maxVertexTextures:g,maxTextureSize:b,maxCubemapSize:C,maxAttributes:y,maxVertexUniforms:w,maxVaryings:A,maxFragmentUniforms:O,vertexTextures:E,floatFragmentTextures:T,floatVertexTextures:M,maxSamples:B}}function IA(r){const e=this;let t=null,n=0,i=!1,s=!1;const o=new di,a=new br,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(p,g,b){const C=p.length!==0||g||n!==0||i;return i=g,t=h(p,b,0),n=p.length,C},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1,f()},this.setState=function(p,g,b){const C=p.clippingPlanes,y=p.clipIntersection,w=p.clipShadows,A=r.get(p);if(!i||C===null||C.length===0||s&&!w)s?h(null):f();else{const O=s?0:n,E=O*4;let T=A.clippingState||null;u.value=T,T=h(C,g,E,b);for(let M=0;M!==E;++M)T[M]=t[M];A.clippingState=T,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=O}};function f(){u.value!==t&&(u.value=t,u.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function h(p,g,b,C){const y=p!==null?p.length:0;let w=null;if(y!==0){if(w=u.value,C!==!0||w===null){const A=b+y*4,O=g.matrixWorldInverse;a.getNormalMatrix(O),(w===null||w.length<A)&&(w=new Float32Array(A));for(let E=0,T=b;E!==y;++E,T+=4)o.copy(p[E]).applyMatrix4(O,a),o.normal.toArray(w,T),w[T+3]=o.constant}u.value=w,u.needsUpdate=!0}return e.numPlanes=y,e.numIntersection=0,w}}function LA(r){let e=new WeakMap;function t(o,a){return a===Wd?o.mapping=Fa:a===Xd&&(o.mapping=Na),o}function n(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===Wd||a===Xd)if(e.has(o)){const u=e.get(o).texture;return t(u,o.mapping)}else{const u=o.image;if(u&&u.height>0){const f=new W4(u.height/2);return f.fromEquirectangularTexture(r,o),e.set(o,f),o.addEventListener("dispose",i),t(f.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const u=e.get(a);u!==void 0&&(e.delete(a),u.dispose())}function s(){e=new WeakMap}return{get:n,dispose:s}}class DA extends x2{constructor(e=-1,t=1,n=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=n-e,o=n+e,a=i+t,u=i-t;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=f*this.view.offsetX,o=s+f*this.view.width,a-=h*this.view.offsetY,u=a-h*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,u,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Pa=4,Cv=[.125,.215,.35,.446,.526,.582],lo=20,Lh=new DA,Pv=new tn;let Dh=null;const oo=(1+Math.sqrt(5))/2,la=1/oo,Mv=[new K(1,1,1),new K(-1,1,1),new K(1,1,-1),new K(-1,1,-1),new K(0,oo,la),new K(0,oo,-la),new K(la,0,oo),new K(-la,0,oo),new K(oo,la,0),new K(-oo,la,0)];class Ev{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,i=100){Dh=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,n,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Iv(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Tv(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Dh),e.scissorTest=!1,cu(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Fa||e.mapping===Na?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Dh=this._renderer.getRenderTarget();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Gr,minFilter:Gr,generateMipmaps:!1,type:lc,format:ti,encoding:Po,depthBuffer:!1},i=Av(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Av(e,t,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=OA(s)),this._blurMaterial=RA(s,e,t)}return i}_compileMaterial(e){const t=new ji(this._lodPlanes[0],e);this._renderer.compile(t,Lh)}_sceneToCubeUV(e,t,n,i){const a=new Ir(90,1,t,n),u=[1,-1,1,1,1,1],f=[1,1,1,-1,-1,-1],h=this._renderer,p=h.autoClear,g=h.toneMapping;h.getClearColor(Pv),h.toneMapping=Ji,h.autoClear=!1;const b=new p2({name:"PMREM.Background",side:Lr,depthWrite:!1,depthTest:!1}),C=new ji(new Tc,b);let y=!1;const w=e.background;w?w.isColor&&(b.color.copy(w),e.background=null,y=!0):(b.color.copy(Pv),y=!0);for(let A=0;A<6;A++){const O=A%3;O===0?(a.up.set(0,u[A],0),a.lookAt(f[A],0,0)):O===1?(a.up.set(0,0,u[A]),a.lookAt(0,f[A],0)):(a.up.set(0,u[A],0),a.lookAt(0,0,f[A]));const E=this._cubeSize;cu(i,O*E,A>2?E:0,E,E),h.setRenderTarget(i),y&&h.render(C,a),h.render(e,a)}C.geometry.dispose(),C.material.dispose(),h.toneMapping=g,h.autoClear=p,e.background=w}_textureToCubeUV(e,t){const n=this._renderer,i=e.mapping===Fa||e.mapping===Na;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=Iv()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Tv());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new ji(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const u=this._cubeSize;cu(t,0,0,3*u,2*u),n.setRenderTarget(t),n.render(o,Lh)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=Mv[(i-1)%Mv.length];this._blur(e,i-1,i,s,o)}t.autoClear=n}_blur(e,t,n,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,i,"latitudinal",s),this._halfBlur(o,e,n,n,i,"longitudinal",s)}_halfBlur(e,t,n,i,s,o,a){const u=this._renderer,f=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,p=new ji(this._lodPlanes[i],f),g=f.uniforms,b=this._sizeLods[n]-1,C=isFinite(s)?Math.PI/(2*b):2*Math.PI/(2*lo-1),y=s/C,w=isFinite(s)?1+Math.floor(h*y):lo;w>lo&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${w} samples when the maximum is set to ${lo}`);const A=[];let O=0;for(let F=0;F<lo;++F){const I=F/y,N=Math.exp(-I*I/2);A.push(N),F===0?O+=N:F<w&&(O+=2*N)}for(let F=0;F<A.length;F++)A[F]=A[F]/O;g.envMap.value=e.texture,g.samples.value=w,g.weights.value=A,g.latitudinal.value=o==="latitudinal",a&&(g.poleAxis.value=a);const{_lodMax:E}=this;g.dTheta.value=C,g.mipInt.value=E-n;const T=this._sizeLods[i],M=3*T*(i>E-Pa?i-E+Pa:0),B=4*(this._cubeSize-T);cu(t,M,B,3*T,2*T),u.setRenderTarget(t),u.render(p,Lh)}}function OA(r){const e=[],t=[],n=[];let i=r;const s=r-Pa+1+Cv.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let u=1/a;o>r-Pa?u=Cv[o-r+Pa-1]:o===0&&(u=0),n.push(u);const f=1/(a-2),h=-f,p=1+f,g=[h,h,p,h,p,p,h,h,p,p,h,p],b=6,C=6,y=3,w=2,A=1,O=new Float32Array(y*C*b),E=new Float32Array(w*C*b),T=new Float32Array(A*C*b);for(let B=0;B<b;B++){const F=B%3*2/3-1,I=B>2?0:-1,N=[F,I,0,F+2/3,I,0,F+2/3,I+1,0,F,I,0,F+2/3,I+1,0,F,I+1,0];O.set(N,y*C*B),E.set(g,w*C*B);const G=[B,B,B,B,B,B];T.set(G,A*C*B)}const M=new Rr;M.setAttribute("position",new jn(O,y)),M.setAttribute("uv",new jn(E,w)),M.setAttribute("faceIndex",new jn(T,A)),e.push(M),i>Pa&&i--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function Av(r,e,t){const n=new Mo(r,e,t);return n.texture.mapping=Y0,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function cu(r,e,t,n,i){r.viewport.set(e,t,n,i),r.scissor.set(e,t,n,i)}function RA(r,e,t){const n=new Float32Array(lo),i=new K(0,1,0);return new Ao({name:"SphericalGaussianBlur",defines:{n:lo,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${r}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:Vp(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Fs,depthTest:!1,depthWrite:!1})}function Tv(){return new Ao({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Vp(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Fs,depthTest:!1,depthWrite:!1})}function Iv(){return new Ao({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Vp(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Fs,depthTest:!1,depthWrite:!1})}function Vp(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function BA(r){let e=new WeakMap,t=null;function n(a){if(a&&a.isTexture){const u=a.mapping,f=u===Wd||u===Xd,h=u===Fa||u===Na;if(f||h)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let p=e.get(a);return t===null&&(t=new Ev(r)),p=f?t.fromEquirectangular(a,p):t.fromCubemap(a,p),e.set(a,p),p.texture}else{if(e.has(a))return e.get(a).texture;{const p=a.image;if(f&&p&&p.height>0||h&&p&&i(p)){t===null&&(t=new Ev(r));const g=f?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,g),a.addEventListener("dispose",s),g.texture}else return null}}}return a}function i(a){let u=0;const f=6;for(let h=0;h<f;h++)a[h]!==void 0&&u++;return u===f}function s(a){const u=a.target;u.removeEventListener("dispose",s);const f=e.get(u);f!==void 0&&(e.delete(u),f.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:o}}function FA(r){const e={};function t(n){if(e[n]!==void 0)return e[n];let i;switch(n){case"WEBGL_depth_texture":i=r.getExtension("WEBGL_depth_texture")||r.getExtension("MOZ_WEBGL_depth_texture")||r.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=r.getExtension("WEBGL_compressed_texture_s3tc")||r.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=r.getExtension(n)}return e[n]=i,i}return{has:function(n){return t(n)!==null},init:function(n){n.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(n){const i=t(n);return i===null&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),i}}}function NA(r,e,t,n){const i={},s=new WeakMap;function o(p){const g=p.target;g.index!==null&&e.remove(g.index);for(const C in g.attributes)e.remove(g.attributes[C]);g.removeEventListener("dispose",o),delete i[g.id];const b=s.get(g);b&&(e.remove(b),s.delete(g)),n.releaseStatesOfGeometry(g),g.isInstancedBufferGeometry===!0&&delete g._maxInstanceCount,t.memory.geometries--}function a(p,g){return i[g.id]===!0||(g.addEventListener("dispose",o),i[g.id]=!0,t.memory.geometries++),g}function u(p){const g=p.attributes;for(const C in g)e.update(g[C],34962);const b=p.morphAttributes;for(const C in b){const y=b[C];for(let w=0,A=y.length;w<A;w++)e.update(y[w],34962)}}function f(p){const g=[],b=p.index,C=p.attributes.position;let y=0;if(b!==null){const O=b.array;y=b.version;for(let E=0,T=O.length;E<T;E+=3){const M=O[E+0],B=O[E+1],F=O[E+2];g.push(M,B,B,F,F,M)}}else{const O=C.array;y=C.version;for(let E=0,T=O.length/3-1;E<T;E+=3){const M=E+0,B=E+1,F=E+2;g.push(M,B,B,F,F,M)}}const w=new(c2(g)?g2:m2)(g,1);w.version=y;const A=s.get(p);A&&e.remove(A),s.set(p,w)}function h(p){const g=s.get(p);if(g){const b=p.index;b!==null&&g.version<b.version&&f(p)}else f(p);return s.get(p)}return{get:a,update:u,getWireframeAttribute:h}}function kA(r,e,t,n){const i=n.isWebGL2;let s;function o(g){s=g}let a,u;function f(g){a=g.type,u=g.bytesPerElement}function h(g,b){r.drawElements(s,b,a,g*u),t.update(b,s,1)}function p(g,b,C){if(C===0)return;let y,w;if(i)y=r,w="drawElementsInstanced";else if(y=e.get("ANGLE_instanced_arrays"),w="drawElementsInstancedANGLE",y===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}y[w](s,b,a,g*u,C),t.update(b,s,C)}this.setMode=o,this.setIndex=f,this.render=h,this.renderInstances=p}function UA(r){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(s,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(s/3);break;case 1:t.lines+=a*(s/2);break;case 3:t.lines+=a*(s-1);break;case 2:t.lines+=a*s;break;case 0:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:n}}function VA(r,e){return r[0]-e[0]}function zA(r,e){return Math.abs(e[1])-Math.abs(r[1])}function GA(r,e,t){const n={},i=new Float32Array(8),s=new WeakMap,o=new Zt,a=[];for(let f=0;f<8;f++)a[f]=[f,0];function u(f,h,p,g){const b=f.morphTargetInfluences;if(e.isWebGL2===!0){const C=h.morphAttributes.position||h.morphAttributes.normal||h.morphAttributes.color,y=C!==void 0?C.length:0;let w=s.get(h);if(w===void 0||w.count!==y){let ne=function(){Z.dispose(),s.delete(h),h.removeEventListener("dispose",ne)};w!==void 0&&w.texture.dispose();const E=h.morphAttributes.position!==void 0,T=h.morphAttributes.normal!==void 0,M=h.morphAttributes.color!==void 0,B=h.morphAttributes.position||[],F=h.morphAttributes.normal||[],I=h.morphAttributes.color||[];let N=0;E===!0&&(N=1),T===!0&&(N=2),M===!0&&(N=3);let G=h.attributes.position.count*N,X=1;G>e.maxTextureSize&&(X=Math.ceil(G/e.maxTextureSize),G=e.maxTextureSize);const J=new Float32Array(G*X*4*y),Z=new d2(J,G,X,y);Z.type=fo,Z.needsUpdate=!0;const H=N*4;for(let ie=0;ie<y;ie++){const be=B[ie],oe=F[ie],Te=I[ie],Ie=G*X*4*ie;for(let ve=0;ve<be.count;ve++){const he=ve*H;E===!0&&(o.fromBufferAttribute(be,ve),J[Ie+he+0]=o.x,J[Ie+he+1]=o.y,J[Ie+he+2]=o.z,J[Ie+he+3]=0),T===!0&&(o.fromBufferAttribute(oe,ve),J[Ie+he+4]=o.x,J[Ie+he+5]=o.y,J[Ie+he+6]=o.z,J[Ie+he+7]=0),M===!0&&(o.fromBufferAttribute(Te,ve),J[Ie+he+8]=o.x,J[Ie+he+9]=o.y,J[Ie+he+10]=o.z,J[Ie+he+11]=Te.itemSize===4?o.w:1)}}w={count:y,texture:Z,size:new je(G,X)},s.set(h,w),h.addEventListener("dispose",ne)}let A=0;for(let E=0;E<b.length;E++)A+=b[E];const O=h.morphTargetsRelative?1:1-A;g.getUniforms().setValue(r,"morphTargetBaseInfluence",O),g.getUniforms().setValue(r,"morphTargetInfluences",b),g.getUniforms().setValue(r,"morphTargetsTexture",w.texture,t),g.getUniforms().setValue(r,"morphTargetsTextureSize",w.size)}else{const C=b===void 0?0:b.length;let y=n[h.id];if(y===void 0||y.length!==C){y=[];for(let T=0;T<C;T++)y[T]=[T,0];n[h.id]=y}for(let T=0;T<C;T++){const M=y[T];M[0]=T,M[1]=b[T]}y.sort(zA);for(let T=0;T<8;T++)T<C&&y[T][1]?(a[T][0]=y[T][0],a[T][1]=y[T][1]):(a[T][0]=Number.MAX_SAFE_INTEGER,a[T][1]=0);a.sort(VA);const w=h.morphAttributes.position,A=h.morphAttributes.normal;let O=0;for(let T=0;T<8;T++){const M=a[T],B=M[0],F=M[1];B!==Number.MAX_SAFE_INTEGER&&F?(w&&h.getAttribute("morphTarget"+T)!==w[B]&&h.setAttribute("morphTarget"+T,w[B]),A&&h.getAttribute("morphNormal"+T)!==A[B]&&h.setAttribute("morphNormal"+T,A[B]),i[T]=F,O+=F):(w&&h.hasAttribute("morphTarget"+T)===!0&&h.deleteAttribute("morphTarget"+T),A&&h.hasAttribute("morphNormal"+T)===!0&&h.deleteAttribute("morphNormal"+T),i[T]=0)}const E=h.morphTargetsRelative?1:1-O;g.getUniforms().setValue(r,"morphTargetBaseInfluence",E),g.getUniforms().setValue(r,"morphTargetInfluences",i)}}return{update:u}}function $A(r,e,t,n){let i=new WeakMap;function s(u){const f=n.render.frame,h=u.geometry,p=e.get(u,h);return i.get(p)!==f&&(e.update(p),i.set(p,f)),u.isInstancedMesh&&(u.hasEventListener("dispose",a)===!1&&u.addEventListener("dispose",a),t.update(u.instanceMatrix,34962),u.instanceColor!==null&&t.update(u.instanceColor,34962)),p}function o(){i=new WeakMap}function a(u){const f=u.target;f.removeEventListener("dispose",a),t.remove(f.instanceMatrix),f.instanceColor!==null&&t.remove(f.instanceColor)}return{update:s,dispose:o}}const w2=new Dr,_2=new d2,S2=new A4,C2=new b2,Lv=[],Dv=[],Ov=new Float32Array(16),Rv=new Float32Array(9),Bv=new Float32Array(4);function ja(r,e,t){const n=r[0];if(n<=0||n>0)return r;const i=e*t;let s=Lv[i];if(s===void 0&&(s=new Float32Array(i),Lv[i]=s),e!==0){n.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,r[o].toArray(s,a)}return s}function Fn(r,e){if(r.length!==e.length)return!1;for(let t=0,n=r.length;t<n;t++)if(r[t]!==e[t])return!1;return!0}function Nn(r,e){for(let t=0,n=e.length;t<n;t++)r[t]=e[t]}function Z0(r,e){let t=Dv[e];t===void 0&&(t=new Int32Array(e),Dv[e]=t);for(let n=0;n!==e;++n)t[n]=r.allocateTextureUnit();return t}function WA(r,e){const t=this.cache;t[0]!==e&&(r.uniform1f(this.addr,e),t[0]=e)}function XA(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Fn(t,e))return;r.uniform2fv(this.addr,e),Nn(t,e)}}function HA(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(r.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Fn(t,e))return;r.uniform3fv(this.addr,e),Nn(t,e)}}function YA(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Fn(t,e))return;r.uniform4fv(this.addr,e),Nn(t,e)}}function qA(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(Fn(t,e))return;r.uniformMatrix2fv(this.addr,!1,e),Nn(t,e)}else{if(Fn(t,n))return;Bv.set(n),r.uniformMatrix2fv(this.addr,!1,Bv),Nn(t,n)}}function ZA(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(Fn(t,e))return;r.uniformMatrix3fv(this.addr,!1,e),Nn(t,e)}else{if(Fn(t,n))return;Rv.set(n),r.uniformMatrix3fv(this.addr,!1,Rv),Nn(t,n)}}function jA(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(Fn(t,e))return;r.uniformMatrix4fv(this.addr,!1,e),Nn(t,e)}else{if(Fn(t,n))return;Ov.set(n),r.uniformMatrix4fv(this.addr,!1,Ov),Nn(t,n)}}function KA(r,e){const t=this.cache;t[0]!==e&&(r.uniform1i(this.addr,e),t[0]=e)}function JA(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Fn(t,e))return;r.uniform2iv(this.addr,e),Nn(t,e)}}function QA(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Fn(t,e))return;r.uniform3iv(this.addr,e),Nn(t,e)}}function eT(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Fn(t,e))return;r.uniform4iv(this.addr,e),Nn(t,e)}}function tT(r,e){const t=this.cache;t[0]!==e&&(r.uniform1ui(this.addr,e),t[0]=e)}function nT(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Fn(t,e))return;r.uniform2uiv(this.addr,e),Nn(t,e)}}function rT(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Fn(t,e))return;r.uniform3uiv(this.addr,e),Nn(t,e)}}function iT(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Fn(t,e))return;r.uniform4uiv(this.addr,e),Nn(t,e)}}function sT(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture2D(e||w2,i)}function oT(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture3D(e||S2,i)}function aT(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTextureCube(e||C2,i)}function lT(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture2DArray(e||_2,i)}function cT(r){switch(r){case 5126:return WA;case 35664:return XA;case 35665:return HA;case 35666:return YA;case 35674:return qA;case 35675:return ZA;case 35676:return jA;case 5124:case 35670:return KA;case 35667:case 35671:return JA;case 35668:case 35672:return QA;case 35669:case 35673:return eT;case 5125:return tT;case 36294:return nT;case 36295:return rT;case 36296:return iT;case 35678:case 36198:case 36298:case 36306:case 35682:return sT;case 35679:case 36299:case 36307:return oT;case 35680:case 36300:case 36308:case 36293:return aT;case 36289:case 36303:case 36311:case 36292:return lT}}function uT(r,e){r.uniform1fv(this.addr,e)}function fT(r,e){const t=ja(e,this.size,2);r.uniform2fv(this.addr,t)}function hT(r,e){const t=ja(e,this.size,3);r.uniform3fv(this.addr,t)}function dT(r,e){const t=ja(e,this.size,4);r.uniform4fv(this.addr,t)}function pT(r,e){const t=ja(e,this.size,4);r.uniformMatrix2fv(this.addr,!1,t)}function mT(r,e){const t=ja(e,this.size,9);r.uniformMatrix3fv(this.addr,!1,t)}function gT(r,e){const t=ja(e,this.size,16);r.uniformMatrix4fv(this.addr,!1,t)}function vT(r,e){r.uniform1iv(this.addr,e)}function xT(r,e){r.uniform2iv(this.addr,e)}function bT(r,e){r.uniform3iv(this.addr,e)}function yT(r,e){r.uniform4iv(this.addr,e)}function wT(r,e){r.uniform1uiv(this.addr,e)}function _T(r,e){r.uniform2uiv(this.addr,e)}function ST(r,e){r.uniform3uiv(this.addr,e)}function CT(r,e){r.uniform4uiv(this.addr,e)}function PT(r,e,t){const n=this.cache,i=e.length,s=Z0(t,i);Fn(n,s)||(r.uniform1iv(this.addr,s),Nn(n,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||w2,s[o])}function MT(r,e,t){const n=this.cache,i=e.length,s=Z0(t,i);Fn(n,s)||(r.uniform1iv(this.addr,s),Nn(n,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||S2,s[o])}function ET(r,e,t){const n=this.cache,i=e.length,s=Z0(t,i);Fn(n,s)||(r.uniform1iv(this.addr,s),Nn(n,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||C2,s[o])}function AT(r,e,t){const n=this.cache,i=e.length,s=Z0(t,i);Fn(n,s)||(r.uniform1iv(this.addr,s),Nn(n,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||_2,s[o])}function TT(r){switch(r){case 5126:return uT;case 35664:return fT;case 35665:return hT;case 35666:return dT;case 35674:return pT;case 35675:return mT;case 35676:return gT;case 5124:case 35670:return vT;case 35667:case 35671:return xT;case 35668:case 35672:return bT;case 35669:case 35673:return yT;case 5125:return wT;case 36294:return _T;case 36295:return ST;case 36296:return CT;case 35678:case 36198:case 36298:case 36306:case 35682:return PT;case 35679:case 36299:case 36307:return MT;case 35680:case 36300:case 36308:case 36293:return ET;case 36289:case 36303:case 36311:case 36292:return AT}}class IT{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=cT(t.type)}}class LT{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=TT(t.type)}}class DT{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,t[a.id],n)}}}const Oh=/(\w+)(\])?(\[|\.)?/g;function Fv(r,e){r.seq.push(e),r.map[e.id]=e}function OT(r,e,t){const n=r.name,i=n.length;for(Oh.lastIndex=0;;){const s=Oh.exec(n),o=Oh.lastIndex;let a=s[1];const u=s[2]==="]",f=s[3];if(u&&(a=a|0),f===void 0||f==="["&&o+2===i){Fv(t,f===void 0?new IT(a,r,e):new LT(a,r,e));break}else{let p=t.map[a];p===void 0&&(p=new DT(a),Fv(t,p)),t=p}}}class n0{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let i=0;i<n;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);OT(s,o,this)}}setValue(e,t,n,i){const s=this.map[t];s!==void 0&&s.setValue(e,n,i)}setOptional(e,t,n){const i=t[n];i!==void 0&&this.setValue(e,n,i)}static upload(e,t,n,i){for(let s=0,o=t.length;s!==o;++s){const a=t[s],u=n[a.id];u.needsUpdate!==!1&&a.setValue(e,u.value,i)}}static seqWithValue(e,t){const n=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&n.push(o)}return n}}function Nv(r,e,t){const n=r.createShader(e);return r.shaderSource(n,t),r.compileShader(n),n}let RT=0;function BT(r,e){const t=r.split(`
`),n=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const a=o+1;n.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return n.join(`
`)}function FT(r){switch(r){case Po:return["Linear","( value )"];case hn:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",r),["Linear","( value )"]}}function kv(r,e,t){const n=r.getShaderParameter(e,35713),i=r.getShaderInfoLog(e).trim();if(n&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+BT(r.getShaderSource(e),o)}else return i}function NT(r,e){const t=FT(e);return"vec4 "+r+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function kT(r,e){let t;switch(e){case t4:t="Linear";break;case n4:t="Reinhard";break;case r4:t="OptimizedCineon";break;case i4:t="ACESFilmic";break;case s4:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+r+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function UT(r){return[r.extensionDerivatives||r.envMapCubeUVHeight||r.bumpMap||r.tangentSpaceNormalMap||r.clearcoatNormalMap||r.flatShading||r.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(r.extensionFragDepth||r.logarithmicDepthBuffer)&&r.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",r.extensionDrawBuffers&&r.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(r.extensionShaderTextureLOD||r.envMap||r.transmission)&&r.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter($l).join(`
`)}function VT(r){const e=[];for(const t in r){const n=r[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function zT(r,e){const t={},n=r.getProgramParameter(e,35721);for(let i=0;i<n;i++){const s=r.getActiveAttrib(e,i),o=s.name;let a=1;s.type===35674&&(a=2),s.type===35675&&(a=3),s.type===35676&&(a=4),t[o]={type:s.type,location:r.getAttribLocation(e,o),locationSize:a}}return t}function $l(r){return r!==""}function Uv(r,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return r.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Vv(r,e){return r.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const GT=/^[ \t]*#include +<([\w\d./]+)>/gm;function jd(r){return r.replace(GT,$T)}function $T(r,e){const t=Lt[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return jd(t)}const WT=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function zv(r){return r.replace(WT,XT)}function XT(r,e,t,n){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function Gv(r){let e="precision "+r.precision+` float;
precision `+r.precision+" int;";return r.precision==="highp"?e+=`
#define HIGH_PRECISION`:r.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:r.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function HT(r){let e="SHADOWMAP_TYPE_BASIC";return r.shadowMapType===i2?e="SHADOWMAP_TYPE_PCF":r.shadowMapType===OP?e="SHADOWMAP_TYPE_PCF_SOFT":r.shadowMapType===Gl&&(e="SHADOWMAP_TYPE_VSM"),e}function YT(r){let e="ENVMAP_TYPE_CUBE";if(r.envMap)switch(r.envMapMode){case Fa:case Na:e="ENVMAP_TYPE_CUBE";break;case Y0:e="ENVMAP_TYPE_CUBE_UV";break}return e}function qT(r){let e="ENVMAP_MODE_REFLECTION";if(r.envMap)switch(r.envMapMode){case Na:e="ENVMAP_MODE_REFRACTION";break}return e}function ZT(r){let e="ENVMAP_BLENDING_NONE";if(r.envMap)switch(r.combine){case Bp:e="ENVMAP_BLENDING_MULTIPLY";break;case QP:e="ENVMAP_BLENDING_MIX";break;case e4:e="ENVMAP_BLENDING_ADD";break}return e}function jT(r){const e=r.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}function KT(r,e,t,n){const i=r.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const u=HT(t),f=YT(t),h=qT(t),p=ZT(t),g=jT(t),b=t.isWebGL2?"":UT(t),C=VT(s),y=i.createProgram();let w,A,O=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(w=[C].filter($l).join(`
`),w.length>0&&(w+=`
`),A=[b,C].filter($l).join(`
`),A.length>0&&(A+=`
`)):(w=[Gv(t),"#define SHADER_NAME "+t.shaderName,C,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+u:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter($l).join(`
`),A=[b,Gv(t),"#define SHADER_NAME "+t.shaderName,C,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.envMap?"#define "+h:"",t.envMap?"#define "+p:"",g?"#define CUBEUV_TEXEL_WIDTH "+g.texelWidth:"",g?"#define CUBEUV_TEXEL_HEIGHT "+g.texelHeight:"",g?"#define CUBEUV_MAX_MIP "+g.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+u:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Ji?"#define TONE_MAPPING":"",t.toneMapping!==Ji?Lt.tonemapping_pars_fragment:"",t.toneMapping!==Ji?kT("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Lt.encodings_pars_fragment,NT("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter($l).join(`
`)),o=jd(o),o=Uv(o,t),o=Vv(o,t),a=jd(a),a=Uv(a,t),a=Vv(a,t),o=zv(o),a=zv(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(O=`#version 300 es
`,w=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+w,A=["#define varying in",t.glslVersion===fv?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===fv?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+A);const E=O+w+o,T=O+A+a,M=Nv(i,35633,E),B=Nv(i,35632,T);if(i.attachShader(y,M),i.attachShader(y,B),t.index0AttributeName!==void 0?i.bindAttribLocation(y,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(y,0,"position"),i.linkProgram(y),r.debug.checkShaderErrors){const N=i.getProgramInfoLog(y).trim(),G=i.getShaderInfoLog(M).trim(),X=i.getShaderInfoLog(B).trim();let J=!0,Z=!0;if(i.getProgramParameter(y,35714)===!1){J=!1;const H=kv(i,M,"vertex"),ne=kv(i,B,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(y,35715)+`

Program Info Log: `+N+`
`+H+`
`+ne)}else N!==""?console.warn("THREE.WebGLProgram: Program Info Log:",N):(G===""||X==="")&&(Z=!1);Z&&(this.diagnostics={runnable:J,programLog:N,vertexShader:{log:G,prefix:w},fragmentShader:{log:X,prefix:A}})}i.deleteShader(M),i.deleteShader(B);let F;this.getUniforms=function(){return F===void 0&&(F=new n0(i,y)),F};let I;return this.getAttributes=function(){return I===void 0&&(I=zT(i,y)),I},this.destroy=function(){n.releaseStatesOfProgram(this),i.deleteProgram(y),this.program=void 0},this.name=t.shaderName,this.id=RT++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=M,this.fragmentShader=B,this}let JT=0;class QT{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new e5(e),t.set(e,n)),n}}class e5{constructor(e){this.id=JT++,this.code=e,this.usedTimes=0}}function t5(r,e,t,n,i,s,o){const a=new Np,u=new QT,f=[],h=i.isWebGL2,p=i.logarithmicDepthBuffer,g=i.vertexTextures;let b=i.precision;const C={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function y(I,N,G,X,J){const Z=X.fog,H=J.geometry,ne=I.isMeshStandardMaterial?X.environment:null,ie=(I.isMeshStandardMaterial?t:e).get(I.envMap||ne),be=ie&&ie.mapping===Y0?ie.image.height:null,oe=C[I.type];I.precision!==null&&(b=i.getMaxPrecision(I.precision),b!==I.precision&&console.warn("THREE.WebGLProgram.getParameters:",I.precision,"not supported, using",b,"instead."));const Te=H.morphAttributes.position||H.morphAttributes.normal||H.morphAttributes.color,Ie=Te!==void 0?Te.length:0;let ve=0;H.morphAttributes.position!==void 0&&(ve=1),H.morphAttributes.normal!==void 0&&(ve=2),H.morphAttributes.color!==void 0&&(ve=3);let he,Be,Ae,$e;if(oe){const ye=pi[oe];he=ye.vertexShader,Be=ye.fragmentShader}else he=I.vertexShader,Be=I.fragmentShader,u.update(I),Ae=u.getVertexShaderID(I),$e=u.getFragmentShaderID(I);const Ee=r.getRenderTarget(),ut=I.alphaTest>0,Se=I.clearcoat>0,we=I.iridescence>0;return{isWebGL2:h,shaderID:oe,shaderName:I.type,vertexShader:he,fragmentShader:Be,defines:I.defines,customVertexShaderID:Ae,customFragmentShaderID:$e,isRawShaderMaterial:I.isRawShaderMaterial===!0,glslVersion:I.glslVersion,precision:b,instancing:J.isInstancedMesh===!0,instancingColor:J.isInstancedMesh===!0&&J.instanceColor!==null,supportsVertexTextures:g,outputEncoding:Ee===null?r.outputEncoding:Ee.isXRRenderTarget===!0?Ee.texture.encoding:Po,map:!!I.map,matcap:!!I.matcap,envMap:!!ie,envMapMode:ie&&ie.mapping,envMapCubeUVHeight:be,lightMap:!!I.lightMap,aoMap:!!I.aoMap,emissiveMap:!!I.emissiveMap,bumpMap:!!I.bumpMap,normalMap:!!I.normalMap,objectSpaceNormalMap:I.normalMapType===C4,tangentSpaceNormalMap:I.normalMapType===Fp,decodeVideoTexture:!!I.map&&I.map.isVideoTexture===!0&&I.map.encoding===hn,clearcoat:Se,clearcoatMap:Se&&!!I.clearcoatMap,clearcoatRoughnessMap:Se&&!!I.clearcoatRoughnessMap,clearcoatNormalMap:Se&&!!I.clearcoatNormalMap,iridescence:we,iridescenceMap:we&&!!I.iridescenceMap,iridescenceThicknessMap:we&&!!I.iridescenceThicknessMap,displacementMap:!!I.displacementMap,roughnessMap:!!I.roughnessMap,metalnessMap:!!I.metalnessMap,specularMap:!!I.specularMap,specularIntensityMap:!!I.specularIntensityMap,specularColorMap:!!I.specularColorMap,opaque:I.transparent===!1&&I.blending===La,alphaMap:!!I.alphaMap,alphaTest:ut,gradientMap:!!I.gradientMap,sheen:I.sheen>0,sheenColorMap:!!I.sheenColorMap,sheenRoughnessMap:!!I.sheenRoughnessMap,transmission:I.transmission>0,transmissionMap:!!I.transmissionMap,thicknessMap:!!I.thicknessMap,combine:I.combine,vertexTangents:!!I.normalMap&&!!H.attributes.tangent,vertexColors:I.vertexColors,vertexAlphas:I.vertexColors===!0&&!!H.attributes.color&&H.attributes.color.itemSize===4,vertexUvs:!!I.map||!!I.bumpMap||!!I.normalMap||!!I.specularMap||!!I.alphaMap||!!I.emissiveMap||!!I.roughnessMap||!!I.metalnessMap||!!I.clearcoatMap||!!I.clearcoatRoughnessMap||!!I.clearcoatNormalMap||!!I.iridescenceMap||!!I.iridescenceThicknessMap||!!I.displacementMap||!!I.transmissionMap||!!I.thicknessMap||!!I.specularIntensityMap||!!I.specularColorMap||!!I.sheenColorMap||!!I.sheenRoughnessMap,uvsVertexOnly:!(I.map||I.bumpMap||I.normalMap||I.specularMap||I.alphaMap||I.emissiveMap||I.roughnessMap||I.metalnessMap||I.clearcoatNormalMap||I.iridescenceMap||I.iridescenceThicknessMap||I.transmission>0||I.transmissionMap||I.thicknessMap||I.specularIntensityMap||I.specularColorMap||I.sheen>0||I.sheenColorMap||I.sheenRoughnessMap)&&!!I.displacementMap,fog:!!Z,useFog:I.fog===!0,fogExp2:Z&&Z.isFogExp2,flatShading:!!I.flatShading,sizeAttenuation:I.sizeAttenuation,logarithmicDepthBuffer:p,skinning:J.isSkinnedMesh===!0,morphTargets:H.morphAttributes.position!==void 0,morphNormals:H.morphAttributes.normal!==void 0,morphColors:H.morphAttributes.color!==void 0,morphTargetsCount:Ie,morphTextureStride:ve,numDirLights:N.directional.length,numPointLights:N.point.length,numSpotLights:N.spot.length,numSpotLightMaps:N.spotLightMap.length,numRectAreaLights:N.rectArea.length,numHemiLights:N.hemi.length,numDirLightShadows:N.directionalShadowMap.length,numPointLightShadows:N.pointShadowMap.length,numSpotLightShadows:N.spotShadowMap.length,numSpotLightShadowsWithMaps:N.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:I.dithering,shadowMapEnabled:r.shadowMap.enabled&&G.length>0,shadowMapType:r.shadowMap.type,toneMapping:I.toneMapped?r.toneMapping:Ji,physicallyCorrectLights:r.physicallyCorrectLights,premultipliedAlpha:I.premultipliedAlpha,doubleSided:I.side===Mc,flipSided:I.side===Lr,useDepthPacking:!!I.depthPacking,depthPacking:I.depthPacking||0,index0AttributeName:I.index0AttributeName,extensionDerivatives:I.extensions&&I.extensions.derivatives,extensionFragDepth:I.extensions&&I.extensions.fragDepth,extensionDrawBuffers:I.extensions&&I.extensions.drawBuffers,extensionShaderTextureLOD:I.extensions&&I.extensions.shaderTextureLOD,rendererExtensionFragDepth:h||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:h||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:h||n.has("EXT_shader_texture_lod"),customProgramCacheKey:I.customProgramCacheKey()}}function w(I){const N=[];if(I.shaderID?N.push(I.shaderID):(N.push(I.customVertexShaderID),N.push(I.customFragmentShaderID)),I.defines!==void 0)for(const G in I.defines)N.push(G),N.push(I.defines[G]);return I.isRawShaderMaterial===!1&&(A(N,I),O(N,I),N.push(r.outputEncoding)),N.push(I.customProgramCacheKey),N.join()}function A(I,N){I.push(N.precision),I.push(N.outputEncoding),I.push(N.envMapMode),I.push(N.envMapCubeUVHeight),I.push(N.combine),I.push(N.vertexUvs),I.push(N.fogExp2),I.push(N.sizeAttenuation),I.push(N.morphTargetsCount),I.push(N.morphAttributeCount),I.push(N.numDirLights),I.push(N.numPointLights),I.push(N.numSpotLights),I.push(N.numSpotLightMaps),I.push(N.numHemiLights),I.push(N.numRectAreaLights),I.push(N.numDirLightShadows),I.push(N.numPointLightShadows),I.push(N.numSpotLightShadows),I.push(N.numSpotLightShadowsWithMaps),I.push(N.shadowMapType),I.push(N.toneMapping),I.push(N.numClippingPlanes),I.push(N.numClipIntersection),I.push(N.depthPacking)}function O(I,N){a.disableAll(),N.isWebGL2&&a.enable(0),N.supportsVertexTextures&&a.enable(1),N.instancing&&a.enable(2),N.instancingColor&&a.enable(3),N.map&&a.enable(4),N.matcap&&a.enable(5),N.envMap&&a.enable(6),N.lightMap&&a.enable(7),N.aoMap&&a.enable(8),N.emissiveMap&&a.enable(9),N.bumpMap&&a.enable(10),N.normalMap&&a.enable(11),N.objectSpaceNormalMap&&a.enable(12),N.tangentSpaceNormalMap&&a.enable(13),N.clearcoat&&a.enable(14),N.clearcoatMap&&a.enable(15),N.clearcoatRoughnessMap&&a.enable(16),N.clearcoatNormalMap&&a.enable(17),N.iridescence&&a.enable(18),N.iridescenceMap&&a.enable(19),N.iridescenceThicknessMap&&a.enable(20),N.displacementMap&&a.enable(21),N.specularMap&&a.enable(22),N.roughnessMap&&a.enable(23),N.metalnessMap&&a.enable(24),N.gradientMap&&a.enable(25),N.alphaMap&&a.enable(26),N.alphaTest&&a.enable(27),N.vertexColors&&a.enable(28),N.vertexAlphas&&a.enable(29),N.vertexUvs&&a.enable(30),N.vertexTangents&&a.enable(31),N.uvsVertexOnly&&a.enable(32),I.push(a.mask),a.disableAll(),N.fog&&a.enable(0),N.useFog&&a.enable(1),N.flatShading&&a.enable(2),N.logarithmicDepthBuffer&&a.enable(3),N.skinning&&a.enable(4),N.morphTargets&&a.enable(5),N.morphNormals&&a.enable(6),N.morphColors&&a.enable(7),N.premultipliedAlpha&&a.enable(8),N.shadowMapEnabled&&a.enable(9),N.physicallyCorrectLights&&a.enable(10),N.doubleSided&&a.enable(11),N.flipSided&&a.enable(12),N.useDepthPacking&&a.enable(13),N.dithering&&a.enable(14),N.specularIntensityMap&&a.enable(15),N.specularColorMap&&a.enable(16),N.transmission&&a.enable(17),N.transmissionMap&&a.enable(18),N.thicknessMap&&a.enable(19),N.sheen&&a.enable(20),N.sheenColorMap&&a.enable(21),N.sheenRoughnessMap&&a.enable(22),N.decodeVideoTexture&&a.enable(23),N.opaque&&a.enable(24),I.push(a.mask)}function E(I){const N=C[I.type];let G;if(N){const X=pi[N];G=V4.clone(X.uniforms)}else G=I.uniforms;return G}function T(I,N){let G;for(let X=0,J=f.length;X<J;X++){const Z=f[X];if(Z.cacheKey===N){G=Z,++G.usedTimes;break}}return G===void 0&&(G=new KT(r,N,I,s),f.push(G)),G}function M(I){if(--I.usedTimes===0){const N=f.indexOf(I);f[N]=f[f.length-1],f.pop(),I.destroy()}}function B(I){u.remove(I)}function F(){u.dispose()}return{getParameters:y,getProgramCacheKey:w,getUniforms:E,acquireProgram:T,releaseProgram:M,releaseShaderCache:B,programs:f,dispose:F}}function n5(){let r=new WeakMap;function e(s){let o=r.get(s);return o===void 0&&(o={},r.set(s,o)),o}function t(s){r.delete(s)}function n(s,o,a){r.get(s)[o]=a}function i(){r=new WeakMap}return{get:e,remove:t,update:n,dispose:i}}function r5(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.material.id!==e.material.id?r.material.id-e.material.id:r.z!==e.z?r.z-e.z:r.id-e.id}function $v(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.z!==e.z?e.z-r.z:r.id-e.id}function Wv(){const r=[];let e=0;const t=[],n=[],i=[];function s(){e=0,t.length=0,n.length=0,i.length=0}function o(p,g,b,C,y,w){let A=r[e];return A===void 0?(A={id:p.id,object:p,geometry:g,material:b,groupOrder:C,renderOrder:p.renderOrder,z:y,group:w},r[e]=A):(A.id=p.id,A.object=p,A.geometry=g,A.material=b,A.groupOrder=C,A.renderOrder=p.renderOrder,A.z=y,A.group=w),e++,A}function a(p,g,b,C,y,w){const A=o(p,g,b,C,y,w);b.transmission>0?n.push(A):b.transparent===!0?i.push(A):t.push(A)}function u(p,g,b,C,y,w){const A=o(p,g,b,C,y,w);b.transmission>0?n.unshift(A):b.transparent===!0?i.unshift(A):t.unshift(A)}function f(p,g){t.length>1&&t.sort(p||r5),n.length>1&&n.sort(g||$v),i.length>1&&i.sort(g||$v)}function h(){for(let p=e,g=r.length;p<g;p++){const b=r[p];if(b.id===null)break;b.id=null,b.object=null,b.geometry=null,b.material=null,b.group=null}}return{opaque:t,transmissive:n,transparent:i,init:s,push:a,unshift:u,finish:h,sort:f}}function i5(){let r=new WeakMap;function e(n,i){const s=r.get(n);let o;return s===void 0?(o=new Wv,r.set(n,[o])):i>=s.length?(o=new Wv,s.push(o)):o=s[i],o}function t(){r=new WeakMap}return{get:e,dispose:t}}function s5(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new K,color:new tn};break;case"SpotLight":t={position:new K,direction:new K,color:new tn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new K,color:new tn,distance:0,decay:0};break;case"HemisphereLight":t={direction:new K,skyColor:new tn,groundColor:new tn};break;case"RectAreaLight":t={color:new tn,position:new K,halfWidth:new K,halfHeight:new K};break}return r[e.id]=t,t}}}function o5(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new je};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new je};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new je,shadowCameraNear:1,shadowCameraFar:1e3};break}return r[e.id]=t,t}}}let a5=0;function l5(r,e){return(e.castShadow?2:0)-(r.castShadow?2:0)+(e.map?1:0)-(r.map?1:0)}function c5(r,e){const t=new s5,n=o5(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let h=0;h<9;h++)i.probe.push(new K);const s=new K,o=new Gt,a=new Gt;function u(h,p){let g=0,b=0,C=0;for(let X=0;X<9;X++)i.probe[X].set(0,0,0);let y=0,w=0,A=0,O=0,E=0,T=0,M=0,B=0,F=0,I=0;h.sort(l5);const N=p!==!0?Math.PI:1;for(let X=0,J=h.length;X<J;X++){const Z=h[X],H=Z.color,ne=Z.intensity,ie=Z.distance,be=Z.shadow&&Z.shadow.map?Z.shadow.map.texture:null;if(Z.isAmbientLight)g+=H.r*ne*N,b+=H.g*ne*N,C+=H.b*ne*N;else if(Z.isLightProbe)for(let oe=0;oe<9;oe++)i.probe[oe].addScaledVector(Z.sh.coefficients[oe],ne);else if(Z.isDirectionalLight){const oe=t.get(Z);if(oe.color.copy(Z.color).multiplyScalar(Z.intensity*N),Z.castShadow){const Te=Z.shadow,Ie=n.get(Z);Ie.shadowBias=Te.bias,Ie.shadowNormalBias=Te.normalBias,Ie.shadowRadius=Te.radius,Ie.shadowMapSize=Te.mapSize,i.directionalShadow[y]=Ie,i.directionalShadowMap[y]=be,i.directionalShadowMatrix[y]=Z.shadow.matrix,T++}i.directional[y]=oe,y++}else if(Z.isSpotLight){const oe=t.get(Z);oe.position.setFromMatrixPosition(Z.matrixWorld),oe.color.copy(H).multiplyScalar(ne*N),oe.distance=ie,oe.coneCos=Math.cos(Z.angle),oe.penumbraCos=Math.cos(Z.angle*(1-Z.penumbra)),oe.decay=Z.decay,i.spot[A]=oe;const Te=Z.shadow;if(Z.map&&(i.spotLightMap[F]=Z.map,F++,Te.updateMatrices(Z),Z.castShadow&&I++),i.spotLightMatrix[A]=Te.matrix,Z.castShadow){const Ie=n.get(Z);Ie.shadowBias=Te.bias,Ie.shadowNormalBias=Te.normalBias,Ie.shadowRadius=Te.radius,Ie.shadowMapSize=Te.mapSize,i.spotShadow[A]=Ie,i.spotShadowMap[A]=be,B++}A++}else if(Z.isRectAreaLight){const oe=t.get(Z);oe.color.copy(H).multiplyScalar(ne),oe.halfWidth.set(Z.width*.5,0,0),oe.halfHeight.set(0,Z.height*.5,0),i.rectArea[O]=oe,O++}else if(Z.isPointLight){const oe=t.get(Z);if(oe.color.copy(Z.color).multiplyScalar(Z.intensity*N),oe.distance=Z.distance,oe.decay=Z.decay,Z.castShadow){const Te=Z.shadow,Ie=n.get(Z);Ie.shadowBias=Te.bias,Ie.shadowNormalBias=Te.normalBias,Ie.shadowRadius=Te.radius,Ie.shadowMapSize=Te.mapSize,Ie.shadowCameraNear=Te.camera.near,Ie.shadowCameraFar=Te.camera.far,i.pointShadow[w]=Ie,i.pointShadowMap[w]=be,i.pointShadowMatrix[w]=Z.shadow.matrix,M++}i.point[w]=oe,w++}else if(Z.isHemisphereLight){const oe=t.get(Z);oe.skyColor.copy(Z.color).multiplyScalar(ne*N),oe.groundColor.copy(Z.groundColor).multiplyScalar(ne*N),i.hemi[E]=oe,E++}}O>0&&(e.isWebGL2||r.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=tt.LTC_FLOAT_1,i.rectAreaLTC2=tt.LTC_FLOAT_2):r.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=tt.LTC_HALF_1,i.rectAreaLTC2=tt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=g,i.ambient[1]=b,i.ambient[2]=C;const G=i.hash;(G.directionalLength!==y||G.pointLength!==w||G.spotLength!==A||G.rectAreaLength!==O||G.hemiLength!==E||G.numDirectionalShadows!==T||G.numPointShadows!==M||G.numSpotShadows!==B||G.numSpotMaps!==F)&&(i.directional.length=y,i.spot.length=A,i.rectArea.length=O,i.point.length=w,i.hemi.length=E,i.directionalShadow.length=T,i.directionalShadowMap.length=T,i.pointShadow.length=M,i.pointShadowMap.length=M,i.spotShadow.length=B,i.spotShadowMap.length=B,i.directionalShadowMatrix.length=T,i.pointShadowMatrix.length=M,i.spotLightMatrix.length=B+F-I,i.spotLightMap.length=F,i.numSpotLightShadowsWithMaps=I,G.directionalLength=y,G.pointLength=w,G.spotLength=A,G.rectAreaLength=O,G.hemiLength=E,G.numDirectionalShadows=T,G.numPointShadows=M,G.numSpotShadows=B,G.numSpotMaps=F,i.version=a5++)}function f(h,p){let g=0,b=0,C=0,y=0,w=0;const A=p.matrixWorldInverse;for(let O=0,E=h.length;O<E;O++){const T=h[O];if(T.isDirectionalLight){const M=i.directional[g];M.direction.setFromMatrixPosition(T.matrixWorld),s.setFromMatrixPosition(T.target.matrixWorld),M.direction.sub(s),M.direction.transformDirection(A),g++}else if(T.isSpotLight){const M=i.spot[C];M.position.setFromMatrixPosition(T.matrixWorld),M.position.applyMatrix4(A),M.direction.setFromMatrixPosition(T.matrixWorld),s.setFromMatrixPosition(T.target.matrixWorld),M.direction.sub(s),M.direction.transformDirection(A),C++}else if(T.isRectAreaLight){const M=i.rectArea[y];M.position.setFromMatrixPosition(T.matrixWorld),M.position.applyMatrix4(A),a.identity(),o.copy(T.matrixWorld),o.premultiply(A),a.extractRotation(o),M.halfWidth.set(T.width*.5,0,0),M.halfHeight.set(0,T.height*.5,0),M.halfWidth.applyMatrix4(a),M.halfHeight.applyMatrix4(a),y++}else if(T.isPointLight){const M=i.point[b];M.position.setFromMatrixPosition(T.matrixWorld),M.position.applyMatrix4(A),b++}else if(T.isHemisphereLight){const M=i.hemi[w];M.direction.setFromMatrixPosition(T.matrixWorld),M.direction.transformDirection(A),w++}}}return{setup:u,setupView:f,state:i}}function Xv(r,e){const t=new c5(r,e),n=[],i=[];function s(){n.length=0,i.length=0}function o(p){n.push(p)}function a(p){i.push(p)}function u(p){t.setup(n,p)}function f(p){t.setupView(n,p)}return{init:s,state:{lightsArray:n,shadowsArray:i,lights:t},setupLights:u,setupLightsView:f,pushLight:o,pushShadow:a}}function u5(r,e){let t=new WeakMap;function n(s,o=0){const a=t.get(s);let u;return a===void 0?(u=new Xv(r,e),t.set(s,[u])):o>=a.length?(u=new Xv(r,e),a.push(u)):u=a[o],u}function i(){t=new WeakMap}return{get:n,dispose:i}}class f5 extends Oo{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=_4,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class h5 extends Oo{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new K,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const d5=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,p5=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function m5(r,e,t){let n=new kp;const i=new je,s=new je,o=new Zt,a=new f5({depthPacking:S4}),u=new h5,f={},h=t.maxTextureSize,p={0:Lr,1:Qi,2:Mc},g=new Ao({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new je},radius:{value:4}},vertexShader:d5,fragmentShader:p5}),b=g.clone();b.defines.HORIZONTAL_PASS=1;const C=new Rr;C.setAttribute("position",new jn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const y=new ji(C,g),w=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=i2,this.render=function(T,M,B){if(w.enabled===!1||w.autoUpdate===!1&&w.needsUpdate===!1||T.length===0)return;const F=r.getRenderTarget(),I=r.getActiveCubeFace(),N=r.getActiveMipmapLevel(),G=r.state;G.setBlending(Fs),G.buffers.color.setClear(1,1,1,1),G.buffers.depth.setTest(!0),G.setScissorTest(!1);for(let X=0,J=T.length;X<J;X++){const Z=T[X],H=Z.shadow;if(H===void 0){console.warn("THREE.WebGLShadowMap:",Z,"has no shadow.");continue}if(H.autoUpdate===!1&&H.needsUpdate===!1)continue;i.copy(H.mapSize);const ne=H.getFrameExtents();if(i.multiply(ne),s.copy(H.mapSize),(i.x>h||i.y>h)&&(i.x>h&&(s.x=Math.floor(h/ne.x),i.x=s.x*ne.x,H.mapSize.x=s.x),i.y>h&&(s.y=Math.floor(h/ne.y),i.y=s.y*ne.y,H.mapSize.y=s.y)),H.map===null){const be=this.type!==Gl?{minFilter:hr,magFilter:hr}:{};H.map=new Mo(i.x,i.y,be),H.map.texture.name=Z.name+".shadowMap",H.camera.updateProjectionMatrix()}r.setRenderTarget(H.map),r.clear();const ie=H.getViewportCount();for(let be=0;be<ie;be++){const oe=H.getViewport(be);o.set(s.x*oe.x,s.y*oe.y,s.x*oe.z,s.y*oe.w),G.viewport(o),H.updateMatrices(Z,be),n=H.getFrustum(),E(M,B,H.camera,Z,this.type)}H.isPointLightShadow!==!0&&this.type===Gl&&A(H,B),H.needsUpdate=!1}w.needsUpdate=!1,r.setRenderTarget(F,I,N)};function A(T,M){const B=e.update(y);g.defines.VSM_SAMPLES!==T.blurSamples&&(g.defines.VSM_SAMPLES=T.blurSamples,b.defines.VSM_SAMPLES=T.blurSamples,g.needsUpdate=!0,b.needsUpdate=!0),T.mapPass===null&&(T.mapPass=new Mo(i.x,i.y)),g.uniforms.shadow_pass.value=T.map.texture,g.uniforms.resolution.value=T.mapSize,g.uniforms.radius.value=T.radius,r.setRenderTarget(T.mapPass),r.clear(),r.renderBufferDirect(M,null,B,g,y,null),b.uniforms.shadow_pass.value=T.mapPass.texture,b.uniforms.resolution.value=T.mapSize,b.uniforms.radius.value=T.radius,r.setRenderTarget(T.map),r.clear(),r.renderBufferDirect(M,null,B,b,y,null)}function O(T,M,B,F,I,N){let G=null;const X=B.isPointLight===!0?T.customDistanceMaterial:T.customDepthMaterial;if(X!==void 0)G=X;else if(G=B.isPointLight===!0?u:a,r.localClippingEnabled&&M.clipShadows===!0&&Array.isArray(M.clippingPlanes)&&M.clippingPlanes.length!==0||M.displacementMap&&M.displacementScale!==0||M.alphaMap&&M.alphaTest>0||M.map&&M.alphaTest>0){const J=G.uuid,Z=M.uuid;let H=f[J];H===void 0&&(H={},f[J]=H);let ne=H[Z];ne===void 0&&(ne=G.clone(),H[Z]=ne),G=ne}return G.visible=M.visible,G.wireframe=M.wireframe,N===Gl?G.side=M.shadowSide!==null?M.shadowSide:M.side:G.side=M.shadowSide!==null?M.shadowSide:p[M.side],G.alphaMap=M.alphaMap,G.alphaTest=M.alphaTest,G.map=M.map,G.clipShadows=M.clipShadows,G.clippingPlanes=M.clippingPlanes,G.clipIntersection=M.clipIntersection,G.displacementMap=M.displacementMap,G.displacementScale=M.displacementScale,G.displacementBias=M.displacementBias,G.wireframeLinewidth=M.wireframeLinewidth,G.linewidth=M.linewidth,B.isPointLight===!0&&G.isMeshDistanceMaterial===!0&&(G.referencePosition.setFromMatrixPosition(B.matrixWorld),G.nearDistance=F,G.farDistance=I),G}function E(T,M,B,F,I){if(T.visible===!1)return;if(T.layers.test(M.layers)&&(T.isMesh||T.isLine||T.isPoints)&&(T.castShadow||T.receiveShadow&&I===Gl)&&(!T.frustumCulled||n.intersectsObject(T))){T.modelViewMatrix.multiplyMatrices(B.matrixWorldInverse,T.matrixWorld);const X=e.update(T),J=T.material;if(Array.isArray(J)){const Z=X.groups;for(let H=0,ne=Z.length;H<ne;H++){const ie=Z[H],be=J[ie.materialIndex];if(be&&be.visible){const oe=O(T,be,F,B.near,B.far,I);r.renderBufferDirect(B,null,X,oe,T,ie)}}}else if(J.visible){const Z=O(T,J,F,B.near,B.far,I);r.renderBufferDirect(B,null,X,Z,T,null)}}const G=T.children;for(let X=0,J=G.length;X<J;X++)E(G[X],M,B,F,I)}}function g5(r,e,t){const n=t.isWebGL2;function i(){let ae=!1;const De=new Zt;let He=null;const nt=new Zt(0,0,0,0);return{setMask:function(lt){He!==lt&&!ae&&(r.colorMask(lt,lt,lt,lt),He=lt)},setLocked:function(lt){ae=lt},setClear:function(lt,Ft,an,ln,$n){$n===!0&&(lt*=ln,Ft*=ln,an*=ln),De.set(lt,Ft,an,ln),nt.equals(De)===!1&&(r.clearColor(lt,Ft,an,ln),nt.copy(De))},reset:function(){ae=!1,He=null,nt.set(-1,0,0,0)}}}function s(){let ae=!1,De=null,He=null,nt=null;return{setTest:function(lt){lt?ut(2929):Se(2929)},setMask:function(lt){De!==lt&&!ae&&(r.depthMask(lt),De=lt)},setFunc:function(lt){if(He!==lt){switch(lt){case HP:r.depthFunc(512);break;case YP:r.depthFunc(519);break;case qP:r.depthFunc(513);break;case $d:r.depthFunc(515);break;case ZP:r.depthFunc(514);break;case jP:r.depthFunc(518);break;case KP:r.depthFunc(516);break;case JP:r.depthFunc(517);break;default:r.depthFunc(515)}He=lt}},setLocked:function(lt){ae=lt},setClear:function(lt){nt!==lt&&(r.clearDepth(lt),nt=lt)},reset:function(){ae=!1,De=null,He=null,nt=null}}}function o(){let ae=!1,De=null,He=null,nt=null,lt=null,Ft=null,an=null,ln=null,$n=null;return{setTest:function(At){ae||(At?ut(2960):Se(2960))},setMask:function(At){De!==At&&!ae&&(r.stencilMask(At),De=At)},setFunc:function(At,Un,sn){(He!==At||nt!==Un||lt!==sn)&&(r.stencilFunc(At,Un,sn),He=At,nt=Un,lt=sn)},setOp:function(At,Un,sn){(Ft!==At||an!==Un||ln!==sn)&&(r.stencilOp(At,Un,sn),Ft=At,an=Un,ln=sn)},setLocked:function(At){ae=At},setClear:function(At){$n!==At&&(r.clearStencil(At),$n=At)},reset:function(){ae=!1,De=null,He=null,nt=null,lt=null,Ft=null,an=null,ln=null,$n=null}}}const a=new i,u=new s,f=new o,h=new WeakMap,p=new WeakMap;let g={},b={},C=new WeakMap,y=[],w=null,A=!1,O=null,E=null,T=null,M=null,B=null,F=null,I=null,N=!1,G=null,X=null,J=null,Z=null,H=null;const ne=r.getParameter(35661);let ie=!1,be=0;const oe=r.getParameter(7938);oe.indexOf("WebGL")!==-1?(be=parseFloat(/^WebGL (\d)/.exec(oe)[1]),ie=be>=1):oe.indexOf("OpenGL ES")!==-1&&(be=parseFloat(/^OpenGL ES (\d)/.exec(oe)[1]),ie=be>=2);let Te=null,Ie={};const ve=r.getParameter(3088),he=r.getParameter(2978),Be=new Zt().fromArray(ve),Ae=new Zt().fromArray(he);function $e(ae,De,He){const nt=new Uint8Array(4),lt=r.createTexture();r.bindTexture(ae,lt),r.texParameteri(ae,10241,9728),r.texParameteri(ae,10240,9728);for(let Ft=0;Ft<He;Ft++)r.texImage2D(De+Ft,0,6408,1,1,0,6408,5121,nt);return lt}const Ee={};Ee[3553]=$e(3553,3553,1),Ee[34067]=$e(34067,34069,6),a.setClear(0,0,0,1),u.setClear(1),f.setClear(0),ut(2929),u.setFunc($d),Le(!1),ze(Fg),ut(2884),Me(Fs);function ut(ae){g[ae]!==!0&&(r.enable(ae),g[ae]=!0)}function Se(ae){g[ae]!==!1&&(r.disable(ae),g[ae]=!1)}function we(ae,De){return b[ae]!==De?(r.bindFramebuffer(ae,De),b[ae]=De,n&&(ae===36009&&(b[36160]=De),ae===36160&&(b[36009]=De)),!0):!1}function de(ae,De){let He=y,nt=!1;if(ae)if(He=C.get(De),He===void 0&&(He=[],C.set(De,He)),ae.isWebGLMultipleRenderTargets){const lt=ae.texture;if(He.length!==lt.length||He[0]!==36064){for(let Ft=0,an=lt.length;Ft<an;Ft++)He[Ft]=36064+Ft;He.length=lt.length,nt=!0}}else He[0]!==36064&&(He[0]=36064,nt=!0);else He[0]!==1029&&(He[0]=1029,nt=!0);nt&&(t.isWebGL2?r.drawBuffers(He):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(He))}function ye(ae){return w!==ae?(r.useProgram(ae),w=ae,!0):!1}const ue={[wa]:32774,[BP]:32778,[FP]:32779};if(n)ue[Vg]=32775,ue[zg]=32776;else{const ae=e.get("EXT_blend_minmax");ae!==null&&(ue[Vg]=ae.MIN_EXT,ue[zg]=ae.MAX_EXT)}const pe={[NP]:0,[kP]:1,[UP]:768,[s2]:770,[XP]:776,[$P]:774,[zP]:772,[VP]:769,[o2]:771,[WP]:775,[GP]:773};function Me(ae,De,He,nt,lt,Ft,an,ln){if(ae===Fs){A===!0&&(Se(3042),A=!1);return}if(A===!1&&(ut(3042),A=!0),ae!==RP){if(ae!==O||ln!==N){if((E!==wa||B!==wa)&&(r.blendEquation(32774),E=wa,B=wa),ln)switch(ae){case La:r.blendFuncSeparate(1,771,1,771);break;case Ng:r.blendFunc(1,1);break;case kg:r.blendFuncSeparate(0,769,0,1);break;case Ug:r.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",ae);break}else switch(ae){case La:r.blendFuncSeparate(770,771,1,771);break;case Ng:r.blendFunc(770,1);break;case kg:r.blendFuncSeparate(0,769,0,1);break;case Ug:r.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",ae);break}T=null,M=null,F=null,I=null,O=ae,N=ln}return}lt=lt||De,Ft=Ft||He,an=an||nt,(De!==E||lt!==B)&&(r.blendEquationSeparate(ue[De],ue[lt]),E=De,B=lt),(He!==T||nt!==M||Ft!==F||an!==I)&&(r.blendFuncSeparate(pe[He],pe[nt],pe[Ft],pe[an]),T=He,M=nt,F=Ft,I=an),O=ae,N=!1}function Oe(ae,De){ae.side===Mc?Se(2884):ut(2884);let He=ae.side===Lr;De&&(He=!He),Le(He),ae.blending===La&&ae.transparent===!1?Me(Fs):Me(ae.blending,ae.blendEquation,ae.blendSrc,ae.blendDst,ae.blendEquationAlpha,ae.blendSrcAlpha,ae.blendDstAlpha,ae.premultipliedAlpha),u.setFunc(ae.depthFunc),u.setTest(ae.depthTest),u.setMask(ae.depthWrite),a.setMask(ae.colorWrite);const nt=ae.stencilWrite;f.setTest(nt),nt&&(f.setMask(ae.stencilWriteMask),f.setFunc(ae.stencilFunc,ae.stencilRef,ae.stencilFuncMask),f.setOp(ae.stencilFail,ae.stencilZFail,ae.stencilZPass)),qe(ae.polygonOffset,ae.polygonOffsetFactor,ae.polygonOffsetUnits),ae.alphaToCoverage===!0?ut(32926):Se(32926)}function Le(ae){G!==ae&&(ae?r.frontFace(2304):r.frontFace(2305),G=ae)}function ze(ae){ae!==LP?(ut(2884),ae!==X&&(ae===Fg?r.cullFace(1029):ae===DP?r.cullFace(1028):r.cullFace(1032))):Se(2884),X=ae}function Fe(ae){ae!==J&&(ie&&r.lineWidth(ae),J=ae)}function qe(ae,De,He){ae?(ut(32823),(Z!==De||H!==He)&&(r.polygonOffset(De,He),Z=De,H=He)):Se(32823)}function pt(ae){ae?ut(3089):Se(3089)}function ct(ae){ae===void 0&&(ae=33984+ne-1),Te!==ae&&(r.activeTexture(ae),Te=ae)}function Y(ae,De,He){He===void 0&&(Te===null?He=33984+ne-1:He=Te);let nt=Ie[He];nt===void 0&&(nt={type:void 0,texture:void 0},Ie[He]=nt),(nt.type!==ae||nt.texture!==De)&&(Te!==He&&(r.activeTexture(He),Te=He),r.bindTexture(ae,De||Ee[ae]),nt.type=ae,nt.texture=De)}function W(){const ae=Ie[Te];ae!==void 0&&ae.type!==void 0&&(r.bindTexture(ae.type,null),ae.type=void 0,ae.texture=void 0)}function me(){try{r.compressedTexImage2D.apply(r,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function Ne(){try{r.compressedTexImage3D.apply(r,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function We(){try{r.texSubImage2D.apply(r,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function k(){try{r.texSubImage3D.apply(r,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function L(){try{r.compressedTexSubImage2D.apply(r,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function P(){try{r.compressedTexSubImage3D.apply(r,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function U(){try{r.texStorage2D.apply(r,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function j(){try{r.texStorage3D.apply(r,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function re(){try{r.texImage2D.apply(r,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function se(){try{r.texImage3D.apply(r,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function Ve(ae){Be.equals(ae)===!1&&(r.scissor(ae.x,ae.y,ae.z,ae.w),Be.copy(ae))}function Ye(ae){Ae.equals(ae)===!1&&(r.viewport(ae.x,ae.y,ae.z,ae.w),Ae.copy(ae))}function it(ae,De){let He=p.get(De);He===void 0&&(He=new WeakMap,p.set(De,He));let nt=He.get(ae);nt===void 0&&(nt=r.getUniformBlockIndex(De,ae.name),He.set(ae,nt))}function st(ae,De){const nt=p.get(De).get(ae);h.get(De)!==nt&&(r.uniformBlockBinding(De,nt,ae.__bindingPointIndex),h.set(De,nt))}function ot(){r.disable(3042),r.disable(2884),r.disable(2929),r.disable(32823),r.disable(3089),r.disable(2960),r.disable(32926),r.blendEquation(32774),r.blendFunc(1,0),r.blendFuncSeparate(1,0,1,0),r.colorMask(!0,!0,!0,!0),r.clearColor(0,0,0,0),r.depthMask(!0),r.depthFunc(513),r.clearDepth(1),r.stencilMask(4294967295),r.stencilFunc(519,0,4294967295),r.stencilOp(7680,7680,7680),r.clearStencil(0),r.cullFace(1029),r.frontFace(2305),r.polygonOffset(0,0),r.activeTexture(33984),r.bindFramebuffer(36160,null),n===!0&&(r.bindFramebuffer(36009,null),r.bindFramebuffer(36008,null)),r.useProgram(null),r.lineWidth(1),r.scissor(0,0,r.canvas.width,r.canvas.height),r.viewport(0,0,r.canvas.width,r.canvas.height),g={},Te=null,Ie={},b={},C=new WeakMap,y=[],w=null,A=!1,O=null,E=null,T=null,M=null,B=null,F=null,I=null,N=!1,G=null,X=null,J=null,Z=null,H=null,Be.set(0,0,r.canvas.width,r.canvas.height),Ae.set(0,0,r.canvas.width,r.canvas.height),a.reset(),u.reset(),f.reset()}return{buffers:{color:a,depth:u,stencil:f},enable:ut,disable:Se,bindFramebuffer:we,drawBuffers:de,useProgram:ye,setBlending:Me,setMaterial:Oe,setFlipSided:Le,setCullFace:ze,setLineWidth:Fe,setPolygonOffset:qe,setScissorTest:pt,activeTexture:ct,bindTexture:Y,unbindTexture:W,compressedTexImage2D:me,compressedTexImage3D:Ne,texImage2D:re,texImage3D:se,updateUBOMapping:it,uniformBlockBinding:st,texStorage2D:U,texStorage3D:j,texSubImage2D:We,texSubImage3D:k,compressedTexSubImage2D:L,compressedTexSubImage3D:P,scissor:Ve,viewport:Ye,reset:ot}}function v5(r,e,t,n,i,s,o){const a=i.isWebGL2,u=i.maxTextures,f=i.maxCubemapSize,h=i.maxTextureSize,p=i.maxSamples,g=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,b=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),C=new WeakMap;let y;const w=new WeakMap;let A=!1;try{A=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function O(Y,W){return A?new OffscreenCanvas(Y,W):b0("canvas")}function E(Y,W,me,Ne){let We=1;if((Y.width>Ne||Y.height>Ne)&&(We=Ne/Math.max(Y.width,Y.height)),We<1||W===!0)if(typeof HTMLImageElement<"u"&&Y instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Y instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Y instanceof ImageBitmap){const k=W?Zd:Math.floor,L=k(We*Y.width),P=k(We*Y.height);y===void 0&&(y=O(L,P));const U=me?O(L,P):y;return U.width=L,U.height=P,U.getContext("2d").drawImage(Y,0,0,L,P),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Y.width+"x"+Y.height+") to ("+L+"x"+P+")."),U}else return"data"in Y&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Y.width+"x"+Y.height+")."),Y;return Y}function T(Y){return dv(Y.width)&&dv(Y.height)}function M(Y){return a?!1:Y.wrapS!==ei||Y.wrapT!==ei||Y.minFilter!==hr&&Y.minFilter!==Gr}function B(Y,W){return Y.generateMipmaps&&W&&Y.minFilter!==hr&&Y.minFilter!==Gr}function F(Y){r.generateMipmap(Y)}function I(Y,W,me,Ne,We=!1){if(a===!1)return W;if(Y!==null){if(r[Y]!==void 0)return r[Y];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Y+"'")}let k=W;return W===6403&&(me===5126&&(k=33326),me===5131&&(k=33325),me===5121&&(k=33321)),W===33319&&(me===5126&&(k=33328),me===5131&&(k=33327),me===5121&&(k=33323)),W===6408&&(me===5126&&(k=34836),me===5131&&(k=34842),me===5121&&(k=Ne===hn&&We===!1?35907:32856),me===32819&&(k=32854),me===32820&&(k=32855)),(k===33325||k===33326||k===33327||k===33328||k===34842||k===34836)&&e.get("EXT_color_buffer_float"),k}function N(Y,W,me){return B(Y,me)===!0||Y.isFramebufferTexture&&Y.minFilter!==hr&&Y.minFilter!==Gr?Math.log2(Math.max(W.width,W.height))+1:Y.mipmaps!==void 0&&Y.mipmaps.length>0?Y.mipmaps.length:Y.isCompressedTexture&&Array.isArray(Y.image)?W.mipmaps.length:1}function G(Y){return Y===hr||Y===Gg||Y===rh?9728:9729}function X(Y){const W=Y.target;W.removeEventListener("dispose",X),Z(W),W.isVideoTexture&&C.delete(W)}function J(Y){const W=Y.target;W.removeEventListener("dispose",J),ne(W)}function Z(Y){const W=n.get(Y);if(W.__webglInit===void 0)return;const me=Y.source,Ne=w.get(me);if(Ne){const We=Ne[W.__cacheKey];We.usedTimes--,We.usedTimes===0&&H(Y),Object.keys(Ne).length===0&&w.delete(me)}n.remove(Y)}function H(Y){const W=n.get(Y);r.deleteTexture(W.__webglTexture);const me=Y.source,Ne=w.get(me);delete Ne[W.__cacheKey],o.memory.textures--}function ne(Y){const W=Y.texture,me=n.get(Y),Ne=n.get(W);if(Ne.__webglTexture!==void 0&&(r.deleteTexture(Ne.__webglTexture),o.memory.textures--),Y.depthTexture&&Y.depthTexture.dispose(),Y.isWebGLCubeRenderTarget)for(let We=0;We<6;We++)r.deleteFramebuffer(me.__webglFramebuffer[We]),me.__webglDepthbuffer&&r.deleteRenderbuffer(me.__webglDepthbuffer[We]);else{if(r.deleteFramebuffer(me.__webglFramebuffer),me.__webglDepthbuffer&&r.deleteRenderbuffer(me.__webglDepthbuffer),me.__webglMultisampledFramebuffer&&r.deleteFramebuffer(me.__webglMultisampledFramebuffer),me.__webglColorRenderbuffer)for(let We=0;We<me.__webglColorRenderbuffer.length;We++)me.__webglColorRenderbuffer[We]&&r.deleteRenderbuffer(me.__webglColorRenderbuffer[We]);me.__webglDepthRenderbuffer&&r.deleteRenderbuffer(me.__webglDepthRenderbuffer)}if(Y.isWebGLMultipleRenderTargets)for(let We=0,k=W.length;We<k;We++){const L=n.get(W[We]);L.__webglTexture&&(r.deleteTexture(L.__webglTexture),o.memory.textures--),n.remove(W[We])}n.remove(W),n.remove(Y)}let ie=0;function be(){ie=0}function oe(){const Y=ie;return Y>=u&&console.warn("THREE.WebGLTextures: Trying to use "+Y+" texture units while this GPU supports only "+u),ie+=1,Y}function Te(Y){const W=[];return W.push(Y.wrapS),W.push(Y.wrapT),W.push(Y.wrapR||0),W.push(Y.magFilter),W.push(Y.minFilter),W.push(Y.anisotropy),W.push(Y.internalFormat),W.push(Y.format),W.push(Y.type),W.push(Y.generateMipmaps),W.push(Y.premultiplyAlpha),W.push(Y.flipY),W.push(Y.unpackAlignment),W.push(Y.encoding),W.join()}function Ie(Y,W){const me=n.get(Y);if(Y.isVideoTexture&&pt(Y),Y.isRenderTargetTexture===!1&&Y.version>0&&me.__version!==Y.version){const Ne=Y.image;if(Ne===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ne.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Se(me,Y,W);return}}t.bindTexture(3553,me.__webglTexture,33984+W)}function ve(Y,W){const me=n.get(Y);if(Y.version>0&&me.__version!==Y.version){Se(me,Y,W);return}t.bindTexture(35866,me.__webglTexture,33984+W)}function he(Y,W){const me=n.get(Y);if(Y.version>0&&me.__version!==Y.version){Se(me,Y,W);return}t.bindTexture(32879,me.__webglTexture,33984+W)}function Be(Y,W){const me=n.get(Y);if(Y.version>0&&me.__version!==Y.version){we(me,Y,W);return}t.bindTexture(34067,me.__webglTexture,33984+W)}const Ae={[Hd]:10497,[ei]:33071,[Yd]:33648},$e={[hr]:9728,[Gg]:9984,[rh]:9986,[Gr]:9729,[o4]:9985,[ac]:9987};function Ee(Y,W,me){if(me?(r.texParameteri(Y,10242,Ae[W.wrapS]),r.texParameteri(Y,10243,Ae[W.wrapT]),(Y===32879||Y===35866)&&r.texParameteri(Y,32882,Ae[W.wrapR]),r.texParameteri(Y,10240,$e[W.magFilter]),r.texParameteri(Y,10241,$e[W.minFilter])):(r.texParameteri(Y,10242,33071),r.texParameteri(Y,10243,33071),(Y===32879||Y===35866)&&r.texParameteri(Y,32882,33071),(W.wrapS!==ei||W.wrapT!==ei)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),r.texParameteri(Y,10240,G(W.magFilter)),r.texParameteri(Y,10241,G(W.minFilter)),W.minFilter!==hr&&W.minFilter!==Gr&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const Ne=e.get("EXT_texture_filter_anisotropic");if(W.magFilter===hr||W.minFilter!==rh&&W.minFilter!==ac||W.type===fo&&e.has("OES_texture_float_linear")===!1||a===!1&&W.type===lc&&e.has("OES_texture_half_float_linear")===!1)return;(W.anisotropy>1||n.get(W).__currentAnisotropy)&&(r.texParameterf(Y,Ne.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(W.anisotropy,i.getMaxAnisotropy())),n.get(W).__currentAnisotropy=W.anisotropy)}}function ut(Y,W){let me=!1;Y.__webglInit===void 0&&(Y.__webglInit=!0,W.addEventListener("dispose",X));const Ne=W.source;let We=w.get(Ne);We===void 0&&(We={},w.set(Ne,We));const k=Te(W);if(k!==Y.__cacheKey){We[k]===void 0&&(We[k]={texture:r.createTexture(),usedTimes:0},o.memory.textures++,me=!0),We[k].usedTimes++;const L=We[Y.__cacheKey];L!==void 0&&(We[Y.__cacheKey].usedTimes--,L.usedTimes===0&&H(W)),Y.__cacheKey=k,Y.__webglTexture=We[k].texture}return me}function Se(Y,W,me){let Ne=3553;(W.isDataArrayTexture||W.isCompressedArrayTexture)&&(Ne=35866),W.isData3DTexture&&(Ne=32879);const We=ut(Y,W),k=W.source;t.bindTexture(Ne,Y.__webglTexture,33984+me);const L=n.get(k);if(k.version!==L.__version||We===!0){t.activeTexture(33984+me),r.pixelStorei(37440,W.flipY),r.pixelStorei(37441,W.premultiplyAlpha),r.pixelStorei(3317,W.unpackAlignment),r.pixelStorei(37443,0);const P=M(W)&&T(W.image)===!1;let U=E(W.image,P,!1,h);U=ct(W,U);const j=T(U)||a,re=s.convert(W.format,W.encoding);let se=s.convert(W.type),Ve=I(W.internalFormat,re,se,W.encoding,W.isVideoTexture);Ee(Ne,W,j);let Ye;const it=W.mipmaps,st=a&&W.isVideoTexture!==!0,ot=L.__version===void 0||We===!0,ae=N(W,U,j);if(W.isDepthTexture)Ve=6402,a?W.type===fo?Ve=36012:W.type===uo?Ve=33190:W.type===Da?Ve=35056:Ve=33189:W.type===fo&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),W.format===bo&&Ve===6402&&W.type!==l2&&W.type!==uo&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),W.type=uo,se=s.convert(W.type)),W.format===ka&&Ve===6402&&(Ve=34041,W.type!==Da&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),W.type=Da,se=s.convert(W.type))),ot&&(st?t.texStorage2D(3553,1,Ve,U.width,U.height):t.texImage2D(3553,0,Ve,U.width,U.height,0,re,se,null));else if(W.isDataTexture)if(it.length>0&&j){st&&ot&&t.texStorage2D(3553,ae,Ve,it[0].width,it[0].height);for(let De=0,He=it.length;De<He;De++)Ye=it[De],st?t.texSubImage2D(3553,De,0,0,Ye.width,Ye.height,re,se,Ye.data):t.texImage2D(3553,De,Ve,Ye.width,Ye.height,0,re,se,Ye.data);W.generateMipmaps=!1}else st?(ot&&t.texStorage2D(3553,ae,Ve,U.width,U.height),t.texSubImage2D(3553,0,0,0,U.width,U.height,re,se,U.data)):t.texImage2D(3553,0,Ve,U.width,U.height,0,re,se,U.data);else if(W.isCompressedTexture)if(W.isCompressedArrayTexture){st&&ot&&t.texStorage3D(35866,ae,Ve,it[0].width,it[0].height,U.depth);for(let De=0,He=it.length;De<He;De++)Ye=it[De],W.format!==ti?re!==null?st?t.compressedTexSubImage3D(35866,De,0,0,0,Ye.width,Ye.height,U.depth,re,Ye.data,0,0):t.compressedTexImage3D(35866,De,Ve,Ye.width,Ye.height,U.depth,0,Ye.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):st?t.texSubImage3D(35866,De,0,0,0,Ye.width,Ye.height,U.depth,re,se,Ye.data):t.texImage3D(35866,De,Ve,Ye.width,Ye.height,U.depth,0,re,se,Ye.data)}else{st&&ot&&t.texStorage2D(3553,ae,Ve,it[0].width,it[0].height);for(let De=0,He=it.length;De<He;De++)Ye=it[De],W.format!==ti?re!==null?st?t.compressedTexSubImage2D(3553,De,0,0,Ye.width,Ye.height,re,Ye.data):t.compressedTexImage2D(3553,De,Ve,Ye.width,Ye.height,0,Ye.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):st?t.texSubImage2D(3553,De,0,0,Ye.width,Ye.height,re,se,Ye.data):t.texImage2D(3553,De,Ve,Ye.width,Ye.height,0,re,se,Ye.data)}else if(W.isDataArrayTexture)st?(ot&&t.texStorage3D(35866,ae,Ve,U.width,U.height,U.depth),t.texSubImage3D(35866,0,0,0,0,U.width,U.height,U.depth,re,se,U.data)):t.texImage3D(35866,0,Ve,U.width,U.height,U.depth,0,re,se,U.data);else if(W.isData3DTexture)st?(ot&&t.texStorage3D(32879,ae,Ve,U.width,U.height,U.depth),t.texSubImage3D(32879,0,0,0,0,U.width,U.height,U.depth,re,se,U.data)):t.texImage3D(32879,0,Ve,U.width,U.height,U.depth,0,re,se,U.data);else if(W.isFramebufferTexture){if(ot)if(st)t.texStorage2D(3553,ae,Ve,U.width,U.height);else{let De=U.width,He=U.height;for(let nt=0;nt<ae;nt++)t.texImage2D(3553,nt,Ve,De,He,0,re,se,null),De>>=1,He>>=1}}else if(it.length>0&&j){st&&ot&&t.texStorage2D(3553,ae,Ve,it[0].width,it[0].height);for(let De=0,He=it.length;De<He;De++)Ye=it[De],st?t.texSubImage2D(3553,De,0,0,re,se,Ye):t.texImage2D(3553,De,Ve,re,se,Ye);W.generateMipmaps=!1}else st?(ot&&t.texStorage2D(3553,ae,Ve,U.width,U.height),t.texSubImage2D(3553,0,0,0,re,se,U)):t.texImage2D(3553,0,Ve,re,se,U);B(W,j)&&F(Ne),L.__version=k.version,W.onUpdate&&W.onUpdate(W)}Y.__version=W.version}function we(Y,W,me){if(W.image.length!==6)return;const Ne=ut(Y,W),We=W.source;t.bindTexture(34067,Y.__webglTexture,33984+me);const k=n.get(We);if(We.version!==k.__version||Ne===!0){t.activeTexture(33984+me),r.pixelStorei(37440,W.flipY),r.pixelStorei(37441,W.premultiplyAlpha),r.pixelStorei(3317,W.unpackAlignment),r.pixelStorei(37443,0);const L=W.isCompressedTexture||W.image[0].isCompressedTexture,P=W.image[0]&&W.image[0].isDataTexture,U=[];for(let De=0;De<6;De++)!L&&!P?U[De]=E(W.image[De],!1,!0,f):U[De]=P?W.image[De].image:W.image[De],U[De]=ct(W,U[De]);const j=U[0],re=T(j)||a,se=s.convert(W.format,W.encoding),Ve=s.convert(W.type),Ye=I(W.internalFormat,se,Ve,W.encoding),it=a&&W.isVideoTexture!==!0,st=k.__version===void 0||Ne===!0;let ot=N(W,j,re);Ee(34067,W,re);let ae;if(L){it&&st&&t.texStorage2D(34067,ot,Ye,j.width,j.height);for(let De=0;De<6;De++){ae=U[De].mipmaps;for(let He=0;He<ae.length;He++){const nt=ae[He];W.format!==ti?se!==null?it?t.compressedTexSubImage2D(34069+De,He,0,0,nt.width,nt.height,se,nt.data):t.compressedTexImage2D(34069+De,He,Ye,nt.width,nt.height,0,nt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):it?t.texSubImage2D(34069+De,He,0,0,nt.width,nt.height,se,Ve,nt.data):t.texImage2D(34069+De,He,Ye,nt.width,nt.height,0,se,Ve,nt.data)}}}else{ae=W.mipmaps,it&&st&&(ae.length>0&&ot++,t.texStorage2D(34067,ot,Ye,U[0].width,U[0].height));for(let De=0;De<6;De++)if(P){it?t.texSubImage2D(34069+De,0,0,0,U[De].width,U[De].height,se,Ve,U[De].data):t.texImage2D(34069+De,0,Ye,U[De].width,U[De].height,0,se,Ve,U[De].data);for(let He=0;He<ae.length;He++){const lt=ae[He].image[De].image;it?t.texSubImage2D(34069+De,He+1,0,0,lt.width,lt.height,se,Ve,lt.data):t.texImage2D(34069+De,He+1,Ye,lt.width,lt.height,0,se,Ve,lt.data)}}else{it?t.texSubImage2D(34069+De,0,0,0,se,Ve,U[De]):t.texImage2D(34069+De,0,Ye,se,Ve,U[De]);for(let He=0;He<ae.length;He++){const nt=ae[He];it?t.texSubImage2D(34069+De,He+1,0,0,se,Ve,nt.image[De]):t.texImage2D(34069+De,He+1,Ye,se,Ve,nt.image[De])}}}B(W,re)&&F(34067),k.__version=We.version,W.onUpdate&&W.onUpdate(W)}Y.__version=W.version}function de(Y,W,me,Ne,We){const k=s.convert(me.format,me.encoding),L=s.convert(me.type),P=I(me.internalFormat,k,L,me.encoding);n.get(W).__hasExternalTextures||(We===32879||We===35866?t.texImage3D(We,0,P,W.width,W.height,W.depth,0,k,L,null):t.texImage2D(We,0,P,W.width,W.height,0,k,L,null)),t.bindFramebuffer(36160,Y),qe(W)?g.framebufferTexture2DMultisampleEXT(36160,Ne,We,n.get(me).__webglTexture,0,Fe(W)):(We===3553||We>=34069&&We<=34074)&&r.framebufferTexture2D(36160,Ne,We,n.get(me).__webglTexture,0),t.bindFramebuffer(36160,null)}function ye(Y,W,me){if(r.bindRenderbuffer(36161,Y),W.depthBuffer&&!W.stencilBuffer){let Ne=33189;if(me||qe(W)){const We=W.depthTexture;We&&We.isDepthTexture&&(We.type===fo?Ne=36012:We.type===uo&&(Ne=33190));const k=Fe(W);qe(W)?g.renderbufferStorageMultisampleEXT(36161,k,Ne,W.width,W.height):r.renderbufferStorageMultisample(36161,k,Ne,W.width,W.height)}else r.renderbufferStorage(36161,Ne,W.width,W.height);r.framebufferRenderbuffer(36160,36096,36161,Y)}else if(W.depthBuffer&&W.stencilBuffer){const Ne=Fe(W);me&&qe(W)===!1?r.renderbufferStorageMultisample(36161,Ne,35056,W.width,W.height):qe(W)?g.renderbufferStorageMultisampleEXT(36161,Ne,35056,W.width,W.height):r.renderbufferStorage(36161,34041,W.width,W.height),r.framebufferRenderbuffer(36160,33306,36161,Y)}else{const Ne=W.isWebGLMultipleRenderTargets===!0?W.texture:[W.texture];for(let We=0;We<Ne.length;We++){const k=Ne[We],L=s.convert(k.format,k.encoding),P=s.convert(k.type),U=I(k.internalFormat,L,P,k.encoding),j=Fe(W);me&&qe(W)===!1?r.renderbufferStorageMultisample(36161,j,U,W.width,W.height):qe(W)?g.renderbufferStorageMultisampleEXT(36161,j,U,W.width,W.height):r.renderbufferStorage(36161,U,W.width,W.height)}}r.bindRenderbuffer(36161,null)}function ue(Y,W){if(W&&W.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,Y),!(W.depthTexture&&W.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(W.depthTexture).__webglTexture||W.depthTexture.image.width!==W.width||W.depthTexture.image.height!==W.height)&&(W.depthTexture.image.width=W.width,W.depthTexture.image.height=W.height,W.depthTexture.needsUpdate=!0),Ie(W.depthTexture,0);const Ne=n.get(W.depthTexture).__webglTexture,We=Fe(W);if(W.depthTexture.format===bo)qe(W)?g.framebufferTexture2DMultisampleEXT(36160,36096,3553,Ne,0,We):r.framebufferTexture2D(36160,36096,3553,Ne,0);else if(W.depthTexture.format===ka)qe(W)?g.framebufferTexture2DMultisampleEXT(36160,33306,3553,Ne,0,We):r.framebufferTexture2D(36160,33306,3553,Ne,0);else throw new Error("Unknown depthTexture format")}function pe(Y){const W=n.get(Y),me=Y.isWebGLCubeRenderTarget===!0;if(Y.depthTexture&&!W.__autoAllocateDepthBuffer){if(me)throw new Error("target.depthTexture not supported in Cube render targets");ue(W.__webglFramebuffer,Y)}else if(me){W.__webglDepthbuffer=[];for(let Ne=0;Ne<6;Ne++)t.bindFramebuffer(36160,W.__webglFramebuffer[Ne]),W.__webglDepthbuffer[Ne]=r.createRenderbuffer(),ye(W.__webglDepthbuffer[Ne],Y,!1)}else t.bindFramebuffer(36160,W.__webglFramebuffer),W.__webglDepthbuffer=r.createRenderbuffer(),ye(W.__webglDepthbuffer,Y,!1);t.bindFramebuffer(36160,null)}function Me(Y,W,me){const Ne=n.get(Y);W!==void 0&&de(Ne.__webglFramebuffer,Y,Y.texture,36064,3553),me!==void 0&&pe(Y)}function Oe(Y){const W=Y.texture,me=n.get(Y),Ne=n.get(W);Y.addEventListener("dispose",J),Y.isWebGLMultipleRenderTargets!==!0&&(Ne.__webglTexture===void 0&&(Ne.__webglTexture=r.createTexture()),Ne.__version=W.version,o.memory.textures++);const We=Y.isWebGLCubeRenderTarget===!0,k=Y.isWebGLMultipleRenderTargets===!0,L=T(Y)||a;if(We){me.__webglFramebuffer=[];for(let P=0;P<6;P++)me.__webglFramebuffer[P]=r.createFramebuffer()}else{if(me.__webglFramebuffer=r.createFramebuffer(),k)if(i.drawBuffers){const P=Y.texture;for(let U=0,j=P.length;U<j;U++){const re=n.get(P[U]);re.__webglTexture===void 0&&(re.__webglTexture=r.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&Y.samples>0&&qe(Y)===!1){const P=k?W:[W];me.__webglMultisampledFramebuffer=r.createFramebuffer(),me.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,me.__webglMultisampledFramebuffer);for(let U=0;U<P.length;U++){const j=P[U];me.__webglColorRenderbuffer[U]=r.createRenderbuffer(),r.bindRenderbuffer(36161,me.__webglColorRenderbuffer[U]);const re=s.convert(j.format,j.encoding),se=s.convert(j.type),Ve=I(j.internalFormat,re,se,j.encoding,Y.isXRRenderTarget===!0),Ye=Fe(Y);r.renderbufferStorageMultisample(36161,Ye,Ve,Y.width,Y.height),r.framebufferRenderbuffer(36160,36064+U,36161,me.__webglColorRenderbuffer[U])}r.bindRenderbuffer(36161,null),Y.depthBuffer&&(me.__webglDepthRenderbuffer=r.createRenderbuffer(),ye(me.__webglDepthRenderbuffer,Y,!0)),t.bindFramebuffer(36160,null)}}if(We){t.bindTexture(34067,Ne.__webglTexture),Ee(34067,W,L);for(let P=0;P<6;P++)de(me.__webglFramebuffer[P],Y,W,36064,34069+P);B(W,L)&&F(34067),t.unbindTexture()}else if(k){const P=Y.texture;for(let U=0,j=P.length;U<j;U++){const re=P[U],se=n.get(re);t.bindTexture(3553,se.__webglTexture),Ee(3553,re,L),de(me.__webglFramebuffer,Y,re,36064+U,3553),B(re,L)&&F(3553)}t.unbindTexture()}else{let P=3553;(Y.isWebGL3DRenderTarget||Y.isWebGLArrayRenderTarget)&&(a?P=Y.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(P,Ne.__webglTexture),Ee(P,W,L),de(me.__webglFramebuffer,Y,W,36064,P),B(W,L)&&F(P),t.unbindTexture()}Y.depthBuffer&&pe(Y)}function Le(Y){const W=T(Y)||a,me=Y.isWebGLMultipleRenderTargets===!0?Y.texture:[Y.texture];for(let Ne=0,We=me.length;Ne<We;Ne++){const k=me[Ne];if(B(k,W)){const L=Y.isWebGLCubeRenderTarget?34067:3553,P=n.get(k).__webglTexture;t.bindTexture(L,P),F(L),t.unbindTexture()}}}function ze(Y){if(a&&Y.samples>0&&qe(Y)===!1){const W=Y.isWebGLMultipleRenderTargets?Y.texture:[Y.texture],me=Y.width,Ne=Y.height;let We=16384;const k=[],L=Y.stencilBuffer?33306:36096,P=n.get(Y),U=Y.isWebGLMultipleRenderTargets===!0;if(U)for(let j=0;j<W.length;j++)t.bindFramebuffer(36160,P.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(36160,36064+j,36161,null),t.bindFramebuffer(36160,P.__webglFramebuffer),r.framebufferTexture2D(36009,36064+j,3553,null,0);t.bindFramebuffer(36008,P.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,P.__webglFramebuffer);for(let j=0;j<W.length;j++){k.push(36064+j),Y.depthBuffer&&k.push(L);const re=P.__ignoreDepthValues!==void 0?P.__ignoreDepthValues:!1;if(re===!1&&(Y.depthBuffer&&(We|=256),Y.stencilBuffer&&(We|=1024)),U&&r.framebufferRenderbuffer(36008,36064,36161,P.__webglColorRenderbuffer[j]),re===!0&&(r.invalidateFramebuffer(36008,[L]),r.invalidateFramebuffer(36009,[L])),U){const se=n.get(W[j]).__webglTexture;r.framebufferTexture2D(36009,36064,3553,se,0)}r.blitFramebuffer(0,0,me,Ne,0,0,me,Ne,We,9728),b&&r.invalidateFramebuffer(36008,k)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),U)for(let j=0;j<W.length;j++){t.bindFramebuffer(36160,P.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(36160,36064+j,36161,P.__webglColorRenderbuffer[j]);const re=n.get(W[j]).__webglTexture;t.bindFramebuffer(36160,P.__webglFramebuffer),r.framebufferTexture2D(36009,36064+j,3553,re,0)}t.bindFramebuffer(36009,P.__webglMultisampledFramebuffer)}}function Fe(Y){return Math.min(p,Y.samples)}function qe(Y){const W=n.get(Y);return a&&Y.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&W.__useRenderToTexture!==!1}function pt(Y){const W=o.render.frame;C.get(Y)!==W&&(C.set(Y,W),Y.update())}function ct(Y,W){const me=Y.encoding,Ne=Y.format,We=Y.type;return Y.isCompressedTexture===!0||Y.isVideoTexture===!0||Y.format===qd||me!==Po&&(me===hn?a===!1?e.has("EXT_sRGB")===!0&&Ne===ti?(Y.format=qd,Y.minFilter=Gr,Y.generateMipmaps=!1):W=f2.sRGBToLinear(W):(Ne!==ti||We!==Co)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",me)),W}this.allocateTextureUnit=oe,this.resetTextureUnits=be,this.setTexture2D=Ie,this.setTexture2DArray=ve,this.setTexture3D=he,this.setTextureCube=Be,this.rebindTextures=Me,this.setupRenderTarget=Oe,this.updateRenderTargetMipmap=Le,this.updateMultisampleRenderTarget=ze,this.setupDepthRenderbuffer=pe,this.setupFrameBufferTexture=de,this.useMultisampledRTT=qe}function x5(r,e,t){const n=t.isWebGL2;function i(s,o=null){let a;if(s===Co)return 5121;if(s===u4)return 32819;if(s===f4)return 32820;if(s===a4)return 5120;if(s===l4)return 5122;if(s===l2)return 5123;if(s===c4)return 5124;if(s===uo)return 5125;if(s===fo)return 5126;if(s===lc)return n?5131:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===h4)return 6406;if(s===ti)return 6408;if(s===p4)return 6409;if(s===m4)return 6410;if(s===bo)return 6402;if(s===ka)return 34041;if(s===d4)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(s===qd)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===g4)return 6403;if(s===v4)return 36244;if(s===x4)return 33319;if(s===b4)return 33320;if(s===y4)return 36249;if(s===ih||s===sh||s===oh||s===ah)if(o===hn)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===ih)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===sh)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===oh)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===ah)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===ih)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===sh)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===oh)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===ah)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===$g||s===Wg||s===Xg||s===Hg)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===$g)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===Wg)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===Xg)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===Hg)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===w4)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===Yg||s===qg)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===Yg)return o===hn?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===qg)return o===hn?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===Zg||s===jg||s===Kg||s===Jg||s===Qg||s===ev||s===tv||s===nv||s===rv||s===iv||s===sv||s===ov||s===av||s===lv)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===Zg)return o===hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===jg)return o===hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===Kg)return o===hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===Jg)return o===hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===Qg)return o===hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===ev)return o===hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===tv)return o===hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===nv)return o===hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===rv)return o===hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===iv)return o===hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===sv)return o===hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===ov)return o===hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===av)return o===hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===lv)return o===hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===cv)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===cv)return o===hn?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return s===Da?n?34042:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):r[s]!==void 0?r[s]:null}return{convert:i}}class b5 extends Ir{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Ma extends rr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const y5={type:"move"};class Rh{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Ma,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Ma,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new K,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new K),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Ma,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new K,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new K),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let i=null,s=null,o=null;const a=this._targetRay,u=this._grip,f=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(f&&e.hand){o=!0;for(const y of e.hand.values()){const w=t.getJointPose(y,n),A=this._getHandJoint(f,y);w!==null&&(A.matrix.fromArray(w.transform.matrix),A.matrix.decompose(A.position,A.rotation,A.scale),A.jointRadius=w.radius),A.visible=w!==null}const h=f.joints["index-finger-tip"],p=f.joints["thumb-tip"],g=h.position.distanceTo(p.position),b=.02,C=.005;f.inputState.pinching&&g>b+C?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!f.inputState.pinching&&g<=b-C&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else u!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),s!==null&&(u.matrix.fromArray(s.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),s.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(s.linearVelocity)):u.hasLinearVelocity=!1,s.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(s.angularVelocity)):u.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,n),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(y5)))}return a!==null&&(a.visible=i!==null),u!==null&&(u.visible=s!==null),f!==null&&(f.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new Ma;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class w5 extends Dr{constructor(e,t,n,i,s,o,a,u,f,h){if(h=h!==void 0?h:bo,h!==bo&&h!==ka)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&h===bo&&(n=uo),n===void 0&&h===ka&&(n=Da),super(null,i,s,o,a,u,h,n,f),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:hr,this.minFilter=u!==void 0?u:hr,this.flipY=!1,this.generateMipmaps=!1}}class _5 extends Do{constructor(e,t){super();const n=this;let i=null,s=1,o=null,a="local-floor",u=null,f=null,h=null,p=null,g=null,b=null;const C=t.getContextAttributes();let y=null,w=null;const A=[],O=[],E=new Set,T=new Map,M=new Ir;M.layers.enable(1),M.viewport=new Zt;const B=new Ir;B.layers.enable(2),B.viewport=new Zt;const F=[M,B],I=new b5;I.layers.enable(1),I.layers.enable(2);let N=null,G=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ve){let he=A[ve];return he===void 0&&(he=new Rh,A[ve]=he),he.getTargetRaySpace()},this.getControllerGrip=function(ve){let he=A[ve];return he===void 0&&(he=new Rh,A[ve]=he),he.getGripSpace()},this.getHand=function(ve){let he=A[ve];return he===void 0&&(he=new Rh,A[ve]=he),he.getHandSpace()};function X(ve){const he=O.indexOf(ve.inputSource);if(he===-1)return;const Be=A[he];Be!==void 0&&Be.dispatchEvent({type:ve.type,data:ve.inputSource})}function J(){i.removeEventListener("select",X),i.removeEventListener("selectstart",X),i.removeEventListener("selectend",X),i.removeEventListener("squeeze",X),i.removeEventListener("squeezestart",X),i.removeEventListener("squeezeend",X),i.removeEventListener("end",J),i.removeEventListener("inputsourceschange",Z);for(let ve=0;ve<A.length;ve++){const he=O[ve];he!==null&&(O[ve]=null,A[ve].disconnect(he))}N=null,G=null,e.setRenderTarget(y),g=null,p=null,h=null,i=null,w=null,Ie.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ve){s=ve,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ve){a=ve,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(ve){u=ve},this.getBaseLayer=function(){return p!==null?p:g},this.getBinding=function(){return h},this.getFrame=function(){return b},this.getSession=function(){return i},this.setSession=async function(ve){if(i=ve,i!==null){if(y=e.getRenderTarget(),i.addEventListener("select",X),i.addEventListener("selectstart",X),i.addEventListener("selectend",X),i.addEventListener("squeeze",X),i.addEventListener("squeezestart",X),i.addEventListener("squeezeend",X),i.addEventListener("end",J),i.addEventListener("inputsourceschange",Z),C.xrCompatible!==!0&&await t.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const he={antialias:i.renderState.layers===void 0?C.antialias:!0,alpha:C.alpha,depth:C.depth,stencil:C.stencil,framebufferScaleFactor:s};g=new XRWebGLLayer(i,t,he),i.updateRenderState({baseLayer:g}),w=new Mo(g.framebufferWidth,g.framebufferHeight,{format:ti,type:Co,encoding:e.outputEncoding,stencilBuffer:C.stencil})}else{let he=null,Be=null,Ae=null;C.depth&&(Ae=C.stencil?35056:33190,he=C.stencil?ka:bo,Be=C.stencil?Da:uo);const $e={colorFormat:32856,depthFormat:Ae,scaleFactor:s};h=new XRWebGLBinding(i,t),p=h.createProjectionLayer($e),i.updateRenderState({layers:[p]}),w=new Mo(p.textureWidth,p.textureHeight,{format:ti,type:Co,depthTexture:new w5(p.textureWidth,p.textureHeight,Be,void 0,void 0,void 0,void 0,void 0,void 0,he),stencilBuffer:C.stencil,encoding:e.outputEncoding,samples:C.antialias?4:0});const Ee=e.properties.get(w);Ee.__ignoreDepthValues=p.ignoreDepthValues}w.isXRRenderTarget=!0,this.setFoveation(1),u=null,o=await i.requestReferenceSpace(a),Ie.setContext(i),Ie.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};function Z(ve){for(let he=0;he<ve.removed.length;he++){const Be=ve.removed[he],Ae=O.indexOf(Be);Ae>=0&&(O[Ae]=null,A[Ae].disconnect(Be))}for(let he=0;he<ve.added.length;he++){const Be=ve.added[he];let Ae=O.indexOf(Be);if(Ae===-1){for(let Ee=0;Ee<A.length;Ee++)if(Ee>=O.length){O.push(Be),Ae=Ee;break}else if(O[Ee]===null){O[Ee]=Be,Ae=Ee;break}if(Ae===-1)break}const $e=A[Ae];$e&&$e.connect(Be)}}const H=new K,ne=new K;function ie(ve,he,Be){H.setFromMatrixPosition(he.matrixWorld),ne.setFromMatrixPosition(Be.matrixWorld);const Ae=H.distanceTo(ne),$e=he.projectionMatrix.elements,Ee=Be.projectionMatrix.elements,ut=$e[14]/($e[10]-1),Se=$e[14]/($e[10]+1),we=($e[9]+1)/$e[5],de=($e[9]-1)/$e[5],ye=($e[8]-1)/$e[0],ue=(Ee[8]+1)/Ee[0],pe=ut*ye,Me=ut*ue,Oe=Ae/(-ye+ue),Le=Oe*-ye;he.matrixWorld.decompose(ve.position,ve.quaternion,ve.scale),ve.translateX(Le),ve.translateZ(Oe),ve.matrixWorld.compose(ve.position,ve.quaternion,ve.scale),ve.matrixWorldInverse.copy(ve.matrixWorld).invert();const ze=ut+Oe,Fe=Se+Oe,qe=pe-Le,pt=Me+(Ae-Le),ct=we*Se/Fe*ze,Y=de*Se/Fe*ze;ve.projectionMatrix.makePerspective(qe,pt,ct,Y,ze,Fe)}function be(ve,he){he===null?ve.matrixWorld.copy(ve.matrix):ve.matrixWorld.multiplyMatrices(he.matrixWorld,ve.matrix),ve.matrixWorldInverse.copy(ve.matrixWorld).invert()}this.updateCamera=function(ve){if(i===null)return;I.near=B.near=M.near=ve.near,I.far=B.far=M.far=ve.far,(N!==I.near||G!==I.far)&&(i.updateRenderState({depthNear:I.near,depthFar:I.far}),N=I.near,G=I.far);const he=ve.parent,Be=I.cameras;be(I,he);for(let $e=0;$e<Be.length;$e++)be(Be[$e],he);I.matrixWorld.decompose(I.position,I.quaternion,I.scale),ve.matrix.copy(I.matrix),ve.matrix.decompose(ve.position,ve.quaternion,ve.scale);const Ae=ve.children;for(let $e=0,Ee=Ae.length;$e<Ee;$e++)Ae[$e].updateMatrixWorld(!0);Be.length===2?ie(I,M,B):I.projectionMatrix.copy(M.projectionMatrix)},this.getCamera=function(){return I},this.getFoveation=function(){if(p!==null)return p.fixedFoveation;if(g!==null)return g.fixedFoveation},this.setFoveation=function(ve){p!==null&&(p.fixedFoveation=ve),g!==null&&g.fixedFoveation!==void 0&&(g.fixedFoveation=ve)},this.getPlanes=function(){return E};let oe=null;function Te(ve,he){if(f=he.getViewerPose(u||o),b=he,f!==null){const Be=f.views;g!==null&&(e.setRenderTargetFramebuffer(w,g.framebuffer),e.setRenderTarget(w));let Ae=!1;Be.length!==I.cameras.length&&(I.cameras.length=0,Ae=!0);for(let $e=0;$e<Be.length;$e++){const Ee=Be[$e];let ut=null;if(g!==null)ut=g.getViewport(Ee);else{const we=h.getViewSubImage(p,Ee);ut=we.viewport,$e===0&&(e.setRenderTargetTextures(w,we.colorTexture,p.ignoreDepthValues?void 0:we.depthStencilTexture),e.setRenderTarget(w))}let Se=F[$e];Se===void 0&&(Se=new Ir,Se.layers.enable($e),Se.viewport=new Zt,F[$e]=Se),Se.matrix.fromArray(Ee.transform.matrix),Se.projectionMatrix.fromArray(Ee.projectionMatrix),Se.viewport.set(ut.x,ut.y,ut.width,ut.height),$e===0&&I.matrix.copy(Se.matrix),Ae===!0&&I.cameras.push(Se)}}for(let Be=0;Be<A.length;Be++){const Ae=O[Be],$e=A[Be];Ae!==null&&$e!==void 0&&$e.update(Ae,he,u||o)}if(oe&&oe(ve,he),he.detectedPlanes){n.dispatchEvent({type:"planesdetected",data:he.detectedPlanes});let Be=null;for(const Ae of E)he.detectedPlanes.has(Ae)||(Be===null&&(Be=[]),Be.push(Ae));if(Be!==null)for(const Ae of Be)E.delete(Ae),T.delete(Ae),n.dispatchEvent({type:"planeremoved",data:Ae});for(const Ae of he.detectedPlanes)if(!E.has(Ae))E.add(Ae),T.set(Ae,he.lastChangedTime),n.dispatchEvent({type:"planeadded",data:Ae});else{const $e=T.get(Ae);Ae.lastChangedTime>$e&&(T.set(Ae,Ae.lastChangedTime),n.dispatchEvent({type:"planechanged",data:Ae}))}}b=null}const Ie=new y2;Ie.setAnimationLoop(Te),this.setAnimationLoop=function(ve){oe=ve},this.dispose=function(){}}}function S5(r,e){function t(y,w){w.color.getRGB(y.fogColor.value,v2(r)),w.isFog?(y.fogNear.value=w.near,y.fogFar.value=w.far):w.isFogExp2&&(y.fogDensity.value=w.density)}function n(y,w,A,O,E){w.isMeshBasicMaterial||w.isMeshLambertMaterial?i(y,w):w.isMeshToonMaterial?(i(y,w),h(y,w)):w.isMeshPhongMaterial?(i(y,w),f(y,w)):w.isMeshStandardMaterial?(i(y,w),p(y,w),w.isMeshPhysicalMaterial&&g(y,w,E)):w.isMeshMatcapMaterial?(i(y,w),b(y,w)):w.isMeshDepthMaterial?i(y,w):w.isMeshDistanceMaterial?(i(y,w),C(y,w)):w.isMeshNormalMaterial?i(y,w):w.isLineBasicMaterial?(s(y,w),w.isLineDashedMaterial&&o(y,w)):w.isPointsMaterial?a(y,w,A,O):w.isSpriteMaterial?u(y,w):w.isShadowMaterial?(y.color.value.copy(w.color),y.opacity.value=w.opacity):w.isShaderMaterial&&(w.uniformsNeedUpdate=!1)}function i(y,w){y.opacity.value=w.opacity,w.color&&y.diffuse.value.copy(w.color),w.emissive&&y.emissive.value.copy(w.emissive).multiplyScalar(w.emissiveIntensity),w.map&&(y.map.value=w.map),w.alphaMap&&(y.alphaMap.value=w.alphaMap),w.bumpMap&&(y.bumpMap.value=w.bumpMap,y.bumpScale.value=w.bumpScale,w.side===Lr&&(y.bumpScale.value*=-1)),w.displacementMap&&(y.displacementMap.value=w.displacementMap,y.displacementScale.value=w.displacementScale,y.displacementBias.value=w.displacementBias),w.emissiveMap&&(y.emissiveMap.value=w.emissiveMap),w.normalMap&&(y.normalMap.value=w.normalMap,y.normalScale.value.copy(w.normalScale),w.side===Lr&&y.normalScale.value.negate()),w.specularMap&&(y.specularMap.value=w.specularMap),w.alphaTest>0&&(y.alphaTest.value=w.alphaTest);const A=e.get(w).envMap;if(A&&(y.envMap.value=A,y.flipEnvMap.value=A.isCubeTexture&&A.isRenderTargetTexture===!1?-1:1,y.reflectivity.value=w.reflectivity,y.ior.value=w.ior,y.refractionRatio.value=w.refractionRatio),w.lightMap){y.lightMap.value=w.lightMap;const T=r.physicallyCorrectLights!==!0?Math.PI:1;y.lightMapIntensity.value=w.lightMapIntensity*T}w.aoMap&&(y.aoMap.value=w.aoMap,y.aoMapIntensity.value=w.aoMapIntensity);let O;w.map?O=w.map:w.specularMap?O=w.specularMap:w.displacementMap?O=w.displacementMap:w.normalMap?O=w.normalMap:w.bumpMap?O=w.bumpMap:w.roughnessMap?O=w.roughnessMap:w.metalnessMap?O=w.metalnessMap:w.alphaMap?O=w.alphaMap:w.emissiveMap?O=w.emissiveMap:w.clearcoatMap?O=w.clearcoatMap:w.clearcoatNormalMap?O=w.clearcoatNormalMap:w.clearcoatRoughnessMap?O=w.clearcoatRoughnessMap:w.iridescenceMap?O=w.iridescenceMap:w.iridescenceThicknessMap?O=w.iridescenceThicknessMap:w.specularIntensityMap?O=w.specularIntensityMap:w.specularColorMap?O=w.specularColorMap:w.transmissionMap?O=w.transmissionMap:w.thicknessMap?O=w.thicknessMap:w.sheenColorMap?O=w.sheenColorMap:w.sheenRoughnessMap&&(O=w.sheenRoughnessMap),O!==void 0&&(O.isWebGLRenderTarget&&(O=O.texture),O.matrixAutoUpdate===!0&&O.updateMatrix(),y.uvTransform.value.copy(O.matrix));let E;w.aoMap?E=w.aoMap:w.lightMap&&(E=w.lightMap),E!==void 0&&(E.isWebGLRenderTarget&&(E=E.texture),E.matrixAutoUpdate===!0&&E.updateMatrix(),y.uv2Transform.value.copy(E.matrix))}function s(y,w){y.diffuse.value.copy(w.color),y.opacity.value=w.opacity}function o(y,w){y.dashSize.value=w.dashSize,y.totalSize.value=w.dashSize+w.gapSize,y.scale.value=w.scale}function a(y,w,A,O){y.diffuse.value.copy(w.color),y.opacity.value=w.opacity,y.size.value=w.size*A,y.scale.value=O*.5,w.map&&(y.map.value=w.map),w.alphaMap&&(y.alphaMap.value=w.alphaMap),w.alphaTest>0&&(y.alphaTest.value=w.alphaTest);let E;w.map?E=w.map:w.alphaMap&&(E=w.alphaMap),E!==void 0&&(E.matrixAutoUpdate===!0&&E.updateMatrix(),y.uvTransform.value.copy(E.matrix))}function u(y,w){y.diffuse.value.copy(w.color),y.opacity.value=w.opacity,y.rotation.value=w.rotation,w.map&&(y.map.value=w.map),w.alphaMap&&(y.alphaMap.value=w.alphaMap),w.alphaTest>0&&(y.alphaTest.value=w.alphaTest);let A;w.map?A=w.map:w.alphaMap&&(A=w.alphaMap),A!==void 0&&(A.matrixAutoUpdate===!0&&A.updateMatrix(),y.uvTransform.value.copy(A.matrix))}function f(y,w){y.specular.value.copy(w.specular),y.shininess.value=Math.max(w.shininess,1e-4)}function h(y,w){w.gradientMap&&(y.gradientMap.value=w.gradientMap)}function p(y,w){y.roughness.value=w.roughness,y.metalness.value=w.metalness,w.roughnessMap&&(y.roughnessMap.value=w.roughnessMap),w.metalnessMap&&(y.metalnessMap.value=w.metalnessMap),e.get(w).envMap&&(y.envMapIntensity.value=w.envMapIntensity)}function g(y,w,A){y.ior.value=w.ior,w.sheen>0&&(y.sheenColor.value.copy(w.sheenColor).multiplyScalar(w.sheen),y.sheenRoughness.value=w.sheenRoughness,w.sheenColorMap&&(y.sheenColorMap.value=w.sheenColorMap),w.sheenRoughnessMap&&(y.sheenRoughnessMap.value=w.sheenRoughnessMap)),w.clearcoat>0&&(y.clearcoat.value=w.clearcoat,y.clearcoatRoughness.value=w.clearcoatRoughness,w.clearcoatMap&&(y.clearcoatMap.value=w.clearcoatMap),w.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=w.clearcoatRoughnessMap),w.clearcoatNormalMap&&(y.clearcoatNormalScale.value.copy(w.clearcoatNormalScale),y.clearcoatNormalMap.value=w.clearcoatNormalMap,w.side===Lr&&y.clearcoatNormalScale.value.negate())),w.iridescence>0&&(y.iridescence.value=w.iridescence,y.iridescenceIOR.value=w.iridescenceIOR,y.iridescenceThicknessMinimum.value=w.iridescenceThicknessRange[0],y.iridescenceThicknessMaximum.value=w.iridescenceThicknessRange[1],w.iridescenceMap&&(y.iridescenceMap.value=w.iridescenceMap),w.iridescenceThicknessMap&&(y.iridescenceThicknessMap.value=w.iridescenceThicknessMap)),w.transmission>0&&(y.transmission.value=w.transmission,y.transmissionSamplerMap.value=A.texture,y.transmissionSamplerSize.value.set(A.width,A.height),w.transmissionMap&&(y.transmissionMap.value=w.transmissionMap),y.thickness.value=w.thickness,w.thicknessMap&&(y.thicknessMap.value=w.thicknessMap),y.attenuationDistance.value=w.attenuationDistance,y.attenuationColor.value.copy(w.attenuationColor)),y.specularIntensity.value=w.specularIntensity,y.specularColor.value.copy(w.specularColor),w.specularIntensityMap&&(y.specularIntensityMap.value=w.specularIntensityMap),w.specularColorMap&&(y.specularColorMap.value=w.specularColorMap)}function b(y,w){w.matcap&&(y.matcap.value=w.matcap)}function C(y,w){y.referencePosition.value.copy(w.referencePosition),y.nearDistance.value=w.nearDistance,y.farDistance.value=w.farDistance}return{refreshFogUniforms:t,refreshMaterialUniforms:n}}function C5(r,e,t,n){let i={},s={},o=[];const a=t.isWebGL2?r.getParameter(35375):0;function u(O,E){const T=E.program;n.uniformBlockBinding(O,T)}function f(O,E){let T=i[O.id];T===void 0&&(C(O),T=h(O),i[O.id]=T,O.addEventListener("dispose",w));const M=E.program;n.updateUBOMapping(O,M);const B=e.render.frame;s[O.id]!==B&&(g(O),s[O.id]=B)}function h(O){const E=p();O.__bindingPointIndex=E;const T=r.createBuffer(),M=O.__size,B=O.usage;return r.bindBuffer(35345,T),r.bufferData(35345,M,B),r.bindBuffer(35345,null),r.bindBufferBase(35345,E,T),T}function p(){for(let O=0;O<a;O++)if(o.indexOf(O)===-1)return o.push(O),O;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function g(O){const E=i[O.id],T=O.uniforms,M=O.__cache;r.bindBuffer(35345,E);for(let B=0,F=T.length;B<F;B++){const I=T[B];if(b(I,B,M)===!0){const N=I.__offset,G=Array.isArray(I.value)?I.value:[I.value];let X=0;for(let J=0;J<G.length;J++){const Z=G[J],H=y(Z);typeof Z=="number"?(I.__data[0]=Z,r.bufferSubData(35345,N+X,I.__data)):Z.isMatrix3?(I.__data[0]=Z.elements[0],I.__data[1]=Z.elements[1],I.__data[2]=Z.elements[2],I.__data[3]=Z.elements[0],I.__data[4]=Z.elements[3],I.__data[5]=Z.elements[4],I.__data[6]=Z.elements[5],I.__data[7]=Z.elements[0],I.__data[8]=Z.elements[6],I.__data[9]=Z.elements[7],I.__data[10]=Z.elements[8],I.__data[11]=Z.elements[0]):(Z.toArray(I.__data,X),X+=H.storage/Float32Array.BYTES_PER_ELEMENT)}r.bufferSubData(35345,N,I.__data)}}r.bindBuffer(35345,null)}function b(O,E,T){const M=O.value;if(T[E]===void 0){if(typeof M=="number")T[E]=M;else{const B=Array.isArray(M)?M:[M],F=[];for(let I=0;I<B.length;I++)F.push(B[I].clone());T[E]=F}return!0}else if(typeof M=="number"){if(T[E]!==M)return T[E]=M,!0}else{const B=Array.isArray(T[E])?T[E]:[T[E]],F=Array.isArray(M)?M:[M];for(let I=0;I<B.length;I++){const N=B[I];if(N.equals(F[I])===!1)return N.copy(F[I]),!0}}return!1}function C(O){const E=O.uniforms;let T=0;const M=16;let B=0;for(let F=0,I=E.length;F<I;F++){const N=E[F],G={boundary:0,storage:0},X=Array.isArray(N.value)?N.value:[N.value];for(let J=0,Z=X.length;J<Z;J++){const H=X[J],ne=y(H);G.boundary+=ne.boundary,G.storage+=ne.storage}if(N.__data=new Float32Array(G.storage/Float32Array.BYTES_PER_ELEMENT),N.__offset=T,F>0){B=T%M;const J=M-B;B!==0&&J-G.boundary<0&&(T+=M-B,N.__offset=T)}T+=G.storage}return B=T%M,B>0&&(T+=M-B),O.__size=T,O.__cache={},this}function y(O){const E={boundary:0,storage:0};return typeof O=="number"?(E.boundary=4,E.storage=4):O.isVector2?(E.boundary=8,E.storage=8):O.isVector3||O.isColor?(E.boundary=16,E.storage=12):O.isVector4?(E.boundary=16,E.storage=16):O.isMatrix3?(E.boundary=48,E.storage=48):O.isMatrix4?(E.boundary=64,E.storage=64):O.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",O),E}function w(O){const E=O.target;E.removeEventListener("dispose",w);const T=o.indexOf(E.__bindingPointIndex);o.splice(T,1),r.deleteBuffer(i[E.id]),delete i[E.id],delete s[E.id]}function A(){for(const O in i)r.deleteBuffer(i[O]);o=[],i={},s={}}return{bind:u,update:f,dispose:A}}function P5(){const r=b0("canvas");return r.style.display="block",r}function P2(r={}){this.isWebGLRenderer=!0;const e=r.canvas!==void 0?r.canvas:P5(),t=r.context!==void 0?r.context:null,n=r.depth!==void 0?r.depth:!0,i=r.stencil!==void 0?r.stencil:!0,s=r.antialias!==void 0?r.antialias:!1,o=r.premultipliedAlpha!==void 0?r.premultipliedAlpha:!0,a=r.preserveDrawingBuffer!==void 0?r.preserveDrawingBuffer:!1,u=r.powerPreference!==void 0?r.powerPreference:"default",f=r.failIfMajorPerformanceCaveat!==void 0?r.failIfMajorPerformanceCaveat:!1;let h;t!==null?h=t.getContextAttributes().alpha:h=r.alpha!==void 0?r.alpha:!1;let p=null,g=null;const b=[],C=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Po,this.physicallyCorrectLights=!1,this.toneMapping=Ji,this.toneMappingExposure=1;const y=this;let w=!1,A=0,O=0,E=null,T=-1,M=null;const B=new Zt,F=new Zt;let I=null,N=e.width,G=e.height,X=1,J=null,Z=null;const H=new Zt(0,0,N,G),ne=new Zt(0,0,N,G);let ie=!1;const be=new kp;let oe=!1,Te=!1,Ie=null;const ve=new Gt,he=new je,Be=new K,Ae={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function $e(){return E===null?X:1}let Ee=t;function ut(q,_e){for(let Re=0;Re<q.length;Re++){const xe=q[Re],ke=e.getContext(xe,_e);if(ke!==null)return ke}return null}try{const q={alpha:!0,depth:n,stencil:i,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:u,failIfMajorPerformanceCaveat:f};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${Rp}`),e.addEventListener("webglcontextlost",Ve,!1),e.addEventListener("webglcontextrestored",Ye,!1),e.addEventListener("webglcontextcreationerror",it,!1),Ee===null){const _e=["webgl2","webgl","experimental-webgl"];if(y.isWebGL1Renderer===!0&&_e.shift(),Ee=ut(_e,q),Ee===null)throw ut(_e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}Ee.getShaderPrecisionFormat===void 0&&(Ee.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(q){throw console.error("THREE.WebGLRenderer: "+q.message),q}let Se,we,de,ye,ue,pe,Me,Oe,Le,ze,Fe,qe,pt,ct,Y,W,me,Ne,We,k,L,P,U,j;function re(){Se=new FA(Ee),we=new TA(Ee,Se,r),Se.init(we),P=new x5(Ee,Se,we),de=new g5(Ee,Se,we),ye=new UA,ue=new n5,pe=new v5(Ee,Se,de,ue,we,P,ye),Me=new LA(y),Oe=new BA(y),Le=new Y4(Ee,we),U=new EA(Ee,Se,Le,we),ze=new NA(Ee,Le,ye,U),Fe=new $A(Ee,ze,Le,ye),We=new GA(Ee,we,pe),W=new IA(ue),qe=new t5(y,Me,Oe,Se,we,U,W),pt=new S5(y,ue),ct=new i5,Y=new u5(Se,we),Ne=new MA(y,Me,Oe,de,Fe,h,o),me=new m5(y,Fe,we),j=new C5(Ee,ye,we,de),k=new AA(Ee,Se,ye,we),L=new kA(Ee,Se,ye,we),ye.programs=qe.programs,y.capabilities=we,y.extensions=Se,y.properties=ue,y.renderLists=ct,y.shadowMap=me,y.state=de,y.info=ye}re();const se=new _5(y,Ee);this.xr=se,this.getContext=function(){return Ee},this.getContextAttributes=function(){return Ee.getContextAttributes()},this.forceContextLoss=function(){const q=Se.get("WEBGL_lose_context");q&&q.loseContext()},this.forceContextRestore=function(){const q=Se.get("WEBGL_lose_context");q&&q.restoreContext()},this.getPixelRatio=function(){return X},this.setPixelRatio=function(q){q!==void 0&&(X=q,this.setSize(N,G,!1))},this.getSize=function(q){return q.set(N,G)},this.setSize=function(q,_e,Re){if(se.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}N=q,G=_e,e.width=Math.floor(q*X),e.height=Math.floor(_e*X),Re!==!1&&(e.style.width=q+"px",e.style.height=_e+"px"),this.setViewport(0,0,q,_e)},this.getDrawingBufferSize=function(q){return q.set(N*X,G*X).floor()},this.setDrawingBufferSize=function(q,_e,Re){N=q,G=_e,X=Re,e.width=Math.floor(q*Re),e.height=Math.floor(_e*Re),this.setViewport(0,0,q,_e)},this.getCurrentViewport=function(q){return q.copy(B)},this.getViewport=function(q){return q.copy(H)},this.setViewport=function(q,_e,Re,xe){q.isVector4?H.set(q.x,q.y,q.z,q.w):H.set(q,_e,Re,xe),de.viewport(B.copy(H).multiplyScalar(X).floor())},this.getScissor=function(q){return q.copy(ne)},this.setScissor=function(q,_e,Re,xe){q.isVector4?ne.set(q.x,q.y,q.z,q.w):ne.set(q,_e,Re,xe),de.scissor(F.copy(ne).multiplyScalar(X).floor())},this.getScissorTest=function(){return ie},this.setScissorTest=function(q){de.setScissorTest(ie=q)},this.setOpaqueSort=function(q){J=q},this.setTransparentSort=function(q){Z=q},this.getClearColor=function(q){return q.copy(Ne.getClearColor())},this.setClearColor=function(){Ne.setClearColor.apply(Ne,arguments)},this.getClearAlpha=function(){return Ne.getClearAlpha()},this.setClearAlpha=function(){Ne.setClearAlpha.apply(Ne,arguments)},this.clear=function(q=!0,_e=!0,Re=!0){let xe=0;q&&(xe|=16384),_e&&(xe|=256),Re&&(xe|=1024),Ee.clear(xe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Ve,!1),e.removeEventListener("webglcontextrestored",Ye,!1),e.removeEventListener("webglcontextcreationerror",it,!1),ct.dispose(),Y.dispose(),ue.dispose(),Me.dispose(),Oe.dispose(),Fe.dispose(),U.dispose(),j.dispose(),qe.dispose(),se.dispose(),se.removeEventListener("sessionstart",nt),se.removeEventListener("sessionend",lt),Ie&&(Ie.dispose(),Ie=null),Ft.stop()};function Ve(q){q.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),w=!0}function Ye(){console.log("THREE.WebGLRenderer: Context Restored."),w=!1;const q=ye.autoReset,_e=me.enabled,Re=me.autoUpdate,xe=me.needsUpdate,ke=me.type;re(),ye.autoReset=q,me.enabled=_e,me.autoUpdate=Re,me.needsUpdate=xe,me.type=ke}function it(q){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",q.statusMessage)}function st(q){const _e=q.target;_e.removeEventListener("dispose",st),ot(_e)}function ot(q){ae(q),ue.remove(q)}function ae(q){const _e=ue.get(q).programs;_e!==void 0&&(_e.forEach(function(Re){qe.releaseProgram(Re)}),q.isShaderMaterial&&qe.releaseShaderCache(q))}this.renderBufferDirect=function(q,_e,Re,xe,ke,ft){_e===null&&(_e=Ae);const mt=ke.isMesh&&ke.matrixWorld.determinant()<0,_t=Cr(q,_e,Re,xe,ke);de.setMaterial(xe,mt);let yt=Re.index,Ct=1;xe.wireframe===!0&&(yt=ze.getWireframeAttribute(Re),Ct=2);const gt=Re.drawRange,vt=Re.attributes.position;let kt=gt.start*Ct,yn=(gt.start+gt.count)*Ct;ft!==null&&(kt=Math.max(kt,ft.start*Ct),yn=Math.min(yn,(ft.start+ft.count)*Ct)),yt!==null?(kt=Math.max(kt,0),yn=Math.min(yn,yt.count)):vt!=null&&(kt=Math.max(kt,0),yn=Math.min(yn,vt.count));const cn=yn-kt;if(cn<0||cn===1/0)return;U.setup(ke,xe,_t,Re,yt);let wn,Qt=k;if(yt!==null&&(wn=Le.get(yt),Qt=L,Qt.setIndex(wn)),ke.isMesh)xe.wireframe===!0?(de.setLineWidth(xe.wireframeLinewidth*$e()),Qt.setMode(1)):Qt.setMode(4);else if(ke.isLine){let Et=xe.linewidth;Et===void 0&&(Et=1),de.setLineWidth(Et*$e()),ke.isLineSegments?Qt.setMode(1):ke.isLineLoop?Qt.setMode(2):Qt.setMode(3)}else ke.isPoints?Qt.setMode(0):ke.isSprite&&Qt.setMode(4);if(ke.isInstancedMesh)Qt.renderInstances(kt,cn,ke.count);else if(Re.isInstancedBufferGeometry){const Et=Re._maxInstanceCount!==void 0?Re._maxInstanceCount:1/0,dr=Math.min(Re.instanceCount,Et);Qt.renderInstances(kt,cn,dr)}else Qt.render(kt,cn)},this.compile=function(q,_e){function Re(xe,ke,ft){xe.transparent===!0&&xe.side===Wc?(xe.side=Lr,xe.needsUpdate=!0,sn(xe,ke,ft),xe.side=Qi,xe.needsUpdate=!0,sn(xe,ke,ft),xe.side=Wc):sn(xe,ke,ft)}g=Y.get(q),g.init(),C.push(g),q.traverseVisible(function(xe){xe.isLight&&xe.layers.test(_e.layers)&&(g.pushLight(xe),xe.castShadow&&g.pushShadow(xe))}),g.setupLights(y.physicallyCorrectLights),q.traverse(function(xe){const ke=xe.material;if(ke)if(Array.isArray(ke))for(let ft=0;ft<ke.length;ft++){const mt=ke[ft];Re(mt,q,xe)}else Re(ke,q,xe)}),C.pop(),g=null};let De=null;function He(q){De&&De(q)}function nt(){Ft.stop()}function lt(){Ft.start()}const Ft=new y2;Ft.setAnimationLoop(He),typeof self<"u"&&Ft.setContext(self),this.setAnimationLoop=function(q){De=q,se.setAnimationLoop(q),q===null?Ft.stop():Ft.start()},se.addEventListener("sessionstart",nt),se.addEventListener("sessionend",lt),this.render=function(q,_e){if(_e!==void 0&&_e.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(w===!0)return;q.matrixWorldAutoUpdate===!0&&q.updateMatrixWorld(),_e.parent===null&&_e.matrixWorldAutoUpdate===!0&&_e.updateMatrixWorld(),se.enabled===!0&&se.isPresenting===!0&&(se.cameraAutoUpdate===!0&&se.updateCamera(_e),_e=se.getCamera()),q.isScene===!0&&q.onBeforeRender(y,q,_e,E),g=Y.get(q,C.length),g.init(),C.push(g),ve.multiplyMatrices(_e.projectionMatrix,_e.matrixWorldInverse),be.setFromProjectionMatrix(ve),Te=this.localClippingEnabled,oe=W.init(this.clippingPlanes,Te,_e),p=ct.get(q,b.length),p.init(),b.push(p),an(q,_e,0,y.sortObjects),p.finish(),y.sortObjects===!0&&p.sort(J,Z),oe===!0&&W.beginShadows();const Re=g.state.shadowsArray;if(me.render(Re,q,_e),oe===!0&&W.endShadows(),this.info.autoReset===!0&&this.info.reset(),Ne.render(p,q),g.setupLights(y.physicallyCorrectLights),_e.isArrayCamera){const xe=_e.cameras;for(let ke=0,ft=xe.length;ke<ft;ke++){const mt=xe[ke];ln(p,q,mt,mt.viewport)}}else ln(p,q,_e);E!==null&&(pe.updateMultisampleRenderTarget(E),pe.updateRenderTargetMipmap(E)),q.isScene===!0&&q.onAfterRender(y,q,_e),U.resetDefaultState(),T=-1,M=null,C.pop(),C.length>0?g=C[C.length-1]:g=null,b.pop(),b.length>0?p=b[b.length-1]:p=null};function an(q,_e,Re,xe){if(q.visible===!1)return;if(q.layers.test(_e.layers)){if(q.isGroup)Re=q.renderOrder;else if(q.isLOD)q.autoUpdate===!0&&q.update(_e);else if(q.isLight)g.pushLight(q),q.castShadow&&g.pushShadow(q);else if(q.isSprite){if(!q.frustumCulled||be.intersectsSprite(q)){xe&&Be.setFromMatrixPosition(q.matrixWorld).applyMatrix4(ve);const mt=Fe.update(q),_t=q.material;_t.visible&&p.push(q,mt,_t,Re,Be.z,null)}}else if((q.isMesh||q.isLine||q.isPoints)&&(q.isSkinnedMesh&&q.skeleton.frame!==ye.render.frame&&(q.skeleton.update(),q.skeleton.frame=ye.render.frame),!q.frustumCulled||be.intersectsObject(q))){xe&&Be.setFromMatrixPosition(q.matrixWorld).applyMatrix4(ve);const mt=Fe.update(q),_t=q.material;if(Array.isArray(_t)){const yt=mt.groups;for(let Ct=0,gt=yt.length;Ct<gt;Ct++){const vt=yt[Ct],kt=_t[vt.materialIndex];kt&&kt.visible&&p.push(q,mt,kt,Re,Be.z,vt)}}else _t.visible&&p.push(q,mt,_t,Re,Be.z,null)}}const ft=q.children;for(let mt=0,_t=ft.length;mt<_t;mt++)an(ft[mt],_e,Re,xe)}function ln(q,_e,Re,xe){const ke=q.opaque,ft=q.transmissive,mt=q.transparent;g.setupLightsView(Re),ft.length>0&&$n(ke,_e,Re),xe&&de.viewport(B.copy(xe)),ke.length>0&&At(ke,_e,Re),ft.length>0&&At(ft,_e,Re),mt.length>0&&At(mt,_e,Re),de.buffers.depth.setTest(!0),de.buffers.depth.setMask(!0),de.buffers.color.setMask(!0),de.setPolygonOffset(!1)}function $n(q,_e,Re){const xe=we.isWebGL2;Ie===null&&(Ie=new Mo(1,1,{generateMipmaps:!0,type:Se.has("EXT_color_buffer_half_float")?lc:Co,minFilter:ac,samples:xe&&s===!0?4:0})),y.getDrawingBufferSize(he),xe?Ie.setSize(he.x,he.y):Ie.setSize(Zd(he.x),Zd(he.y));const ke=y.getRenderTarget();y.setRenderTarget(Ie),y.clear();const ft=y.toneMapping;y.toneMapping=Ji,At(q,_e,Re),y.toneMapping=ft,pe.updateMultisampleRenderTarget(Ie),pe.updateRenderTargetMipmap(Ie),y.setRenderTarget(ke)}function At(q,_e,Re){const xe=_e.isScene===!0?_e.overrideMaterial:null;for(let ke=0,ft=q.length;ke<ft;ke++){const mt=q[ke],_t=mt.object,yt=mt.geometry,Ct=xe===null?mt.material:xe,gt=mt.group;_t.layers.test(Re.layers)&&Un(_t,_e,Re,yt,Ct,gt)}}function Un(q,_e,Re,xe,ke,ft){q.onBeforeRender(y,_e,Re,xe,ke,ft),q.modelViewMatrix.multiplyMatrices(Re.matrixWorldInverse,q.matrixWorld),q.normalMatrix.getNormalMatrix(q.modelViewMatrix),ke.onBeforeRender(y,_e,Re,xe,q,ft),ke.transparent===!0&&ke.side===Wc?(ke.side=Lr,ke.needsUpdate=!0,y.renderBufferDirect(Re,_e,xe,ke,q,ft),ke.side=Qi,ke.needsUpdate=!0,y.renderBufferDirect(Re,_e,xe,ke,q,ft),ke.side=Wc):y.renderBufferDirect(Re,_e,xe,ke,q,ft),q.onAfterRender(y,_e,Re,xe,ke,ft)}function sn(q,_e,Re){_e.isScene!==!0&&(_e=Ae);const xe=ue.get(q),ke=g.state.lights,ft=g.state.shadowsArray,mt=ke.state.version,_t=qe.getParameters(q,ke.state,ft,_e,Re),yt=qe.getProgramCacheKey(_t);let Ct=xe.programs;xe.environment=q.isMeshStandardMaterial?_e.environment:null,xe.fog=_e.fog,xe.envMap=(q.isMeshStandardMaterial?Oe:Me).get(q.envMap||xe.environment),Ct===void 0&&(q.addEventListener("dispose",st),Ct=new Map,xe.programs=Ct);let gt=Ct.get(yt);if(gt!==void 0){if(xe.currentProgram===gt&&xe.lightsStateVersion===mt)return Ii(q,_t),gt}else _t.uniforms=qe.getUniforms(q),q.onBuild(Re,_t,y),q.onBeforeCompile(_t,y),gt=qe.acquireProgram(_t,yt),Ct.set(yt,gt),xe.uniforms=_t.uniforms;const vt=xe.uniforms;(!q.isShaderMaterial&&!q.isRawShaderMaterial||q.clipping===!0)&&(vt.clippingPlanes=W.uniform),Ii(q,_t),xe.needsLights=sr(q),xe.lightsStateVersion=mt,xe.needsLights&&(vt.ambientLightColor.value=ke.state.ambient,vt.lightProbe.value=ke.state.probe,vt.directionalLights.value=ke.state.directional,vt.directionalLightShadows.value=ke.state.directionalShadow,vt.spotLights.value=ke.state.spot,vt.spotLightShadows.value=ke.state.spotShadow,vt.rectAreaLights.value=ke.state.rectArea,vt.ltc_1.value=ke.state.rectAreaLTC1,vt.ltc_2.value=ke.state.rectAreaLTC2,vt.pointLights.value=ke.state.point,vt.pointLightShadows.value=ke.state.pointShadow,vt.hemisphereLights.value=ke.state.hemi,vt.directionalShadowMap.value=ke.state.directionalShadowMap,vt.directionalShadowMatrix.value=ke.state.directionalShadowMatrix,vt.spotShadowMap.value=ke.state.spotShadowMap,vt.spotLightMatrix.value=ke.state.spotLightMatrix,vt.spotLightMap.value=ke.state.spotLightMap,vt.pointShadowMap.value=ke.state.pointShadowMap,vt.pointShadowMatrix.value=ke.state.pointShadowMatrix);const kt=gt.getUniforms(),yn=n0.seqWithValue(kt.seq,vt);return xe.currentProgram=gt,xe.uniformsList=yn,gt}function Ii(q,_e){const Re=ue.get(q);Re.outputEncoding=_e.outputEncoding,Re.instancing=_e.instancing,Re.skinning=_e.skinning,Re.morphTargets=_e.morphTargets,Re.morphNormals=_e.morphNormals,Re.morphColors=_e.morphColors,Re.morphTargetsCount=_e.morphTargetsCount,Re.numClippingPlanes=_e.numClippingPlanes,Re.numIntersection=_e.numClipIntersection,Re.vertexAlphas=_e.vertexAlphas,Re.vertexTangents=_e.vertexTangents,Re.toneMapping=_e.toneMapping}function Cr(q,_e,Re,xe,ke){_e.isScene!==!0&&(_e=Ae),pe.resetTextureUnits();const ft=_e.fog,mt=xe.isMeshStandardMaterial?_e.environment:null,_t=E===null?y.outputEncoding:E.isXRRenderTarget===!0?E.texture.encoding:Po,yt=(xe.isMeshStandardMaterial?Oe:Me).get(xe.envMap||mt),Ct=xe.vertexColors===!0&&!!Re.attributes.color&&Re.attributes.color.itemSize===4,gt=!!xe.normalMap&&!!Re.attributes.tangent,vt=!!Re.morphAttributes.position,kt=!!Re.morphAttributes.normal,yn=!!Re.morphAttributes.color,cn=xe.toneMapped?y.toneMapping:Ji,wn=Re.morphAttributes.position||Re.morphAttributes.normal||Re.morphAttributes.color,Qt=wn!==void 0?wn.length:0,Et=ue.get(xe),dr=g.state.lights;if(oe===!0&&(Te===!0||q!==M)){const Wn=q===M&&xe.id===T;W.setState(xe,q,Wn)}let un=!1;xe.version===Et.__version?(Et.needsLights&&Et.lightsStateVersion!==dr.state.version||Et.outputEncoding!==_t||ke.isInstancedMesh&&Et.instancing===!1||!ke.isInstancedMesh&&Et.instancing===!0||ke.isSkinnedMesh&&Et.skinning===!1||!ke.isSkinnedMesh&&Et.skinning===!0||Et.envMap!==yt||xe.fog===!0&&Et.fog!==ft||Et.numClippingPlanes!==void 0&&(Et.numClippingPlanes!==W.numPlanes||Et.numIntersection!==W.numIntersection)||Et.vertexAlphas!==Ct||Et.vertexTangents!==gt||Et.morphTargets!==vt||Et.morphNormals!==kt||Et.morphColors!==yn||Et.toneMapping!==cn||we.isWebGL2===!0&&Et.morphTargetsCount!==Qt)&&(un=!0):(un=!0,Et.__version=xe.version);let Vn=Et.currentProgram;un===!0&&(Vn=sn(xe,_e,ke));let ns=!1,Hr=!1,Yr=!1;const mn=Vn.getUniforms(),$t=Et.uniforms;if(de.useProgram(Vn.program)&&(ns=!0,Hr=!0,Yr=!0),xe.id!==T&&(T=xe.id,Hr=!0),ns||M!==q){if(mn.setValue(Ee,"projectionMatrix",q.projectionMatrix),we.logarithmicDepthBuffer&&mn.setValue(Ee,"logDepthBufFC",2/(Math.log(q.far+1)/Math.LN2)),M!==q&&(M=q,Hr=!0,Yr=!0),xe.isShaderMaterial||xe.isMeshPhongMaterial||xe.isMeshToonMaterial||xe.isMeshStandardMaterial||xe.envMap){const Wn=mn.map.cameraPosition;Wn!==void 0&&Wn.setValue(Ee,Be.setFromMatrixPosition(q.matrixWorld))}(xe.isMeshPhongMaterial||xe.isMeshToonMaterial||xe.isMeshLambertMaterial||xe.isMeshBasicMaterial||xe.isMeshStandardMaterial||xe.isShaderMaterial)&&mn.setValue(Ee,"isOrthographic",q.isOrthographicCamera===!0),(xe.isMeshPhongMaterial||xe.isMeshToonMaterial||xe.isMeshLambertMaterial||xe.isMeshBasicMaterial||xe.isMeshStandardMaterial||xe.isShaderMaterial||xe.isShadowMaterial||ke.isSkinnedMesh)&&mn.setValue(Ee,"viewMatrix",q.matrixWorldInverse)}if(ke.isSkinnedMesh){mn.setOptional(Ee,ke,"bindMatrix"),mn.setOptional(Ee,ke,"bindMatrixInverse");const Wn=ke.skeleton;Wn&&(we.floatVertexTextures?(Wn.boneTexture===null&&Wn.computeBoneTexture(),mn.setValue(Ee,"boneTexture",Wn.boneTexture,pe),mn.setValue(Ee,"boneTextureSize",Wn.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const rs=Re.morphAttributes;if((rs.position!==void 0||rs.normal!==void 0||rs.color!==void 0&&we.isWebGL2===!0)&&We.update(ke,Re,xe,Vn),(Hr||Et.receiveShadow!==ke.receiveShadow)&&(Et.receiveShadow=ke.receiveShadow,mn.setValue(Ee,"receiveShadow",ke.receiveShadow)),xe.isMeshGouraudMaterial&&xe.envMap!==null&&($t.envMap.value=yt,$t.flipEnvMap.value=yt.isCubeTexture&&yt.isRenderTargetTexture===!1?-1:1),Hr&&(mn.setValue(Ee,"toneMappingExposure",y.toneMappingExposure),Et.needsLights&&si($t,Yr),ft&&xe.fog===!0&&pt.refreshFogUniforms($t,ft),pt.refreshMaterialUniforms($t,xe,X,G,Ie),n0.upload(Ee,Et.uniformsList,$t,pe)),xe.isShaderMaterial&&xe.uniformsNeedUpdate===!0&&(n0.upload(Ee,Et.uniformsList,$t,pe),xe.uniformsNeedUpdate=!1),xe.isSpriteMaterial&&mn.setValue(Ee,"center",ke.center),mn.setValue(Ee,"modelViewMatrix",ke.modelViewMatrix),mn.setValue(Ee,"normalMatrix",ke.normalMatrix),mn.setValue(Ee,"modelMatrix",ke.matrixWorld),xe.isShaderMaterial||xe.isRawShaderMaterial){const Wn=xe.uniformsGroups;for(let qr=0,Mt=Wn.length;qr<Mt;qr++)if(we.isWebGL2){const is=Wn[qr];j.update(is,Vn),j.bind(is,Vn)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Vn}function si(q,_e){q.ambientLightColor.needsUpdate=_e,q.lightProbe.needsUpdate=_e,q.directionalLights.needsUpdate=_e,q.directionalLightShadows.needsUpdate=_e,q.pointLights.needsUpdate=_e,q.pointLightShadows.needsUpdate=_e,q.spotLights.needsUpdate=_e,q.spotLightShadows.needsUpdate=_e,q.rectAreaLights.needsUpdate=_e,q.hemisphereLights.needsUpdate=_e}function sr(q){return q.isMeshLambertMaterial||q.isMeshToonMaterial||q.isMeshPhongMaterial||q.isMeshStandardMaterial||q.isShadowMaterial||q.isShaderMaterial&&q.lights===!0}this.getActiveCubeFace=function(){return A},this.getActiveMipmapLevel=function(){return O},this.getRenderTarget=function(){return E},this.setRenderTargetTextures=function(q,_e,Re){ue.get(q.texture).__webglTexture=_e,ue.get(q.depthTexture).__webglTexture=Re;const xe=ue.get(q);xe.__hasExternalTextures=!0,xe.__hasExternalTextures&&(xe.__autoAllocateDepthBuffer=Re===void 0,xe.__autoAllocateDepthBuffer||Se.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),xe.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(q,_e){const Re=ue.get(q);Re.__webglFramebuffer=_e,Re.__useDefaultFramebuffer=_e===void 0},this.setRenderTarget=function(q,_e=0,Re=0){E=q,A=_e,O=Re;let xe=!0,ke=null,ft=!1,mt=!1;if(q){const yt=ue.get(q);yt.__useDefaultFramebuffer!==void 0?(de.bindFramebuffer(36160,null),xe=!1):yt.__webglFramebuffer===void 0?pe.setupRenderTarget(q):yt.__hasExternalTextures&&pe.rebindTextures(q,ue.get(q.texture).__webglTexture,ue.get(q.depthTexture).__webglTexture);const Ct=q.texture;(Ct.isData3DTexture||Ct.isDataArrayTexture||Ct.isCompressedArrayTexture)&&(mt=!0);const gt=ue.get(q).__webglFramebuffer;q.isWebGLCubeRenderTarget?(ke=gt[_e],ft=!0):we.isWebGL2&&q.samples>0&&pe.useMultisampledRTT(q)===!1?ke=ue.get(q).__webglMultisampledFramebuffer:ke=gt,B.copy(q.viewport),F.copy(q.scissor),I=q.scissorTest}else B.copy(H).multiplyScalar(X).floor(),F.copy(ne).multiplyScalar(X).floor(),I=ie;if(de.bindFramebuffer(36160,ke)&&we.drawBuffers&&xe&&de.drawBuffers(q,ke),de.viewport(B),de.scissor(F),de.setScissorTest(I),ft){const yt=ue.get(q.texture);Ee.framebufferTexture2D(36160,36064,34069+_e,yt.__webglTexture,Re)}else if(mt){const yt=ue.get(q.texture),Ct=_e||0;Ee.framebufferTextureLayer(36160,36064,yt.__webglTexture,Re||0,Ct)}T=-1},this.readRenderTargetPixels=function(q,_e,Re,xe,ke,ft,mt){if(!(q&&q.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let _t=ue.get(q).__webglFramebuffer;if(q.isWebGLCubeRenderTarget&&mt!==void 0&&(_t=_t[mt]),_t){de.bindFramebuffer(36160,_t);try{const yt=q.texture,Ct=yt.format,gt=yt.type;if(Ct!==ti&&P.convert(Ct)!==Ee.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const vt=gt===lc&&(Se.has("EXT_color_buffer_half_float")||we.isWebGL2&&Se.has("EXT_color_buffer_float"));if(gt!==Co&&P.convert(gt)!==Ee.getParameter(35738)&&!(gt===fo&&(we.isWebGL2||Se.has("OES_texture_float")||Se.has("WEBGL_color_buffer_float")))&&!vt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}_e>=0&&_e<=q.width-xe&&Re>=0&&Re<=q.height-ke&&Ee.readPixels(_e,Re,xe,ke,P.convert(Ct),P.convert(gt),ft)}finally{const yt=E!==null?ue.get(E).__webglFramebuffer:null;de.bindFramebuffer(36160,yt)}}},this.copyFramebufferToTexture=function(q,_e,Re=0){const xe=Math.pow(2,-Re),ke=Math.floor(_e.image.width*xe),ft=Math.floor(_e.image.height*xe);pe.setTexture2D(_e,0),Ee.copyTexSubImage2D(3553,Re,0,0,q.x,q.y,ke,ft),de.unbindTexture()},this.copyTextureToTexture=function(q,_e,Re,xe=0){const ke=_e.image.width,ft=_e.image.height,mt=P.convert(Re.format),_t=P.convert(Re.type);pe.setTexture2D(Re,0),Ee.pixelStorei(37440,Re.flipY),Ee.pixelStorei(37441,Re.premultiplyAlpha),Ee.pixelStorei(3317,Re.unpackAlignment),_e.isDataTexture?Ee.texSubImage2D(3553,xe,q.x,q.y,ke,ft,mt,_t,_e.image.data):_e.isCompressedTexture?Ee.compressedTexSubImage2D(3553,xe,q.x,q.y,_e.mipmaps[0].width,_e.mipmaps[0].height,mt,_e.mipmaps[0].data):Ee.texSubImage2D(3553,xe,q.x,q.y,mt,_t,_e.image),xe===0&&Re.generateMipmaps&&Ee.generateMipmap(3553),de.unbindTexture()},this.copyTextureToTexture3D=function(q,_e,Re,xe,ke=0){if(y.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const ft=q.max.x-q.min.x+1,mt=q.max.y-q.min.y+1,_t=q.max.z-q.min.z+1,yt=P.convert(xe.format),Ct=P.convert(xe.type);let gt;if(xe.isData3DTexture)pe.setTexture3D(xe,0),gt=32879;else if(xe.isDataArrayTexture)pe.setTexture2DArray(xe,0),gt=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Ee.pixelStorei(37440,xe.flipY),Ee.pixelStorei(37441,xe.premultiplyAlpha),Ee.pixelStorei(3317,xe.unpackAlignment);const vt=Ee.getParameter(3314),kt=Ee.getParameter(32878),yn=Ee.getParameter(3316),cn=Ee.getParameter(3315),wn=Ee.getParameter(32877),Qt=Re.isCompressedTexture?Re.mipmaps[0]:Re.image;Ee.pixelStorei(3314,Qt.width),Ee.pixelStorei(32878,Qt.height),Ee.pixelStorei(3316,q.min.x),Ee.pixelStorei(3315,q.min.y),Ee.pixelStorei(32877,q.min.z),Re.isDataTexture||Re.isData3DTexture?Ee.texSubImage3D(gt,ke,_e.x,_e.y,_e.z,ft,mt,_t,yt,Ct,Qt.data):Re.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Ee.compressedTexSubImage3D(gt,ke,_e.x,_e.y,_e.z,ft,mt,_t,yt,Qt.data)):Ee.texSubImage3D(gt,ke,_e.x,_e.y,_e.z,ft,mt,_t,yt,Ct,Qt),Ee.pixelStorei(3314,vt),Ee.pixelStorei(32878,kt),Ee.pixelStorei(3316,yn),Ee.pixelStorei(3315,cn),Ee.pixelStorei(32877,wn),ke===0&&xe.generateMipmaps&&Ee.generateMipmap(gt),de.unbindTexture()},this.initTexture=function(q){q.isCubeTexture?pe.setTextureCube(q,0):q.isData3DTexture?pe.setTexture3D(q,0):q.isDataArrayTexture||q.isCompressedArrayTexture?pe.setTexture2DArray(q,0):pe.setTexture2D(q,0),de.unbindTexture()},this.resetState=function(){A=0,O=0,E=null,de.reset(),U.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class M5 extends P2{}M5.prototype.isWebGL1Renderer=!0;class E5 extends rr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class zp extends Oo{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new tn(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Hv=new K,Yv=new K,qv=new Gt,Bh=new q0,uu=new Ec;class A5 extends rr{constructor(e=new Rr,t=new zp){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let i=1,s=t.count;i<s;i++)Hv.fromBufferAttribute(t,i-1),Yv.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=Hv.distanceTo(Yv);e.setAttribute("lineDistance",new Or(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),uu.copy(n.boundingSphere),uu.applyMatrix4(i),uu.radius+=s,e.ray.intersectsSphere(uu)===!1)return;qv.copy(i).invert(),Bh.copy(e.ray).applyMatrix4(qv);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=a*a,f=new K,h=new K,p=new K,g=new K,b=this.isLineSegments?2:1,C=n.index,w=n.attributes.position;if(C!==null){const A=Math.max(0,o.start),O=Math.min(C.count,o.start+o.count);for(let E=A,T=O-1;E<T;E+=b){const M=C.getX(E),B=C.getX(E+1);if(f.fromBufferAttribute(w,M),h.fromBufferAttribute(w,B),Bh.distanceSqToSegment(f,h,g,p)>u)continue;g.applyMatrix4(this.matrixWorld);const I=e.ray.origin.distanceTo(g);I<e.near||I>e.far||t.push({distance:I,point:p.clone().applyMatrix4(this.matrixWorld),index:E,face:null,faceIndex:null,object:this})}}else{const A=Math.max(0,o.start),O=Math.min(w.count,o.start+o.count);for(let E=A,T=O-1;E<T;E+=b){if(f.fromBufferAttribute(w,E),h.fromBufferAttribute(w,E+1),Bh.distanceSqToSegment(f,h,g,p)>u)continue;g.applyMatrix4(this.matrixWorld);const B=e.ray.origin.distanceTo(g);B<e.near||B>e.far||t.push({distance:B,point:p.clone().applyMatrix4(this.matrixWorld),index:E,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const Zv=new K,jv=new K;class M2 extends A5{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let i=0,s=t.count;i<s;i+=2)Zv.fromBufferAttribute(t,i),jv.fromBufferAttribute(t,i+1),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+Zv.distanceTo(jv);e.setAttribute("lineDistance",new Or(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Ti{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),s+=n.distanceTo(i),t.push(s),i=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let i=0;const s=n.length;let o;t?o=t:o=e*n[s-1];let a=0,u=s-1,f;for(;a<=u;)if(i=Math.floor(a+(u-a)/2),f=n[i]-o,f<0)a=i+1;else if(f>0)u=i-1;else{u=i;break}if(i=u,n[i]===o)return i/(s-1);const h=n[i],g=n[i+1]-h,b=(o-h)/g;return(i+b)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),u=t||(o.isVector2?new je:new K);return u.copy(a).sub(o).normalize(),u}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new K,i=[],s=[],o=[],a=new K,u=new Gt;for(let b=0;b<=e;b++){const C=b/e;i[b]=this.getTangentAt(C,new K)}s[0]=new K,o[0]=new K;let f=Number.MAX_VALUE;const h=Math.abs(i[0].x),p=Math.abs(i[0].y),g=Math.abs(i[0].z);h<=f&&(f=h,n.set(1,0,0)),p<=f&&(f=p,n.set(0,1,0)),g<=f&&n.set(0,0,1),a.crossVectors(i[0],n).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let b=1;b<=e;b++){if(s[b]=s[b-1].clone(),o[b]=o[b-1].clone(),a.crossVectors(i[b-1],i[b]),a.length()>Number.EPSILON){a.normalize();const C=Math.acos(qn(i[b-1].dot(i[b]),-1,1));s[b].applyMatrix4(u.makeRotationAxis(a,C))}o[b].crossVectors(i[b],s[b])}if(t===!0){let b=Math.acos(qn(s[0].dot(s[e]),-1,1));b/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(b=-b);for(let C=1;C<=e;C++)s[C].applyMatrix4(u.makeRotationAxis(i[C],b*C)),o[C].crossVectors(i[C],s[C])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Gp extends Ti{constructor(e=0,t=0,n=1,i=1,s=0,o=Math.PI*2,a=!1,u=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=u}getPoint(e,t){const n=t||new je,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let u=this.aX+this.xRadius*Math.cos(a),f=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const h=Math.cos(this.aRotation),p=Math.sin(this.aRotation),g=u-this.aX,b=f-this.aY;u=g*h-b*p+this.aX,f=g*p+b*h+this.aY}return n.set(u,f)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class T5 extends Gp{constructor(e,t,n,i,s,o){super(e,t,n,n,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function $p(){let r=0,e=0,t=0,n=0;function i(s,o,a,u){r=s,e=a,t=-3*s+3*o-2*a-u,n=2*s-2*o+a+u}return{initCatmullRom:function(s,o,a,u,f){i(o,a,f*(a-s),f*(u-o))},initNonuniformCatmullRom:function(s,o,a,u,f,h,p){let g=(o-s)/f-(a-s)/(f+h)+(a-o)/h,b=(a-o)/h-(u-o)/(h+p)+(u-a)/p;g*=h,b*=h,i(o,a,g,b)},calc:function(s){const o=s*s,a=o*s;return r+e*s+t*o+n*a}}}const fu=new K,Fh=new $p,Nh=new $p,kh=new $p;class I5 extends Ti{constructor(e=[],t=!1,n="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=i}getPoint(e,t=new K){const n=t,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),u=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:u===0&&a===s-1&&(a=s-2,u=1);let f,h;this.closed||a>0?f=i[(a-1)%s]:(fu.subVectors(i[0],i[1]).add(i[0]),f=fu);const p=i[a%s],g=i[(a+1)%s];if(this.closed||a+2<s?h=i[(a+2)%s]:(fu.subVectors(i[s-1],i[s-2]).add(i[s-1]),h=fu),this.curveType==="centripetal"||this.curveType==="chordal"){const b=this.curveType==="chordal"?.5:.25;let C=Math.pow(f.distanceToSquared(p),b),y=Math.pow(p.distanceToSquared(g),b),w=Math.pow(g.distanceToSquared(h),b);y<1e-4&&(y=1),C<1e-4&&(C=y),w<1e-4&&(w=y),Fh.initNonuniformCatmullRom(f.x,p.x,g.x,h.x,C,y,w),Nh.initNonuniformCatmullRom(f.y,p.y,g.y,h.y,C,y,w),kh.initNonuniformCatmullRom(f.z,p.z,g.z,h.z,C,y,w)}else this.curveType==="catmullrom"&&(Fh.initCatmullRom(f.x,p.x,g.x,h.x,this.tension),Nh.initCatmullRom(f.y,p.y,g.y,h.y,this.tension),kh.initCatmullRom(f.z,p.z,g.z,h.z,this.tension));return n.set(Fh.calc(u),Nh.calc(u),kh.calc(u)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new K().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function Kv(r,e,t,n,i){const s=(n-e)*.5,o=(i-t)*.5,a=r*r,u=r*a;return(2*t-2*n+s+o)*u+(-3*t+3*n-2*s-o)*a+s*r+t}function L5(r,e){const t=1-r;return t*t*e}function D5(r,e){return 2*(1-r)*r*e}function O5(r,e){return r*r*e}function Kl(r,e,t,n){return L5(r,e)+D5(r,t)+O5(r,n)}function R5(r,e){const t=1-r;return t*t*t*e}function B5(r,e){const t=1-r;return 3*t*t*r*e}function F5(r,e){return 3*(1-r)*r*r*e}function N5(r,e){return r*r*r*e}function Jl(r,e,t,n,i){return R5(r,e)+B5(r,t)+F5(r,n)+N5(r,i)}class E2 extends Ti{constructor(e=new je,t=new je,n=new je,i=new je){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new je){const n=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return n.set(Jl(e,i.x,s.x,o.x,a.x),Jl(e,i.y,s.y,o.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class k5 extends Ti{constructor(e=new K,t=new K,n=new K,i=new K){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new K){const n=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return n.set(Jl(e,i.x,s.x,o.x,a.x),Jl(e,i.y,s.y,o.y,a.y),Jl(e,i.z,s.z,o.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Wp extends Ti{constructor(e=new je,t=new je){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new je){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const n=t||new je;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class U5 extends Ti{constructor(e=new K,t=new K){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new K){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class A2 extends Ti{constructor(e=new je,t=new je,n=new je){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new je){const n=t,i=this.v0,s=this.v1,o=this.v2;return n.set(Kl(e,i.x,s.x,o.x),Kl(e,i.y,s.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class V5 extends Ti{constructor(e=new K,t=new K,n=new K){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new K){const n=t,i=this.v0,s=this.v1,o=this.v2;return n.set(Kl(e,i.x,s.x,o.x),Kl(e,i.y,s.y,o.y),Kl(e,i.z,s.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class T2 extends Ti{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new je){const n=t,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,u=i[o===0?o:o-1],f=i[o],h=i[o>i.length-2?i.length-1:o+1],p=i[o>i.length-3?i.length-1:o+2];return n.set(Kv(a,u.x,f.x,h.x,p.x),Kv(a,u.y,f.y,h.y,p.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new je().fromArray(i))}return this}}var I2=Object.freeze({__proto__:null,ArcCurve:T5,CatmullRomCurve3:I5,CubicBezierCurve:E2,CubicBezierCurve3:k5,EllipseCurve:Gp,LineCurve:Wp,LineCurve3:U5,QuadraticBezierCurve:A2,QuadraticBezierCurve3:V5,SplineCurve:T2});class z5 extends Ti{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Wp(t,e))}getPoint(e,t){const n=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=n){const o=i[s]-n,a=this.curves[s],u=a.getLength(),f=u===0?0:1-o/u;return a.getPointAt(f,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,u=o.getPoints(a);for(let f=0;f<u.length;f++){const h=u[f];n&&n.equals(h)||(t.push(h),n=h)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(new I2[i.type]().fromJSON(i))}return this}}class uc extends z5{constructor(e){super(),this.type="Path",this.currentPoint=new je,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new Wp(this.currentPoint.clone(),new je(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,i){const s=new A2(this.currentPoint.clone(),new je(e,t),new je(n,i));return this.curves.push(s),this.currentPoint.set(n,i),this}bezierCurveTo(e,t,n,i,s,o){const a=new E2(this.currentPoint.clone(),new je(e,t),new je(n,i),new je(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new T2(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,i,s,o){const a=this.currentPoint.x,u=this.currentPoint.y;return this.absarc(e+a,t+u,n,i,s,o),this}absarc(e,t,n,i,s,o){return this.absellipse(e,t,n,n,i,s,o),this}ellipse(e,t,n,i,s,o,a,u){const f=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+f,t+h,n,i,s,o,a,u),this}absellipse(e,t,n,i,s,o,a,u){const f=new Gp(e,t,n,i,s,o,a,u);if(this.curves.length>0){const p=f.getPoint(0);p.equals(this.currentPoint)||this.lineTo(p.x,p.y)}this.curves.push(f);const h=f.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}let L2=class extends uc{constructor(e){super(e),this.uuid=Za(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(new uc().fromJSON(i))}return this}};const G5={triangulate:function(r,e,t=2){const n=e&&e.length,i=n?e[0]*t:r.length;let s=D2(r,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,u,f,h,p,g,b;if(n&&(s=Y5(r,e,s,t)),r.length>80*t){a=f=r[0],u=h=r[1];for(let C=t;C<i;C+=t)p=r[C],g=r[C+1],p<a&&(a=p),g<u&&(u=g),p>f&&(f=p),g>h&&(h=g);b=Math.max(f-a,h-u),b=b!==0?32767/b:0}return fc(s,o,t,a,u,b,0),o}};function D2(r,e,t,n,i){let s,o;if(i===iI(r,e,t,n)>0)for(s=e;s<t;s+=n)o=Jv(s,r[s],r[s+1],o);else for(s=t-n;s>=e;s-=n)o=Jv(s,r[s],r[s+1],o);return o&&j0(o,o.next)&&(dc(o),o=o.next),o}function To(r,e){if(!r)return r;e||(e=r);let t=r,n;do if(n=!1,!t.steiner&&(j0(t,t.next)||Sn(t.prev,t,t.next)===0)){if(dc(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function fc(r,e,t,n,i,s,o){if(!r)return;!o&&s&&J5(r,n,i,s);let a=r,u,f;for(;r.prev!==r.next;){if(u=r.prev,f=r.next,s?W5(r,n,i,s):$5(r)){e.push(u.i/t|0),e.push(r.i/t|0),e.push(f.i/t|0),dc(r),r=f.next,a=f.next;continue}if(r=f,r===a){o?o===1?(r=X5(To(r),e,t),fc(r,e,t,n,i,s,2)):o===2&&H5(r,e,t,n,i,s):fc(To(r),e,t,n,i,s,1);break}}}function $5(r){const e=r.prev,t=r,n=r.next;if(Sn(e,t,n)>=0)return!1;const i=e.x,s=t.x,o=n.x,a=e.y,u=t.y,f=n.y,h=i<s?i<o?i:o:s<o?s:o,p=a<u?a<f?a:f:u<f?u:f,g=i>s?i>o?i:o:s>o?s:o,b=a>u?a>f?a:f:u>f?u:f;let C=n.next;for(;C!==e;){if(C.x>=h&&C.x<=g&&C.y>=p&&C.y<=b&&Ea(i,a,s,u,o,f,C.x,C.y)&&Sn(C.prev,C,C.next)>=0)return!1;C=C.next}return!0}function W5(r,e,t,n){const i=r.prev,s=r,o=r.next;if(Sn(i,s,o)>=0)return!1;const a=i.x,u=s.x,f=o.x,h=i.y,p=s.y,g=o.y,b=a<u?a<f?a:f:u<f?u:f,C=h<p?h<g?h:g:p<g?p:g,y=a>u?a>f?a:f:u>f?u:f,w=h>p?h>g?h:g:p>g?p:g,A=Kd(b,C,e,t,n),O=Kd(y,w,e,t,n);let E=r.prevZ,T=r.nextZ;for(;E&&E.z>=A&&T&&T.z<=O;){if(E.x>=b&&E.x<=y&&E.y>=C&&E.y<=w&&E!==i&&E!==o&&Ea(a,h,u,p,f,g,E.x,E.y)&&Sn(E.prev,E,E.next)>=0||(E=E.prevZ,T.x>=b&&T.x<=y&&T.y>=C&&T.y<=w&&T!==i&&T!==o&&Ea(a,h,u,p,f,g,T.x,T.y)&&Sn(T.prev,T,T.next)>=0))return!1;T=T.nextZ}for(;E&&E.z>=A;){if(E.x>=b&&E.x<=y&&E.y>=C&&E.y<=w&&E!==i&&E!==o&&Ea(a,h,u,p,f,g,E.x,E.y)&&Sn(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;T&&T.z<=O;){if(T.x>=b&&T.x<=y&&T.y>=C&&T.y<=w&&T!==i&&T!==o&&Ea(a,h,u,p,f,g,T.x,T.y)&&Sn(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function X5(r,e,t){let n=r;do{const i=n.prev,s=n.next.next;!j0(i,s)&&O2(i,n,n.next,s)&&hc(i,s)&&hc(s,i)&&(e.push(i.i/t|0),e.push(n.i/t|0),e.push(s.i/t|0),dc(n),dc(n.next),n=r=s),n=n.next}while(n!==r);return To(n)}function H5(r,e,t,n,i,s){let o=r;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&tI(o,a)){let u=R2(o,a);o=To(o,o.next),u=To(u,u.next),fc(o,e,t,n,i,s,0),fc(u,e,t,n,i,s,0);return}a=a.next}o=o.next}while(o!==r)}function Y5(r,e,t,n){const i=[];let s,o,a,u,f;for(s=0,o=e.length;s<o;s++)a=e[s]*n,u=s<o-1?e[s+1]*n:r.length,f=D2(r,a,u,n,!1),f===f.next&&(f.steiner=!0),i.push(eI(f));for(i.sort(q5),s=0;s<i.length;s++)t=Z5(i[s],t);return t}function q5(r,e){return r.x-e.x}function Z5(r,e){const t=j5(r,e);if(!t)return e;const n=R2(t,r);return To(n,n.next),To(t,t.next)}function j5(r,e){let t=e,n=-1/0,i;const s=r.x,o=r.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const g=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(g<=s&&g>n&&(n=g,i=t.x<t.next.x?t:t.next,g===s))return i}t=t.next}while(t!==e);if(!i)return null;const a=i,u=i.x,f=i.y;let h=1/0,p;t=i;do s>=t.x&&t.x>=u&&s!==t.x&&Ea(o<f?s:n,o,u,f,o<f?n:s,o,t.x,t.y)&&(p=Math.abs(o-t.y)/(s-t.x),hc(t,r)&&(p<h||p===h&&(t.x>i.x||t.x===i.x&&K5(i,t)))&&(i=t,h=p)),t=t.next;while(t!==a);return i}function K5(r,e){return Sn(r.prev,r,e.prev)<0&&Sn(e.next,r,r.next)<0}function J5(r,e,t,n){let i=r;do i.z===0&&(i.z=Kd(i.x,i.y,e,t,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==r);i.prevZ.nextZ=null,i.prevZ=null,Q5(i)}function Q5(r){let e,t,n,i,s,o,a,u,f=1;do{for(t=r,r=null,s=null,o=0;t;){for(o++,n=t,a=0,e=0;e<f&&(a++,n=n.nextZ,!!n);e++);for(u=f;a>0||u>0&&n;)a!==0&&(u===0||!n||t.z<=n.z)?(i=t,t=t.nextZ,a--):(i=n,n=n.nextZ,u--),s?s.nextZ=i:r=i,i.prevZ=s,s=i;t=n}s.nextZ=null,f*=2}while(o>1);return r}function Kd(r,e,t,n,i){return r=(r-t)*i|0,e=(e-n)*i|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function eI(r){let e=r,t=r;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==r);return t}function Ea(r,e,t,n,i,s,o,a){return(i-o)*(e-a)>=(r-o)*(s-a)&&(r-o)*(n-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(i-o)*(n-a)}function tI(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!nI(r,e)&&(hc(r,e)&&hc(e,r)&&rI(r,e)&&(Sn(r.prev,r,e.prev)||Sn(r,e.prev,e))||j0(r,e)&&Sn(r.prev,r,r.next)>0&&Sn(e.prev,e,e.next)>0)}function Sn(r,e,t){return(e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y)}function j0(r,e){return r.x===e.x&&r.y===e.y}function O2(r,e,t,n){const i=du(Sn(r,e,t)),s=du(Sn(r,e,n)),o=du(Sn(t,n,r)),a=du(Sn(t,n,e));return!!(i!==s&&o!==a||i===0&&hu(r,t,e)||s===0&&hu(r,n,e)||o===0&&hu(t,r,n)||a===0&&hu(t,e,n))}function hu(r,e,t){return e.x<=Math.max(r.x,t.x)&&e.x>=Math.min(r.x,t.x)&&e.y<=Math.max(r.y,t.y)&&e.y>=Math.min(r.y,t.y)}function du(r){return r>0?1:r<0?-1:0}function nI(r,e){let t=r;do{if(t.i!==r.i&&t.next.i!==r.i&&t.i!==e.i&&t.next.i!==e.i&&O2(t,t.next,r,e))return!0;t=t.next}while(t!==r);return!1}function hc(r,e){return Sn(r.prev,r,r.next)<0?Sn(r,e,r.next)>=0&&Sn(r,r.prev,e)>=0:Sn(r,e,r.prev)<0||Sn(r,r.next,e)<0}function rI(r,e){let t=r,n=!1;const i=(r.x+e.x)/2,s=(r.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==r);return n}function R2(r,e){const t=new Jd(r.i,r.x,r.y),n=new Jd(e.i,e.x,e.y),i=r.next,s=e.prev;return r.next=e,e.prev=r,t.next=i,i.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function Jv(r,e,t,n){const i=new Jd(r,e,t);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function dc(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function Jd(r,e,t){this.i=r,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function iI(r,e,t,n){let i=0;for(let s=e,o=t-n;s<t;s+=n)i+=(r[o]-r[s])*(r[s+1]+r[o+1]),o=s;return i}class Ql{static area(e){const t=e.length;let n=0;for(let i=t-1,s=0;s<t;i=s++)n+=e[i].x*e[s].y-e[s].x*e[i].y;return n*.5}static isClockWise(e){return Ql.area(e)<0}static triangulateShape(e,t){const n=[],i=[],s=[];Qv(e),e1(n,e);let o=e.length;t.forEach(Qv);for(let u=0;u<t.length;u++)i.push(o),o+=t[u].length,e1(n,t[u]);const a=G5.triangulate(n,i);for(let u=0;u<a.length;u+=3)s.push(a.slice(u,u+3));return s}}function Qv(r){const e=r.length;e>2&&r[e-1].equals(r[0])&&r.pop()}function e1(r,e){for(let t=0;t<e.length;t++)r.push(e[t].x),r.push(e[t].y)}class Xp extends Rr{constructor(e=new L2([new je(.5,.5),new je(-.5,.5),new je(-.5,-.5),new je(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,i=[],s=[];for(let a=0,u=e.length;a<u;a++){const f=e[a];o(f)}this.setAttribute("position",new Or(i,3)),this.setAttribute("uv",new Or(s,2)),this.computeVertexNormals();function o(a){const u=[],f=t.curveSegments!==void 0?t.curveSegments:12,h=t.steps!==void 0?t.steps:1,p=t.depth!==void 0?t.depth:1;let g=t.bevelEnabled!==void 0?t.bevelEnabled:!0,b=t.bevelThickness!==void 0?t.bevelThickness:.2,C=t.bevelSize!==void 0?t.bevelSize:b-.1,y=t.bevelOffset!==void 0?t.bevelOffset:0,w=t.bevelSegments!==void 0?t.bevelSegments:3;const A=t.extrudePath,O=t.UVGenerator!==void 0?t.UVGenerator:sI;let E,T=!1,M,B,F,I;A&&(E=A.getSpacedPoints(h),T=!0,g=!1,M=A.computeFrenetFrames(h,!1),B=new K,F=new K,I=new K),g||(w=0,b=0,C=0,y=0);const N=a.extractPoints(f);let G=N.shape;const X=N.holes;if(!Ql.isClockWise(G)){G=G.reverse();for(let ue=0,pe=X.length;ue<pe;ue++){const Me=X[ue];Ql.isClockWise(Me)&&(X[ue]=Me.reverse())}}const Z=Ql.triangulateShape(G,X),H=G;for(let ue=0,pe=X.length;ue<pe;ue++){const Me=X[ue];G=G.concat(Me)}function ne(ue,pe,Me){return pe||console.error("THREE.ExtrudeGeometry: vec does not exist"),pe.clone().multiplyScalar(Me).add(ue)}const ie=G.length,be=Z.length;function oe(ue,pe,Me){let Oe,Le,ze;const Fe=ue.x-pe.x,qe=ue.y-pe.y,pt=Me.x-ue.x,ct=Me.y-ue.y,Y=Fe*Fe+qe*qe,W=Fe*ct-qe*pt;if(Math.abs(W)>Number.EPSILON){const me=Math.sqrt(Y),Ne=Math.sqrt(pt*pt+ct*ct),We=pe.x-qe/me,k=pe.y+Fe/me,L=Me.x-ct/Ne,P=Me.y+pt/Ne,U=((L-We)*ct-(P-k)*pt)/(Fe*ct-qe*pt);Oe=We+Fe*U-ue.x,Le=k+qe*U-ue.y;const j=Oe*Oe+Le*Le;if(j<=2)return new je(Oe,Le);ze=Math.sqrt(j/2)}else{let me=!1;Fe>Number.EPSILON?pt>Number.EPSILON&&(me=!0):Fe<-Number.EPSILON?pt<-Number.EPSILON&&(me=!0):Math.sign(qe)===Math.sign(ct)&&(me=!0),me?(Oe=-qe,Le=Fe,ze=Math.sqrt(Y)):(Oe=Fe,Le=qe,ze=Math.sqrt(Y/2))}return new je(Oe/ze,Le/ze)}const Te=[];for(let ue=0,pe=H.length,Me=pe-1,Oe=ue+1;ue<pe;ue++,Me++,Oe++)Me===pe&&(Me=0),Oe===pe&&(Oe=0),Te[ue]=oe(H[ue],H[Me],H[Oe]);const Ie=[];let ve,he=Te.concat();for(let ue=0,pe=X.length;ue<pe;ue++){const Me=X[ue];ve=[];for(let Oe=0,Le=Me.length,ze=Le-1,Fe=Oe+1;Oe<Le;Oe++,ze++,Fe++)ze===Le&&(ze=0),Fe===Le&&(Fe=0),ve[Oe]=oe(Me[Oe],Me[ze],Me[Fe]);Ie.push(ve),he=he.concat(ve)}for(let ue=0;ue<w;ue++){const pe=ue/w,Me=b*Math.cos(pe*Math.PI/2),Oe=C*Math.sin(pe*Math.PI/2)+y;for(let Le=0,ze=H.length;Le<ze;Le++){const Fe=ne(H[Le],Te[Le],Oe);ut(Fe.x,Fe.y,-Me)}for(let Le=0,ze=X.length;Le<ze;Le++){const Fe=X[Le];ve=Ie[Le];for(let qe=0,pt=Fe.length;qe<pt;qe++){const ct=ne(Fe[qe],ve[qe],Oe);ut(ct.x,ct.y,-Me)}}}const Be=C+y;for(let ue=0;ue<ie;ue++){const pe=g?ne(G[ue],he[ue],Be):G[ue];T?(F.copy(M.normals[0]).multiplyScalar(pe.x),B.copy(M.binormals[0]).multiplyScalar(pe.y),I.copy(E[0]).add(F).add(B),ut(I.x,I.y,I.z)):ut(pe.x,pe.y,0)}for(let ue=1;ue<=h;ue++)for(let pe=0;pe<ie;pe++){const Me=g?ne(G[pe],he[pe],Be):G[pe];T?(F.copy(M.normals[ue]).multiplyScalar(Me.x),B.copy(M.binormals[ue]).multiplyScalar(Me.y),I.copy(E[ue]).add(F).add(B),ut(I.x,I.y,I.z)):ut(Me.x,Me.y,p/h*ue)}for(let ue=w-1;ue>=0;ue--){const pe=ue/w,Me=b*Math.cos(pe*Math.PI/2),Oe=C*Math.sin(pe*Math.PI/2)+y;for(let Le=0,ze=H.length;Le<ze;Le++){const Fe=ne(H[Le],Te[Le],Oe);ut(Fe.x,Fe.y,p+Me)}for(let Le=0,ze=X.length;Le<ze;Le++){const Fe=X[Le];ve=Ie[Le];for(let qe=0,pt=Fe.length;qe<pt;qe++){const ct=ne(Fe[qe],ve[qe],Oe);T?ut(ct.x,ct.y+E[h-1].y,E[h-1].x+Me):ut(ct.x,ct.y,p+Me)}}}Ae(),$e();function Ae(){const ue=i.length/3;if(g){let pe=0,Me=ie*pe;for(let Oe=0;Oe<be;Oe++){const Le=Z[Oe];Se(Le[2]+Me,Le[1]+Me,Le[0]+Me)}pe=h+w*2,Me=ie*pe;for(let Oe=0;Oe<be;Oe++){const Le=Z[Oe];Se(Le[0]+Me,Le[1]+Me,Le[2]+Me)}}else{for(let pe=0;pe<be;pe++){const Me=Z[pe];Se(Me[2],Me[1],Me[0])}for(let pe=0;pe<be;pe++){const Me=Z[pe];Se(Me[0]+ie*h,Me[1]+ie*h,Me[2]+ie*h)}}n.addGroup(ue,i.length/3-ue,0)}function $e(){const ue=i.length/3;let pe=0;Ee(H,pe),pe+=H.length;for(let Me=0,Oe=X.length;Me<Oe;Me++){const Le=X[Me];Ee(Le,pe),pe+=Le.length}n.addGroup(ue,i.length/3-ue,1)}function Ee(ue,pe){let Me=ue.length;for(;--Me>=0;){const Oe=Me;let Le=Me-1;Le<0&&(Le=ue.length-1);for(let ze=0,Fe=h+w*2;ze<Fe;ze++){const qe=ie*ze,pt=ie*(ze+1),ct=pe+Oe+qe,Y=pe+Le+qe,W=pe+Le+pt,me=pe+Oe+pt;we(ct,Y,W,me)}}}function ut(ue,pe,Me){u.push(ue),u.push(pe),u.push(Me)}function Se(ue,pe,Me){de(ue),de(pe),de(Me);const Oe=i.length/3,Le=O.generateTopUV(n,i,Oe-3,Oe-2,Oe-1);ye(Le[0]),ye(Le[1]),ye(Le[2])}function we(ue,pe,Me,Oe){de(ue),de(pe),de(Oe),de(pe),de(Me),de(Oe);const Le=i.length/3,ze=O.generateSideWallUV(n,i,Le-6,Le-3,Le-2,Le-1);ye(ze[0]),ye(ze[1]),ye(ze[3]),ye(ze[1]),ye(ze[2]),ye(ze[3])}function de(ue){i.push(u[ue*3+0]),i.push(u[ue*3+1]),i.push(u[ue*3+2])}function ye(ue){s.push(ue.x),s.push(ue.y)}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return oI(t,n,e)}static fromJSON(e,t){const n=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];n.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new I2[i.type]().fromJSON(i)),new Xp(n,e.options)}}const sI={generateTopUV:function(r,e,t,n,i){const s=e[t*3],o=e[t*3+1],a=e[n*3],u=e[n*3+1],f=e[i*3],h=e[i*3+1];return[new je(s,o),new je(a,u),new je(f,h)]},generateSideWallUV:function(r,e,t,n,i,s){const o=e[t*3],a=e[t*3+1],u=e[t*3+2],f=e[n*3],h=e[n*3+1],p=e[n*3+2],g=e[i*3],b=e[i*3+1],C=e[i*3+2],y=e[s*3],w=e[s*3+1],A=e[s*3+2];return Math.abs(a-h)<Math.abs(o-f)?[new je(o,1-u),new je(f,1-p),new je(g,1-C),new je(y,1-A)]:[new je(a,1-u),new je(h,1-p),new je(b,1-C),new je(w,1-A)]}};function oI(r,e,t){if(t.shapes=[],Array.isArray(r))for(let n=0,i=r.length;n<i;n++){const s=r[n];t.shapes.push(s.uuid)}else t.shapes.push(r.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class aI extends Oo{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Fp,this.normalScale=new je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class lI extends Oo{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new tn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new tn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Fp,this.normalScale=new je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Bp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class B2 extends rr{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new tn(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}const Uh=new Gt,t1=new K,n1=new K;class cI{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new je(512,512),this.map=null,this.mapPass=null,this.matrix=new Gt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new kp,this._frameExtents=new je(1,1),this._viewportCount=1,this._viewports=[new Zt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;t1.setFromMatrixPosition(e.matrixWorld),t.position.copy(t1),n1.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(n1),t.updateMatrixWorld(),Uh.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Uh),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(Uh)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}const r1=new Gt,Sl=new K,Vh=new K;class uI extends cI{constructor(){super(new Ir(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new je(4,2),this._viewportCount=6,this._viewports=[new Zt(2,1,1,1),new Zt(0,1,1,1),new Zt(3,1,1,1),new Zt(1,1,1,1),new Zt(3,0,1,1),new Zt(1,0,1,1)],this._cubeDirections=[new K(1,0,0),new K(-1,0,0),new K(0,0,1),new K(0,0,-1),new K(0,1,0),new K(0,-1,0)],this._cubeUps=[new K(0,1,0),new K(0,1,0),new K(0,1,0),new K(0,1,0),new K(0,0,1),new K(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,i=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),Sl.setFromMatrixPosition(e.matrixWorld),n.position.copy(Sl),Vh.copy(n.position),Vh.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Vh),n.updateMatrixWorld(),i.makeTranslation(-Sl.x,-Sl.y,-Sl.z),r1.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(r1)}}class fI extends B2{constructor(e,t,n=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new uI}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class hI extends B2{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class dI{constructor(e,t,n=0,i=1/0){this.ray=new q0(e,t),this.near=n,this.far=i,this.camera=null,this.layers=new Np,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,n=[]){return Qd(e,this,n,t),n.sort(i1),n}intersectObjects(e,t=!0,n=[]){for(let i=0,s=e.length;i<s;i++)Qd(e[i],this,n,t);return n.sort(i1),n}}function i1(r,e){return r.distance-e.distance}function Qd(r,e,t,n){if(r.layers.test(e.layers)&&r.raycast(e,t),n===!0){const i=r.children;for(let s=0,o=i.length;s<o;s++)Qd(i[s],e,t,!0)}}class s1{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(qn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}const o1=new K,pu=new K;class $r{constructor(e=new K,t=new K){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){o1.subVectors(e,this.start),pu.subVectors(this.end,this.start);const n=pu.dot(pu);let s=pu.dot(o1)/n;return t&&(s=qn(s,0,1)),s}closestPointToPoint(e,t,n){const i=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}class pI extends M2{constructor(e=10,t=10,n=4473924,i=8947848){n=new tn(n),i=new tn(i);const s=t/2,o=e/t,a=e/2,u=[],f=[];for(let g=0,b=0,C=-a;g<=t;g++,C+=o){u.push(-a,0,C,a,0,C),u.push(C,0,-a,C,0,a);const y=g===s?n:i;y.toArray(f,b),b+=3,y.toArray(f,b),b+=3,y.toArray(f,b),b+=3,y.toArray(f,b),b+=3}const h=new Rr;h.setAttribute("position",new Or(u,3)),h.setAttribute("color",new Or(f,3));const p=new zp({vertexColors:!0,toneMapped:!1});super(h,p),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const mu=new Wr;class mI extends M2{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new Rr;s.setIndex(new jn(n,1)),s.setAttribute("position",new jn(i,3)),super(s,new zp({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&mu.setFromObject(this.object),mu.isEmpty())return;const t=mu.min,n=mu.max,i=this.geometry.attributes.position,s=i.array;s[0]=n.x,s[1]=n.y,s[2]=n.z,s[3]=t.x,s[4]=n.y,s[5]=n.z,s[6]=t.x,s[7]=t.y,s[8]=n.z,s[9]=n.x,s[10]=t.y,s[11]=n.z,s[12]=n.x,s[13]=n.y,s[14]=t.z,s[15]=t.x,s[16]=n.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=n.x,s[22]=t.y,s[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Rp}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Rp);function F2(r){return"buffer"in r.polygons&&r.polygons.buffer instanceof Rr}function N2(r,e,t){return Op(r,e,{label:t})}function k2(r,e,t){const n=r.addFolder({title:e,expanded:t});return Lo(()=>{n.dispose()}),n}const U2=new lI({transparent:!0,opacity:.9}),a1=new aI,V2=0,gI=1,vI=2,l1=2,zh=1.25,c1=1,r0=6*4+4+4,ep=65535,xI=Math.pow(2,-24);class gu{constructor(){}}function vi(r,e,t){return t.min.x=e[r],t.min.y=e[r+1],t.min.z=e[r+2],t.max.x=e[r+3],t.max.y=e[r+4],t.max.z=e[r+5],t}function u1(r){let e=-1,t=-1/0;for(let n=0;n<3;n++){const i=r[n+3]-r[n];i>t&&(t=i,e=n)}return e}function f1(r,e){e.set(r)}function h1(r,e,t){let n,i;for(let s=0;s<3;s++){const o=s+3;n=r[s],i=e[s],t[s]=n<i?n:i,n=r[o],i=e[o],t[o]=n>i?n:i}}function vu(r,e,t){for(let n=0;n<3;n++){const i=e[r+2*n],s=e[r+2*n+1],o=i-s,a=i+s;o<t[n]&&(t[n]=o),a>t[n+3]&&(t[n+3]=a)}}function Cl(r){const e=r[3]-r[0],t=r[4]-r[1],n=r[5]-r[2];return 2*(e*t+t*n+n*e)}function bI(r,e){if(!r.index){const t=r.attributes.position.count,n=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;let i;t>65535?i=new Uint32Array(new n(4*t)):i=new Uint16Array(new n(2*t)),r.setIndex(new jn(i,1));for(let s=0;s<t;s++)i[s]=s}}function yI(r){if(!r.groups||!r.groups.length)return[{offset:0,count:r.index.count/3}];const e=[],t=new Set;for(const i of r.groups)t.add(i.start),t.add(i.start+i.count);const n=Array.from(t.values()).sort((i,s)=>i-s);for(let i=0;i<n.length-1;i++){const s=n[i],o=n[i+1];e.push({offset:s/3,count:(o-s)/3})}return e}function Gh(r,e,t,n,i=null){let s=1/0,o=1/0,a=1/0,u=-1/0,f=-1/0,h=-1/0,p=1/0,g=1/0,b=1/0,C=-1/0,y=-1/0,w=-1/0;const A=i!==null;for(let O=e*6,E=(e+t)*6;O<E;O+=6){const T=r[O+0],M=r[O+1],B=T-M,F=T+M;B<s&&(s=B),F>u&&(u=F),A&&T<p&&(p=T),A&&T>C&&(C=T);const I=r[O+2],N=r[O+3],G=I-N,X=I+N;G<o&&(o=G),X>f&&(f=X),A&&I<g&&(g=I),A&&I>y&&(y=I);const J=r[O+4],Z=r[O+5],H=J-Z,ne=J+Z;H<a&&(a=H),ne>h&&(h=ne),A&&J<b&&(b=J),A&&J>w&&(w=J)}n[0]=s,n[1]=o,n[2]=a,n[3]=u,n[4]=f,n[5]=h,A&&(i[0]=p,i[1]=g,i[2]=b,i[3]=C,i[4]=y,i[5]=w)}function wI(r,e,t,n){let i=1/0,s=1/0,o=1/0,a=-1/0,u=-1/0,f=-1/0;for(let h=e*6,p=(e+t)*6;h<p;h+=6){const g=r[h+0];g<i&&(i=g),g>a&&(a=g);const b=r[h+2];b<s&&(s=b),b>u&&(u=b);const C=r[h+4];C<o&&(o=C),C>f&&(f=C)}n[0]=i,n[1]=s,n[2]=o,n[3]=a,n[4]=u,n[5]=f}function _I(r,e,t,n,i){let s=t,o=t+n-1;const a=i.pos,u=i.axis*2;for(;;){for(;s<=o&&e[s*6+u]<a;)s++;for(;s<=o&&e[o*6+u]>=a;)o--;if(s<o){for(let f=0;f<3;f++){let h=r[s*3+f];r[s*3+f]=r[o*3+f],r[o*3+f]=h;let p=e[s*6+f*2+0];e[s*6+f*2+0]=e[o*6+f*2+0],e[o*6+f*2+0]=p;let g=e[s*6+f*2+1];e[s*6+f*2+1]=e[o*6+f*2+1],e[o*6+f*2+1]=g}s++,o--}else return s}}const Yi=32,SI=(r,e)=>r.candidate-e.candidate,vs=new Array(Yi).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),xu=new Float32Array(6);function CI(r,e,t,n,i,s){let o=-1,a=0;if(s===V2)o=u1(e),o!==-1&&(a=(e[o]+e[o+3])/2);else if(s===gI)o=u1(r),o!==-1&&(a=PI(t,n,i,o));else if(s===vI){const u=Cl(r);let f=zh*i;const h=n*6,p=(n+i)*6;for(let g=0;g<3;g++){const b=e[g],w=(e[g+3]-b)/Yi;if(i<Yi/4){const A=[...vs];A.length=i;let O=0;for(let T=h;T<p;T+=6,O++){const M=A[O];M.candidate=t[T+2*g],M.count=0;const{bounds:B,leftCacheBounds:F,rightCacheBounds:I}=M;for(let N=0;N<3;N++)I[N]=1/0,I[N+3]=-1/0,F[N]=1/0,F[N+3]=-1/0,B[N]=1/0,B[N+3]=-1/0;vu(T,t,B)}A.sort(SI);let E=i;for(let T=0;T<E;T++){const M=A[T];for(;T+1<E&&A[T+1].candidate===M.candidate;)A.splice(T+1,1),E--}for(let T=h;T<p;T+=6){const M=t[T+2*g];for(let B=0;B<E;B++){const F=A[B];M>=F.candidate?vu(T,t,F.rightCacheBounds):(vu(T,t,F.leftCacheBounds),F.count++)}}for(let T=0;T<E;T++){const M=A[T],B=M.count,F=i-M.count,I=M.leftCacheBounds,N=M.rightCacheBounds;let G=0;B!==0&&(G=Cl(I)/u);let X=0;F!==0&&(X=Cl(N)/u);const J=c1+zh*(G*B+X*F);J<f&&(o=g,f=J,a=M.candidate)}}else{for(let E=0;E<Yi;E++){const T=vs[E];T.count=0,T.candidate=b+w+E*w;const M=T.bounds;for(let B=0;B<3;B++)M[B]=1/0,M[B+3]=-1/0}for(let E=h;E<p;E+=6){let B=~~((t[E+2*g]-b)/w);B>=Yi&&(B=Yi-1);const F=vs[B];F.count++,vu(E,t,F.bounds)}const A=vs[Yi-1];f1(A.bounds,A.rightCacheBounds);for(let E=Yi-2;E>=0;E--){const T=vs[E],M=vs[E+1];h1(T.bounds,M.rightCacheBounds,T.rightCacheBounds)}let O=0;for(let E=0;E<Yi-1;E++){const T=vs[E],M=T.count,B=T.bounds,I=vs[E+1].rightCacheBounds;M!==0&&(O===0?f1(B,xu):h1(B,xu,xu)),O+=M;let N=0,G=0;O!==0&&(N=Cl(xu)/u);const X=i-O;X!==0&&(G=Cl(I)/u);const J=c1+zh*(N*O+G*X);J<f&&(o=g,f=J,a=T.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${s} used.`);return{axis:o,pos:a}}function PI(r,e,t,n){let i=0;for(let s=e,o=e+t;s<o;s++)i+=r[s*6+n*2];return i/t}function MI(r,e){const t=r.attributes.position,n=r.index.array,i=n.length/3,s=new Float32Array(i*6),o=t.normalized,a=t.array,u=t.offset||0;let f=3;t.isInterleavedBufferAttribute&&(f=t.data.stride);const h=["getX","getY","getZ"];for(let p=0;p<i;p++){const g=p*3,b=p*6;let C,y,w;o?(C=n[g+0],y=n[g+1],w=n[g+2]):(C=n[g+0]*f+u,y=n[g+1]*f+u,w=n[g+2]*f+u);for(let A=0;A<3;A++){let O,E,T;o?(O=t[h[A]](C),E=t[h[A]](y),T=t[h[A]](w)):(O=a[C+A],E=a[y+A],T=a[w+A]);let M=O;E<M&&(M=E),T<M&&(M=T);let B=O;E>B&&(B=E),T>B&&(B=T);const F=(B-M)/2,I=A*2;s[b+I+0]=M+F,s[b+I+1]=F+(Math.abs(M)+F)*xI,M<e[A]&&(e[A]=M),B>e[A+3]&&(e[A+3]=B)}}return s}function EI(r,e){function t(A){g&&g(A/b)}function n(A,O,E,T=null,M=0){if(!C&&M>=u&&(C=!0,f&&(console.warn(`MeshBVH: Max depth of ${u} reached when generating BVH. Consider increasing maxDepth.`),console.warn(r))),E<=h||M>=u)return t(O+E),A.offset=O,A.count=E,A;const B=CI(A.boundingData,T,o,O,E,p);if(B.axis===-1)return t(O+E),A.offset=O,A.count=E,A;const F=_I(a,o,O,E,B);if(F===O||F===O+E)t(O+E),A.offset=O,A.count=E;else{A.splitAxis=B.axis;const I=new gu,N=O,G=F-O;A.left=I,I.boundingData=new Float32Array(6),Gh(o,N,G,I.boundingData,s),n(I,N,G,s,M+1);const X=new gu,J=F,Z=E-G;A.right=X,X.boundingData=new Float32Array(6),Gh(o,J,Z,X.boundingData,s),n(X,J,Z,s,M+1)}return A}bI(r,e);const i=new Float32Array(6),s=new Float32Array(6),o=MI(r,i),a=r.index.array,u=e.maxDepth,f=e.verbose,h=e.maxLeafTris,p=e.strategy,g=e.onProgress,b=r.index.count/3;let C=!1;const y=[],w=yI(r);if(w.length===1){const A=w[0],O=new gu;O.boundingData=i,wI(o,A.offset,A.count,s),n(O,A.offset,A.count,s),y.push(O)}else for(let A of w){const O=new gu;O.boundingData=new Float32Array(6),Gh(o,A.offset,A.count,O.boundingData,s),n(O,A.offset,A.count,s),y.push(O)}return y}function AI(r,e){const t=EI(r,e);let n,i,s;const o=[],a=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let h=0;h<t.length;h++){const p=t[h];let g=u(p);const b=new a(r0*g);n=new Float32Array(b),i=new Uint32Array(b),s=new Uint16Array(b),f(0,p),o.push(b)}return o;function u(h){return h.count?1:1+u(h.left)+u(h.right)}function f(h,p){const g=h/4,b=h/2,C=!!p.count,y=p.boundingData;for(let w=0;w<6;w++)n[g+w]=y[w];if(C){const w=p.offset,A=p.count;return i[g+6]=w,s[b+14]=A,s[b+15]=ep,h+r0}else{const w=p.left,A=p.right,O=p.splitAxis;let E;if(E=f(h+r0,w),E/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return i[g+6]=E/4,E=f(E,A),i[g+7]=O,E}}}class Si{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,t){let n=1/0,i=-1/0;for(let s=0,o=e.length;s<o;s++){const u=e[s][t];n=u<n?u:n,i=u>i?u:i}this.min=n,this.max=i}setFromPoints(e,t){let n=1/0,i=-1/0;for(let s=0,o=t.length;s<o;s++){const a=t[s],u=e.dot(a);n=u<n?u:n,i=u>i?u:i}this.min=n,this.max=i}isSeparated(e){return this.min>e.max||e.min>this.max}}Si.prototype.setFromBox=function(){const r=new K;return function(t,n){const i=n.min,s=n.max;let o=1/0,a=-1/0;for(let u=0;u<=1;u++)for(let f=0;f<=1;f++)for(let h=0;h<=1;h++){r.x=i.x*u+s.x*(1-u),r.y=i.y*f+s.y*(1-f),r.z=i.z*h+s.z*(1-h);const p=t.dot(r);o=Math.min(p,o),a=Math.max(p,a)}this.min=o,this.max=a}}();(function(){const r=new Si;return function(t,n){const i=t.points,s=t.satAxes,o=t.satBounds,a=n.points,u=n.satAxes,f=n.satBounds;for(let h=0;h<3;h++){const p=o[h],g=s[h];if(r.setFromPoints(g,a),p.isSeparated(r))return!1}for(let h=0;h<3;h++){const p=f[h],g=u[h];if(r.setFromPoints(g,i),p.isSeparated(r))return!1}}})();const TI=function(){const r=new K,e=new K,t=new K;return function(i,s,o){const a=i.start,u=r,f=s.start,h=e;t.subVectors(a,f),r.subVectors(i.end,i.start),e.subVectors(s.end,s.start);const p=t.dot(h),g=h.dot(u),b=h.dot(h),C=t.dot(u),w=u.dot(u)*b-g*g;let A,O;w!==0?A=(p*g-C*b)/w:A=0,O=(p+A*g)/b,o.x=A,o.y=O}}(),Hp=function(){const r=new je,e=new K,t=new K;return function(i,s,o,a){TI(i,s,r);let u=r.x,f=r.y;if(u>=0&&u<=1&&f>=0&&f<=1){i.at(u,o),s.at(f,a);return}else if(u>=0&&u<=1){f<0?s.at(0,a):s.at(1,a),i.closestPointToPoint(a,!0,o);return}else if(f>=0&&f<=1){u<0?i.at(0,o):i.at(1,o),s.closestPointToPoint(o,!0,a);return}else{let h;u<0?h=i.start:h=i.end;let p;f<0?p=s.start:p=s.end;const g=e,b=t;if(i.closestPointToPoint(p,!0,e),s.closestPointToPoint(h,!0,t),g.distanceToSquared(p)<=b.distanceToSquared(h)){o.copy(g),a.copy(p);return}else{o.copy(h),a.copy(b);return}}}}(),II=function(){const r=new K,e=new K,t=new di,n=new $r;return function(s,o){const{radius:a,center:u}=s,{a:f,b:h,c:p}=o;if(n.start=f,n.end=h,n.closestPointToPoint(u,!0,r).distanceTo(u)<=a||(n.start=f,n.end=p,n.closestPointToPoint(u,!0,r).distanceTo(u)<=a)||(n.start=h,n.end=p,n.closestPointToPoint(u,!0,r).distanceTo(u)<=a))return!0;const y=o.getPlane(t);if(Math.abs(y.distanceToPoint(u))<=a){const A=y.projectPoint(u,e);if(o.containsPoint(A))return!0}return!1}}(),LI=1e-15;function ca(r){return Math.abs(r)<LI}class Ci extends Dn{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new K),this.satBounds=new Array(4).fill().map(()=>new Si),this.points=[this.a,this.b,this.c],this.sphere=new Ec,this.plane=new di,this.needsUpdate=!0}intersectsSphere(e){return II(e,this)}update(){const e=this.a,t=this.b,n=this.c,i=this.points,s=this.satAxes,o=this.satBounds,a=s[0],u=o[0];this.getNormal(a),u.setFromPoints(a,i);const f=s[1],h=o[1];f.subVectors(e,t),h.setFromPoints(f,i);const p=s[2],g=o[2];p.subVectors(t,n),g.setFromPoints(p,i);const b=s[3],C=o[3];b.subVectors(n,e),C.setFromPoints(b,i),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(a,e),this.needsUpdate=!1}}Ci.prototype.closestPointToSegment=function(){const r=new K,e=new K,t=new $r;return function(i,s=null,o=null){const{start:a,end:u}=i,f=this.points;let h,p=1/0;for(let g=0;g<3;g++){const b=(g+1)%3;t.start.copy(f[g]),t.end.copy(f[b]),Hp(t,i,r,e),h=r.distanceToSquared(e),h<p&&(p=h,s&&s.copy(r),o&&o.copy(e))}return this.closestPointToPoint(a,r),h=a.distanceToSquared(r),h<p&&(p=h,s&&s.copy(r),o&&o.copy(a)),this.closestPointToPoint(u,r),h=u.distanceToSquared(r),h<p&&(p=h,s&&s.copy(r),o&&o.copy(u)),Math.sqrt(p)}}();Ci.prototype.intersectsTriangle=function(){const r=new Ci,e=new Array(3),t=new Array(3),n=new Si,i=new Si,s=new K,o=new K,a=new K,u=new K,f=new $r,h=new $r,p=new $r;return function(b,C=null,y=!1){this.needsUpdate&&this.update(),b.isExtendedTriangle?b.needsUpdate&&b.update():(r.copy(b),r.update(),b=r);const w=this.plane,A=b.plane;if(Math.abs(w.normal.dot(A.normal))>1-1e-10){const O=this.satBounds,E=this.satAxes;t[0]=b.a,t[1]=b.b,t[2]=b.c;for(let B=0;B<4;B++){const F=O[B],I=E[B];if(n.setFromPoints(I,t),F.isSeparated(n))return!1}const T=b.satBounds,M=b.satAxes;e[0]=this.a,e[1]=this.b,e[2]=this.c;for(let B=0;B<4;B++){const F=T[B],I=M[B];if(n.setFromPoints(I,e),F.isSeparated(n))return!1}for(let B=0;B<4;B++){const F=E[B];for(let I=0;I<4;I++){const N=M[I];if(s.crossVectors(F,N),n.setFromPoints(s,e),i.setFromPoints(s,t),n.isSeparated(i))return!1}}return C&&(y||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),C.start.set(0,0,0),C.end.set(0,0,0)),!0}else{const O=this.points;let E=!1,T=0;for(let H=0;H<3;H++){const ne=O[H],ie=O[(H+1)%3];f.start.copy(ne),f.end.copy(ie),f.delta(o);const be=E?h.start:h.end,oe=ca(A.distanceToPoint(ne));if(ca(A.normal.dot(o))&&oe){h.copy(f),T=2;break}if((A.intersectLine(f,be)||oe)&&!ca(be.distanceTo(ie))){if(T++,E)break;E=!0}}if(T===1&&b.containsPoint(h.end))return C&&(C.start.copy(h.end),C.end.copy(h.end)),!0;if(T!==2)return!1;const M=b.points;let B=!1,F=0;for(let H=0;H<3;H++){const ne=M[H],ie=M[(H+1)%3];f.start.copy(ne),f.end.copy(ie),f.delta(a);const be=B?p.start:p.end,oe=ca(w.distanceToPoint(ne));if(ca(w.normal.dot(a))&&oe){p.copy(f),F=2;break}if((w.intersectLine(f,be)||oe)&&!ca(be.distanceTo(ie))){if(F++,B)break;B=!0}}if(F===1&&this.containsPoint(p.end))return C&&(C.start.copy(p.end),C.end.copy(p.end)),!0;if(F!==2)return!1;if(h.delta(o),p.delta(a),o.dot(a)<0){let H=p.start;p.start=p.end,p.end=H}const I=h.start.dot(o),N=h.end.dot(o),G=p.start.dot(o),X=p.end.dot(o),J=N<G,Z=I<X;return I!==X&&G!==N&&J===Z?!1:(C&&(u.subVectors(h.start,p.start),u.dot(o)>0?C.start.copy(h.start):C.start.copy(p.start),u.subVectors(h.end,p.end),u.dot(o)<0?C.end.copy(h.end):C.end.copy(p.end)),!0)}}}();Ci.prototype.distanceToPoint=function(){const r=new K;return function(t){return this.closestPointToPoint(t,r),t.distanceTo(r)}}();Ci.prototype.distanceToTriangle=function(){const r=new K,e=new K,t=["a","b","c"],n=new $r,i=new $r;return function(o,a=null,u=null){const f=a||u?n:null;if(this.intersectsTriangle(o,f))return(a||u)&&(a&&f.getCenter(a),u&&f.getCenter(u)),0;let h=1/0;for(let p=0;p<3;p++){let g;const b=t[p],C=o[b];this.closestPointToPoint(C,r),g=C.distanceToSquared(r),g<h&&(h=g,a&&a.copy(r),u&&u.copy(C));const y=this[b];o.closestPointToPoint(y,r),g=y.distanceToSquared(r),g<h&&(h=g,a&&a.copy(y),u&&u.copy(r))}for(let p=0;p<3;p++){const g=t[p],b=t[(p+1)%3];n.set(this[g],this[b]);for(let C=0;C<3;C++){const y=t[C],w=t[(C+1)%3];i.set(o[y],o[w]),Hp(n,i,r,e);const A=r.distanceToSquared(e);A<h&&(h=A,a&&a.copy(r),u&&u.copy(e))}}return Math.sqrt(h)}}();class Pi{constructor(e,t,n){this.isOrientedBox=!0,this.min=new K,this.max=new K,this.matrix=new Gt,this.invMatrix=new Gt,this.points=new Array(8).fill().map(()=>new K),this.satAxes=new Array(3).fill().map(()=>new K),this.satBounds=new Array(3).fill().map(()=>new Si),this.alignedSatBounds=new Array(3).fill().map(()=>new Si),this.needsUpdate=!1,e&&this.min.copy(e),t&&this.max.copy(t),n&&this.matrix.copy(n)}set(e,t,n){this.min.copy(e),this.max.copy(t),this.matrix.copy(n),this.needsUpdate=!0}copy(e){this.min.copy(e.min),this.max.copy(e.max),this.matrix.copy(e.matrix),this.needsUpdate=!0}}Pi.prototype.update=function(){return function(){const e=this.matrix,t=this.min,n=this.max,i=this.points;for(let f=0;f<=1;f++)for(let h=0;h<=1;h++)for(let p=0;p<=1;p++){const g=1*f|2*h|4*p,b=i[g];b.x=f?n.x:t.x,b.y=h?n.y:t.y,b.z=p?n.z:t.z,b.applyMatrix4(e)}const s=this.satBounds,o=this.satAxes,a=i[0];for(let f=0;f<3;f++){const h=o[f],p=s[f],g=1<<f,b=i[g];h.subVectors(a,b),p.setFromPoints(h,i)}const u=this.alignedSatBounds;u[0].setFromPointsField(i,"x"),u[1].setFromPointsField(i,"y"),u[2].setFromPointsField(i,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}();Pi.prototype.intersectsBox=function(){const r=new Si;return function(t){this.needsUpdate&&this.update();const n=t.min,i=t.max,s=this.satBounds,o=this.satAxes,a=this.alignedSatBounds;if(r.min=n.x,r.max=i.x,a[0].isSeparated(r)||(r.min=n.y,r.max=i.y,a[1].isSeparated(r))||(r.min=n.z,r.max=i.z,a[2].isSeparated(r)))return!1;for(let u=0;u<3;u++){const f=o[u],h=s[u];if(r.setFromBox(f,t),h.isSeparated(r))return!1}return!0}}();Pi.prototype.intersectsTriangle=function(){const r=new Ci,e=new Array(3),t=new Si,n=new Si,i=new K;return function(o){this.needsUpdate&&this.update(),o.isExtendedTriangle?o.needsUpdate&&o.update():(r.copy(o),r.update(),o=r);const a=this.satBounds,u=this.satAxes;e[0]=o.a,e[1]=o.b,e[2]=o.c;for(let g=0;g<3;g++){const b=a[g],C=u[g];if(t.setFromPoints(C,e),b.isSeparated(t))return!1}const f=o.satBounds,h=o.satAxes,p=this.points;for(let g=0;g<3;g++){const b=f[g],C=h[g];if(t.setFromPoints(C,p),b.isSeparated(t))return!1}for(let g=0;g<3;g++){const b=u[g];for(let C=0;C<4;C++){const y=h[C];if(i.crossVectors(b,y),t.setFromPoints(i,e),n.setFromPoints(i,p),t.isSeparated(n))return!1}}return!0}}();Pi.prototype.closestPointToPoint=function(){return function(e,t){return this.needsUpdate&&this.update(),t.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),t}}();Pi.prototype.distanceToPoint=function(){const r=new K;return function(t){return this.closestPointToPoint(t,r),t.distanceTo(r)}}();Pi.prototype.distanceToBox=function(){const r=["x","y","z"],e=new Array(12).fill().map(()=>new $r),t=new Array(12).fill().map(()=>new $r),n=new K,i=new K;return function(o,a=0,u=null,f=null){if(this.needsUpdate&&this.update(),this.intersectsBox(o))return(u||f)&&(o.getCenter(i),this.closestPointToPoint(i,n),o.closestPointToPoint(n,i),u&&u.copy(n),f&&f.copy(i)),0;const h=a*a,p=o.min,g=o.max,b=this.points;let C=1/0;for(let w=0;w<8;w++){const A=b[w];i.copy(A).clamp(p,g);const O=A.distanceToSquared(i);if(O<C&&(C=O,u&&u.copy(A),f&&f.copy(i),O<h))return Math.sqrt(O)}let y=0;for(let w=0;w<3;w++)for(let A=0;A<=1;A++)for(let O=0;O<=1;O++){const E=(w+1)%3,T=(w+2)%3,M=A<<E|O<<T,B=1<<w|A<<E|O<<T,F=b[M],I=b[B];e[y].set(F,I);const G=r[w],X=r[E],J=r[T],Z=t[y],H=Z.start,ne=Z.end;H[G]=p[G],H[X]=A?p[X]:g[X],H[J]=O?p[J]:g[X],ne[G]=g[G],ne[X]=A?p[X]:g[X],ne[J]=O?p[J]:g[X],y++}for(let w=0;w<=1;w++)for(let A=0;A<=1;A++)for(let O=0;O<=1;O++){i.x=w?g.x:p.x,i.y=A?g.y:p.y,i.z=O?g.z:p.z,this.closestPointToPoint(i,n);const E=i.distanceToSquared(n);if(E<C&&(C=E,u&&u.copy(n),f&&f.copy(i),E<h))return Math.sqrt(E)}for(let w=0;w<12;w++){const A=e[w];for(let O=0;O<12;O++){const E=t[O];Hp(A,E,n,i);const T=n.distanceToSquared(i);if(T<C&&(C=T,u&&u.copy(n),f&&f.copy(i),T<h))return Math.sqrt(T)}}return Math.sqrt(C)}}();const bu=new K,yu=new K,wu=new K,d1=new je,p1=new je,m1=new je,g1=new K;function DI(r,e,t,n,i,s){let o;return s===Lr?o=r.intersectTriangle(n,t,e,!0,i):o=r.intersectTriangle(e,t,n,s!==Mc,i),o===null?null:{distance:r.origin.distanceTo(i),point:i.clone()}}function OI(r,e,t,n,i,s,o){bu.fromBufferAttribute(e,n),yu.fromBufferAttribute(e,i),wu.fromBufferAttribute(e,s);const a=DI(r,bu,yu,wu,g1,o);if(a){t&&(d1.fromBufferAttribute(t,n),p1.fromBufferAttribute(t,i),m1.fromBufferAttribute(t,s),a.uv=Dn.getUV(g1,bu,yu,wu,d1,p1,m1,new je));const u={a:n,b:i,c:s,normal:new K,materialIndex:0};Dn.getNormal(bu,yu,wu,u.normal),a.face=u,a.faceIndex=n}return a}function z2(r,e,t,n,i){const s=n*3,o=r.index.getX(s),a=r.index.getX(s+1),u=r.index.getX(s+2),f=OI(t,r.attributes.position,r.attributes.uv,o,a,u,e);return f?(f.faceIndex=n,i&&i.push(f),f):null}function RI(r,e,t,n,i,s){for(let o=n,a=n+i;o<a;o++)z2(r,e,t,o,s)}function BI(r,e,t,n,i){let s=1/0,o=null;for(let a=n,u=n+i;a<u;a++){const f=z2(r,e,t,a);f&&f.distance<s&&(o=f,s=f.distance)}return o}function mi(r,e,t,n){const i=r.a,s=r.b,o=r.c;let a=e,u=e+1,f=e+2;t&&(a=t.getX(e),u=t.getX(e+1),f=t.getX(e+2)),i.x=n.getX(a),i.y=n.getY(a),i.z=n.getZ(a),s.x=n.getX(u),s.y=n.getY(u),s.z=n.getZ(u),o.x=n.getX(f),o.y=n.getY(f),o.z=n.getZ(f)}function v1(r,e,t,n,i,s,o){const a=t.index,u=t.attributes.position;for(let f=r,h=e+r;f<h;f++)if(mi(o,f*3,a,u),o.needsUpdate=!0,n(o,f,i,s))return!0;return!1}class G2{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){const e=this._primitives;return e.length===0?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}}function Is(r,e){return e[r+15]===65535}function Oa(r,e){return e[r+6]}function pc(r,e){return e[r+14]}function mc(r){return r+8}function gc(r,e){return e[r+6]}function FI(r,e){return e[r+7]}const Aa=new Wr,y0=new K,NI=["x","y","z"];function tp(r,e,t,n,i){let s=r*2,o=Ka,a=Ns,u=ks;if(Is(s,a)){const h=Oa(r,u),p=pc(s,a);RI(e,t,n,h,p,i)}else{const h=mc(r);w0(h,o,n,y0)&&tp(h,e,t,n,i);const p=gc(r,u);w0(p,o,n,y0)&&tp(p,e,t,n,i)}}function np(r,e,t,n){let i=r*2,s=Ka,o=Ns,a=ks;if(Is(i,o)){const f=Oa(r,a),h=pc(i,o);return BI(e,t,n,f,h)}else{const f=FI(r,a),h=NI[f],g=n.direction[h]>=0;let b,C;g?(b=mc(r),C=gc(r,a)):(b=gc(r,a),C=mc(r));const w=w0(b,s,n,y0)?np(b,e,t,n):null;if(w){const E=w.point[h];if(g?E<=s[C+f]:E>=s[C+f+3])return w}const O=w0(C,s,n,y0)?np(C,e,t,n):null;return w&&O?w.distance<=O.distance?w:O:w||O||null}}const kI=function(){let r,e;const t=[],n=new G2(()=>new Wr);return function(...o){r=n.getPrimitive(),e=n.getPrimitive(),t.push(r,e);const a=i(...o);n.releasePrimitive(r),n.releasePrimitive(e),t.pop(),t.pop();const u=t.length;return u>0&&(e=t[u-1],r=t[u-2]),a};function i(s,o,a,u,f=null,h=0,p=0){function g(E){let T=E*2,M=Ns,B=ks;for(;!Is(T,M);)E=mc(E),T=E*2;return Oa(E,B)}function b(E){let T=E*2,M=Ns,B=ks;for(;!Is(T,M);)E=gc(E,B),T=E*2;return Oa(E,B)+pc(T,M)}let C=s*2,y=Ka,w=Ns,A=ks;if(Is(C,w)){const E=Oa(s,A),T=pc(C,w);return vi(s,y,r),u(E,T,!1,p,h+s,r)}else{const E=mc(s),T=gc(s,A);let M=E,B=T,F,I,N,G;if(f&&(N=r,G=e,vi(M,y,N),vi(B,y,G),F=f(N),I=f(G),I<F)){M=T,B=E;const be=F;F=I,I=be,N=G}N||(N=r,vi(M,y,N));const X=Is(M*2,w),J=a(N,X,F,p+1,h+M);let Z;if(J===l1){const be=g(M),Te=b(M)-be;Z=u(be,Te,!0,p+1,h+M,N)}else Z=J&&i(M,o,a,u,f,h,p+1);if(Z)return!0;G=e,vi(B,y,G);const H=Is(B*2,w),ne=a(G,H,I,p+1,h+B);let ie;if(ne===l1){const be=g(B),Te=b(B)-be;ie=u(be,Te,!0,p+1,h+B,G)}else ie=ne&&i(B,o,a,u,f,h,p+1);return!!ie}}}(),UI=function(){const r=new Ci,e=new Ci,t=new Gt,n=new Pi,i=new Pi;return function s(o,a,u,f,h=null){let p=o*2,g=Ka,b=Ns,C=ks;if(h===null&&(u.boundingBox||u.computeBoundingBox(),n.set(u.boundingBox.min,u.boundingBox.max,f),h=n),Is(p,b)){const w=a,A=w.index,O=w.attributes.position,E=u.index,T=u.attributes.position,M=Oa(o,C),B=pc(p,b);if(t.copy(f).invert(),u.boundsTree)return vi(o,g,i),i.matrix.copy(t),i.needsUpdate=!0,u.boundsTree.shapecast({intersectsBounds:I=>i.intersectsBox(I),intersectsTriangle:I=>{I.a.applyMatrix4(f),I.b.applyMatrix4(f),I.c.applyMatrix4(f),I.needsUpdate=!0;for(let N=M*3,G=(B+M)*3;N<G;N+=3)if(mi(e,N,A,O),e.needsUpdate=!0,I.intersectsTriangle(e))return!0;return!1}});for(let F=M*3,I=B+M*3;F<I;F+=3){mi(r,F,A,O),r.a.applyMatrix4(t),r.b.applyMatrix4(t),r.c.applyMatrix4(t),r.needsUpdate=!0;for(let N=0,G=E.count;N<G;N+=3)if(mi(e,N,E,T),e.needsUpdate=!0,r.intersectsTriangle(e))return!0}}else{const w=o+8,A=C[o+6];return vi(w,g,Aa),!!(h.intersectsBox(Aa)&&s(w,a,u,f,h)||(vi(A,g,Aa),h.intersectsBox(Aa)&&s(A,a,u,f,h)))}}}();function w0(r,e,t,n){return vi(r,e,Aa),t.intersectBox(Aa,n)}const rp=[];let i0,Ka,Ns,ks;function Wl(r){i0&&rp.push(i0),i0=r,Ka=new Float32Array(r),Ns=new Uint16Array(r),ks=new Uint32Array(r)}function _u(){i0=null,Ka=null,Ns=null,ks=null,rp.length&&Wl(rp.pop())}const $h=Symbol("skip tree generation"),Wh=new Wr,Xh=new Wr,ua=new Gt,to=new Pi,Pl=new Pi,Ml=new K,Su=new K,VI=new K,zI=new K,GI=new K,x1=new Wr,oi=new G2(()=>new Ci);class ec{static serialize(e,t={}){if(t.isBufferGeometry)return console.warn("MeshBVH.serialize: The arguments for the function have changed. See documentation for new signature."),ec.serialize(arguments[0],{cloneBuffers:arguments[2]===void 0?!0:arguments[2]});t={cloneBuffers:!0,...t};const n=e.geometry,i=e._roots,s=n.getIndex();let o;return t.cloneBuffers?o={roots:i.map(a=>a.slice()),index:s.array.slice()}:o={roots:i,index:s.array},o}static deserialize(e,t,n={}){if(typeof n=="boolean")return console.warn("MeshBVH.deserialize: The arguments for the function have changed. See documentation for new signature."),ec.deserialize(arguments[0],arguments[1],{setIndex:arguments[2]===void 0?!0:arguments[2]});n={setIndex:!0,...n};const{index:i,roots:s}=e,o=new ec(t,{...n,[$h]:!0});if(o._roots=s,n.setIndex){const a=t.getIndex();if(a===null){const u=new jn(e.index,1,!1);t.setIndex(u)}else a.array!==i&&(a.array.set(i),a.needsUpdate=!0)}return o}constructor(e,t={}){if(e.isBufferGeometry){if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(t=Object.assign({strategy:V2,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,[$h]:!1},t),t.useSharedArrayBuffer&&typeof SharedArrayBuffer>"u")throw new Error("MeshBVH: SharedArrayBuffer is not available.");this._roots=null,t[$h]||(this._roots=AI(e,t),!e.boundingBox&&t.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new Wr))),this.geometry=e}refit(e=null){e&&Array.isArray(e)&&(e=new Set(e));const t=this.geometry,n=t.index.array,i=t.attributes.position;let s,o,a,u,f=0;const h=this._roots;for(let g=0,b=h.length;g<b;g++)s=h[g],o=new Uint32Array(s),a=new Uint16Array(s),u=new Float32Array(s),p(0,f),f+=s.byteLength;function p(g,b,C=!1){const y=g*2;if(a[y+15]===ep){const A=o[g+6],O=a[y+14];let E=1/0,T=1/0,M=1/0,B=-1/0,F=-1/0,I=-1/0;for(let N=3*A,G=3*(A+O);N<G;N++){const X=n[N],J=i.getX(X),Z=i.getY(X),H=i.getZ(X);J<E&&(E=J),J>B&&(B=J),Z<T&&(T=Z),Z>F&&(F=Z),H<M&&(M=H),H>I&&(I=H)}return u[g+0]!==E||u[g+1]!==T||u[g+2]!==M||u[g+3]!==B||u[g+4]!==F||u[g+5]!==I?(u[g+0]=E,u[g+1]=T,u[g+2]=M,u[g+3]=B,u[g+4]=F,u[g+5]=I,!0):!1}else{const A=g+8,O=o[g+6],E=A+b,T=O+b;let M=C,B=!1,F=!1;e?M||(B=e.has(E),F=e.has(T),M=!B&&!F):(B=!0,F=!0);const I=M||B,N=M||F;let G=!1;I&&(G=p(A,b,M));let X=!1;N&&(X=p(O,b,M));const J=G||X;if(J)for(let Z=0;Z<3;Z++){const H=A+Z,ne=O+Z,ie=u[H],be=u[H+3],oe=u[ne],Te=u[ne+3];u[g+Z]=ie<oe?ie:oe,u[g+Z+3]=be>Te?be:Te}return J}}}traverse(e,t=0){const n=this._roots[t],i=new Uint32Array(n),s=new Uint16Array(n);o(0);function o(a,u=0){const f=a*2,h=s[f+15]===ep;if(h){const p=i[a+6],g=s[f+14];e(u,h,new Float32Array(n,a*4,6),p,g)}else{const p=a+r0/4,g=i[a+6],b=i[a+7];e(u,h,new Float32Array(n,a*4,6),b)||(o(p,u+1),o(g,u+1))}}}raycast(e,t=Qi){const n=this._roots,i=this.geometry,s=[],o=t.isMaterial,a=Array.isArray(t),u=i.groups,f=o?t.side:t;for(let h=0,p=n.length;h<p;h++){const g=a?t[u[h].materialIndex].side:f,b=s.length;if(Wl(n[h]),tp(0,i,g,e,s),_u(),a){const C=u[h].materialIndex;for(let y=b,w=s.length;y<w;y++)s[y].face.materialIndex=C}}return s}raycastFirst(e,t=Qi){const n=this._roots,i=this.geometry,s=t.isMaterial,o=Array.isArray(t);let a=null;const u=i.groups,f=s?t.side:t;for(let h=0,p=n.length;h<p;h++){const g=o?t[u[h].materialIndex].side:f;Wl(n[h]);const b=np(0,i,g,e);_u(),b!=null&&(a==null||b.distance<a.distance)&&(a=b,o&&(b.face.materialIndex=u[h].materialIndex))}return a}intersectsGeometry(e,t){const n=this.geometry;let i=!1;for(const s of this._roots)if(Wl(s),i=UI(0,n,e,t),_u(),i)break;return i}shapecast(e,t,n){const i=this.geometry;if(e instanceof Function){if(t){const g=t;t=(b,C,y,w)=>{const A=C*3;return g(b,A,A+1,A+2,y,w)}}e={boundsTraverseOrder:n,intersectsBounds:e,intersectsTriangle:t,intersectsRange:null},console.warn("MeshBVH: Shapecast function signature has changed and now takes an object of callbacks as a second argument. See docs for new signature.")}const s=oi.getPrimitive();let{boundsTraverseOrder:o,intersectsBounds:a,intersectsRange:u,intersectsTriangle:f}=e;if(u&&f){const g=u;u=(b,C,y,w,A)=>g(b,C,y,w,A)?!0:v1(b,C,i,f,y,w,s)}else u||(f?u=(g,b,C,y)=>v1(g,b,i,f,C,y,s):u=(g,b,C)=>C);let h=!1,p=0;for(const g of this._roots){if(Wl(g),h=kI(0,i,a,u,o,p),_u(),h)break;p+=g.byteLength}return oi.releasePrimitive(s),h}bvhcast(e,t,n){let{intersectsRanges:i,intersectsTriangles:s}=n;const o=this.geometry.index,a=this.geometry.attributes.position,u=e.geometry.index,f=e.geometry.attributes.position;ua.copy(t).invert();const h=oi.getPrimitive(),p=oi.getPrimitive();if(s){let b=function(C,y,w,A,O,E,T,M){for(let B=w,F=w+A;B<F;B++){mi(p,B*3,u,f),p.a.applyMatrix4(t),p.b.applyMatrix4(t),p.c.applyMatrix4(t),p.needsUpdate=!0;for(let I=C,N=C+y;I<N;I++)if(mi(h,I*3,o,a),h.needsUpdate=!0,s(h,p,I,B,O,E,T,M))return!0}return!1};if(i){const C=i;i=function(y,w,A,O,E,T,M,B){return C(y,w,A,O,E,T,M,B)?!0:b(y,w,A,O,E,T,M,B)}}else i=b}e.getBoundingBox(Xh),Xh.applyMatrix4(t);const g=this.shapecast({intersectsBounds:b=>Xh.intersectsBox(b),intersectsRange:(b,C,y,w,A,O)=>(Wh.copy(O),Wh.applyMatrix4(ua),e.shapecast({intersectsBounds:E=>Wh.intersectsBox(E),intersectsRange:(E,T,M,B,F)=>i(b,C,E,T,w,A,B,F)}))});return oi.releasePrimitive(h),oi.releasePrimitive(p),g}intersectsBox(e,t){return to.set(e.min,e.max,t),to.needsUpdate=!0,this.shapecast({intersectsBounds:n=>to.intersectsBox(n),intersectsTriangle:n=>to.intersectsTriangle(n)})}intersectsSphere(e){return this.shapecast({intersectsBounds:t=>e.intersectsBox(t),intersectsTriangle:t=>t.intersectsSphere(e)})}closestPointToGeometry(e,t,n={},i={},s=0,o=1/0){e.boundingBox||e.computeBoundingBox(),to.set(e.boundingBox.min,e.boundingBox.max,t),to.needsUpdate=!0;const a=this.geometry,u=a.attributes.position,f=a.index,h=e.attributes.position,p=e.index,g=oi.getPrimitive(),b=oi.getPrimitive();let C=Su,y=VI,w=null,A=null;i&&(w=zI,A=GI);let O=1/0,E=null,T=null;return ua.copy(t).invert(),Pl.matrix.copy(ua),this.shapecast({boundsTraverseOrder:M=>to.distanceToBox(M),intersectsBounds:(M,B,F)=>F<O&&F<o?(B&&(Pl.min.copy(M.min),Pl.max.copy(M.max),Pl.needsUpdate=!0),!0):!1,intersectsRange:(M,B)=>{if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:F=>Pl.distanceToBox(F),intersectsBounds:(F,I,N)=>N<O&&N<o,intersectsRange:(F,I)=>{for(let N=F*3,G=(F+I)*3;N<G;N+=3){mi(b,N,p,h),b.a.applyMatrix4(t),b.b.applyMatrix4(t),b.c.applyMatrix4(t),b.needsUpdate=!0;for(let X=M*3,J=(M+B)*3;X<J;X+=3){mi(g,X,f,u),g.needsUpdate=!0;const Z=g.distanceToTriangle(b,C,w);if(Z<O&&(y.copy(C),A&&A.copy(w),O=Z,E=X/3,T=N/3),Z<s)return!0}}}});{const F=p?p.count:h.count;for(let I=0,N=F;I<N;I+=3){mi(b,I,p,h),b.a.applyMatrix4(t),b.b.applyMatrix4(t),b.c.applyMatrix4(t),b.needsUpdate=!0;for(let G=M*3,X=(M+B)*3;G<X;G+=3){mi(g,G,f,u),g.needsUpdate=!0;const J=g.distanceToTriangle(b,C,w);if(J<O&&(y.copy(C),A&&A.copy(w),O=J,E=G/3,T=I/3),J<s)return!0}}}}}),oi.releasePrimitive(g),oi.releasePrimitive(b),O===1/0?null:(n.point?n.point.copy(y):n.point=y.clone(),n.distance=O,n.faceIndex=E,i&&(i.point?i.point.copy(A):i.point=A.clone(),i.point.applyMatrix4(ua),y.applyMatrix4(ua),i.distance=y.sub(i.point).length(),i.faceIndex=T),n)}closestPointToPoint(e,t={},n=0,i=1/0){const s=n*n,o=i*i;let a=1/0,u=null;if(this.shapecast({boundsTraverseOrder:h=>(Ml.copy(e).clamp(h.min,h.max),Ml.distanceToSquared(e)),intersectsBounds:(h,p,g)=>g<a&&g<o,intersectsTriangle:(h,p)=>{h.closestPointToPoint(e,Ml);const g=e.distanceToSquared(Ml);return g<a&&(Su.copy(Ml),a=g,u=p),g<s}}),a===1/0)return null;const f=Math.sqrt(a);return t.point?t.point.copy(Su):t.point=Su.clone(),t.distance=f,t.faceIndex=u,t}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(n=>{vi(0,new Float32Array(n),x1),e.union(x1)}),e}}const $I=(1+1e-7)*1e6;function Hh(r){return~~(r*$I)}function b1(r){return`${Hh(r.x)},${Hh(r.y)},${Hh(r.z)}`}const Yh=[new K,new K,new K];class WI{constructor(e=null){this.data=null,this.unmatchedEdges=null,this.matchedEdges=null,this.useDrawRange=!0,e&&this.updateFrom(e)}getSiblingTriangleIndex(e,t){const n=this.data[e*3+t];return n===-1?-1:~~(n/3)}getSiblingEdgeIndex(e,t){const n=this.data[e*3+t];return n===-1?-1:n%3}updateFrom(e){const t=new Map,{attributes:n}=e,i=e.index,s=n.position;let o=i?i.count/3:s.count/3;const a=o;let u=0;this.useDrawRange&&(u=e.drawRange.start,e.drawRange.count!==1/0&&(o=~~(e.drawRange.count/3)));let f=this.data;(!f||f.length<3*a)&&(f=new Int32Array(3*a)),f.fill(-1);let h=0,p=0;for(let g=0;g<o;g++){const b=3*g+u;for(let C=0;C<3;C++){let y=b+C;i&&(y=i.getX(y)),Yh[C].fromBufferAttribute(s,y)}for(let C=0;C<3;C++){const y=(C+1)%3,w=Yh[C],A=Yh[y],O=b1(w),E=b1(A),T=`${E}_${O}`;if(t.has(T)){const M=t.get(T);f[b+C]=M,f[M]=b+C,t.delete(T),h--,p++}else{const M=`${O}_${E}`;t.set(M,b+C),h++}}}this.matchedEdges=p,this.unmatchedEdges=h,this.data=f}}function $2(){return typeof SharedArrayBuffer<"u"}function XI(r){if(r.buffer instanceof SharedArrayBuffer)return r;const e=r.constructor,t=r.buffer,n=new SharedArrayBuffer(t.byteLength),i=new Uint8Array(t);return new Uint8Array(n).set(i,0),new e(n)}class vc extends ji{constructor(...e){super(...e),this.isBrush=!0,this._previousMatrix=new Gt,this._previousMatrix.elements.fill(0)}markUpdated(){this._previousMatrix.copy(this.matrix)}isDirty(){const{matrix:e,_previousMatrix:t}=this,n=e.elements,i=t.elements;for(let s=0;s<16;s++)if(n[s]!==i[s])return!0;return!1}prepareGeometry(){const e=this.geometry,t=e.attributes;if($2())for(const n in t){const i=t[n];if(i.isInterleavedBufferAttribute)throw new Error("Brush: InterleavedBufferAttributes are not supported.");i.array=XI(i.array)}if(e.boundsTree||(e.boundsTree=new ec(e,{maxLeafTris:3}),e.halfEdges&&e.halfEdges.updateFrom(e)),e.halfEdges||(e.halfEdges=new WI(e)),!e.groupIndices){const n=e.index.count/3,i=new Uint16Array(n),s=e.groups;for(let o=0,a=s.length;o<a;o++){const{start:u,count:f}=s[o];for(let h=u/3,p=(u+f)/3;h<p;h++)i[h]=o}e.groupIndices=i}}disposeCacheData(){const{geometry:e}=this;e.halfEdges=null,e.boundsTree=null,e.groupIndices=null}}class y1{constructor(){this.intersectionSet={},this.ids=[]}add(e,t){const{intersectionSet:n,ids:i}=this;n[e]||(n[e]=[],i.push(e)),n[e].push(t)}}const W2=0,X2=1,HI=3,YI=4,xs=new q0,w1=new Gt,ar=new Dn,Vi=new K,_1=new Zt,S1=new Zt,C1=new Zt,qh=new Zt,Cu=new Zt,Pu=new Zt,Zh=new $r,jh=new K,Kh=1e-8,qI=1e-15,s0=-1,o0=1,H2=-2,ip=2,_0=0,Mu=1,Yp=2;let a0=null;function P1(r){a0=r}function Y2(r,e){function t(){return Math.random()-.5}r.getNormal(jh),xs.direction.copy(jh),r.getMidpoint(xs.origin);const n=3;let i=0,s=1/0;for(let o=0;o<n;o++){xs.direction.x+=t()*Kh,xs.direction.y+=t()*Kh,xs.direction.z+=t()*Kh,xs.direction.multiplyScalar(-1);const a=e.raycastFirst(xs,Mc);if(Boolean(a&&xs.direction.dot(a.face.normal)>0)&&i++,a!==null&&(s=Math.min(s,a.distance)),s<=qI)return a.face.normal.dot(jh)>0?ip:H2;if(i/n>.5||(o-i+1)/n>.5)break}return i/n>.5?s0:o0}function ZI(r,e){const t=new y1,n=new y1;return w1.copy(r.matrixWorld).invert().multiply(e.matrixWorld),r.geometry.boundsTree.bvhcast(e.geometry.boundsTree,w1,{intersectsTriangles(i,s,o,a){if(i.intersectsTriangle(s,Zh,!0)){if(Zh.distanceSq()===0&&i.plane.normal.dot(s.plane.normal)<1-1e-10)return!1;t.add(o,a),n.add(a,o),a0&&(a0.addEdge(Zh),a0.addIntersectingTriangles(o,i,a,s))}return!1}}),{aIntersections:t,bIntersections:n}}function jI(r,e,t,n,i,s,o=!1){const a=t.attributes,u=t.index,f=r*3,h=u.getX(f+0),p=u.getX(f+1),g=u.getX(f+2);for(const b in s){const C=a[b],y=s[b];if(!(b in a))throw new Error(`CSG Operations: Attribute ${b} not available on geometry.`);const w=C.itemSize;b==="position"?(ar.a.fromBufferAttribute(C,h).applyMatrix4(n),ar.b.fromBufferAttribute(C,p).applyMatrix4(n),ar.c.fromBufferAttribute(C,g).applyMatrix4(n),Jh(ar.a,ar.b,ar.c,e,3,y,o)):b==="normal"?(ar.a.fromBufferAttribute(C,h).applyNormalMatrix(i),ar.b.fromBufferAttribute(C,p).applyNormalMatrix(i),ar.c.fromBufferAttribute(C,g).applyNormalMatrix(i),o&&(ar.a.multiplyScalar(-1),ar.b.multiplyScalar(-1),ar.c.multiplyScalar(-1)),Jh(ar.a,ar.b,ar.c,e,3,y,o,!0)):(_1.fromBufferAttribute(C,h),S1.fromBufferAttribute(C,p),C1.fromBufferAttribute(C,g),Jh(_1,S1,C1,e,w,y,o))}}function KI(r,e,t,n,i,s,o,a=!1){Qh(r,n,i,s,o,a),Qh(a?t:e,n,i,s,o,a),Qh(a?e:t,n,i,s,o,a)}function q2(r,e,t=!1){switch(r){case W2:if(e===o0||e===ip&&!t)return Mu;break;case X2:if(t){if(e===s0)return _0}else if(e===o0||e===H2)return Mu;break;case HI:if(e===s0)return _0;if(e===o0)return Mu;break;case YI:if(e===s0||e===ip&&!t)return Mu;break;default:throw new Error(`Unrecognized CSG operation enum "${r}".`)}return Yp}function Jh(r,e,t,n,i,s,o=!1,a=!1){const u=f=>{s.push(f.x),i>1&&s.push(f.y),i>2&&s.push(f.z),i>3&&s.push(f.w)};qh.set(0,0,0,0).addScaledVector(r,n.a.x).addScaledVector(e,n.a.y).addScaledVector(t,n.a.z),Cu.set(0,0,0,0).addScaledVector(r,n.b.x).addScaledVector(e,n.b.y).addScaledVector(t,n.b.z),Pu.set(0,0,0,0).addScaledVector(r,n.c.x).addScaledVector(e,n.c.y).addScaledVector(t,n.c.z),a&&(qh.normalize(),Cu.normalize(),Pu.normalize()),u(qh),o?(u(Pu),u(Cu)):(u(Cu),u(Pu))}function Qh(r,e,t,n,i,s=!1){for(const o in i){const a=e[o],u=i[o];if(!(o in e))throw new Error(`CSG Operations: Attribute ${o} no available on geometry.`);const f=a.itemSize;o==="position"?(Vi.fromBufferAttribute(a,r).applyMatrix4(t),u.push(Vi.x,Vi.y,Vi.z)):o==="normal"?(Vi.fromBufferAttribute(a,r).applyNormalMatrix(n),s&&Vi.multiplyScalar(-1),u.push(Vi.x,Vi.y,Vi.z)):(u.push(a.getX(r)),f>1&&u.push(a.getY(r)),f>2&&u.push(a.getZ(r)),f>3&&u.push(a.getW(r)))}}const Ra=1e-14,fa=1e-10,zi=new $r,Mn=new $r,Gi=new K,M1=new K,El=new di,JI=new Ci;function Al(r){return r.a.distanceToSquared(r.b)<Ra||r.a.distanceToSquared(r.c)<Ra||r.b.distanceToSquared(r.c)<Ra}class QI{constructor(){this._pool=[],this._index=0}getTriangle(){return this._index>=this._pool.length&&this._pool.push(new Dn),this._pool[this._index++]}clear(){this._index=0}reset(){this._pool.length=0,this._index=0}}class e6{constructor(){this.trianglePool=new QI,this.triangles=[],this.normal=new K}initialize(e){const{triangles:t,trianglePool:n,normal:i}=this;if(t.length=0,n.clear(),Array.isArray(e))for(let s=0,o=e.length;s<o;s++){const a=e[s];if(s===0)a.getNormal(i);else if(Math.abs(1-a.getNormal(Gi).dot(i))>Ra)throw new Error("Triangle Splitter: Cannot initialize with triangles that have different normals.");const u=n.getTriangle();u.copy(a),t.push(u)}else{e.getNormal(i);const s=n.getTriangle();s.copy(e),t.push(s)}}splitByTriangle(e){const{normal:t,triangles:n}=this;if(e.getPlane(El),Math.abs(1-Math.abs(El.normal.dot(t)))<fa){const i=[e.a,e.b,e.c];for(let s=0;s<3;s++){const o=(s+1)%3,a=i[s],u=i[o];Gi.subVectors(u,a).normalize(),M1.crossVectors(t,Gi),El.setFromNormalAndCoplanarPoint(M1,a),this.splitByPlane(El,e,s)}for(let s=0,o=n.length;s<o;s++){const a=n[s];a.coplanarCount=0}}else this.splitByPlane(El,e)}splitByPlane(e,t=null,n=-1){const{triangles:i,trianglePool:s}=this;let o=null;t!==null&&(o=JI,o.copy(t),o.needsUpdate=!0);for(let a=0,u=i.length;a<u;a++){const f=i[a],{a:h,b:p,c:g}=f;if(o&&!o.intersectsTriangle(f,zi,!0))continue;let b=0,C=-1,y=0,w=!1;const A=[h,p,g];for(let O=0;O<3;O++){const E=(O+1)%3;zi.start.copy(A[O]),zi.end.copy(A[E]);const T=e.distanceToPoint(zi.start),M=e.distanceToPoint(zi.end);if(Math.abs(T)<fa&&Math.abs(M)<fa){w=!0;break}if(Math.abs(T)<fa)continue;T>0&&y++;let B=!!e.intersectLine(zi,Gi);!B&&Math.abs(M)<fa&&(Gi.copy(zi.end),B=!0),B&&!(Gi.distanceTo(zi.start)<Ra)&&(Gi.distanceTo(zi.end)<Ra&&(C=O),b===0?Mn.start.copy(Gi):Mn.end.copy(Gi),b++)}if(!w)if(b===2&&Mn.distance()>fa)if(C!==-1){C=(C+1)%3;let O=0;O===C&&(O=(O+1)%3);let E=O+1;E===C&&(E=(E+1)%3);const T=s.getTriangle();T.a.copy(A[E]),T.b.copy(Mn.end),T.c.copy(Mn.start),Al(T)||i.push(T),f.a.copy(A[O]),f.b.copy(Mn.start),f.c.copy(Mn.end),Al(f)&&(i.splice(a,1),a--,u--)}else{const O=A.findIndex(F=>y>=2?e.distanceToPoint(F)<0:e.distanceToPoint(F)>0);if(O===0){let F=Mn.start;Mn.start=Mn.end,Mn.end=F}else if(O===-1)continue;const E=(O+1)%3,T=(O+2)%3,M=s.getTriangle(),B=s.getTriangle();A[E].distanceToSquared(Mn.start)<A[T].distanceToSquared(Mn.end)?(M.a.copy(A[E]),M.b.copy(Mn.start),M.c.copy(Mn.end),B.a.copy(A[E]),B.b.copy(A[T]),B.c.copy(Mn.start)):(M.a.copy(A[T]),M.b.copy(Mn.start),M.c.copy(Mn.end),B.a.copy(A[E]),B.b.copy(A[T]),B.c.copy(Mn.end)),f.a.copy(A[O]),f.b.copy(Mn.end),f.c.copy(Mn.start),Al(M)||i.push(M),Al(B)||i.push(B),Al(f)&&(i.splice(a,1),a--,u--)}else b===3&&console.warn("TriangleClipper: Coplanar clip not handled")}}reset(){this.triangles.length=0}}class E1{constructor(e,t=500){const n=$2()?SharedArrayBuffer:ArrayBuffer;this.expansionFactor=1.5,this.type=e,this.array=new e(new n(t*e.BYTES_PER_ELEMENT)),this.length=0}expand(e=null){const{type:t,array:n,expansionFactor:i}=this;e===null&&(e=~~(n.length*i));const s=new t(e);s.set(n,0),this.array=s}push(...e){let{array:t,length:n}=this;n+e.length>t.length&&(this.expand(),t=this.array);for(let i=0,s=e.length;i<s;i++)t[n+i]=e[i];this.length+=e.length}clear(){this.length=0}}class t6{constructor(){this.groupAttributes=[{}],this.groupCount=0}getType(e){return this.groupAttributes[0][e].type}getTotalLength(e){const{groupCount:t,groupAttributes:n}=this;let i=0;for(let s=0;s<t;s++){const o=n[s];i+=o[e].length}return i}getGroupSet(e=0){const{groupAttributes:t}=this;if(t[e])return this.groupCount=Math.max(this.groupCount,e+1),t[e];const n=t[0];for(this.groupCount=Math.max(this.groupCount,e+1);e>=t.length;){const i={};t.push(i);for(const s in n)i[s]=new E1(n[s].type)}return t[e]}getGroupArray(e,t=0){const{groupAttributes:n}=this;if(!n[0][e])throw new Error(`TypedAttributeData: Attribute with "${e}" has not been initialized`);return this.getGroupSet(t)[e]}initializeArray(e,t){const{groupAttributes:n}=this,s=n[0][e];if(s){if(s.type!==t)throw new Error(`TypedAttributeData: Array ${e} already initialized with a different type.`)}else for(let o=0,a=n.length;o<a;o++)n[o][e]=new E1(t)}clear(){this.groupCount=0;const{groupAttributes:e}=this;e.forEach(t=>{for(const n in t)t[n].clear()})}delete(e){this.groupAttributes.forEach(t=>{delete t[e]})}reset(){this.groupAttributes=[]}}class n6{constructor(e){this.triangle=new Dn().copy(e),this.intersects={}}addTriangle(e,t){this.intersects[e]=new Dn().copy(t)}getIntersectArray(){const e=[],{intersects:t}=this;for(const n in t)e.push(t[n]);return e}}class A1{constructor(){this.data={}}addTriangleIntersection(e,t,n,i){const{data:s}=this;s[e]||(s[e]=new n6(t)),s[e].addTriangle(n,i)}getTrianglesAsArray(e=null){const{data:t}=this,n=[];if(e!==null)e in t&&n.push(t[e].triangle);else for(const i in t)n.push(t[i].triangle);return n}getTriangleIndices(){return Object.keys(this.data).map(e=>parseInt(e))}getIntersectionIndices(e){const{data:t}=this;return t[e]?Object.keys(t[e].intersects).map(n=>parseInt(n)):[]}getIntersectionsAsArray(e=null,t=null){const{data:n}=this,i=new Set,s=[],o=a=>{if(n[a])if(t!==null)n[a].intersects[t]&&s.push(n[a].intersects[t]);else{const u=n[a].intersects;for(const f in u)i.has(f)||(i.add(f),s.push(u[f]))}};if(e!==null)o(e);else for(const a in n)o(a);return s}reset(){this.data={}}}class r6{constructor(){this.enabled=!1,this.triangleIntersectsA=new A1,this.triangleIntersectsB=new A1,this.intersectionEdges=[]}addIntersectingTriangles(e,t,n,i){const{triangleIntersectsA:s,triangleIntersectsB:o}=this;s.addTriangleIntersection(e,t,n,i),o.addTriangleIntersection(n,i,e,t)}addEdge(e){this.intersectionEdges.push(e.clone())}reset(){this.triangleIntersectsA.reset(),this.triangleIntersectsB.reset(),this.intersectionEdges=[]}}const Os=new Gt,S0=new br,no=new Dn,Eu=new Dn,Au=new Dn,Tu=new Dn;function i6(r){for(const e of r)return e}function s6(r,e,t,n,i,s){const{useGroups:o=!0}=s,{aIntersections:a,bIntersections:u}=ZI(r,e),f=[];let h=null,p;return p=o?0:-1,I1(r,e,a,t,!1,i,p),T1(r,e,a,t,!1,n,i,p),p=o?r.geometry.groups.length||1:-1,I1(e,r,u,t,!0,i,p),T1(e,r,u,t,!0,n,i,p),{groups:f,materials:h}}function T1(r,e,t,n,i,s,o,a=0){const u=r.matrixWorld.determinant()<0;Os.copy(e.matrixWorld).invert().multiply(r.matrixWorld),S0.getNormalMatrix(r.matrixWorld).multiplyScalar(u?-1:1);const f=r.geometry.groupIndices,h=r.geometry.index,p=r.geometry.attributes.position,g=e.geometry.boundsTree,b=e.geometry.index,C=e.geometry.attributes.position,y=t.ids,w=t.intersectionSet;for(let A=0,O=y.length;A<O;A++){const E=y[A],T=a===-1?0:f[E]+a,M=o.getGroupSet(T),B=3*E,F=h.getX(B+0),I=h.getX(B+1),N=h.getX(B+2);no.a.fromBufferAttribute(p,F).applyMatrix4(Os),no.b.fromBufferAttribute(p,I).applyMatrix4(Os),no.c.fromBufferAttribute(p,N).applyMatrix4(Os),s.initialize(no);const G=w[E];for(let J=0,Z=G.length;J<Z;J++){const H=3*G[J],ne=b.getX(H+0),ie=b.getX(H+1),be=b.getX(H+2);Eu.a.fromBufferAttribute(C,ne),Eu.b.fromBufferAttribute(C,ie),Eu.c.fromBufferAttribute(C,be),s.splitByTriangle(Eu)}const X=s.triangles;for(let J=0,Z=X.length;J<Z;J++){const H=X[J],ne=Y2(H,g),ie=q2(n,ne,i);if(ie!==Yp){no.getBarycoord(H.a,Tu.a),no.getBarycoord(H.b,Tu.b),no.getBarycoord(H.c,Tu.c);const be=ie===_0;jI(E,Tu,r.geometry,r.matrixWorld,S0,M,u!==be)}}}return y.length}function I1(r,e,t,n,i,s,o=0){const a=r.matrixWorld.determinant()<0;Os.copy(e.matrixWorld).invert().multiply(r.matrixWorld),S0.getNormalMatrix(r.matrixWorld).multiplyScalar(a?-1:1);const u=e.geometry.boundsTree,f=r.geometry.groupIndices,h=r.geometry.index,p=r.geometry.attributes,g=p.position,b=[],C=r.geometry.halfEdges,y=new Set;for(let w=0,A=h.count/3;w<A;w++)w in t.intersectionSet||y.add(w);for(;y.size>0;){const w=i6(y);y.delete(w),b.push(w);const A=3*w,O=h.getX(A+0),E=h.getX(A+1),T=h.getX(A+2);Au.a.fromBufferAttribute(g,O).applyMatrix4(Os),Au.b.fromBufferAttribute(g,E).applyMatrix4(Os),Au.c.fromBufferAttribute(g,T).applyMatrix4(Os);const M=Y2(Au,u),B=q2(n,M,i);for(;b.length>0;){const F=b.pop(),I=o===-1?0:f[F]+o,N=s.getGroupSet(I);for(let ne=0;ne<3;ne++){const ie=C.getSiblingTriangleIndex(F,ne);ie!==-1&&y.has(ie)&&(b.push(ie),y.delete(ie))}if(B===Yp)continue;const G=3*F,X=h.getX(G+0),J=h.getX(G+1),Z=h.getX(G+2),H=B===_0;KI(X,J,Z,p,r.matrixWorld,S0,N,H!==a)}}}function o6(r,e,t,n){let i=!1,s=-1;const o=n.groupCount,a=r.attributes,u=n.groupAttributes[0];for(const h in u){const p=n.getTotalLength(h,o),g=u[h].type;let b=a[h];if(!b||b.array.length<p){const y=e.attributes[h];b=new jn(new g(p),y.itemSize,y.normalized),r.setAttribute(h,b),i=!0}let C=0;for(let y=0;y<o;y++){const{array:w,type:A,length:O}=n.groupAttributes[y][h],E=new A(w.buffer,0,O);b.array.set(E,C),C+=E.length}b.needsUpdate=!0,s=p/b.itemSize}r.setDrawRange(0,s),r.clearGroups();let f=0;for(let h=0;h<o;h++){const p=n.getGroupArray("position",h).length/3;if(p!==0){const g=t[h];r.addGroup(f,p,g.materialIndex),f+=p}}if(r.index){const h=r.index.array;if(h.length<s)r.index=null,i=!0;else for(let p=0,g=h.length;p<g;p++)h[p]=p}return r.boundsTree=null,i&&r.dispose(),r}function L1(r,e){let t=e;return Array.isArray(e)||(t=[],r.forEach(n=>{t[n.materialIndex]=e})),t}class a6{constructor(){this.triangleSplitter=new e6,this.attributeData=new t6,this.attributes=["position","uv","normal"],this.useGroups=!0,this.debug=new r6}evaluate(e,t,n,i=new vc){e.prepareGeometry(),t.prepareGeometry();const{triangleSplitter:s,attributeData:o,attributes:a,useGroups:u,debug:f}=this,h=i.geometry,p=e.geometry.attributes;for(let A=0,O=a.length;A<O;A++){const E=a[A],T=p[E];o.initializeArray(E,T.array.constructor)}for(const A in o.attributes)a.includes(A)||o.delete(A);for(const A in h.attributes)a.includes(A)||(h.deleteAttribute(A),h.dispose());o.clear(),f.enabled&&(f.reset(),P1(f)),s6(e,t,n,s,o,{useGroups:u}),f.enabled&&P1(null);const g=!u||e.geometry.groups.length===0?[{start:0,count:1/0,materialIndex:0}]:e.geometry.groups.map(A=>({...A})),b=!u||t.geometry.groups.length===0?[{start:0,count:1/0,materialIndex:0}]:t.geometry.groups.map(A=>({...A})),C=L1(g,e.material),y=L1(b,t.material);b.forEach(A=>{A.materialIndex+=C.length}),o6(h,e.geometry,[...g,...b],o);const w=h.groups;if(u){const A=new Map,O=[...C,...y];let E=0;for(let T=0,M=O.length;T<M;T++)Boolean(w.find(F=>F.materialIndex===T))?(A.set(T,E),E++):O[T]=null;for(let T=0,M=w.length;T<M;T++){const B=w[T];B.materialIndex=A.get(B.materialIndex)}i.material=O.filter(T=>T)}return i}evaluateHierarchy(e,t=new vc){e.updateMatrixWorld(!0);const n=(s,o)=>{const a=s.children;for(let u=0,f=a.length;u<f;u++){const h=a[u];h.isOperationGroup?n(h,o):o(h)}},i=s=>{const o=s.children;let a=!1;for(let f=0,h=o.length;f<h;f++){const p=o[f];a=i(p)||a}const u=s.isDirty();if(u&&s.markUpdated(),a&&!s.isOperationGroup){let f;return n(s,h=>{f?f=this.evaluate(f,h,h.operation):f=this.evaluate(s,h,h.operation)}),s._cachedGeometry=f.geometry,s._cachedMaterials=f.material,!0}else return a||u};return i(e),t.geometry=e._cachedGeometry,t.material=e._cachedMaterials,t}reset(){this.triangleSplitter.reset()}}function l6(r){if(F2(r))return r.polygons.buffer;const e=[],t=[],n=[];let i=0;for(const u of r.polygons){const f=[],h=i;for(const p of u.vertices)e.push(...p),f.push(i++),n.push(0,0);for(let p=2;p<f.length;p++){const g=f[p-1]??h+p+1,b=f[p]??h+p+2;t.push(h,g,b)}}const s=new Rr,o=new jn(new Float32Array(e),3),a=new jn(new Float32Array(n),2);return s.setAttribute("position",o),s.setAttribute("uv",a),s.setIndex(t),s.computeVertexNormals(),r.polygons.buffer=s,s}function c6(r,e){const t=new vc(l6(r),e);return t.applyMatrix4(new Gt().fromArray(r.transforms)),t.layers.mask=3,t}function Z2(r){if(r.boundingBox===null&&r.computeBoundingBox(),r.boundingBox===null)throw new Error("Failed to compute bounding box");return r.boundingBox}function Xl(r,e){const t=Z2(e.geometry),n=r.relativeTo??new K,i=new K;r.modes.forEach((s,o)=>{let a=0;switch(s){case"center":a=(t.min.getComponent(o)+t.max.getComponent(o))/2;break;case"max":a=t.max.getComponent(o);break;case"min":a=t.min.getComponent(o);break}a=n.getComponent(o)-a,i.setComponent(o,a)}),e.position.add(i)}function Va(r){for(const e of r)return e;throw new Error("Empty iterator")}var _a=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};const u6=(r,e,t)=>(r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r[4]=e[4]+t[4],r[5]=e[5]+t[5],r[6]=e[6]+t[6],r[7]=e[7]+t[7],r[8]=e[8]+t[8],r[9]=e[9]+t[9],r[10]=e[10]+t[10],r[11]=e[11]+t[11],r[12]=e[12]+t[12],r[13]=e[13]+t[13],r[14]=e[14]+t[14],r[15]=e[15]+t[15],r);var f6=u6;const h6=()=>[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];var qp=h6;const d6=qp,p6=r=>{const e=d6();return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e};var m6=p6;const g6=(r,e)=>(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r);var j2=g6;const v6=(r,e)=>{const t=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],f=e[7],h=e[8],p=e[9],g=e[10],b=e[11],C=e[12],y=e[13],w=e[14],A=e[15],O=t*a-n*o,E=t*u-i*o,T=t*f-s*o,M=n*u-i*a,B=n*f-s*a,F=i*f-s*u,I=h*y-p*C,N=h*w-g*C,G=h*A-b*C,X=p*w-g*y,J=p*A-b*y,Z=g*A-b*w;let H=O*Z-E*J+T*X+M*G-B*N+F*I;return H?(H=1/H,r[0]=(a*Z-u*J+f*X)*H,r[1]=(i*J-n*Z-s*X)*H,r[2]=(y*F-w*B+A*M)*H,r[3]=(g*B-p*F-b*M)*H,r[4]=(u*G-o*Z-f*N)*H,r[5]=(t*Z-i*G+s*N)*H,r[6]=(w*T-C*F-A*E)*H,r[7]=(h*F-g*T+b*E)*H,r[8]=(o*J-a*G+f*I)*H,r[9]=(n*G-t*J-s*I)*H,r[10]=(C*B-y*T+A*O)*H,r[11]=(p*T-h*B-b*O)*H,r[12]=(a*N-o*X-u*I)*H,r[13]=(t*X-n*N+i*I)*H,r[14]=(y*E-C*M-w*O)*H,r[15]=(h*M-p*E+g*O)*H,r):null};var x6=v6;const b6=(r,e)=>r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]&&r[4]===e[4]&&r[5]===e[5]&&r[6]===e[6]&&r[7]===e[7]&&r[8]===e[8]&&r[9]===e[9]&&r[10]===e[10]&&r[11]===e[11]&&r[12]===e[12]&&r[13]===e[13]&&r[14]===e[14]&&r[15]===e[15];var y6=b6;const w6=1e5,_6=1e-5,S6=1e-13,C6=Math.PI*2;var Kt={EPS:_6,NEPS:S6,TAU:C6,spatialResolution:w6};const{NEPS:P6}=Kt,K2=r=>Math.abs(r)<P6?0:r,M6=r=>K2(Math.sin(r)),E6=r=>K2(Math.cos(r));var Jn={sin:M6,cos:E6};const A6=r=>(r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r);var J2=A6;const{EPS:T6}=Kt,{sin:I6,cos:L6}=Jn,D6=J2,O6=(r,e,t)=>{let[n,i,s]=t;const o=n*n+i*i+s*s;if(Math.abs(o)<T6)return D6(r);const a=1/Math.sqrt(o);n*=a,i*=a,s*=a;const u=I6(e),f=L6(e),h=1-f;return r[0]=n*n*h+f,r[1]=i*n*h+s*u,r[2]=s*n*h-i*u,r[3]=0,r[4]=n*i*h-s*u,r[5]=i*i*h+f,r[6]=s*i*h+n*u,r[7]=0,r[8]=n*s*h+i*u,r[9]=i*s*h-n*u,r[10]=s*s*h+f,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r};var Q2=O6;const R6=(r,e)=>(r[0]=e[0],r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=e[1],r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=e[2],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r);var B6=R6;const{sin:ed,cos:td}=Jn,F6=(r,e,t,n)=>{const i=ed(e),s=td(e),o=ed(t),a=td(t),u=ed(n),f=td(n);return r[0]=a*s,r[1]=a*i,r[2]=-o,r[3]=0,r[4]=u*o*s-f*i,r[5]=f*s+u*o*i,r[6]=u*a,r[7]=0,r[8]=u*i+f*o*s,r[9]=f*o*i-u*s,r[10]=f*a,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r};var N6=F6;const k6=(r,e)=>(r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=e[0],r[13]=e[1],r[14]=e[2],r[15]=1,r);var U6=k6;const V6=qp,z6=(r,e,t,n,i,s,o,a,u,f,h,p,g,b,C,y)=>{const w=V6();return w[0]=r,w[1]=e,w[2]=t,w[3]=n,w[4]=i,w[5]=s,w[6]=o,w[7]=a,w[8]=u,w[9]=f,w[10]=h,w[11]=p,w[12]=g,w[13]=b,w[14]=C,w[15]=y,w};var G6=z6;const $6=(r,e)=>(r[0]=Math.abs(e[0]),r[1]=Math.abs(e[1]),r[2]=Math.abs(e[2]),r);var ew=$6;const W6=(r,e,t)=>(r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r);var X6=W6;const H6=(r,e)=>r[0]*e[0]+r[1]*e[1]+r[2]*e[2];var tw=H6;const Y6=tw,q6=(r,e)=>{const t=r[0],n=r[1],i=r[2],s=e[0],o=e[1],a=e[2],u=Math.sqrt(t*t+n*n+i*i),f=Math.sqrt(s*s+o*o+a*a),h=u*f,p=h&&Y6(r,e)/h;return Math.acos(Math.min(Math.max(p,-1),1))};var Z6=q6;const j6=()=>[0,0,0];var K0=j6;const K6=K0,J6=r=>{const e=K6();return e[0]=r[0],e[1]=r[1],e[2]=r[2],e};var Q6=J6;const eL=(r,e)=>(r[0]=e[0],r[1]=e[1],r[2]=e[2],r);var tL=eL;const nL=(r,e,t)=>{const n=e[0],i=e[1],s=e[2],o=t[0],a=t[1],u=t[2];return r[0]=i*u-s*a,r[1]=s*o-n*u,r[2]=n*a-i*o,r};var nw=nL;const rL=(r,e)=>{const t=e[0]-r[0],n=e[1]-r[1],i=e[2]-r[2];return Math.sqrt(t*t+n*n+i*i)};var iL=rL;const sL=(r,e,t)=>(r[0]=e[0]/t[0],r[1]=e[1]/t[1],r[2]=e[2]/t[2],r);var oL=sL;const aL=(r,e)=>r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2];var lL=aL;const cL=(r,e)=>(r[0]=e,r[1]=e,r[2]=e,r);var uL=cL;const fL=K0,hL=(r,e,t)=>{const n=fL();return n[0]=r,n[1]=e,n[2]=t,n};var dL=hL;const pL=(r,e,t=0)=>(r[0]=e[0],r[1]=e[1],r[2]=t,r);var mL=pL;const gL=r=>{const e=r[0],t=r[1],n=r[2];return Math.sqrt(e*e+t*t+n*n)};var vL=gL;const xL=(r,e,t,n)=>(r[0]=e[0]+n*(t[0]-e[0]),r[1]=e[1]+n*(t[1]-e[1]),r[2]=e[2]+n*(t[2]-e[2]),r);var bL=xL;const yL=(r,e,t)=>(r[0]=Math.max(e[0],t[0]),r[1]=Math.max(e[1],t[1]),r[2]=Math.max(e[2],t[2]),r);var rw=yL;const wL=(r,e,t)=>(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.min(e[2],t[2]),r);var iw=wL;const _L=(r,e,t)=>(r[0]=e[0]*t[0],r[1]=e[1]*t[1],r[2]=e[2]*t[2],r);var SL=_L;const CL=(r,e)=>(r[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r);var PL=CL;const ML=(r,e)=>{const t=e[0],n=e[1],i=e[2];let s=t*t+n*n+i*i;return s>0&&(s=1/Math.sqrt(s)),r[0]=t*s,r[1]=n*s,r[2]=i*s,r};var EL=ML;const AL=ew,TL=K0,IL=nw,LL=(r,e)=>{const t=AL(TL(),e),n=0+(t[0]<t[1]&&t[0]<t[2]),i=0+(t[1]<=t[0]&&t[1]<t[2]),s=0+(t[2]<=t[0]&&t[2]<=t[1]);return IL(r,e,[n,i,s])};var DL=LL;const OL=(r,e,t,n)=>{const i=[],s=[];return i[0]=e[0]-t[0],i[1]=e[1]-t[1],i[2]=e[2]-t[2],s[0]=i[0],s[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),s[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),r[0]=s[0]+t[0],r[1]=s[1]+t[1],r[2]=s[2]+t[2],r};var RL=OL;const BL=(r,e,t,n)=>{const i=[],s=[];return i[0]=e[0]-t[0],i[1]=e[1]-t[1],i[2]=e[2]-t[2],s[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),s[1]=i[1],s[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),r[0]=s[0]+t[0],r[1]=s[1]+t[1],r[2]=s[2]+t[2],r};var FL=BL;const NL=(r,e,t,n)=>{const i=[],s=[];return i[0]=e[0]-t[0],i[1]=e[1]-t[1],s[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),s[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),r[0]=s[0]+t[0],r[1]=s[1]+t[1],r[2]=e[2],r};var kL=NL;const UL=(r,e,t)=>(r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r);var VL=UL;const zL=(r,e,t)=>(r[0]=Math.round(e[0]/t)*t+0,r[1]=Math.round(e[1]/t)*t+0,r[2]=Math.round(e[2]/t)*t+0,r);var GL=zL;const $L=(r,e)=>{const t=e[0]-r[0],n=e[1]-r[1],i=e[2]-r[2];return t*t+n*n+i*i};var WL=$L;const XL=r=>{const e=r[0],t=r[1],n=r[2];return e*e+t*t+n*n};var HL=XL;const YL=(r,e,t)=>(r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r);var qL=YL;const ZL=r=>`[${r[0].toFixed(7)}, ${r[1].toFixed(7)}, ${r[2].toFixed(7)}]`;var jL=ZL;const KL=(r,e,t)=>{const n=e[0],i=e[1],s=e[2];let o=t[3]*n+t[7]*i+t[11]*s+t[15];return o=o||1,r[0]=(t[0]*n+t[4]*i+t[8]*s+t[12])/o,r[1]=(t[1]*n+t[5]*i+t[9]*s+t[13])/o,r[2]=(t[2]*n+t[6]*i+t[10]*s+t[14])/o,r};var JL=KL,at={abs:ew,add:X6,angle:Z6,clone:Q6,copy:tL,create:K0,cross:nw,distance:iL,divide:oL,dot:tw,equals:lL,fromScalar:uL,fromValues:dL,fromVec2:mL,length:vL,lerp:bL,max:rw,min:iw,multiply:SL,negate:PL,normalize:EL,orthogonal:DL,rotateX:RL,rotateY:FL,rotateZ:kL,scale:VL,snap:GL,squaredDistance:WL,squaredLength:HL,subtract:qL,toString:jL,transform:JL};const bs=at,QL=Q2,e8=(r,e,t)=>{const n=bs.normalize(bs.create(),e),i=bs.normalize(bs.create(),t),s=bs.cross(bs.create(),i,n),o=bs.dot(i,n);if(o===-1)return QL(r,Math.PI,bs.orthogonal(s,n));const a=1/(1+o);return r[0]=s[0]*s[0]*a+o,r[1]=s[1]*s[0]*a-s[2],r[2]=s[2]*s[0]*a+s[1],r[3]=0,r[4]=s[0]*s[1]*a+s[2],r[5]=s[1]*s[1]*a+o,r[6]=s[2]*s[1]*a-s[0],r[7]=0,r[8]=s[0]*s[2]*a-s[1],r[9]=s[1]*s[2]*a+s[0],r[10]=s[2]*s[2]*a+o,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r};var t8=e8;const{sin:n8,cos:r8}=Jn,i8=(r,e)=>{const t=n8(e),n=r8(e);return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=n,r[6]=t,r[7]=0,r[8]=0,r[9]=-t,r[10]=n,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r};var s8=i8;const{sin:o8,cos:a8}=Jn,l8=(r,e)=>{const t=o8(e),n=a8(e);return r[0]=n,r[1]=0,r[2]=-t,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=t,r[9]=0,r[10]=n,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r};var c8=l8;const{sin:u8,cos:f8}=Jn,h8=(r,e)=>{const t=u8(e),n=f8(e);return r[0]=n,r[1]=t,r[2]=0,r[3]=0,r[4]=-t,r[5]=n,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r};var d8=h8;const p8=r=>r[0]===1&&r[1]===0&&r[2]===0&&r[3]===0&&r[4]===0&&r[5]===1&&r[6]===0&&r[7]===0&&r[8]===0&&r[9]===0&&r[10]===1&&r[11]===0&&r[12]===0&&r[13]===0&&r[14]===0&&r[15]===1;var m8=p8;const g8=r=>$i(r[1])&&$i(r[2])&&$i(r[3])&&$i(r[4])&&$i(r[6])&&$i(r[7])&&$i(r[8])&&$i(r[9])&&$i(r[11])&&r[15]===1,$i=r=>Math.abs(r)<Number.EPSILON;var v8=g8;const x8=r=>{const e=r[4]*r[9]-r[8]*r[5],t=r[8]*r[1]-r[0]*r[9],n=r[0]*r[5]-r[4]*r[1];return e*r[2]+t*r[6]+n*r[10]<0};var b8=x8;const y8=(r,e)=>{const[t,n,i,s]=e;return r[0]=1-2*t*t,r[1]=-2*n*t,r[2]=-2*i*t,r[3]=0,r[4]=-2*t*n,r[5]=1-2*n*n,r[6]=-2*i*n,r[7]=0,r[8]=-2*t*i,r[9]=-2*n*i,r[10]=1-2*i*i,r[11]=0,r[12]=2*t*s,r[13]=2*n*s,r[14]=2*i*s,r[15]=1,r};var w8=y8;const _8=(r,e,t)=>{const n=e[0],i=e[1],s=e[2],o=e[3],a=e[4],u=e[5],f=e[6],h=e[7],p=e[8],g=e[9],b=e[10],C=e[11],y=e[12],w=e[13],A=e[14],O=e[15];let E=t[0],T=t[1],M=t[2],B=t[3];return r[0]=E*n+T*a+M*p+B*y,r[1]=E*i+T*u+M*g+B*w,r[2]=E*s+T*f+M*b+B*A,r[3]=E*o+T*h+M*C+B*O,E=t[4],T=t[5],M=t[6],B=t[7],r[4]=E*n+T*a+M*p+B*y,r[5]=E*i+T*u+M*g+B*w,r[6]=E*s+T*f+M*b+B*A,r[7]=E*o+T*h+M*C+B*O,E=t[8],T=t[9],M=t[10],B=t[11],r[8]=E*n+T*a+M*p+B*y,r[9]=E*i+T*u+M*g+B*w,r[10]=E*s+T*f+M*b+B*A,r[11]=E*o+T*h+M*C+B*O,E=t[12],T=t[13],M=t[14],B=t[15],r[12]=E*n+T*a+M*p+B*y,r[13]=E*i+T*u+M*g+B*w,r[14]=E*s+T*f+M*b+B*A,r[15]=E*o+T*h+M*C+B*O,r};var S8=_8;const{EPS:C8}=Kt,{sin:P8,cos:M8}=Jn,E8=j2,A8=(r,e,t,n)=>{let[i,s,o]=n;const a=i*i+s*s+o*o;if(Math.abs(a)<C8)return E8(r,e);const u=1/Math.sqrt(a);i*=u,s*=u,o*=u;const f=P8(t),h=M8(t),p=1-h,g=e[0],b=e[1],C=e[2],y=e[3],w=e[4],A=e[5],O=e[6],E=e[7],T=e[8],M=e[9],B=e[10],F=e[11],I=i*i*p+h,N=s*i*p+o*f,G=o*i*p-s*f,X=i*s*p-o*f,J=s*s*p+h,Z=o*s*p+i*f,H=i*o*p+s*f,ne=s*o*p-i*f,ie=o*o*p+h;return r[0]=g*I+w*N+T*G,r[1]=b*I+A*N+M*G,r[2]=C*I+O*N+B*G,r[3]=y*I+E*N+F*G,r[4]=g*X+w*J+T*Z,r[5]=b*X+A*J+M*Z,r[6]=C*X+O*J+B*Z,r[7]=y*X+E*J+F*Z,r[8]=g*H+w*ne+T*ie,r[9]=b*H+A*ne+M*ie,r[10]=C*H+O*ne+B*ie,r[11]=y*H+E*ne+F*ie,e!==r&&(r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r};var T8=A8;const{sin:I8,cos:L8}=Jn,D8=(r,e,t)=>{const n=I8(t),i=L8(t),s=e[4],o=e[5],a=e[6],u=e[7],f=e[8],h=e[9],p=e[10],g=e[11];return e!==r&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[4]=s*i+f*n,r[5]=o*i+h*n,r[6]=a*i+p*n,r[7]=u*i+g*n,r[8]=f*i-s*n,r[9]=h*i-o*n,r[10]=p*i-a*n,r[11]=g*i-u*n,r};var O8=D8;const{sin:R8,cos:B8}=Jn,F8=(r,e,t)=>{const n=R8(t),i=B8(t),s=e[0],o=e[1],a=e[2],u=e[3],f=e[8],h=e[9],p=e[10],g=e[11];return e!==r&&(r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=s*i-f*n,r[1]=o*i-h*n,r[2]=a*i-p*n,r[3]=u*i-g*n,r[8]=s*n+f*i,r[9]=o*n+h*i,r[10]=a*n+p*i,r[11]=u*n+g*i,r};var N8=F8;const{sin:k8,cos:U8}=Jn,V8=(r,e,t)=>{const n=k8(t),i=U8(t),s=e[0],o=e[1],a=e[2],u=e[3],f=e[4],h=e[5],p=e[6],g=e[7];return e!==r&&(r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=s*i+f*n,r[1]=o*i+h*n,r[2]=a*i+p*n,r[3]=u*i+g*n,r[4]=f*i-s*n,r[5]=h*i-o*n,r[6]=p*i-a*n,r[7]=g*i-u*n,r};var z8=V8;const G8=(r,e,t)=>{const n=t[0],i=t[1],s=t[2];return r[0]=e[0]*n,r[1]=e[1]*n,r[2]=e[2]*n,r[3]=e[3]*n,r[4]=e[4]*i,r[5]=e[5]*i,r[6]=e[6]*i,r[7]=e[7]*i,r[8]=e[8]*s,r[9]=e[9]*s,r[10]=e[10]*s,r[11]=e[11]*s,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r};var $8=G8;const W8=(r,e,t)=>(r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r[4]=e[4]-t[4],r[5]=e[5]-t[5],r[6]=e[6]-t[6],r[7]=e[7]-t[7],r[8]=e[8]-t[8],r[9]=e[9]-t[9],r[10]=e[10]-t[10],r[11]=e[11]-t[11],r[12]=e[12]-t[12],r[13]=e[13]-t[13],r[14]=e[14]-t[14],r[15]=e[15]-t[15],r);var X8=W8;const H8=r=>r.map(e=>e.toFixed(7)).toString();var Y8=H8;const q8=(r,e,t)=>{const n=t[0],i=t[1],s=t[2];let o,a,u,f,h,p,g,b,C,y,w,A;return e===r?(r[12]=e[0]*n+e[4]*i+e[8]*s+e[12],r[13]=e[1]*n+e[5]*i+e[9]*s+e[13],r[14]=e[2]*n+e[6]*i+e[10]*s+e[14],r[15]=e[3]*n+e[7]*i+e[11]*s+e[15]):(o=e[0],a=e[1],u=e[2],f=e[3],h=e[4],p=e[5],g=e[6],b=e[7],C=e[8],y=e[9],w=e[10],A=e[11],r[0]=o,r[1]=a,r[2]=u,r[3]=f,r[4]=h,r[5]=p,r[6]=g,r[7]=b,r[8]=C,r[9]=y,r[10]=w,r[11]=A,r[12]=o*n+h*i+C*s+e[12],r[13]=a*n+p*i+y*s+e[13],r[14]=u*n+g*i+w*s+e[14],r[15]=f*n+b*i+A*s+e[15]),r};var Z8=q8,Vt={add:f6,clone:m6,copy:j2,create:qp,invert:x6,equals:y6,fromRotation:Q2,fromScaling:B6,fromTaitBryanRotation:N6,fromTranslation:U6,fromValues:G6,fromVectorRotation:t8,fromXRotation:s8,fromYRotation:c8,fromZRotation:d8,identity:J2,isIdentity:m8,isOnlyTransformScale:v8,isMirroring:b8,mirrorByPlane:w8,multiply:S8,rotate:T8,rotateX:O8,rotateY:N8,rotateZ:z8,scale:$8,subtract:X8,toString:Y8,translate:Z8};function j8(r,e){const t=e,n=t[0],i=t[1],s=t[2],o=t[3],a=t[4],u=t[5],f=t[6],h=t[7],p=t[8],g=t[9],b=t[10],C=t[11],y=t[12],w=t[13],A=t[14],O=t[15],E=g*A*h-w*b*h+w*f*C-u*A*C-g*f*O+u*b*O,T=y*b*h-p*A*h-y*f*C+a*A*C+p*f*O-a*b*O,M=p*w*h-y*g*h+y*u*C-a*w*C-p*u*O+a*g*O,B=y*g*f-p*w*f-y*u*b+a*w*b+p*u*A-a*g*A,F=n*E+i*T+s*M+o*B;if(F===0)return Vt.fromValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const I=1/F;return r[0]=E*I,r[1]=(w*b*o-g*A*o-w*s*C+i*A*C+g*s*O-i*b*O)*I,r[2]=(u*A*o-w*f*o+w*s*h-i*A*h-u*s*O+i*f*O)*I,r[3]=(g*f*o-u*b*o-g*s*h+i*b*h+u*s*C-i*f*C)*I,r[4]=T*I,r[5]=(p*A*o-y*b*o+y*s*C-n*A*C-p*s*O+n*b*O)*I,r[6]=(y*f*o-a*A*o-y*s*h+n*A*h+a*s*O-n*f*O)*I,r[7]=(a*b*o-p*f*o+p*s*h-n*b*h-a*s*C+n*f*C)*I,r[8]=M*I,r[9]=(y*g*o-p*w*o-y*i*C+n*w*C+p*i*O-n*g*O)*I,r[10]=(a*w*o-y*u*o+y*i*h-n*w*h-a*i*O+n*u*O)*I,r[11]=(p*u*o-a*g*o-p*i*h+n*g*h+a*i*C-n*u*C)*I,t[12]=B*I,t[13]=(p*w*s-y*g*s+y*i*b-n*w*b-p*i*A+n*g*A)*I,t[14]=(y*u*s-a*w*s-y*i*f+n*w*f+a*i*A-n*u*A)*I,t[15]=(a*g*s-p*u*s+p*i*f-n*g*f-a*i*b+n*u*b)*I,r}const sw=r=>r.reduce((e,t)=>Array.isArray(t)?e.concat(sw(t)):e.concat(t),[]);var Jt=sw;const K8=r=>Object.assign({},r);var J8=K8;const Q8=Vt,eD=r=>(r===void 0&&(r=[]),{sides:r,transforms:Q8.create()});var J0=eD;const tD=(r,e)=>(r[0]=Math.abs(e[0]),r[1]=Math.abs(e[1]),r);var nD=tD;const rD=(r,e,t)=>(r[0]=e[0]+t[0],r[1]=e[1]+t[1],r);var iD=rD,sp={},sD={get exports(){return sp},set exports(r){sp=r}};const oD=r=>Math.atan2(r[1],r[0]);var Zp=oD;(function(r){r.exports=Zp})(sD);const aD=Zp,lD=r=>aD(r)*57.29577951308232;var cD=lD;const uD=()=>[0,0];var Q0=uD;const fD=Q0,hD=r=>{const e=fD();return e[0]=r[0],e[1]=r[1],e};var dD=hD;const pD=(r,e)=>(r[0]=e[0],r[1]=e[1],r);var mD=pD;const gD=(r,e,t)=>(r[0]=0,r[1]=0,r[2]=e[0]*t[1]-e[1]*t[0],r);var vD=gD;const xD=(r,e)=>{const t=e[0]-r[0],n=e[1]-r[1];return Math.sqrt(t*t+n*n)};var bD=xD;const yD=(r,e,t)=>(r[0]=e[0]/t[0],r[1]=e[1]/t[1],r);var wD=yD;const _D=(r,e)=>r[0]*e[0]+r[1]*e[1];var SD=_D;const CD=(r,e)=>r[0]===e[0]&&r[1]===e[1];var PD=CD;const{sin:MD,cos:ED}=Jn,AD=(r,e)=>(r[0]=ED(e),r[1]=MD(e),r);var ow=AD;const TD=ow,ID=(r,e)=>TD(r,e*.017453292519943295);var LD=ID;const DD=(r,e)=>(r[0]=e,r[1]=e,r);var OD=DD;const RD=Q0,BD=(r,e)=>{const t=RD();return t[0]=r,t[1]=e,t};var FD=BD;const ND=r=>Math.sqrt(r[0]*r[0]+r[1]*r[1]);var kD=ND;const UD=(r,e,t,n)=>{const i=e[0],s=e[1];return r[0]=i+n*(t[0]-i),r[1]=s+n*(t[1]-s),r};var VD=UD;const zD=(r,e,t)=>(r[0]=Math.max(e[0],t[0]),r[1]=Math.max(e[1],t[1]),r);var GD=zD;const $D=(r,e,t)=>(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r);var WD=$D;const XD=(r,e,t)=>(r[0]=e[0]*t[0],r[1]=e[1]*t[1],r);var HD=XD;const YD=(r,e)=>(r[0]=-e[0],r[1]=-e[1],r);var qD=YD;const ZD=(r,e,t,n)=>{const i=e[0]-t[0],s=e[1]-t[1],o=Math.cos(n),a=Math.sin(n);return r[0]=i*o-s*a+t[0],r[1]=i*a+s*o+t[1],r};var aw=ZD;const{TAU:jD}=Kt,KD=Q0,JD=aw,QD=(r,e)=>JD(r,e,KD(),jD/4);var e7=QD;const t7=(r,e)=>{const t=e[0],n=e[1];let i=t*t+n*n;return i>0&&(i=1/Math.sqrt(i)),r[0]=t*i,r[1]=n*i,r};var n7=t7;const r7=(r,e,t)=>(r[0]=e[0]*t,r[1]=e[1]*t,r);var i7=r7;const s7=(r,e,t)=>(r[0]=Math.round(e[0]/t)*t+0,r[1]=Math.round(e[1]/t)*t+0,r);var o7=s7;const a7=(r,e)=>{const t=e[0]-r[0],n=e[1]-r[1];return t*t+n*n};var l7=a7;const c7=r=>{const e=r[0],t=r[1];return e*e+t*t};var u7=c7;const f7=(r,e,t)=>(r[0]=e[0]-t[0],r[1]=e[1]-t[1],r);var h7=f7;const d7=r=>`[${r[0].toFixed(7)}, ${r[1].toFixed(7)}]`;var p7=d7;const m7=(r,e,t)=>{const n=e[0],i=e[1];return r[0]=t[0]*n+t[4]*i+t[12],r[1]=t[1]*n+t[5]*i+t[13],r};var g7=m7,Bt={abs:nD,add:iD,angle:sp,angleDegrees:cD,angleRadians:Zp,clone:dD,copy:mD,create:Q0,cross:vD,distance:bD,divide:wD,dot:SD,equals:PD,fromAngleDegrees:LD,fromAngleRadians:ow,fromScalar:OD,fromValues:FD,length:kD,lerp:VD,max:GD,min:WD,multiply:HD,negate:qD,normal:e7,normalize:n7,rotate:aw,scale:i7,snap:o7,squaredDistance:l7,squaredLength:u7,subtract:h7,toString:p7,transform:g7};const nd=Bt,v7=J0,x7=r=>{if(!Array.isArray(r))throw new Error("the given points must be an array");let e=r.length;if(e<3)throw new Error("the given points must define a closed geometry with three or more points");nd.equals(r[0],r[e-1])&&--e;const t=[];let n=r[e-1];for(let i=0;i<e;i++){const s=r[i];t.push([nd.clone(n),nd.clone(s)]),n=s}return v7(t)};var b7=x7;const y7=Vt,D1=Bt,w7=J0,_7=r=>{if(r[0]!==0)throw new Error("invalid compact binary data");const e=w7();e.transforms=y7.clone(r.slice(1,17));for(let t=21;t<r.length;t+=4){const n=D1.fromValues(r[t+0],r[t+1]),i=D1.fromValues(r[t+2],r[t+3]);e.sides.push([n,i])}return r[17]>=0&&(e.color=[r[17],r[18],r[19],r[20]]),e};var S7=_7;const C7=r=>!!(r&&typeof r=="object"&&"sides"in r&&"transforms"in r&&Array.isArray(r.sides)&&"length"in r.transforms);var lw=C7;const O1=Vt,Iu=Bt,P7=r=>(O1.isIdentity(r.transforms)||(r.sides=r.sides.map(e=>{const t=Iu.transform(Iu.create(),e[0],r.transforms),n=Iu.transform(Iu.create(),e[1],r.transforms);return[t,n]}),r.transforms=O1.create()),r);var M7=P7;const E7=M7,A7=r=>E7(r).sides;var Ic=A7;const T7=J0,I7=Ic,L7=r=>{const t=I7(r).map(n=>[n[1],n[0]]);return t.reverse(),T7(t)};var D7=L7;const Tl=Bt,O7=Ic,R7=r=>{const e=new Map,t=n=>{const i=n.toString();return e.has(i)?e.get(i):(e.set(i,n),n)};return r.map(n=>n.map(t))},B7=r=>{const e=new Map;return R7(r).forEach(n=>{e.has(n[0])?e.get(n[0]).push(n):e.set(n[0],[n])}),e},F7=r=>{const e=B7(O7(r)),t=[];for(;;){let n;for(const[o,a]of e){if(n=a.shift(),!n){e.delete(o);continue}break}if(n===void 0)break;const i=[],s=n[0];for(;;){i.push(n[0]);const o=n[1];if(o===s)break;const a=e.get(o);if(!a)throw new Error(`geometry is not closed at vertex ${o}`);const u=N7(n,a);a.length===0&&e.delete(o),n=u}i.length>0&&i.push(i.shift()),t.push(i)}return e.clear(),t},N7=(r,e)=>{if(e.length===1)return e.pop();const t=Tl.create(),n=Tl.angleDegrees(Tl.subtract(t,r[1],r[0]));let i,s;e.forEach((a,u)=>{let h=Tl.angleDegrees(Tl.subtract(t,a[1],a[0]))-n;h<-180&&(h+=360),h>=180&&(h-=360),(s===void 0||h>i)&&(s=u,i=h)});const o=e[s];return e.splice(s,1),o};var cw=F7;const k7=Ic,U7=r=>{const t=k7(r).map(n=>n[0]);return t.length>0&&t.push(t.shift()),t};var V7=U7;const R1=Bt,z7=Ic,G7=r=>{const e=z7(r);let t="geom2 ("+e.length+` sides):
[
`;return e.forEach(n=>{t+="  ["+R1.toString(n[0])+", "+R1.toString(n[1])+`]
`}),t+=`]
`,t};var $7=G7;const W7=r=>{const e=r.sides,t=r.transforms;let n=[-1,-1,-1,-1];r.color&&(n=r.color);const i=new Float32Array(1+16+4+e.length*4);i[0]=0,i[1]=t[0],i[2]=t[1],i[3]=t[2],i[4]=t[3],i[5]=t[4],i[6]=t[5],i[7]=t[6],i[8]=t[7],i[9]=t[8],i[10]=t[9],i[11]=t[10],i[12]=t[11],i[13]=t[12],i[14]=t[13],i[15]=t[14],i[16]=t[15],i[17]=n[0],i[18]=n[1],i[19]=n[2],i[20]=n[3];for(let s=0;s<e.length;s++){const o=s*4+21,a=e[s][0],u=e[s][1];i[o+0]=a[0],i[o+1]=a[1],i[o+2]=u[0],i[o+3]=u[1]}return i};var X7=W7;const B1=Vt,H7=(r,e)=>{const t=B1.multiply(B1.create(),r,e.transforms);return Object.assign({},e,{transforms:t})};var Y7=H7;const q7=Bt,Z7=lw,j7=cw,K7=r=>{if(!Z7(r))throw new Error("invalid geom2 structure");if(j7(r),r.sides.forEach(e=>{if(q7.equals(e[0],e[1]))throw new Error(`geom2 self-edge ${e[0]}`)}),!r.transforms.every(Number.isFinite))throw new Error(`geom2 invalid transforms ${r.transforms}`)};var J7=K7,rn={clone:J8,create:J0,fromPoints:b7,fromCompactBinary:S7,isA:lw,reverse:D7,toOutlines:cw,toPoints:V7,toSides:Ic,toString:$7,toCompactBinary:X7,transform:Y7,validate:J7};const Q7=r=>Object.assign({},r);var e9=Q7;const t9=Vt,n9=r=>(r===void 0&&(r=[]),{polygons:r,transforms:t9.create()});var ef=n9;const r9=r=>((r===void 0||r.length<3)&&(r=[]),{vertices:r});var Ja=r9;const i9=Ja,s9=at,o9=(...r)=>{let e,t;return r.length===1?(e=i9(),t=r[0]):(e=r[0],t=r[1]),e.vertices=t.vertices.map(n=>s9.clone(n)),e};var a9=o9;const l9=at,c9=Ja,u9=r=>{const e=r.map(t=>l9.clone(t));return c9(e)};var f9=u9;const h9=Ja,d9=(r,e)=>{const t=h9(r);return t.plane=e,t};var p9=d9;const m9=()=>[0,0,0,0];var tf=m9;const g9=tf,v9=r=>{const e=g9();return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e};var uw=v9;const x9=(r,e)=>(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r);var fw=x9;const b9=(r,e)=>r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3];var hw=b9;const y9=(r,e)=>(r[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r[3]=-e[3],r);var dw=y9;const rd=at,w9=(r,e,t)=>{const n=rd.normalize(rd.create(),e),i=rd.dot(t,n);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=i,r};var _9=w9;const S9=tf,C9=(r,e,t,n)=>{const i=S9();return i[0]=r,i[1]=e,i[2]=t,i[3]=n,i};var pw=C9;const ai=at,P9=(r,...e)=>{const t=e.length,n=ai.create(),i=ai.create(),s=o=>{const a=e[o],u=e[(o+1)%t],f=e[(o+2)%t];return ai.subtract(n,u,a),ai.subtract(i,f,a),ai.cross(n,n,i),ai.normalize(n,n),n};return r[0]=0,r[1]=0,r[2]=0,t===3?ai.copy(r,s(0)):(e.forEach((o,a)=>{ai.add(r,r,s(a))}),ai.normalize(r,r)),r[3]=ai.dot(r,e[0]),r};var mw=P9;const{EPS:id}=Kt,lr=at,M9=(r,e,t,n)=>{let i=lr.subtract(lr.create(),t,e),s=lr.subtract(lr.create(),n,e);lr.length(i)<id&&(i=lr.orthogonal(i,s)),lr.length(s)<id&&(s=lr.orthogonal(s,i));let o=lr.cross(lr.create(),i,s);lr.length(o)<id&&(s=lr.orthogonal(s,i),o=lr.cross(o,i,s)),o=lr.normalize(o,o);const a=lr.dot(o,e);return r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=a,r};var E9=M9;const A9=at,T9=(r,e)=>{const t=e[0]*r[0]+e[1]*r[1]+e[2]*r[2]-r[3],n=e[0]-t*r[0],i=e[1]-t*r[1],s=e[2]-t*r[2];return A9.fromValues(n,i,s)};var I9=T9;const L9=at,D9=(r,e)=>L9.dot(r,e)-r[3];var gw=D9;const O9=r=>`(${r[0].toFixed(9)}, ${r[1].toFixed(9)}, ${r[2].toFixed(9)}, ${r[3].toFixed(9)})`;var vw=O9;const R9=Vt,cr=at,B9=mw,F9=dw,N9=(r,e,t)=>{const n=R9.isMirroring(t),i=cr.orthogonal(cr.create(),e),s=cr.cross(i,e,i),o=cr.cross(cr.create(),e,s);let a=cr.fromScalar(cr.create(),e[3]);cr.multiply(a,a,e);let u=cr.add(cr.create(),a,s),f=cr.add(cr.create(),a,o);return a=cr.transform(a,a,t),u=cr.transform(u,u,t),f=cr.transform(f,f,t),B9(r,a,u,f),n&&F9(r,r),r};var k9=N9,Mi={clone:uw,copy:fw,create:tf,equals:hw,flip:dw,fromNormalAndPoint:_9,fromValues:pw,fromPoints:mw,fromPointsRandom:E9,projectionOfPoint:I9,signedDistanceToPoint:gw,toString:vw,transform:k9};const F1=Mi,U9=Ja,V9=r=>{const e=r.vertices.slice().reverse(),t=U9(e);return r.plane&&(t.plane=F1.flip(F1.create(),r.plane)),t};var z9=V9;const G9=r=>!!(r&&typeof r=="object"&&"vertices"in r&&Array.isArray(r.vertices));var xw=G9;const N1=Mi,ro=at,$9=r=>W9(r.vertices),W9=r=>{const e=r.length;if(e>2){const t=N1.fromPoints(N1.create(),...r);let n=r[e-2],i=r[e-1];for(let s=0;s<e;s++){const o=r[s];if(!X9(n,i,o,t))return!1;n=i,i=o}}return!0},X9=(r,e,t,n)=>{const i=ro.cross(ro.create(),ro.subtract(ro.create(),e,r),ro.subtract(ro.create(),t,e));return ro.dot(i,n)>=0};var bw=$9;const k1=Mi,H9=r=>(r.plane||(r.plane=k1.fromPoints(k1.create(),...r.vertices)),r.plane);var jp=H9;const Y9=jp,q9=r=>{const e=r.vertices.length;if(e<3)return 0;const t=r.vertices,n=Y9(r),i=Math.abs(n[0]),s=Math.abs(n[1]),o=Math.abs(n[2]);if(i+s+o===0)return 0;let a=3;i>s&&i>o?a=1:s>o&&(a=2);let u=0,f=0,h=1,p=2;switch(a){case 1:for(h=1;h<e;h++)f=h-1,p=(h+1)%e,u+=t[h][1]*(t[p][2]-t[f][2]);u+=t[0][1]*(t[1][2]-t[e-1][2]),u/=2*n[0];break;case 2:for(h=1;h<e;h++)f=h-1,p=(h+1)%e,u+=t[h][2]*(t[p][0]-t[f][0]);u+=t[0][2]*(t[1][0]-t[e-1][0]),u/=2*n[1];break;case 3:default:for(h=1;h<e;h++)f=h-1,p=(h+1)%e,u+=t[h][0]*(t[p][1]-t[f][1]);u+=t[0][0]*(t[1][1]-t[e-1][1]),u/=2*n[2];break}return u};var yw=q9;const Il=at,Z9=r=>{const e=r.vertices,t=e.length,n=t===0?Il.create():Il.clone(e[0]),i=Il.clone(n);for(let s=1;s<t;s++)Il.min(n,n,e[s]),Il.max(i,i,e[s]);return[n,i]};var j9=Z9;const K9=(r,e)=>r[0]*e[0]+r[1]*e[1]+r[2]*e[2]+r[3]*e[3];var J9=K9;const Q9=(r,e)=>(r[0]=e,r[1]=e,r[2]=e,r[3]=e,r);var eO=Q9;const tO=(r,e,t)=>{const[n,i,s,o]=e;return r[0]=t[0]*n+t[4]*i+t[8]*s+t[12]*o,r[1]=t[1]*n+t[5]*i+t[9]*s+t[13]*o,r[2]=t[2]*n+t[6]*i+t[10]*s+t[14]*o,r[3]=t[3]*n+t[7]*i+t[11]*s+t[15]*o,r};var nO=tO,rO={clone:uw,copy:fw,create:tf,dot:J9,equals:hw,fromScalar:eO,fromValues:pw,toString:vw,transform:nO};const iO=rO,U1=new WeakMap,sO=r=>{let e=U1.get(r);if(e)return e;const t=r.vertices,n=iO.create();if(t.length===0)return n[0]=0,n[1]=0,n[2]=0,n[3]=0,n;let i=t[0],s=i,o=i,a=i,u=i,f=i;t.forEach(b=>{i[0]>b[0]&&(i=b),s[1]>b[1]&&(s=b),o[2]>b[2]&&(o=b),a[0]<b[0]&&(a=b),u[1]<b[1]&&(u=b),f[2]<b[2]&&(f=b)}),n[0]=(i[0]+a[0])*.5,n[1]=(s[1]+u[1])*.5,n[2]=(o[2]+f[2])*.5;const h=n[0]-a[0],p=n[1]-u[1],g=n[2]-f[2];return n[3]=Math.sqrt(h*h+p*p+g*g),U1.set(r,n),n};var oO=sO;const sd=at,aO=r=>{let e=0;const t=r.vertices,n=sd.create();for(let i=0;i<t.length-2;i++)sd.cross(n,t[i+1],t[i+2]),e+=sd.dot(t[0],n);return e/=6,e};var lO=aO;const cO=r=>r.vertices;var uO=cO;const fO=at,hO=r=>{let e="poly3: vertices: [";return r.vertices.forEach(t=>{e+=`${fO.toString(t)}, `}),e+="]",e};var dO=hO;const pO=Vt,V1=at,mO=Ja,gO=(r,e)=>{const t=e.vertices.map(n=>V1.transform(V1.create(),n,r));return pO.isMirroring(r)&&t.reverse(),mO(t)};var vO=gO;const xO=gw,{NEPS:bO}=Kt,yO=at,wO=xw,_O=bw,SO=yw,CO=jp,PO=r=>{if(!wO(r))throw new Error("invalid poly3 structure");if(r.vertices.length<3)throw new Error(`poly3 not enough vertices ${r.vertices.length}`);if(SO(r)<=0)throw new Error("poly3 area must be greater than zero");for(let e=0;e<r.vertices.length;e++)if(yO.equals(r.vertices[e],r.vertices[(e+1)%r.vertices.length]))throw new Error(`poly3 duplicate vertex ${r.vertices[e]}`);if(!_O(r))throw new Error("poly3 must be convex");if(r.vertices.forEach(e=>{if(!e.every(Number.isFinite))throw new Error(`poly3 invalid vertex ${e}`)}),r.vertices.length>3){const e=CO(r);r.vertices.forEach(t=>{const n=Math.abs(xO(e,t));if(n>bO)throw new Error(`poly3 must be coplanar: vertex ${t} distance ${n}`)})}};var MO=PO,nn={clone:a9,create:Ja,fromPoints:f9,fromPointsAndPlane:p9,invert:z9,isA:xw,isConvex:bw,measureArea:yw,measureBoundingBox:j9,measureBoundingSphere:oO,measureSignedVolume:lO,plane:jp,toPoints:uO,toString:dO,transform:vO,validate:MO};const EO=nn,AO=ef,TO=r=>{if(!Array.isArray(r))throw new Error("the given points must be an array");const e=r.map((n,i)=>EO.create(n));return AO(e)};var IO=TO;const LO=at,DO=Vt,OO=nn,RO=ef,BO=r=>{if(r[0]!==1)throw new Error("invalid compact binary data");const e=RO();e.transforms=DO.clone(r.slice(1,17));const t=r[21];let n=22,i=r.length-t*3;for(;i<r.length;){const s=r[n];n++;const o=[];for(let a=0;a<s;a++)o.push(LO.fromValues(r[i],r[i+1],r[i+2])),i+=3;e.polygons.push(OO.create(o))}return r[17]>=0&&(e.color=[r[17],r[18],r[19],r[20]]),e};var FO=BO;const z1=Vt,NO=nn,kO=r=>(z1.isIdentity(r.transforms)||(r.polygons=r.polygons.map(e=>NO.transform(r.transforms,e)),r.transforms=z1.create()),r);var UO=kO;const VO=UO,zO=r=>VO(r).polygons;var nf=zO;const GO=nn,$O=ef,WO=nf,XO=r=>{const t=WO(r).map(n=>GO.invert(n));return $O(t)};var HO=XO;const YO=r=>!!(r&&typeof r=="object"&&"polygons"in r&&"transforms"in r&&Array.isArray(r.polygons)&&"length"in r.transforms);var ww=YO;const qO=nn,ZO=nf,jO=r=>ZO(r).map(n=>qO.toPoints(n));var KO=jO;const JO=nn,QO=nf,eR=r=>{const e=QO(r);let t="geom3 ("+e.length+` polygons):
`;return e.forEach(n=>{t+="  "+JO.toString(n)+`
`}),t};var tR=eR;const nR=nn,rR=r=>{const e=r.polygons,t=r.transforms,n=e.length,i=e.reduce((f,h)=>f+h.vertices.length,0);let s=[-1,-1,-1,-1];r.color&&(s=r.color);const o=new Float32Array(1+16+4+1+n+i*3);o[0]=1,o[1]=t[0],o[2]=t[1],o[3]=t[2],o[4]=t[3],o[5]=t[4],o[6]=t[5],o[7]=t[6],o[8]=t[7],o[9]=t[8],o[10]=t[9],o[11]=t[10],o[12]=t[11],o[13]=t[12],o[14]=t[13],o[15]=t[14],o[16]=t[15],o[17]=s[0],o[18]=s[1],o[19]=s[2],o[20]=s[3],o[21]=i;let a=22,u=a+n;return e.forEach(f=>{const h=nR.toPoints(f);o[a]=h.length,a++;for(let p=0;p<h.length;p++){const g=h[p];o[u+0]=g[0],o[u+1]=g[1],o[u+2]=g[2],u+=3}}),o};var iR=rR;const G1=Vt,sR=(r,e)=>{const t=G1.multiply(G1.create(),r,e.transforms);return Object.assign({},e,{transforms:t})};var oR=sR;const aR=nn,lR=ww,cR=r=>{if(!lR(r))throw new Error("invalid geom3 structure");if(r.polygons.forEach(aR.validate),uR(r),!r.transforms.every(Number.isFinite))throw new Error(`geom3 invalid transforms ${r.transforms}`)},uR=r=>{const e=new Map;r.polygons.forEach(({vertices:n})=>{n.forEach((i,s)=>{const o=`${i}`,a=`${n[(s+1)%n.length]}`,u=`${o}/${a}`,f=e.has(u)?e.get(u):0;e.set(u,f+1)})});const t=[];if(e.forEach((n,i)=>{const s=i.split("/").reverse().join("/"),o=e.get(s);n!==o&&t.push(i.replace("/"," -> "))}),t.length>0)throw new Error(`non-manifold edges ${t.length}
${t.join(`
`)}`)};var fR=cR,Rt={clone:e9,create:ef,fromPoints:IO,fromCompactBinary:FO,invert:HO,isA:ww,toPoints:KO,toPolygons:nf,toString:tR,toCompactBinary:iR,transform:oR,validate:fR};const hR=r=>Object.assign({},r);var Kp=hR;const{EPS:$1}=Kt,dR=Bt,pR=Kp,mR=r=>{if(r.isClosed)return r;const e=pR(r);if(e.isClosed=!0,e.points.length>1){const t=e.points,n=t[0];let i=t[t.length-1];for(;dR.distance(n,i)<$1*$1&&(t.pop(),t.length!==1);)i=t[t.length-1]}return e};var _w=mR;const gR=Vt,vR=r=>(r===void 0&&(r=[]),{points:r,isClosed:!1,transforms:gR.create()});var rf=vR;const{EPS:W1}=Kt,X1=Bt,xR=_w,bR=rf,yR=(r,e)=>{const t={closed:!1};let{closed:n}=Object.assign({},t,r),i=bR();if(i.points=e.map(s=>X1.clone(s)),i.points.length>1){const s=i.points[0],o=i.points[i.points.length-1];X1.distance(s,o)<W1*W1&&(n=!0)}return n===!0&&(i=xR(i)),i};var Jp=yR;const H1=Vt,Y1=Bt,wR=r=>(H1.isIdentity(r.transforms)||(r.points=r.points.map(e=>Y1.transform(Y1.create(),e,r.transforms)),r.transforms=H1.create()),r);var _R=wR;const SR=_R,CR=r=>SR(r).points;var Qa=CR;const{TAU:Lu}=Kt,In=Bt,PR=Jp,MR=Qa,ER=(r,e)=>{const t={radius:[0,0],xaxisrotation:0,clockwise:!1,large:!1,segments:16};let{endpoint:n,radius:i,xaxisrotation:s,clockwise:o,large:a,segments:u}=Object.assign({},t,r);if(!Array.isArray(n))throw new Error("endpoint must be an array of X and Y values");if(n.length<2)throw new Error("endpoint must contain X and Y values");if(n=In.clone(n),!Array.isArray(i))throw new Error("radius must be an array of X and Y values");if(i.length<2)throw new Error("radius must contain X and Y values");if(u<4)throw new Error("segments must be four or more");const f=1e5;if(e.isClosed)throw new Error("the given path cannot be closed");const h=MR(e);if(h.length<1)throw new Error("the given path must contain one or more points (as the starting point for the arc)");let p=i[0],g=i[1];const b=h[h.length-1];p=Math.round(p*f)/f,g=Math.round(g*f)/f,n=In.fromValues(Math.round(n[0]*f)/f,Math.round(n[1]*f)/f);const C=!o;let y=[];if(p===0||g===0)y.push(n);else{p=Math.abs(p),g=Math.abs(g);const A=s,O=Math.cos(A),E=Math.sin(A),T=In.subtract(In.create(),b,n);In.scale(T,T,.5);const M=Math.round((O*T[0]+E*T[1])*f)/f,B=Math.round((-E*T[0]+O*T[1])*f)/f,F=In.fromValues(M,B),I=F[0]*F[0]/(p*p)+F[1]*F[1]/(g*g);if(I>1){const oe=Math.sqrt(I);p*=oe,g*=oe,p=Math.round(p*f)/f,g=Math.round(g*f)/f}let N=Math.sqrt((p*p*g*g-p*p*F[1]*F[1]-g*g*F[0]*F[0])/(p*p*F[1]*F[1]+g*g*F[0]*F[0]));C===a&&(N=-N);const G=In.fromValues(p*F[1]/g,-g*F[0]/p);In.scale(G,G,N);let X=In.fromValues(O*G[0]-E*G[1],E*G[0]+O*G[1]);X=In.add(X,X,In.scale(In.create(),In.add(In.create(),b,n),.5));const J=In.fromValues((F[0]-G[0])/p,(F[1]-G[1])/g),Z=In.fromValues((-F[0]-G[0])/p,(-F[1]-G[1])/g),H=In.angleRadians(J);let ie=In.angleRadians(Z)-H;ie=ie%Lu,!C&&ie>0?ie-=Lu:C&&ie<0&&(ie+=Lu);let be=Math.ceil(Math.abs(ie)/Lu*u)+1;be<1&&(be=1);for(let oe=1;oe<be;oe++){const Te=H+oe/be*ie,Ie=Math.cos(Te),ve=Math.sin(Te),he=In.fromValues(O*p*Ie-E*g*ve,E*p*Ie+O*g*ve);In.add(he,he,X),y.push(he)}be&&y.push(r.endpoint)}return y=h.concat(y),PR({},y)};var AR=ER;const TR=Jp,IR=Qa,{equals:LR}=Bt,DR=(...r)=>{let e=!1,t=[];return r.forEach((n,i)=>{const s=IR(n).slice();if(t.length>0&&s.length>0&&LR(s[0],t[t.length-1])&&s.shift(),s.length>0&&e)throw new Error(`Cannot concatenate to a closed path; check the ${i}th path`);e=n.isClosed,t=t.concat(s)}),TR({closed:e},t)};var Sw=DR;const OR=Sw,RR=rf,BR=(r,e)=>OR(e,RR(r));var Cw=BR;const{TAU:FR}=Kt,Ar=Bt,NR=Bt,kR=Cw,UR=Qa,VR=(r,e)=>{const t={segments:16};let{controlPoints:n,segments:i}=Object.assign({},t,r);if(!Array.isArray(n))throw new Error("controlPoints must be an array of one or more points");if(n.length<1)throw new Error("controlPoints must be an array of one or more points");if(i<4)throw new Error("segments must be four or more");if(e.isClosed)throw new Error("the given geometry cannot be closed");const s=UR(e);if(s.length<1)throw new Error("the given path must contain one or more points (as the starting point for the bezier curve)");if(n=n.slice(),n[0]===null){if(n.length<2)throw new Error("a null control point must be passed with one more control points");let B=s[s.length-2];if("lastBezierControlPoint"in e&&(B=e.lastBezierControlPoint),!Array.isArray(B))throw new Error("the given path must contain TWO or more points if given a null control point");const F=Ar.scale(Ar.create(),s[s.length-1],2);Ar.subtract(F,F,B),n[0]=F}n.unshift(s[s.length-1]);const a=n.length-1,u=[];let f=1;for(let B=0;B<=a;++B)B>0&&(f*=B),u.push(f);const h=[];for(let B=0;B<=a;++B){const F=u[a]/(u[B]*u[a-B]);h.push(F)}const p=Ar.create(),g=Ar.create(),b=NR.create(),C=B=>{let F=1,I=Math.pow(1-B,a);const N=B!==1?1/(1-B):1,G=Ar.create();for(let X=0;X<=a;++X){X===a&&(I=1);const J=h[X]*F*I,Z=Ar.scale(p,n[X],J);Ar.add(G,G,Z),F*=B,I*=N}return G},y=[],w=[],A=a+1;for(let B=0;B<A;++B){const F=B/(A-1),I=C(F);y.push(I),w.push(F)}let O=1;const E=FR/i,T=Math.sin(E);for(;O<y.length-1;){const B=Ar.subtract(p,y[O],y[O-1]);Ar.normalize(B,B);const F=Ar.subtract(g,y[O+1],y[O]);Ar.normalize(F,F);const I=Ar.cross(b,B,F);if(Math.abs(I[2])>T){const N=w[O-1],G=w[O+1],X=N+(G-N)*1/3,J=N+(G-N)*2/3,Z=C(X),H=C(J);y.splice(O,1,Z,H),w.splice(O,1,X,J),O--,O<1&&(O=1)}else++O}y.shift();const M=kR(y,e);return M.lastBezierControlPoint=n[n.length-2],M};var zR=VR;const GR=Bt,q1=Qa,$R=(r,e)=>{if(r.isClosed!==e.isClosed||r.points.length!==e.points.length)return!1;const t=q1(r),n=q1(e),i=t.length;let s=0;do{let o=!1;for(let a=0;a<i;a++)if(!GR.equals(t[a],n[(a+s)%i])){o=!0;break}if(o===!1)return!0;if(!r.isClosed)return!1}while(++s<i);return!1};var WR=$R;const XR=Vt,HR=Bt,YR=rf,qR=r=>{if(r[0]!==2)throw new Error("invalid compact binary data");const e=YR();e.transforms=XR.clone(r.slice(1,17)),e.isClosed=!!r[17];for(let t=22;t<r.length;t+=2){const n=HR.fromValues(r[t],r[t+1]);e.points.push(n)}return r[18]>=0&&(e.color=[r[18],r[19],r[20],r[21]]),e};var ZR=qR;const jR=r=>!!(r&&typeof r=="object"&&"points"in r&&"transforms"in r&&"isClosed"in r&&Array.isArray(r.points)&&"length"in r.transforms);var Pw=jR;const KR=Kp,JR=r=>{const e=KR(r);return e.points=r.points.slice().reverse(),e};var QR=JR;const eB=Bt,tB=Qa,nB=r=>{const e=tB(r);let t="path ("+e.length+" points, "+r.isClosed+`):
[
`;return e.forEach(n=>{t+="  "+eB.toString(n)+`,
`}),t+=`]
`,t};var rB=nB;const iB=r=>{const e=r.points,t=r.transforms;let n=[-1,-1,-1,-1];r.color&&(n=r.color);const i=new Float32Array(1+16+1+4+e.length*2);i[0]=2,i[1]=t[0],i[2]=t[1],i[3]=t[2],i[4]=t[3],i[5]=t[4],i[6]=t[5],i[7]=t[6],i[8]=t[7],i[9]=t[8],i[10]=t[9],i[11]=t[10],i[12]=t[11],i[13]=t[12],i[14]=t[13],i[15]=t[14],i[16]=t[15],i[17]=r.isClosed?1:0,i[18]=n[0],i[19]=n[1],i[20]=n[2],i[21]=n[3];for(let s=0;s<e.length;s++){const o=s*2+22,a=e[s];i[o]=a[0],i[o+1]=a[1]}return i};var sB=iB;const Z1=Vt,oB=(r,e)=>{const t=Z1.multiply(Z1.create(),r,e.transforms);return Object.assign({},e,{transforms:t})};var aB=oB;const lB=Bt,cB=Pw,uB=r=>{if(!cB(r))throw new Error("invalid path2 structure");if(r.points.length>1){for(let e=0;e<r.points.length;e++)if(lB.equals(r.points[e],r.points[(e+1)%r.points.length]))throw new Error(`path2 duplicate points ${r.points[e]}`)}if(r.points.forEach(e=>{if(!e.every(Number.isFinite))throw new Error(`path2 invalid point ${e}`)}),!r.transforms.every(Number.isFinite))throw new Error(`path2 invalid transforms ${r.transforms}`)};var fB=uB,_r={appendArc:AR,appendBezier:zR,appendPoints:Cw,clone:Kp,close:_w,concat:Sw,create:rf,equals:WR,fromPoints:Jp,fromCompactBinary:ZR,isA:Pw,reverse:QR,toPoints:Qa,toString:rB,toCompactBinary:sB,transform:aB,validate:fB};const hB=Jt,Mw=rn,Ew=Rt,dB=_r,pB=nn,C0=new WeakMap,mB=()=>0,gB=r=>{let e=C0.get(r);return e||(e=Mw.toSides(r).reduce((n,i)=>n+(i[0][0]*i[1][1]-i[0][1]*i[1][0]),0),e*=.5,C0.set(r,e),e)},vB=r=>{let e=C0.get(r);return e||(e=Ew.toPolygons(r).reduce((n,i)=>n+pB.measureArea(i),0),C0.set(r,e),e)},xB=(...r)=>{if(r=hB(r),r.length===0)throw new Error("wrong number of arguments");const e=r.map(t=>dB.isA(t)?mB():Mw.isA(t)?gB(t):Ew.isA(t)?vB(t):0);return e.length===1?e[0]:e};var Aw=xB;const bB=Jt,yB=Aw,wB=(...r)=>{if(r=bB(r),r.length===0)throw new Error("measureAggregateArea: no geometries supplied");const e=yB(r);if(r.length===1)return e;const t=0;return e.reduce((n,i)=>n+i,t)};var _B=wB;const SB=Jt,xi=Bt,Ll=at,Tw=rn,Iw=Rt,Lw=_r,j1=nn,za=new WeakMap,CB=r=>{let e=za.get(r);if(e)return e;const t=Lw.toPoints(r);let n;t.length===0?n=xi.create():n=xi.clone(t[0]);let i=xi.clone(n);return t.forEach(s=>{xi.min(n,n,s),xi.max(i,i,s)}),n=[n[0],n[1],0],i=[i[0],i[1],0],e=[n,i],za.set(r,e),e},PB=r=>{let e=za.get(r);if(e)return e;const t=Tw.toPoints(r);let n;t.length===0?n=xi.create():n=xi.clone(t[0]);let i=xi.clone(n);return t.forEach(s=>{xi.min(n,n,s),xi.max(i,i,s)}),n=[n[0],n[1],0],i=[i[0],i[1],0],e=[n,i],za.set(r,e),e},MB=r=>{let e=za.get(r);if(e)return e;const t=Iw.toPolygons(r);let n=Ll.create();if(t.length>0){const s=j1.toPoints(t[0]);Ll.copy(n,s[0])}let i=Ll.clone(n);return t.forEach(s=>{j1.toPoints(s).forEach(o=>{Ll.min(n,n,o),Ll.max(i,i,o)})}),n=[n[0],n[1],n[2]],i=[i[0],i[1],i[2]],e=[n,i],za.set(r,e),e},EB=(...r)=>{if(r=SB(r),r.length===0)throw new Error("wrong number of arguments");const e=r.map(t=>Lw.isA(t)?CB(t):Tw.isA(t)?PB(t):Iw.isA(t)?MB(t):[[0,0,0],[0,0,0]]);return e.length===1?e[0]:e};var Ro=EB;const AB=Jt,TB=iw,IB=rw,LB=Ro,DB=(...r)=>{if(r=AB(r),r.length===0)throw new Error("measureAggregateBoundingBox: no geometries supplied");const e=LB(r);if(r.length===1)return e;const t=[[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],[-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE]];return e.reduce((n,i)=>(n=[TB(n[0],n[0],i[0]),IB(n[1],n[1],i[1])],n),t)};var Qp=DB;const{EPS:OB}=Kt,RB=(r,e)=>{let t=0;for(let n=0;n<e;n++)t+=r[1][n]-r[0][n];return OB*t/e};var Dw=RB;const BB=r=>{let e=0;for(let t=0;t<r.length;t++){const n=(t+1)%r.length;e+=r[t][0]*r[n][1],e-=r[n][0]*r[t][1]}return e/2};var Ow=BB;const FB=Ow,NB=r=>FB(r.vertices);var Rw=NB;const kB=r=>((r===void 0||r.length<3)&&(r=[]),{vertices:r});var Bw=kB;const UB=Bw,VB=r=>{const e=r.vertices.slice().reverse();return UB(e)};var Fw=VB;const zB=Rw,GB=Fw,$B=(r,e)=>{if(r.length===0)return 0;const t=e.vertices;return t.length<3?0:(zB(e)<0&&(e=GB(e)),r.reduce((i,s)=>i+WB(s,t),0)===r.length?1:0)},WB=(r,e)=>{const t=e.length,n=r[0],i=r[1];let s=e[t-1],o=e[0],a=s[1]>i,u=0,f=0;for(let h=t+1;--h;){const p=o[1]>i;if(a!==p){const g=s[0]>n,b=o[0]>n;(g&&b||o[0]-(o[1]-i)*(s[0]-o[0])/(s[1]-o[1])>=n)&&(u=!u)}a=p,s=o,o=e[++f]}return u};var XB=$B,Nw={arePointsInside:XB,create:Bw,flip:Fw,measureArea:Rw},kw={geom2:rn,geom3:Rt,path2:_r,poly2:Nw,poly3:nn};const HB=Jt,YB=Qp,qB=Dw,{geom2:ZB,geom3:jB,path2:KB}=kw,JB=(...r)=>{if(r=HB(r),r.length===0)throw new Error("measureAggregateEpsilon: no geometries supplied");const e=YB(r);let t=0;return t=r.reduce((n,i)=>KB.isA(i)||ZB.isA(i)?Math.max(n,2):jB.isA(i)?Math.max(n,3):0,t),qB(e,t)};var QB=JB;const eF=Jt,tF=rn,Uw=Rt,nF=_r,rF=nn,K1=new WeakMap,iF=()=>0,sF=()=>0,oF=r=>{let e=K1.get(r);return e||(e=Uw.toPolygons(r).reduce((n,i)=>n+rF.measureSignedVolume(i),0),K1.set(r,e),e)},aF=(...r)=>{if(r=eF(r),r.length===0)throw new Error("wrong number of arguments");const e=r.map(t=>nF.isA(t)?iF():tF.isA(t)?sF():Uw.isA(t)?oF(t):0);return e.length===1?e[0]:e};var Vw=aF;const lF=Jt,cF=Vw,uF=(...r)=>{if(r=lF(r),r.length===0)throw new Error("measureAggregateVolume: no geometries supplied");const e=cF(r);if(r.length===1)return e;const t=0;return e.reduce((n,i)=>n+i,t)};var fF=uF;const hF=Jt,zw=Bt,vr=at,Gw=rn,$w=Rt,Ww=_r,J1=nn,Ga=new WeakMap,dF=r=>{let e=Ga.get(r);if(e!==void 0)return e;const t=vr.create();let n=0;const i=Ww.toPoints(r);if(i.length>0){let s=0;const o=vr.create();i.forEach(a=>{vr.add(t,t,vr.fromVec2(o,a,0)),s++}),vr.scale(t,t,1/s),i.forEach(a=>{n=Math.max(n,zw.squaredDistance(t,a))}),n=Math.sqrt(n)}return e=[t,n],Ga.set(r,e),e},pF=r=>{let e=Ga.get(r);if(e!==void 0)return e;const t=vr.create();let n=0;const i=Gw.toSides(r);if(i.length>0){let s=0;const o=vr.create();i.forEach(a=>{vr.add(t,t,vr.fromVec2(o,a[0],0)),s++}),vr.scale(t,t,1/s),i.forEach(a=>{n=Math.max(n,zw.squaredDistance(t,a[0]))}),n=Math.sqrt(n)}return e=[t,n],Ga.set(r,e),e},mF=r=>{let e=Ga.get(r);if(e!==void 0)return e;const t=vr.create();let n=0;const i=$w.toPolygons(r);if(i.length>0){let s=0;i.forEach(o=>{J1.toPoints(o).forEach(a=>{vr.add(t,t,a),s++})}),vr.scale(t,t,1/s),i.forEach(o=>{J1.toPoints(o).forEach(a=>{n=Math.max(n,vr.squaredDistance(t,a))})}),n=Math.sqrt(n)}return e=[t,n],Ga.set(r,e),e},gF=(...r)=>{r=hF(r);const e=r.map(t=>Ww.isA(t)?dF(t):Gw.isA(t)?pF(t):$w.isA(t)?mF(t):[[0,0,0],0]);return e.length===1?e[0]:e};var vF=gF;const xF=Jt,bF=Ro,yF=(...r)=>{r=xF(r);const e=r.map(t=>{const n=bF(t);return[n[0][0]+(n[1][0]-n[0][0])/2,n[0][1]+(n[1][1]-n[0][1])/2,n[0][2]+(n[1][2]-n[0][2])/2]});return e.length===1?e[0]:e};var wF=yF;const _F=Jt,ui=at,Xw=rn,Hw=Rt,P0=new WeakMap,SF=r=>{let e=P0.get(r);if(e!==void 0)return e;const t=Xw.toSides(r);let n=0,i=0,s=0;if(t.length>0){for(let a=0;a<t.length;a++){const u=t[a][0],f=t[a][1],h=u[0]*f[1]-u[1]*f[0];n+=h,i+=(u[0]+f[0])*h,s+=(u[1]+f[1])*h}n/=2;const o=1/(n*6);i*=o,s*=o}return e=ui.fromValues(i,s,0),P0.set(r,e),e},CF=r=>{let e=P0.get(r);if(e!==void 0)return e;e=ui.create();const t=Hw.toPolygons(r);if(t.length===0)return e;let n=0;const i=ui.create();return t.forEach(s=>{const o=s.vertices;for(let a=0;a<o.length-2;a++){ui.cross(i,o[a+1],o[a+2]);const u=ui.dot(o[0],i)/6;n+=u,ui.add(i,o[0],o[a+1]),ui.add(i,i,o[a+2]);const f=ui.scale(i,i,1/4*u);ui.add(e,e,f)}}),ui.scale(e,e,1/n),P0.set(r,e),e},PF=(...r)=>{r=_F(r);const e=r.map(t=>Xw.isA(t)?SF(t):Hw.isA(t)?CF(t):[0,0,0]);return e.length===1?e[0]:e};var MF=PF;const EF=Jt,AF=Ro,TF=(...r)=>{r=EF(r);const e=r.map(t=>{const n=AF(t);return[n[1][0]-n[0][0],n[1][1]-n[0][1],n[1][2]-n[0][2]]});return e.length===1?e[0]:e};var IF=TF;const LF=Jt,{geom2:DF,geom3:OF,path2:RF}=kw,em=Dw,tm=Ro,BF=r=>em(tm(r),2),FF=r=>em(tm(r),2),NF=r=>em(tm(r),3),kF=(...r)=>{if(r=LF(r),r.length===0)throw new Error("wrong number of arguments");const e=r.map(t=>RF.isA(t)?BF(t):DF.isA(t)?FF(t):OF.isA(t)?NF(t):0);return e.length===1?e[0]:e};var Lc=kF,Yw={measureAggregateArea:_B,measureAggregateBoundingBox:Qp,measureAggregateEpsilon:QB,measureAggregateVolume:fF,measureArea:Aw,measureBoundingBox:Ro,measureBoundingSphere:vF,measureCenter:wF,measureCenterOfMass:MF,measureDimensions:IF,measureEpsilon:Lc,measureVolume:Vw};class qw{constructor(){ml(this,"map",new Map);ml(this,"font",null);ml(this,"segments",-1);ml(this,"features",{})}get(e,t,n,i){return this.font===t&&this.segments===n&&this.features===i?this.map.get(e)??null:(this.map.clear(),null)}save(e,t){this.map.set(e,t)}}function UF(r,e,t,n,i,s){const[o,a]=Ds(i),u={value:{x:i[0],y:i[1]}},f={x:{min:e,max:t,step:n},y:{min:e,max:t,step:n,inverted:!0},label:s},h=r.addInput(u,"value",f);return h.on("change",g=>{a([g.value.x,g.value.y])}),[o,g=>{a(()=>g),u.value={x:g[0],y:g[1]},h.refresh()}]}function Q1(r,e,t){return Op(r,e,{label:t})}function ex(r,e){r!==null&&e.push(r)}const VF=Math.PI/180;function zF(r){return r*VF}function dn(r,e){e<0&&(e+=r.length);const t=r[e];if(t===void 0)throw new Error(`No item at index ${e}`);return t}var sf={},op={},GF={get exports(){return op},set exports(r){op=r}};(function(r){(function(){var e={};e.version="6.4.2.2",e.use_lines=!0,e.use_xyz=!1;var t=!1;r.exports?(r.exports=e,t=!0):typeof document<"u"?window.ClipperLib=e:self.ClipperLib=e;var n;if(t){var i="chrome";n="Netscape"}else{var i=navigator.userAgent.toString().toLowerCase();n=navigator.appName}var s={};i.indexOf("chrome")!=-1&&i.indexOf("chromium")==-1?s.chrome=1:s.chrome=0,i.indexOf("chromium")!=-1?s.chromium=1:s.chromium=0,i.indexOf("safari")!=-1&&i.indexOf("chrome")==-1&&i.indexOf("chromium")==-1?s.safari=1:s.safari=0,i.indexOf("firefox")!=-1?s.firefox=1:s.firefox=0,i.indexOf("firefox/17")!=-1?s.firefox17=1:s.firefox17=0,i.indexOf("firefox/15")!=-1?s.firefox15=1:s.firefox15=0,i.indexOf("firefox/3")!=-1?s.firefox3=1:s.firefox3=0,i.indexOf("opera")!=-1?s.opera=1:s.opera=0,i.indexOf("msie 10")!=-1?s.msie10=1:s.msie10=0,i.indexOf("msie 9")!=-1?s.msie9=1:s.msie9=0,i.indexOf("msie 8")!=-1?s.msie8=1:s.msie8=0,i.indexOf("msie 7")!=-1?s.msie7=1:s.msie7=0,i.indexOf("msie ")!=-1?s.msie=1:s.msie=0,e.biginteger_used=null;var o;function a(l,d,x){e.biginteger_used=1,l!=null&&(typeof l=="number"&&typeof d>"u"?this.fromInt(l):typeof l=="number"?this.fromNumber(l,d,x):d==null&&typeof l!="string"?this.fromString(l,256):this.fromString(l,d))}function u(){return new a(null,void 0,void 0)}function f(l,d,x,_,D,V){for(;--V>=0;){var $=d*this[l++]+x[_]+D;D=Math.floor($/67108864),x[_++]=$&67108863}return D}function h(l,d,x,_,D,V){for(var $=d&32767,ee=d>>15;--V>=0;){var te=this[l]&32767,Ce=this[l++]>>15,Xe=ee*te+Ce*$;te=$*te+((Xe&32767)<<15)+x[_]+(D&1073741823),D=(te>>>30)+(Xe>>>15)+ee*Ce+(D>>>30),x[_++]=te&1073741823}return D}function p(l,d,x,_,D,V){for(var $=d&16383,ee=d>>14;--V>=0;){var te=this[l]&16383,Ce=this[l++]>>14,Xe=ee*te+Ce*$;te=$*te+((Xe&16383)<<14)+x[_]+D,D=(te>>28)+(Xe>>14)+ee*Ce,x[_++]=te&268435455}return D}n=="Microsoft Internet Explorer"?(a.prototype.am=h,o=30):n!="Netscape"?(a.prototype.am=f,o=26):(a.prototype.am=p,o=28),a.prototype.DB=o,a.prototype.DM=(1<<o)-1,a.prototype.DV=1<<o;var g=52;a.prototype.FV=Math.pow(2,g),a.prototype.F1=g-o,a.prototype.F2=2*o-g;var b="0123456789abcdefghijklmnopqrstuvwxyz",C=new Array,y,w;for(y="0".charCodeAt(0),w=0;w<=9;++w)C[y++]=w;for(y="a".charCodeAt(0),w=10;w<36;++w)C[y++]=w;for(y="A".charCodeAt(0),w=10;w<36;++w)C[y++]=w;function A(l){return b.charAt(l)}function O(l,d){var x=C[l.charCodeAt(d)];return x??-1}function E(l){for(var d=this.t-1;d>=0;--d)l[d]=this[d];l.t=this.t,l.s=this.s}function T(l){this.t=1,this.s=l<0?-1:0,l>0?this[0]=l:l<-1?this[0]=l+this.DV:this.t=0}function M(l){var d=u();return d.fromInt(l),d}function B(l,d){var x;if(d==16)x=4;else if(d==8)x=3;else if(d==256)x=8;else if(d==2)x=1;else if(d==32)x=5;else if(d==4)x=2;else{this.fromRadix(l,d);return}this.t=0,this.s=0;for(var _=l.length,D=!1,V=0;--_>=0;){var $=x==8?l[_]&255:O(l,_);if($<0){l.charAt(_)=="-"&&(D=!0);continue}D=!1,V==0?this[this.t++]=$:V+x>this.DB?(this[this.t-1]|=($&(1<<this.DB-V)-1)<<V,this[this.t++]=$>>this.DB-V):this[this.t-1]|=$<<V,V+=x,V>=this.DB&&(V-=this.DB)}x==8&&l[0]&128&&(this.s=-1,V>0&&(this[this.t-1]|=(1<<this.DB-V)-1<<V)),this.clamp(),D&&a.ZERO.subTo(this,this)}function F(){for(var l=this.s&this.DM;this.t>0&&this[this.t-1]==l;)--this.t}function I(l){if(this.s<0)return"-"+this.negate().toString(l);var d;if(l==16)d=4;else if(l==8)d=3;else if(l==2)d=1;else if(l==32)d=5;else if(l==4)d=2;else return this.toRadix(l);var x=(1<<d)-1,_,D=!1,V="",$=this.t,ee=this.DB-$*this.DB%d;if($-- >0)for(ee<this.DB&&(_=this[$]>>ee)>0&&(D=!0,V=A(_));$>=0;)ee<d?(_=(this[$]&(1<<ee)-1)<<d-ee,_|=this[--$]>>(ee+=this.DB-d)):(_=this[$]>>(ee-=d)&x,ee<=0&&(ee+=this.DB,--$)),_>0&&(D=!0),D&&(V+=A(_));return D?V:"0"}function N(){var l=u();return a.ZERO.subTo(this,l),l}function G(){return this.s<0?this.negate():this}function X(l){var d=this.s-l.s;if(d!=0)return d;var x=this.t;if(d=x-l.t,d!=0)return this.s<0?-d:d;for(;--x>=0;)if((d=this[x]-l[x])!=0)return d;return 0}function J(l){var d=1,x;return(x=l>>>16)!=0&&(l=x,d+=16),(x=l>>8)!=0&&(l=x,d+=8),(x=l>>4)!=0&&(l=x,d+=4),(x=l>>2)!=0&&(l=x,d+=2),(x=l>>1)!=0&&(l=x,d+=1),d}function Z(){return this.t<=0?0:this.DB*(this.t-1)+J(this[this.t-1]^this.s&this.DM)}function H(l,d){var x;for(x=this.t-1;x>=0;--x)d[x+l]=this[x];for(x=l-1;x>=0;--x)d[x]=0;d.t=this.t+l,d.s=this.s}function ne(l,d){for(var x=l;x<this.t;++x)d[x-l]=this[x];d.t=Math.max(this.t-l,0),d.s=this.s}function ie(l,d){var x=l%this.DB,_=this.DB-x,D=(1<<_)-1,V=Math.floor(l/this.DB),$=this.s<<x&this.DM,ee;for(ee=this.t-1;ee>=0;--ee)d[ee+V+1]=this[ee]>>_|$,$=(this[ee]&D)<<x;for(ee=V-1;ee>=0;--ee)d[ee]=0;d[V]=$,d.t=this.t+V+1,d.s=this.s,d.clamp()}function be(l,d){d.s=this.s;var x=Math.floor(l/this.DB);if(x>=this.t){d.t=0;return}var _=l%this.DB,D=this.DB-_,V=(1<<_)-1;d[0]=this[x]>>_;for(var $=x+1;$<this.t;++$)d[$-x-1]|=(this[$]&V)<<D,d[$-x]=this[$]>>_;_>0&&(d[this.t-x-1]|=(this.s&V)<<D),d.t=this.t-x,d.clamp()}function oe(l,d){for(var x=0,_=0,D=Math.min(l.t,this.t);x<D;)_+=this[x]-l[x],d[x++]=_&this.DM,_>>=this.DB;if(l.t<this.t){for(_-=l.s;x<this.t;)_+=this[x],d[x++]=_&this.DM,_>>=this.DB;_+=this.s}else{for(_+=this.s;x<l.t;)_-=l[x],d[x++]=_&this.DM,_>>=this.DB;_-=l.s}d.s=_<0?-1:0,_<-1?d[x++]=this.DV+_:_>0&&(d[x++]=_),d.t=x,d.clamp()}function Te(l,d){var x=this.abs(),_=l.abs(),D=x.t;for(d.t=D+_.t;--D>=0;)d[D]=0;for(D=0;D<_.t;++D)d[D+x.t]=x.am(0,_[D],d,D,0,x.t);d.s=0,d.clamp(),this.s!=l.s&&a.ZERO.subTo(d,d)}function Ie(l){for(var d=this.abs(),x=l.t=2*d.t;--x>=0;)l[x]=0;for(x=0;x<d.t-1;++x){var _=d.am(x,d[x],l,2*x,0,1);(l[x+d.t]+=d.am(x+1,2*d[x],l,2*x+1,_,d.t-x-1))>=d.DV&&(l[x+d.t]-=d.DV,l[x+d.t+1]=1)}l.t>0&&(l[l.t-1]+=d.am(x,d[x],l,2*x,0,1)),l.s=0,l.clamp()}function ve(l,d,x){var _=l.abs();if(!(_.t<=0)){var D=this.abs();if(D.t<_.t){d!=null&&d.fromInt(0),x!=null&&this.copyTo(x);return}x==null&&(x=u());var V=u(),$=this.s,ee=l.s,te=this.DB-J(_[_.t-1]);te>0?(_.lShiftTo(te,V),D.lShiftTo(te,x)):(_.copyTo(V),D.copyTo(x));var Ce=V.t,Xe=V[Ce-1];if(Xe!=0){var Ue=Xe*(1<<this.F1)+(Ce>1?V[Ce-2]>>this.F2:0),Qe=this.FV/Ue,xt=(1<<this.F1)/Ue,Pt=1<<this.F2,Tt=x.t,Ht=Tt-Ce,Xn=d??u();for(V.dlShiftTo(Ht,Xn),x.compareTo(Xn)>=0&&(x[x.t++]=1,x.subTo(Xn,x)),a.ONE.dlShiftTo(Ce,Xn),Xn.subTo(V,V);V.t<Ce;)V[V.t++]=0;for(;--Ht>=0;){var Br=x[--Tt]==Xe?this.DM:Math.floor(x[Tt]*Qe+(x[Tt-1]+Pt)*xt);if((x[Tt]+=V.am(0,Br,x,Ht,0,Ce))<Br)for(V.dlShiftTo(Ht,Xn),x.subTo(Xn,x);x[Tt]<--Br;)x.subTo(Xn,x)}d!=null&&(x.drShiftTo(Ce,d),$!=ee&&a.ZERO.subTo(d,d)),x.t=Ce,x.clamp(),te>0&&x.rShiftTo(te,x),$<0&&a.ZERO.subTo(x,x)}}}function he(l){var d=u();return this.abs().divRemTo(l,null,d),this.s<0&&d.compareTo(a.ZERO)>0&&l.subTo(d,d),d}function Be(l){this.m=l}function Ae(l){return l.s<0||l.compareTo(this.m)>=0?l.mod(this.m):l}function $e(l){return l}function Ee(l){l.divRemTo(this.m,null,l)}function ut(l,d,x){l.multiplyTo(d,x),this.reduce(x)}function Se(l,d){l.squareTo(d),this.reduce(d)}Be.prototype.convert=Ae,Be.prototype.revert=$e,Be.prototype.reduce=Ee,Be.prototype.mulTo=ut,Be.prototype.sqrTo=Se;function we(){if(this.t<1)return 0;var l=this[0];if(!(l&1))return 0;var d=l&3;return d=d*(2-(l&15)*d)&15,d=d*(2-(l&255)*d)&255,d=d*(2-((l&65535)*d&65535))&65535,d=d*(2-l*d%this.DV)%this.DV,d>0?this.DV-d:-d}function de(l){this.m=l,this.mp=l.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<l.DB-15)-1,this.mt2=2*l.t}function ye(l){var d=u();return l.abs().dlShiftTo(this.m.t,d),d.divRemTo(this.m,null,d),l.s<0&&d.compareTo(a.ZERO)>0&&this.m.subTo(d,d),d}function ue(l){var d=u();return l.copyTo(d),this.reduce(d),d}function pe(l){for(;l.t<=this.mt2;)l[l.t++]=0;for(var d=0;d<this.m.t;++d){var x=l[d]&32767,_=x*this.mpl+((x*this.mph+(l[d]>>15)*this.mpl&this.um)<<15)&l.DM;for(x=d+this.m.t,l[x]+=this.m.am(0,_,l,d,0,this.m.t);l[x]>=l.DV;)l[x]-=l.DV,l[++x]++}l.clamp(),l.drShiftTo(this.m.t,l),l.compareTo(this.m)>=0&&l.subTo(this.m,l)}function Me(l,d){l.squareTo(d),this.reduce(d)}function Oe(l,d,x){l.multiplyTo(d,x),this.reduce(x)}de.prototype.convert=ye,de.prototype.revert=ue,de.prototype.reduce=pe,de.prototype.mulTo=Oe,de.prototype.sqrTo=Me;function Le(){return(this.t>0?this[0]&1:this.s)==0}function ze(l,d){if(l>4294967295||l<1)return a.ONE;var x=u(),_=u(),D=d.convert(this),V=J(l)-1;for(D.copyTo(x);--V>=0;)if(d.sqrTo(x,_),(l&1<<V)>0)d.mulTo(_,D,x);else{var $=x;x=_,_=$}return d.revert(x)}function Fe(l,d){var x;return l<256||d.isEven()?x=new Be(d):x=new de(d),this.exp(l,x)}a.prototype.copyTo=E,a.prototype.fromInt=T,a.prototype.fromString=B,a.prototype.clamp=F,a.prototype.dlShiftTo=H,a.prototype.drShiftTo=ne,a.prototype.lShiftTo=ie,a.prototype.rShiftTo=be,a.prototype.subTo=oe,a.prototype.multiplyTo=Te,a.prototype.squareTo=Ie,a.prototype.divRemTo=ve,a.prototype.invDigit=we,a.prototype.isEven=Le,a.prototype.exp=ze,a.prototype.toString=I,a.prototype.negate=N,a.prototype.abs=G,a.prototype.compareTo=X,a.prototype.bitLength=Z,a.prototype.mod=he,a.prototype.modPowInt=Fe,a.ZERO=M(0),a.ONE=M(1);function qe(){var l=u();return this.copyTo(l),l}function pt(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function ct(){return this.t==0?this.s:this[0]<<24>>24}function Y(){return this.t==0?this.s:this[0]<<16>>16}function W(l){return Math.floor(Math.LN2*this.DB/Math.log(l))}function me(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function Ne(l){if(l==null&&(l=10),this.signum()==0||l<2||l>36)return"0";var d=this.chunkSize(l),x=Math.pow(l,d),_=M(x),D=u(),V=u(),$="";for(this.divRemTo(_,D,V);D.signum()>0;)$=(x+V.intValue()).toString(l).substr(1)+$,D.divRemTo(_,D,V);return V.intValue().toString(l)+$}function We(l,d){this.fromInt(0),d==null&&(d=10);for(var x=this.chunkSize(d),_=Math.pow(d,x),D=!1,V=0,$=0,ee=0;ee<l.length;++ee){var te=O(l,ee);if(te<0){l.charAt(ee)=="-"&&this.signum()==0&&(D=!0);continue}$=d*$+te,++V>=x&&(this.dMultiply(_),this.dAddOffset($,0),V=0,$=0)}V>0&&(this.dMultiply(Math.pow(d,V)),this.dAddOffset($,0)),D&&a.ZERO.subTo(this,this)}function k(l,d,x){if(typeof d=="number")if(l<2)this.fromInt(1);else for(this.fromNumber(l,x),this.testBit(l-1)||this.bitwiseTo(a.ONE.shiftLeft(l-1),Ye,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(d);)this.dAddOffset(2,0),this.bitLength()>l&&this.subTo(a.ONE.shiftLeft(l-1),this);else{var _=new Array,D=l&7;_.length=(l>>3)+1,d.nextBytes(_),D>0?_[0]&=(1<<D)-1:_[0]=0,this.fromString(_,256)}}function L(){var l=this.t,d=new Array;d[0]=this.s;var x=this.DB-l*this.DB%8,_,D=0;if(l-- >0)for(x<this.DB&&(_=this[l]>>x)!=(this.s&this.DM)>>x&&(d[D++]=_|this.s<<this.DB-x);l>=0;)x<8?(_=(this[l]&(1<<x)-1)<<8-x,_|=this[--l]>>(x+=this.DB-8)):(_=this[l]>>(x-=8)&255,x<=0&&(x+=this.DB,--l)),_&128&&(_|=-256),D==0&&(this.s&128)!=(_&128)&&++D,(D>0||_!=this.s)&&(d[D++]=_);return d}function P(l){return this.compareTo(l)==0}function U(l){return this.compareTo(l)<0?this:l}function j(l){return this.compareTo(l)>0?this:l}function re(l,d,x){var _,D,V=Math.min(l.t,this.t);for(_=0;_<V;++_)x[_]=d(this[_],l[_]);if(l.t<this.t){for(D=l.s&this.DM,_=V;_<this.t;++_)x[_]=d(this[_],D);x.t=this.t}else{for(D=this.s&this.DM,_=V;_<l.t;++_)x[_]=d(D,l[_]);x.t=l.t}x.s=d(this.s,l.s),x.clamp()}function se(l,d){return l&d}function Ve(l){var d=u();return this.bitwiseTo(l,se,d),d}function Ye(l,d){return l|d}function it(l){var d=u();return this.bitwiseTo(l,Ye,d),d}function st(l,d){return l^d}function ot(l){var d=u();return this.bitwiseTo(l,st,d),d}function ae(l,d){return l&~d}function De(l){var d=u();return this.bitwiseTo(l,ae,d),d}function He(){for(var l=u(),d=0;d<this.t;++d)l[d]=this.DM&~this[d];return l.t=this.t,l.s=~this.s,l}function nt(l){var d=u();return l<0?this.rShiftTo(-l,d):this.lShiftTo(l,d),d}function lt(l){var d=u();return l<0?this.lShiftTo(-l,d):this.rShiftTo(l,d),d}function Ft(l){if(l==0)return-1;var d=0;return l&65535||(l>>=16,d+=16),l&255||(l>>=8,d+=8),l&15||(l>>=4,d+=4),l&3||(l>>=2,d+=2),l&1||++d,d}function an(){for(var l=0;l<this.t;++l)if(this[l]!=0)return l*this.DB+Ft(this[l]);return this.s<0?this.t*this.DB:-1}function ln(l){for(var d=0;l!=0;)l&=l-1,++d;return d}function $n(){for(var l=0,d=this.s&this.DM,x=0;x<this.t;++x)l+=ln(this[x]^d);return l}function At(l){var d=Math.floor(l/this.DB);return d>=this.t?this.s!=0:(this[d]&1<<l%this.DB)!=0}function Un(l,d){var x=a.ONE.shiftLeft(l);return this.bitwiseTo(x,d,x),x}function sn(l){return this.changeBit(l,Ye)}function Ii(l){return this.changeBit(l,ae)}function Cr(l){return this.changeBit(l,st)}function si(l,d){for(var x=0,_=0,D=Math.min(l.t,this.t);x<D;)_+=this[x]+l[x],d[x++]=_&this.DM,_>>=this.DB;if(l.t<this.t){for(_+=l.s;x<this.t;)_+=this[x],d[x++]=_&this.DM,_>>=this.DB;_+=this.s}else{for(_+=this.s;x<l.t;)_+=l[x],d[x++]=_&this.DM,_>>=this.DB;_+=l.s}d.s=_<0?-1:0,_>0?d[x++]=_:_<-1&&(d[x++]=this.DV+_),d.t=x,d.clamp()}function sr(l){var d=u();return this.addTo(l,d),d}function q(l){var d=u();return this.subTo(l,d),d}function _e(l){var d=u();return this.multiplyTo(l,d),d}function Re(){var l=u();return this.squareTo(l),l}function xe(l){var d=u();return this.divRemTo(l,d,null),d}function ke(l){var d=u();return this.divRemTo(l,null,d),d}function ft(l){var d=u(),x=u();return this.divRemTo(l,d,x),new Array(d,x)}function mt(l){this[this.t]=this.am(0,l-1,this,0,0,this.t),++this.t,this.clamp()}function _t(l,d){if(l!=0){for(;this.t<=d;)this[this.t++]=0;for(this[d]+=l;this[d]>=this.DV;)this[d]-=this.DV,++d>=this.t&&(this[this.t++]=0),++this[d]}}function yt(){}function Ct(l){return l}function gt(l,d,x){l.multiplyTo(d,x)}function vt(l,d){l.squareTo(d)}yt.prototype.convert=Ct,yt.prototype.revert=Ct,yt.prototype.mulTo=gt,yt.prototype.sqrTo=vt;function kt(l){return this.exp(l,new yt)}function yn(l,d,x){var _=Math.min(this.t+l.t,d);for(x.s=0,x.t=_;_>0;)x[--_]=0;var D;for(D=x.t-this.t;_<D;++_)x[_+this.t]=this.am(0,l[_],x,_,0,this.t);for(D=Math.min(l.t,d);_<D;++_)this.am(0,l[_],x,_,0,d-_);x.clamp()}function cn(l,d,x){--d;var _=x.t=this.t+l.t-d;for(x.s=0;--_>=0;)x[_]=0;for(_=Math.max(d-this.t,0);_<l.t;++_)x[this.t+_-d]=this.am(d-_,l[_],x,0,0,this.t+_-d);x.clamp(),x.drShiftTo(1,x)}function wn(l){this.r2=u(),this.q3=u(),a.ONE.dlShiftTo(2*l.t,this.r2),this.mu=this.r2.divide(l),this.m=l}function Qt(l){if(l.s<0||l.t>2*this.m.t)return l.mod(this.m);if(l.compareTo(this.m)<0)return l;var d=u();return l.copyTo(d),this.reduce(d),d}function Et(l){return l}function dr(l){for(l.drShiftTo(this.m.t-1,this.r2),l.t>this.m.t+1&&(l.t=this.m.t+1,l.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);l.compareTo(this.r2)<0;)l.dAddOffset(1,this.m.t+1);for(l.subTo(this.r2,l);l.compareTo(this.m)>=0;)l.subTo(this.m,l)}function un(l,d){l.squareTo(d),this.reduce(d)}function Vn(l,d,x){l.multiplyTo(d,x),this.reduce(x)}wn.prototype.convert=Qt,wn.prototype.revert=Et,wn.prototype.reduce=dr,wn.prototype.mulTo=Vn,wn.prototype.sqrTo=un;function ns(l,d){var x=l.bitLength(),_,D=M(1),V;if(x<=0)return D;x<18?_=1:x<48?_=3:x<144?_=4:x<768?_=5:_=6,x<8?V=new Be(d):d.isEven()?V=new wn(d):V=new de(d);var $=new Array,ee=3,te=_-1,Ce=(1<<_)-1;if($[1]=V.convert(this),_>1){var Xe=u();for(V.sqrTo($[1],Xe);ee<=Ce;)$[ee]=u(),V.mulTo(Xe,$[ee-2],$[ee]),ee+=2}var Ue=l.t-1,Qe,xt=!0,Pt=u(),Tt;for(x=J(l[Ue])-1;Ue>=0;){for(x>=te?Qe=l[Ue]>>x-te&Ce:(Qe=(l[Ue]&(1<<x+1)-1)<<te-x,Ue>0&&(Qe|=l[Ue-1]>>this.DB+x-te)),ee=_;!(Qe&1);)Qe>>=1,--ee;if((x-=ee)<0&&(x+=this.DB,--Ue),xt)$[Qe].copyTo(D),xt=!1;else{for(;ee>1;)V.sqrTo(D,Pt),V.sqrTo(Pt,D),ee-=2;ee>0?V.sqrTo(D,Pt):(Tt=D,D=Pt,Pt=Tt),V.mulTo(Pt,$[Qe],D)}for(;Ue>=0&&!(l[Ue]&1<<x);)V.sqrTo(D,Pt),Tt=D,D=Pt,Pt=Tt,--x<0&&(x=this.DB-1,--Ue)}return V.revert(D)}function Hr(l){var d=this.s<0?this.negate():this.clone(),x=l.s<0?l.negate():l.clone();if(d.compareTo(x)<0){var _=d;d=x,x=_}var D=d.getLowestSetBit(),V=x.getLowestSetBit();if(V<0)return d;for(D<V&&(V=D),V>0&&(d.rShiftTo(V,d),x.rShiftTo(V,x));d.signum()>0;)(D=d.getLowestSetBit())>0&&d.rShiftTo(D,d),(D=x.getLowestSetBit())>0&&x.rShiftTo(D,x),d.compareTo(x)>=0?(d.subTo(x,d),d.rShiftTo(1,d)):(x.subTo(d,x),x.rShiftTo(1,x));return V>0&&x.lShiftTo(V,x),x}function Yr(l){if(l<=0)return 0;var d=this.DV%l,x=this.s<0?l-1:0;if(this.t>0)if(d==0)x=this[0]%l;else for(var _=this.t-1;_>=0;--_)x=(d*x+this[_])%l;return x}function mn(l){var d=l.isEven();if(this.isEven()&&d||l.signum()==0)return a.ZERO;for(var x=l.clone(),_=this.clone(),D=M(1),V=M(0),$=M(0),ee=M(1);x.signum()!=0;){for(;x.isEven();)x.rShiftTo(1,x),d?((!D.isEven()||!V.isEven())&&(D.addTo(this,D),V.subTo(l,V)),D.rShiftTo(1,D)):V.isEven()||V.subTo(l,V),V.rShiftTo(1,V);for(;_.isEven();)_.rShiftTo(1,_),d?((!$.isEven()||!ee.isEven())&&($.addTo(this,$),ee.subTo(l,ee)),$.rShiftTo(1,$)):ee.isEven()||ee.subTo(l,ee),ee.rShiftTo(1,ee);x.compareTo(_)>=0?(x.subTo(_,x),d&&D.subTo($,D),V.subTo(ee,V)):(_.subTo(x,_),d&&$.subTo(D,$),ee.subTo(V,ee))}if(_.compareTo(a.ONE)!=0)return a.ZERO;if(ee.compareTo(l)>=0)return ee.subtract(l);if(ee.signum()<0)ee.addTo(l,ee);else return ee;return ee.signum()<0?ee.add(l):ee}var $t=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],rs=(1<<26)/$t[$t.length-1];function Wn(l){var d,x=this.abs();if(x.t==1&&x[0]<=$t[$t.length-1]){for(d=0;d<$t.length;++d)if(x[0]==$t[d])return!0;return!1}if(x.isEven())return!1;for(d=1;d<$t.length;){for(var _=$t[d],D=d+1;D<$t.length&&_<rs;)_*=$t[D++];for(_=x.modInt(_);d<D;)if(_%$t[d++]==0)return!1}return x.millerRabin(l)}function qr(l){var d=this.subtract(a.ONE),x=d.getLowestSetBit();if(x<=0)return!1;var _=d.shiftRight(x);l=l+1>>1,l>$t.length&&(l=$t.length);for(var D=u(),V=0;V<l;++V){D.fromInt($t[Math.floor(Math.random()*$t.length)]);var $=D.modPow(_,this);if($.compareTo(a.ONE)!=0&&$.compareTo(d)!=0){for(var ee=1;ee++<x&&$.compareTo(d)!=0;)if($=$.modPowInt(2,this),$.compareTo(a.ONE)==0)return!1;if($.compareTo(d)!=0)return!1}}return!0}a.prototype.chunkSize=W,a.prototype.toRadix=Ne,a.prototype.fromRadix=We,a.prototype.fromNumber=k,a.prototype.bitwiseTo=re,a.prototype.changeBit=Un,a.prototype.addTo=si,a.prototype.dMultiply=mt,a.prototype.dAddOffset=_t,a.prototype.multiplyLowerTo=yn,a.prototype.multiplyUpperTo=cn,a.prototype.modInt=Yr,a.prototype.millerRabin=qr,a.prototype.clone=qe,a.prototype.intValue=pt,a.prototype.byteValue=ct,a.prototype.shortValue=Y,a.prototype.signum=me,a.prototype.toByteArray=L,a.prototype.equals=P,a.prototype.min=U,a.prototype.max=j,a.prototype.and=Ve,a.prototype.or=it,a.prototype.xor=ot,a.prototype.andNot=De,a.prototype.not=He,a.prototype.shiftLeft=nt,a.prototype.shiftRight=lt,a.prototype.getLowestSetBit=an,a.prototype.bitCount=$n,a.prototype.testBit=At,a.prototype.setBit=sn,a.prototype.clearBit=Ii,a.prototype.flipBit=Cr,a.prototype.add=sr,a.prototype.subtract=q,a.prototype.multiply=_e,a.prototype.divide=xe,a.prototype.remainder=ke,a.prototype.divideAndRemainder=ft,a.prototype.modPow=ns,a.prototype.modInverse=mn,a.prototype.pow=kt,a.prototype.gcd=Hr,a.prototype.isProbablePrime=Wn,a.prototype.square=Re;var Mt=a;Mt.prototype.IsNegative=function(){return this.compareTo(Mt.ZERO)==-1},Mt.op_Equality=function(l,d){return l.compareTo(d)==0},Mt.op_Inequality=function(l,d){return l.compareTo(d)!=0},Mt.op_GreaterThan=function(l,d){return l.compareTo(d)>0},Mt.op_LessThan=function(l,d){return l.compareTo(d)<0},Mt.op_Addition=function(l,d){return new Mt(l,void 0,void 0).add(new Mt(d,void 0,void 0))},Mt.op_Subtraction=function(l,d){return new Mt(l,void 0,void 0).subtract(new Mt(d,void 0,void 0))},Mt.Int128Mul=function(l,d){return new Mt(l,void 0,void 0).multiply(new Mt(d,void 0,void 0))},Mt.op_Division=function(l,d){return l.divide(d)},Mt.prototype.ToDouble=function(){return parseFloat(this.toString())};var is=function(l,d){var x;if(typeof Object.getOwnPropertyNames>"u"){for(x in d.prototype)(typeof l.prototype[x]>"u"||l.prototype[x]===Object.prototype[x])&&(l.prototype[x]=d.prototype[x]);for(x in d)typeof l[x]>"u"&&(l[x]=d[x]);l.$baseCtor=d}else{for(var _=Object.getOwnPropertyNames(d.prototype),D=0;D<_.length;D++)typeof Object.getOwnPropertyDescriptor(l.prototype,_[D])>"u"&&Object.defineProperty(l.prototype,_[D],Object.getOwnPropertyDescriptor(d.prototype,_[D]));for(x in d)typeof l[x]>"u"&&(l[x]=d[x]);l.$baseCtor=d}};e.Path=function(){return[]},e.Path.prototype.push=Array.prototype.push,e.Paths=function(){return[]},e.Paths.prototype.push=Array.prototype.push,e.DoublePoint=function(){var l=arguments;this.X=0,this.Y=0,l.length===1?(this.X=l[0].X,this.Y=l[0].Y):l.length===2&&(this.X=l[0],this.Y=l[1])},e.DoublePoint0=function(){this.X=0,this.Y=0},e.DoublePoint0.prototype=e.DoublePoint.prototype,e.DoublePoint1=function(l){this.X=l.X,this.Y=l.Y},e.DoublePoint1.prototype=e.DoublePoint.prototype,e.DoublePoint2=function(l,d){this.X=l,this.Y=d},e.DoublePoint2.prototype=e.DoublePoint.prototype,e.PolyNode=function(){this.m_Parent=null,this.m_polygon=new e.Path,this.m_Index=0,this.m_jointype=0,this.m_endtype=0,this.m_Childs=[],this.IsOpen=!1},e.PolyNode.prototype.IsHoleNode=function(){for(var l=!0,d=this.m_Parent;d!==null;)l=!l,d=d.m_Parent;return l},e.PolyNode.prototype.ChildCount=function(){return this.m_Childs.length},e.PolyNode.prototype.Contour=function(){return this.m_polygon},e.PolyNode.prototype.AddChild=function(l){var d=this.m_Childs.length;this.m_Childs.push(l),l.m_Parent=this,l.m_Index=d},e.PolyNode.prototype.GetNext=function(){return this.m_Childs.length>0?this.m_Childs[0]:this.GetNextSiblingUp()},e.PolyNode.prototype.GetNextSiblingUp=function(){return this.m_Parent===null?null:this.m_Index===this.m_Parent.m_Childs.length-1?this.m_Parent.GetNextSiblingUp():this.m_Parent.m_Childs[this.m_Index+1]},e.PolyNode.prototype.Childs=function(){return this.m_Childs},e.PolyNode.prototype.Parent=function(){return this.m_Parent},e.PolyNode.prototype.IsHole=function(){return this.IsHoleNode()},e.PolyTree=function(){this.m_AllPolys=[],e.PolyNode.call(this)},e.PolyTree.prototype.Clear=function(){for(var l=0,d=this.m_AllPolys.length;l<d;l++)this.m_AllPolys[l]=null;this.m_AllPolys.length=0,this.m_Childs.length=0},e.PolyTree.prototype.GetFirst=function(){return this.m_Childs.length>0?this.m_Childs[0]:null},e.PolyTree.prototype.Total=function(){var l=this.m_AllPolys.length;return l>0&&this.m_Childs[0]!==this.m_AllPolys[0]&&l--,l},is(e.PolyTree,e.PolyNode),e.Math_Abs_Int64=e.Math_Abs_Int32=e.Math_Abs_Double=function(l){return Math.abs(l)},e.Math_Max_Int32_Int32=function(l,d){return Math.max(l,d)},s.msie||s.opera||s.safari?e.Cast_Int32=function(l){return l|0}:e.Cast_Int32=function(l){return~~l},typeof Number.toInteger>"u"&&(Number.toInteger=null),s.chrome?e.Cast_Int64=function(l){return l<-2147483648||l>2147483647?l<0?Math.ceil(l):Math.floor(l):~~l}:s.firefox&&typeof Number.toInteger=="function"?e.Cast_Int64=function(l){return Number.toInteger(l)}:s.msie7||s.msie8?e.Cast_Int64=function(l){return parseInt(l,10)}:s.msie?e.Cast_Int64=function(l){return l<-2147483648||l>2147483647?l<0?Math.ceil(l):Math.floor(l):l|0}:e.Cast_Int64=function(l){return l<0?Math.ceil(l):Math.floor(l)},e.Clear=function(l){l.length=0},e.PI=3.141592653589793,e.PI2=2*3.141592653589793,e.IntPoint=function(){var l=arguments,d=l.length;if(this.X=0,this.Y=0,e.use_xyz)if(this.Z=0,d===3)this.X=l[0],this.Y=l[1],this.Z=l[2];else if(d===2)this.X=l[0],this.Y=l[1],this.Z=0;else if(d===1)if(l[0]instanceof e.DoublePoint){var x=l[0];this.X=e.Clipper.Round(x.X),this.Y=e.Clipper.Round(x.Y),this.Z=0}else{var _=l[0];typeof _.Z>"u"&&(_.Z=0),this.X=_.X,this.Y=_.Y,this.Z=_.Z}else this.X=0,this.Y=0,this.Z=0;else if(d===2)this.X=l[0],this.Y=l[1];else if(d===1)if(l[0]instanceof e.DoublePoint){var x=l[0];this.X=e.Clipper.Round(x.X),this.Y=e.Clipper.Round(x.Y)}else{var _=l[0];this.X=_.X,this.Y=_.Y}else this.X=0,this.Y=0},e.IntPoint.op_Equality=function(l,d){return l.X===d.X&&l.Y===d.Y},e.IntPoint.op_Inequality=function(l,d){return l.X!==d.X||l.Y!==d.Y},e.IntPoint0=function(){this.X=0,this.Y=0,e.use_xyz&&(this.Z=0)},e.IntPoint0.prototype=e.IntPoint.prototype,e.IntPoint1=function(l){this.X=l.X,this.Y=l.Y,e.use_xyz&&(typeof l.Z>"u"?this.Z=0:this.Z=l.Z)},e.IntPoint1.prototype=e.IntPoint.prototype,e.IntPoint1dp=function(l){this.X=e.Clipper.Round(l.X),this.Y=e.Clipper.Round(l.Y),e.use_xyz&&(this.Z=0)},e.IntPoint1dp.prototype=e.IntPoint.prototype,e.IntPoint2=function(l,d,x){this.X=l,this.Y=d,e.use_xyz&&(typeof x>"u"?this.Z=0:this.Z=x)},e.IntPoint2.prototype=e.IntPoint.prototype,e.IntRect=function(){var l=arguments,d=l.length;if(d===4)this.left=l[0],this.top=l[1],this.right=l[2],this.bottom=l[3];else if(d===1){var x=l[0];this.left=x.left,this.top=x.top,this.right=x.right,this.bottom=x.bottom}else this.left=0,this.top=0,this.right=0,this.bottom=0},e.IntRect0=function(){this.left=0,this.top=0,this.right=0,this.bottom=0},e.IntRect0.prototype=e.IntRect.prototype,e.IntRect1=function(l){this.left=l.left,this.top=l.top,this.right=l.right,this.bottom=l.bottom},e.IntRect1.prototype=e.IntRect.prototype,e.IntRect4=function(l,d,x,_){this.left=l,this.top=d,this.right=x,this.bottom=_},e.IntRect4.prototype=e.IntRect.prototype,e.ClipType={ctIntersection:0,ctUnion:1,ctDifference:2,ctXor:3},e.PolyType={ptSubject:0,ptClip:1},e.PolyFillType={pftEvenOdd:0,pftNonZero:1,pftPositive:2,pftNegative:3},e.JoinType={jtSquare:0,jtRound:1,jtMiter:2},e.EndType={etOpenSquare:0,etOpenRound:1,etOpenButt:2,etClosedLine:3,etClosedPolygon:4},e.EdgeSide={esLeft:0,esRight:1},e.Direction={dRightToLeft:0,dLeftToRight:1},e.TEdge=function(){this.Bot=new e.IntPoint0,this.Curr=new e.IntPoint0,this.Top=new e.IntPoint0,this.Delta=new e.IntPoint0,this.Dx=0,this.PolyTyp=e.PolyType.ptSubject,this.Side=e.EdgeSide.esLeft,this.WindDelta=0,this.WindCnt=0,this.WindCnt2=0,this.OutIdx=0,this.Next=null,this.Prev=null,this.NextInLML=null,this.NextInAEL=null,this.PrevInAEL=null,this.NextInSEL=null,this.PrevInSEL=null},e.IntersectNode=function(){this.Edge1=null,this.Edge2=null,this.Pt=new e.IntPoint0},e.MyIntersectNodeSort=function(){},e.MyIntersectNodeSort.Compare=function(l,d){var x=d.Pt.Y-l.Pt.Y;return x>0?1:x<0?-1:0},e.LocalMinima=function(){this.Y=0,this.LeftBound=null,this.RightBound=null,this.Next=null},e.Scanbeam=function(){this.Y=0,this.Next=null},e.Maxima=function(){this.X=0,this.Next=null,this.Prev=null},e.OutRec=function(){this.Idx=0,this.IsHole=!1,this.IsOpen=!1,this.FirstLeft=null,this.Pts=null,this.BottomPt=null,this.PolyNode=null},e.OutPt=function(){this.Idx=0,this.Pt=new e.IntPoint0,this.Next=null,this.Prev=null},e.Join=function(){this.OutPt1=null,this.OutPt2=null,this.OffPt=new e.IntPoint0},e.ClipperBase=function(){this.m_MinimaList=null,this.m_CurrentLM=null,this.m_edges=new Array,this.m_UseFullRange=!1,this.m_HasOpenPaths=!1,this.PreserveCollinear=!1,this.m_Scanbeam=null,this.m_PolyOuts=null,this.m_ActiveEdges=null},e.ClipperBase.horizontal=-9007199254740992,e.ClipperBase.Skip=-2,e.ClipperBase.Unassigned=-1,e.ClipperBase.tolerance=1e-20,e.ClipperBase.loRange=47453132,e.ClipperBase.hiRange=0xfffffffffffff,e.ClipperBase.near_zero=function(l){return l>-e.ClipperBase.tolerance&&l<e.ClipperBase.tolerance},e.ClipperBase.IsHorizontal=function(l){return l.Delta.Y===0},e.ClipperBase.prototype.PointIsVertex=function(l,d){var x=d;do{if(e.IntPoint.op_Equality(x.Pt,l))return!0;x=x.Next}while(x!==d);return!1},e.ClipperBase.prototype.PointOnLineSegment=function(l,d,x,_){return _?l.X===d.X&&l.Y===d.Y||l.X===x.X&&l.Y===x.Y||l.X>d.X==l.X<x.X&&l.Y>d.Y==l.Y<x.Y&&Mt.op_Equality(Mt.Int128Mul(l.X-d.X,x.Y-d.Y),Mt.Int128Mul(x.X-d.X,l.Y-d.Y)):l.X===d.X&&l.Y===d.Y||l.X===x.X&&l.Y===x.Y||l.X>d.X==l.X<x.X&&l.Y>d.Y==l.Y<x.Y&&(l.X-d.X)*(x.Y-d.Y)===(x.X-d.X)*(l.Y-d.Y)},e.ClipperBase.prototype.PointOnPolygon=function(l,d,x){for(var _=d;;){if(this.PointOnLineSegment(l,_.Pt,_.Next.Pt,x))return!0;if(_=_.Next,_===d)break}return!1},e.ClipperBase.prototype.SlopesEqual=e.ClipperBase.SlopesEqual=function(){var l=arguments,d=l.length,x,_,D,V,$,ee,te;return d===3?(x=l[0],_=l[1],te=l[2],te?Mt.op_Equality(Mt.Int128Mul(x.Delta.Y,_.Delta.X),Mt.Int128Mul(x.Delta.X,_.Delta.Y)):e.Cast_Int64(x.Delta.Y*_.Delta.X)===e.Cast_Int64(x.Delta.X*_.Delta.Y)):d===4?(D=l[0],V=l[1],$=l[2],te=l[3],te?Mt.op_Equality(Mt.Int128Mul(D.Y-V.Y,V.X-$.X),Mt.Int128Mul(D.X-V.X,V.Y-$.Y)):e.Cast_Int64((D.Y-V.Y)*(V.X-$.X))-e.Cast_Int64((D.X-V.X)*(V.Y-$.Y))===0):(D=l[0],V=l[1],$=l[2],ee=l[3],te=l[4],te?Mt.op_Equality(Mt.Int128Mul(D.Y-V.Y,$.X-ee.X),Mt.Int128Mul(D.X-V.X,$.Y-ee.Y)):e.Cast_Int64((D.Y-V.Y)*($.X-ee.X))-e.Cast_Int64((D.X-V.X)*($.Y-ee.Y))===0)},e.ClipperBase.SlopesEqual3=function(l,d,x){return x?Mt.op_Equality(Mt.Int128Mul(l.Delta.Y,d.Delta.X),Mt.Int128Mul(l.Delta.X,d.Delta.Y)):e.Cast_Int64(l.Delta.Y*d.Delta.X)===e.Cast_Int64(l.Delta.X*d.Delta.Y)},e.ClipperBase.SlopesEqual4=function(l,d,x,_){return _?Mt.op_Equality(Mt.Int128Mul(l.Y-d.Y,d.X-x.X),Mt.Int128Mul(l.X-d.X,d.Y-x.Y)):e.Cast_Int64((l.Y-d.Y)*(d.X-x.X))-e.Cast_Int64((l.X-d.X)*(d.Y-x.Y))===0},e.ClipperBase.SlopesEqual5=function(l,d,x,_,D){return D?Mt.op_Equality(Mt.Int128Mul(l.Y-d.Y,x.X-_.X),Mt.Int128Mul(l.X-d.X,x.Y-_.Y)):e.Cast_Int64((l.Y-d.Y)*(x.X-_.X))-e.Cast_Int64((l.X-d.X)*(x.Y-_.Y))===0},e.ClipperBase.prototype.Clear=function(){this.DisposeLocalMinimaList();for(var l=0,d=this.m_edges.length;l<d;++l){for(var x=0,_=this.m_edges[l].length;x<_;++x)this.m_edges[l][x]=null;e.Clear(this.m_edges[l])}e.Clear(this.m_edges),this.m_UseFullRange=!1,this.m_HasOpenPaths=!1},e.ClipperBase.prototype.DisposeLocalMinimaList=function(){for(;this.m_MinimaList!==null;){var l=this.m_MinimaList.Next;this.m_MinimaList=null,this.m_MinimaList=l}this.m_CurrentLM=null},e.ClipperBase.prototype.RangeTest=function(l,d){d.Value?(l.X>e.ClipperBase.hiRange||l.Y>e.ClipperBase.hiRange||-l.X>e.ClipperBase.hiRange||-l.Y>e.ClipperBase.hiRange)&&e.Error("Coordinate outside allowed range in RangeTest()."):(l.X>e.ClipperBase.loRange||l.Y>e.ClipperBase.loRange||-l.X>e.ClipperBase.loRange||-l.Y>e.ClipperBase.loRange)&&(d.Value=!0,this.RangeTest(l,d))},e.ClipperBase.prototype.InitEdge=function(l,d,x,_){l.Next=d,l.Prev=x,l.Curr.X=_.X,l.Curr.Y=_.Y,e.use_xyz&&(l.Curr.Z=_.Z),l.OutIdx=-1},e.ClipperBase.prototype.InitEdge2=function(l,d){l.Curr.Y>=l.Next.Curr.Y?(l.Bot.X=l.Curr.X,l.Bot.Y=l.Curr.Y,e.use_xyz&&(l.Bot.Z=l.Curr.Z),l.Top.X=l.Next.Curr.X,l.Top.Y=l.Next.Curr.Y,e.use_xyz&&(l.Top.Z=l.Next.Curr.Z)):(l.Top.X=l.Curr.X,l.Top.Y=l.Curr.Y,e.use_xyz&&(l.Top.Z=l.Curr.Z),l.Bot.X=l.Next.Curr.X,l.Bot.Y=l.Next.Curr.Y,e.use_xyz&&(l.Bot.Z=l.Next.Curr.Z)),this.SetDx(l),l.PolyTyp=d},e.ClipperBase.prototype.FindNextLocMin=function(l){for(var d;;){for(;e.IntPoint.op_Inequality(l.Bot,l.Prev.Bot)||e.IntPoint.op_Equality(l.Curr,l.Top);)l=l.Next;if(l.Dx!==e.ClipperBase.horizontal&&l.Prev.Dx!==e.ClipperBase.horizontal)break;for(;l.Prev.Dx===e.ClipperBase.horizontal;)l=l.Prev;for(d=l;l.Dx===e.ClipperBase.horizontal;)l=l.Next;if(l.Top.Y!==l.Prev.Bot.Y){d.Prev.Bot.X<l.Bot.X&&(l=d);break}}return l},e.ClipperBase.prototype.ProcessBound=function(l,d){var x,_=l,D;if(_.OutIdx===e.ClipperBase.Skip){if(l=_,d){for(;l.Top.Y===l.Next.Bot.Y;)l=l.Next;for(;l!==_&&l.Dx===e.ClipperBase.horizontal;)l=l.Prev}else{for(;l.Top.Y===l.Prev.Bot.Y;)l=l.Prev;for(;l!==_&&l.Dx===e.ClipperBase.horizontal;)l=l.Next}if(l===_)d?_=l.Next:_=l.Prev;else{d?l=_.Next:l=_.Prev;var V=new e.LocalMinima;V.Next=null,V.Y=l.Bot.Y,V.LeftBound=null,V.RightBound=l,l.WindDelta=0,_=this.ProcessBound(l,d),this.InsertLocalMinima(V)}return _}if(l.Dx===e.ClipperBase.horizontal&&(d?x=l.Prev:x=l.Next,x.Dx===e.ClipperBase.horizontal?x.Bot.X!==l.Bot.X&&x.Top.X!==l.Bot.X&&this.ReverseHorizontal(l):x.Bot.X!==l.Bot.X&&this.ReverseHorizontal(l)),x=l,d){for(;_.Top.Y===_.Next.Bot.Y&&_.Next.OutIdx!==e.ClipperBase.Skip;)_=_.Next;if(_.Dx===e.ClipperBase.horizontal&&_.Next.OutIdx!==e.ClipperBase.Skip){for(D=_;D.Prev.Dx===e.ClipperBase.horizontal;)D=D.Prev;D.Prev.Top.X>_.Next.Top.X&&(_=D.Prev)}for(;l!==_;)l.NextInLML=l.Next,l.Dx===e.ClipperBase.horizontal&&l!==x&&l.Bot.X!==l.Prev.Top.X&&this.ReverseHorizontal(l),l=l.Next;l.Dx===e.ClipperBase.horizontal&&l!==x&&l.Bot.X!==l.Prev.Top.X&&this.ReverseHorizontal(l),_=_.Next}else{for(;_.Top.Y===_.Prev.Bot.Y&&_.Prev.OutIdx!==e.ClipperBase.Skip;)_=_.Prev;if(_.Dx===e.ClipperBase.horizontal&&_.Prev.OutIdx!==e.ClipperBase.Skip){for(D=_;D.Next.Dx===e.ClipperBase.horizontal;)D=D.Next;(D.Next.Top.X===_.Prev.Top.X||D.Next.Top.X>_.Prev.Top.X)&&(_=D.Next)}for(;l!==_;)l.NextInLML=l.Prev,l.Dx===e.ClipperBase.horizontal&&l!==x&&l.Bot.X!==l.Next.Top.X&&this.ReverseHorizontal(l),l=l.Prev;l.Dx===e.ClipperBase.horizontal&&l!==x&&l.Bot.X!==l.Next.Top.X&&this.ReverseHorizontal(l),_=_.Prev}return _},e.ClipperBase.prototype.AddPath=function(l,d,x){e.use_lines?!x&&d===e.PolyType.ptClip&&e.Error("AddPath: Open paths must be subject."):x||e.Error("AddPath: Open paths have been disabled.");var _=l.length-1;if(x)for(;_>0&&e.IntPoint.op_Equality(l[_],l[0]);)--_;for(;_>0&&e.IntPoint.op_Equality(l[_],l[_-1]);)--_;if(x&&_<2||!x&&_<1)return!1;for(var D=new Array,V=0;V<=_;V++)D.push(new e.TEdge);var $=!0;D[1].Curr.X=l[1].X,D[1].Curr.Y=l[1].Y,e.use_xyz&&(D[1].Curr.Z=l[1].Z);var ee={Value:this.m_UseFullRange};this.RangeTest(l[0],ee),this.m_UseFullRange=ee.Value,ee.Value=this.m_UseFullRange,this.RangeTest(l[_],ee),this.m_UseFullRange=ee.Value,this.InitEdge(D[0],D[1],D[_],l[0]),this.InitEdge(D[_],D[0],D[_-1],l[_]);for(var V=_-1;V>=1;--V)ee.Value=this.m_UseFullRange,this.RangeTest(l[V],ee),this.m_UseFullRange=ee.Value,this.InitEdge(D[V],D[V+1],D[V-1],l[V]);for(var te=D[0],Ce=te,Xe=te;;){if(Ce.Curr===Ce.Next.Curr&&(x||Ce.Next!==te)){if(Ce===Ce.Next)break;Ce===te&&(te=Ce.Next),Ce=this.RemoveEdge(Ce),Xe=Ce;continue}if(Ce.Prev===Ce.Next)break;if(x&&e.ClipperBase.SlopesEqual4(Ce.Prev.Curr,Ce.Curr,Ce.Next.Curr,this.m_UseFullRange)&&(!this.PreserveCollinear||!this.Pt2IsBetweenPt1AndPt3(Ce.Prev.Curr,Ce.Curr,Ce.Next.Curr))){Ce===te&&(te=Ce.Next),Ce=this.RemoveEdge(Ce),Ce=Ce.Prev,Xe=Ce;continue}if(Ce=Ce.Next,Ce===Xe||!x&&Ce.Next===te)break}if(!x&&Ce===Ce.Next||x&&Ce.Prev===Ce.Next)return!1;x||(this.m_HasOpenPaths=!0,te.Prev.OutIdx=e.ClipperBase.Skip),Ce=te;do this.InitEdge2(Ce,d),Ce=Ce.Next,$&&Ce.Curr.Y!==te.Curr.Y&&($=!1);while(Ce!==te);if($){if(x)return!1;Ce.Prev.OutIdx=e.ClipperBase.Skip;var Ue=new e.LocalMinima;for(Ue.Next=null,Ue.Y=Ce.Bot.Y,Ue.LeftBound=null,Ue.RightBound=Ce,Ue.RightBound.Side=e.EdgeSide.esRight,Ue.RightBound.WindDelta=0;Ce.Bot.X!==Ce.Prev.Top.X&&this.ReverseHorizontal(Ce),Ce.Next.OutIdx!==e.ClipperBase.Skip;)Ce.NextInLML=Ce.Next,Ce=Ce.Next;return this.InsertLocalMinima(Ue),this.m_edges.push(D),!0}this.m_edges.push(D);var Qe,xt=null;for(e.IntPoint.op_Equality(Ce.Prev.Bot,Ce.Prev.Top)&&(Ce=Ce.Next);Ce=this.FindNextLocMin(Ce),Ce!==xt;){xt===null&&(xt=Ce);var Ue=new e.LocalMinima;Ue.Next=null,Ue.Y=Ce.Bot.Y,Ce.Dx<Ce.Prev.Dx?(Ue.LeftBound=Ce.Prev,Ue.RightBound=Ce,Qe=!1):(Ue.LeftBound=Ce,Ue.RightBound=Ce.Prev,Qe=!0),Ue.LeftBound.Side=e.EdgeSide.esLeft,Ue.RightBound.Side=e.EdgeSide.esRight,x?Ue.LeftBound.Next===Ue.RightBound?Ue.LeftBound.WindDelta=-1:Ue.LeftBound.WindDelta=1:Ue.LeftBound.WindDelta=0,Ue.RightBound.WindDelta=-Ue.LeftBound.WindDelta,Ce=this.ProcessBound(Ue.LeftBound,Qe),Ce.OutIdx===e.ClipperBase.Skip&&(Ce=this.ProcessBound(Ce,Qe));var Pt=this.ProcessBound(Ue.RightBound,!Qe);Pt.OutIdx===e.ClipperBase.Skip&&(Pt=this.ProcessBound(Pt,!Qe)),Ue.LeftBound.OutIdx===e.ClipperBase.Skip?Ue.LeftBound=null:Ue.RightBound.OutIdx===e.ClipperBase.Skip&&(Ue.RightBound=null),this.InsertLocalMinima(Ue),Qe||(Ce=Pt)}return!0},e.ClipperBase.prototype.AddPaths=function(l,d,x){for(var _=!1,D=0,V=l.length;D<V;++D)this.AddPath(l[D],d,x)&&(_=!0);return _},e.ClipperBase.prototype.Pt2IsBetweenPt1AndPt3=function(l,d,x){return e.IntPoint.op_Equality(l,x)||e.IntPoint.op_Equality(l,d)||e.IntPoint.op_Equality(x,d)?!1:l.X!==x.X?d.X>l.X==d.X<x.X:d.Y>l.Y==d.Y<x.Y},e.ClipperBase.prototype.RemoveEdge=function(l){l.Prev.Next=l.Next,l.Next.Prev=l.Prev;var d=l.Next;return l.Prev=null,d},e.ClipperBase.prototype.SetDx=function(l){l.Delta.X=l.Top.X-l.Bot.X,l.Delta.Y=l.Top.Y-l.Bot.Y,l.Delta.Y===0?l.Dx=e.ClipperBase.horizontal:l.Dx=l.Delta.X/l.Delta.Y},e.ClipperBase.prototype.InsertLocalMinima=function(l){if(this.m_MinimaList===null)this.m_MinimaList=l;else if(l.Y>=this.m_MinimaList.Y)l.Next=this.m_MinimaList,this.m_MinimaList=l;else{for(var d=this.m_MinimaList;d.Next!==null&&l.Y<d.Next.Y;)d=d.Next;l.Next=d.Next,d.Next=l}},e.ClipperBase.prototype.PopLocalMinima=function(l,d){return d.v=this.m_CurrentLM,this.m_CurrentLM!==null&&this.m_CurrentLM.Y===l?(this.m_CurrentLM=this.m_CurrentLM.Next,!0):!1},e.ClipperBase.prototype.ReverseHorizontal=function(l){var d=l.Top.X;l.Top.X=l.Bot.X,l.Bot.X=d,e.use_xyz&&(d=l.Top.Z,l.Top.Z=l.Bot.Z,l.Bot.Z=d)},e.ClipperBase.prototype.Reset=function(){if(this.m_CurrentLM=this.m_MinimaList,this.m_CurrentLM!==null){this.m_Scanbeam=null;for(var l=this.m_MinimaList;l!==null;){this.InsertScanbeam(l.Y);var d=l.LeftBound;d!==null&&(d.Curr.X=d.Bot.X,d.Curr.Y=d.Bot.Y,e.use_xyz&&(d.Curr.Z=d.Bot.Z),d.OutIdx=e.ClipperBase.Unassigned),d=l.RightBound,d!==null&&(d.Curr.X=d.Bot.X,d.Curr.Y=d.Bot.Y,e.use_xyz&&(d.Curr.Z=d.Bot.Z),d.OutIdx=e.ClipperBase.Unassigned),l=l.Next}this.m_ActiveEdges=null}},e.ClipperBase.prototype.InsertScanbeam=function(l){if(this.m_Scanbeam===null)this.m_Scanbeam=new e.Scanbeam,this.m_Scanbeam.Next=null,this.m_Scanbeam.Y=l;else if(l>this.m_Scanbeam.Y){var d=new e.Scanbeam;d.Y=l,d.Next=this.m_Scanbeam,this.m_Scanbeam=d}else{for(var x=this.m_Scanbeam;x.Next!==null&&l<=x.Next.Y;)x=x.Next;if(l===x.Y)return;var _=new e.Scanbeam;_.Y=l,_.Next=x.Next,x.Next=_}},e.ClipperBase.prototype.PopScanbeam=function(l){return this.m_Scanbeam===null?(l.v=0,!1):(l.v=this.m_Scanbeam.Y,this.m_Scanbeam=this.m_Scanbeam.Next,!0)},e.ClipperBase.prototype.LocalMinimaPending=function(){return this.m_CurrentLM!==null},e.ClipperBase.prototype.CreateOutRec=function(){var l=new e.OutRec;return l.Idx=e.ClipperBase.Unassigned,l.IsHole=!1,l.IsOpen=!1,l.FirstLeft=null,l.Pts=null,l.BottomPt=null,l.PolyNode=null,this.m_PolyOuts.push(l),l.Idx=this.m_PolyOuts.length-1,l},e.ClipperBase.prototype.DisposeOutRec=function(l){var d=this.m_PolyOuts[l];d.Pts=null,d=null,this.m_PolyOuts[l]=null},e.ClipperBase.prototype.UpdateEdgeIntoAEL=function(l){l.NextInLML===null&&e.Error("UpdateEdgeIntoAEL: invalid call");var d=l.PrevInAEL,x=l.NextInAEL;return l.NextInLML.OutIdx=l.OutIdx,d!==null?d.NextInAEL=l.NextInLML:this.m_ActiveEdges=l.NextInLML,x!==null&&(x.PrevInAEL=l.NextInLML),l.NextInLML.Side=l.Side,l.NextInLML.WindDelta=l.WindDelta,l.NextInLML.WindCnt=l.WindCnt,l.NextInLML.WindCnt2=l.WindCnt2,l=l.NextInLML,l.Curr.X=l.Bot.X,l.Curr.Y=l.Bot.Y,l.PrevInAEL=d,l.NextInAEL=x,e.ClipperBase.IsHorizontal(l)||this.InsertScanbeam(l.Top.Y),l},e.ClipperBase.prototype.SwapPositionsInAEL=function(l,d){if(!(l.NextInAEL===l.PrevInAEL||d.NextInAEL===d.PrevInAEL)){if(l.NextInAEL===d){var x=d.NextInAEL;x!==null&&(x.PrevInAEL=l);var _=l.PrevInAEL;_!==null&&(_.NextInAEL=d),d.PrevInAEL=_,d.NextInAEL=l,l.PrevInAEL=d,l.NextInAEL=x}else if(d.NextInAEL===l){var D=l.NextInAEL;D!==null&&(D.PrevInAEL=d);var V=d.PrevInAEL;V!==null&&(V.NextInAEL=l),l.PrevInAEL=V,l.NextInAEL=d,d.PrevInAEL=l,d.NextInAEL=D}else{var $=l.NextInAEL,ee=l.PrevInAEL;l.NextInAEL=d.NextInAEL,l.NextInAEL!==null&&(l.NextInAEL.PrevInAEL=l),l.PrevInAEL=d.PrevInAEL,l.PrevInAEL!==null&&(l.PrevInAEL.NextInAEL=l),d.NextInAEL=$,d.NextInAEL!==null&&(d.NextInAEL.PrevInAEL=d),d.PrevInAEL=ee,d.PrevInAEL!==null&&(d.PrevInAEL.NextInAEL=d)}l.PrevInAEL===null?this.m_ActiveEdges=l:d.PrevInAEL===null&&(this.m_ActiveEdges=d)}},e.ClipperBase.prototype.DeleteFromAEL=function(l){var d=l.PrevInAEL,x=l.NextInAEL;d===null&&x===null&&l!==this.m_ActiveEdges||(d!==null?d.NextInAEL=x:this.m_ActiveEdges=x,x!==null&&(x.PrevInAEL=d),l.NextInAEL=null,l.PrevInAEL=null)},e.Clipper=function(l){typeof l>"u"&&(l=0),this.m_PolyOuts=null,this.m_ClipType=e.ClipType.ctIntersection,this.m_Scanbeam=null,this.m_Maxima=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=null,this.m_IntersectNodeComparer=null,this.m_ExecuteLocked=!1,this.m_ClipFillType=e.PolyFillType.pftEvenOdd,this.m_SubjFillType=e.PolyFillType.pftEvenOdd,this.m_Joins=null,this.m_GhostJoins=null,this.m_UsingPolyTree=!1,this.ReverseSolution=!1,this.StrictlySimple=!1,e.ClipperBase.call(this),this.m_Scanbeam=null,this.m_Maxima=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=new Array,this.m_IntersectNodeComparer=e.MyIntersectNodeSort.Compare,this.m_ExecuteLocked=!1,this.m_UsingPolyTree=!1,this.m_PolyOuts=new Array,this.m_Joins=new Array,this.m_GhostJoins=new Array,this.ReverseSolution=(1&l)!==0,this.StrictlySimple=(2&l)!==0,this.PreserveCollinear=(4&l)!==0,e.use_xyz&&(this.ZFillFunction=null)},e.Clipper.ioReverseSolution=1,e.Clipper.ioStrictlySimple=2,e.Clipper.ioPreserveCollinear=4,e.Clipper.prototype.Clear=function(){this.m_edges.length!==0&&(this.DisposeAllPolyPts(),e.ClipperBase.prototype.Clear.call(this))},e.Clipper.prototype.InsertMaxima=function(l){var d=new e.Maxima;if(d.X=l,this.m_Maxima===null)this.m_Maxima=d,this.m_Maxima.Next=null,this.m_Maxima.Prev=null;else if(l<this.m_Maxima.X)d.Next=this.m_Maxima,d.Prev=null,this.m_Maxima=d;else{for(var x=this.m_Maxima;x.Next!==null&&l>=x.Next.X;)x=x.Next;if(l===x.X)return;d.Next=x.Next,d.Prev=x,x.Next!==null&&(x.Next.Prev=d),x.Next=d}},e.Clipper.prototype.Execute=function(){var l=arguments,d=l.length,x=l[1]instanceof e.PolyTree;if(d===4&&!x){var _=l[0],D=l[1],V=l[2],$=l[3];if(this.m_ExecuteLocked)return!1;this.m_HasOpenPaths&&e.Error("Error: PolyTree struct is needed for open path clipping."),this.m_ExecuteLocked=!0,e.Clear(D),this.m_SubjFillType=V,this.m_ClipFillType=$,this.m_ClipType=_,this.m_UsingPolyTree=!1;try{var ee=this.ExecuteInternal();ee&&this.BuildResult(D)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return ee}else if(d===4&&x){var _=l[0],te=l[1],V=l[2],$=l[3];if(this.m_ExecuteLocked)return!1;this.m_ExecuteLocked=!0,this.m_SubjFillType=V,this.m_ClipFillType=$,this.m_ClipType=_,this.m_UsingPolyTree=!0;try{var ee=this.ExecuteInternal();ee&&this.BuildResult2(te)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return ee}else if(d===2&&!x){var _=l[0],D=l[1];return this.Execute(_,D,e.PolyFillType.pftEvenOdd,e.PolyFillType.pftEvenOdd)}else if(d===2&&x){var _=l[0],te=l[1];return this.Execute(_,te,e.PolyFillType.pftEvenOdd,e.PolyFillType.pftEvenOdd)}},e.Clipper.prototype.FixHoleLinkage=function(l){if(!(l.FirstLeft===null||l.IsHole!==l.FirstLeft.IsHole&&l.FirstLeft.Pts!==null)){for(var d=l.FirstLeft;d!==null&&(d.IsHole===l.IsHole||d.Pts===null);)d=d.FirstLeft;l.FirstLeft=d}},e.Clipper.prototype.ExecuteInternal=function(){try{this.Reset(),this.m_SortedEdges=null,this.m_Maxima=null;var l={},d={};if(!this.PopScanbeam(l))return!1;for(this.InsertLocalMinimaIntoAEL(l.v);this.PopScanbeam(d)||this.LocalMinimaPending();){if(this.ProcessHorizontals(),this.m_GhostJoins.length=0,!this.ProcessIntersections(d.v))return!1;this.ProcessEdgesAtTopOfScanbeam(d.v),l.v=d.v,this.InsertLocalMinimaIntoAEL(l.v)}var x,_,D;for(_=0,D=this.m_PolyOuts.length;_<D;_++)x=this.m_PolyOuts[_],!(x.Pts===null||x.IsOpen)&&(x.IsHole^this.ReverseSolution)==this.Area$1(x)>0&&this.ReversePolyPtLinks(x.Pts);for(this.JoinCommonEdges(),_=0,D=this.m_PolyOuts.length;_<D;_++)x=this.m_PolyOuts[_],x.Pts!==null&&(x.IsOpen?this.FixupOutPolyline(x):this.FixupOutPolygon(x));return this.StrictlySimple&&this.DoSimplePolygons(),!0}finally{this.m_Joins.length=0,this.m_GhostJoins.length=0}},e.Clipper.prototype.DisposeAllPolyPts=function(){for(var l=0,d=this.m_PolyOuts.length;l<d;++l)this.DisposeOutRec(l);e.Clear(this.m_PolyOuts)},e.Clipper.prototype.AddJoin=function(l,d,x){var _=new e.Join;_.OutPt1=l,_.OutPt2=d,_.OffPt.X=x.X,_.OffPt.Y=x.Y,e.use_xyz&&(_.OffPt.Z=x.Z),this.m_Joins.push(_)},e.Clipper.prototype.AddGhostJoin=function(l,d){var x=new e.Join;x.OutPt1=l,x.OffPt.X=d.X,x.OffPt.Y=d.Y,e.use_xyz&&(x.OffPt.Z=d.Z),this.m_GhostJoins.push(x)},e.Clipper.prototype.SetZ=function(l,d,x){if(this.ZFillFunction!==null){if(l.Z!==0||this.ZFillFunction===null)return;e.IntPoint.op_Equality(l,d.Bot)?l.Z=d.Bot.Z:e.IntPoint.op_Equality(l,d.Top)?l.Z=d.Top.Z:e.IntPoint.op_Equality(l,x.Bot)?l.Z=x.Bot.Z:e.IntPoint.op_Equality(l,x.Top)?l.Z=x.Top.Z:this.ZFillFunction(d.Bot,d.Top,x.Bot,x.Top,l)}},e.Clipper.prototype.InsertLocalMinimaIntoAEL=function(l){for(var d={},x,_;this.PopLocalMinima(l,d);){x=d.v.LeftBound,_=d.v.RightBound;var D=null;if(x===null?(this.InsertEdgeIntoAEL(_,null),this.SetWindingCount(_),this.IsContributing(_)&&(D=this.AddOutPt(_,_.Bot))):_===null?(this.InsertEdgeIntoAEL(x,null),this.SetWindingCount(x),this.IsContributing(x)&&(D=this.AddOutPt(x,x.Bot)),this.InsertScanbeam(x.Top.Y)):(this.InsertEdgeIntoAEL(x,null),this.InsertEdgeIntoAEL(_,x),this.SetWindingCount(x),_.WindCnt=x.WindCnt,_.WindCnt2=x.WindCnt2,this.IsContributing(x)&&(D=this.AddLocalMinPoly(x,_,x.Bot)),this.InsertScanbeam(x.Top.Y)),_!==null&&(e.ClipperBase.IsHorizontal(_)?(_.NextInLML!==null&&this.InsertScanbeam(_.NextInLML.Top.Y),this.AddEdgeToSEL(_)):this.InsertScanbeam(_.Top.Y)),!(x===null||_===null)){if(D!==null&&e.ClipperBase.IsHorizontal(_)&&this.m_GhostJoins.length>0&&_.WindDelta!==0)for(var V=0,$=this.m_GhostJoins.length;V<$;V++){var ee=this.m_GhostJoins[V];this.HorzSegmentsOverlap(ee.OutPt1.Pt.X,ee.OffPt.X,_.Bot.X,_.Top.X)&&this.AddJoin(ee.OutPt1,D,ee.OffPt)}if(x.OutIdx>=0&&x.PrevInAEL!==null&&x.PrevInAEL.Curr.X===x.Bot.X&&x.PrevInAEL.OutIdx>=0&&e.ClipperBase.SlopesEqual5(x.PrevInAEL.Curr,x.PrevInAEL.Top,x.Curr,x.Top,this.m_UseFullRange)&&x.WindDelta!==0&&x.PrevInAEL.WindDelta!==0){var te=this.AddOutPt(x.PrevInAEL,x.Bot);this.AddJoin(D,te,x.Top)}if(x.NextInAEL!==_){if(_.OutIdx>=0&&_.PrevInAEL.OutIdx>=0&&e.ClipperBase.SlopesEqual5(_.PrevInAEL.Curr,_.PrevInAEL.Top,_.Curr,_.Top,this.m_UseFullRange)&&_.WindDelta!==0&&_.PrevInAEL.WindDelta!==0){var te=this.AddOutPt(_.PrevInAEL,_.Bot);this.AddJoin(D,te,_.Top)}var Ce=x.NextInAEL;if(Ce!==null)for(;Ce!==_;)this.IntersectEdges(_,Ce,x.Curr),Ce=Ce.NextInAEL}}}},e.Clipper.prototype.InsertEdgeIntoAEL=function(l,d){if(this.m_ActiveEdges===null)l.PrevInAEL=null,l.NextInAEL=null,this.m_ActiveEdges=l;else if(d===null&&this.E2InsertsBeforeE1(this.m_ActiveEdges,l))l.PrevInAEL=null,l.NextInAEL=this.m_ActiveEdges,this.m_ActiveEdges.PrevInAEL=l,this.m_ActiveEdges=l;else{for(d===null&&(d=this.m_ActiveEdges);d.NextInAEL!==null&&!this.E2InsertsBeforeE1(d.NextInAEL,l);)d=d.NextInAEL;l.NextInAEL=d.NextInAEL,d.NextInAEL!==null&&(d.NextInAEL.PrevInAEL=l),l.PrevInAEL=d,d.NextInAEL=l}},e.Clipper.prototype.E2InsertsBeforeE1=function(l,d){return d.Curr.X===l.Curr.X?d.Top.Y>l.Top.Y?d.Top.X<e.Clipper.TopX(l,d.Top.Y):l.Top.X>e.Clipper.TopX(d,l.Top.Y):d.Curr.X<l.Curr.X},e.Clipper.prototype.IsEvenOddFillType=function(l){return l.PolyTyp===e.PolyType.ptSubject?this.m_SubjFillType===e.PolyFillType.pftEvenOdd:this.m_ClipFillType===e.PolyFillType.pftEvenOdd},e.Clipper.prototype.IsEvenOddAltFillType=function(l){return l.PolyTyp===e.PolyType.ptSubject?this.m_ClipFillType===e.PolyFillType.pftEvenOdd:this.m_SubjFillType===e.PolyFillType.pftEvenOdd},e.Clipper.prototype.IsContributing=function(l){var d,x;switch(l.PolyTyp===e.PolyType.ptSubject?(d=this.m_SubjFillType,x=this.m_ClipFillType):(d=this.m_ClipFillType,x=this.m_SubjFillType),d){case e.PolyFillType.pftEvenOdd:if(l.WindDelta===0&&l.WindCnt!==1)return!1;break;case e.PolyFillType.pftNonZero:if(Math.abs(l.WindCnt)!==1)return!1;break;case e.PolyFillType.pftPositive:if(l.WindCnt!==1)return!1;break;default:if(l.WindCnt!==-1)return!1;break}switch(this.m_ClipType){case e.ClipType.ctIntersection:switch(x){case e.PolyFillType.pftEvenOdd:case e.PolyFillType.pftNonZero:return l.WindCnt2!==0;case e.PolyFillType.pftPositive:return l.WindCnt2>0;default:return l.WindCnt2<0}case e.ClipType.ctUnion:switch(x){case e.PolyFillType.pftEvenOdd:case e.PolyFillType.pftNonZero:return l.WindCnt2===0;case e.PolyFillType.pftPositive:return l.WindCnt2<=0;default:return l.WindCnt2>=0}case e.ClipType.ctDifference:if(l.PolyTyp===e.PolyType.ptSubject)switch(x){case e.PolyFillType.pftEvenOdd:case e.PolyFillType.pftNonZero:return l.WindCnt2===0;case e.PolyFillType.pftPositive:return l.WindCnt2<=0;default:return l.WindCnt2>=0}else switch(x){case e.PolyFillType.pftEvenOdd:case e.PolyFillType.pftNonZero:return l.WindCnt2!==0;case e.PolyFillType.pftPositive:return l.WindCnt2>0;default:return l.WindCnt2<0}case e.ClipType.ctXor:if(l.WindDelta===0)switch(x){case e.PolyFillType.pftEvenOdd:case e.PolyFillType.pftNonZero:return l.WindCnt2===0;case e.PolyFillType.pftPositive:return l.WindCnt2<=0;default:return l.WindCnt2>=0}else return!0}return!0},e.Clipper.prototype.SetWindingCount=function(l){for(var d=l.PrevInAEL;d!==null&&(d.PolyTyp!==l.PolyTyp||d.WindDelta===0);)d=d.PrevInAEL;if(d===null){var x=l.PolyTyp===e.PolyType.ptSubject?this.m_SubjFillType:this.m_ClipFillType;l.WindDelta===0?l.WindCnt=x===e.PolyFillType.pftNegative?-1:1:l.WindCnt=l.WindDelta,l.WindCnt2=0,d=this.m_ActiveEdges}else if(l.WindDelta===0&&this.m_ClipType!==e.ClipType.ctUnion)l.WindCnt=1,l.WindCnt2=d.WindCnt2,d=d.NextInAEL;else if(this.IsEvenOddFillType(l)){if(l.WindDelta===0){for(var _=!0,D=d.PrevInAEL;D!==null;)D.PolyTyp===d.PolyTyp&&D.WindDelta!==0&&(_=!_),D=D.PrevInAEL;l.WindCnt=_?0:1}else l.WindCnt=l.WindDelta;l.WindCnt2=d.WindCnt2,d=d.NextInAEL}else d.WindCnt*d.WindDelta<0?Math.abs(d.WindCnt)>1?d.WindDelta*l.WindDelta<0?l.WindCnt=d.WindCnt:l.WindCnt=d.WindCnt+l.WindDelta:l.WindCnt=l.WindDelta===0?1:l.WindDelta:l.WindDelta===0?l.WindCnt=d.WindCnt<0?d.WindCnt-1:d.WindCnt+1:d.WindDelta*l.WindDelta<0?l.WindCnt=d.WindCnt:l.WindCnt=d.WindCnt+l.WindDelta,l.WindCnt2=d.WindCnt2,d=d.NextInAEL;if(this.IsEvenOddAltFillType(l))for(;d!==l;)d.WindDelta!==0&&(l.WindCnt2=l.WindCnt2===0?1:0),d=d.NextInAEL;else for(;d!==l;)l.WindCnt2+=d.WindDelta,d=d.NextInAEL},e.Clipper.prototype.AddEdgeToSEL=function(l){this.m_SortedEdges===null?(this.m_SortedEdges=l,l.PrevInSEL=null,l.NextInSEL=null):(l.NextInSEL=this.m_SortedEdges,l.PrevInSEL=null,this.m_SortedEdges.PrevInSEL=l,this.m_SortedEdges=l)},e.Clipper.prototype.PopEdgeFromSEL=function(l){if(l.v=this.m_SortedEdges,l.v===null)return!1;var d=l.v;return this.m_SortedEdges=l.v.NextInSEL,this.m_SortedEdges!==null&&(this.m_SortedEdges.PrevInSEL=null),d.NextInSEL=null,d.PrevInSEL=null,!0},e.Clipper.prototype.CopyAELToSEL=function(){var l=this.m_ActiveEdges;for(this.m_SortedEdges=l;l!==null;)l.PrevInSEL=l.PrevInAEL,l.NextInSEL=l.NextInAEL,l=l.NextInAEL},e.Clipper.prototype.SwapPositionsInSEL=function(l,d){if(!(l.NextInSEL===null&&l.PrevInSEL===null)&&!(d.NextInSEL===null&&d.PrevInSEL===null)){if(l.NextInSEL===d){var x=d.NextInSEL;x!==null&&(x.PrevInSEL=l);var _=l.PrevInSEL;_!==null&&(_.NextInSEL=d),d.PrevInSEL=_,d.NextInSEL=l,l.PrevInSEL=d,l.NextInSEL=x}else if(d.NextInSEL===l){var x=l.NextInSEL;x!==null&&(x.PrevInSEL=d);var _=d.PrevInSEL;_!==null&&(_.NextInSEL=l),l.PrevInSEL=_,l.NextInSEL=d,d.PrevInSEL=l,d.NextInSEL=x}else{var x=l.NextInSEL,_=l.PrevInSEL;l.NextInSEL=d.NextInSEL,l.NextInSEL!==null&&(l.NextInSEL.PrevInSEL=l),l.PrevInSEL=d.PrevInSEL,l.PrevInSEL!==null&&(l.PrevInSEL.NextInSEL=l),d.NextInSEL=x,d.NextInSEL!==null&&(d.NextInSEL.PrevInSEL=d),d.PrevInSEL=_,d.PrevInSEL!==null&&(d.PrevInSEL.NextInSEL=d)}l.PrevInSEL===null?this.m_SortedEdges=l:d.PrevInSEL===null&&(this.m_SortedEdges=d)}},e.Clipper.prototype.AddLocalMaxPoly=function(l,d,x){this.AddOutPt(l,x),d.WindDelta===0&&this.AddOutPt(d,x),l.OutIdx===d.OutIdx?(l.OutIdx=-1,d.OutIdx=-1):l.OutIdx<d.OutIdx?this.AppendPolygon(l,d):this.AppendPolygon(d,l)},e.Clipper.prototype.AddLocalMinPoly=function(l,d,x){var _,D,V;if(e.ClipperBase.IsHorizontal(d)||l.Dx>d.Dx?(_=this.AddOutPt(l,x),d.OutIdx=l.OutIdx,l.Side=e.EdgeSide.esLeft,d.Side=e.EdgeSide.esRight,D=l,D.PrevInAEL===d?V=d.PrevInAEL:V=D.PrevInAEL):(_=this.AddOutPt(d,x),l.OutIdx=d.OutIdx,l.Side=e.EdgeSide.esRight,d.Side=e.EdgeSide.esLeft,D=d,D.PrevInAEL===l?V=l.PrevInAEL:V=D.PrevInAEL),V!==null&&V.OutIdx>=0&&V.Top.Y<x.Y&&D.Top.Y<x.Y){var $=e.Clipper.TopX(V,x.Y),ee=e.Clipper.TopX(D,x.Y);if($===ee&&D.WindDelta!==0&&V.WindDelta!==0&&e.ClipperBase.SlopesEqual5(new e.IntPoint2($,x.Y),V.Top,new e.IntPoint2(ee,x.Y),D.Top,this.m_UseFullRange)){var te=this.AddOutPt(V,x);this.AddJoin(_,te,D.Top)}}return _},e.Clipper.prototype.AddOutPt=function(l,d){if(l.OutIdx<0){var x=this.CreateOutRec();x.IsOpen=l.WindDelta===0;var _=new e.OutPt;return x.Pts=_,_.Idx=x.Idx,_.Pt.X=d.X,_.Pt.Y=d.Y,e.use_xyz&&(_.Pt.Z=d.Z),_.Next=_,_.Prev=_,x.IsOpen||this.SetHoleState(l,x),l.OutIdx=x.Idx,_}else{var x=this.m_PolyOuts[l.OutIdx],D=x.Pts,V=l.Side===e.EdgeSide.esLeft;if(V&&e.IntPoint.op_Equality(d,D.Pt))return D;if(!V&&e.IntPoint.op_Equality(d,D.Prev.Pt))return D.Prev;var _=new e.OutPt;return _.Idx=x.Idx,_.Pt.X=d.X,_.Pt.Y=d.Y,e.use_xyz&&(_.Pt.Z=d.Z),_.Next=D,_.Prev=D.Prev,_.Prev.Next=_,D.Prev=_,V&&(x.Pts=_),_}},e.Clipper.prototype.GetLastOutPt=function(l){var d=this.m_PolyOuts[l.OutIdx];return l.Side===e.EdgeSide.esLeft?d.Pts:d.Pts.Prev},e.Clipper.prototype.SwapPoints=function(l,d){var x=new e.IntPoint1(l.Value);l.Value.X=d.Value.X,l.Value.Y=d.Value.Y,e.use_xyz&&(l.Value.Z=d.Value.Z),d.Value.X=x.X,d.Value.Y=x.Y,e.use_xyz&&(d.Value.Z=x.Z)},e.Clipper.prototype.HorzSegmentsOverlap=function(l,d,x,_){var D;return l>d&&(D=l,l=d,d=D),x>_&&(D=x,x=_,_=D),l<_&&x<d},e.Clipper.prototype.SetHoleState=function(l,d){for(var x=l.PrevInAEL,_=null;x!==null;)x.OutIdx>=0&&x.WindDelta!==0&&(_===null?_=x:_.OutIdx===x.OutIdx&&(_=null)),x=x.PrevInAEL;_===null?(d.FirstLeft=null,d.IsHole=!1):(d.FirstLeft=this.m_PolyOuts[_.OutIdx],d.IsHole=!d.FirstLeft.IsHole)},e.Clipper.prototype.GetDx=function(l,d){return l.Y===d.Y?e.ClipperBase.horizontal:(d.X-l.X)/(d.Y-l.Y)},e.Clipper.prototype.FirstIsBottomPt=function(l,d){for(var x=l.Prev;e.IntPoint.op_Equality(x.Pt,l.Pt)&&x!==l;)x=x.Prev;var _=Math.abs(this.GetDx(l.Pt,x.Pt));for(x=l.Next;e.IntPoint.op_Equality(x.Pt,l.Pt)&&x!==l;)x=x.Next;var D=Math.abs(this.GetDx(l.Pt,x.Pt));for(x=d.Prev;e.IntPoint.op_Equality(x.Pt,d.Pt)&&x!==d;)x=x.Prev;var V=Math.abs(this.GetDx(d.Pt,x.Pt));for(x=d.Next;e.IntPoint.op_Equality(x.Pt,d.Pt)&&x!==d;)x=x.Next;var $=Math.abs(this.GetDx(d.Pt,x.Pt));return Math.max(_,D)===Math.max(V,$)&&Math.min(_,D)===Math.min(V,$)?this.Area(l)>0:_>=V&&_>=$||D>=V&&D>=$},e.Clipper.prototype.GetBottomPt=function(l){for(var d=null,x=l.Next;x!==l;)x.Pt.Y>l.Pt.Y?(l=x,d=null):x.Pt.Y===l.Pt.Y&&x.Pt.X<=l.Pt.X&&(x.Pt.X<l.Pt.X?(d=null,l=x):x.Next!==l&&x.Prev!==l&&(d=x)),x=x.Next;if(d!==null)for(;d!==x;)for(this.FirstIsBottomPt(x,d)||(l=d),d=d.Next;e.IntPoint.op_Inequality(d.Pt,l.Pt);)d=d.Next;return l},e.Clipper.prototype.GetLowermostRec=function(l,d){l.BottomPt===null&&(l.BottomPt=this.GetBottomPt(l.Pts)),d.BottomPt===null&&(d.BottomPt=this.GetBottomPt(d.Pts));var x=l.BottomPt,_=d.BottomPt;return x.Pt.Y>_.Pt.Y?l:x.Pt.Y<_.Pt.Y?d:x.Pt.X<_.Pt.X?l:x.Pt.X>_.Pt.X||x.Next===x?d:_.Next===_||this.FirstIsBottomPt(x,_)?l:d},e.Clipper.prototype.OutRec1RightOfOutRec2=function(l,d){do if(l=l.FirstLeft,l===d)return!0;while(l!==null);return!1},e.Clipper.prototype.GetOutRec=function(l){for(var d=this.m_PolyOuts[l];d!==this.m_PolyOuts[d.Idx];)d=this.m_PolyOuts[d.Idx];return d},e.Clipper.prototype.AppendPolygon=function(l,d){var x=this.m_PolyOuts[l.OutIdx],_=this.m_PolyOuts[d.OutIdx],D;this.OutRec1RightOfOutRec2(x,_)?D=_:this.OutRec1RightOfOutRec2(_,x)?D=x:D=this.GetLowermostRec(x,_);var V=x.Pts,$=V.Prev,ee=_.Pts,te=ee.Prev;l.Side===e.EdgeSide.esLeft?d.Side===e.EdgeSide.esLeft?(this.ReversePolyPtLinks(ee),ee.Next=V,V.Prev=ee,$.Next=te,te.Prev=$,x.Pts=te):(te.Next=V,V.Prev=te,ee.Prev=$,$.Next=ee,x.Pts=ee):d.Side===e.EdgeSide.esRight?(this.ReversePolyPtLinks(ee),$.Next=te,te.Prev=$,ee.Next=V,V.Prev=ee):($.Next=ee,ee.Prev=$,V.Prev=te,te.Next=V),x.BottomPt=null,D===_&&(_.FirstLeft!==x&&(x.FirstLeft=_.FirstLeft),x.IsHole=_.IsHole),_.Pts=null,_.BottomPt=null,_.FirstLeft=x;var Ce=l.OutIdx,Xe=d.OutIdx;l.OutIdx=-1,d.OutIdx=-1;for(var Ue=this.m_ActiveEdges;Ue!==null;){if(Ue.OutIdx===Xe){Ue.OutIdx=Ce,Ue.Side=l.Side;break}Ue=Ue.NextInAEL}_.Idx=x.Idx},e.Clipper.prototype.ReversePolyPtLinks=function(l){if(l!==null){var d,x;d=l;do x=d.Next,d.Next=d.Prev,d.Prev=x,d=x;while(d!==l)}},e.Clipper.SwapSides=function(l,d){var x=l.Side;l.Side=d.Side,d.Side=x},e.Clipper.SwapPolyIndexes=function(l,d){var x=l.OutIdx;l.OutIdx=d.OutIdx,d.OutIdx=x},e.Clipper.prototype.IntersectEdges=function(l,d,x){var _=l.OutIdx>=0,D=d.OutIdx>=0;if(e.use_xyz&&this.SetZ(x,l,d),e.use_lines&&(l.WindDelta===0||d.WindDelta===0)){if(l.WindDelta===0&&d.WindDelta===0)return;l.PolyTyp===d.PolyTyp&&l.WindDelta!==d.WindDelta&&this.m_ClipType===e.ClipType.ctUnion?l.WindDelta===0?D&&(this.AddOutPt(l,x),_&&(l.OutIdx=-1)):_&&(this.AddOutPt(d,x),D&&(d.OutIdx=-1)):l.PolyTyp!==d.PolyTyp&&(l.WindDelta===0&&Math.abs(d.WindCnt)===1&&(this.m_ClipType!==e.ClipType.ctUnion||d.WindCnt2===0)?(this.AddOutPt(l,x),_&&(l.OutIdx=-1)):d.WindDelta===0&&Math.abs(l.WindCnt)===1&&(this.m_ClipType!==e.ClipType.ctUnion||l.WindCnt2===0)&&(this.AddOutPt(d,x),D&&(d.OutIdx=-1)));return}if(l.PolyTyp===d.PolyTyp)if(this.IsEvenOddFillType(l)){var V=l.WindCnt;l.WindCnt=d.WindCnt,d.WindCnt=V}else l.WindCnt+d.WindDelta===0?l.WindCnt=-l.WindCnt:l.WindCnt+=d.WindDelta,d.WindCnt-l.WindDelta===0?d.WindCnt=-d.WindCnt:d.WindCnt-=l.WindDelta;else this.IsEvenOddFillType(d)?l.WindCnt2=l.WindCnt2===0?1:0:l.WindCnt2+=d.WindDelta,this.IsEvenOddFillType(l)?d.WindCnt2=d.WindCnt2===0?1:0:d.WindCnt2-=l.WindDelta;var $,ee,te,Ce;l.PolyTyp===e.PolyType.ptSubject?($=this.m_SubjFillType,te=this.m_ClipFillType):($=this.m_ClipFillType,te=this.m_SubjFillType),d.PolyTyp===e.PolyType.ptSubject?(ee=this.m_SubjFillType,Ce=this.m_ClipFillType):(ee=this.m_ClipFillType,Ce=this.m_SubjFillType);var Xe,Ue;switch($){case e.PolyFillType.pftPositive:Xe=l.WindCnt;break;case e.PolyFillType.pftNegative:Xe=-l.WindCnt;break;default:Xe=Math.abs(l.WindCnt);break}switch(ee){case e.PolyFillType.pftPositive:Ue=d.WindCnt;break;case e.PolyFillType.pftNegative:Ue=-d.WindCnt;break;default:Ue=Math.abs(d.WindCnt);break}if(_&&D)Xe!==0&&Xe!==1||Ue!==0&&Ue!==1||l.PolyTyp!==d.PolyTyp&&this.m_ClipType!==e.ClipType.ctXor?this.AddLocalMaxPoly(l,d,x):(this.AddOutPt(l,x),this.AddOutPt(d,x),e.Clipper.SwapSides(l,d),e.Clipper.SwapPolyIndexes(l,d));else if(_)(Ue===0||Ue===1)&&(this.AddOutPt(l,x),e.Clipper.SwapSides(l,d),e.Clipper.SwapPolyIndexes(l,d));else if(D)(Xe===0||Xe===1)&&(this.AddOutPt(d,x),e.Clipper.SwapSides(l,d),e.Clipper.SwapPolyIndexes(l,d));else if((Xe===0||Xe===1)&&(Ue===0||Ue===1)){var Qe,xt;switch(te){case e.PolyFillType.pftPositive:Qe=l.WindCnt2;break;case e.PolyFillType.pftNegative:Qe=-l.WindCnt2;break;default:Qe=Math.abs(l.WindCnt2);break}switch(Ce){case e.PolyFillType.pftPositive:xt=d.WindCnt2;break;case e.PolyFillType.pftNegative:xt=-d.WindCnt2;break;default:xt=Math.abs(d.WindCnt2);break}if(l.PolyTyp!==d.PolyTyp)this.AddLocalMinPoly(l,d,x);else if(Xe===1&&Ue===1)switch(this.m_ClipType){case e.ClipType.ctIntersection:Qe>0&&xt>0&&this.AddLocalMinPoly(l,d,x);break;case e.ClipType.ctUnion:Qe<=0&&xt<=0&&this.AddLocalMinPoly(l,d,x);break;case e.ClipType.ctDifference:(l.PolyTyp===e.PolyType.ptClip&&Qe>0&&xt>0||l.PolyTyp===e.PolyType.ptSubject&&Qe<=0&&xt<=0)&&this.AddLocalMinPoly(l,d,x);break;case e.ClipType.ctXor:this.AddLocalMinPoly(l,d,x);break}else e.Clipper.SwapSides(l,d)}},e.Clipper.prototype.DeleteFromSEL=function(l){var d=l.PrevInSEL,x=l.NextInSEL;d===null&&x===null&&l!==this.m_SortedEdges||(d!==null?d.NextInSEL=x:this.m_SortedEdges=x,x!==null&&(x.PrevInSEL=d),l.NextInSEL=null,l.PrevInSEL=null)},e.Clipper.prototype.ProcessHorizontals=function(){for(var l={};this.PopEdgeFromSEL(l);)this.ProcessHorizontal(l.v)},e.Clipper.prototype.GetHorzDirection=function(l,d){l.Bot.X<l.Top.X?(d.Left=l.Bot.X,d.Right=l.Top.X,d.Dir=e.Direction.dLeftToRight):(d.Left=l.Top.X,d.Right=l.Bot.X,d.Dir=e.Direction.dRightToLeft)},e.Clipper.prototype.ProcessHorizontal=function(l){var d={Dir:null,Left:null,Right:null};this.GetHorzDirection(l,d);for(var x=d.Dir,_=d.Left,D=d.Right,V=l.WindDelta===0,$=l,ee=null;$.NextInLML!==null&&e.ClipperBase.IsHorizontal($.NextInLML);)$=$.NextInLML;$.NextInLML===null&&(ee=this.GetMaximaPair($));var te=this.m_Maxima;if(te!==null)if(x===e.Direction.dLeftToRight){for(;te!==null&&te.X<=l.Bot.X;)te=te.Next;te!==null&&te.X>=$.Top.X&&(te=null)}else{for(;te.Next!==null&&te.Next.X<l.Bot.X;)te=te.Next;te.X<=$.Top.X&&(te=null)}for(var Ce=null;;){for(var Xe=l===$,Ue=this.GetNextInAEL(l,x);Ue!==null;){if(te!==null)if(x===e.Direction.dLeftToRight)for(;te!==null&&te.X<Ue.Curr.X;)l.OutIdx>=0&&!V&&this.AddOutPt(l,new e.IntPoint2(te.X,l.Bot.Y)),te=te.Next;else for(;te!==null&&te.X>Ue.Curr.X;)l.OutIdx>=0&&!V&&this.AddOutPt(l,new e.IntPoint2(te.X,l.Bot.Y)),te=te.Prev;if(x===e.Direction.dLeftToRight&&Ue.Curr.X>D||x===e.Direction.dRightToLeft&&Ue.Curr.X<_||Ue.Curr.X===l.Top.X&&l.NextInLML!==null&&Ue.Dx<l.NextInLML.Dx)break;if(l.OutIdx>=0&&!V){e.use_xyz&&(x===e.Direction.dLeftToRight?this.SetZ(Ue.Curr,l,Ue):this.SetZ(Ue.Curr,Ue,l)),Ce=this.AddOutPt(l,Ue.Curr);for(var Qe=this.m_SortedEdges;Qe!==null;){if(Qe.OutIdx>=0&&this.HorzSegmentsOverlap(l.Bot.X,l.Top.X,Qe.Bot.X,Qe.Top.X)){var xt=this.GetLastOutPt(Qe);this.AddJoin(xt,Ce,Qe.Top)}Qe=Qe.NextInSEL}this.AddGhostJoin(Ce,l.Bot)}if(Ue===ee&&Xe){l.OutIdx>=0&&this.AddLocalMaxPoly(l,ee,l.Top),this.DeleteFromAEL(l),this.DeleteFromAEL(ee);return}if(x===e.Direction.dLeftToRight){var Pt=new e.IntPoint2(Ue.Curr.X,l.Curr.Y);this.IntersectEdges(l,Ue,Pt)}else{var Pt=new e.IntPoint2(Ue.Curr.X,l.Curr.Y);this.IntersectEdges(Ue,l,Pt)}var Tt=this.GetNextInAEL(Ue,x);this.SwapPositionsInAEL(l,Ue),Ue=Tt}if(l.NextInLML===null||!e.ClipperBase.IsHorizontal(l.NextInLML))break;l=this.UpdateEdgeIntoAEL(l),l.OutIdx>=0&&this.AddOutPt(l,l.Bot),d={Dir:x,Left:_,Right:D},this.GetHorzDirection(l,d),x=d.Dir,_=d.Left,D=d.Right}if(l.OutIdx>=0&&Ce===null){Ce=this.GetLastOutPt(l);for(var Qe=this.m_SortedEdges;Qe!==null;){if(Qe.OutIdx>=0&&this.HorzSegmentsOverlap(l.Bot.X,l.Top.X,Qe.Bot.X,Qe.Top.X)){var xt=this.GetLastOutPt(Qe);this.AddJoin(xt,Ce,Qe.Top)}Qe=Qe.NextInSEL}this.AddGhostJoin(Ce,l.Top)}if(l.NextInLML!==null)if(l.OutIdx>=0){if(Ce=this.AddOutPt(l,l.Top),l=this.UpdateEdgeIntoAEL(l),l.WindDelta===0)return;var Ht=l.PrevInAEL,Tt=l.NextInAEL;if(Ht!==null&&Ht.Curr.X===l.Bot.X&&Ht.Curr.Y===l.Bot.Y&&Ht.WindDelta===0&&Ht.OutIdx>=0&&Ht.Curr.Y>Ht.Top.Y&&e.ClipperBase.SlopesEqual3(l,Ht,this.m_UseFullRange)){var xt=this.AddOutPt(Ht,l.Bot);this.AddJoin(Ce,xt,l.Top)}else if(Tt!==null&&Tt.Curr.X===l.Bot.X&&Tt.Curr.Y===l.Bot.Y&&Tt.WindDelta!==0&&Tt.OutIdx>=0&&Tt.Curr.Y>Tt.Top.Y&&e.ClipperBase.SlopesEqual3(l,Tt,this.m_UseFullRange)){var xt=this.AddOutPt(Tt,l.Bot);this.AddJoin(Ce,xt,l.Top)}}else l=this.UpdateEdgeIntoAEL(l);else l.OutIdx>=0&&this.AddOutPt(l,l.Top),this.DeleteFromAEL(l)},e.Clipper.prototype.GetNextInAEL=function(l,d){return d===e.Direction.dLeftToRight?l.NextInAEL:l.PrevInAEL},e.Clipper.prototype.IsMinima=function(l){return l!==null&&l.Prev.NextInLML!==l&&l.Next.NextInLML!==l},e.Clipper.prototype.IsMaxima=function(l,d){return l!==null&&l.Top.Y===d&&l.NextInLML===null},e.Clipper.prototype.IsIntermediate=function(l,d){return l.Top.Y===d&&l.NextInLML!==null},e.Clipper.prototype.GetMaximaPair=function(l){return e.IntPoint.op_Equality(l.Next.Top,l.Top)&&l.Next.NextInLML===null?l.Next:e.IntPoint.op_Equality(l.Prev.Top,l.Top)&&l.Prev.NextInLML===null?l.Prev:null},e.Clipper.prototype.GetMaximaPairEx=function(l){var d=this.GetMaximaPair(l);return d===null||d.OutIdx===e.ClipperBase.Skip||d.NextInAEL===d.PrevInAEL&&!e.ClipperBase.IsHorizontal(d)?null:d},e.Clipper.prototype.ProcessIntersections=function(l){if(this.m_ActiveEdges===null)return!0;try{if(this.BuildIntersectList(l),this.m_IntersectList.length===0)return!0;if(this.m_IntersectList.length===1||this.FixupIntersectionOrder())this.ProcessIntersectList();else return!1}catch{this.m_SortedEdges=null,this.m_IntersectList.length=0,e.Error("ProcessIntersections error")}return this.m_SortedEdges=null,!0},e.Clipper.prototype.BuildIntersectList=function(l){if(this.m_ActiveEdges!==null){var d=this.m_ActiveEdges;for(this.m_SortedEdges=d;d!==null;)d.PrevInSEL=d.PrevInAEL,d.NextInSEL=d.NextInAEL,d.Curr.X=e.Clipper.TopX(d,l),d=d.NextInAEL;for(var x=!0;x&&this.m_SortedEdges!==null;){for(x=!1,d=this.m_SortedEdges;d.NextInSEL!==null;){var _=d.NextInSEL,D=new e.IntPoint0;if(d.Curr.X>_.Curr.X){this.IntersectPoint(d,_,D),D.Y<l&&(D=new e.IntPoint2(e.Clipper.TopX(d,l),l));var V=new e.IntersectNode;V.Edge1=d,V.Edge2=_,V.Pt.X=D.X,V.Pt.Y=D.Y,e.use_xyz&&(V.Pt.Z=D.Z),this.m_IntersectList.push(V),this.SwapPositionsInSEL(d,_),x=!0}else d=_}if(d.PrevInSEL!==null)d.PrevInSEL.NextInSEL=null;else break}this.m_SortedEdges=null}},e.Clipper.prototype.EdgesAdjacent=function(l){return l.Edge1.NextInSEL===l.Edge2||l.Edge1.PrevInSEL===l.Edge2},e.Clipper.IntersectNodeSort=function(l,d){return d.Pt.Y-l.Pt.Y},e.Clipper.prototype.FixupIntersectionOrder=function(){this.m_IntersectList.sort(this.m_IntersectNodeComparer),this.CopyAELToSEL();for(var l=this.m_IntersectList.length,d=0;d<l;d++){if(!this.EdgesAdjacent(this.m_IntersectList[d])){for(var x=d+1;x<l&&!this.EdgesAdjacent(this.m_IntersectList[x]);)x++;if(x===l)return!1;var _=this.m_IntersectList[d];this.m_IntersectList[d]=this.m_IntersectList[x],this.m_IntersectList[x]=_}this.SwapPositionsInSEL(this.m_IntersectList[d].Edge1,this.m_IntersectList[d].Edge2)}return!0},e.Clipper.prototype.ProcessIntersectList=function(){for(var l=0,d=this.m_IntersectList.length;l<d;l++){var x=this.m_IntersectList[l];this.IntersectEdges(x.Edge1,x.Edge2,x.Pt),this.SwapPositionsInAEL(x.Edge1,x.Edge2)}this.m_IntersectList.length=0};var Bc=function(l){return l<0?Math.ceil(l-.5):Math.round(l)},Ef=function(l){return l<0?Math.ceil(l-.5):Math.floor(l+.5)},Af=function(l){return l<0?-Math.round(Math.abs(l)):Math.round(l)},Tf=function(l){return l<0?(l-=.5,l<-2147483648?Math.ceil(l):l|0):(l+=.5,l>2147483647?Math.floor(l):l|0)};s.msie?e.Clipper.Round=Bc:s.chromium?e.Clipper.Round=Af:s.safari?e.Clipper.Round=Tf:e.Clipper.Round=Ef,e.Clipper.TopX=function(l,d){return d===l.Top.Y?l.Top.X:l.Bot.X+e.Clipper.Round(l.Dx*(d-l.Bot.Y))},e.Clipper.prototype.IntersectPoint=function(l,d,x){x.X=0,x.Y=0;var _,D;if(l.Dx===d.Dx){x.Y=l.Curr.Y,x.X=e.Clipper.TopX(l,x.Y);return}if(l.Delta.X===0)x.X=l.Bot.X,e.ClipperBase.IsHorizontal(d)?x.Y=d.Bot.Y:(D=d.Bot.Y-d.Bot.X/d.Dx,x.Y=e.Clipper.Round(x.X/d.Dx+D));else if(d.Delta.X===0)x.X=d.Bot.X,e.ClipperBase.IsHorizontal(l)?x.Y=l.Bot.Y:(_=l.Bot.Y-l.Bot.X/l.Dx,x.Y=e.Clipper.Round(x.X/l.Dx+_));else{_=l.Bot.X-l.Bot.Y*l.Dx,D=d.Bot.X-d.Bot.Y*d.Dx;var V=(D-_)/(l.Dx-d.Dx);x.Y=e.Clipper.Round(V),Math.abs(l.Dx)<Math.abs(d.Dx)?x.X=e.Clipper.Round(l.Dx*V+_):x.X=e.Clipper.Round(d.Dx*V+D)}if(x.Y<l.Top.Y||x.Y<d.Top.Y){if(l.Top.Y>d.Top.Y)return x.Y=l.Top.Y,x.X=e.Clipper.TopX(d,l.Top.Y),x.X<l.Top.X;x.Y=d.Top.Y,Math.abs(l.Dx)<Math.abs(d.Dx)?x.X=e.Clipper.TopX(l,x.Y):x.X=e.Clipper.TopX(d,x.Y)}x.Y>l.Curr.Y&&(x.Y=l.Curr.Y,Math.abs(l.Dx)>Math.abs(d.Dx)?x.X=e.Clipper.TopX(d,x.Y):x.X=e.Clipper.TopX(l,x.Y))},e.Clipper.prototype.ProcessEdgesAtTopOfScanbeam=function(l){for(var d=this.m_ActiveEdges;d!==null;){var x=this.IsMaxima(d,l);if(x){var _=this.GetMaximaPairEx(d);x=_===null||!e.ClipperBase.IsHorizontal(_)}if(x){this.StrictlySimple&&this.InsertMaxima(d.Top.X);var D=d.PrevInAEL;this.DoMaxima(d),D===null?d=this.m_ActiveEdges:d=D.NextInAEL}else{if(this.IsIntermediate(d,l)&&e.ClipperBase.IsHorizontal(d.NextInLML)?(d=this.UpdateEdgeIntoAEL(d),d.OutIdx>=0&&this.AddOutPt(d,d.Bot),this.AddEdgeToSEL(d)):(d.Curr.X=e.Clipper.TopX(d,l),d.Curr.Y=l),e.use_xyz&&(d.Top.Y===l?d.Curr.Z=d.Top.Z:d.Bot.Y===l?d.Curr.Z=d.Bot.Z:d.Curr.Z=0),this.StrictlySimple){var D=d.PrevInAEL;if(d.OutIdx>=0&&d.WindDelta!==0&&D!==null&&D.OutIdx>=0&&D.Curr.X===d.Curr.X&&D.WindDelta!==0){var V=new e.IntPoint1(d.Curr);e.use_xyz&&this.SetZ(V,D,d);var $=this.AddOutPt(D,V),ee=this.AddOutPt(d,V);this.AddJoin($,ee,V)}}d=d.NextInAEL}}for(this.ProcessHorizontals(),this.m_Maxima=null,d=this.m_ActiveEdges;d!==null;){if(this.IsIntermediate(d,l)){var $=null;d.OutIdx>=0&&($=this.AddOutPt(d,d.Top)),d=this.UpdateEdgeIntoAEL(d);var D=d.PrevInAEL,te=d.NextInAEL;if(D!==null&&D.Curr.X===d.Bot.X&&D.Curr.Y===d.Bot.Y&&$!==null&&D.OutIdx>=0&&D.Curr.Y===D.Top.Y&&e.ClipperBase.SlopesEqual5(d.Curr,d.Top,D.Curr,D.Top,this.m_UseFullRange)&&d.WindDelta!==0&&D.WindDelta!==0){var ee=this.AddOutPt(ePrev2,d.Bot);this.AddJoin($,ee,d.Top)}else if(te!==null&&te.Curr.X===d.Bot.X&&te.Curr.Y===d.Bot.Y&&$!==null&&te.OutIdx>=0&&te.Curr.Y===te.Top.Y&&e.ClipperBase.SlopesEqual5(d.Curr,d.Top,te.Curr,te.Top,this.m_UseFullRange)&&d.WindDelta!==0&&te.WindDelta!==0){var ee=this.AddOutPt(te,d.Bot);this.AddJoin($,ee,d.Top)}}d=d.NextInAEL}},e.Clipper.prototype.DoMaxima=function(l){var d=this.GetMaximaPairEx(l);if(d===null){l.OutIdx>=0&&this.AddOutPt(l,l.Top),this.DeleteFromAEL(l);return}for(var x=l.NextInAEL;x!==null&&x!==d;)this.IntersectEdges(l,x,l.Top),this.SwapPositionsInAEL(l,x),x=l.NextInAEL;l.OutIdx===-1&&d.OutIdx===-1?(this.DeleteFromAEL(l),this.DeleteFromAEL(d)):l.OutIdx>=0&&d.OutIdx>=0?(l.OutIdx>=0&&this.AddLocalMaxPoly(l,d,l.Top),this.DeleteFromAEL(l),this.DeleteFromAEL(d)):e.use_lines&&l.WindDelta===0?(l.OutIdx>=0&&(this.AddOutPt(l,l.Top),l.OutIdx=e.ClipperBase.Unassigned),this.DeleteFromAEL(l),d.OutIdx>=0&&(this.AddOutPt(d,l.Top),d.OutIdx=e.ClipperBase.Unassigned),this.DeleteFromAEL(d)):e.Error("DoMaxima error")},e.Clipper.ReversePaths=function(l){for(var d=0,x=l.length;d<x;d++)l[d].reverse()},e.Clipper.Orientation=function(l){return e.Clipper.Area(l)>=0},e.Clipper.prototype.PointCount=function(l){if(l===null)return 0;var d=0,x=l;do d++,x=x.Next;while(x!==l);return d},e.Clipper.prototype.BuildResult=function(l){e.Clear(l);for(var d=0,x=this.m_PolyOuts.length;d<x;d++){var _=this.m_PolyOuts[d];if(_.Pts!==null){var D=_.Pts.Prev,V=this.PointCount(D);if(!(V<2)){for(var $=new Array(V),ee=0;ee<V;ee++)$[ee]=D.Pt,D=D.Prev;l.push($)}}}},e.Clipper.prototype.BuildResult2=function(l){l.Clear();for(var d=0,x=this.m_PolyOuts.length;d<x;d++){var _=this.m_PolyOuts[d],D=this.PointCount(_.Pts);if(!(_.IsOpen&&D<2||!_.IsOpen&&D<3)){this.FixHoleLinkage(_);var V=new e.PolyNode;l.m_AllPolys.push(V),_.PolyNode=V,V.m_polygon.length=D;for(var $=_.Pts.Prev,ee=0;ee<D;ee++)V.m_polygon[ee]=$.Pt,$=$.Prev}}for(var d=0,x=this.m_PolyOuts.length;d<x;d++){var _=this.m_PolyOuts[d];_.PolyNode!==null&&(_.IsOpen?(_.PolyNode.IsOpen=!0,l.AddChild(_.PolyNode)):_.FirstLeft!==null&&_.FirstLeft.PolyNode!==null?_.FirstLeft.PolyNode.AddChild(_.PolyNode):l.AddChild(_.PolyNode))}},e.Clipper.prototype.FixupOutPolyline=function(l){for(var d=l.Pts,x=d.Prev;d!==x;)if(d=d.Next,e.IntPoint.op_Equality(d.Pt,d.Prev.Pt)){d===x&&(x=d.Prev);var _=d.Prev;_.Next=d.Next,d.Next.Prev=_,d=_}d===d.Prev&&(l.Pts=null)},e.Clipper.prototype.FixupOutPolygon=function(l){var d=null;l.BottomPt=null;for(var x=l.Pts,_=this.PreserveCollinear||this.StrictlySimple;;){if(x.Prev===x||x.Prev===x.Next){l.Pts=null;return}if(e.IntPoint.op_Equality(x.Pt,x.Next.Pt)||e.IntPoint.op_Equality(x.Pt,x.Prev.Pt)||e.ClipperBase.SlopesEqual4(x.Prev.Pt,x.Pt,x.Next.Pt,this.m_UseFullRange)&&(!_||!this.Pt2IsBetweenPt1AndPt3(x.Prev.Pt,x.Pt,x.Next.Pt)))d=null,x.Prev.Next=x.Next,x.Next.Prev=x.Prev,x=x.Prev;else{if(x===d)break;d===null&&(d=x),x=x.Next}}l.Pts=x},e.Clipper.prototype.DupOutPt=function(l,d){var x=new e.OutPt;return x.Pt.X=l.Pt.X,x.Pt.Y=l.Pt.Y,e.use_xyz&&(x.Pt.Z=l.Pt.Z),x.Idx=l.Idx,d?(x.Next=l.Next,x.Prev=l,l.Next.Prev=x,l.Next=x):(x.Prev=l.Prev,x.Next=l,l.Prev.Next=x,l.Prev=x),x},e.Clipper.prototype.GetOverlap=function(l,d,x,_,D){return l<d?x<_?(D.Left=Math.max(l,x),D.Right=Math.min(d,_)):(D.Left=Math.max(l,_),D.Right=Math.min(d,x)):x<_?(D.Left=Math.max(d,x),D.Right=Math.min(l,_)):(D.Left=Math.max(d,_),D.Right=Math.min(l,x)),D.Left<D.Right},e.Clipper.prototype.JoinHorz=function(l,d,x,_,D,V){var $=l.Pt.X>d.Pt.X?e.Direction.dRightToLeft:e.Direction.dLeftToRight,ee=x.Pt.X>_.Pt.X?e.Direction.dRightToLeft:e.Direction.dLeftToRight;if($===ee)return!1;if($===e.Direction.dLeftToRight){for(;l.Next.Pt.X<=D.X&&l.Next.Pt.X>=l.Pt.X&&l.Next.Pt.Y===D.Y;)l=l.Next;V&&l.Pt.X!==D.X&&(l=l.Next),d=this.DupOutPt(l,!V),e.IntPoint.op_Inequality(d.Pt,D)&&(l=d,l.Pt.X=D.X,l.Pt.Y=D.Y,e.use_xyz&&(l.Pt.Z=D.Z),d=this.DupOutPt(l,!V))}else{for(;l.Next.Pt.X>=D.X&&l.Next.Pt.X<=l.Pt.X&&l.Next.Pt.Y===D.Y;)l=l.Next;!V&&l.Pt.X!==D.X&&(l=l.Next),d=this.DupOutPt(l,V),e.IntPoint.op_Inequality(d.Pt,D)&&(l=d,l.Pt.X=D.X,l.Pt.Y=D.Y,e.use_xyz&&(l.Pt.Z=D.Z),d=this.DupOutPt(l,V))}if(ee===e.Direction.dLeftToRight){for(;x.Next.Pt.X<=D.X&&x.Next.Pt.X>=x.Pt.X&&x.Next.Pt.Y===D.Y;)x=x.Next;V&&x.Pt.X!==D.X&&(x=x.Next),_=this.DupOutPt(x,!V),e.IntPoint.op_Inequality(_.Pt,D)&&(x=_,x.Pt.X=D.X,x.Pt.Y=D.Y,e.use_xyz&&(x.Pt.Z=D.Z),_=this.DupOutPt(x,!V))}else{for(;x.Next.Pt.X>=D.X&&x.Next.Pt.X<=x.Pt.X&&x.Next.Pt.Y===D.Y;)x=x.Next;!V&&x.Pt.X!==D.X&&(x=x.Next),_=this.DupOutPt(x,V),e.IntPoint.op_Inequality(_.Pt,D)&&(x=_,x.Pt.X=D.X,x.Pt.Y=D.Y,e.use_xyz&&(x.Pt.Z=D.Z),_=this.DupOutPt(x,V))}return $===e.Direction.dLeftToRight===V?(l.Prev=x,x.Next=l,d.Next=_,_.Prev=d):(l.Next=x,x.Prev=l,d.Prev=_,_.Next=d),!0},e.Clipper.prototype.JoinPoints=function(l,d,x){var _=l.OutPt1,D=new e.OutPt,V=l.OutPt2,$=new e.OutPt,ee=l.OutPt1.Pt.Y===l.OffPt.Y;if(ee&&e.IntPoint.op_Equality(l.OffPt,l.OutPt1.Pt)&&e.IntPoint.op_Equality(l.OffPt,l.OutPt2.Pt)){if(d!==x)return!1;for(D=l.OutPt1.Next;D!==_&&e.IntPoint.op_Equality(D.Pt,l.OffPt);)D=D.Next;var te=D.Pt.Y>l.OffPt.Y;for($=l.OutPt2.Next;$!==V&&e.IntPoint.op_Equality($.Pt,l.OffPt);)$=$.Next;var Ce=$.Pt.Y>l.OffPt.Y;return te===Ce?!1:te?(D=this.DupOutPt(_,!1),$=this.DupOutPt(V,!0),_.Prev=V,V.Next=_,D.Next=$,$.Prev=D,l.OutPt1=_,l.OutPt2=D,!0):(D=this.DupOutPt(_,!0),$=this.DupOutPt(V,!1),_.Next=V,V.Prev=_,D.Prev=$,$.Next=D,l.OutPt1=_,l.OutPt2=D,!0)}else if(ee){for(D=_;_.Prev.Pt.Y===_.Pt.Y&&_.Prev!==D&&_.Prev!==V;)_=_.Prev;for(;D.Next.Pt.Y===D.Pt.Y&&D.Next!==_&&D.Next!==V;)D=D.Next;if(D.Next===_||D.Next===V)return!1;for($=V;V.Prev.Pt.Y===V.Pt.Y&&V.Prev!==$&&V.Prev!==D;)V=V.Prev;for(;$.Next.Pt.Y===$.Pt.Y&&$.Next!==V&&$.Next!==_;)$=$.Next;if($.Next===V||$.Next===_)return!1;var Xe={Left:null,Right:null};if(!this.GetOverlap(_.Pt.X,D.Pt.X,V.Pt.X,$.Pt.X,Xe))return!1;var Ue=Xe.Left,Qe=Xe.Right,xt=new e.IntPoint0,Pt;return _.Pt.X>=Ue&&_.Pt.X<=Qe?(xt.X=_.Pt.X,xt.Y=_.Pt.Y,e.use_xyz&&(xt.Z=_.Pt.Z),Pt=_.Pt.X>D.Pt.X):V.Pt.X>=Ue&&V.Pt.X<=Qe?(xt.X=V.Pt.X,xt.Y=V.Pt.Y,e.use_xyz&&(xt.Z=V.Pt.Z),Pt=V.Pt.X>$.Pt.X):D.Pt.X>=Ue&&D.Pt.X<=Qe?(xt.X=D.Pt.X,xt.Y=D.Pt.Y,e.use_xyz&&(xt.Z=D.Pt.Z),Pt=D.Pt.X>_.Pt.X):(xt.X=$.Pt.X,xt.Y=$.Pt.Y,e.use_xyz&&(xt.Z=$.Pt.Z),Pt=$.Pt.X>V.Pt.X),l.OutPt1=_,l.OutPt2=V,this.JoinHorz(_,D,V,$,xt,Pt)}else{for(D=_.Next;e.IntPoint.op_Equality(D.Pt,_.Pt)&&D!==_;)D=D.Next;var Tt=D.Pt.Y>_.Pt.Y||!e.ClipperBase.SlopesEqual4(_.Pt,D.Pt,l.OffPt,this.m_UseFullRange);if(Tt){for(D=_.Prev;e.IntPoint.op_Equality(D.Pt,_.Pt)&&D!==_;)D=D.Prev;if(D.Pt.Y>_.Pt.Y||!e.ClipperBase.SlopesEqual4(_.Pt,D.Pt,l.OffPt,this.m_UseFullRange))return!1}for($=V.Next;e.IntPoint.op_Equality($.Pt,V.Pt)&&$!==V;)$=$.Next;var Ht=$.Pt.Y>V.Pt.Y||!e.ClipperBase.SlopesEqual4(V.Pt,$.Pt,l.OffPt,this.m_UseFullRange);if(Ht){for($=V.Prev;e.IntPoint.op_Equality($.Pt,V.Pt)&&$!==V;)$=$.Prev;if($.Pt.Y>V.Pt.Y||!e.ClipperBase.SlopesEqual4(V.Pt,$.Pt,l.OffPt,this.m_UseFullRange))return!1}return D===_||$===V||D===$||d===x&&Tt===Ht?!1:Tt?(D=this.DupOutPt(_,!1),$=this.DupOutPt(V,!0),_.Prev=V,V.Next=_,D.Next=$,$.Prev=D,l.OutPt1=_,l.OutPt2=D,!0):(D=this.DupOutPt(_,!0),$=this.DupOutPt(V,!1),_.Next=V,V.Prev=_,D.Prev=$,$.Next=D,l.OutPt1=_,l.OutPt2=D,!0)}},e.Clipper.GetBounds=function(l){for(var d=0,x=l.length;d<x&&l[d].length===0;)d++;if(d===x)return new e.IntRect(0,0,0,0);var _=new e.IntRect;for(_.left=l[d][0].X,_.right=_.left,_.top=l[d][0].Y,_.bottom=_.top;d<x;d++)for(var D=0,V=l[d].length;D<V;D++)l[d][D].X<_.left?_.left=l[d][D].X:l[d][D].X>_.right&&(_.right=l[d][D].X),l[d][D].Y<_.top?_.top=l[d][D].Y:l[d][D].Y>_.bottom&&(_.bottom=l[d][D].Y);return _},e.Clipper.prototype.GetBounds2=function(l){var d=l,x=new e.IntRect;for(x.left=l.Pt.X,x.right=l.Pt.X,x.top=l.Pt.Y,x.bottom=l.Pt.Y,l=l.Next;l!==d;)l.Pt.X<x.left&&(x.left=l.Pt.X),l.Pt.X>x.right&&(x.right=l.Pt.X),l.Pt.Y<x.top&&(x.top=l.Pt.Y),l.Pt.Y>x.bottom&&(x.bottom=l.Pt.Y),l=l.Next;return x},e.Clipper.PointInPolygon=function(l,d){var x=0,_=d.length;if(_<3)return 0;for(var D=d[0],V=1;V<=_;++V){var $=V===_?d[0]:d[V];if($.Y===l.Y&&($.X===l.X||D.Y===l.Y&&$.X>l.X==D.X<l.X))return-1;if(D.Y<l.Y!=$.Y<l.Y){if(D.X>=l.X)if($.X>l.X)x=1-x;else{var ee=(D.X-l.X)*($.Y-l.Y)-($.X-l.X)*(D.Y-l.Y);if(ee===0)return-1;ee>0==$.Y>D.Y&&(x=1-x)}else if($.X>l.X){var ee=(D.X-l.X)*($.Y-l.Y)-($.X-l.X)*(D.Y-l.Y);if(ee===0)return-1;ee>0==$.Y>D.Y&&(x=1-x)}}D=$}return x},e.Clipper.prototype.PointInPolygon=function(l,d){var x=0,_=d,D=l.X,V=l.Y,$=d.Pt.X,ee=d.Pt.Y;do{d=d.Next;var te=d.Pt.X,Ce=d.Pt.Y;if(Ce===V&&(te===D||ee===V&&te>D==$<D))return-1;if(ee<V!=Ce<V){if($>=D)if(te>D)x=1-x;else{var Xe=($-D)*(Ce-V)-(te-D)*(ee-V);if(Xe===0)return-1;Xe>0==Ce>ee&&(x=1-x)}else if(te>D){var Xe=($-D)*(Ce-V)-(te-D)*(ee-V);if(Xe===0)return-1;Xe>0==Ce>ee&&(x=1-x)}}$=te,ee=Ce}while(_!==d);return x},e.Clipper.prototype.Poly2ContainsPoly1=function(l,d){var x=l;do{var _=this.PointInPolygon(x.Pt,d);if(_>=0)return _>0;x=x.Next}while(x!==l);return!0},e.Clipper.prototype.FixupFirstLefts1=function(l,d){for(var x,_,D=0,V=this.m_PolyOuts.length;D<V;D++)x=this.m_PolyOuts[D],_=e.Clipper.ParseFirstLeft(x.FirstLeft),x.Pts!==null&&_===l&&this.Poly2ContainsPoly1(x.Pts,d.Pts)&&(x.FirstLeft=d)},e.Clipper.prototype.FixupFirstLefts2=function(l,d){for(var x=d.FirstLeft,_,D,V=0,$=this.m_PolyOuts.length;V<$;V++)_=this.m_PolyOuts[V],!(_.Pts===null||_===d||_===l)&&(D=e.Clipper.ParseFirstLeft(_.FirstLeft),!(D!==x&&D!==l&&D!==d)&&(this.Poly2ContainsPoly1(_.Pts,l.Pts)?_.FirstLeft=l:this.Poly2ContainsPoly1(_.Pts,d.Pts)?_.FirstLeft=d:(_.FirstLeft===l||_.FirstLeft===d)&&(_.FirstLeft=x)))},e.Clipper.prototype.FixupFirstLefts3=function(l,d){for(var x,_,D=0,V=this.m_PolyOuts.length;D<V;D++)x=this.m_PolyOuts[D],_=e.Clipper.ParseFirstLeft(x.FirstLeft),x.Pts!==null&&_===l&&(x.FirstLeft=d)},e.Clipper.ParseFirstLeft=function(l){for(;l!==null&&l.Pts===null;)l=l.FirstLeft;return l},e.Clipper.prototype.JoinCommonEdges=function(){for(var l=0,d=this.m_Joins.length;l<d;l++){var x=this.m_Joins[l],_=this.GetOutRec(x.OutPt1.Idx),D=this.GetOutRec(x.OutPt2.Idx);if(!(_.Pts===null||D.Pts===null)&&!(_.IsOpen||D.IsOpen)){var V;_===D?V=_:this.OutRec1RightOfOutRec2(_,D)?V=D:this.OutRec1RightOfOutRec2(D,_)?V=_:V=this.GetLowermostRec(_,D),this.JoinPoints(x,_,D)&&(_===D?(_.Pts=x.OutPt1,_.BottomPt=null,D=this.CreateOutRec(),D.Pts=x.OutPt2,this.UpdateOutPtIdxs(D),this.Poly2ContainsPoly1(D.Pts,_.Pts)?(D.IsHole=!_.IsHole,D.FirstLeft=_,this.m_UsingPolyTree&&this.FixupFirstLefts2(D,_),(D.IsHole^this.ReverseSolution)==this.Area$1(D)>0&&this.ReversePolyPtLinks(D.Pts)):this.Poly2ContainsPoly1(_.Pts,D.Pts)?(D.IsHole=_.IsHole,_.IsHole=!D.IsHole,D.FirstLeft=_.FirstLeft,_.FirstLeft=D,this.m_UsingPolyTree&&this.FixupFirstLefts2(_,D),(_.IsHole^this.ReverseSolution)==this.Area$1(_)>0&&this.ReversePolyPtLinks(_.Pts)):(D.IsHole=_.IsHole,D.FirstLeft=_.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(_,D))):(D.Pts=null,D.BottomPt=null,D.Idx=_.Idx,_.IsHole=V.IsHole,V===D&&(_.FirstLeft=D.FirstLeft),D.FirstLeft=_,this.m_UsingPolyTree&&this.FixupFirstLefts3(D,_)))}}},e.Clipper.prototype.UpdateOutPtIdxs=function(l){var d=l.Pts;do d.Idx=l.Idx,d=d.Prev;while(d!==l.Pts)},e.Clipper.prototype.DoSimplePolygons=function(){for(var l=0;l<this.m_PolyOuts.length;){var d=this.m_PolyOuts[l++],x=d.Pts;if(!(x===null||d.IsOpen))do{for(var _=x.Next;_!==d.Pts;){if(e.IntPoint.op_Equality(x.Pt,_.Pt)&&_.Next!==x&&_.Prev!==x){var D=x.Prev,V=_.Prev;x.Prev=V,V.Next=x,_.Prev=D,D.Next=_,d.Pts=x;var $=this.CreateOutRec();$.Pts=_,this.UpdateOutPtIdxs($),this.Poly2ContainsPoly1($.Pts,d.Pts)?($.IsHole=!d.IsHole,$.FirstLeft=d,this.m_UsingPolyTree&&this.FixupFirstLefts2($,d)):this.Poly2ContainsPoly1(d.Pts,$.Pts)?($.IsHole=d.IsHole,d.IsHole=!$.IsHole,$.FirstLeft=d.FirstLeft,d.FirstLeft=$,this.m_UsingPolyTree&&this.FixupFirstLefts2(d,$)):($.IsHole=d.IsHole,$.FirstLeft=d.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(d,$)),_=x}_=_.Next}x=x.Next}while(x!==d.Pts)}},e.Clipper.Area=function(l){if(!Array.isArray(l))return 0;var d=l.length;if(d<3)return 0;for(var x=0,_=0,D=d-1;_<d;++_)x+=(l[D].X+l[_].X)*(l[D].Y-l[_].Y),D=_;return-x*.5},e.Clipper.prototype.Area=function(l){var d=l;if(l===null)return 0;var x=0;do x=x+(l.Prev.Pt.X+l.Pt.X)*(l.Prev.Pt.Y-l.Pt.Y),l=l.Next;while(l!==d);return x*.5},e.Clipper.prototype.Area$1=function(l){return this.Area(l.Pts)},e.Clipper.SimplifyPolygon=function(l,d){var x=new Array,_=new e.Clipper(0);return _.StrictlySimple=!0,_.AddPath(l,e.PolyType.ptSubject,!0),_.Execute(e.ClipType.ctUnion,x,d,d),x},e.Clipper.SimplifyPolygons=function(l,d){typeof d>"u"&&(d=e.PolyFillType.pftEvenOdd);var x=new Array,_=new e.Clipper(0);return _.StrictlySimple=!0,_.AddPaths(l,e.PolyType.ptSubject,!0),_.Execute(e.ClipType.ctUnion,x,d,d),x},e.Clipper.DistanceSqrd=function(l,d){var x=l.X-d.X,_=l.Y-d.Y;return x*x+_*_},e.Clipper.DistanceFromLineSqrd=function(l,d,x){var _=d.Y-x.Y,D=x.X-d.X,V=_*d.X+D*d.Y;return V=_*l.X+D*l.Y-V,V*V/(_*_+D*D)},e.Clipper.SlopesNearCollinear=function(l,d,x,_){return Math.abs(l.X-d.X)>Math.abs(l.Y-d.Y)?l.X>d.X==l.X<x.X?e.Clipper.DistanceFromLineSqrd(l,d,x)<_:d.X>l.X==d.X<x.X?e.Clipper.DistanceFromLineSqrd(d,l,x)<_:e.Clipper.DistanceFromLineSqrd(x,l,d)<_:l.Y>d.Y==l.Y<x.Y?e.Clipper.DistanceFromLineSqrd(l,d,x)<_:d.Y>l.Y==d.Y<x.Y?e.Clipper.DistanceFromLineSqrd(d,l,x)<_:e.Clipper.DistanceFromLineSqrd(x,l,d)<_},e.Clipper.PointsAreClose=function(l,d,x){var _=l.X-d.X,D=l.Y-d.Y;return _*_+D*D<=x},e.Clipper.ExcludeOp=function(l){var d=l.Prev;return d.Next=l.Next,l.Next.Prev=d,d.Idx=0,d},e.Clipper.CleanPolygon=function(l,d){typeof d>"u"&&(d=1.415);var x=l.length;if(x===0)return new Array;for(var _=new Array(x),D=0;D<x;++D)_[D]=new e.OutPt;for(var D=0;D<x;++D)_[D].Pt=l[D],_[D].Next=_[(D+1)%x],_[D].Next.Prev=_[D],_[D].Idx=0;for(var V=d*d,$=_[0];$.Idx===0&&$.Next!==$.Prev;)e.Clipper.PointsAreClose($.Pt,$.Prev.Pt,V)?($=e.Clipper.ExcludeOp($),x--):e.Clipper.PointsAreClose($.Prev.Pt,$.Next.Pt,V)?(e.Clipper.ExcludeOp($.Next),$=e.Clipper.ExcludeOp($),x-=2):e.Clipper.SlopesNearCollinear($.Prev.Pt,$.Pt,$.Next.Pt,V)?($=e.Clipper.ExcludeOp($),x--):($.Idx=1,$=$.Next);x<3&&(x=0);for(var ee=new Array(x),D=0;D<x;++D)ee[D]=new e.IntPoint1($.Pt),$=$.Next;return _=null,ee},e.Clipper.CleanPolygons=function(l,d){for(var x=new Array(l.length),_=0,D=l.length;_<D;_++)x[_]=e.Clipper.CleanPolygon(l[_],d);return x},e.Clipper.Minkowski=function(l,d,x,_){var D=_?1:0,V=l.length,$=d.length,ee=new Array;if(x)for(var te=0;te<$;te++){for(var Ce=new Array(V),Xe=0,Ue=l.length,Qe=l[Xe];Xe<Ue;Xe++,Qe=l[Xe])Ce[Xe]=new e.IntPoint2(d[te].X+Qe.X,d[te].Y+Qe.Y);ee.push(Ce)}else for(var te=0;te<$;te++){for(var Ce=new Array(V),Xe=0,Ue=l.length,Qe=l[Xe];Xe<Ue;Xe++,Qe=l[Xe])Ce[Xe]=new e.IntPoint2(d[te].X-Qe.X,d[te].Y-Qe.Y);ee.push(Ce)}for(var xt=new Array,te=0;te<$-1+D;te++)for(var Xe=0;Xe<V;Xe++){var Pt=new Array;Pt.push(ee[te%$][Xe%V]),Pt.push(ee[(te+1)%$][Xe%V]),Pt.push(ee[(te+1)%$][(Xe+1)%V]),Pt.push(ee[te%$][(Xe+1)%V]),e.Clipper.Orientation(Pt)||Pt.reverse(),xt.push(Pt)}return xt},e.Clipper.MinkowskiSum=function(l,d,x){if(d[0]instanceof Array){for(var D=d,$=new e.Paths,V=new e.Clipper,ee=0;ee<D.length;++ee){var te=e.Clipper.Minkowski(l,D[ee],!0,x);if(V.AddPaths(te,e.PolyType.ptSubject,!0),x){var _=e.Clipper.TranslatePath(D[ee],l[0]);V.AddPath(_,e.PolyType.ptClip,!0)}}return V.Execute(e.ClipType.ctUnion,$,e.PolyFillType.pftNonZero,e.PolyFillType.pftNonZero),$}else{var _=d,D=e.Clipper.Minkowski(l,_,!0,x),V=new e.Clipper;return V.AddPaths(D,e.PolyType.ptSubject,!0),V.Execute(e.ClipType.ctUnion,D,e.PolyFillType.pftNonZero,e.PolyFillType.pftNonZero),D}},e.Clipper.TranslatePath=function(l,d){for(var x=new e.Path,_=0;_<l.length;_++)x.push(new e.IntPoint2(l[_].X+d.X,l[_].Y+d.Y));return x},e.Clipper.MinkowskiDiff=function(l,d){var x=e.Clipper.Minkowski(l,d,!1,!0),_=new e.Clipper;return _.AddPaths(x,e.PolyType.ptSubject,!0),_.Execute(e.ClipType.ctUnion,x,e.PolyFillType.pftNonZero,e.PolyFillType.pftNonZero),x},e.Clipper.PolyTreeToPaths=function(l){var d=new Array;return e.Clipper.AddPolyNodeToPaths(l,e.Clipper.NodeType.ntAny,d),d},e.Clipper.AddPolyNodeToPaths=function(l,d,x){var _=!0;switch(d){case e.Clipper.NodeType.ntOpen:return;case e.Clipper.NodeType.ntClosed:_=!l.IsOpen;break}l.m_polygon.length>0&&_&&x.push(l.m_polygon);for(var D=0,V=l.Childs(),$=V.length,ee=V[D];D<$;D++,ee=V[D])e.Clipper.AddPolyNodeToPaths(ee,d,x)},e.Clipper.OpenPathsFromPolyTree=function(l){for(var d=new e.Paths,x=0,_=l.ChildCount();x<_;x++)l.Childs()[x].IsOpen&&d.push(l.Childs()[x].m_polygon);return d},e.Clipper.ClosedPathsFromPolyTree=function(l){var d=new e.Paths;return e.Clipper.AddPolyNodeToPaths(l,e.Clipper.NodeType.ntClosed,d),d},is(e.Clipper,e.ClipperBase),e.Clipper.NodeType={ntAny:0,ntOpen:1,ntClosed:2},e.ClipperOffset=function(l,d){typeof l>"u"&&(l=2),typeof d>"u"&&(d=e.ClipperOffset.def_arc_tolerance),this.m_destPolys=new e.Paths,this.m_srcPoly=new e.Path,this.m_destPoly=new e.Path,this.m_normals=new Array,this.m_delta=0,this.m_sinA=0,this.m_sin=0,this.m_cos=0,this.m_miterLim=0,this.m_StepsPerRad=0,this.m_lowest=new e.IntPoint0,this.m_polyNodes=new e.PolyNode,this.MiterLimit=l,this.ArcTolerance=d,this.m_lowest.X=-1},e.ClipperOffset.two_pi=6.28318530717959,e.ClipperOffset.def_arc_tolerance=.25,e.ClipperOffset.prototype.Clear=function(){e.Clear(this.m_polyNodes.Childs()),this.m_lowest.X=-1},e.ClipperOffset.Round=e.Clipper.Round,e.ClipperOffset.prototype.AddPath=function(l,d,x){var _=l.length-1;if(!(_<0)){var D=new e.PolyNode;if(D.m_jointype=d,D.m_endtype=x,x===e.EndType.etClosedLine||x===e.EndType.etClosedPolygon)for(;_>0&&e.IntPoint.op_Equality(l[0],l[_]);)_--;D.m_polygon.push(l[0]);for(var V=0,$=0,ee=1;ee<=_;ee++)e.IntPoint.op_Inequality(D.m_polygon[V],l[ee])&&(V++,D.m_polygon.push(l[ee]),(l[ee].Y>D.m_polygon[$].Y||l[ee].Y===D.m_polygon[$].Y&&l[ee].X<D.m_polygon[$].X)&&($=V));if(!(x===e.EndType.etClosedPolygon&&V<2)&&(this.m_polyNodes.AddChild(D),x===e.EndType.etClosedPolygon))if(this.m_lowest.X<0)this.m_lowest=new e.IntPoint2(this.m_polyNodes.ChildCount()-1,$);else{var te=this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon[this.m_lowest.Y];(D.m_polygon[$].Y>te.Y||D.m_polygon[$].Y===te.Y&&D.m_polygon[$].X<te.X)&&(this.m_lowest=new e.IntPoint2(this.m_polyNodes.ChildCount()-1,$))}}},e.ClipperOffset.prototype.AddPaths=function(l,d,x){for(var _=0,D=l.length;_<D;_++)this.AddPath(l[_],d,x)},e.ClipperOffset.prototype.FixOrientations=function(){if(this.m_lowest.X>=0&&!e.Clipper.Orientation(this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon))for(var l=0;l<this.m_polyNodes.ChildCount();l++){var d=this.m_polyNodes.Childs()[l];(d.m_endtype===e.EndType.etClosedPolygon||d.m_endtype===e.EndType.etClosedLine&&e.Clipper.Orientation(d.m_polygon))&&d.m_polygon.reverse()}else for(var l=0;l<this.m_polyNodes.ChildCount();l++){var d=this.m_polyNodes.Childs()[l];d.m_endtype===e.EndType.etClosedLine&&!e.Clipper.Orientation(d.m_polygon)&&d.m_polygon.reverse()}},e.ClipperOffset.GetUnitNormal=function(l,d){var x=d.X-l.X,_=d.Y-l.Y;if(x===0&&_===0)return new e.DoublePoint2(0,0);var D=1/Math.sqrt(x*x+_*_);return x*=D,_*=D,new e.DoublePoint2(_,-x)},e.ClipperOffset.prototype.DoOffset=function(l){if(this.m_destPolys=new Array,this.m_delta=l,e.ClipperBase.near_zero(l)){for(var d=0;d<this.m_polyNodes.ChildCount();d++){var x=this.m_polyNodes.Childs()[d];x.m_endtype===e.EndType.etClosedPolygon&&this.m_destPolys.push(x.m_polygon)}return}this.MiterLimit>2?this.m_miterLim=2/(this.MiterLimit*this.MiterLimit):this.m_miterLim=.5;var _;this.ArcTolerance<=0?_=e.ClipperOffset.def_arc_tolerance:this.ArcTolerance>Math.abs(l)*e.ClipperOffset.def_arc_tolerance?_=Math.abs(l)*e.ClipperOffset.def_arc_tolerance:_=this.ArcTolerance;var D=3.14159265358979/Math.acos(1-_/Math.abs(l));this.m_sin=Math.sin(e.ClipperOffset.two_pi/D),this.m_cos=Math.cos(e.ClipperOffset.two_pi/D),this.m_StepsPerRad=D/e.ClipperOffset.two_pi,l<0&&(this.m_sin=-this.m_sin);for(var d=0;d<this.m_polyNodes.ChildCount();d++){var x=this.m_polyNodes.Childs()[d];this.m_srcPoly=x.m_polygon;var V=this.m_srcPoly.length;if(!(V===0||l<=0&&(V<3||x.m_endtype!==e.EndType.etClosedPolygon))){if(this.m_destPoly=new Array,V===1){if(x.m_jointype===e.JoinType.jtRound)for(var $=1,ee=0,te=1;te<=D;te++){this.m_destPoly.push(new e.IntPoint2(e.ClipperOffset.Round(this.m_srcPoly[0].X+$*l),e.ClipperOffset.Round(this.m_srcPoly[0].Y+ee*l)));var Ce=$;$=$*this.m_cos-this.m_sin*ee,ee=Ce*this.m_sin+ee*this.m_cos}else for(var $=-1,ee=-1,te=0;te<4;++te)this.m_destPoly.push(new e.IntPoint2(e.ClipperOffset.Round(this.m_srcPoly[0].X+$*l),e.ClipperOffset.Round(this.m_srcPoly[0].Y+ee*l))),$<0?$=1:ee<0?ee=1:$=-1;this.m_destPolys.push(this.m_destPoly);continue}this.m_normals.length=0;for(var te=0;te<V-1;te++)this.m_normals.push(e.ClipperOffset.GetUnitNormal(this.m_srcPoly[te],this.m_srcPoly[te+1]));if(x.m_endtype===e.EndType.etClosedLine||x.m_endtype===e.EndType.etClosedPolygon?this.m_normals.push(e.ClipperOffset.GetUnitNormal(this.m_srcPoly[V-1],this.m_srcPoly[0])):this.m_normals.push(new e.DoublePoint1(this.m_normals[V-2])),x.m_endtype===e.EndType.etClosedPolygon){for(var Xe=V-1,te=0;te<V;te++)Xe=this.OffsetPoint(te,Xe,x.m_jointype);this.m_destPolys.push(this.m_destPoly)}else if(x.m_endtype===e.EndType.etClosedLine){for(var Xe=V-1,te=0;te<V;te++)Xe=this.OffsetPoint(te,Xe,x.m_jointype);this.m_destPolys.push(this.m_destPoly),this.m_destPoly=new Array;for(var Ue=this.m_normals[V-1],te=V-1;te>0;te--)this.m_normals[te]=new e.DoublePoint2(-this.m_normals[te-1].X,-this.m_normals[te-1].Y);this.m_normals[0]=new e.DoublePoint2(-Ue.X,-Ue.Y),Xe=0;for(var te=V-1;te>=0;te--)Xe=this.OffsetPoint(te,Xe,x.m_jointype);this.m_destPolys.push(this.m_destPoly)}else{for(var Xe=0,te=1;te<V-1;++te)Xe=this.OffsetPoint(te,Xe,x.m_jointype);var Qe;if(x.m_endtype===e.EndType.etOpenButt){var te=V-1;Qe=new e.IntPoint2(e.ClipperOffset.Round(this.m_srcPoly[te].X+this.m_normals[te].X*l),e.ClipperOffset.Round(this.m_srcPoly[te].Y+this.m_normals[te].Y*l)),this.m_destPoly.push(Qe),Qe=new e.IntPoint2(e.ClipperOffset.Round(this.m_srcPoly[te].X-this.m_normals[te].X*l),e.ClipperOffset.Round(this.m_srcPoly[te].Y-this.m_normals[te].Y*l)),this.m_destPoly.push(Qe)}else{var te=V-1;Xe=V-2,this.m_sinA=0,this.m_normals[te]=new e.DoublePoint2(-this.m_normals[te].X,-this.m_normals[te].Y),x.m_endtype===e.EndType.etOpenSquare?this.DoSquare(te,Xe):this.DoRound(te,Xe)}for(var te=V-1;te>0;te--)this.m_normals[te]=new e.DoublePoint2(-this.m_normals[te-1].X,-this.m_normals[te-1].Y);this.m_normals[0]=new e.DoublePoint2(-this.m_normals[1].X,-this.m_normals[1].Y),Xe=V-1;for(var te=Xe-1;te>0;--te)Xe=this.OffsetPoint(te,Xe,x.m_jointype);x.m_endtype===e.EndType.etOpenButt?(Qe=new e.IntPoint2(e.ClipperOffset.Round(this.m_srcPoly[0].X-this.m_normals[0].X*l),e.ClipperOffset.Round(this.m_srcPoly[0].Y-this.m_normals[0].Y*l)),this.m_destPoly.push(Qe),Qe=new e.IntPoint2(e.ClipperOffset.Round(this.m_srcPoly[0].X+this.m_normals[0].X*l),e.ClipperOffset.Round(this.m_srcPoly[0].Y+this.m_normals[0].Y*l)),this.m_destPoly.push(Qe)):(Xe=1,this.m_sinA=0,x.m_endtype===e.EndType.etOpenSquare?this.DoSquare(0,1):this.DoRound(0,1)),this.m_destPolys.push(this.m_destPoly)}}}},e.ClipperOffset.prototype.Execute=function(){var l=arguments,d=l[0]instanceof e.PolyTree;if(d){var x=l[0],_=l[1];x.Clear(),this.FixOrientations(),this.DoOffset(_);var D=new e.Clipper(0);if(D.AddPaths(this.m_destPolys,e.PolyType.ptSubject,!0),_>0)D.Execute(e.ClipType.ctUnion,x,e.PolyFillType.pftPositive,e.PolyFillType.pftPositive);else{var V=e.Clipper.GetBounds(this.m_destPolys),$=new e.Path;if($.push(new e.IntPoint2(V.left-10,V.bottom+10)),$.push(new e.IntPoint2(V.right+10,V.bottom+10)),$.push(new e.IntPoint2(V.right+10,V.top-10)),$.push(new e.IntPoint2(V.left-10,V.top-10)),D.AddPath($,e.PolyType.ptSubject,!0),D.ReverseSolution=!0,D.Execute(e.ClipType.ctUnion,x,e.PolyFillType.pftNegative,e.PolyFillType.pftNegative),x.ChildCount()===1&&x.Childs()[0].ChildCount()>0){var ee=x.Childs()[0];x.Childs()[0]=ee.Childs()[0],x.Childs()[0].m_Parent=x;for(var te=1;te<ee.ChildCount();te++)x.AddChild(ee.Childs()[te])}else x.Clear()}}else{var x=l[0],_=l[1];e.Clear(x),this.FixOrientations(),this.DoOffset(_);var D=new e.Clipper(0);if(D.AddPaths(this.m_destPolys,e.PolyType.ptSubject,!0),_>0)D.Execute(e.ClipType.ctUnion,x,e.PolyFillType.pftPositive,e.PolyFillType.pftPositive);else{var V=e.Clipper.GetBounds(this.m_destPolys),$=new e.Path;$.push(new e.IntPoint2(V.left-10,V.bottom+10)),$.push(new e.IntPoint2(V.right+10,V.bottom+10)),$.push(new e.IntPoint2(V.right+10,V.top-10)),$.push(new e.IntPoint2(V.left-10,V.top-10)),D.AddPath($,e.PolyType.ptSubject,!0),D.ReverseSolution=!0,D.Execute(e.ClipType.ctUnion,x,e.PolyFillType.pftNegative,e.PolyFillType.pftNegative),x.length>0&&x.splice(0,1)}}},e.ClipperOffset.prototype.OffsetPoint=function(l,d,x){if(this.m_sinA=this.m_normals[d].X*this.m_normals[l].Y-this.m_normals[l].X*this.m_normals[d].Y,Math.abs(this.m_sinA*this.m_delta)<1){var _=this.m_normals[d].X*this.m_normals[l].X+this.m_normals[l].Y*this.m_normals[d].Y;if(_>0)return this.m_destPoly.push(new e.IntPoint2(e.ClipperOffset.Round(this.m_srcPoly[l].X+this.m_normals[d].X*this.m_delta),e.ClipperOffset.Round(this.m_srcPoly[l].Y+this.m_normals[d].Y*this.m_delta))),d}else this.m_sinA>1?this.m_sinA=1:this.m_sinA<-1&&(this.m_sinA=-1);if(this.m_sinA*this.m_delta<0)this.m_destPoly.push(new e.IntPoint2(e.ClipperOffset.Round(this.m_srcPoly[l].X+this.m_normals[d].X*this.m_delta),e.ClipperOffset.Round(this.m_srcPoly[l].Y+this.m_normals[d].Y*this.m_delta))),this.m_destPoly.push(new e.IntPoint1(this.m_srcPoly[l])),this.m_destPoly.push(new e.IntPoint2(e.ClipperOffset.Round(this.m_srcPoly[l].X+this.m_normals[l].X*this.m_delta),e.ClipperOffset.Round(this.m_srcPoly[l].Y+this.m_normals[l].Y*this.m_delta)));else switch(x){case e.JoinType.jtMiter:{var D=1+(this.m_normals[l].X*this.m_normals[d].X+this.m_normals[l].Y*this.m_normals[d].Y);D>=this.m_miterLim?this.DoMiter(l,d,D):this.DoSquare(l,d);break}case e.JoinType.jtSquare:this.DoSquare(l,d);break;case e.JoinType.jtRound:this.DoRound(l,d);break}return d=l,d},e.ClipperOffset.prototype.DoSquare=function(l,d){var x=Math.tan(Math.atan2(this.m_sinA,this.m_normals[d].X*this.m_normals[l].X+this.m_normals[d].Y*this.m_normals[l].Y)/4);this.m_destPoly.push(new e.IntPoint2(e.ClipperOffset.Round(this.m_srcPoly[l].X+this.m_delta*(this.m_normals[d].X-this.m_normals[d].Y*x)),e.ClipperOffset.Round(this.m_srcPoly[l].Y+this.m_delta*(this.m_normals[d].Y+this.m_normals[d].X*x)))),this.m_destPoly.push(new e.IntPoint2(e.ClipperOffset.Round(this.m_srcPoly[l].X+this.m_delta*(this.m_normals[l].X+this.m_normals[l].Y*x)),e.ClipperOffset.Round(this.m_srcPoly[l].Y+this.m_delta*(this.m_normals[l].Y-this.m_normals[l].X*x))))},e.ClipperOffset.prototype.DoMiter=function(l,d,x){var _=this.m_delta/x;this.m_destPoly.push(new e.IntPoint2(e.ClipperOffset.Round(this.m_srcPoly[l].X+(this.m_normals[d].X+this.m_normals[l].X)*_),e.ClipperOffset.Round(this.m_srcPoly[l].Y+(this.m_normals[d].Y+this.m_normals[l].Y)*_)))},e.ClipperOffset.prototype.DoRound=function(l,d){for(var x=Math.atan2(this.m_sinA,this.m_normals[d].X*this.m_normals[l].X+this.m_normals[d].Y*this.m_normals[l].Y),_=Math.max(e.Cast_Int32(e.ClipperOffset.Round(this.m_StepsPerRad*Math.abs(x))),1),D=this.m_normals[d].X,V=this.m_normals[d].Y,$,ee=0;ee<_;++ee)this.m_destPoly.push(new e.IntPoint2(e.ClipperOffset.Round(this.m_srcPoly[l].X+D*this.m_delta),e.ClipperOffset.Round(this.m_srcPoly[l].Y+V*this.m_delta))),$=D,D=D*this.m_cos-this.m_sin*V,V=$*this.m_sin+V*this.m_cos;this.m_destPoly.push(new e.IntPoint2(e.ClipperOffset.Round(this.m_srcPoly[l].X+this.m_normals[l].X*this.m_delta),e.ClipperOffset.Round(this.m_srcPoly[l].Y+this.m_normals[l].Y*this.m_delta)))},e.Error=function(l){try{throw new Error(l)}catch(d){alert(d.message)}},e.JS={},e.JS.AreaOfPolygon=function(l,d){return d||(d=1),e.Clipper.Area(l)/(d*d)},e.JS.AreaOfPolygons=function(l,d){d||(d=1);for(var x=0,_=0;_<l.length;_++)x+=e.Clipper.Area(l[_]);return x/(d*d)},e.JS.BoundsOfPath=function(l,d){return e.JS.BoundsOfPaths([l],d)},e.JS.BoundsOfPaths=function(l,d){d||(d=1);var x=e.Clipper.GetBounds(l);return x.left/=d,x.bottom/=d,x.right/=d,x.top/=d,x},e.JS.Clean=function(_,d){if(!(_ instanceof Array))return[];var x=_[0]instanceof Array,_=e.JS.Clone(_);if(typeof d!="number"||d===null)return e.Error("Delta is not a number in Clean()."),_;if(_.length===0||_.length===1&&_[0].length===0||d<0)return _;x||(_=[_]);for(var D=_.length,V,$,ee,te,Ce,Xe,Ue,Qe=[],xt=0;xt<D;xt++)if($=_[xt],V=$.length,V!==0){if(V<3){ee=$,Qe.push(ee);continue}for(ee=$,te=d*d,Ce=$[0],Xe=1,Ue=1;Ue<V;Ue++)($[Ue].X-Ce.X)*($[Ue].X-Ce.X)+($[Ue].Y-Ce.Y)*($[Ue].Y-Ce.Y)<=te||(ee[Xe]=$[Ue],Ce=$[Ue],Xe++);Ce=$[Xe-1],($[0].X-Ce.X)*($[0].X-Ce.X)+($[0].Y-Ce.Y)*($[0].Y-Ce.Y)<=te&&Xe--,Xe<V&&ee.splice(Xe,V-Xe),ee.length&&Qe.push(ee)}return!x&&Qe.length?Qe=Qe[0]:!x&&Qe.length===0?Qe=[]:x&&Qe.length===0&&(Qe=[[]]),Qe},e.JS.Clone=function(l){if(!(l instanceof Array))return[];if(l.length===0)return[];if(l.length===1&&l[0].length===0)return[[]];var d=l[0]instanceof Array;d||(l=[l]);var x=l.length,_,D,V,$,ee=new Array(x);for(D=0;D<x;D++){for(_=l[D].length,$=new Array(_),V=0;V<_;V++)$[V]={X:l[D][V].X,Y:l[D][V].Y};ee[D]=$}return d||(ee=ee[0]),ee},e.JS.Lighten=function(l,d){if(!(l instanceof Array))return[];if(typeof d!="number"||d===null)return e.Error("Tolerance is not a number in Lighten()."),e.JS.Clone(l);if(l.length===0||l.length===1&&l[0].length===0||d<0)return e.JS.Clone(l);var x=l[0]instanceof Array;x||(l=[l]);var _,D,V,$,ee,te,Ce,Xe,Ue,Qe,xt,Pt,Tt,Ht,Xn,Br,ss,If=l.length,Lf=d*d,os=[];for(_=0;_<If;_++)if(V=l[_],te=V.length,te!==0){for($=0;$<1e6;$++){for(ee=[],te=V.length,V[te-1].X!==V[0].X||V[te-1].Y!==V[0].Y?(Pt=1,V.push({X:V[0].X,Y:V[0].Y}),te=V.length):Pt=0,xt=[],D=0;D<te-2;D++)Ce=V[D],Ue=V[D+1],Xe=V[D+2],Br=Ce.X,ss=Ce.Y,Tt=Xe.X-Br,Ht=Xe.Y-ss,(Tt!==0||Ht!==0)&&(Xn=((Ue.X-Br)*Tt+(Ue.Y-ss)*Ht)/(Tt*Tt+Ht*Ht),Xn>1?(Br=Xe.X,ss=Xe.Y):Xn>0&&(Br+=Tt*Xn,ss+=Ht*Xn)),Tt=Ue.X-Br,Ht=Ue.Y-ss,Qe=Tt*Tt+Ht*Ht,Qe<=Lf&&(xt[D+1]=1,D++);for(ee.push({X:V[0].X,Y:V[0].Y}),D=1;D<te-1;D++)xt[D]||ee.push({X:V[D].X,Y:V[D].Y});if(ee.push({X:V[te-1].X,Y:V[te-1].Y}),Pt&&V.pop(),xt.length)V=ee;else break}te=ee.length,ee[te-1].X===ee[0].X&&ee[te-1].Y===ee[0].Y&&ee.pop(),ee.length>2&&os.push(ee)}return x||(os=os[0]),typeof os>"u"&&(os=[]),os},e.JS.PerimeterOfPath=function(l,d,x){if(typeof l>"u")return 0;var _=Math.sqrt,D=0,V,$,ee=0,te=0,Ce=0,Xe=0,Ue=l.length;if(Ue<2)return 0;for(d&&(l[Ue]=l[0],Ue++);--Ue;)V=l[Ue],ee=V.X,te=V.Y,$=l[Ue-1],Ce=$.X,Xe=$.Y,D+=_((ee-Ce)*(ee-Ce)+(te-Xe)*(te-Xe));return d&&l.pop(),D/x},e.JS.PerimeterOfPaths=function(l,d,x){x||(x=1);for(var _=0,D=0;D<l.length;D++)_+=e.JS.PerimeterOfPath(l[D],d,x);return _},e.JS.ScaleDownPath=function(l,d){var x,_;for(d||(d=1),x=l.length;x--;)_=l[x],_.X=_.X/d,_.Y=_.Y/d},e.JS.ScaleDownPaths=function(l,d){var x,_,D;for(d||(d=1),x=l.length;x--;)for(_=l[x].length;_--;)D=l[x][_],D.X=D.X/d,D.Y=D.Y/d},e.JS.ScaleUpPath=function(l,d){var x,_,D=Math.round;for(d||(d=1),x=l.length;x--;)_=l[x],_.X=D(_.X*d),_.Y=D(_.Y*d)},e.JS.ScaleUpPaths=function(l,d){var x,_,D,V=Math.round;for(d||(d=1),x=l.length;x--;)for(_=l[x].length;_--;)D=l[x][_],D.X=V(D.X*d),D.Y=V(D.Y*d)},e.ExPolygons=function(){return[]},e.ExPolygon=function(){this.outer=null,this.holes=null},e.JS.AddOuterPolyNodeToExPolygons=function(l,d){var x=new e.ExPolygon;x.outer=l.Contour();var _=l.Childs(),D=_.length;x.holes=new Array(D);var V,$,ee,te,Ce,Xe;for(ee=0;ee<D;ee++)for(V=_[ee],x.holes[ee]=V.Contour(),te=0,Ce=V.Childs(),Xe=Ce.length;te<Xe;te++)$=Ce[te],e.JS.AddOuterPolyNodeToExPolygons($,d);d.push(x)},e.JS.ExPolygonsToPaths=function(l){var d,x,_,D,V=new e.Paths;for(d=0,_=l.length;d<_;d++)for(V.push(l[d].outer),x=0,D=l[d].holes.length;x<D;x++)V.push(l[d].holes[x]);return V},e.JS.PolyTreeToExPolygons=function(l){var d=new e.ExPolygons,x,_,D,V;for(_=0,D=l.Childs(),V=D.length;_<V;_++)x=D[_],e.JS.AddOuterPolyNodeToExPolygons(x,d);return d}})()})(GF);Object.defineProperty(sf,"__esModule",{value:!0});sf.setErrorCallback=void 0;var $F=function(){function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),WF=op,Yt=XF(WF);function XF(r){return r&&r.__esModule?r:{default:r}}function tx(r){if(Array.isArray(r)){for(var e=0,t=Array(r.length);e<r.length;e++)t[e]=r[e];return t}else return Array.from(r)}function HF(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}var ap=void 0;sf.setErrorCallback=function(e){ap=e};Yt.default.Error=function(r){ap&&ap(r)};var Du=new Yt.default.Clipper,Dl=new Yt.default.ClipperOffset,YF=function(){function r(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;HF(this,r),this.paths=e,n&&(this.paths=this.paths.map(jF)),i&&(this.paths=this.paths.map(nx)),s&&(this.paths=this.paths.map(rx)),this.closed=t}return $F(r,[{key:"_clip",value:function(t){var n=new Yt.default.PolyTree;Du.Clear(),Du.AddPaths(this.paths,Yt.default.PolyType.ptSubject,this.closed);for(var i=arguments.length,s=Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];for(var a=0;a<s.length;a++){var u=s[a];Du.AddPaths(u.paths,Yt.default.PolyType.ptClip,u.closed)}Du.Execute(t,n);var f=Yt.default.Clipper.PolyTreeToPaths(n);return new r(f,this.closed)}},{key:"union",value:function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return this._clip.apply(this,[Yt.default.ClipType.ctUnion].concat(n))}},{key:"difference",value:function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return this._clip.apply(this,[Yt.default.ClipType.ctDifference].concat(n))}},{key:"intersect",value:function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return this._clip.apply(this,[Yt.default.ClipType.ctIntersection].concat(n))}},{key:"xor",value:function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return this._clip.apply(this,[Yt.default.ClipType.ctXor].concat(n))}},{key:"offset",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.jointType,s=i===void 0?"jtSquare":i,o=n.endType,a=o===void 0?"etClosedPolygon":o,u=n.miterLimit,f=u===void 0?2:u,h=n.roundPrecision,p=h===void 0?.25:h;Dl.Clear(),Dl.ArcTolerance=p,Dl.MiterLimit=f;var g=new Yt.default.Paths;return Dl.AddPaths(this.paths,Yt.default.JoinType[s],Yt.default.EndType[a]),Dl.Execute(g,t),new r(g,!0)}},{key:"scaleUp",value:function(t){return Yt.default.JS.ScaleUpPaths(this.paths,t),this}},{key:"scaleDown",value:function(t){return Yt.default.JS.ScaleDownPaths(this.paths,t),this}},{key:"firstPoint",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.paths.length!==0){var n=this.paths[0],i=n[0];return t?lp(i):i}}},{key:"lastPoint",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.paths.length!==0){var n=this.paths[this.paths.length-1],i=this.closed?n[0]:n[n.length-1];return t?lp(i):i}}},{key:"areas",value:function(){var t=this,n=this.paths.map(function(i,s){return t.area(s)});return n}},{key:"area",value:function(t){var n=this.paths[t],i=Yt.default.Clipper.Area(n);return i}},{key:"totalArea",value:function(){return this.areas().reduce(function(t,n){return t+n},0)}},{key:"perimeter",value:function(t){var n=this.paths[t],i=Yt.default.JS.PerimeterOfPath(n,this.closed,1);return i}},{key:"perimeters",value:function(){var t=this;return this.paths.map(function(n){return Yt.default.JS.PerimeterOfPath(n,t.closed,1)})}},{key:"totalPerimeter",value:function(){var t=Yt.default.JS.PerimeterOfPaths(this.paths,this.closed);return t}},{key:"reverse",value:function(){return Yt.default.Clipper.ReversePaths(this.paths),this}},{key:"thresholdArea",value:function(t){for(var n=[].concat(tx(this.paths)),i=0;i<n.length;i++){var s=n[i],o=Math.abs(Yt.default.Clipper.Area(s));if(o<t){var a=this.paths.indexOf(s);this.paths.splice(a,1)}}return this}},{key:"join",value:function(t){var n;return(n=this.paths).splice.apply(n,[this.paths.length,0].concat(tx(t.paths))),this}},{key:"clone",value:function(){return new r(Yt.default.JS.Clone(this.paths),this.closed)}},{key:"shapeBounds",value:function(){return Yt.default.JS.BoundsOfPaths(this.paths)}},{key:"pathBounds",value:function(t){var n=this.paths[t];return Yt.default.JS.BoundsOfPath(n)}},{key:"clean",value:function(t){return new r(Yt.default.Clipper.CleanPolygons(this.paths,t),this.closed)}},{key:"orientation",value:function(t){var n=this.paths[t];return Yt.default.Clipper.Orientation(n)}},{key:"pointInShape",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;n&&(t=cp(t)),i&&(t=up(t));for(var s=0;s<this.paths.length;s++){var o=this.pointInPath(s,t),a=this.orientation(s);if(!o&&a||o&&!a)return!1}return!0}},{key:"pointInPath",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;i&&(n=cp(n)),s&&(n=up(n));var o=this.paths[t],a={X:Math.round(n.X),Y:Math.round(n.Y)};return Yt.default.Clipper.PointInPolygon(a,o)>0}},{key:"fixOrientation",value:function(){return this.closed?(this.totalArea()<0&&this.reverse(),this):this}},{key:"simplify",value:function(t){if(this.closed){var n=Yt.default.Clipper.SimplifyPolygons(this.paths,Yt.default.PolyFillType[t]);return new r(n,!0)}else return this}},{key:"separateShapes",value:function(){var t=[];if(this.closed){for(var f=new WeakMap,h=[],p=[],g=0;g<this.paths.length;g++){var b=this.paths[g],C=this.orientation(g);if(C){var y=this.area(g);f.set(b,y),h.push(b)}else p.push(b)}h.sort(function(Z,H){return f.get(Z)-f.get(H)});var w=!0,A=!1,O=void 0;try{for(var E=h[Symbol.iterator](),T;!(w=(T=E.next()).done);w=!0){for(var M=T.value,B=[M],F=this.paths.indexOf(M),I=[].concat(p),N=0;N<I.length;N++){var G=I[N],X=this.pointInPath(F,G[0]);if(X){B.push(G);var J=p.indexOf(G);p.splice(J,1)}}t.push(new r(B,!0))}}catch(Z){A=!0,O=Z}finally{try{!w&&E.return&&E.return()}finally{if(A)throw O}}}else{var n=!0,i=!1,s=void 0;try{for(var o=this.paths[Symbol.iterator](),a;!(n=(a=o.next()).done);n=!0){var u=a.value;t.push(new r([u],!1))}}catch(Z){i=!0,s=Z}finally{try{!n&&o.return&&o.return()}finally{if(i)throw s}}}return t}},{key:"round",value:function(){return new r(this.paths.map(nx),this.closed)}},{key:"removeDuplicates",value:function(){return new r(this.paths.map(rx),this.closed)}},{key:"mapToLower",value:function(){return this.paths.map(ZF)}}]),r}(),qF=sf.default=YF;function ZF(r){return r.map(lp)}function lp(r){var e=r.X,t=r.Y;return{x:e,y:t}}function jF(r){return r.map(cp)}function cp(r){var e=r.x,t=r.y;return{X:e,Y:t}}function nx(r){return r.map(up)}function up(r){var e=r.X,t=r.Y;return{X:Math.round(e),Y:Math.round(t)}}function rx(r){return r.filter(KF)}function KF(r,e,t){if(e===0)return!0;var n=t[e-1];return!(r.X===n.X&&r.Y===n.Y)}function JF(r,e){const t=[];for(const n of r)t.push(n.getPoints(e));return new qF(t,!0,!0,!1,!0)}function QF(r,e){const n=JF(r,e).simplify("pftNonZero"),i=new L2;i.setFromPoints(ix(Va(n.paths)));for(let s=1;s<n.paths.length;s++){const o=dn(n.paths,s),a=new uc(ix(o));i.holes.push(a)}return i}function ix(r){const e=r.map(({X:t,Y:n})=>new je(t,n));return e.push(dn(e,-1).clone()),e}function eN(r,e,t){const n=[];for(const i of r){const s=[];let o=new uc;s.push(o);for(const u of i)switch(u.command){case"moveTo":{const f=dn(u.args,0),h=dn(u.args,1);o.moveTo(f,h);break}case"lineTo":{const f=dn(u.args,0),h=dn(u.args,1);o.lineTo(f,h);break}case"bezierCurveTo":{const f=dn(u.args,0),h=dn(u.args,1),p=dn(u.args,2),g=dn(u.args,3),b=dn(u.args,4),C=dn(u.args,5);o.bezierCurveTo(f,h,p,g,b,C);break}case"quadraticCurveTo":{const f=dn(u.args,0),h=dn(u.args,1),p=dn(u.args,2),g=dn(u.args,3);o.quadraticCurveTo(f,h,p,g);break}case"closePath":o.closePath(),o=new uc,s.push(o)}const a=QF(s,e);n.push(a)}return new Xp(n,{depth:t,bevelEnabled:!1})}function sx(r,e,t,n,i){return bn(()=>{const s=r().trim();if(s.length===0)return null;const o=i.get(s,e(),n(),t());if(o)return o;const a=e().layout(r(),{...t()}),u=1/e().unitsPerEm,f=[];let h=0;a.glyphs.forEach((g,b)=>{const C=dn(a.positions,b);h+=C.xOffset;const y=g.path.translate(h,0);f.push(y.commands),h+=C.xAdvance});const p=eN(f,n(),2);return p.scale(u,u,1),i.save(r(),p),p})}function tN(r,e,t){const n=at.create(),i=at.create(),s=at.create();at.subtract(s,r,e),at.squaredLength(s)===0&&(s[2]=1),at.normalize(s,s),at.cross(n,t,s),at.squaredLength(n)===0&&(Math.abs(t[2])===1?s[0]+=1e-4:s[2]+=1e-4,at.normalize(s,s),at.cross(n,t,s)),at.normalize(n,n),at.cross(i,s,n);const o=Vt.create();return o[0]=n[0],o[4]=i[0],o[8]=s[0],o[1]=n[1],o[5]=i[1],o[9]=s[1],o[2]=n[2],o[6]=i[2],o[10]=s[2],o}function Zw(r){let e=0,t=0,n=0,i=0,[s,o,a]=dn(r,r.length-1);for(const[p,g,b]of r){let C=p-s,y=g-o,w=b-a;const A=Math.hypot(C,y,w);e+=(s+p)/2*A,t+=(o+g)/2*A,n+=(a+b)/2*A,i+=A,s=p,o=g,a=b}const u=e/i,f=t/i,h=n/i;return at.fromValues(u,f,h)}const ox=Mi,io=at,nN=r=>{const e=r.edges;if(e.length<3)throw new Error("slices must have 3 or more edges to calculate a plane");const t=e.reduce((o,a)=>io.add(io.create(),o,a[0]),io.create());io.scale(t,t,1/e.length);let n,i=0;e.forEach(o=>{if(!io.equals(o[0],o[1])){const a=io.squaredDistance(t,o[0]);a>i&&(n=o,i=a)}});const s=e.find(o=>io.equals(o[1],n[0]));return ox.fromPoints(ox.create(),s[0],n[0],n[1])};var jw=nN;const rN=r=>(r||(r=[]),{edges:r});var Bo=rN;const iN=Bo,ax=at,sN=(...r)=>{let e,t;return r.length===1?(e=iN(),t=r[0]):(e=r[0],t=r[1]),e.edges=t.edges.map(n=>[ax.clone(n[0]),ax.clone(n[1])]),e};var oN=sN;const aN=at,lN=(r,e)=>{const t=r.edges,n=e.edges;return t.length!==n.length?!1:t.reduce((s,o,a)=>{const u=n[a],f=aN.squaredDistance(o[0],u[0]);return s&&f<Number.EPSILON},!0)};var cN=lN;const Ou=at,uN=Bo,fN=r=>{if(!Array.isArray(r))throw new Error("the given points must be an array");if(r.length<3)throw new Error("the given points must contain THREE or more points");const e=[];let t=r[r.length-1];return r.forEach(n=>{n.length===2&&e.push([Ou.fromVec2(Ou.create(),t),Ou.fromVec2(Ou.create(),n)]),n.length===3&&e.push([t,n]),t=n}),uN(e)};var hN=fN;const Ru=at,dN=Bo,pN=r=>{if(!Array.isArray(r))throw new Error("the given sides must be an array");const e=[];return r.forEach(t=>{e.push([Ru.fromVec2(Ru.create(),t[0]),Ru.fromVec2(Ru.create(),t[1])])}),dN(e)};var mN=pN;const gN=r=>!!(r&&typeof r=="object"&&"edges"in r&&Array.isArray(r.edges));var vN=gN;const xN=Bo,bN=(...r)=>{let e,t;return r.length===1?(e=xN(),t=r[0]):(e=r[0],t=r[1]),e.edges=t.edges.map(n=>[n[1],n[0]]),e};var yN=bN;const wN=r=>r.edges;var _N=wN;const SN=(r,e)=>{let t,n,i,s,o,a=1;do{n=r,r=null;let u=null;for(o=0;n;){o++,i=n;let f=0;for(t=0;t<a&&(f++,i=i.nextZ,!!i);t++);let h=a;for(;f>0||h>0&&i;)f!==0&&(h===0||!i||e(n)<=e(i))?(s=n,n=n.nextZ,f--):(s=i,i=i.nextZ,h--),u?u.nextZ=s:r=s,s.prevZ=u,u=s;n=i}u.nextZ=null,a*=2}while(o>1);return r};var CN=SN;const PN=CN;let Kw=class{constructor(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}};const MN=(r,e,t,n)=>{const i=new Kw(r,e,t);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i},EN=r=>{r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)};var Jw={Node:Kw,insertNode:MN,removeNode:EN,sortLinked:PN};const AN=(r,e,t,n,i,s,o,a)=>(i-o)*(e-a)-(r-o)*(s-a)>=0&&(r-o)*(n-a)-(t-o)*(e-a)>=0&&(t-o)*(s-a)-(i-o)*(n-a)>=0,TN=(r,e,t)=>(e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y);var nm={area:TN,pointInTriangle:AN};const{Node:lx,insertNode:cx,removeNode:M0}=Jw,{area:xr}=nm,IN=(r,e,t,n,i)=>{let s;if(i===FN(r,e,t,n)>0)for(let o=e;o<t;o+=n)s=cx(o,r[o],r[o+1],s);else for(let o=t-n;o>=e;o-=n)s=cx(o,r[o],r[o+1],s);return s&&of(s,s.next)&&(M0(s),s=s.next),s},Qw=(r,e)=>{if(!r)return r;e||(e=r);let t=r,n;do if(n=!1,!t.steiner&&(of(t,t.next)||xr(t.prev,t,t.next)===0)){if(M0(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e},LN=(r,e,t)=>{let n=r;do{const i=n.prev,s=n.next.next;!of(i,s)&&e_(i,n,n.next,s)&&xc(i,s)&&xc(s,i)&&(e.push(i.i/t),e.push(n.i/t),e.push(s.i/t),M0(n),M0(n.next),n=r=s),n=n.next}while(n!==r);return Qw(n)},DN=(r,e)=>{let t=r;do{if(t.i!==r.i&&t.next.i!==r.i&&t.i!==e.i&&t.next.i!==e.i&&e_(t,t.next,r,e))return!0;t=t.next}while(t!==r);return!1},xc=(r,e)=>xr(r.prev,r,r.next)<0?xr(r,e,r.next)>=0&&xr(r,r.prev,e)>=0:xr(r,e,r.prev)<0||xr(r,r.next,e)<0,ON=(r,e)=>{let t=r,n=!1;const i=(r.x+e.x)/2,s=(r.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==r);return n},RN=(r,e)=>{const t=new lx(r.i,r.x,r.y),n=new lx(e.i,e.x,e.y),i=r.next,s=e.prev;return r.next=e,e.prev=r,t.next=i,i.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n},BN=(r,e)=>r.next.i!==e.i&&r.prev.i!==e.i&&!DN(r,e)&&(xc(r,e)&&xc(e,r)&&ON(r,e)&&(xr(r.prev,r,e.prev)||xr(r,e.prev,e))||of(r,e)&&xr(r.prev,r,r.next)>0&&xr(e.prev,e,e.next)>0),e_=(r,e,t,n)=>{const i=Math.sign(xr(r,e,t)),s=Math.sign(xr(r,e,n)),o=Math.sign(xr(t,n,r)),a=Math.sign(xr(t,n,e));return!!(i!==s&&o!==a||i===0&&Bu(r,t,e)||s===0&&Bu(r,n,e)||o===0&&Bu(t,r,n)||a===0&&Bu(t,e,n))},Bu=(r,e,t)=>e.x<=Math.max(r.x,t.x)&&e.x>=Math.min(r.x,t.x)&&e.y<=Math.max(r.y,t.y)&&e.y>=Math.min(r.y,t.y),FN=(r,e,t,n)=>{let i=0;for(let s=e,o=t-n;s<t;s+=n)i+=(r[o]-r[s])*(r[s+1]+r[o+1]),o=s;return i},of=(r,e)=>r.x===e.x&&r.y===e.y;var t_={cureLocalIntersections:LN,filterPoints:Qw,isValidDiagonal:BN,linkedPolygon:IN,locallyInside:xc,splitPolygon:RN};const{filterPoints:fp,linkedPolygon:NN,locallyInside:kN,splitPolygon:UN}=t_,{area:ux,pointInTriangle:VN}=nm,zN=(r,e,t,n)=>{const i=[];for(let s=0,o=e.length;s<o;s++){const a=e[s]*n,u=s<o-1?e[s+1]*n:r.length,f=NN(r,a,u,n,!1);f===f.next&&(f.steiner=!0),i.push(XN(f))}i.sort((s,o)=>s.x-o.x);for(let s=0;s<i.length;s++)t=GN(i[s],t),t=fp(t,t.next);return t},GN=(r,e)=>{const t=$N(r,e);if(!t)return e;const n=UN(t,r),i=fp(t,t.next);return fp(n,n.next),e===t?i:e},$N=(r,e)=>{let t=e;const n=r.x,i=r.y;let s=-1/0,o;do{if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){const p=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=n&&p>s){if(s=p,p===n){if(i===t.y)return t;if(i===t.next.y)return t.next}o=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!o)return null;if(n===s)return o;const a=o,u=o.x,f=o.y;let h=1/0;t=o;do{if(n>=t.x&&t.x>=u&&n!==t.x&&VN(i<f?n:s,i,u,f,i<f?s:n,i,t.x,t.y)){const p=Math.abs(i-t.y)/(n-t.x);kN(t,r)&&(p<h||p===h&&(t.x>o.x||t.x===o.x&&WN(o,t)))&&(o=t,h=p)}t=t.next}while(t!==a);return o},WN=(r,e)=>ux(r.prev,r,e.prev)<0&&ux(e.next,r,r.next)<0,XN=r=>{let e=r,t=r;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==r);return t};var HN=zN;const YN=HN,{removeNode:qN,sortLinked:ZN}=Jw,{cureLocalIntersections:jN,filterPoints:E0,isValidDiagonal:KN,linkedPolygon:JN,splitPolygon:QN}=t_,{area:co,pointInTriangle:Hl}=nm,ek=(r,e,t=2)=>{const n=e&&e.length,i=n?e[0]*t:r.length;let s=JN(r,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,u,f,h,p;if(n&&(s=YN(r,e,s,t)),r.length>80*t){a=f=r[0],u=h=r[1];for(let g=t;g<i;g+=t){const b=r[g],C=r[g+1];b<a&&(a=b),C<u&&(u=C),b>f&&(f=b),C>h&&(h=C)}p=Math.max(f-a,h-u),p=p!==0?1/p:0}return bc(s,o,t,a,u,p),o},bc=(r,e,t,n,i,s,o)=>{if(!r)return;!o&&s&&ik(r,n,i,s);let a=r,u,f;for(;r.prev!==r.next;){if(u=r.prev,f=r.next,s?nk(r,n,i,s):tk(r)){e.push(u.i/t),e.push(r.i/t),e.push(f.i/t),qN(r),r=f.next,a=f.next;continue}if(r=f,r===a){o?o===1?(r=jN(E0(r),e,t),bc(r,e,t,n,i,s,2)):o===2&&rk(r,e,t,n,i,s):bc(E0(r),e,t,n,i,s,1);break}}},tk=r=>{const e=r.prev,t=r,n=r.next;if(co(e,t,n)>=0)return!1;let i=r.next.next;for(;i!==r.prev;){if(Hl(e.x,e.y,t.x,t.y,n.x,n.y,i.x,i.y)&&co(i.prev,i,i.next)>=0)return!1;i=i.next}return!0},nk=(r,e,t,n)=>{const i=r.prev,s=r,o=r.next;if(co(i,s,o)>=0)return!1;const a=i.x<s.x?i.x<o.x?i.x:o.x:s.x<o.x?s.x:o.x,u=i.y<s.y?i.y<o.y?i.y:o.y:s.y<o.y?s.y:o.y,f=i.x>s.x?i.x>o.x?i.x:o.x:s.x>o.x?s.x:o.x,h=i.y>s.y?i.y>o.y?i.y:o.y:s.y>o.y?s.y:o.y,p=hp(a,u,e,t,n),g=hp(f,h,e,t,n);let b=r.prevZ,C=r.nextZ;for(;b&&b.z>=p&&C&&C.z<=g;){if(b!==r.prev&&b!==r.next&&Hl(i.x,i.y,s.x,s.y,o.x,o.y,b.x,b.y)&&co(b.prev,b,b.next)>=0||(b=b.prevZ,C!==r.prev&&C!==r.next&&Hl(i.x,i.y,s.x,s.y,o.x,o.y,C.x,C.y)&&co(C.prev,C,C.next)>=0))return!1;C=C.nextZ}for(;b&&b.z>=p;){if(b!==r.prev&&b!==r.next&&Hl(i.x,i.y,s.x,s.y,o.x,o.y,b.x,b.y)&&co(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;C&&C.z<=g;){if(C!==r.prev&&C!==r.next&&Hl(i.x,i.y,s.x,s.y,o.x,o.y,C.x,C.y)&&co(C.prev,C,C.next)>=0)return!1;C=C.nextZ}return!0},rk=(r,e,t,n,i,s)=>{let o=r;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&KN(o,a)){let u=QN(o,a);o=E0(o,o.next),u=E0(u,u.next),bc(o,e,t,n,i,s),bc(u,e,t,n,i,s);return}a=a.next}o=o.next}while(o!==r)},ik=(r,e,t,n)=>{let i=r;do i.z===null&&(i.z=hp(i.x,i.y,e,t,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==r);i.prevZ.nextZ=null,i.prevZ=null,ZN(i,s=>s.z)},hp=(r,e,t,n,i)=>(r=32767*(r-t)*i,e=32767*(e-n)*i,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1);var sk=ek;const{NEPS:od}=Kt,ok=(r,e)=>Math.abs(r[0]-e[0])<=od&&Math.abs(r[1]-e[1])<=od&&Math.abs(r[2]-e[2])<=od;var n_=ok;const ak=(r,e,t)=>{let n=t-r[1],i=e[1]-r[1];i<0&&(n=-n,i=-i);let s;return n<=0?s=0:n>=i?s=1:i<1e-10?s=.5:s=n/i,r[0]+s*(e[0]-r[0])};var r_=ak;const lk=(r,e,t,n)=>{if(r[0]===e[0]&&r[1]===e[1]||t[0]===n[0]&&t[1]===n[1])return;const i=(n[1]-t[1])*(e[0]-r[0])-(n[0]-t[0])*(e[1]-r[1]);if(Math.abs(i)<Number.MIN_VALUE)return;const s=((n[0]-t[0])*(r[1]-t[1])-(n[1]-t[1])*(r[0]-t[0]))/i,o=((e[0]-r[0])*(r[1]-t[1])-(e[1]-r[1])*(r[0]-t[0]))/i;if(s<0||s>1||o<0||o>1)return;const a=r[0]+s*(e[0]-r[0]),u=r[1]+s*(e[1]-r[1]);return[a,u]};var ck=lk;const uk=(r,e,t,n,i,s)=>{const a=1/(r*n-e*t);let u=i*n-e*s,f=-i*t+r*s;return u*=a,f*=a,[u,f]};var fk=uk,i_={aboutEqualNormals:n_,area:Ow,cos:Jn.cos,interpolateBetween2DPointsForY:r_,intersect:ck,sin:Jn.sin,solve2Linear:fk};const{area:hk}=i_,{toOutlines:dk}=rn,{arePointsInside:pk}=Nw,mk=r=>{const e=dk(r),t=[],n=[];e.forEach((o,a)=>{const u=hk(o);u<0?n.push(a):u>0&&t.push(a)});const i=[],s=[];return t.forEach((o,a)=>{const u=e[o];i[a]=[],n.forEach((f,h)=>{const p=e[f];pk([p[0]],{vertices:u})&&(i[a].push(f),s[h]||(s[h]=[]),s[h].push(a))})}),n.forEach((o,a)=>{if(s[a]&&s[a].length>1){const u=gk(s[a],f=>i[f].length);s[a].forEach((f,h)=>{h!==u&&(i[f]=i[f].filter(p=>p!==o))})}}),i.map((o,a)=>({solid:e[t[a]],holes:o.map(u=>e[u])}))},gk=(r,e)=>{let t,n;return r.forEach((i,s)=>{const o=e(i);(n===void 0||o<n)&&(t=s,n=o)}),t};var vk=mk;const xk=rn,fx=Mi,bk=Bt,Yn=at,yk=jw,wk=vk;let _k=class{constructor(e){this.plane=yk(e);const t=Yn.orthogonal(Yn.create(),this.plane),n=Yn.cross(Yn.create(),this.plane,t);this.v=Yn.normalize(n,n),this.u=Yn.cross(Yn.create(),this.v,this.plane),this.basisMap=new Map;const i=e.edges.map(o=>o.map(a=>this.to2D(a))),s=xk.create(i);this.roots=wk(s)}to2D(e){const t=bk.fromValues(Yn.dot(e,this.u),Yn.dot(e,this.v));return this.basisMap.set(t,e),t}to3D(e){const t=this.basisMap.get(e);if(t)return t;{console.log("Warning: point not in original slice");const n=Yn.scale(Yn.create(),this.u,e[0]),i=Yn.scale(Yn.create(),this.v,e[1]),s=Yn.scale(Yn.create(),fx,fx[3]),o=Yn.add(n,n,s);return Yn.add(i,i,o)}}};var Sk=_k;const Ck=nn,Pk=sk,Mk=Sk,Ek=r=>{const e=new Mk(r),t=[];return e.roots.forEach(({solid:n,holes:i})=>{let s=n.length;const o=[];i.forEach((p,g)=>{o.push(s),s+=p.length});const a=[n,...i].flat(),u=a.flat(),f=p=>e.to3D(a[p]),h=Pk(u,o);for(let p=0;p<h.length;p+=3){const g=h.slice(p,p+3).map(f);t.push(Ck.fromPointsAndPlane(g,e.plane))}}),t};var Ak=Ek;const hx=at,Tk=r=>r.reduce((e,t)=>e+=`[${hx.toString(t[0])}, ${hx.toString(t[1])}], `,""),Ik=r=>`[${Tk(r.edges)}]`;var Lk=Ik;const Fu=at,Dk=Bo,Ok=(r,e)=>{const t=e.edges.map(n=>[Fu.transform(Fu.create(),n[0],r),Fu.transform(Fu.create(),n[1],r)]);return Dk(t)};var Rk=Ok,af={calculatePlane:jw,clone:oN,create:Bo,equals:cN,fromPoints:hN,fromSides:mN,isA:vN,reverse:yN,toEdges:_N,toPolygons:Ak,toString:Lk,transform:Rk};function dx(r,e){switch(e.type){case"edge":{const{edges:t}=af.fromPoints(r),n=dn(t,e.index);return at.lerp(at.create(),n[0],n[1],.5)}case"vertex":return dn(r,e.index);case"center":return Zw(r)}}function s_(r,e){const t=dn(Rt.toPolygons(r),e.faceIndex),n=nn.toPoints(t),[i,s,o]=Mi.fromPoints(Mi.create(),...n),a=at.fromValues(i,s,o),u=dx(n,e.from),f=dx(n,e.to);let h;e.polygonCenter?h=Zw(n):h=at.lerp(at.create(),u,f,e.t??.5);const p=at.distance(u,f);let g=tN(f,h,a);return g=Vt.rotateX(g,g,-oc),{center:h,length:p,rotationMatrix:g}}const Bk=new qw,Fk=new qw;function Nk(r,e,t,n,i,s){const o=n.text??`${r+1}`,a=o==="6"||o==="9"?"_":"";e=k2(e,`Face ${o}`,!1);const[u]=Q1(e,o,"Text"),[f]=Q1(e,a,"Mark"),[h]=N2(e,!0,"Underscore"),[p]=wr(e,-2,2,.01,.1,"Gap"),[g]=wr(e,0,360,1,0,"Rotation"),[b]=UF(e,-2,2,.01,[0,0],"Text offset"),C=sx(u,i.textFont,i.textFeatures,i.segments,Bk),y=sx(f,i.markFont,i.markFeatures,i.segments,Fk),w=bn(()=>{const I=C();if(I===null)return null;const N=new vc(I,a1);return N.layers.mask=3,Xl({modes:["center","center","center"]},N),N}),A=bn(()=>{const I=y();if(I===null)return null;const N=C(),G=new vc(I,a1);if(G.layers.mask=3,N===null)Xl({modes:["center","center","center"]},G);else{const J=Z2(N).getSize(new K).multiplyScalar(.5);if(h()){const Z=J.y+p();Xl({modes:["center","max","center"]},G),G.position.y-=Z}else{const Z=J.x+p(),H=J.y;Xl({modes:["min","none","center"]},G),G.position.x+=Z,G.position.y-=H}}return G}),O=bn(()=>n.instances.map(I=>s_(t(),I))),E=bn(()=>{const I=Vt.create(),N=n.localRotation??0;return Vt.translate(I,I,[...b(),0]),Vt.rotateZ(I,I,N+zF(g())),I}),T=bn(()=>O().map(I=>{const N=Vt.create(),G=I.length*s()*i.fontScale();return Vt.translate(N,N,I.center),Vt.multiply(N,N,I.rotationMatrix),Vt.scale(N,N,[G,G,i.depth()]),N})),M=bn(()=>{const I=E();return T().map(N=>Vt.multiply(Vt.create(),N,I))}),B=bn(()=>{const I=[];return ex(w(),I),ex(A(),I),I});return bn(()=>{const I=B(),N=[];for(const G of M()){const X=new Gt().fromArray(G);for(const J of I){const Z=J.clone();Z.applyMatrix4(X),Z.updateMatrixWorld(),N.push(Z)}}return N})}function Xr(r,e,t,n){const i=k2(n.folder,t.name,!1),[s]=N2(i,!1,"Hidden"),[o]=wr(i,1,40,1,t.defaultSize,"Size"),[a]=wr(i,.05,3,.05,t.faceScale??.75,"Font scale"),u=t.extraOptions(i,o),f={size:o,...u},h=bn(A=>(A!==void 0&&F2(A)&&A.polygons.buffer.dispose(),t.base(f))),p=bn(()=>Yw.measureDimensions(h())),g=bn(()=>c6(h(),U2)),b=bn(()=>{var A;return((A=t.facesBase)==null?void 0:A.call(t,f))??h()}),C=kk(i,b,t.faces,n.faceOptions,a),y=new a6,w=bn(A=>{if(A==null||A.clear(),s())return null;const O=new Ma;if(n.renderMode()==="preview")return O.add(g(),...C()),O;const E=n.renderOperation()==="union"?W2:X2;let T=g();T.updateMatrixWorld();for(const M of C())M.updateMatrixWorld(),T=y.evaluate(T,M,E);if(n.renderMode()==="stl"){const M=t.faces[0];if(M!==void 0){const B=Va(M.instances),F=s_(b(),B),I=j8(Vt.create(),F.rotationMatrix);T.applyMatrix4(new Gt().fromArray(I)),T.rotation.x+=IP}Xl({modes:["none","none","min"]},T)}return T.layers.mask=3,O.add(T),O});return{x:r,y:e,result:w,dimensions:p}}function kk(r,e,t,n,i){const s=[];let o=0;for(const u of t){const f=Nk(o++,r,e,u,n,i);s.push(f)}return bn(()=>{const u=[];for(const f of s)u.push(...f());return u})}const Uk=(r,e)=>Array.isArray(r)&&r.length>=e?r.every(t=>Number.isFinite(t)):!1,Vk=(r,e)=>Number.isFinite(r)&&r>e,zk=(r,e)=>Number.isFinite(r)&&r>=e;var kn={isNumberArray:Uk,isGT:Vk,isGTE:zk};const{EPS:px,TAU:ha}=Kt,Wi=Bt,Gk=_r,{isGT:$k,isGTE:ad,isNumberArray:Wk}=kn,Xk=r=>{const e={center:[0,0],radius:1,startAngle:0,endAngle:ha,makeTangent:!1,segments:32};let{center:t,radius:n,startAngle:i,endAngle:s,makeTangent:o,segments:a}=Object.assign({},e,r);if(!Wk(t,2))throw new Error("center must be an array of X and Y values");if(!$k(n,0))throw new Error("radius must be greater than zero");if(!ad(i,0))throw new Error("startAngle must be positive");if(!ad(s,0))throw new Error("endAngle must be positive");if(!ad(a,4))throw new Error("segments must be four or more");i=i%ha,s=s%ha;let u=ha;i<s&&(u=s-i),i>s&&(u=s+(ha-i));const f=Math.acos((n*n+n*n-px*px)/(2*n*n)),h=Wi.clone(t);let p;const g=[];if(u<f)p=Wi.fromAngleRadians(Wi.create(),i),Wi.scale(p,p,n),Wi.add(p,p,h),g.push(p);else{const b=Math.max(1,Math.floor(a*(u/ha)))+1;let C=b*.5/u;C>.25&&(C=.25);const y=o?b+2:b;for(let w=0;w<=y;w++){let A=w;o&&(A=(w-1)*(b-2*C)/b+C,A<0&&(A=0),A>b&&(A=b));const O=i+A*(u/b);p=Wi.fromAngleRadians(Wi.create(),O),Wi.scale(p,p,n),Wi.add(p,p,h),g.push(p)}}return Gk.fromPoints({closed:!1},g)};var Hk=Xk;const{EPS:mx,TAU:ys}=Kt,ld=Bt,Yk=rn,{sin:qk,cos:Zk}=Jn,{isGTE:cd,isNumberArray:gx}=kn,jk=r=>{const e={center:[0,0],radius:[1,1],startAngle:0,endAngle:ys,segments:32};let{center:t,radius:n,startAngle:i,endAngle:s,segments:o}=Object.assign({},e,r);if(!gx(t,2))throw new Error("center must be an array of X and Y values");if(!gx(n,2))throw new Error("radius must be an array of X and Y values");if(!n.every(b=>b>0))throw new Error("radius values must be greater than zero");if(!cd(i,0))throw new Error("startAngle must be positive");if(!cd(s,0))throw new Error("endAngle must be positive");if(!cd(o,3))throw new Error("segments must be three or more");i=i%ys,s=s%ys;let a=ys;i<s&&(a=s-i),i>s&&(a=s+(ys-i));const u=Math.min(n[0],n[1]),f=Math.acos((u*u+u*u-mx*mx)/(2*u*u));if(a<f)throw new Error("startAngle and endAngle do not define a significant rotation");o=Math.floor(o*(a/ys));const h=ld.clone(t),p=a/o,g=[];o=a<ys?o+1:o;for(let b=0;b<o;b++){const C=p*b+i,y=ld.fromValues(n[0]*Zk(C),n[1]*qk(C));ld.add(y,h,y),g.push(y)}return a<ys&&g.push(h),Yk.fromPoints(g)};var o_=jk;const{TAU:Kk}=Kt,Jk=o_,{isGT:Qk}=kn,eU=r=>{const e={center:[0,0],radius:1,startAngle:0,endAngle:Kk,segments:32};let{center:t,radius:n,startAngle:i,endAngle:s,segments:o}=Object.assign({},e,r);if(!Qk(n,0))throw new Error("radius must be greater than zero");return n=[n,n],Jk({center:t,radius:n,startAngle:i,endAngle:s,segments:o})};var a_=eU;const tU=Rt,nU=nn,{isNumberArray:vx}=kn,rU=r=>{const e={center:[0,0,0],size:[2,2,2]},{center:t,size:n}=Object.assign({},e,r);if(!vx(t,3))throw new Error("center must be an array of X, Y and Z values");if(!vx(n,3))throw new Error("size must be an array of width, depth and height values");if(!n.every(s=>s>0))throw new Error("size values must be greater than zero");return tU.create([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(s=>{const o=s[0].map(a=>[t[0]+n[0]/2*(2*!!(a&1)-1),t[1]+n[1]/2*(2*!!(a&2)-1),t[2]+n[2]/2*(2*!!(a&4)-1)]);return nU.create(o)}))};var rm=rU;const iU=rm,{isGT:sU}=kn,oU=r=>{const e={center:[0,0,0],size:2};let{center:t,size:n}=Object.assign({},e,r);if(!sU(n,0))throw new Error("size must be greater than zero");return n=[n,n,n],iU({center:t,size:n})};var aU=oU;const{EPS:xx,TAU:ws}=Kt,Gn=at,lU=Rt,cU=nn,{sin:uU,cos:fU}=Jn,{isGT:hU,isGTE:ud,isNumberArray:fd}=kn,dU=r=>{const e={center:[0,0,0],height:2,startRadius:[1,1],startAngle:0,endRadius:[1,1],endAngle:ws,segments:32};let{center:t,height:n,startRadius:i,startAngle:s,endRadius:o,endAngle:a,segments:u}=Object.assign({},e,r);if(!fd(t,3))throw new Error("center must be an array of X, Y and Z values");if(!hU(n,0))throw new Error("height must be greater then zero");if(!fd(i,2))throw new Error("startRadius must be an array of X and Y values");if(!i.every(N=>N>=0))throw new Error("startRadius values must be positive");if(!fd(o,2))throw new Error("endRadius must be an array of X and Y values");if(!o.every(N=>N>=0))throw new Error("endRadius values must be positive");if(o.every(N=>N===0)&&i.every(N=>N===0))throw new Error("at least one radius must be positive");if(!ud(s,0))throw new Error("startAngle must be positive");if(!ud(a,0))throw new Error("endAngle must be positive");if(!ud(u,4))throw new Error("segments must be four or more");s=s%ws,a=a%ws;let f=ws;s<a&&(f=a-s),s>a&&(f=a+(ws-s));const h=Math.min(i[0],i[1],o[0],o[1]),p=Math.acos((h*h+h*h-xx*xx)/(2*h*h));if(f<p)throw new Error("startAngle and endAngle do not define a significant rotation");const g=Math.floor(u*(f/ws)),b=Gn.fromValues(0,0,-(n/2)),C=Gn.fromValues(0,0,n/2),y=Gn.subtract(Gn.create(),C,b),w=Gn.fromValues(1,0,0),A=Gn.fromValues(0,1,0),O=Gn.create(),E=Gn.create(),T=Gn.create(),M=(N,G,X)=>{const J=G*f+s;return Gn.scale(O,w,X[0]*fU(J)),Gn.scale(E,A,X[1]*uU(J)),Gn.add(O,O,E),Gn.scale(T,y,N),Gn.add(T,T,b),Gn.add(Gn.create(),O,T)},B=(...N)=>{const G=N.map(X=>Gn.add(Gn.create(),X,t));return cU.create(G)},F=[];for(let N=0;N<g;N++){const G=N/g;let X=(N+1)/g;f===ws&&N===g-1&&(X=0),o[0]===i[0]&&o[1]===i[1]?(F.push(B(b,M(0,X,o),M(0,G,o))),F.push(B(M(0,X,o),M(1,X,o),M(1,G,o),M(0,G,o))),F.push(B(C,M(1,G,o),M(1,X,o)))):(i[0]>0&&i[1]>0&&F.push(B(b,M(0,X,i),M(0,G,i))),(i[0]>0||i[1]>0)&&F.push(B(M(0,G,i),M(0,X,i),M(1,G,o))),o[0]>0&&o[1]>0&&F.push(B(C,M(1,G,o),M(1,X,o))),(o[0]>0||o[1]>0)&&F.push(B(M(1,G,o),M(0,X,i),M(1,X,o))))}return f<ws&&(F.push(B(b,M(0,0,i),C)),F.push(B(M(0,0,i),M(1,0,o),C)),F.push(B(b,C,M(0,1,i))),F.push(B(M(0,1,i),C,M(1,1,o)))),lU.create(F)};var l_=dU;const pU=l_,{isGT:mU}=kn,gU=r=>{const e={center:[0,0,0],height:2,radius:1,segments:32},{center:t,height:n,radius:i,segments:s}=Object.assign({},e,r);if(!mU(i,0))throw new Error("radius must be greater than zero");return pU({center:t,height:n,startRadius:[i,i],endRadius:[i,i],segments:s})};var vU=gU;const{TAU:bx}=Kt,ht=at,xU=Rt,yx=nn,{sin:wx,cos:_x}=Jn,{isGTE:bU,isNumberArray:Sx}=kn,yU=r=>{const e={center:[0,0,0],radius:[1,1,1],segments:32,axes:[[1,0,0],[0,-1,0],[0,0,1]]},{center:t,radius:n,segments:i,axes:s}=Object.assign({},e,r);if(!Sx(t,3))throw new Error("center must be an array of X, Y and Z values");if(!Sx(n,3))throw new Error("radius must be an array of X, Y and Z values");if(!n.every(C=>C>0))throw new Error("radius values must be greater than zero");if(!bU(i,4))throw new Error("segments must be four or more");const o=ht.scale(ht.create(),ht.normalize(ht.create(),s[0]),n[0]),a=ht.scale(ht.create(),ht.normalize(ht.create(),s[1]),n[1]),u=ht.scale(ht.create(),ht.normalize(ht.create(),s[2]),n[2]),f=Math.round(i/4);let h;const p=[],g=ht.create(),b=ht.create();for(let C=0;C<=i;C++){const y=bx*C/i,w=ht.add(ht.create(),ht.scale(g,o,_x(y)),ht.scale(b,a,wx(y)));if(C>0){let A,O;for(let E=0;E<=f;E++){const T=bx/4*E/f,M=_x(T),B=wx(T);if(E>0){let F=[],I;I=ht.subtract(ht.create(),ht.scale(g,h,A),ht.scale(b,u,O)),F.push(ht.add(I,I,t)),I=ht.subtract(ht.create(),ht.scale(g,w,A),ht.scale(b,u,O)),F.push(ht.add(I,I,t)),E<f&&(I=ht.subtract(ht.create(),ht.scale(g,w,M),ht.scale(b,u,B)),F.push(ht.add(I,I,t))),I=ht.subtract(ht.create(),ht.scale(g,h,M),ht.scale(b,u,B)),F.push(ht.add(I,I,t)),p.push(yx.create(F)),F=[],I=ht.add(ht.create(),ht.scale(g,h,A),ht.scale(b,u,O)),F.push(ht.add(ht.create(),t,I)),I=ht.add(I,ht.scale(g,w,A),ht.scale(b,u,O)),F.push(ht.add(ht.create(),t,I)),E<f&&(I=ht.add(I,ht.scale(g,w,M),ht.scale(b,u,B)),F.push(ht.add(ht.create(),t,I))),I=ht.add(I,ht.scale(g,h,M),ht.scale(b,u,B)),F.push(ht.add(ht.create(),t,I)),F.reverse(),p.push(yx.create(F))}A=M,O=B}}h=w}return xU.create(p)};var c_=yU;const wU=Rt,_U=nn,{isNumberArray:Cx}=kn,SU=r=>{const e={points:[],faces:[],colors:void 0,orientation:"outward"},{points:t,faces:n,colors:i,orientation:s}=Object.assign({},e,r);if(!(Array.isArray(t)&&Array.isArray(n)))throw new Error("points and faces must be arrays");if(t.length<3)throw new Error("three or more points are required");if(n.length<1)throw new Error("one or more faces are required");if(i){if(!Array.isArray(i))throw new Error("colors must be an array");if(i.length!==n.length)throw new Error("faces and colors must have the same length")}t.forEach((a,u)=>{if(!Cx(a,3))throw new Error(`point ${u} must be an array of X, Y, Z values`)}),n.forEach((a,u)=>{if(a.length<3)throw new Error(`face ${u} must contain 3 or more indexes`);if(!Cx(a,a.length))throw new Error(`face ${u} must be an array of numbers`)}),s!=="outward"&&n.forEach(a=>a.reverse());const o=n.map((a,u)=>{const f=_U.create(a.map(h=>t[h]));return i&&i[u]&&(f.color=i[u]),f});return wU.create(o)};var u_=SU;const Px=Vt,Mx=at,CU=Rt,PU=u_,{isGT:MU,isGTE:EU}=kn,AU=r=>{const e={radius:1,frequency:6};let{radius:t,frequency:n}=Object.assign({},e,r);if(!MU(t,0))throw new Error("radius must be greater than zero");if(!EU(n,6))throw new Error("frequency must be six or more");n=Math.floor(n/6);const i=[[.850651,0,-.525731],[.850651,-0,.525731],[-.850651,-0,.525731],[-.850651,0,-.525731],[0,-.525731,.850651],[0,.525731,.850651],[0,.525731,-.850651],[0,-.525731,-.850651],[-.525731,-.850651,-0],[.525731,-.850651,-0],[.525731,.850651,0],[-.525731,.850651,0]],s=[[0,9,1],[1,10,0],[6,7,0],[10,6,0],[7,9,0],[5,1,4],[4,1,9],[5,10,1],[2,8,3],[3,11,2],[2,5,4],[4,8,2],[2,11,5],[3,7,6],[6,11,3],[8,7,3],[9,8,4],[11,10,5],[10,11,6],[8,9,7]],o=(g,b,C)=>{const y=g[0],w=g[1],A=g[2];let O=C;const E=[],T=[];for(let M=0;M<b;M++)for(let B=0;B<b-M;B++){const F=M/b,I=(M+1)/b,N=B/(b-M),G=(B+1)/(b-M),X=b-M-1?B/(b-M-1):1,J=[];J[0]=a(a(y,w,N),A,F),J[1]=a(a(y,w,G),A,F),J[2]=a(a(y,w,X),A,I);for(let Z=0;Z<3;Z++){const H=Mx.length(J[Z]);for(let ne=0;ne<3;ne++)J[Z][ne]/=H}if(E.push(J[0],J[1],J[2]),T.push([O,O+1,O+2]),O+=3,B<b-M-1){const Z=b-M-1?(B+1)/(b-M-1):1;J[0]=a(a(y,w,G),A,F),J[1]=a(a(y,w,Z),A,I),J[2]=a(a(y,w,X),A,I);for(let H=0;H<3;H++){const ne=Mx.length(J[H]);for(let ie=0;ie<3;ie++)J[H][ie]/=ne}E.push(J[0],J[1],J[2]),T.push([O,O+1,O+2]),O+=3}}return{points:E,triangles:T,offset:O}},a=(g,b,C)=>{const y=1-C,w=[];for(let A=0;A<3;A++)w[A]=g[A]*y+b[A]*C;return w};let u=[],f=[],h=0;for(let g=0;g<s.length;g++){const b=o([i[s[g][0]],i[s[g][1]],i[s[g][2]]],n,h);u=u.concat(b.points),f=f.concat(b.triangles),h=b.offset}let p=PU({points:u,faces:f,orientation:"inward"});return t!==1&&(p=CU.transform(Px.fromScaling(Px.create(),[t,t,t]),p)),p};var TU=AU;const IU=_r,LU=r=>{if(!Array.isArray(r))throw new Error("points must be an array");return IU.fromPoints({},r)};var DU=LU;const hd=rn,OU=r=>{const e={points:[],paths:[]},{points:t,paths:n}=Object.assign({},e,r);if(!(Array.isArray(t)&&Array.isArray(n)))throw new Error("points and paths must be arrays");let i=t;Array.isArray(t[0])&&(Array.isArray(t[0][0])||(i=[t])),i.forEach((u,f)=>{if(!Array.isArray(u))throw new Error("list of points "+f+" must be an array");if(u.length<3)throw new Error("list of points "+f+" must contain three or more points");u.forEach((h,p)=>{if(!Array.isArray(h))throw new Error("list of points "+f+", point "+p+" must be an array");if(h.length<2)throw new Error("list of points "+f+", point "+p+" must contain by X and Y values")})});let s=n;if(n.length===0){let u=0;s=i.map(f=>f.map(h=>u++))}const o=[];i.forEach(u=>u.forEach(f=>o.push(f)));let a=[];return s.forEach(u=>{const f=u.map(p=>o[p]),h=hd.fromPoints(f);a=a.concat(hd.toSides(h))}),hd.create(a)};var RU=OU;const _s=Bt,BU=rn,{isNumberArray:Ex}=kn,FU=r=>{const e={center:[0,0],size:[2,2]},{center:t,size:n}=Object.assign({},e,r);if(!Ex(t,2))throw new Error("center must be an array of X and Y values");if(!Ex(n,2))throw new Error("size must be an array of X and Y values");if(!n.every(a=>a>0))throw new Error("size values must be greater than zero");const i=[n[0]/2,n[1]/2],s=[i[0],-i[1]],o=[_s.subtract(_s.create(),t,i),_s.add(_s.create(),t,s),_s.add(_s.create(),t,i),_s.subtract(_s.create(),t,s)];return BU.fromPoints(o)};var f_=FU;const{EPS:l0,TAU:Ol}=Kt,dd=Bt,En=at,NU=Rt,$a=nn,{sin:kU,cos:UU}=Jn,{isGT:VU,isGTE:zU,isNumberArray:Ax}=kn,Tx=(r,e,t,n,i,s)=>{const o=Ol/4*i/n,a=UU(o),u=kU(o),f=n-i;let h=t*a,p=e[2]-(t-t*u);s||(p=t-t*u-e[2]),h=h>l0?h:0;const g=En.add(En.create(),r,[e[0]-t,e[1]-t,p]),b=En.add(En.create(),r,[t-e[0],e[1]-t,p]),C=En.add(En.create(),r,[t-e[0],t-e[1],p]),y=En.add(En.create(),r,[e[0]-t,t-e[1],p]),w=[],A=[],O=[],E=[];for(let T=0;T<=f;T++){const M=f>0?Ol/4*T/f:0,B=dd.fromAngleRadians(dd.create(),M);dd.scale(B,B,h);const F=En.fromVec2(En.create(),B);w.push(En.add(En.create(),g,F)),En.rotateZ(F,F,[0,0,0],Ol/4),A.push(En.add(En.create(),b,F)),En.rotateZ(F,F,[0,0,0],Ol/4),O.push(En.add(En.create(),C,F)),En.rotateZ(F,F,[0,0,0],Ol/4),E.push(En.add(En.create(),y,F))}return s?[w,A,O,E]:(w.reverse(),A.reverse(),O.reverse(),E.reverse(),[E,O,A,w])},Ix=(r,e)=>{const t=[];for(let n=0;n<r.length;n++){const i=r[n],s=e[n];for(let o=0;o<i.length-1;o++)t.push($a.create([i[o],i[o+1],s[o]])),o<s.length-1&&t.push($a.create([s[o],i[o+1],s[o+1]]))}return t},Lx=(r,e)=>{const t=[];for(let n=0;n<r.length;n++){let i=r[n],s=e[n];const o=i[i.length-1],a=s[s.length-1],u=(n+1)%r.length;i=r[u],s=e[u];const f=i[0],h=s[0];t.push($a.create([o,f,h,a]))}return t},GU=(r,e)=>{r=[r[3],r[2],r[1],r[0]],r=r.map(s=>s.slice().reverse());const t=[];r.forEach(s=>{s.forEach(o=>t.push(o))});const n=[];e.forEach(s=>{s.forEach(o=>n.push(o))});const i=[];for(let s=0;s<n.length;s++){const o=(s+1)%n.length;i.push($a.create([t[s],t[o],n[o],n[s]]))}return i},$U=r=>{const e={center:[0,0,0],size:[2,2,2],roundRadius:.2,segments:32};let{center:t,size:n,roundRadius:i,segments:s}=Object.assign({},e,r);if(!Ax(t,3))throw new Error("center must be an array of X, Y and Z values");if(!Ax(n,3))throw new Error("size must be an array of X, Y and Z values");if(!n.every(f=>f>0))throw new Error("size values must be greater than zero");if(!VU(i,0))throw new Error("roundRadius must be greater than zero");if(!zU(s,4))throw new Error("segments must be four or more");if(n=n.map(f=>f/2),i>n[0]-l0||i>n[1]-l0||i>n[2]-l0)throw new Error("roundRadius must be smaller then the radius of all dimensions");s=Math.floor(s/4);let o=null,a=null,u=[];for(let f=0;f<=s;f++){const h=Tx(t,n,i,s,f,!0),p=Tx(t,n,i,s,f,!1);if(f===0&&(u=u.concat(GU(p,h))),o&&(u=u.concat(Ix(o,h),Lx(o,h))),a&&(u=u.concat(Ix(a,p),Lx(a,p))),f===s){let g=h.map(b=>b[0]);u.push($a.create(g)),g=p.map(b=>b[0]),u.push($a.create(g))}o=h,a=p}return NU.create(u)};var WU=$U;const{EPS:Dx,TAU:Ox}=Kt,et=at,XU=Rt,HU=nn,{sin:Rx,cos:Bx}=Jn,{isGT:pd,isGTE:YU,isNumberArray:qU}=kn,ZU=r=>{const e={center:[0,0,0],height:2,radius:1,roundRadius:.2,segments:32},{center:t,height:n,radius:i,roundRadius:s,segments:o}=Object.assign({},e,r);if(!qU(t,3))throw new Error("center must be an array of X, Y and Z values");if(!pd(n,0))throw new Error("height must be greater then zero");if(!pd(i,0))throw new Error("radius must be greater then zero");if(!pd(s,0))throw new Error("roundRadius must be greater then zero");if(s>i-Dx)throw new Error("roundRadius must be smaller then the radius");if(!YU(o,4))throw new Error("segments must be four or more");const a=[0,0,-(n/2)],u=[0,0,n/2],f=et.subtract(et.create(),u,a),h=et.length(f);if(2*s>h-Dx)throw new Error("height must be larger than twice roundRadius");let p;Math.abs(f[0])>Math.abs(f[1])?p=et.fromValues(0,1,0):p=et.fromValues(1,0,0);const g=et.scale(et.create(),et.normalize(et.create(),f),s),b=et.scale(et.create(),et.normalize(et.create(),et.cross(et.create(),g,p)),i),C=et.scale(et.create(),et.normalize(et.create(),et.cross(et.create(),b,g)),i);et.add(a,a,g),et.subtract(u,u,g);const y=Math.floor(.25*o),w=B=>{const F=B.map(I=>et.add(I,I,t));return HU.create(F)},A=[],O=et.create(),E=et.create();let T;for(let B=0;B<=o;B++){const F=Ox*B/o,I=et.add(et.create(),et.scale(O,b,Bx(F)),et.scale(E,C,Rx(F)));if(B>0){let N=[];N.push(et.add(et.create(),a,I)),N.push(et.add(et.create(),a,T)),N.push(et.add(et.create(),u,T)),N.push(et.add(et.create(),u,I)),A.push(w(N));let G,X;for(let J=0;J<=y;J++){const Z=Ox/4*J/y,H=Bx(Z),ne=Rx(Z);if(J>0){N=[];let ie;ie=et.add(et.create(),a,et.subtract(O,et.scale(O,T,G),et.scale(E,g,X))),N.push(ie),ie=et.add(et.create(),a,et.subtract(O,et.scale(O,I,G),et.scale(E,g,X))),N.push(ie),J<y&&(ie=et.add(et.create(),a,et.subtract(O,et.scale(O,I,H),et.scale(E,g,ne))),N.push(ie)),ie=et.add(et.create(),a,et.subtract(O,et.scale(O,T,H),et.scale(E,g,ne))),N.push(ie),A.push(w(N)),N=[],ie=et.add(et.create(),et.scale(O,T,G),et.scale(E,g,X)),et.add(ie,ie,u),N.push(ie),ie=et.add(et.create(),et.scale(O,I,G),et.scale(E,g,X)),et.add(ie,ie,u),N.push(ie),J<y&&(ie=et.add(et.create(),et.scale(O,I,H),et.scale(E,g,ne)),et.add(ie,ie,u),N.push(ie)),ie=et.add(et.create(),et.scale(O,T,H),et.scale(E,g,ne)),et.add(ie,ie,u),N.push(ie),N.reverse(),A.push(w(N))}G=H,X=ne}}T=I}return XU.create(A)};var jU=ZU;const{EPS:Fx,TAU:Nu}=Kt,fn=Bt,KU=rn,{isGT:JU,isGTE:QU,isNumberArray:Nx}=kn,eV=r=>{const e={center:[0,0],size:[2,2],roundRadius:.2,segments:32};let{center:t,size:n,roundRadius:i,segments:s}=Object.assign({},e,r);if(!Nx(t,2))throw new Error("center must be an array of X and Y values");if(!Nx(n,2))throw new Error("size must be an array of X and Y values");if(!n.every(y=>y>0))throw new Error("size values must be greater than zero");if(!JU(i,0))throw new Error("roundRadius must be greater than zero");if(!QU(s,4))throw new Error("segments must be four or more");if(n=n.map(y=>y/2),i>n[0]-Fx||i>n[1]-Fx)throw new Error("roundRadius must be smaller then the radius of all dimensions");const o=Math.floor(s/4),a=fn.add(fn.create(),t,[n[0]-i,n[1]-i]),u=fn.add(fn.create(),t,[i-n[0],n[1]-i]),f=fn.add(fn.create(),t,[i-n[0],i-n[1]]),h=fn.add(fn.create(),t,[n[0]-i,i-n[1]]),p=[],g=[],b=[],C=[];for(let y=0;y<=o;y++){const w=Nu/4*y/o,A=fn.fromAngleRadians(fn.create(),w);fn.scale(A,A,i),p.push(fn.add(fn.create(),a,A)),fn.rotate(A,A,fn.create(),Nu/4),g.push(fn.add(fn.create(),u,A)),fn.rotate(A,A,fn.create(),Nu/4),b.push(fn.add(fn.create(),f,A)),fn.rotate(A,A,fn.create(),Nu/4),C.push(fn.add(fn.create(),h,A))}return KU.fromPoints(p.concat(g,b,C))};var tV=eV;const nV=c_,{isGT:rV}=kn,iV=r=>{const e={center:[0,0,0],radius:1,segments:32,axes:[[1,0,0],[0,-1,0],[0,0,1]]};let{center:t,radius:n,segments:i,axes:s}=Object.assign({},e,r);if(!rV(n,0))throw new Error("radius must be greater than zero");return n=[n,n,n],nV({center:t,radius:n,segments:i,axes:s})};var sV=iV;const oV=f_,{isGT:aV}=kn,lV=r=>{const e={center:[0,0],size:2};let{center:t,size:n}=Object.assign({},e,r);if(!aV(n,0))throw new Error("size must be greater than zero");return n=[n,n],oV({center:t,size:n})};var cV=lV;const{TAU:h_}=Kt,Yl=Bt,uV=rn,{isGT:fV,isGTE:ku,isNumberArray:hV}=kn,dV=(r,e)=>r>0&&e>1&&e<r/2?Math.cos(Math.PI*e/r)/Math.cos(Math.PI*(e-1)/r):0,kx=(r,e,t,n)=>{const i=h_/r,s=[];for(let o=0;o<r;o++){const a=Yl.fromAngleRadians(Yl.create(),i*o+t);Yl.scale(a,a,e),Yl.add(a,n,a),s.push(a)}return s},pV=r=>{const e={center:[0,0],vertices:5,outerRadius:1,innerRadius:0,density:2,startAngle:0};let{center:t,vertices:n,outerRadius:i,innerRadius:s,density:o,startAngle:a}=Object.assign({},e,r);if(!hV(t,2))throw new Error("center must be an array of X and Y values");if(!ku(n,2))throw new Error("vertices must be two or more");if(!fV(i,0))throw new Error("outerRadius must be greater than zero");if(!ku(s,0))throw new Error("innerRadius must be greater than zero");if(!ku(a,0))throw new Error("startAngle must be greater than zero");if(n=Math.floor(n),o=Math.floor(o),a=a%h_,s===0){if(!ku(o,2))throw new Error("density must be two or more");s=i*dV(n,o)}const u=Yl.clone(t),f=kx(n,i,a,u),h=kx(n,s,a+Math.PI/n,u),p=[];for(let g=0;g<n;g++)p.push(f[g]),p.push(h[g]);return uV.fromPoints(p)};var mV=pV;const gV=Jt,Ux=Vt,Vx=Mi,zx=rn,Gx=Rt,$x=_r,lf=(r,...e)=>{const t={origin:[0,0,0],normal:[0,0,1]},{origin:n,normal:i}=Object.assign({},t,r);if(e=gV(e),e.length===0)throw new Error("wrong number of arguments");const s=Vx.fromNormalAndPoint(Vx.create(),i,n);if(Number.isNaN(s[0]))throw new Error("the given origin and normal do not define a proper plane");const o=Ux.mirrorByPlane(Ux.create(),s),a=e.map(u=>$x.isA(u)?$x.transform(o,u):zx.isA(u)?zx.transform(o,u):Gx.isA(u)?Gx.transform(o,u):u);return a.length===1?a[0]:a},vV=(...r)=>lf({normal:[1,0,0]},r),xV=(...r)=>lf({normal:[0,1,0]},r),bV=(...r)=>lf({normal:[0,0,1]},r);var ql={mirror:lf,mirrorX:vV,mirrorY:xV,mirrorZ:bV};const Wx=at,yV=Bo,wV=r=>{if(!r.edges)return r;let e=r.edges;const t=new Map,n=new Map;e=e.filter(o=>!Wx.equals(o[0],o[1])),e.forEach(o=>{const a=o[0].toString(),u=o[1].toString();t.set(a,o[0]),t.set(u,o[1]),n.set(a,(n.get(a)||0)+1),n.set(u,(n.get(u)||0)-1)});const i=[],s=[];return n.forEach((o,a)=>{o<0&&i.push(a),o>0&&s.push(a)}),i.forEach(o=>{const a=t.get(o);let u=1/0,f;s.forEach(h=>{const p=t.get(h),g=Wx.distance(a,p);g<u&&(u=g,f=p)}),console.warn(`slice.repair: repairing vertex gap ${a} to ${f} distance ${u}`),e=e.map(h=>h[0].toString()===o?[f,h[1]]:h[1].toString()===o?[h[0],f]:h)}),yV(e)};var _V=wV;const{EPS:Xx}=Kt,da=at,Uu=nn,Hx=af,dp=(r,e)=>r===e?r:r<e?dp(e,r):e===1?1:e===0?r:dp(e,r%e),SV=(r,e)=>r*e/dp(r,e),Yx=(r,e)=>{const t=r/e.length;if(t===1)return e;const n=da.fromValues(t,t,t),i=[];return e.forEach(s=>{const o=da.subtract(da.create(),s[1],s[0]);da.divide(o,o,n);let a=s[0];for(let u=1;u<=t;++u){const f=da.add(da.create(),a,o);i.push([a,f]),a=f}}),i},qx=Xx*Xx/2*Math.sin(Math.PI/3),CV=(r,e)=>{let t=Hx.toEdges(r),n=Hx.toEdges(e);if(t.length!==n.length){const s=SV(t.length,n.length);s!==t.length&&(t=Yx(s,t)),s!==n.length&&(n=Yx(s,n))}const i=[];return t.forEach((s,o)=>{const a=n[o],u=Uu.create([s[0],s[1],a[1]]),f=Uu.measureArea(u);Number.isFinite(f)&&f>qx&&i.push(u);const h=Uu.create([s[0],a[1],a[0]]),p=Uu.measureArea(h);Number.isFinite(p)&&p>qx&&i.push(h)}),i};var PV=CV;const Zx=Vt,jx=rn,MV=Rt,pp=nn,Ls=af,EV=_V,Kx=PV,AV=(r,e,t)=>{let n=null;return jx.isA(t)&&(n=Ls.fromSides(jx.toSides(t))),pp.isA(t)&&(n=Ls.fromPoints(pp.toPoints(t))),r===0||r===1?Ls.transform(Zx.fromTranslation(Zx.create(),[0,0,r]),n):null},TV=(r,e)=>{const t={numberOfSlices:2,capStart:!0,capEnd:!0,close:!1,repair:!0,callback:AV},{numberOfSlices:n,capStart:i,capEnd:s,close:o,repair:a,callback:u}=Object.assign({},t,r);if(n<2)throw new Error("numberOfSlices must be 2 or more");a&&(e=EV(e));const f=n-1;let h=null,p=null,g=null,b=[];for(let C=0;C<n;C++){const y=u(C/f,C,e);if(y){if(!Ls.isA(y))throw new Error("the callback function must return slice objects");if(Ls.toEdges(y).length===0)throw new Error("the callback function must return slices with one or more edges");g&&(b=b.concat(Kx(g,y))),C===0&&(h=y),C===n-1&&(p=y),g=y}}if(s){const C=Ls.toPolygons(p);b=b.concat(C)}if(i){const C=Ls.toPolygons(h).map(pp.invert);b=b.concat(C)}return!i&&!s&&o&&!Ls.equals(p,h)&&(b=b.concat(Kx(p,h))),MV.create(b)};var IV=TV;const{TAU:Tr}=Kt,Rl=Vt,{mirrorX:LV}=ql,Bl=rn,md=af,DV=IV,OV=(r,e)=>{const t={segments:12,startAngle:0,angle:Tr,overflow:"cap"};let{segments:n,startAngle:i,angle:s,overflow:o}=Object.assign({},t,r);if(n<3)throw new Error("segments must be greater then 3");i=Math.abs(i)>Tr?i%Tr:i,s=Math.abs(s)>Tr?s%Tr:s;let a=i+s;if(a=Math.abs(a)>Tr?a%Tr:a,a<i){const O=i;i=a,a=O}let u=a-i;if(u<=0&&(u=Tr),Math.abs(u)<Tr){const O=Tr/n;n=Math.floor(Math.abs(u)/O),Math.abs(u)>n*O&&n++}let f=Bl.toSides(e);if(f.length===0)throw new Error("the given geometry cannot be empty");const h=f.filter(O=>O[0][0]<0),p=f.filter(O=>O[0][0]>=0);h.length>0&&p.length>0&&o==="cap"&&(h.length>p.length?(f=f.map(O=>{let E=O[0],T=O[1];return E=[Math.min(E[0],0),E[1]],T=[Math.min(T[0],0),T[1]],[E,T]}),e=Bl.reverse(Bl.create(f)),e=LV(e)):p.length>=h.length&&(f=f.map(O=>{let E=O[0],T=O[1];return E=[Math.max(E[0],0),E[1]],T=[Math.max(T[0],0),T[1]],[E,T]}),e=Bl.create(f)));const b=u/n,C=Math.abs(u)<Tr,y=md.fromSides(Bl.toSides(e));md.reverse(y,y);const w=Rl.create(),A=(O,E,T)=>{let M=b*E+i;return u===Tr&&E===n&&(M=i),Rl.multiply(w,Rl.fromZRotation(w,M),Rl.fromXRotation(Rl.create(),Tr/4)),md.transform(w,T)};return r={numberOfSlices:n+1,capStart:C,capEnd:C,close:!C,callback:A},DV(r,y)};var RV=OV;const BV=Jt,Jx=Vt,Qx=rn,eb=Rt,tb=_r,cf=(r,...e)=>{if(!Array.isArray(r))throw new Error("angles must be an array");if(e=BV(e),e.length===0)throw new Error("wrong number of arguments");for(r=r.slice();r.length<3;)r.push(0);const t=r[2],n=r[1],i=r[0],s=Jx.fromTaitBryanRotation(Jx.create(),t,n,i),o=e.map(a=>tb.isA(a)?tb.transform(s,a):Qx.isA(a)?Qx.transform(s,a):eb.isA(a)?eb.transform(s,a):a);return o.length===1?o[0]:o},FV=(r,...e)=>cf([r,0,0],e),NV=(r,...e)=>cf([0,r,0],e),kV=(r,...e)=>cf([0,0,r],e);var Zl={rotate:cf,rotateX:FV,rotateY:NV,rotateZ:kV};const UV=Jt,nb=Vt,rb=rn,ib=Rt,sb=_r,uf=(r,...e)=>{if(!Array.isArray(r))throw new Error("offset must be an array");if(e=UV(e),e.length===0)throw new Error("wrong number of arguments");for(r=r.slice();r.length<3;)r.push(0);const t=nb.fromTranslation(nb.create(),r),n=e.map(i=>sb.isA(i)?sb.transform(t,i):rb.isA(i)?rb.transform(t,i):ib.isA(i)?ib.transform(t,i):i);return n.length===1?n[0]:n},VV=(r,...e)=>uf([r,0,0],e),zV=(r,...e)=>uf([0,r,0],e),GV=(r,...e)=>uf([0,0,r],e);var ho={translate:uf,translateX:VV,translateY:zV,translateZ:GV};const{TAU:$V}=Kt,WV=RV,{rotate:XV}=Zl,{translate:HV}=ho,YV=a_,{isGT:gd,isGTE:vd}=kn,qV=r=>{const e={innerRadius:1,innerSegments:32,outerRadius:4,outerSegments:32,innerRotation:0,startAngle:0,outerRotation:$V},{innerRadius:t,innerSegments:n,outerRadius:i,outerSegments:s,innerRotation:o,startAngle:a,outerRotation:u}=Object.assign({},e,r);if(!gd(t,0))throw new Error("innerRadius must be greater than zero");if(!vd(n,3))throw new Error("innerSegments must be three or more");if(!gd(i,0))throw new Error("outerRadius must be greater than zero");if(!vd(s,3))throw new Error("outerSegments must be three or more");if(!vd(a,0))throw new Error("startAngle must be positive");if(!gd(u,0))throw new Error("outerRotation must be greater than zero");if(t>=i)throw new Error("inner circle is two large to rotate about the outer circle");let f=YV({radius:t,segments:n});return o!==0&&(f=XV([0,0,o],f)),f=HV([i,0],f),WV({startAngle:a,angle:u,segments:s},f)};var ZV=qV;const{NEPS:Wa}=Kt,Fl=Bt,jV=rn,{isNumberArray:KV}=kn,mp=(r,e,t)=>Math.acos((r*r+e*e-t*t)/(2*r*e)),JV=(r,e,t)=>e>Wa?Math.sqrt(r*r+t*t-2*r*t*Math.cos(e)):Math.sqrt((r-t)*(r-t)+r*t*e*e*(1-e*e/12)),QV=r=>{if(Math.abs(r[0]+r[1]+r[2]-Math.PI)>Wa)throw new Error("AAA triangles require angles that sum to PI");const t=r[0],n=r[1],i=Math.PI-t-n,s=1,o=s/Math.sin(i)*Math.sin(t),a=s/Math.sin(i)*Math.sin(n);return el(t,n,i,o,a,s)},ez=r=>{const e=r[0],t=r[1],n=Math.PI+Wa-e-t;if(n<Wa)throw new Error("AAS triangles require angles that sum to PI");const i=r[2],s=i/Math.sin(e)*Math.sin(t),o=i/Math.sin(e)*Math.sin(n);return el(e,t,n,i,s,o)},tz=r=>{const e=r[0],t=r[2],n=Math.PI+Wa-e-t;if(n<Wa)throw new Error("ASA triangles require angles that sum to PI");const i=r[1],s=i/Math.sin(n)*Math.sin(e),o=i/Math.sin(n)*Math.sin(t);return el(e,t,n,s,o,i)},nz=r=>{const e=r[0],t=r[1],n=r[2],i=JV(e,t,n),s=mp(i,e,n),o=Math.PI-s-t;return el(s,t,o,n,i,e)},rz=r=>{const e=r[0],t=r[1],n=r[2],i=Math.asin(t*Math.sin(n)/e),s=Math.PI-i-n,o=e/Math.sin(n)*Math.sin(s);return el(i,s,n,t,o,e)},iz=r=>{const e=r[1],t=r[2],n=r[0];if(e+t<=n||t+n<=e||n+e<=t)throw new Error("SSS triangle is incorrect, as the longest side is longer than the sum of the other sides");const i=mp(t,n,e),s=mp(n,e,t),o=Math.PI-i-s;return el(i,s,o,e,t,n)},el=(r,e,t,n,i,s)=>{const o=Fl.fromValues(0,0),a=Fl.fromValues(s,0),u=Fl.fromValues(n,0);return Fl.add(u,Fl.rotate(u,u,[0,0],Math.PI-e),a),jV.fromPoints([o,a,u])},sz=r=>{const e={type:"SSS",values:[1,1,1]};let{type:t,values:n}=Object.assign({},e,r);if(typeof t!="string")throw new Error("triangle type must be a string");if(t=t.toUpperCase(),!((t[0]==="A"||t[0]==="S")&&(t[1]==="A"||t[1]==="S")&&(t[2]==="A"||t[2]==="S")))throw new Error("triangle type must contain three letters; A or S");if(!KV(n,3))throw new Error("triangle values must contain three values");if(!n.every(i=>i>0))throw new Error("triangle values must be greater than zero");switch(t){case"AAA":return QV(n);case"AAS":return ez(n);case"ASA":return tz(n);case"SAS":return nz(n);case"SSA":return rz(n);case"SSS":return iz(n);default:throw new Error("invalid triangle type, try again")}};var oz=sz,yr={arc:Hk,circle:a_,cube:aU,cuboid:rm,cylinder:vU,cylinderElliptic:l_,ellipse:o_,ellipsoid:c_,geodesicSphere:TU,line:DU,polygon:RU,polyhedron:u_,rectangle:f_,roundedCuboid:WU,roundedCylinder:jU,roundedRectangle:tV,sphere:sV,square:cV,star:mV,torus:ZV,triangle:oz};function az(r,e,t){if(r%2!==0)throw new Error("Face count must be even number");const n=r/2,i=e,s=t,a=2*i*Math.tan(oc/n)**2/2,u=[[0,0,i],[0,0,-i]];for(let p=0;p<n;p++){const g=Math.PI*2/n*p,b=s*Math.cos(g),C=s*Math.sin(g);u.push([b,C,a])}for(let p=0;p<n;p++){const g=Math.PI/n+Math.PI*2/n*p,b=s*Math.cos(g),C=s*Math.sin(g);u.push([b,C,-a])}const f=[];for(let p=0;p<n;p++){const g=p+2,b=p+1===n?2:g+1,C=p+n+2;f.push([0,g,C,b])}for(let p=0;p<n;p++){const g=p+n+2,b=p+1===n?n+2:g+1,C=p+1===n?2:p+3;f.push([1,b,C,g])}return yr.polyhedron({points:u,faces:f})}const lz=[0,8,2,5,3,9,1,7,4,6];function ob(r,e,t,n=!1){const i=lz.map((s,o)=>{const a={instances:[{faceIndex:s,polygonCenter:!0,from:{type:"vertex",index:0},to:{type:"vertex",index:2}}]};return o===9&&(a.text="0"),n&&(a.text??(a.text=`${o+1}`),a.text+="0",a.localRotation=oc),a});return Xr(r,e,{name:n?"d100":"d10",defaultSize:16,faceScale:n?.35:.5,faces:i,extraOptions(s,o){const[a]=wr(s,1,40,1,o()/2,"Radius");return{radius:a}},base({size:s,radius:o}){return az(10,s()/2,o())}},t)}const cz=(r,e,t)=>{for(r=r.slice();r.length<t;)r.push(e);return r};var uz=cz;const fz=Jt,ab=uz,d_=Qp,{translate:hz}=ho,dz=r=>{if(!Array.isArray(r.modes)||r.modes.length>3)throw new Error("align(): modes must be an array of length <= 3");if(r.modes=ab(r.modes,"none",3),r.modes.filter(e=>["center","max","min","none"].includes(e)).length!==3)throw new Error('align(): all modes must be one of "center", "max" or "min"');if(!Array.isArray(r.relativeTo)||r.relativeTo.length>3)throw new Error("align(): relativeTo must be an array of length <= 3");if(r.relativeTo=ab(r.relativeTo,0,3),r.relativeTo.filter(e=>Number.isFinite(e)||e==null).length!==3)throw new Error("align(): all relativeTo values must be a number, or null.");if(typeof r.grouped!="boolean")throw new Error("align(): grouped must be a boolean value.");return r},pz=(r,e,t)=>{for(let n=0;n<3;n++)r[n]==null&&(e[n]==="center"?r[n]=(t[0][n]+t[1][n])/2:e[n]==="max"?r[n]=t[1][n]:e[n]==="min"&&(r[n]=t[0][n]));return r},lb=(r,e,t)=>{const n=d_(r),i=[0,0,0];for(let s=0;s<3;s++)e[s]==="center"?i[s]=t[s]-(n[0][s]+n[1][s])/2:e[s]==="max"?i[s]=t[s]-n[1][s]:e[s]==="min"&&(i[s]=t[s]-n[0][s]);return hz(i,r)},mz=(r,...e)=>{r=Object.assign({},{modes:["center","center","min"],relativeTo:[0,0,0],grouped:!1},r),r=dz(r);let{modes:n,relativeTo:i,grouped:s}=r;if(e=fz(e),e.length===0)throw new Error("align(): No geometries were provided to act upon");if(i.filter(o=>o==null).length){const o=d_(e);i=pz(i,n,o)}return s?e=lb(e,n,i):e=e.map(o=>lb(o,n,i)),e.length===1?e[0]:e};var gz=mz;const vz=Jt,xz=rn,bz=Rt,yz=_r,wz=Ro,{translate:_z}=ho,xd=(r,e)=>{const t={axes:[!0,!0,!0],relativeTo:[0,0,0]},{axes:n,relativeTo:i}=Object.assign({},t,r),s=wz(e),o=[0,0,0];return n[0]&&(o[0]=i[0]-(s[0][0]+(s[1][0]-s[0][0])/2)),n[1]&&(o[1]=i[1]-(s[0][1]+(s[1][1]-s[0][1])/2)),n[2]&&(o[2]=i[2]-(s[0][2]+(s[1][2]-s[0][2])/2)),_z(o,e)},ff=(r,...e)=>{const t={axes:[!0,!0,!0],relativeTo:[0,0,0]},{axes:n,relativeTo:i}=Object.assign({},t,r);if(e=vz(e),e.length===0)throw new Error("wrong number of arguments");if(i.length!==3)throw new Error("relativeTo must be an array of length 3");r={axes:n,relativeTo:i};const s=e.map(o=>yz.isA(o)||xz.isA(o)||bz.isA(o)?xd(r,o):o);return s.length===1?s[0]:s},Sz=(...r)=>ff({axes:[!0,!1,!1]},r),Cz=(...r)=>ff({axes:[!1,!0,!1]},r),Pz=(...r)=>ff({axes:[!1,!1,!0]},r);var Vu={center:ff,centerX:Sz,centerY:Cz,centerZ:Pz};const Mz=Jt,cb=Vt,ub=rn,fb=Rt,hb=_r,hf=(r,...e)=>{if(!Array.isArray(r))throw new Error("factors must be an array");if(e=Mz(e),e.length===0)throw new Error("wrong number of arguments");for(r=r.slice();r.length<3;)r.push(1);if(r[0]<=0||r[1]<=0||r[2]<=0)throw new Error("factors must be positive");const t=cb.fromScaling(cb.create(),r),n=e.map(i=>hb.isA(i)?hb.transform(t,i):ub.isA(i)?ub.transform(t,i):fb.isA(i)?fb.transform(t,i):i);return n.length===1?n[0]:n},Ez=(r,...e)=>hf([r,1,1],e),Az=(r,...e)=>hf([1,r,1],e),Tz=(r,...e)=>hf([1,1,r],e);var zu={scale:hf,scaleX:Ez,scaleY:Az,scaleZ:Tz};const Iz=Jt,db=rn,pb=Rt,mb=_r,Lz=(r,...e)=>{if(e=Iz(e),e.length===0)throw new Error("wrong number of arguments");const t=e.map(n=>mb.isA(n)?mb.transform(r,n):db.isA(n)?db.transform(r,n):pb.isA(n)?pb.transform(r,n):n);return t.length===1?t[0]:t};var Dz=Lz,gr={align:gz,center:Vu.center,centerX:Vu.centerX,centerY:Vu.centerY,centerZ:Vu.centerZ,mirror:ql.mirror,mirrorX:ql.mirrorX,mirrorY:ql.mirrorY,mirrorZ:ql.mirrorZ,rotate:Zl.rotate,rotateX:Zl.rotateX,rotateY:Zl.rotateY,rotateZ:Zl.rotateZ,scale:zu.scale,scaleX:zu.scaleX,scaleY:zu.scaleY,scaleZ:zu.scaleZ,transform:Dz,translate:ho.translate,translateX:ho.translateX,translateY:ho.translateY,translateZ:ho.translateZ};function df(r){const e=yr.polyhedron(r),[,t]=Yw.measureBoundingSphere(e);return n=>{const i=at.fromScalar(at.create(),n/t);return gr.scale(i,e)}}const vn=(1+Math.sqrt(5))/4,Ur=(3+Math.sqrt(5))/4,Oz=df({points:[[0,.5,Ur],[0,.5,-Ur],[0,-.5,Ur],[0,-.5,-Ur],[Ur,0,.5],[Ur,0,-.5],[-Ur,0,.5],[-Ur,0,-.5],[.5,Ur,0],[.5,-Ur,0],[-.5,Ur,0],[-.5,-Ur,0],[vn,vn,vn],[vn,vn,-vn],[vn,-vn,vn],[vn,-vn,-vn],[-vn,vn,vn],[-vn,vn,-vn],[-vn,-vn,vn],[-vn,-vn,-vn]],faces:[[0,2,14,4,12],[0,12,8,10,16],[0,16,6,18,2],[7,6,16,10,17],[7,17,1,3,19],[7,19,11,18,6],[9,11,19,3,15],[9,15,5,4,14],[9,14,2,18,11],[13,1,17,10,8],[13,8,12,4,5],[13,5,15,3,1]]});function Rz(r,e,t){return Xr(r,e,{name:"d12",defaultSize:16,faceScale:.6,faces:[{instances:[{faceIndex:8,polygonCenter:!0,from:{type:"vertex",index:2},to:{type:"edge",index:0}}]},{instances:[{faceIndex:7,polygonCenter:!0,from:{type:"vertex",index:2},to:{type:"edge",index:0}}]},{instances:[{faceIndex:4,polygonCenter:!0,from:{type:"vertex",index:4},to:{type:"edge",index:2}}]},{instances:[{faceIndex:6,polygonCenter:!0,from:{type:"vertex",index:3},to:{type:"edge",index:1}}]},{instances:[{faceIndex:2,polygonCenter:!0,from:{type:"vertex",index:1},to:{type:"edge",index:4}}]},{instances:[{faceIndex:5,polygonCenter:!0,from:{type:"vertex",index:0},to:{type:"edge",index:3}}]},{instances:[{faceIndex:10,polygonCenter:!0,from:{type:"vertex",index:3},to:{type:"edge",index:1}}]},{instances:[{faceIndex:11,polygonCenter:!0,from:{type:"vertex",index:2},to:{type:"edge",index:0}}]},{instances:[{faceIndex:1,polygonCenter:!0,from:{type:"vertex",index:0},to:{type:"edge",index:3}}]},{instances:[{faceIndex:0,polygonCenter:!0,from:{type:"vertex",index:4},to:{type:"edge",index:2}}]},{instances:[{faceIndex:3,polygonCenter:!0,from:{type:"vertex",index:1},to:{type:"edge",index:4}}]},{instances:[{faceIndex:9,polygonCenter:!0,from:{type:"vertex",index:1},to:{type:"edge",index:4}}]}],extraOptions(){return{}},base({size:n}){return Oz(n()/2)}},t)}const xn=3*Math.sqrt(2)/8,pa=3*Math.sqrt(2)/4,Bz=df({points:[[0,0,pa],[0,0,-pa],[pa,0,0],[-pa,0,0],[0,pa,0],[0,-pa,0],[xn,xn,xn],[xn,xn,-xn],[xn,-xn,xn],[xn,-xn,-xn],[-xn,xn,xn],[-xn,xn,-xn],[-xn,-xn,xn],[-xn,-xn,-xn]],faces:[[6,0,8,2],[6,2,7,4],[6,4,10,0],[9,1,7,2],[9,2,8,5],[9,5,13,1],[11,1,13,3],[11,3,10,4],[11,4,7,1],[12,0,10,3],[12,3,13,5],[12,5,8,0]]});function Fz(r,e,t){return Xr(r,e,{name:"d12r",defaultSize:16,faceScale:.6,faces:[{instances:[{faceIndex:11,from:{type:"vertex",index:0},to:{type:"vertex",index:2}}]},{instances:[{faceIndex:9,from:{type:"vertex",index:2},to:{type:"vertex",index:0}}]},{instances:[{faceIndex:4,from:{type:"vertex",index:2},to:{type:"vertex",index:0}}]},{instances:[{faceIndex:0,from:{type:"vertex",index:2},to:{type:"vertex",index:0}}]},{instances:[{faceIndex:5,from:{type:"vertex",index:2},to:{type:"vertex",index:0}}]},{instances:[{faceIndex:10,from:{type:"vertex",index:2},to:{type:"vertex",index:0}}]},{instances:[{faceIndex:1,from:{type:"vertex",index:2},to:{type:"vertex",index:0}}]},{instances:[{faceIndex:2,from:{type:"vertex",index:0},to:{type:"vertex",index:2}}]},{instances:[{faceIndex:6,from:{type:"vertex",index:2},to:{type:"vertex",index:0}}]},{instances:[{faceIndex:7,from:{type:"vertex",index:2},to:{type:"vertex",index:0}}]},{instances:[{faceIndex:3,from:{type:"vertex",index:2},to:{type:"vertex",index:0}}]},{instances:[{faceIndex:8,from:{type:"vertex",index:0},to:{type:"vertex",index:2}}]}],extraOptions(){return{}},base({size:n}){return Bz(n()/2)}},t)}function Nz(r,e,t){return Xr(r,e,{name:"d2",defaultSize:16,faces:[{instances:[{faceIndex:5,from:{type:"edge",index:3},to:{type:"edge",index:1}}]},{instances:[{faceIndex:4,from:{type:"edge",index:0},to:{type:"edge",index:2}}]}],extraOptions(n){const[i]=wr(n,1,40,1,3,"Height"),[s]=wr(n,4,360,1,24,"Segments");return{height:i,segments:s}},base({size:n,height:i,segments:s}){return yr.cylinder({radius:n()/2,height:i(),segments:s()})},facesBase({size:n,height:i}){return rm({size:[n(),n(),i()]})}},t)}const Vr=(1+Math.sqrt(5))/4,kz=df({points:[[.5,0,Vr],[.5,0,-Vr],[-.5,0,Vr],[-.5,0,-Vr],[Vr,.5,0],[Vr,-.5,0],[-Vr,.5,0],[-Vr,-.5,0],[0,Vr,.5],[0,Vr,-.5],[0,-Vr,.5],[0,-Vr,-.5]],faces:[[0,2,10],[0,10,5],[0,5,4],[0,4,8],[0,8,2],[3,1,11],[3,11,7],[3,7,6],[3,6,9],[3,9,1],[2,6,7],[2,7,10],[10,7,11],[10,11,5],[5,11,1],[5,1,4],[4,1,9],[4,9,8],[8,9,6],[8,6,2]]});function Uz(r,e,t){return Xr(r,e,{name:"d20",defaultSize:16,faceScale:.5,faces:[{instances:[{faceIndex:0,polygonCenter:!0,from:{type:"vertex",index:2},to:{type:"edge",index:1}}]},{instances:[{faceIndex:16,polygonCenter:!0,from:{type:"vertex",index:0},to:{type:"edge",index:2}}]},{instances:[{faceIndex:12,polygonCenter:!0,from:{type:"vertex",index:0},to:{type:"edge",index:2}}]},{instances:[{faceIndex:18,polygonCenter:!0,from:{type:"vertex",index:0},to:{type:"edge",index:2}}]},{instances:[{faceIndex:3,polygonCenter:!0,from:{type:"vertex",index:1},to:{type:"edge",index:0}}]},{instances:[{faceIndex:7,polygonCenter:!0,from:{type:"vertex",index:1},to:{type:"edge",index:0}}]},{instances:[{faceIndex:1,polygonCenter:!0,from:{type:"vertex",index:2},to:{type:"edge",index:1}}]},{instances:[{faceIndex:5,polygonCenter:!0,from:{type:"vertex",index:2},to:{type:"edge",index:1}}]},{instances:[{faceIndex:10,polygonCenter:!0,from:{type:"vertex",index:1},to:{type:"edge",index:0}}]},{instances:[{faceIndex:14,polygonCenter:!0,from:{type:"vertex",index:0},to:{type:"edge",index:2}}]},{instances:[{faceIndex:19,polygonCenter:!0,from:{type:"vertex",index:1},to:{type:"edge",index:0}}]},{instances:[{faceIndex:15,polygonCenter:!0,from:{type:"vertex",index:0},to:{type:"edge",index:2}}]},{instances:[{faceIndex:4,polygonCenter:!0,from:{type:"vertex",index:1},to:{type:"edge",index:0}}]},{instances:[{faceIndex:8,polygonCenter:!0,from:{type:"vertex",index:1},to:{type:"edge",index:0}}]},{instances:[{faceIndex:2,polygonCenter:!0,from:{type:"vertex",index:2},to:{type:"edge",index:1}}]},{instances:[{faceIndex:6,polygonCenter:!0,from:{type:"vertex",index:2},to:{type:"edge",index:1}}]},{instances:[{faceIndex:13,polygonCenter:!0,from:{type:"vertex",index:0},to:{type:"edge",index:2}}]},{instances:[{faceIndex:17,polygonCenter:!0,from:{type:"vertex",index:2},to:{type:"edge",index:1}}]},{instances:[{faceIndex:11,polygonCenter:!0,from:{type:"vertex",index:1},to:{type:"edge",index:0}}]},{instances:[{faceIndex:9,polygonCenter:!0,from:{type:"vertex",index:1},to:{type:"edge",index:0}}]}],extraOptions(){return{}},base({size:n}){return kz(n()/2)}},t)}const Vz=rn,zz=Rt,Gz=_r,$z=r=>{let e;for(const t of r){let n=0;if(Vz.isA(t)&&(n=1),zz.isA(t)&&(n=2),Gz.isA(t)&&(n=3),e&&n!==e)return!1;e=n}return!0};var pf=$z;const gb=Bt,Wz=rn,Xz=(r,e)=>{if(e.vertices.length<4)return null;const t=[],n=e.vertices.filter((o,a)=>o[2]>0?(t.push(a),!0):!1);if(n.length!==2)throw new Error("Assertion failed: fromFakePolygon: not enough points found");const i=n.map(o=>{const a=Math.round(o[0]/r)*r+0,u=Math.round(o[1]/r)*r+0;return gb.fromValues(a,u)});if(gb.equals(i[0],i[1]))return null;const s=t[1]-t[0];if(s===1||s===3)s===1&&i.reverse();else throw new Error("Assertion failed: fromFakePolygon: unknown index ordering");return i},Hz=(r,e)=>{const t=e.map(n=>Xz(r,n)).filter(n=>n!==null);return Wz.create(t)};var im=Hz;const Ss=at,Yz=rn,qz=Rt,Zz=nn,jz=(r,e,t)=>{const n=[Ss.fromVec2(Ss.create(),t[0],r),Ss.fromVec2(Ss.create(),t[1],r),Ss.fromVec2(Ss.create(),t[1],e),Ss.fromVec2(Ss.create(),t[0],e)];return Zz.create(n)},Kz=(r,e)=>{const n=Yz.toSides(e).map(s=>jz(r.z0,r.z1,s));return qz.create(n)};var sm=Kz;const Jz=()=>[0,1,0];var om=Jz;const Qz=om,eG=r=>{const e=Qz();return e[0]=r[0],e[1]=r[1],e[2]=r[2],e};var tG=eG;const bd=Bt,nG=r=>{const e=bd.normal(bd.create(),r);return bd.negate(e,e),e};var am=nG;const vb=Bt,rG=r=>vb.scale(vb.create(),r,r[2]);var mf=rG;const iG=Bt,sG=am,oG=mf,aG=(r,e)=>{const t=oG(r),n=sG(r),i=(n[1]-t[1])/(n[0]-t[0]),s=t[1]-i*t[0],o=-1/i,u=(e[1]-o*e[0]-s)/(i-o),f=i*u+s;return iG.fromValues(u,f)};var lG=aG;const cG=(r,e)=>(r[0]=e[0],r[1]=e[1],r[2]=e[2],r);var p_=cG;const uG=Bt,fG=(r,e)=>{let t=uG.dot(e,r);return t=Math.abs(t-r[2]),t};var hG=fG;const dG=(r,e)=>r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2];var pG=dG;const Nl=Bt,mG=(r,e,t)=>{const n=Nl.subtract(Nl.create(),t,e);Nl.normal(n,n),Nl.normalize(n,n);const i=Nl.dot(e,n);return r[0]=n[0],r[1]=n[1],r[2]=i,r};var m_=mG;const gG=om,vG=(r,e,t)=>{const n=gG();return n[0]=r,n[1]=e,n[2]=t,n};var g_=vG;const xG=Bt,{solve2Linear:bG}=i_,yG=(r,e)=>{const t=bG(r[0],r[1],e[0],e[1],r[2],e[2]);return xG.clone(t)};var wG=yG;const xb=Bt,_G=p_,SG=g_,CG=(r,e)=>{const t=xb.negate(xb.create(),e),n=-e[2];return _G(r,SG(t[0],t[1],n))};var PG=CG;const MG=r=>`line2: (${r[0].toFixed(7)}, ${r[1].toFixed(7)}, ${r[2].toFixed(7)})`;var EG=MG;const bb=Bt,AG=m_,TG=mf,IG=am,LG=(r,e,t)=>{const n=TG(e),i=IG(e);return bb.transform(n,n,t),bb.transform(i,i,t),AG(r,n,i)};var DG=LG;const OG=mf,RG=(r,e)=>{let t=(r[2]-r[1]*e)/r[0];return Number.isNaN(t)&&(t=OG(r)[0]),t};var BG=RG,FG={clone:tG,closestPoint:lG,copy:p_,create:om,direction:am,distanceToPoint:hG,equals:pG,fromPoints:m_,fromValues:g_,intersectPointOfLines:wG,origin:mf,reverse:PG,toString:EG,transform:DG,xAtY:BG};const yb=Vt,NG=Bt,Ln=at,Io=function(r,e){arguments.length<2&&(e=Ln.orthogonal(Ln.create(),r)),this.v=Ln.normalize(Ln.create(),Ln.cross(Ln.create(),r,e)),this.u=Ln.cross(Ln.create(),this.v,r),this.plane=r,this.planeorigin=Ln.scale(Ln.create(),r,r[3])};Io.GetCartesian=function(r,e){const t=r+"/"+e;let n,i;if(t==="X/Y")n=[0,0,1],i=[1,0,0];else if(t==="Y/-X")n=[0,0,1],i=[0,1,0];else if(t==="-X/-Y")n=[0,0,1],i=[-1,0,0];else if(t==="-Y/X")n=[0,0,1],i=[0,-1,0];else if(t==="-X/Y")n=[0,0,-1],i=[-1,0,0];else if(t==="-Y/-X")n=[0,0,-1],i=[0,-1,0];else if(t==="X/-Y")n=[0,0,-1],i=[1,0,0];else if(t==="Y/X")n=[0,0,-1],i=[0,1,0];else if(t==="X/Z")n=[0,-1,0],i=[1,0,0];else if(t==="Z/-X")n=[0,-1,0],i=[0,0,1];else if(t==="-X/-Z")n=[0,-1,0],i=[-1,0,0];else if(t==="-Z/X")n=[0,-1,0],i=[0,0,-1];else if(t==="-X/Z")n=[0,1,0],i=[-1,0,0];else if(t==="-Z/-X")n=[0,1,0],i=[0,0,-1];else if(t==="X/-Z")n=[0,1,0],i=[1,0,0];else if(t==="Z/X")n=[0,1,0],i=[0,0,1];else if(t==="Y/Z")n=[1,0,0],i=[0,1,0];else if(t==="Z/-Y")n=[1,0,0],i=[0,0,1];else if(t==="-Y/-Z")n=[1,0,0],i=[0,-1,0];else if(t==="-Z/Y")n=[1,0,0],i=[0,0,-1];else if(t==="-Y/Z")n=[-1,0,0],i=[0,-1,0];else if(t==="-Z/-Y")n=[-1,0,0],i=[0,0,-1];else if(t==="Y/-Z")n=[-1,0,0],i=[0,1,0];else if(t==="Z/Y")n=[-1,0,0],i=[0,0,1];else throw new Error("OrthoNormalBasis.GetCartesian: invalid combination of axis identifiers. Should pass two string arguments from [X,Y,Z,-X,-Y,-Z], being two different axes.");return new Io(new Plane(new Vector3D(n),0),new Vector3D(i))};Io.Z0Plane=function(){const r=new Plane(new Vector3D([0,0,1]),0);return new Io(r,new Vector3D([1,0,0]))};Io.prototype={getProjectionMatrix:function(){return yb.fromValues(this.u[0],this.v[0],this.plane[0],0,this.u[1],this.v[1],this.plane[1],0,this.u[2],this.v[2],this.plane[2],0,0,0,-this.plane[3],1)},getInverseProjectionMatrix:function(){const r=Ln.scale(Ln.create(),this.plane,this.plane[3]);return yb.fromValues(this.u[0],this.u[1],this.u[2],0,this.v[0],this.v[1],this.v[2],0,this.plane[0],this.plane[1],this.plane[2],0,r[0],r[1],r[2],1)},to2D:function(r){return NG.fromValues(Ln.dot(r,this.u),Ln.dot(r,this.v))},to3D:function(r){const e=Ln.scale(Ln.create(),this.u,r[0]),t=Ln.scale(Ln.create(),this.v,r[1]),n=Ln.add(e,e,this.planeorigin);return Ln.add(t,t,n)},line3Dto2D:function(r){const e=r.point,t=r.direction.plus(e),n=this.to2D(e),i=this.to2D(t);return Line2D.fromPoints(n,i)},line2Dto3D:function(r){const e=r.origin(),t=r.direction().plus(e),n=this.to3D(e),i=this.to3D(t);return Line3D.fromPoints(n,i)},transform:function(r){const e=this.plane.transform(r),t=this.u.transform(r),n=new Vector3D(0,0,0).transform(r),i=t.minus(n);return new Io(e,i)}};var kG=Io;const UG=r=>r*.017453292519943295;var VG=UG;const zG=(r,e)=>r-e;var GG=zG;const $G=(r,e,t)=>{let n=0,i=r.length;for(;i>n;){const s=Math.floor((n+i)/2),o=r[s];t(e,o)>0?n=s+1:i=s}r.splice(n,0,e)};var WG=$G;const{TAU:wb}=Kt,XG=(r,e,t)=>{const n=e>0?r*wb/e:0,i=t>0?wb/t:0;return Math.ceil(Math.max(n,i,4))};var HG=XG;const YG=r=>r*57.29577951308232;var qG=YG,ZG={areAllShapesTheSameType:pf,degToRad:VG,flatten:Jt,fnNumberSort:GG,insertSorted:WG,radiusToSegments:HG,radToDeg:qG};const{EPS:Xi}=Kt,Cs=FG,Jr=Bt,jG=kG,ma=r_,{insertSorted:KG,fnNumberSort:JG}=ZG,_b=nn,QG=r=>{if(r.length<2)return r;const e=[],t=r.length,n=_b.plane(r[0]),i=new jG(n),s=[],o=[],a=new Map,u=new Map,f=new Map,h=10/Xi;for(let C=0;C<t;C++){const y=r[C];let w=[],A=y.vertices.length,O=-1;if(A>0){let E,T;for(let M=0;M<A;M++){let B=i.to2D(y.vertices[M]);const F=Math.floor(B[1]*h);let I;f.has(F)?I=f.get(F):f.has(F+1)?I=f.get(F+1):f.has(F-1)?I=f.get(F-1):(I=B[1],f.set(F,B[1])),B=Jr.fromValues(B[0],I),w.push(B);const N=B[1];(M===0||N<E)&&(E=N,O=M),(M===0||N>T)&&(T=N);let G=u.get(N);G||(G={},u.set(N,G)),G[C]=!0}if(E>=T)w=[],A=0,O=-1;else{let M=a.get(E);M||(M=[],a.set(E,M)),M.push(C)}}w.reverse(),O=A-O-1,s.push(w),o.push(O)}const p=[];u.forEach((C,y)=>p.push(y)),p.sort(JG);let g=[],b=[];for(let C=0;C<p.length;C++){const y=[],w=p[C],A=u.get(w);for(let E=0;E<g.length;++E){const T=g[E],M=T.polygonindex;if(A[M]){const B=s[M],F=B.length;let I=T.leftvertexindex,N=T.rightvertexindex;for(;;){let X=I+1;if(X>=F&&(X=0),B[X][1]!==w)break;I=X}let G=N-1;if(G<0&&(G=F-1),B[G][1]===w&&(N=G),I!==T.leftvertexindex&&I===N)g.splice(E,1),--E;else{T.leftvertexindex=I,T.rightvertexindex=N,T.topleft=B[I],T.topright=B[N];let X=I+1;X>=F&&(X=0),T.bottomleft=B[X];let J=N-1;J<0&&(J=F-1),T.bottomright=B[J]}}}let O;if(C>=p.length-1)g=[],O=null;else{O=Number(p[C+1]);const E=.5*(w+O),T=a.get(w);for(const M in T){const B=T[M],F=s[B],I=F.length,N=o[B];let G=N;for(;;){let ne=G+1;if(ne>=I&&(ne=0),F[ne][1]!==w||ne===N)break;G=ne}let X=N;for(;;){let ne=X-1;if(ne<0&&(ne=I-1),F[ne][1]!==w||ne===G)break;X=ne}let J=G+1;J>=I&&(J=0);let Z=X-1;Z<0&&(Z=I-1);const H={polygonindex:B,leftvertexindex:G,rightvertexindex:X,topleft:F[G],topright:F[X],bottomleft:F[J],bottomright:F[Z]};KG(g,H,(ne,ie)=>{const be=ma(ne.topleft,ne.bottomleft,E),oe=ma(ie.topleft,ie.bottomleft,E);return be>oe?1:be<oe?-1:0})}}for(const E in g){const T=g[E];let M=ma(T.topleft,T.bottomleft,w);const B=Jr.fromValues(M,w);M=ma(T.topright,T.bottomright,w);const F=Jr.fromValues(M,w);M=ma(T.topleft,T.bottomleft,O);const I=Jr.fromValues(M,O);M=ma(T.topright,T.bottomright,O);const N=Jr.fromValues(M,O),G={topleft:B,topright:F,bottomleft:I,bottomright:N,leftline:Cs.fromPoints(Cs.create(),B,I),rightline:Cs.fromPoints(Cs.create(),N,F)};if(y.length>0){const X=y[y.length-1],J=Jr.distance(G.topleft,X.topright),Z=Jr.distance(G.bottomleft,X.bottomright);J<Xi&&Z<Xi&&(G.topleft=X.topleft,G.leftline=X.leftline,G.bottomleft=X.bottomleft,y.splice(y.length-1,1))}y.push(G)}if(C>0){const E=new Set,T=new Set;for(let M=0;M<y.length;M++){const B=y[M];for(let F=0;F<b.length;F++)if(!T.has(F)){const I=b[F];if(Jr.distance(I.bottomleft,B.topleft)<Xi&&Jr.distance(I.bottomright,B.topright)<Xi){T.add(F);const N=Cs.direction(B.leftline),G=Cs.direction(I.leftline),X=N[0]-G[0],J=Cs.direction(B.rightline),Z=Cs.direction(I.rightline),H=J[0]-Z[0],ne=Math.abs(X)<Xi,ie=Math.abs(H)<Xi,be=ne||X>=0,oe=ie||H>=0;be&&oe&&(B.outpolygon=I.outpolygon,B.leftlinecontinues=ne,B.rightlinecontinues=ie,E.add(F));break}}}for(let M=0;M<b.length;M++)if(!E.has(M)){const B=b[M];B.outpolygon.rightpoints.push(B.bottomright),Jr.distance(B.bottomright,B.bottomleft)>Xi&&B.outpolygon.leftpoints.push(B.bottomleft),B.outpolygon.leftpoints.reverse();const I=B.outpolygon.rightpoints.concat(B.outpolygon.leftpoints).map(G=>i.to3D(G)),N=_b.fromPointsAndPlane(I,n);N.vertices.length&&e.push(N)}}for(let E=0;E<y.length;E++){const T=y[E];T.outpolygon?(T.leftlinecontinues||T.outpolygon.leftpoints.push(T.topleft),T.rightlinecontinues||T.outpolygon.rightpoints.push(T.topright)):(T.outpolygon={leftpoints:[],rightpoints:[]},T.outpolygon.leftpoints.push(T.topleft),Jr.distance(T.topleft,T.topright)>Xi&&T.outpolygon.rightpoints.push(T.topright))}b=y}return e};var e$=QG;const Sb=Rt,Cb=nn,t$=n_,n$=e$,r$=(r,e)=>Math.abs(r[3]-e[3])<15e-8?t$(r,e):!1,i$=r=>{if(r.isRetesselated)return r;const e=Sb.toPolygons(r),t=[];e.forEach(s=>{const o=t.find(a=>r$(a[0],Cb.plane(s)));o?o[1].push(s):t.push([Cb.plane(s),[s]])});let n=[];t.forEach(s=>{const o=s[1],a=n$(o);n=n.concat(a)});const i=Sb.create(n);return i.isRetesselated=!0,i};var lm=i$;const{EPS:ga}=Kt,Pb=Ro,s$=(r,e)=>{if(r.polygons.length===0||e.polygons.length===0)return!1;const t=Pb(r),n=t[0],i=t[1],s=Pb(e),o=s[0],a=s[1];return!(o[0]-i[0]>ga||n[0]-a[0]>ga||o[1]-i[1]>ga||n[1]-a[1]>ga||o[2]-i[2]>ga||n[2]-a[2]>ga)};var cm=s$;const Mb=Mi,o$=nn;let gp=class{constructor(e){this.plane=null,this.front=null,this.back=null,this.polygontreenodes=[],this.parent=e}invert(){const e=[this];let t;for(let n=0;n<e.length;n++){t=e[n],t.plane&&(t.plane=Mb.flip(Mb.create(),t.plane)),t.front&&e.push(t.front),t.back&&e.push(t.back);const i=t.front;t.front=t.back,t.back=i}}clipPolygons(e,t){let n={node:this,polygontreenodes:e},i;const s=[];do{if(i=n.node,e=n.polygontreenodes,i.plane){const o=i.plane,a=[],u=[],f=t?a:u,h=e.length;for(let g=0;g<h;g++){const b=e[g];b.isRemoved()||b.splitByPlane(o,f,a,u,a)}i.front&&u.length>0&&s.push({node:i.front,polygontreenodes:u});const p=a.length;if(i.back&&p>0)s.push({node:i.back,polygontreenodes:a});else for(let g=0;g<p;g++)a[g].remove()}n=s.pop()}while(n!==void 0)}clipTo(e,t){let n=this;const i=[];do n.polygontreenodes.length>0&&e.rootnode.clipPolygons(n.polygontreenodes,t),n.front&&i.push(n.front),n.back&&i.push(n.back),n=i.pop();while(n!==void 0)}addPolygonTreeNodes(e){let t={node:this,polygontreenodes:e};const n=[];do{const i=t.node,s=t.polygontreenodes;if(s.length===0){t=n.pop();continue}if(!i.plane){let f=0;f=Math.floor(s.length/2);const h=s[f].getPolygon();i.plane=o$.plane(h)}const o=[],a=[],u=s.length;for(let f=0;f<u;++f)s[f].splitByPlane(i.plane,i.polygontreenodes,a,o,a);o.length>0&&(i.front||(i.front=new gp(i)),u===o.length&&a.length===0?i.front.polygontreenodes=o:n.push({node:i.front,polygontreenodes:o})),a.length>0&&(i.back||(i.back=new gp(i)),u===a.length&&o.length===0?i.back.polygontreenodes=a:n.push({node:i.back,polygontreenodes:a})),t=n.pop()}while(t!==void 0)}};var a$=gp;const va=at,l$=(r,e,t)=>{const n=va.subtract(va.create(),t,e);let i=(r[3]-va.dot(r,e))/va.dot(r,n);return Number.isNaN(i)&&(i=0),i>1&&(i=1),i<0&&(i=0),va.scale(n,n,i),va.add(n,e,n),n};var c$=l$;const{EPS:Gu}=Kt,u$=Mi,$u=at,yd=nn,f$=c$,h$=(r,e)=>{const t={type:null,front:null,back:null},n=e.vertices,i=n.length,s=yd.plane(e);if(u$.equals(s,r))t.type=0;else{let o=!1,a=!1;const u=[],f=-Gu;for(let h=0;h<i;h++){const p=$u.dot(r,n[h])-r[3],g=p<f;u.push(g),p>Gu&&(o=!0),p<f&&(a=!0)}if(!o&&!a){const h=$u.dot(r,s);t.type=h>=0?0:1}else if(!a)t.type=2;else if(!o)t.type=3;else{t.type=4;const h=[],p=[];let g=u[0];for(let C=0;C<i;C++){const y=n[C];let w=C+1;w>=i&&(w=0);const A=u[w];if(g===A)g?p.push(y):h.push(y);else{const O=n[w],E=f$(r,y,O);g?(p.push(y),p.push(E),h.push(E)):(h.push(y),h.push(E),p.push(E))}g=A}const b=Gu*Gu;if(p.length>=3){let C=p[p.length-1];for(let y=0;y<p.length;y++){const w=p[y];$u.squaredDistance(w,C)<b&&(p.splice(y,1),y--),C=w}}if(h.length>=3){let C=h[h.length-1];for(let y=0;y<h.length;y++){const w=h[y];$u.squaredDistance(w,C)<b&&(h.splice(y,1),y--),C=w}}h.length>=3&&(t.front=yd.fromPointsAndPlane(h,s)),p.length>=3&&(t.back=yd.fromPointsAndPlane(p,s))}}return t};var d$=h$;const{EPS:p$}=Kt,m$=at,Eb=nn,g$=d$;let v_=class{constructor(e,t){this.parent=e,this.children=[],this.polygon=t,this.removed=!1}addPolygons(e){if(!this.isRootNode())throw new Error("Assertion failed");const t=this;e.forEach(n=>{t.addChild(n)})}remove(){if(!this.removed){this.removed=!0,this.polygon=null;const e=this.parent.children,t=e.indexOf(this);if(t<0)throw new Error("Assertion failed");e.splice(t,1),this.parent.recursivelyInvalidatePolygon()}}isRemoved(){return this.removed}isRootNode(){return!this.parent}invert(){if(!this.isRootNode())throw new Error("Assertion failed");this.invertSub()}getPolygon(){if(!this.polygon)throw new Error("Assertion failed");return this.polygon}getPolygons(e){let t=[this];const n=[t];let i,s,o,a;for(i=0;i<n.length;++i)for(t=n[i],s=0,o=t.length;s<o;s++)a=t[s],a.polygon?e.push(a.polygon):a.children.length>0&&n.push(a.children)}splitByPlane(e,t,n,i,s){if(this.children.length){const o=[this.children];let a,u,f,h,p;for(a=0;a<o.length;a++)for(p=o[a],u=0,f=p.length;u<f;u++)h=p[u],h.children.length>0?o.push(h.children):h._splitByPlane(e,t,n,i,s)}else this._splitByPlane(e,t,n,i,s)}_splitByPlane(e,t,n,i,s){const o=this.polygon;if(o){const a=Eb.measureBoundingSphere(o),u=a[3]+p$,f=a,h=m$.dot(e,f)-e[3];if(h>u)i.push(this);else if(h<-u)s.push(this);else{const p=g$(e,o);switch(p.type){case 0:t.push(this);break;case 1:n.push(this);break;case 2:i.push(this);break;case 3:s.push(this);break;case 4:if(p.front){const g=this.addChild(p.front);i.push(g)}if(p.back){const g=this.addChild(p.back);s.push(g)}break}}}}addChild(e){const t=new v_(this,e);return this.children.push(t),t}invertSub(){let e=[this];const t=[e];let n,i,s,o;for(n=0;n<t.length;n++)for(e=t[n],i=0,s=e.length;i<s;i++)o=e[i],o.polygon&&(o.polygon=Eb.invert(o.polygon)),o.children.length>0&&t.push(o.children)}recursivelyInvalidatePolygon(){this.polygon=null,this.parent&&this.parent.recursivelyInvalidatePolygon()}clear(){let e=[this];const t=[e];for(let n=0;n<t.length;++n){e=t[n];const i=e.length;for(let s=0;s<i;s++){const o=e[s];o.polygon&&(o.polygon=null),o.parent&&(o.parent=null),o.children.length>0&&t.push(o.children),o.children=[]}}}toString(){let e="",t=[this];const n=[t];let i,s,o,a;for(i=0;i<n.length;++i){t=n[i];const u=" ".repeat(i);for(s=0,o=t.length;s<o;s++)a=t[s],e+=`${u}PolygonTreeNode (${a.isRootNode()}): ${a.children.length}`,a.polygon?e+=`
 ${u}polygon: ${a.polygon.vertices}
`:e+=`
`,a.children.length>0&&n.push(a.children)}return e}};var v$=v_;const x$=a$,b$=v$;let y$=class{constructor(e){this.polygonTree=new b$,this.rootnode=new x$(null),e&&this.addPolygons(e)}invert(){this.polygonTree.invert(),this.rootnode.invert()}clipTo(e,t=!1){this.rootnode.clipTo(e,t)}allPolygons(){const e=[];return this.polygonTree.getPolygons(e),e}addPolygons(e){const t=new Array(e.length);for(let n=0;n<e.length;n++)t[n]=this.polygonTree.addChild(e[n]);this.rootnode.addPolygonTreeNodes(t)}clear(){this.polygonTree.clear()}toString(){return"Tree: "+this.polygonTree.toString("")}};var w$=y$,um={Tree:w$};const Wu=Rt,_$=cm,{Tree:Ab}=um,S$=(r,e)=>{if(!_$(r,e))return Wu.create();const t=new Ab(Wu.toPolygons(r)),n=new Ab(Wu.toPolygons(e));t.invert(),n.clipTo(t),n.invert(),t.clipTo(n),n.clipTo(t),t.addPolygons(n.allPolygons()),t.invert();const i=t.allPolygons();return Wu.create(i)};var C$=S$;const P$=Jt,M$=lm,E$=C$,A$=(...r)=>{r=P$(r);let e=r.shift();return r.forEach(t=>{e=E$(e,t)}),e=M$(e),e};var x_=A$;const T$=Jt,I$=Rt,L$=Lc,D$=im,O$=sm,R$=x_,B$=(...r)=>{r=T$(r);const e=r.map(i=>O$({z0:-1,z1:1},i)),t=R$(e),n=L$(t);return D$(n,I$.toPolygons(t))};var F$=B$;const N$=Jt,k$=pf,U$=rn,V$=Rt,z$=F$,G$=x_,$$=(...r)=>{if(r=N$(r),r.length===0)throw new Error("wrong number of arguments");if(!k$(r))throw new Error("only intersect of the types are supported");const e=r[0];return U$.isA(e)?z$(r):V$.isA(e)?G$(r):e};var W$=$$;const wd=at,X$=Lc,Tb=Rt,H$=r=>r.sort((e,t)=>e-t).filter((e,t,n)=>!t||e!==n[t-1]),Y$=(r,e,t)=>{const n=`${e}`,i=r.get(n);i===void 0?r.set(n,[t]):i.push(t)},q$=(r,e)=>{const t=`${e}`;return r.get(t)},Z$=r=>{const e=X$(r),t=Tb.toPolygons(r),n=t.length,i=new Map,s=wd.create();t.forEach((h,p)=>{h.vertices.forEach(g=>{Y$(i,wd.snap(s,g,e),p)})});const o=t.map(h=>{let p=[];return h.vertices.forEach(g=>{p=p.concat(q$(i,wd.snap(s,g,e)))}),{e:1,d:H$(p)}});i.clear();let a=0;const u=o.length;for(let h=0;h<u;h++){const p=o[h];if(p.e>0){const g=new Array(n);g[h]=!0;do a=0,g.forEach((b,C)=>{const y=o[C];if(y.e>0){y.e=-1;for(let w=0;w<y.d.length;w++)g[y.d[w]]=!0;a++}});while(a>0);p.indexes=g}}const f=[];for(let h=0;h<u;h++)if(o[h].indexes){const p=[];o[h].indexes.forEach((g,b)=>p.push(t[b])),f.push(Tb.create(p))}return f};var j$=Z$;const K$=Jt,J$=Rt,Q$=j$,eW=(...r)=>{if(r=K$(r),r.length===0)throw new Error("wrong number of arguments");const e=r.map(t=>J$.isA(t)?Q$(t):t);return e.length===1?e[0]:e};var tW=eW;const Xu=Rt,nW=cm,{Tree:Ib}=um,rW=(r,e)=>{if(!nW(r,e))return Xu.clone(r);const t=new Ib(Xu.toPolygons(r)),n=new Ib(Xu.toPolygons(e));t.invert(),t.clipTo(n),n.clipTo(t,!0),t.addPolygons(n.allPolygons()),t.invert();const i=t.allPolygons();return Xu.create(i)};var iW=rW;const sW=Jt,oW=lm,aW=iW,lW=(...r)=>{r=sW(r);let e=r.shift();return r.forEach(t=>{e=aW(e,t)}),e=oW(e),e};var b_=lW;const cW=Jt,uW=Rt,fW=Lc,hW=im,dW=sm,pW=b_,mW=(...r)=>{r=cW(r);const e=r.map(i=>dW({z0:-1,z1:1},i)),t=pW(e),n=fW(t);return hW(n,uW.toPolygons(t))};var gW=mW;const vW=Jt,xW=pf,bW=rn,yW=Rt,wW=gW,_W=b_,SW=(...r)=>{if(r=vW(r),r.length===0)throw new Error("wrong number of arguments");if(!xW(r))throw new Error("only subtract of the types are supported");const e=r[0];return bW.isA(e)?wW(r):yW.isA(e)?_W(r):e};var CW=SW;const Ba=Rt,PW=cm,{Tree:Lb}=um,MW=(r,e)=>{if(!PW(r,e))return EW(r,e);const t=new Lb(Ba.toPolygons(r)),n=new Lb(Ba.toPolygons(e));t.clipTo(n,!1),n.clipTo(t),n.invert(),n.clipTo(t),n.invert();const i=t.allPolygons().concat(n.allPolygons());return Ba.create(i)},EW=(r,e)=>{let t=Ba.toPolygons(r);return t=t.concat(Ba.toPolygons(e)),Ba.create(t)};var AW=MW;const TW=Jt,IW=lm,LW=AW,DW=(...r)=>{r=TW(r);let e;for(e=1;e<r.length;e+=2)r.push(LW(r[e-1],r[e]));let t=r[e-1];return t=IW(t),t};var y_=DW;const OW=Jt,RW=Rt,BW=Lc,FW=im,NW=sm,kW=y_,UW=(...r)=>{r=OW(r);const e=r.map(i=>NW({z0:-1,z1:1},i)),t=kW(e),n=BW(t);return FW(n,RW.toPolygons(t))};var VW=UW;const zW=Jt,GW=pf,$W=rn,WW=Rt,XW=VW,HW=y_,YW=(...r)=>{if(r=zW(r),r.length===0)throw new Error("wrong number of arguments");if(!GW(r))throw new Error("only unions of the same type are supported");const e=r[0];return $W.isA(e)?XW(r):WW.isA(e)?HW(r):e};var qW=YW,wo={intersect:W$,scission:tW,subtract:CW,union:qW};const ZW=(()=>{let r=yr.cube({size:1});r=gr.translateZ(1/4,r);let e=r;return e=wo.intersect(e,r),e=wo.intersect(e,gr.rotateX(Bg*2,r)),e=wo.intersect(e,gr.rotateX(-Bg*2,r)),e})();function jW(r,e,t){return Xr(r,e,{name:"d3",defaultSize:16,faces:[{instances:[{faceIndex:0,from:{type:"edge",index:0},to:{type:"center"}},{faceIndex:1,from:{type:"edge",index:2},to:{type:"center"}}]},{instances:[{faceIndex:1,from:{type:"edge",index:0},to:{type:"center"}},{faceIndex:2,from:{type:"edge",index:2},to:{type:"center"}}]},{instances:[{faceIndex:0,from:{type:"edge",index:2},to:{type:"center"}},{faceIndex:2,from:{type:"edge",index:0},to:{type:"center"}}]}],extraOptions(n,i){const[s]=wr(n,24,360,1,24,"Segments"),o=bn(()=>gr.scale([i(),i(),i()],ZW));return{segments:s,basePrism:o}},base({basePrism:n,size:i,segments:s}){const o=yr.sphere({radius:i()/2,segments:s()});return wo.intersect(n(),o)},facesBase({basePrism:n}){return n()}},t)}function KW(r,e,t){return Xr(r,e,{name:"d4",defaultSize:16,faceScale:.5,faces:[{instances:[{faceIndex:3,from:{type:"vertex",index:1},to:{type:"center"}},{faceIndex:1,from:{type:"vertex",index:1},to:{type:"center"}},{faceIndex:2,from:{type:"vertex",index:0},to:{type:"center"}}]},{instances:[{faceIndex:3,from:{type:"vertex",index:0},to:{type:"center"}},{faceIndex:0,from:{type:"vertex",index:0},to:{type:"center"}},{faceIndex:2,from:{type:"vertex",index:1},to:{type:"center"}}]},{instances:[{faceIndex:3,from:{type:"vertex",index:2},to:{type:"center"}},{faceIndex:1,from:{type:"vertex",index:0},to:{type:"center"}},{faceIndex:0,from:{type:"vertex",index:1},to:{type:"center"}}]},{instances:[{faceIndex:0,from:{type:"vertex",index:2},to:{type:"center"}},{faceIndex:1,from:{type:"vertex",index:2},to:{type:"center"}},{faceIndex:2,from:{type:"vertex",index:2},to:{type:"center"}}]}],extraOptions(n,i){const s=bn(()=>i()*Math.sqrt(3)/3),o=bn(()=>i()*Math.sqrt(6)/3);return{baseRadius:s,pyramidHeight:o}},base({size:n,baseRadius:i,pyramidHeight:s}){const o=i(),a=n(),u=s(),f=a/2,h=-o/2;return yr.polyhedron({points:[[0,o,0],[-f,h,0],[f,h,0],[0,0,u]],faces:[[0,1,2],[0,3,1],[0,2,3],[1,3,2]],orientation:"inward"})}},t)}function JW(r,e,t){return Xr(r,e,{name:"d4c",defaultSize:14,faces:[{instances:[{faceIndex:5,from:{type:"edge",index:3},to:{type:"edge",index:1}}]},{instances:[{faceIndex:0,from:{type:"edge",index:3},to:{type:"edge",index:1}}]},{instances:[{faceIndex:1,from:{type:"edge",index:2},to:{type:"edge",index:0}}]},{instances:[{faceIndex:4,from:{type:"edge",index:2},to:{type:"edge",index:0}}]}],extraOptions(n){const[i]=wr(n,1,40,1,21,"Body length"),[s]=wr(n,1,20,1,7,"Point length");return{length:i,pointLength:s}},base({size:n,length:i,pointLength:s}){const o=n()/2*Math.SQRT2;let a,u;return a=yr.ellipsoid({radius:[o,s(),o],segments:4}),a=gr.rotateY(Math.PI/4,a),u=yr.cuboid({size:[n(),i(),n()]}),u=wo.union(u,gr.translateY(-i()/2,a)),u=wo.union(u,gr.translateY(i()/2,a)),u},facesBase({size:n}){return yr.cube({size:n()})}},t)}function QW(r,e,t){return Xr(r,e,{name:"d4i",defaultSize:16,faces:[{instances:[{faceIndex:1,from:{type:"edge",index:3},to:{type:"edge",index:1}}]},{instances:[{faceIndex:3,from:{type:"edge",index:1},to:{type:"edge",index:3}}]},{instances:[{faceIndex:2,from:{type:"edge",index:0},to:{type:"edge",index:2}}]},{instances:[{faceIndex:0,from:{type:"edge",index:2},to:{type:"edge",index:0}}]}],extraOptions(n,i){const[s]=wr(n,0,20,.1,1.4,"Body length"),[o]=wr(n,4,360,2,24,"Curve segments");return{cylinderOffset:bn(()=>i()/4+s()/2),length:s,segments:o}},base({size:n,cylinderOffset:i,segments:s}){const o=n(),a=o/2,u=i(),f=yr.cylinder({height:o,radius:a,segments:s()}),h=yr.cuboid({size:[o,u*2,o]}),p=gr.translateY(u,f);let g=gr.rotateY(oc,f);return g=gr.translateY(-u,g),wo.union(p,h,g)},facesBase({size:n,cylinderOffset:i}){const s=i(),o=yr.cube({size:n()}),a=gr.translateY(s,o);let u=gr.rotateY(oc,o);u=gr.translateY(-s,u);const f=Rt.toPolygons(a),h=Rt.toPolygons(u);return Rt.fromPoints([dn(f,4).vertices,dn(f,5).vertices,dn(h,4).vertices,dn(h,5).vertices])}},t)}const Hu=2/3;function eX(r,e,t){return Xr(r,e,{name:"d4p",defaultSize:14,faces:[{instances:[{faceIndex:2,from:{type:"edge",index:1},to:{type:"center"},t:Hu}]},{instances:[{faceIndex:3,from:{type:"edge",index:1},to:{type:"center"},t:Hu}]},{instances:[{faceIndex:1,from:{type:"edge",index:1},to:{type:"center"},t:Hu}]},{instances:[{faceIndex:0,from:{type:"edge",index:1},to:{type:"center"},t:Hu}]}],extraOptions(n){const[i]=wr(n,1,40,1,20,"Body length"),[s]=wr(n,1,40,1,6,"Point length");return{length1:i,length2:s}},base({size:n,length1:i,length2:s}){const o=n()/2,a=i(),u=s(),f=(i()-s())/2;return yr.polyhedron({points:[[0,-a+f,0],[0,u+f,0],[-o,f,o],[o,f,o],[-o,f,-o],[o,f,-o]],faces:[[0,5,4],[0,3,5],[0,2,3],[0,4,2],[1,4,5],[1,5,3],[1,3,2],[1,2,4]],orientation:"inward"})}},t)}function tX(r,e,t){return Xr(r,e,{name:"d6",defaultSize:16,faces:[{instances:[{faceIndex:5,from:{type:"edge",index:3},to:{type:"edge",index:1}}]},{instances:[{faceIndex:2,from:{type:"edge",index:0},to:{type:"edge",index:2}}]},{instances:[{faceIndex:1,from:{type:"edge",index:1},to:{type:"edge",index:3}}]},{instances:[{faceIndex:0,from:{type:"edge",index:1},to:{type:"edge",index:3}}]},{instances:[{faceIndex:3,from:{type:"edge",index:2},to:{type:"edge",index:0}}]},{instances:[{faceIndex:4,from:{type:"edge",index:3},to:{type:"edge",index:1}}]}],extraOptions(){return{}},base({size:n}){return yr.cube({size:n()})}},t)}const xa=Math.SQRT2/2,nX=df({points:[[0,0,xa],[0,0,-xa],[xa,0,0],[-xa,0,0],[0,xa,0],[0,-xa,0]],faces:[[0,2,4],[0,4,3],[0,3,5],[0,5,2],[1,2,5],[1,5,3],[1,3,4],[1,4,2]]}),rX=[0,4,3,7,2,6,1,5];function iX(r,e,t){const n=rX.map(i=>({instances:[{faceIndex:i,polygonCenter:!0,from:{type:"vertex",index:0},to:{type:"edge",index:2}}]}));return Xr(r,e,{name:"d8",defaultSize:16,faceScale:.6,faces:n,extraOptions(){return{}},base({size:i}){return nX(i()/2)}},t)}function sX(r){document.addEventListener("dragover",e=>{e.preventDefault()}),document.addEventListener("drop",e=>{var i;e.preventDefault();const t=(i=e.dataTransfer)==null?void 0:i.files;if(t===void 0)return;const n=[];for(let s=0;s<t.length;s++){const o=t.item(s);o!==null&&n.push(o.arrayBuffer())}Promise.all(n).then(s=>{r(s)})})}const vp=Symbol("store-raw"),yc=Symbol("store-node"),oX=Symbol("store-name");function w_(r){let e;return r!=null&&typeof r=="object"&&(r[Bs]||!(e=Object.getPrototypeOf(r))||e===Object.prototype||Array.isArray(r))}function A0(r,e=new Set){let t,n,i,s;if(t=r!=null&&r[vp])return t;if(!w_(r)||e.has(r))return r;if(Array.isArray(r)){Object.isFrozen(r)?r=r.slice(0):e.add(r);for(let o=0,a=r.length;o<a;o++)i=r[o],(n=A0(i,e))!==i&&(r[o]=n)}else{Object.isFrozen(r)?r=Object.assign({},r):e.add(r);const o=Object.keys(r),a=Object.getOwnPropertyDescriptors(r);for(let u=0,f=o.length;u<f;u++)s=o[u],!a[s].get&&(i=r[s],(n=A0(i,e))!==i&&(r[s]=n))}return r}function fm(r){let e=r[yc];return e||Object.defineProperty(r,yc,{value:e={}}),e}function xp(r,e,t){return r[e]||(r[e]=S_(t))}function __(r){if(Zy()){const e=fm(r);(e._||(e._=S_()))()}}function aX(r){return __(r),Reflect.ownKeys(r)}function S_(r){const[e,t]=Ds(r,{equals:!1,internal:!0});return e.$=t,e}function Db(r,e,t,n=!1){if(!n&&r[e]===t)return;const i=r[e],s=r.length;t===void 0?delete r[e]:r[e]=t;let o=fm(r),a;(a=xp(o,e,i))&&a.$(()=>t),Array.isArray(r)&&r.length!==s&&(a=xp(o,"length",s))&&a.$(r.length),(a=o._)&&a.$()}function lX(r,e){const t=Reflect.getOwnPropertyDescriptor(r,e);return!t||t.get||t.set||!t.configurable||e===Bs||e===yc||e===oX||(delete t.value,delete t.writable,t.get=()=>r[Bs][e],t.set=n=>r[Bs][e]=n),t}const cX={get(r,e,t){if(e===vp)return r;if(e===Bs)return t;if(e===Lg)return __(r),t;const n=fm(r),i=n.hasOwnProperty(e);let s=i?n[e]():r[e];if(e===yc||e==="__proto__")return s;if(!i){const o=Object.getOwnPropertyDescriptor(r,e),a=typeof s=="function";if(Zy()&&(!a||r.hasOwnProperty(e))&&!(o&&o.get))s=xp(n,e,s)();else if(s!=null&&a&&s===Array.prototype[e])return(...u)=>Qu(()=>Array.prototype[e].apply(t,u))}return w_(s)?C_(s):s},has(r,e){return e===vp||e===Bs||e===Lg||e===yc||e==="__proto__"?!0:(this.get(r,e,r),e in r)},set(r,e,t){return Qu(()=>Db(r,e,A0(t))),!0},deleteProperty(r,e){return Qu(()=>Db(r,e,void 0,!0)),!0},ownKeys:aX,getOwnPropertyDescriptor:lX};function C_(r,e){let t=r[Bs];if(!t){Object.defineProperty(r,Bs,{value:t=new Proxy(r,cX)});const n=Object.keys(r),i=Object.getOwnPropertyDescriptors(r);for(let s=0,o=n.length;s<o;s++){const a=n[s];if(i[a].get){const u=i[a].get.bind(t);Object.defineProperty(r,a,{get:u})}if(i[a].set){const u=i[a].set;Object.defineProperty(r,a,{set:h=>Qu(()=>u.call(t,h))})}}}return t}function hm(r,e){const t=A0(r||{});return C_(t)}var T0={},uX={get exports(){return T0},set exports(r){T0=r}};/*! Tweakpane 3.1.4 (c) 2016 cocopon, licensed under the MIT license. */(function(r,e){(function(t,n){n(e)})(_a,function(t){class n{constructor(c){const[m,S]=c.split("-"),z=m.split(".");this.major=parseInt(z[0],10),this.minor=parseInt(z[1],10),this.patch=parseInt(z[2],10),this.prerelease=S??null}toString(){const c=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[c,this.prerelease].join("-"):c}}class i{constructor(c){this.controller_=c}get element(){return this.controller_.view.element}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(c){this.controller_.viewProps.set("disabled",c)}get hidden(){return this.controller_.viewProps.get("hidden")}set hidden(c){this.controller_.viewProps.set("hidden",c)}dispose(){this.controller_.viewProps.set("disposed",!0)}}class s{constructor(c){this.target=c}}class o extends s{constructor(c,m,S,z){super(c),this.value=m,this.presetKey=S,this.last=z??!0}}class a extends s{constructor(c,m,S){super(c),this.value=m,this.presetKey=S}}class u extends s{constructor(c,m){super(c),this.expanded=m}}class f extends s{constructor(c,m){super(c),this.index=m}}function h(v){return v}function p(v){return v==null}function g(v,c){if(v.length!==c.length)return!1;for(let m=0;m<v.length;m++)if(v[m]!==c[m])return!1;return!0}function b(v,c){let m=v;do{const S=Object.getOwnPropertyDescriptor(m,c);if(S&&(S.set!==void 0||S.writable===!0))return!0;m=Object.getPrototypeOf(m)}while(m!==null);return!1}const C={alreadydisposed:()=>"View has been already disposed",invalidparams:v=>`Invalid parameters for '${v.name}'`,nomatchingcontroller:v=>`No matching controller for '${v.key}'`,nomatchingview:v=>`No matching view for '${JSON.stringify(v.params)}'`,notbindable:()=>"Value is not bindable",propertynotfound:v=>`Property '${v.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class y{constructor(c){var m;this.message=(m=C[c.type](c.context))!==null&&m!==void 0?m:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=c.type}static alreadyDisposed(){return new y({type:"alreadydisposed"})}static notBindable(){return new y({type:"notbindable"})}static propertyNotFound(c){return new y({type:"propertynotfound",context:{name:c}})}static shouldNeverHappen(){return new y({type:"shouldneverhappen"})}}class w{constructor(c,m,S){this.obj_=c,this.key_=m,this.presetKey_=S??m}static isBindable(c){return!(c===null||typeof c!="object")}get key(){return this.key_}get presetKey(){return this.presetKey_}read(){return this.obj_[this.key_]}write(c){this.obj_[this.key_]=c}writeProperty(c,m){const S=this.read();if(!w.isBindable(S))throw y.notBindable();if(!(c in S))throw y.propertyNotFound(c);S[c]=m}}class A extends i{get label(){return this.controller_.props.get("label")}set label(c){this.controller_.props.set("label",c)}get title(){var c;return(c=this.controller_.valueController.props.get("title"))!==null&&c!==void 0?c:""}set title(c){this.controller_.valueController.props.set("title",c)}on(c,m){const S=m.bind(this);return this.controller_.valueController.emitter.on(c,()=>{S(new s(this))}),this}}class O{constructor(){this.observers_={}}on(c,m){let S=this.observers_[c];return S||(S=this.observers_[c]=[]),S.push({handler:m}),this}off(c,m){const S=this.observers_[c];return S&&(this.observers_[c]=S.filter(z=>z.handler!==m)),this}emit(c,m){const S=this.observers_[c];S&&S.forEach(z=>{z.handler(m)})}}const E="tp";function T(v){return(m,S)=>[E,"-",v,"v",m?`_${m}`:"",S?`-${S}`:""].join("")}function M(v,c){return m=>c(v(m))}function B(v){return v.rawValue}function F(v,c){v.emitter.on("change",M(B,c)),c(v.rawValue)}function I(v,c,m){F(v.value(c),m)}function N(v,c,m){m?v.classList.add(c):v.classList.remove(c)}function G(v,c){return m=>{N(v,c,m)}}function X(v,c){F(v,m=>{c.textContent=m??""})}const J=T("btn");class Z{constructor(c,m){this.element=c.createElement("div"),this.element.classList.add(J()),m.viewProps.bindClassModifiers(this.element);const S=c.createElement("button");S.classList.add(J("b")),m.viewProps.bindDisabled(S),this.element.appendChild(S),this.buttonElement=S;const z=c.createElement("div");z.classList.add(J("t")),X(m.props.value("title"),z),this.buttonElement.appendChild(z)}}class H{constructor(c,m){this.emitter=new O,this.onClick_=this.onClick_.bind(this),this.props=m.props,this.viewProps=m.viewProps,this.view=new Z(c,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class ne{constructor(c,m){var S;this.constraint_=m==null?void 0:m.constraint,this.equals_=(S=m==null?void 0:m.equals)!==null&&S!==void 0?S:(z,Q)=>z===Q,this.emitter=new O,this.rawValue_=c}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(c){this.setRawValue(c,{forceEmit:!1,last:!0})}setRawValue(c,m){const S=m??{forceEmit:!1,last:!0},z=this.constraint_?this.constraint_.constrain(c):c,Q=this.rawValue_;this.equals_(Q,z)&&!S.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=z,this.emitter.emit("change",{options:S,previousRawValue:Q,rawValue:z,sender:this}))}}class ie{constructor(c){this.emitter=new O,this.value_=c}get rawValue(){return this.value_}set rawValue(c){this.setRawValue(c,{forceEmit:!1,last:!0})}setRawValue(c,m){const S=m??{forceEmit:!1,last:!0},z=this.value_;z===c&&!S.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=c,this.emitter.emit("change",{options:S,previousRawValue:z,rawValue:this.value_,sender:this}))}}function be(v,c){const m=c==null?void 0:c.constraint,S=c==null?void 0:c.equals;return!m&&!S?new ie(v):new ne(v,c)}class oe{constructor(c){this.emitter=new O,this.valMap_=c;for(const m in this.valMap_)this.valMap_[m].emitter.on("change",()=>{this.emitter.emit("change",{key:m,sender:this})})}static createCore(c){return Object.keys(c).reduce((S,z)=>Object.assign(S,{[z]:be(c[z])}),{})}static fromObject(c){const m=this.createCore(c);return new oe(m)}get(c){return this.valMap_[c].rawValue}set(c,m){this.valMap_[c].rawValue=m}value(c){return this.valMap_[c]}}function Te(v,c){const S=Object.keys(c).reduce((z,Q)=>{if(z===void 0)return;const ge=c[Q],Ze=ge(v[Q]);return Ze.succeeded?Object.assign(Object.assign({},z),{[Q]:Ze.value}):void 0},{});return S}function Ie(v,c){return v.reduce((m,S)=>{if(m===void 0)return;const z=c(S);if(!(!z.succeeded||z.value===void 0))return[...m,z.value]},[])}function ve(v){return v===null?!1:typeof v=="object"}function he(v){return c=>m=>{if(!c&&m===void 0)return{succeeded:!1,value:void 0};if(c&&m===void 0)return{succeeded:!0,value:void 0};const S=v(m);return S!==void 0?{succeeded:!0,value:S}:{succeeded:!1,value:void 0}}}function Be(v){return{custom:c=>he(c)(v),boolean:he(c=>typeof c=="boolean"?c:void 0)(v),number:he(c=>typeof c=="number"?c:void 0)(v),string:he(c=>typeof c=="string"?c:void 0)(v),function:he(c=>typeof c=="function"?c:void 0)(v),constant:c=>he(m=>m===c?c:void 0)(v),raw:he(c=>c)(v),object:c=>he(m=>{if(ve(m))return Te(m,c)})(v),array:c=>he(m=>{if(Array.isArray(m))return Ie(m,c)})(v)}}const Ae={optional:Be(!0),required:Be(!1)};function $e(v,c){const m=Ae.required.object(c)(v);return m.succeeded?m.value:void 0}function Ee(v){console.warn([`Missing '${v.key}' of ${v.target} in ${v.place}.`,"Please rebuild plugins with the latest core package."].join(" "))}function ut(v){return v&&v.parentElement&&v.parentElement.removeChild(v),null}class Se{constructor(c){this.value_=c}static create(c){return[new Se(c),(m,S)=>{c.setRawValue(m,S)}]}get emitter(){return this.value_.emitter}get rawValue(){return this.value_.rawValue}}const we=T("");function de(v,c){return G(v,we(void 0,c))}class ye extends oe{constructor(c){var m;super(c),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=Se.create(be(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(m=this.get("parent"))===null||m===void 0||m.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(c){var m,S,z;const Q=c??{};return new ye(oe.createCore({disabled:(m=Q.disabled)!==null&&m!==void 0?m:!1,disposed:!1,hidden:(S=Q.hidden)!==null&&S!==void 0?S:!1,parent:(z=Q.parent)!==null&&z!==void 0?z:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(c){F(this.globalDisabled_,de(c,"disabled")),I(this,"hidden",de(c,"hidden"))}bindDisabled(c){F(this.globalDisabled_,m=>{c.disabled=m})}bindTabIndex(c){F(this.globalDisabled_,m=>{c.tabIndex=m?-1:0})}handleDispose(c){this.value("disposed").emitter.on("change",m=>{m&&c()})}getGlobalDisabled_(){const c=this.get("parent");return(c?c.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(c){var m;const S=c.previousRawValue;S==null||S.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(m=this.get("parent"))===null||m===void 0||m.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}function ue(){return["veryfirst","first","last","verylast"]}const pe=T(""),Me={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class Oe{constructor(c){this.parent_=null,this.blade=c.blade,this.view=c.view,this.viewProps=c.viewProps;const m=this.view.element;this.blade.value("positions").emitter.on("change",()=>{ue().forEach(S=>{m.classList.remove(pe(void 0,Me[S]))}),this.blade.get("positions").forEach(S=>{m.classList.add(pe(void 0,Me[S]))})}),this.viewProps.handleDispose(()=>{ut(m)})}get parent(){return this.parent_}set parent(c){if(this.parent_=c,!("parent"in this.viewProps.valMap_)){Ee({key:"parent",target:ye.name,place:"BladeController.parent"});return}this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}}const Le="http://www.w3.org/2000/svg";function ze(v){v.offsetHeight}function Fe(v,c){const m=v.style.transition;v.style.transition="none",c(),v.style.transition=m}function qe(v){return v.ontouchstart!==void 0}function pt(){return globalThis}function ct(){return pt().document}function Y(v){const c=v.ownerDocument.defaultView;return c&&"document"in c?v.getContext("2d",{willReadFrequently:!0}):null}const W={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function me(v,c){const m=v.createElementNS(Le,"svg");return m.innerHTML=W[c],m}function Ne(v,c,m){v.insertBefore(c,v.children[m])}function We(v){v.parentElement&&v.parentElement.removeChild(v)}function k(v){for(;v.children.length>0;)v.removeChild(v.children[0])}function L(v){for(;v.childNodes.length>0;)v.removeChild(v.childNodes[0])}function P(v){return v.relatedTarget?v.relatedTarget:"explicitOriginalTarget"in v?v.explicitOriginalTarget:null}const U=T("lbl");function j(v,c){const m=v.createDocumentFragment();return c.split(`
`).map(z=>v.createTextNode(z)).forEach((z,Q)=>{Q>0&&m.appendChild(v.createElement("br")),m.appendChild(z)}),m}class re{constructor(c,m){this.element=c.createElement("div"),this.element.classList.add(U()),m.viewProps.bindClassModifiers(this.element);const S=c.createElement("div");S.classList.add(U("l")),I(m.props,"label",Q=>{p(Q)?this.element.classList.add(U(void 0,"nol")):(this.element.classList.remove(U(void 0,"nol")),L(S),S.appendChild(j(c,Q)))}),this.element.appendChild(S),this.labelElement=S;const z=c.createElement("div");z.classList.add(U("v")),this.element.appendChild(z),this.valueElement=z}}class se extends Oe{constructor(c,m){const S=m.valueController.viewProps;super(Object.assign(Object.assign({},m),{view:new re(c,{props:m.props,viewProps:S}),viewProps:S})),this.props=m.props,this.valueController=m.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}const Ve={id:"button",type:"blade",accept(v){const c=Ae,m=$e(v,{title:c.required.string,view:c.required.constant("button"),label:c.optional.string});return m?{params:m}:null},controller(v){return new se(v.document,{blade:v.blade,props:oe.fromObject({label:v.params.label}),valueController:new H(v.document,{props:oe.fromObject({title:v.params.title}),viewProps:v.viewProps})})},api(v){return!(v.controller instanceof se)||!(v.controller.valueController instanceof H)?null:new A(v.controller)}};class Ye extends Oe{constructor(c){super(c),this.value=c.value}}function it(){return new oe({positions:be([],{equals:g})})}class st extends oe{constructor(c){super(c)}static create(c){const m={completed:!0,expanded:c,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},S=oe.createCore(m);return new st(S)}get styleExpanded(){var c;return(c=this.get("temporaryExpanded"))!==null&&c!==void 0?c:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const c=this.get("expandedHeight");return this.get("shouldFixHeight")&&!p(c)?`${c}px`:"auto"}bindExpandedClass(c,m){const S=()=>{this.styleExpanded?c.classList.add(m):c.classList.remove(m)};I(this,"expanded",S),I(this,"temporaryExpanded",S)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function ot(v,c){let m=0;return Fe(c,()=>{v.set("expandedHeight",null),v.set("temporaryExpanded",!0),ze(c),m=c.clientHeight,v.set("temporaryExpanded",null),ze(c)}),m}function ae(v,c){c.style.height=v.styleHeight}function De(v,c){v.value("expanded").emitter.on("beforechange",()=>{v.set("completed",!1),p(v.get("expandedHeight"))&&v.set("expandedHeight",ot(v,c)),v.set("shouldFixHeight",!0),ze(c)}),v.emitter.on("change",()=>{ae(v,c)}),ae(v,c),c.addEventListener("transitionend",m=>{m.propertyName==="height"&&v.cleanUpTransition()})}class He extends i{constructor(c,m){super(c),this.rackApi_=m}}function nt(v,c){return v.addBlade(Object.assign(Object.assign({},c),{view:"button"}))}function lt(v,c){return v.addBlade(Object.assign(Object.assign({},c),{view:"folder"}))}function Ft(v,c){const m=c??{};return v.addBlade(Object.assign(Object.assign({},m),{view:"separator"}))}function an(v,c){return v.addBlade(Object.assign(Object.assign({},c),{view:"tab"}))}class ln{constructor(c){this.emitter=new O,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=c}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(c){for(const m of this.allItems())if(c(m))return m;return null}includes(c){return this.cache_.has(c)}add(c,m){if(this.includes(c))throw y.shouldNeverHappen();const S=m!==void 0?m:this.items_.length;this.items_.splice(S,0,c),this.cache_.add(c);const z=this.extract_(c);z&&(z.emitter.on("add",this.onSubListAdd_),z.emitter.on("remove",this.onSubListRemove_),z.allItems().forEach(Q=>{this.cache_.add(Q)})),this.emitter.emit("add",{index:S,item:c,root:this,target:this})}remove(c){const m=this.items_.indexOf(c);if(m<0)return;this.items_.splice(m,1),this.cache_.delete(c);const S=this.extract_(c);S&&(S.emitter.off("add",this.onSubListAdd_),S.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:m,item:c,root:this,target:this})}onSubListAdd_(c){this.cache_.add(c.item),this.emitter.emit("add",{index:c.index,item:c.item,root:this,target:c.target})}onSubListRemove_(c){this.cache_.delete(c.item),this.emitter.emit("remove",{index:c.index,item:c.item,root:this,target:c.target})}}class $n extends i{constructor(c){super(c),this.onBindingChange_=this.onBindingChange_.bind(this),this.emitter_=new O,this.controller_.binding.emitter.on("change",this.onBindingChange_)}get label(){return this.controller_.props.get("label")}set label(c){this.controller_.props.set("label",c)}on(c,m){const S=m.bind(this);return this.emitter_.on(c,z=>{S(z.event)}),this}refresh(){this.controller_.binding.read()}onBindingChange_(c){const m=c.sender.target.read();this.emitter_.emit("change",{event:new o(this,m,this.controller_.binding.target.presetKey,c.options.last)})}}class At extends se{constructor(c,m){super(c,m),this.binding=m.binding}}class Un extends i{constructor(c){super(c),this.onBindingUpdate_=this.onBindingUpdate_.bind(this),this.emitter_=new O,this.controller_.binding.emitter.on("update",this.onBindingUpdate_)}get label(){return this.controller_.props.get("label")}set label(c){this.controller_.props.set("label",c)}on(c,m){const S=m.bind(this);return this.emitter_.on(c,z=>{S(z.event)}),this}refresh(){this.controller_.binding.read()}onBindingUpdate_(c){const m=c.sender.target.read();this.emitter_.emit("update",{event:new a(this,m,this.controller_.binding.target.presetKey)})}}class sn extends se{constructor(c,m){super(c,m),this.binding=m.binding,this.viewProps.bindDisabled(this.binding.ticker),this.viewProps.handleDispose(()=>{this.binding.dispose()})}}function Ii(v){return v instanceof sr?v.apiSet_:v instanceof He?v.rackApi_.apiSet_:null}function Cr(v,c){const m=v.find(S=>S.controller_===c);if(!m)throw y.shouldNeverHappen();return m}function si(v,c,m){if(!w.isBindable(v))throw y.notBindable();return new w(v,c,m)}class sr extends i{constructor(c,m){super(c),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.onRackInputChange_=this.onRackInputChange_.bind(this),this.onRackMonitorUpdate_=this.onRackMonitorUpdate_.bind(this),this.emitter_=new O,this.apiSet_=new ln(Ii),this.pool_=m;const S=this.controller_.rack;S.emitter.on("add",this.onRackAdd_),S.emitter.on("remove",this.onRackRemove_),S.emitter.on("inputchange",this.onRackInputChange_),S.emitter.on("monitorupdate",this.onRackMonitorUpdate_),S.children.forEach(z=>{this.setUpApi_(z)})}get children(){return this.controller_.rack.children.map(c=>Cr(this.apiSet_,c))}addInput(c,m,S){const z=S??{},Q=this.controller_.view.element.ownerDocument,ge=this.pool_.createInput(Q,si(c,m,z.presetKey),z),Ze=new $n(ge);return this.add(Ze,z.index)}addMonitor(c,m,S){const z=S??{},Q=this.controller_.view.element.ownerDocument,ge=this.pool_.createMonitor(Q,si(c,m),z),Ze=new Un(ge);return this.add(Ze,z.index)}addFolder(c){return lt(this,c)}addButton(c){return nt(this,c)}addSeparator(c){return Ft(this,c)}addTab(c){return an(this,c)}add(c,m){this.controller_.rack.add(c.controller_,m);const S=this.apiSet_.find(z=>z.controller_===c.controller_);return S&&this.apiSet_.remove(S),this.apiSet_.add(c),c}remove(c){this.controller_.rack.remove(c.controller_)}addBlade(c){const m=this.controller_.view.element.ownerDocument,S=this.pool_.createBlade(m,c),z=this.pool_.createBladeApi(S);return this.add(z,c.index)}on(c,m){const S=m.bind(this);return this.emitter_.on(c,z=>{S(z.event)}),this}setUpApi_(c){this.apiSet_.find(S=>S.controller_===c)||this.apiSet_.add(this.pool_.createBladeApi(c))}onRackAdd_(c){this.setUpApi_(c.bladeController)}onRackRemove_(c){if(c.isRoot){const m=Cr(this.apiSet_,c.bladeController);this.apiSet_.remove(m)}}onRackInputChange_(c){const m=c.bladeController;if(m instanceof At){const S=Cr(this.apiSet_,m),z=m.binding;this.emitter_.emit("change",{event:new o(S,z.target.read(),z.target.presetKey,c.options.last)})}else if(m instanceof Ye){const S=Cr(this.apiSet_,m);this.emitter_.emit("change",{event:new o(S,m.value.rawValue,void 0,c.options.last)})}}onRackMonitorUpdate_(c){if(!(c.bladeController instanceof sn))throw y.shouldNeverHappen();const m=Cr(this.apiSet_,c.bladeController),S=c.bladeController.binding;this.emitter_.emit("update",{event:new a(m,S.target.read(),S.target.presetKey)})}}class q extends He{constructor(c,m){super(c,new sr(c.rackController,m)),this.emitter_=new O,this.controller_.foldable.value("expanded").emitter.on("change",S=>{this.emitter_.emit("fold",{event:new u(this,S.sender.rawValue)})}),this.rackApi_.on("change",S=>{this.emitter_.emit("change",{event:S})}),this.rackApi_.on("update",S=>{this.emitter_.emit("update",{event:S})})}get expanded(){return this.controller_.foldable.get("expanded")}set expanded(c){this.controller_.foldable.set("expanded",c)}get title(){return this.controller_.props.get("title")}set title(c){this.controller_.props.set("title",c)}get children(){return this.rackApi_.children}addInput(c,m,S){return this.rackApi_.addInput(c,m,S)}addMonitor(c,m,S){return this.rackApi_.addMonitor(c,m,S)}addFolder(c){return this.rackApi_.addFolder(c)}addButton(c){return this.rackApi_.addButton(c)}addSeparator(c){return this.rackApi_.addSeparator(c)}addTab(c){return this.rackApi_.addTab(c)}add(c,m){return this.rackApi_.add(c,m)}remove(c){this.rackApi_.remove(c)}addBlade(c){return this.rackApi_.addBlade(c)}on(c,m){const S=m.bind(this);return this.emitter_.on(c,z=>{S(z.event)}),this}}class _e extends Oe{constructor(c){super({blade:c.blade,view:c.view,viewProps:c.rackController.viewProps}),this.rackController=c.rackController}}class Re{constructor(c,m){const S=T(m.viewName);this.element=c.createElement("div"),this.element.classList.add(S()),m.viewProps.bindClassModifiers(this.element)}}function xe(v,c){for(let m=0;m<v.length;m++){const S=v[m];if(S instanceof At&&S.binding===c)return S}return null}function ke(v,c){for(let m=0;m<v.length;m++){const S=v[m];if(S instanceof sn&&S.binding===c)return S}return null}function ft(v,c){for(let m=0;m<v.length;m++){const S=v[m];if(S instanceof Ye&&S.value===c)return S}return null}function mt(v){return v instanceof Ct?v.rack:v instanceof _e?v.rackController.rack:null}function _t(v){const c=mt(v);return c?c.bcSet_:null}class yt{constructor(c){var m,S;this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildInputChange_=this.onChildInputChange_.bind(this),this.onChildMonitorUpdate_=this.onChildMonitorUpdate_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onDescendantLayout_=this.onDescendantLayout_.bind(this),this.onDescendantInputChange_=this.onDescendantInputChange_.bind(this),this.onDescendantMonitorUpdate_=this.onDescendantMonitorUpdate_.bind(this),this.emitter=new O,this.blade_=(m=c.blade)!==null&&m!==void 0?m:null,(S=this.blade_)===null||S===void 0||S.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=c.viewProps,this.bcSet_=new ln(_t),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(c,m){var S;(S=c.parent)===null||S===void 0||S.remove(c),b(c,"parent")?c.parent=this:(c.parent_=this,Ee({key:"parent",target:"BladeController",place:"BladeRack.add"})),this.bcSet_.add(c,m)}remove(c){b(c,"parent")?c.parent=null:(c.parent_=null,Ee({key:"parent",target:"BladeController",place:"BladeRack.remove"})),this.bcSet_.remove(c)}find(c){return this.bcSet_.allItems().filter(m=>m instanceof c)}onSetAdd_(c){this.updatePositions_();const m=c.target===c.root;if(this.emitter.emit("add",{bladeController:c.item,index:c.index,isRoot:m,sender:this}),!m)return;const S=c.item;if(S.viewProps.emitter.on("change",this.onChildViewPropsChange_),S.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),S.viewProps.handleDispose(this.onChildDispose_),S instanceof At)S.binding.emitter.on("change",this.onChildInputChange_);else if(S instanceof sn)S.binding.emitter.on("update",this.onChildMonitorUpdate_);else if(S instanceof Ye)S.value.emitter.on("change",this.onChildValueChange_);else{const z=mt(S);if(z){const Q=z.emitter;Q.on("layout",this.onDescendantLayout_),Q.on("inputchange",this.onDescendantInputChange_),Q.on("monitorupdate",this.onDescendantMonitorUpdate_)}}}onSetRemove_(c){this.updatePositions_();const m=c.target===c.root;if(this.emitter.emit("remove",{bladeController:c.item,isRoot:m,sender:this}),!m)return;const S=c.item;if(S instanceof At)S.binding.emitter.off("change",this.onChildInputChange_);else if(S instanceof sn)S.binding.emitter.off("update",this.onChildMonitorUpdate_);else if(S instanceof Ye)S.value.emitter.off("change",this.onChildValueChange_);else{const z=mt(S);if(z){const Q=z.emitter;Q.off("layout",this.onDescendantLayout_),Q.off("inputchange",this.onDescendantInputChange_),Q.off("monitorupdate",this.onDescendantMonitorUpdate_)}}}updatePositions_(){const c=this.bcSet_.items.filter(z=>!z.viewProps.get("hidden")),m=c[0],S=c[c.length-1];this.bcSet_.items.forEach(z=>{const Q=[];z===m&&(Q.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&Q.push("veryfirst")),z===S&&(Q.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&Q.push("verylast")),z.blade.set("positions",Q)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(c){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(m=>m.viewProps.get("disposed")).forEach(m=>{this.bcSet_.remove(m)})}onChildInputChange_(c){const m=xe(this.find(At),c.sender);if(!m)throw y.alreadyDisposed();this.emitter.emit("inputchange",{bladeController:m,options:c.options,sender:this})}onChildMonitorUpdate_(c){const m=ke(this.find(sn),c.sender);if(!m)throw y.alreadyDisposed();this.emitter.emit("monitorupdate",{bladeController:m,sender:this})}onChildValueChange_(c){const m=ft(this.find(Ye),c.sender);if(!m)throw y.alreadyDisposed();this.emitter.emit("inputchange",{bladeController:m,options:c.options,sender:this})}onDescendantLayout_(c){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onDescendantInputChange_(c){this.emitter.emit("inputchange",{bladeController:c.bladeController,options:c.options,sender:this})}onDescendantMonitorUpdate_(c){this.emitter.emit("monitorupdate",{bladeController:c.bladeController,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class Ct extends Oe{constructor(c,m){super(Object.assign(Object.assign({},m),{view:new Re(c,{viewName:"brk",viewProps:m.viewProps})})),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const S=new yt({blade:m.root?void 0:m.blade,viewProps:m.viewProps});S.emitter.on("add",this.onRackAdd_),S.emitter.on("remove",this.onRackRemove_),this.rack=S,this.viewProps.handleDispose(()=>{for(let z=this.rack.children.length-1;z>=0;z--)this.rack.children[z].viewProps.set("disposed",!0)})}onRackAdd_(c){c.isRoot&&Ne(this.view.element,c.bladeController.view.element,c.index)}onRackRemove_(c){c.isRoot&&We(c.bladeController.view.element)}}const gt=T("cnt");class vt{constructor(c,m){var S;this.className_=T((S=m.viewName)!==null&&S!==void 0?S:"fld"),this.element=c.createElement("div"),this.element.classList.add(this.className_(),gt()),m.viewProps.bindClassModifiers(this.element),this.foldable_=m.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),I(this.foldable_,"completed",G(this.element,this.className_(void 0,"cpl")));const z=c.createElement("button");z.classList.add(this.className_("b")),I(m.props,"title",wt=>{p(wt)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),m.viewProps.bindDisabled(z),this.element.appendChild(z),this.buttonElement=z;const Q=c.createElement("div");Q.classList.add(this.className_("i")),this.element.appendChild(Q);const ge=c.createElement("div");ge.classList.add(this.className_("t")),X(m.props.value("title"),ge),this.buttonElement.appendChild(ge),this.titleElement=ge;const Ze=c.createElement("div");Ze.classList.add(this.className_("m")),this.buttonElement.appendChild(Ze);const dt=m.containerElement;dt.classList.add(this.className_("c")),this.element.appendChild(dt),this.containerElement=dt}}class kt extends _e{constructor(c,m){var S;const z=st.create((S=m.expanded)!==null&&S!==void 0?S:!0),Q=new Ct(c,{blade:m.blade,root:m.root,viewProps:m.viewProps});super(Object.assign(Object.assign({},m),{rackController:Q,view:new vt(c,{containerElement:Q.view.element,foldable:z,props:m.props,viewName:m.root?"rot":void 0,viewProps:m.viewProps})})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=m.props,this.foldable=z,De(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}const yn={id:"folder",type:"blade",accept(v){const c=Ae,m=$e(v,{title:c.required.string,view:c.required.constant("folder"),expanded:c.optional.boolean});return m?{params:m}:null},controller(v){return new kt(v.document,{blade:v.blade,expanded:v.params.expanded,props:oe.fromObject({title:v.params.title}),viewProps:v.viewProps})},api(v){return v.controller instanceof kt?new q(v.controller,v.pool):null}};class cn extends Ye{constructor(c,m){const S=m.valueController.viewProps;super(Object.assign(Object.assign({},m),{value:m.valueController.value,view:new re(c,{props:m.props,viewProps:S}),viewProps:S})),this.props=m.props,this.valueController=m.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}class wn extends i{}const Qt=T("spr");class Et{constructor(c,m){this.element=c.createElement("div"),this.element.classList.add(Qt()),m.viewProps.bindClassModifiers(this.element);const S=c.createElement("hr");S.classList.add(Qt("r")),this.element.appendChild(S)}}class dr extends Oe{constructor(c,m){super(Object.assign(Object.assign({},m),{view:new Et(c,{viewProps:m.viewProps})}))}}const un={id:"separator",type:"blade",accept(v){const m=$e(v,{view:Ae.required.constant("separator")});return m?{params:m}:null},controller(v){return new dr(v.document,{blade:v.blade,viewProps:v.viewProps})},api(v){return v.controller instanceof dr?new wn(v.controller):null}},Vn=T("tbi");class ns{constructor(c,m){this.element=c.createElement("div"),this.element.classList.add(Vn()),m.viewProps.bindClassModifiers(this.element),I(m.props,"selected",Q=>{Q?this.element.classList.add(Vn(void 0,"sel")):this.element.classList.remove(Vn(void 0,"sel"))});const S=c.createElement("button");S.classList.add(Vn("b")),m.viewProps.bindDisabled(S),this.element.appendChild(S),this.buttonElement=S;const z=c.createElement("div");z.classList.add(Vn("t")),X(m.props.value("title"),z),this.buttonElement.appendChild(z),this.titleElement=z}}class Hr{constructor(c,m){this.emitter=new O,this.onClick_=this.onClick_.bind(this),this.props=m.props,this.viewProps=m.viewProps,this.view=new ns(c,{props:m.props,viewProps:m.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class Yr{constructor(c,m){this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new Hr(c,{props:m.itemProps,viewProps:ye.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.cc_=new Ct(c,{blade:it(),viewProps:ye.create()}),this.props=m.props,I(this.props,"selected",S=>{this.itemController.props.set("selected",S),this.contentController.viewProps.set("hidden",!S)})}get itemController(){return this.ic_}get contentController(){return this.cc_}onItemClick_(){this.props.set("selected",!0)}}class mn{constructor(c,m){this.controller_=c,this.rackApi_=m}get title(){var c;return(c=this.controller_.itemController.props.get("title"))!==null&&c!==void 0?c:""}set title(c){this.controller_.itemController.props.set("title",c)}get selected(){return this.controller_.props.get("selected")}set selected(c){this.controller_.props.set("selected",c)}get children(){return this.rackApi_.children}addButton(c){return this.rackApi_.addButton(c)}addFolder(c){return this.rackApi_.addFolder(c)}addSeparator(c){return this.rackApi_.addSeparator(c)}addTab(c){return this.rackApi_.addTab(c)}add(c,m){this.rackApi_.add(c,m)}remove(c){this.rackApi_.remove(c)}addInput(c,m,S){return this.rackApi_.addInput(c,m,S)}addMonitor(c,m,S){return this.rackApi_.addMonitor(c,m,S)}addBlade(c){return this.rackApi_.addBlade(c)}}class $t extends He{constructor(c,m){super(c,new sr(c.rackController,m)),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.onSelect_=this.onSelect_.bind(this),this.emitter_=new O,this.pageApiMap_=new Map,this.rackApi_.on("change",S=>{this.emitter_.emit("change",{event:S})}),this.rackApi_.on("update",S=>{this.emitter_.emit("update",{event:S})}),this.controller_.tab.selectedIndex.emitter.on("change",this.onSelect_),this.controller_.pageSet.emitter.on("add",this.onPageAdd_),this.controller_.pageSet.emitter.on("remove",this.onPageRemove_),this.controller_.pageSet.items.forEach(S=>{this.setUpPageApi_(S)})}get pages(){return this.controller_.pageSet.items.map(c=>{const m=this.pageApiMap_.get(c);if(!m)throw y.shouldNeverHappen();return m})}addPage(c){const m=this.controller_.view.element.ownerDocument,S=new Yr(m,{itemProps:oe.fromObject({selected:!1,title:c.title}),props:oe.fromObject({selected:!1})});this.controller_.add(S,c.index);const z=this.pageApiMap_.get(S);if(!z)throw y.shouldNeverHappen();return z}removePage(c){this.controller_.remove(c)}on(c,m){const S=m.bind(this);return this.emitter_.on(c,z=>{S(z.event)}),this}setUpPageApi_(c){const m=this.rackApi_.apiSet_.find(z=>z.controller_===c.contentController);if(!m)throw y.shouldNeverHappen();const S=new mn(c,m);this.pageApiMap_.set(c,S)}onPageAdd_(c){this.setUpPageApi_(c.item)}onPageRemove_(c){if(!this.pageApiMap_.get(c.item))throw y.shouldNeverHappen();this.pageApiMap_.delete(c.item)}onSelect_(c){this.emitter_.emit("select",{event:new f(this,c.rawValue)})}}const rs=-1;class Wn{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=be(!0),this.selectedIndex=be(rs),this.items_=[]}add(c,m){const S=m??this.items_.length;this.items_.splice(S,0,c),c.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(c){const m=this.items_.indexOf(c);m<0||(this.items_.splice(m,1),c.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=rs,this.empty.rawValue=!0;return}const c=this.items_.findIndex(m=>m.rawValue);c<0?(this.items_.forEach((m,S)=>{m.rawValue=S===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((m,S)=>{m.rawValue=S===c}),this.selectedIndex.rawValue=c),this.empty.rawValue=!1}onItemSelectedChange_(c){if(c.rawValue){const m=this.items_.findIndex(S=>S===c.sender);this.items_.forEach((S,z)=>{S.rawValue=z===m}),this.selectedIndex.rawValue=m}else this.keepSelection_()}}const qr=T("tab");class Mt{constructor(c,m){this.element=c.createElement("div"),this.element.classList.add(qr(),gt()),m.viewProps.bindClassModifiers(this.element),F(m.empty,G(this.element,qr(void 0,"nop")));const S=c.createElement("div");S.classList.add(qr("t")),this.element.appendChild(S),this.itemsElement=S;const z=c.createElement("div");z.classList.add(qr("i")),this.element.appendChild(z);const Q=m.contentsElement;Q.classList.add(qr("c")),this.element.appendChild(Q),this.contentsElement=Q}}class is extends _e{constructor(c,m){const S=new Ct(c,{blade:m.blade,viewProps:m.viewProps}),z=new Wn;super({blade:m.blade,rackController:S,view:new Mt(c,{contentsElement:S.view.element,empty:z.empty,viewProps:m.viewProps})}),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.pageSet_=new ln(()=>null),this.pageSet_.emitter.on("add",this.onPageAdd_),this.pageSet_.emitter.on("remove",this.onPageRemove_),this.tab=z}get pageSet(){return this.pageSet_}add(c,m){this.pageSet_.add(c,m)}remove(c){this.pageSet_.remove(this.pageSet_.items[c])}onPageAdd_(c){const m=c.item;Ne(this.view.itemsElement,m.itemController.view.element,c.index),m.itemController.viewProps.set("parent",this.viewProps),this.rackController.rack.add(m.contentController,c.index),this.tab.add(m.props.value("selected"))}onPageRemove_(c){const m=c.item;We(m.itemController.view.element),m.itemController.viewProps.set("parent",null),this.rackController.rack.remove(m.contentController),this.tab.remove(m.props.value("selected"))}}const Bc={id:"tab",type:"blade",accept(v){const c=Ae,m=$e(v,{pages:c.required.array(c.required.object({title:c.required.string})),view:c.required.constant("tab")});return!m||m.pages.length===0?null:{params:m}},controller(v){const c=new is(v.document,{blade:v.blade,viewProps:v.viewProps});return v.params.pages.forEach(m=>{const S=new Yr(v.document,{itemProps:oe.fromObject({selected:!1,title:m.title}),props:oe.fromObject({selected:!1})});c.add(S)}),c},api(v){return v.controller instanceof is?new $t(v.controller,v.pool):null}};function Ef(v,c){const m=v.accept(c.params);if(!m)return null;const S=Ae.optional.boolean(c.params.disabled).value,z=Ae.optional.boolean(c.params.hidden).value;return v.controller({blade:it(),document:c.document,params:Object.assign(Object.assign({},m.params),{disabled:S,hidden:z}),viewProps:ye.create({disabled:S,hidden:z})})}class Af{constructor(){this.disabled=!1,this.emitter=new O}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class Tf{constructor(c,m){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=c,this.emitter=new O,this.interval_=m,this.setTimer_()}get disabled(){return this.disabled_}set disabled(c){this.disabled_=c,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const c=this.doc_.defaultView;c&&c.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const c=this.doc_.defaultView;c&&(this.timerId_=c.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class l{constructor(c){this.constraints=c}constrain(c){return this.constraints.reduce((m,S)=>S.constrain(m),c)}}function d(v,c){if(v instanceof c)return v;if(v instanceof l){const m=v.constraints.reduce((S,z)=>S||(z instanceof c?z:null),null);if(m)return m}return null}class x{constructor(c){this.values=oe.fromObject({max:c.max,min:c.min})}constrain(c){const m=this.values.get("max"),S=this.values.get("min");return Math.min(Math.max(c,S),m)}}class _{constructor(c){this.values=oe.fromObject({options:c})}get options(){return this.values.get("options")}constrain(c){const m=this.values.get("options");return m.length===0||m.filter(z=>z.value===c).length>0?c:m[0].value}}class D{constructor(c){this.values=oe.fromObject({max:c.max,min:c.min})}get maxValue(){return this.values.get("max")}get minValue(){return this.values.get("min")}constrain(c){const m=this.values.get("max"),S=this.values.get("min");let z=c;return p(S)||(z=Math.max(z,S)),p(m)||(z=Math.min(z,m)),z}}class V{constructor(c,m=0){this.step=c,this.origin=m}constrain(c){const m=this.origin%this.step,S=Math.round((c-m)/this.step);return m+S*this.step}}const $=T("lst");class ee{constructor(c,m){this.onValueChange_=this.onValueChange_.bind(this),this.props_=m.props,this.element=c.createElement("div"),this.element.classList.add($()),m.viewProps.bindClassModifiers(this.element);const S=c.createElement("select");S.classList.add($("s")),I(this.props_,"options",Q=>{k(S),Q.forEach((ge,Ze)=>{const dt=c.createElement("option");dt.dataset.index=String(Ze),dt.textContent=ge.text,dt.value=String(ge.value),S.appendChild(dt)})}),m.viewProps.bindDisabled(S),this.element.appendChild(S),this.selectElement=S;const z=c.createElement("div");z.classList.add($("m")),z.appendChild(me(c,"dropdown")),this.element.appendChild(z),m.value.emitter.on("change",this.onValueChange_),this.value_=m.value,this.update_()}update_(){this.selectElement.value=String(this.value_.rawValue)}onValueChange_(){this.update_()}}class te{constructor(c,m){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=m.props,this.value=m.value,this.viewProps=m.viewProps,this.view=new ee(c,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(c){const S=c.currentTarget.selectedOptions.item(0);if(!S)return;const z=Number(S.dataset.index);this.value.rawValue=this.props.get("options")[z].value}}const Ce=T("pop");class Xe{constructor(c,m){this.element=c.createElement("div"),this.element.classList.add(Ce()),m.viewProps.bindClassModifiers(this.element),F(m.shows,G(this.element,Ce(void 0,"v")))}}class Ue{constructor(c,m){this.shows=be(!1),this.viewProps=m.viewProps,this.view=new Xe(c,{shows:this.shows,viewProps:this.viewProps})}}const Qe=T("txt");class xt{constructor(c,m){this.onChange_=this.onChange_.bind(this),this.element=c.createElement("div"),this.element.classList.add(Qe()),m.viewProps.bindClassModifiers(this.element),this.props_=m.props,this.props_.emitter.on("change",this.onChange_);const S=c.createElement("input");S.classList.add(Qe("i")),S.type="text",m.viewProps.bindDisabled(S),this.element.appendChild(S),this.inputElement=S,m.value.emitter.on("change",this.onChange_),this.value_=m.value,this.refresh()}refresh(){const c=this.props_.get("formatter");this.inputElement.value=c(this.value_.rawValue)}onChange_(){this.refresh()}}class Pt{constructor(c,m){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=m.parser,this.props=m.props,this.value=m.value,this.viewProps=m.viewProps,this.view=new xt(c,{props:m.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(c){const S=c.currentTarget.value,z=this.parser_(S);p(z)||(this.value.rawValue=z),this.view.refresh()}}function Tt(v){return String(v)}function Ht(v){return v==="false"?!1:!!v}function Xn(v){return Tt(v)}class Br{constructor(c){this.text=c}evaluate(){return Number(this.text)}toString(){return this.text}}const ss={"**":(v,c)=>Math.pow(v,c),"*":(v,c)=>v*c,"/":(v,c)=>v/c,"%":(v,c)=>v%c,"+":(v,c)=>v+c,"-":(v,c)=>v-c,"<<":(v,c)=>v<<c,">>":(v,c)=>v>>c,">>>":(v,c)=>v>>>c,"&":(v,c)=>v&c,"^":(v,c)=>v^c,"|":(v,c)=>v|c};class If{constructor(c,m,S){this.left=m,this.operator=c,this.right=S}evaluate(){const c=ss[this.operator];if(!c)throw new Error(`unexpected binary operator: '${this.operator}`);return c(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const Lf={"+":v=>v,"-":v=>-v,"~":v=>~v};class os{constructor(c,m){this.operator=c,this.expression=m}evaluate(){const c=Lf[this.operator];if(!c)throw new Error(`unexpected unary operator: '${this.operator}`);return c(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function Df(v){return(c,m)=>{for(let S=0;S<v.length;S++){const z=v[S](c,m);if(z!=="")return z}return""}}function sl(v,c){var m;const S=v.substr(c).match(/^\s+/);return(m=S&&S[0])!==null&&m!==void 0?m:""}function P3(v,c){const m=v.substr(c,1);return m.match(/^[1-9]$/)?m:""}function ol(v,c){var m;const S=v.substr(c).match(/^[0-9]+/);return(m=S&&S[0])!==null&&m!==void 0?m:""}function M3(v,c){const m=ol(v,c);if(m!=="")return m;const S=v.substr(c,1);if(c+=1,S!=="-"&&S!=="+")return"";const z=ol(v,c);return z===""?"":S+z}function Of(v,c){const m=v.substr(c,1);if(c+=1,m.toLowerCase()!=="e")return"";const S=M3(v,c);return S===""?"":m+S}function Om(v,c){const m=v.substr(c,1);if(m==="0")return m;const S=P3(v,c);return c+=S.length,S===""?"":S+ol(v,c)}function E3(v,c){const m=Om(v,c);if(c+=m.length,m==="")return"";const S=v.substr(c,1);if(c+=S.length,S!==".")return"";const z=ol(v,c);return c+=z.length,m+S+z+Of(v,c)}function A3(v,c){const m=v.substr(c,1);if(c+=m.length,m!==".")return"";const S=ol(v,c);return c+=S.length,S===""?"":m+S+Of(v,c)}function T3(v,c){const m=Om(v,c);return c+=m.length,m===""?"":m+Of(v,c)}const I3=Df([E3,A3,T3]);function L3(v,c){var m;const S=v.substr(c).match(/^[01]+/);return(m=S&&S[0])!==null&&m!==void 0?m:""}function D3(v,c){const m=v.substr(c,2);if(c+=m.length,m.toLowerCase()!=="0b")return"";const S=L3(v,c);return S===""?"":m+S}function O3(v,c){var m;const S=v.substr(c).match(/^[0-7]+/);return(m=S&&S[0])!==null&&m!==void 0?m:""}function R3(v,c){const m=v.substr(c,2);if(c+=m.length,m.toLowerCase()!=="0o")return"";const S=O3(v,c);return S===""?"":m+S}function B3(v,c){var m;const S=v.substr(c).match(/^[0-9a-f]+/i);return(m=S&&S[0])!==null&&m!==void 0?m:""}function F3(v,c){const m=v.substr(c,2);if(c+=m.length,m.toLowerCase()!=="0x")return"";const S=B3(v,c);return S===""?"":m+S}const N3=Df([D3,R3,F3]),k3=Df([N3,I3]);function U3(v,c){const m=k3(v,c);return c+=m.length,m===""?null:{evaluable:new Br(m),cursor:c}}function V3(v,c){const m=v.substr(c,1);if(c+=m.length,m!=="(")return null;const S=Bm(v,c);if(!S)return null;c=S.cursor,c+=sl(v,c).length;const z=v.substr(c,1);return c+=z.length,z!==")"?null:{evaluable:S.evaluable,cursor:c}}function z3(v,c){var m;return(m=U3(v,c))!==null&&m!==void 0?m:V3(v,c)}function Rm(v,c){const m=z3(v,c);if(m)return m;const S=v.substr(c,1);if(c+=S.length,S!=="+"&&S!=="-"&&S!=="~")return null;const z=Rm(v,c);return z?(c=z.cursor,{cursor:c,evaluable:new os(S,z.evaluable)}):null}function G3(v,c,m){m+=sl(c,m).length;const S=v.filter(z=>c.startsWith(z,m))[0];return S?(m+=S.length,m+=sl(c,m).length,{cursor:m,operator:S}):null}function $3(v,c){return(m,S)=>{const z=v(m,S);if(!z)return null;S=z.cursor;let Q=z.evaluable;for(;;){const ge=G3(c,m,S);if(!ge)break;S=ge.cursor;const Ze=v(m,S);if(!Ze)return null;S=Ze.cursor,Q=new If(ge.operator,Q,Ze.evaluable)}return Q?{cursor:S,evaluable:Q}:null}}const W3=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((v,c)=>$3(v,c),Rm);function Bm(v,c){return c+=sl(v,c).length,W3(v,c)}function X3(v){const c=Bm(v,0);return!c||c.cursor+sl(v,c.cursor).length!==v.length?null:c.evaluable}function Li(v){var c;const m=X3(v);return(c=m==null?void 0:m.evaluate())!==null&&c!==void 0?c:null}function Fm(v){if(typeof v=="number")return v;if(typeof v=="string"){const c=Li(v);if(!p(c))return c}return 0}function H3(v){return String(v)}function Hn(v){return c=>c.toFixed(Math.max(Math.min(v,20),0))}const Y3=Hn(0);function Fc(v){return Y3(v)+"%"}function Nm(v){return String(v)}function Rf(v){return v}function km(v,c){for(;v.length<c;)v.push(void 0)}function q3(v){const c=[];return km(c,v),be(c)}function Z3(v){const c=v.indexOf(void 0);return c<0?v:v.slice(0,c)}function j3(v,c){const m=[...Z3(v),c];return m.length>v.length?m.splice(0,m.length-v.length):km(m,v.length),m}function al({primary:v,secondary:c,forward:m,backward:S}){let z=!1;function Q(ge){z||(z=!0,ge(),z=!1)}v.emitter.on("change",ge=>{Q(()=>{c.setRawValue(m(v,c),ge.options)})}),c.emitter.on("change",ge=>{Q(()=>{v.setRawValue(S(v,c),ge.options)}),Q(()=>{c.setRawValue(m(v,c),ge.options)})}),Q(()=>{c.setRawValue(m(v,c),{forceEmit:!1,last:!0})})}function pr(v,c){const m=v*(c.altKey?.1:1)*(c.shiftKey?10:1);return c.upKey?+m:c.downKey?-m:0}function ll(v){return{altKey:v.altKey,downKey:v.key==="ArrowDown",shiftKey:v.shiftKey,upKey:v.key==="ArrowUp"}}function Di(v){return{altKey:v.altKey,downKey:v.key==="ArrowLeft",shiftKey:v.shiftKey,upKey:v.key==="ArrowRight"}}function K3(v){return v==="ArrowUp"||v==="ArrowDown"}function Um(v){return K3(v)||v==="ArrowLeft"||v==="ArrowRight"}function Bf(v,c){var m,S;const z=c.ownerDocument.defaultView,Q=c.getBoundingClientRect();return{x:v.pageX-(((m=z&&z.scrollX)!==null&&m!==void 0?m:0)+Q.left),y:v.pageY-(((S=z&&z.scrollY)!==null&&S!==void 0?S:0)+Q.top)}}class Ys{constructor(c){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=c,this.emitter=new O,c.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),c.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),c.addEventListener("touchend",this.onTouchEnd_),c.addEventListener("mousedown",this.onMouseDown_)}computePosition_(c){const m=this.elem_.getBoundingClientRect();return{bounds:{width:m.width,height:m.height},point:c?{x:c.x,y:c.y}:null}}onMouseDown_(c){var m;c.preventDefault(),(m=c.currentTarget)===null||m===void 0||m.focus();const S=this.elem_.ownerDocument;S.addEventListener("mousemove",this.onDocumentMouseMove_),S.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:c.altKey,data:this.computePosition_(Bf(c,this.elem_)),sender:this,shiftKey:c.shiftKey})}onDocumentMouseMove_(c){this.emitter.emit("move",{altKey:c.altKey,data:this.computePosition_(Bf(c,this.elem_)),sender:this,shiftKey:c.shiftKey})}onDocumentMouseUp_(c){const m=this.elem_.ownerDocument;m.removeEventListener("mousemove",this.onDocumentMouseMove_),m.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:c.altKey,data:this.computePosition_(Bf(c,this.elem_)),sender:this,shiftKey:c.shiftKey})}onTouchStart_(c){c.preventDefault();const m=c.targetTouches.item(0),S=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:c.altKey,data:this.computePosition_(m?{x:m.clientX-S.left,y:m.clientY-S.top}:void 0),sender:this,shiftKey:c.shiftKey}),this.lastTouch_=m}onTouchMove_(c){const m=c.targetTouches.item(0),S=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:c.altKey,data:this.computePosition_(m?{x:m.clientX-S.left,y:m.clientY-S.top}:void 0),sender:this,shiftKey:c.shiftKey}),this.lastTouch_=m}onTouchEnd_(c){var m;const S=(m=c.targetTouches.item(0))!==null&&m!==void 0?m:this.lastTouch_,z=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:c.altKey,data:this.computePosition_(S?{x:S.clientX-z.left,y:S.clientY-z.top}:void 0),sender:this,shiftKey:c.shiftKey})}}function gn(v,c,m,S,z){const Q=(v-c)/(m-c);return S+Q*(z-S)}function Vm(v){return String(v.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function On(v,c,m){return Math.min(Math.max(v,c),m)}function zm(v,c){return(v%c+c)%c}const Fr=T("txt");class J3{constructor(c,m){this.onChange_=this.onChange_.bind(this),this.props_=m.props,this.props_.emitter.on("change",this.onChange_),this.element=c.createElement("div"),this.element.classList.add(Fr(),Fr(void 0,"num")),m.arrayPosition&&this.element.classList.add(Fr(void 0,m.arrayPosition)),m.viewProps.bindClassModifiers(this.element);const S=c.createElement("input");S.classList.add(Fr("i")),S.type="text",m.viewProps.bindDisabled(S),this.element.appendChild(S),this.inputElement=S,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=m.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(Fr()),this.inputElement.classList.add(Fr("i"));const z=c.createElement("div");z.classList.add(Fr("k")),this.element.appendChild(z),this.knobElement=z;const Q=c.createElementNS(Le,"svg");Q.classList.add(Fr("g")),this.knobElement.appendChild(Q);const ge=c.createElementNS(Le,"path");ge.classList.add(Fr("gb")),Q.appendChild(ge),this.guideBodyElem_=ge;const Ze=c.createElementNS(Le,"path");Ze.classList.add(Fr("gh")),Q.appendChild(Ze),this.guideHeadElem_=Ze;const dt=c.createElement("div");dt.classList.add(T("tt")()),this.knobElement.appendChild(dt),this.tooltipElem_=dt,m.value.emitter.on("change",this.onChange_),this.value=m.value,this.refresh()}onDraggingChange_(c){if(c.rawValue===null){this.element.classList.remove(Fr(void 0,"drg"));return}this.element.classList.add(Fr(void 0,"drg"));const m=c.rawValue/this.props_.get("draggingScale"),S=m+(m>0?-1:m<0?1:0),z=On(-S,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${S+z},0 L${S},4 L${S+z},8`,`M ${m},-1 L${m},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${m},4`);const Q=this.props_.get("formatter");this.tooltipElem_.textContent=Q(this.value.rawValue),this.tooltipElem_.style.left=`${m}px`}refresh(){const c=this.props_.get("formatter");this.inputElement.value=c(this.value.rawValue)}onChange_(){this.refresh()}}class cl{constructor(c,m){var S;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=m.baseStep,this.parser_=m.parser,this.props=m.props,this.sliderProps_=(S=m.sliderProps)!==null&&S!==void 0?S:null,this.value=m.value,this.viewProps=m.viewProps,this.dragging_=be(null),this.view=new J3(c,{arrayPosition:m.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const z=new Ys(this.view.knobElement);z.emitter.on("down",this.onPointerDown_),z.emitter.on("move",this.onPointerMove_),z.emitter.on("up",this.onPointerUp_)}constrainValue_(c){var m,S;const z=(m=this.sliderProps_)===null||m===void 0?void 0:m.get("minValue"),Q=(S=this.sliderProps_)===null||S===void 0?void 0:S.get("maxValue");let ge=c;return z!==void 0&&(ge=Math.max(ge,z)),Q!==void 0&&(ge=Math.min(ge,Q)),ge}onInputChange_(c){const S=c.currentTarget.value,z=this.parser_(S);p(z)||(this.value.rawValue=this.constrainValue_(z)),this.view.refresh()}onInputKeyDown_(c){const m=pr(this.baseStep_,ll(c));m!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+m),{forceEmit:!1,last:!1})}onInputKeyUp_(c){pr(this.baseStep_,ll(c))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(c){if(!c.point)return null;const m=c.point.x-c.bounds.width/2;return this.constrainValue_(this.originRawValue_+m*this.props.get("draggingScale"))}onPointerMove_(c){const m=this.computeDraggingValue_(c.data);m!==null&&(this.value.setRawValue(m,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(c){const m=this.computeDraggingValue_(c.data);m!==null&&(this.value.setRawValue(m,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const Ff=T("sld");class Q3{constructor(c,m){this.onChange_=this.onChange_.bind(this),this.props_=m.props,this.props_.emitter.on("change",this.onChange_),this.element=c.createElement("div"),this.element.classList.add(Ff()),m.viewProps.bindClassModifiers(this.element);const S=c.createElement("div");S.classList.add(Ff("t")),m.viewProps.bindTabIndex(S),this.element.appendChild(S),this.trackElement=S;const z=c.createElement("div");z.classList.add(Ff("k")),this.trackElement.appendChild(z),this.knobElement=z,m.value.emitter.on("change",this.onChange_),this.value=m.value,this.update_()}update_(){const c=On(gn(this.value.rawValue,this.props_.get("minValue"),this.props_.get("maxValue"),0,100),0,100);this.knobElement.style.width=`${c}%`}onChange_(){this.update_()}}class eS{constructor(c,m){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=m.baseStep,this.value=m.value,this.viewProps=m.viewProps,this.props=m.props,this.view=new Q3(c,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Ys(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(c,m){c.point&&this.value.setRawValue(gn(On(c.point.x,0,c.bounds.width),0,c.bounds.width,this.props.get("minValue"),this.props.get("maxValue")),m)}onPointerDownOrMove_(c){this.handlePointerEvent_(c.data,{forceEmit:!1,last:!1})}onPointerUp_(c){this.handlePointerEvent_(c.data,{forceEmit:!0,last:!0})}onKeyDown_(c){const m=pr(this.baseStep_,Di(c));m!==0&&this.value.setRawValue(this.value.rawValue+m,{forceEmit:!1,last:!1})}onKeyUp_(c){pr(this.baseStep_,Di(c))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Nf=T("sldtxt");class tS{constructor(c,m){this.element=c.createElement("div"),this.element.classList.add(Nf());const S=c.createElement("div");S.classList.add(Nf("s")),this.sliderView_=m.sliderView,S.appendChild(this.sliderView_.element),this.element.appendChild(S);const z=c.createElement("div");z.classList.add(Nf("t")),this.textView_=m.textView,z.appendChild(this.textView_.element),this.element.appendChild(z)}}class kf{constructor(c,m){this.value=m.value,this.viewProps=m.viewProps,this.sliderC_=new eS(c,{baseStep:m.baseStep,props:m.sliderProps,value:m.value,viewProps:this.viewProps}),this.textC_=new cl(c,{baseStep:m.baseStep,parser:m.parser,props:m.textProps,sliderProps:m.sliderProps,value:m.value,viewProps:m.viewProps}),this.view=new tS(c,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}}function ul(v,c){v.write(c)}function Nc(v){const c=Ae;if(Array.isArray(v))return c.required.array(c.required.object({text:c.required.string,value:c.required.raw}))(v).value;if(typeof v=="object")return c.required.raw(v).value}function Gm(v){if(v==="inline"||v==="popup")return v}function as(v){const c=Ae;return c.required.object({max:c.optional.number,min:c.optional.number,step:c.optional.number})(v).value}function $m(v){if(Array.isArray(v))return v;const c=[];return Object.keys(v).forEach(m=>{c.push({text:m,value:v[m]})}),c}function Uf(v){return p(v)?null:new _($m(v))}function nS(v){const c=v?d(v,V):null;return c?c.step:null}function kc(v,c){const m=v&&d(v,V);return m?Vm(m.step):Math.max(Vm(c),2)}function Uo(v){const c=nS(v);return c??1}function Vo(v,c){var m;const S=v&&d(v,V),z=Math.abs((m=S==null?void 0:S.step)!==null&&m!==void 0?m:c);return z===0?.1:Math.pow(10,Math.floor(Math.log10(z))-1)}const Uc=T("ckb");class rS{constructor(c,m){this.onValueChange_=this.onValueChange_.bind(this),this.element=c.createElement("div"),this.element.classList.add(Uc()),m.viewProps.bindClassModifiers(this.element);const S=c.createElement("label");S.classList.add(Uc("l")),this.element.appendChild(S);const z=c.createElement("input");z.classList.add(Uc("i")),z.type="checkbox",S.appendChild(z),this.inputElement=z,m.viewProps.bindDisabled(this.inputElement);const Q=c.createElement("div");Q.classList.add(Uc("w")),S.appendChild(Q);const ge=me(c,"check");Q.appendChild(ge),m.value.emitter.on("change",this.onValueChange_),this.value=m.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class iS{constructor(c,m){this.onInputChange_=this.onInputChange_.bind(this),this.value=m.value,this.viewProps=m.viewProps,this.view=new rS(c,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(c){const m=c.currentTarget;this.value.rawValue=m.checked}}function sS(v){const c=[],m=Uf(v.options);return m&&c.push(m),new l(c)}const oS={id:"input-bool",type:"input",accept:(v,c)=>{if(typeof v!="boolean")return null;const S=$e(c,{options:Ae.optional.custom(Nc)});return S?{initialValue:v,params:S}:null},binding:{reader:v=>Ht,constraint:v=>sS(v.params),writer:v=>ul},controller:v=>{const c=v.document,m=v.value,S=v.constraint,z=S&&d(S,_);return z?new te(c,{props:new oe({options:z.values.value("options")}),value:m,viewProps:v.viewProps}):new iS(c,{value:m,viewProps:v.viewProps})}},qs=T("col");class aS{constructor(c,m){this.element=c.createElement("div"),this.element.classList.add(qs()),m.foldable.bindExpandedClass(this.element,qs(void 0,"expanded")),I(m.foldable,"completed",G(this.element,qs(void 0,"cpl")));const S=c.createElement("div");S.classList.add(qs("h")),this.element.appendChild(S);const z=c.createElement("div");z.classList.add(qs("s")),S.appendChild(z),this.swatchElement=z;const Q=c.createElement("div");if(Q.classList.add(qs("t")),S.appendChild(Q),this.textElement=Q,m.pickerLayout==="inline"){const ge=c.createElement("div");ge.classList.add(qs("p")),this.element.appendChild(ge),this.pickerElement=ge}else this.pickerElement=null}}function lS(v,c,m){const S=On(v/255,0,1),z=On(c/255,0,1),Q=On(m/255,0,1),ge=Math.max(S,z,Q),Ze=Math.min(S,z,Q),dt=ge-Ze;let wt=0,zt=0;const Wt=(Ze+ge)/2;return dt!==0&&(zt=dt/(1-Math.abs(ge+Ze-1)),S===ge?wt=(z-Q)/dt:z===ge?wt=2+(Q-S)/dt:wt=4+(S-z)/dt,wt=wt/6+(wt<0?1:0)),[wt*360,zt*100,Wt*100]}function cS(v,c,m){const S=(v%360+360)%360,z=On(c/100,0,1),Q=On(m/100,0,1),ge=(1-Math.abs(2*Q-1))*z,Ze=ge*(1-Math.abs(S/60%2-1)),dt=Q-ge/2;let wt,zt,Wt;return S>=0&&S<60?[wt,zt,Wt]=[ge,Ze,0]:S>=60&&S<120?[wt,zt,Wt]=[Ze,ge,0]:S>=120&&S<180?[wt,zt,Wt]=[0,ge,Ze]:S>=180&&S<240?[wt,zt,Wt]=[0,Ze,ge]:S>=240&&S<300?[wt,zt,Wt]=[Ze,0,ge]:[wt,zt,Wt]=[ge,0,Ze],[(wt+dt)*255,(zt+dt)*255,(Wt+dt)*255]}function uS(v,c,m){const S=On(v/255,0,1),z=On(c/255,0,1),Q=On(m/255,0,1),ge=Math.max(S,z,Q),Ze=Math.min(S,z,Q),dt=ge-Ze;let wt;dt===0?wt=0:ge===S?wt=60*(((z-Q)/dt%6+6)%6):ge===z?wt=60*((Q-S)/dt+2):wt=60*((S-z)/dt+4);const zt=ge===0?0:dt/ge,Wt=ge;return[wt,zt*100,Wt*100]}function Wm(v,c,m){const S=zm(v,360),z=On(c/100,0,1),Q=On(m/100,0,1),ge=Q*z,Ze=ge*(1-Math.abs(S/60%2-1)),dt=Q-ge;let wt,zt,Wt;return S>=0&&S<60?[wt,zt,Wt]=[ge,Ze,0]:S>=60&&S<120?[wt,zt,Wt]=[Ze,ge,0]:S>=120&&S<180?[wt,zt,Wt]=[0,ge,Ze]:S>=180&&S<240?[wt,zt,Wt]=[0,Ze,ge]:S>=240&&S<300?[wt,zt,Wt]=[Ze,0,ge]:[wt,zt,Wt]=[ge,0,Ze],[(wt+dt)*255,(zt+dt)*255,(Wt+dt)*255]}function fS(v,c,m){const S=m+c*(100-Math.abs(2*m-100))/200;return[v,S!==0?c*(100-Math.abs(2*m-100))/S:0,m+c*(100-Math.abs(2*m-100))/(2*100)]}function hS(v,c,m){const S=100-Math.abs(m*(200-c)/100-100);return[v,S!==0?c*m/S:0,m*(200-c)/(2*100)]}function Zs(v){return[v[0],v[1],v[2]]}function Xm(v,c){return[v[0],v[1],v[2],c]}const dS={hsl:{hsl:(v,c,m)=>[v,c,m],hsv:fS,rgb:cS},hsv:{hsl:hS,hsv:(v,c,m)=>[v,c,m],rgb:Wm},rgb:{hsl:lS,hsv:uS,rgb:(v,c,m)=>[v,c,m]}};function Vc(v,c){return[c==="float"?1:v==="rgb"?255:360,c==="float"?1:v==="rgb"?255:100,c==="float"?1:v==="rgb"?255:100]}function pS(v,c){return v===c?c:zm(v,c)}function mS(v,c,m){var S;const z=Vc(c,m);return[c==="rgb"?On(v[0],0,z[0]):pS(v[0],z[0]),On(v[1],0,z[1]),On(v[2],0,z[2]),On((S=v[3])!==null&&S!==void 0?S:1,0,1)]}function Hm(v,c,m,S){const z=Vc(c,m),Q=Vc(c,S);return v.map((ge,Ze)=>ge/z[Ze]*Q[Ze])}function gS(v,c,m){const S=Hm(v,c.mode,c.type,"int"),z=dS[c.mode][m.mode](...S);return Hm(z,m.mode,"int",m.type)}function zc(v,c){return typeof v!="object"||p(v)?!1:c in v&&typeof v[c]=="number"}class Nt{constructor(c,m,S="int"){this.mode=m,this.type=S,this.comps_=mS(c,m,S)}static black(c="int"){return new Nt([0,0,0],"rgb",c)}static fromObject(c,m="int"){const S="a"in c?[c.r,c.g,c.b,c.a]:[c.r,c.g,c.b];return new Nt(S,"rgb",m)}static toRgbaObject(c,m="int"){return c.toRgbaObject(m)}static isRgbColorObject(c){return zc(c,"r")&&zc(c,"g")&&zc(c,"b")}static isRgbaColorObject(c){return this.isRgbColorObject(c)&&zc(c,"a")}static isColorObject(c){return this.isRgbColorObject(c)}static equals(c,m){if(c.mode!==m.mode)return!1;const S=c.comps_,z=m.comps_;for(let Q=0;Q<S.length;Q++)if(S[Q]!==z[Q])return!1;return!0}getComponents(c,m="int"){return Xm(gS(Zs(this.comps_),{mode:this.mode,type:this.type},{mode:c??this.mode,type:m}),this.comps_[3])}toRgbaObject(c="int"){const m=this.getComponents("rgb",c);return{r:m[0],g:m[1],b:m[2],a:m[3]}}}const ls=T("colp");class vS{constructor(c,m){this.alphaViews_=null,this.element=c.createElement("div"),this.element.classList.add(ls()),m.viewProps.bindClassModifiers(this.element);const S=c.createElement("div");S.classList.add(ls("hsv"));const z=c.createElement("div");z.classList.add(ls("sv")),this.svPaletteView_=m.svPaletteView,z.appendChild(this.svPaletteView_.element),S.appendChild(z);const Q=c.createElement("div");Q.classList.add(ls("h")),this.hPaletteView_=m.hPaletteView,Q.appendChild(this.hPaletteView_.element),S.appendChild(Q),this.element.appendChild(S);const ge=c.createElement("div");if(ge.classList.add(ls("rgb")),this.textView_=m.textView,ge.appendChild(this.textView_.element),this.element.appendChild(ge),m.alphaViews){this.alphaViews_={palette:m.alphaViews.palette,text:m.alphaViews.text};const Ze=c.createElement("div");Ze.classList.add(ls("a"));const dt=c.createElement("div");dt.classList.add(ls("ap")),dt.appendChild(this.alphaViews_.palette.element),Ze.appendChild(dt);const wt=c.createElement("div");wt.classList.add(ls("at")),wt.appendChild(this.alphaViews_.text.element),Ze.appendChild(wt),this.element.appendChild(Ze)}}get allFocusableElements(){const c=[this.svPaletteView_.element,this.hPaletteView_.element,this.textView_.modeSelectElement,...this.textView_.textViews.map(m=>m.inputElement)];return this.alphaViews_&&c.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),c}}function xS(v){return v==="int"?"int":v==="float"?"float":void 0}function Vf(v){const c=Ae;return $e(v,{alpha:c.optional.boolean,color:c.optional.object({alpha:c.optional.boolean,type:c.optional.custom(xS)}),expanded:c.optional.boolean,picker:c.optional.custom(Gm)})}function js(v){return v?.1:1}function Ks(v){var c;return(c=v.color)===null||c===void 0?void 0:c.type}function bS(v,c){return v.alpha===c.alpha&&v.mode===c.mode&&v.notation===c.notation&&v.type===c.type}function Nr(v,c){const m=v.match(/^(.+)%$/);return Math.min(m?parseFloat(m[1])*.01*c:parseFloat(v),c)}const yS={deg:v=>v,grad:v=>v*360/400,rad:v=>v*360/(2*Math.PI),turn:v=>v*360};function Ym(v){const c=v.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!c)return parseFloat(v);const m=parseFloat(c[1]),S=c[2];return yS[S](m)}function qm(v){const c=v.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!c)return null;const m=[Nr(c[1],255),Nr(c[2],255),Nr(c[3],255)];return isNaN(m[0])||isNaN(m[1])||isNaN(m[2])?null:m}function Zm(v){return c=>{const m=qm(c);return m?new Nt(m,"rgb",v):null}}function jm(v){const c=v.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!c)return null;const m=[Nr(c[1],255),Nr(c[2],255),Nr(c[3],255),Nr(c[4],1)];return isNaN(m[0])||isNaN(m[1])||isNaN(m[2])||isNaN(m[3])?null:m}function Km(v){return c=>{const m=jm(c);return m?new Nt(m,"rgb",v):null}}function Jm(v){const c=v.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!c)return null;const m=[Ym(c[1]),Nr(c[2],100),Nr(c[3],100)];return isNaN(m[0])||isNaN(m[1])||isNaN(m[2])?null:m}function Qm(v){return c=>{const m=Jm(c);return m?new Nt(m,"hsl",v):null}}function eg(v){const c=v.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!c)return null;const m=[Ym(c[1]),Nr(c[2],100),Nr(c[3],100),Nr(c[4],1)];return isNaN(m[0])||isNaN(m[1])||isNaN(m[2])||isNaN(m[3])?null:m}function tg(v){return c=>{const m=eg(c);return m?new Nt(m,"hsl",v):null}}function ng(v){const c=v.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(c)return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)];const m=v.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return m?[parseInt(m[1],16),parseInt(m[2],16),parseInt(m[3],16)]:null}function wS(v){const c=ng(v);return c?new Nt(c,"rgb","int"):null}function rg(v){const c=v.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(c)return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16),gn(parseInt(c[4]+c[4],16),0,255,0,1)];const m=v.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return m?[parseInt(m[1],16),parseInt(m[2],16),parseInt(m[3],16),gn(parseInt(m[4],16),0,255,0,1)]:null}function _S(v){const c=rg(v);return c?new Nt(c,"rgb","int"):null}function ig(v){const c=v.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!c)return null;const m=[parseFloat(c[1]),parseFloat(c[2]),parseFloat(c[3])];return isNaN(m[0])||isNaN(m[1])||isNaN(m[2])?null:m}function sg(v){return c=>{const m=ig(c);return m?new Nt(m,"rgb",v):null}}function og(v){const c=v.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!c)return null;const m=[parseFloat(c[1]),parseFloat(c[2]),parseFloat(c[3]),parseFloat(c[4])];return isNaN(m[0])||isNaN(m[1])||isNaN(m[2])||isNaN(m[3])?null:m}function ag(v){return c=>{const m=og(c);return m?new Nt(m,"rgb",v):null}}const SS=[{parser:ng,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:rg,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:qm,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:jm,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:Jm,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:eg,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:ig,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:og,result:{alpha:!0,mode:"rgb",notation:"object"}}];function CS(v){return SS.reduce((c,{parser:m,result:S})=>c||(m(v)?S:null),null)}function zf(v,c="int"){const m=CS(v);return m?m.notation==="hex"&&c!=="float"?Object.assign(Object.assign({},m),{type:"int"}):m.notation==="func"?Object.assign(Object.assign({},m),{type:c}):null:null}const lg={int:[wS,_S,Zm("int"),Km("int"),Qm("int"),tg("int"),sg("int"),ag("int")],float:[Zm("float"),Km("float"),Qm("float"),tg("float"),sg("float"),ag("float")]};function PS(v){const c=lg[v];return m=>{if(typeof m!="string")return Nt.black(v);const S=c.reduce((z,Q)=>z||Q(m),null);return S??Nt.black(v)}}function Gf(v){const c=lg[v];return m=>c.reduce((S,z)=>S||z(m),null)}function cg(v){const c=On(Math.floor(v),0,255).toString(16);return c.length===1?`0${c}`:c}function ug(v,c="#"){const m=Zs(v.getComponents("rgb")).map(cg).join("");return`${c}${m}`}function $f(v,c="#"){const m=v.getComponents("rgb"),S=[m[0],m[1],m[2],m[3]*255].map(cg).join("");return`${c}${S}`}function fg(v,c){const m=Hn(c==="float"?2:0);return`rgb(${Zs(v.getComponents("rgb",c)).map(z=>m(z)).join(", ")})`}function MS(v){return c=>fg(c,v)}function Gc(v,c){const m=Hn(2),S=Hn(c==="float"?2:0);return`rgba(${v.getComponents("rgb",c).map((Q,ge)=>(ge===3?m:S)(Q)).join(", ")})`}function ES(v){return c=>Gc(c,v)}function AS(v){const c=[Hn(0),Fc,Fc];return`hsl(${Zs(v.getComponents("hsl")).map((S,z)=>c[z](S)).join(", ")})`}function TS(v){const c=[Hn(0),Fc,Fc,Hn(2)];return`hsla(${v.getComponents("hsl").map((S,z)=>c[z](S)).join(", ")})`}function hg(v,c){const m=Hn(c==="float"?2:0),S=["r","g","b"];return`{${Zs(v.getComponents("rgb",c)).map((Q,ge)=>`${S[ge]}: ${m(Q)}`).join(", ")}}`}function IS(v){return c=>hg(c,v)}function dg(v,c){const m=Hn(2),S=Hn(c==="float"?2:0),z=["r","g","b","a"];return`{${v.getComponents("rgb",c).map((ge,Ze)=>{const dt=Ze===3?m:S;return`${z[Ze]}: ${dt(ge)}`}).join(", ")}}`}function LS(v){return c=>dg(c,v)}const DS=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:ug},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:$f},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:AS},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:TS},...["int","float"].reduce((v,c)=>[...v,{format:{alpha:!1,mode:"rgb",notation:"func",type:c},stringifier:MS(c)},{format:{alpha:!0,mode:"rgb",notation:"func",type:c},stringifier:ES(c)},{format:{alpha:!1,mode:"rgb",notation:"object",type:c},stringifier:IS(c)},{format:{alpha:!0,mode:"rgb",notation:"object",type:c},stringifier:LS(c)}],[])];function Wf(v){return DS.reduce((c,m)=>c||(bS(m.format,v)?m.stringifier:null),null)}const fl=T("apl");class OS{constructor(c,m){this.onValueChange_=this.onValueChange_.bind(this),this.value=m.value,this.value.emitter.on("change",this.onValueChange_),this.element=c.createElement("div"),this.element.classList.add(fl()),m.viewProps.bindClassModifiers(this.element),m.viewProps.bindTabIndex(this.element);const S=c.createElement("div");S.classList.add(fl("b")),this.element.appendChild(S);const z=c.createElement("div");z.classList.add(fl("c")),S.appendChild(z),this.colorElem_=z;const Q=c.createElement("div");Q.classList.add(fl("m")),this.element.appendChild(Q),this.markerElem_=Q;const ge=c.createElement("div");ge.classList.add(fl("p")),this.markerElem_.appendChild(ge),this.previewElem_=ge,this.update_()}update_(){const c=this.value.rawValue,m=c.getComponents("rgb"),S=new Nt([m[0],m[1],m[2],0],"rgb"),z=new Nt([m[0],m[1],m[2],255],"rgb"),Q=["to right",Gc(S),Gc(z)];this.colorElem_.style.background=`linear-gradient(${Q.join(",")})`,this.previewElem_.style.backgroundColor=Gc(c);const ge=gn(m[3],0,1,0,100);this.markerElem_.style.left=`${ge}%`}onValueChange_(){this.update_()}}class RS{constructor(c,m){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=m.value,this.viewProps=m.viewProps,this.view=new OS(c,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Ys(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(c,m){if(!c.point)return;const S=c.point.x/c.bounds.width,z=this.value.rawValue,[Q,ge,Ze]=z.getComponents("hsv");this.value.setRawValue(new Nt([Q,ge,Ze,S],"hsv"),m)}onPointerDown_(c){this.handlePointerEvent_(c.data,{forceEmit:!1,last:!1})}onPointerMove_(c){this.handlePointerEvent_(c.data,{forceEmit:!1,last:!1})}onPointerUp_(c){this.handlePointerEvent_(c.data,{forceEmit:!0,last:!0})}onKeyDown_(c){const m=pr(js(!0),Di(c));if(m===0)return;const S=this.value.rawValue,[z,Q,ge,Ze]=S.getComponents("hsv");this.value.setRawValue(new Nt([z,Q,ge,Ze+m],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(c){pr(js(!0),Di(c))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const zo=T("coltxt");function BS(v){const c=v.createElement("select"),m=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"}];return c.appendChild(m.reduce((S,z)=>{const Q=v.createElement("option");return Q.textContent=z.text,Q.value=z.value,S.appendChild(Q),S},v.createDocumentFragment())),c}class FS{constructor(c,m){this.element=c.createElement("div"),this.element.classList.add(zo()),m.viewProps.bindClassModifiers(this.element);const S=c.createElement("div");S.classList.add(zo("m")),this.modeElem_=BS(c),this.modeElem_.classList.add(zo("ms")),S.appendChild(this.modeSelectElement),m.viewProps.bindDisabled(this.modeElem_);const z=c.createElement("div");z.classList.add(zo("mm")),z.appendChild(me(c,"dropdown")),S.appendChild(z),this.element.appendChild(S);const Q=c.createElement("div");Q.classList.add(zo("w")),this.element.appendChild(Q),this.textsElem_=Q,this.textViews_=m.textViews,this.applyTextViews_(),F(m.colorMode,ge=>{this.modeElem_.value=ge})}get modeSelectElement(){return this.modeElem_}get textViews(){return this.textViews_}set textViews(c){this.textViews_=c,this.applyTextViews_()}applyTextViews_(){k(this.textsElem_);const c=this.element.ownerDocument;this.textViews_.forEach(m=>{const S=c.createElement("div");S.classList.add(zo("c")),S.appendChild(m.element),this.textsElem_.appendChild(S)})}}function NS(v){return Hn(v==="float"?2:0)}function kS(v,c,m){const S=Vc(v,c)[m];return new x({min:0,max:S})}function Xf(v,c,m){return new cl(v,{arrayPosition:m===0?"fst":m===3-1?"lst":"mid",baseStep:js(!1),parser:c.parser,props:oe.fromObject({draggingScale:c.colorType==="float"?.01:1,formatter:NS(c.colorType)}),value:be(0,{constraint:kS(c.colorMode,c.colorType,m)}),viewProps:c.viewProps})}class US{constructor(c,m){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=m.colorType,this.parser_=m.parser,this.value=m.value,this.viewProps=m.viewProps,this.colorMode=be(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(c),this.view=new FS(c,{colorMode:this.colorMode,textViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(c){const m={colorMode:this.colorMode.rawValue,colorType:this.colorType_,parser:this.parser_,viewProps:this.viewProps},S=[Xf(c,m,0),Xf(c,m,1),Xf(c,m,2)];return S.forEach((z,Q)=>{al({primary:this.value,secondary:z.value,forward:ge=>ge.rawValue.getComponents(this.colorMode.rawValue,this.colorType_)[Q],backward:(ge,Ze)=>{const dt=this.colorMode.rawValue,wt=ge.rawValue.getComponents(dt,this.colorType_);return wt[Q]=Ze.rawValue,new Nt(Xm(Zs(wt),wt[3]),dt,this.colorType_)}})}),S}onModeSelectChange_(c){const m=c.currentTarget;this.colorMode.rawValue=m.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.textViews=[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]}}const Hf=T("hpl");class VS{constructor(c,m){this.onValueChange_=this.onValueChange_.bind(this),this.value=m.value,this.value.emitter.on("change",this.onValueChange_),this.element=c.createElement("div"),this.element.classList.add(Hf()),m.viewProps.bindClassModifiers(this.element),m.viewProps.bindTabIndex(this.element);const S=c.createElement("div");S.classList.add(Hf("c")),this.element.appendChild(S);const z=c.createElement("div");z.classList.add(Hf("m")),this.element.appendChild(z),this.markerElem_=z,this.update_()}update_(){const c=this.value.rawValue,[m]=c.getComponents("hsv");this.markerElem_.style.backgroundColor=fg(new Nt([m,100,100],"hsv"));const S=gn(m,0,360,0,100);this.markerElem_.style.left=`${S}%`}onValueChange_(){this.update_()}}class zS{constructor(c,m){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=m.value,this.viewProps=m.viewProps,this.view=new VS(c,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Ys(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(c,m){if(!c.point)return;const S=gn(On(c.point.x,0,c.bounds.width),0,c.bounds.width,0,360),z=this.value.rawValue,[,Q,ge,Ze]=z.getComponents("hsv");this.value.setRawValue(new Nt([S,Q,ge,Ze],"hsv"),m)}onPointerDown_(c){this.handlePointerEvent_(c.data,{forceEmit:!1,last:!1})}onPointerMove_(c){this.handlePointerEvent_(c.data,{forceEmit:!1,last:!1})}onPointerUp_(c){this.handlePointerEvent_(c.data,{forceEmit:!0,last:!0})}onKeyDown_(c){const m=pr(js(!1),Di(c));if(m===0)return;const S=this.value.rawValue,[z,Q,ge,Ze]=S.getComponents("hsv");this.value.setRawValue(new Nt([z+m,Q,ge,Ze],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(c){pr(js(!1),Di(c))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Yf=T("svp"),pg=64;class GS{constructor(c,m){this.onValueChange_=this.onValueChange_.bind(this),this.value=m.value,this.value.emitter.on("change",this.onValueChange_),this.element=c.createElement("div"),this.element.classList.add(Yf()),m.viewProps.bindClassModifiers(this.element),m.viewProps.bindTabIndex(this.element);const S=c.createElement("canvas");S.height=pg,S.width=pg,S.classList.add(Yf("c")),this.element.appendChild(S),this.canvasElement=S;const z=c.createElement("div");z.classList.add(Yf("m")),this.element.appendChild(z),this.markerElem_=z,this.update_()}update_(){const c=Y(this.canvasElement);if(!c)return;const S=this.value.rawValue.getComponents("hsv"),z=this.canvasElement.width,Q=this.canvasElement.height,ge=c.getImageData(0,0,z,Q),Ze=ge.data;for(let zt=0;zt<Q;zt++)for(let Wt=0;Wt<z;Wt++){const Ri=gn(Wt,0,z,0,100),dl=gn(zt,0,Q,100,0),pl=Wm(S[0],Ri,dl),Xo=(zt*z+Wt)*4;Ze[Xo]=pl[0],Ze[Xo+1]=pl[1],Ze[Xo+2]=pl[2],Ze[Xo+3]=255}c.putImageData(ge,0,0);const dt=gn(S[1],0,100,0,100);this.markerElem_.style.left=`${dt}%`;const wt=gn(S[2],0,100,100,0);this.markerElem_.style.top=`${wt}%`}onValueChange_(){this.update_()}}class $S{constructor(c,m){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=m.value,this.viewProps=m.viewProps,this.view=new GS(c,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Ys(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(c,m){if(!c.point)return;const S=gn(c.point.x,0,c.bounds.width,0,100),z=gn(c.point.y,0,c.bounds.height,100,0),[Q,,,ge]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new Nt([Q,S,z,ge],"hsv"),m)}onPointerDown_(c){this.handlePointerEvent_(c.data,{forceEmit:!1,last:!1})}onPointerMove_(c){this.handlePointerEvent_(c.data,{forceEmit:!1,last:!1})}onPointerUp_(c){this.handlePointerEvent_(c.data,{forceEmit:!0,last:!0})}onKeyDown_(c){Um(c.key)&&c.preventDefault();const[m,S,z,Q]=this.value.rawValue.getComponents("hsv"),ge=js(!1),Ze=pr(ge,Di(c)),dt=pr(ge,ll(c));Ze===0&&dt===0||this.value.setRawValue(new Nt([m,S+Ze,z+dt,Q],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(c){const m=js(!1),S=pr(m,Di(c)),z=pr(m,ll(c));S===0&&z===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class WS{constructor(c,m){this.value=m.value,this.viewProps=m.viewProps,this.hPaletteC_=new zS(c,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new $S(c,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=m.supportsAlpha?{palette:new RS(c,{value:this.value,viewProps:this.viewProps}),text:new cl(c,{parser:Li,baseStep:.1,props:oe.fromObject({draggingScale:.01,formatter:Hn(2)}),value:be(0,{constraint:new x({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&al({primary:this.value,secondary:this.alphaIcs_.text.value,forward:S=>S.rawValue.getComponents()[3],backward:(S,z)=>{const Q=S.rawValue.getComponents();return Q[3]=z.rawValue,new Nt(Q,S.rawValue.mode)}}),this.textC_=new US(c,{colorType:m.colorType,parser:Li,value:this.value,viewProps:this.viewProps}),this.view=new vS(c,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:m.supportsAlpha,svPaletteView:this.svPaletteC_.view,textView:this.textC_.view,viewProps:this.viewProps})}get textController(){return this.textC_}}const qf=T("colsw");class XS{constructor(c,m){this.onValueChange_=this.onValueChange_.bind(this),m.value.emitter.on("change",this.onValueChange_),this.value=m.value,this.element=c.createElement("div"),this.element.classList.add(qf()),m.viewProps.bindClassModifiers(this.element);const S=c.createElement("div");S.classList.add(qf("sw")),this.element.appendChild(S),this.swatchElem_=S;const z=c.createElement("button");z.classList.add(qf("b")),m.viewProps.bindDisabled(z),this.element.appendChild(z),this.buttonElement=z,this.update_()}update_(){const c=this.value.rawValue;this.swatchElem_.style.backgroundColor=$f(c)}onValueChange_(){this.update_()}}class HS{constructor(c,m){this.value=m.value,this.viewProps=m.viewProps,this.view=new XS(c,{value:this.value,viewProps:this.viewProps})}}class Zf{constructor(c,m){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=m.value,this.viewProps=m.viewProps,this.foldable_=st.create(m.expanded),this.swatchC_=new HS(c,{value:this.value,viewProps:this.viewProps});const S=this.swatchC_.view.buttonElement;S.addEventListener("blur",this.onButtonBlur_),S.addEventListener("click",this.onButtonClick_),this.textC_=new Pt(c,{parser:m.parser,props:oe.fromObject({formatter:m.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new aS(c,{foldable:this.foldable_,pickerLayout:m.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=m.pickerLayout==="popup"?new Ue(c,{viewProps:this.viewProps}):null;const z=new WS(c,{colorType:m.colorType,supportsAlpha:m.supportsAlpha,value:this.value,viewProps:this.viewProps});z.view.allFocusableElements.forEach(Q=>{Q.addEventListener("blur",this.onPopupChildBlur_),Q.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=z,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(z.view.element),al({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:Q=>Q.rawValue,backward:(Q,ge)=>ge.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),De(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(c){if(!this.popC_)return;const m=this.view.element,S=c.relatedTarget;(!S||!m.contains(S))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(c){if(!this.popC_)return;const m=this.popC_.view.element,S=P(c);S&&m.contains(S)||S&&S===this.swatchC_.view.buttonElement&&!qe(m.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(c){this.popC_?c.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&c.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function YS(v,c){return Nt.isColorObject(v)?Nt.fromObject(v,c):Nt.black(c)}function qS(v){return Zs(v.getComponents("rgb")).reduce((c,m)=>c<<8|Math.floor(m)&255,0)}function ZS(v){return v.getComponents("rgb").reduce((c,m,S)=>{const z=Math.floor(S===3?m*255:m)&255;return c<<8|z},0)>>>0}function jS(v){return new Nt([v>>16&255,v>>8&255,v&255],"rgb")}function KS(v){return new Nt([v>>24&255,v>>16&255,v>>8&255,gn(v&255,0,255,0,1)],"rgb")}function JS(v){return typeof v!="number"?Nt.black():jS(v)}function QS(v){return typeof v!="number"?Nt.black():KS(v)}function eC(v){const c=Wf(v);return c?(m,S)=>{ul(m,c(S))}:null}function tC(v){const c=v?ZS:qS;return(m,S)=>{ul(m,c(S))}}function nC(v,c,m){const S=c.toRgbaObject(m);v.writeProperty("r",S.r),v.writeProperty("g",S.g),v.writeProperty("b",S.b),v.writeProperty("a",S.a)}function rC(v,c,m){const S=c.toRgbaObject(m);v.writeProperty("r",S.r),v.writeProperty("g",S.g),v.writeProperty("b",S.b)}function iC(v,c){return(m,S)=>{v?nC(m,S,c):rC(m,S,c)}}function jf(v){var c;return!!(v!=null&&v.alpha||!((c=v==null?void 0:v.color)===null||c===void 0)&&c.alpha)}function sC(v){return v?c=>$f(c,"0x"):c=>ug(c,"0x")}function oC(v){return"color"in v||"view"in v&&v.view==="color"}const aC={id:"input-color-number",type:"input",accept:(v,c)=>{if(typeof v!="number"||!oC(c))return null;const m=Vf(c);return m?{initialValue:v,params:m}:null},binding:{reader:v=>jf(v.params)?QS:JS,equals:Nt.equals,writer:v=>tC(jf(v.params))},controller:v=>{const c=jf(v.params),m="expanded"in v.params?v.params.expanded:void 0,S="picker"in v.params?v.params.picker:void 0;return new Zf(v.document,{colorType:"int",expanded:m??!1,formatter:sC(c),parser:Gf("int"),pickerLayout:S??"popup",supportsAlpha:c,value:v.value,viewProps:v.viewProps})}};function lC(v){return Nt.isRgbaColorObject(v)}function cC(v){return c=>YS(c,v)}function uC(v,c){return m=>v?dg(m,c):hg(m,c)}const fC={id:"input-color-object",type:"input",accept:(v,c)=>{if(!Nt.isColorObject(v))return null;const m=Vf(c);return m?{initialValue:v,params:m}:null},binding:{reader:v=>cC(Ks(v.params)),equals:Nt.equals,writer:v=>iC(lC(v.initialValue),Ks(v.params))},controller:v=>{var c;const m=Nt.isRgbaColorObject(v.initialValue),S="expanded"in v.params?v.params.expanded:void 0,z="picker"in v.params?v.params.picker:void 0,Q=(c=Ks(v.params))!==null&&c!==void 0?c:"int";return new Zf(v.document,{colorType:Q,expanded:S??!1,formatter:uC(m,Q),parser:Gf(Q),pickerLayout:z??"popup",supportsAlpha:m,value:v.value,viewProps:v.viewProps})}},hC={id:"input-color-string",type:"input",accept:(v,c)=>{if(typeof v!="string"||"view"in c&&c.view==="text")return null;const m=zf(v,Ks(c));if(!m||!Wf(m))return null;const z=Vf(c);return z?{initialValue:v,params:z}:null},binding:{reader:v=>{var c;return PS((c=Ks(v.params))!==null&&c!==void 0?c:"int")},equals:Nt.equals,writer:v=>{const c=zf(v.initialValue,Ks(v.params));if(!c)throw y.shouldNeverHappen();const m=eC(c);if(!m)throw y.notBindable();return m}},controller:v=>{const c=zf(v.initialValue,Ks(v.params));if(!c)throw y.shouldNeverHappen();const m=Wf(c);if(!m)throw y.shouldNeverHappen();const S="expanded"in v.params?v.params.expanded:void 0,z="picker"in v.params?v.params.picker:void 0;return new Zf(v.document,{colorType:c.type,expanded:S??!1,formatter:m,parser:Gf(c.type),pickerLayout:z??"popup",supportsAlpha:c.alpha,value:v.value,viewProps:v.viewProps})}};class cs{constructor(c){this.components=c.components,this.asm_=c.assembly}constrain(c){const m=this.asm_.toComponents(c).map((S,z)=>{var Q,ge;return(ge=(Q=this.components[z])===null||Q===void 0?void 0:Q.constrain(S))!==null&&ge!==void 0?ge:S});return this.asm_.fromComponents(m)}}const mg=T("pndtxt");class dC{constructor(c,m){this.textViews=m.textViews,this.element=c.createElement("div"),this.element.classList.add(mg()),this.textViews.forEach(S=>{const z=c.createElement("div");z.classList.add(mg("a")),z.appendChild(S.element),this.element.appendChild(z)})}}function pC(v,c,m){return new cl(v,{arrayPosition:m===0?"fst":m===c.axes.length-1?"lst":"mid",baseStep:c.axes[m].baseStep,parser:c.parser,props:c.axes[m].textProps,value:be(0,{constraint:c.axes[m].constraint}),viewProps:c.viewProps})}class Kf{constructor(c,m){this.value=m.value,this.viewProps=m.viewProps,this.acs_=m.axes.map((S,z)=>pC(c,m,z)),this.acs_.forEach((S,z)=>{al({primary:this.value,secondary:S.value,forward:Q=>m.assembly.toComponents(Q.rawValue)[z],backward:(Q,ge)=>{const Ze=m.assembly.toComponents(Q.rawValue);return Ze[z]=ge.rawValue,m.assembly.fromComponents(Ze)}})}),this.view=new dC(c,{textViews:this.acs_.map(S=>S.view)})}}function gg(v,c){return"step"in v&&!p(v.step)?new V(v.step,c):null}function vg(v){return!p(v.max)&&!p(v.min)?new x({max:v.max,min:v.min}):!p(v.max)||!p(v.min)?new D({max:v.max,min:v.min}):null}function mC(v){const c=d(v,x);if(c)return[c.values.get("min"),c.values.get("max")];const m=d(v,D);return m?[m.minValue,m.maxValue]:[void 0,void 0]}function gC(v,c){const m=[],S=gg(v,c);S&&m.push(S);const z=vg(v);z&&m.push(z);const Q=Uf(v.options);return Q&&m.push(Q),new l(m)}const vC={id:"input-number",type:"input",accept:(v,c)=>{if(typeof v!="number")return null;const m=Ae,S=$e(c,{format:m.optional.function,max:m.optional.number,min:m.optional.number,options:m.optional.custom(Nc),step:m.optional.number});return S?{initialValue:v,params:S}:null},binding:{reader:v=>Fm,constraint:v=>gC(v.params,v.initialValue),writer:v=>ul},controller:v=>{var c;const m=v.value,S=v.constraint,z=S&&d(S,_);if(z)return new te(v.document,{props:new oe({options:z.values.value("options")}),value:m,viewProps:v.viewProps});const Q=(c="format"in v.params?v.params.format:void 0)!==null&&c!==void 0?c:Hn(kc(S,m.rawValue)),ge=S&&d(S,x);return ge?new kf(v.document,{baseStep:Uo(S),parser:Li,sliderProps:new oe({maxValue:ge.values.value("max"),minValue:ge.values.value("min")}),textProps:oe.fromObject({draggingScale:Vo(S,m.rawValue),formatter:Q}),value:m,viewProps:v.viewProps}):new cl(v.document,{baseStep:Uo(S),parser:Li,props:oe.fromObject({draggingScale:Vo(S,m.rawValue),formatter:Q}),value:m,viewProps:v.viewProps})}};class us{constructor(c=0,m=0){this.x=c,this.y=m}getComponents(){return[this.x,this.y]}static isObject(c){if(p(c))return!1;const m=c.x,S=c.y;return!(typeof m!="number"||typeof S!="number")}static equals(c,m){return c.x===m.x&&c.y===m.y}toObject(){return{x:this.x,y:this.y}}}const xg={toComponents:v=>v.getComponents(),fromComponents:v=>new us(...v)},Go=T("p2d");class xC{constructor(c,m){this.element=c.createElement("div"),this.element.classList.add(Go()),m.viewProps.bindClassModifiers(this.element),F(m.expanded,G(this.element,Go(void 0,"expanded")));const S=c.createElement("div");S.classList.add(Go("h")),this.element.appendChild(S);const z=c.createElement("button");z.classList.add(Go("b")),z.appendChild(me(c,"p2dpad")),m.viewProps.bindDisabled(z),S.appendChild(z),this.buttonElement=z;const Q=c.createElement("div");if(Q.classList.add(Go("t")),S.appendChild(Q),this.textElement=Q,m.pickerLayout==="inline"){const ge=c.createElement("div");ge.classList.add(Go("p")),this.element.appendChild(ge),this.pickerElement=ge}else this.pickerElement=null}}const fs=T("p2dp");class bC{constructor(c,m){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.invertsY_=m.invertsY,this.maxValue_=m.maxValue,this.element=c.createElement("div"),this.element.classList.add(fs()),m.layout==="popup"&&this.element.classList.add(fs(void 0,"p")),m.viewProps.bindClassModifiers(this.element);const S=c.createElement("div");S.classList.add(fs("p")),m.viewProps.bindTabIndex(S),this.element.appendChild(S),this.padElement=S;const z=c.createElementNS(Le,"svg");z.classList.add(fs("g")),this.padElement.appendChild(z),this.svgElem_=z;const Q=c.createElementNS(Le,"line");Q.classList.add(fs("ax")),Q.setAttributeNS(null,"x1","0"),Q.setAttributeNS(null,"y1","50%"),Q.setAttributeNS(null,"x2","100%"),Q.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(Q);const ge=c.createElementNS(Le,"line");ge.classList.add(fs("ax")),ge.setAttributeNS(null,"x1","50%"),ge.setAttributeNS(null,"y1","0"),ge.setAttributeNS(null,"x2","50%"),ge.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(ge);const Ze=c.createElementNS(Le,"line");Ze.classList.add(fs("l")),Ze.setAttributeNS(null,"x1","50%"),Ze.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(Ze),this.lineElem_=Ze;const dt=c.createElement("div");dt.classList.add(fs("m")),this.padElement.appendChild(dt),this.markerElem_=dt,m.value.emitter.on("change",this.onValueChange_),this.value=m.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[c,m]=this.value.rawValue.getComponents(),S=this.maxValue_,z=gn(c,-S,+S,0,100),Q=gn(m,-S,+S,0,100),ge=this.invertsY_?100-Q:Q;this.lineElem_.setAttributeNS(null,"x2",`${z}%`),this.lineElem_.setAttributeNS(null,"y2",`${ge}%`),this.markerElem_.style.left=`${z}%`,this.markerElem_.style.top=`${ge}%`}onValueChange_(){this.update_()}onFoldableChange_(){this.update_()}}function bg(v,c,m){return[pr(c[0],Di(v)),pr(c[1],ll(v))*(m?1:-1)]}class yC{constructor(c,m){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=m.value,this.viewProps=m.viewProps,this.baseSteps_=m.baseSteps,this.maxValue_=m.maxValue,this.invertsY_=m.invertsY,this.view=new bC(c,{invertsY:this.invertsY_,layout:m.layout,maxValue:this.maxValue_,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Ys(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(c,m){if(!c.point)return;const S=this.maxValue_,z=gn(c.point.x,0,c.bounds.width,-S,+S),Q=gn(this.invertsY_?c.bounds.height-c.point.y:c.point.y,0,c.bounds.height,-S,+S);this.value.setRawValue(new us(z,Q),m)}onPointerDown_(c){this.handlePointerEvent_(c.data,{forceEmit:!1,last:!1})}onPointerMove_(c){this.handlePointerEvent_(c.data,{forceEmit:!1,last:!1})}onPointerUp_(c){this.handlePointerEvent_(c.data,{forceEmit:!0,last:!0})}onPadKeyDown_(c){Um(c.key)&&c.preventDefault();const[m,S]=bg(c,this.baseSteps_,this.invertsY_);m===0&&S===0||this.value.setRawValue(new us(this.value.rawValue.x+m,this.value.rawValue.y+S),{forceEmit:!1,last:!1})}onPadKeyUp_(c){const[m,S]=bg(c,this.baseSteps_,this.invertsY_);m===0&&S===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class wC{constructor(c,m){var S,z;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=m.value,this.viewProps=m.viewProps,this.foldable_=st.create(m.expanded),this.popC_=m.pickerLayout==="popup"?new Ue(c,{viewProps:this.viewProps}):null;const Q=new yC(c,{baseSteps:[m.axes[0].baseStep,m.axes[1].baseStep],invertsY:m.invertsY,layout:m.pickerLayout,maxValue:m.maxValue,value:this.value,viewProps:this.viewProps});Q.view.allFocusableElements.forEach(ge=>{ge.addEventListener("blur",this.onPopupChildBlur_),ge.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=Q,this.textC_=new Kf(c,{assembly:xg,axes:m.axes,parser:m.parser,value:this.value,viewProps:this.viewProps}),this.view=new xC(c,{expanded:this.foldable_.value("expanded"),pickerLayout:m.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(S=this.view.buttonElement)===null||S===void 0||S.addEventListener("blur",this.onPadButtonBlur_),(z=this.view.buttonElement)===null||z===void 0||z.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),al({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:ge=>ge.rawValue,backward:(ge,Ze)=>Ze.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),De(this.foldable_,this.view.pickerElement))}onPadButtonBlur_(c){if(!this.popC_)return;const m=this.view.element,S=c.relatedTarget;(!S||!m.contains(S))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(c){if(!this.popC_)return;const m=this.popC_.view.element,S=P(c);S&&m.contains(S)||S&&S===this.view.buttonElement&&!qe(m.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(c){this.popC_?c.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&c.key==="Escape"&&this.view.buttonElement.focus()}}class $o{constructor(c=0,m=0,S=0){this.x=c,this.y=m,this.z=S}getComponents(){return[this.x,this.y,this.z]}static isObject(c){if(p(c))return!1;const m=c.x,S=c.y,z=c.z;return!(typeof m!="number"||typeof S!="number"||typeof z!="number")}static equals(c,m){return c.x===m.x&&c.y===m.y&&c.z===m.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const yg={toComponents:v=>v.getComponents(),fromComponents:v=>new $o(...v)};function _C(v){return $o.isObject(v)?new $o(v.x,v.y,v.z):new $o}function SC(v,c){v.writeProperty("x",c.x),v.writeProperty("y",c.y),v.writeProperty("z",c.z)}function CC(v,c){return new cs({assembly:yg,components:[Oi("x"in v?v.x:void 0,c.x),Oi("y"in v?v.y:void 0,c.y),Oi("z"in v?v.z:void 0,c.z)]})}function Jf(v,c){return{baseStep:Uo(c),constraint:c,textProps:oe.fromObject({draggingScale:Vo(c,v),formatter:Hn(kc(c,v))})}}const PC={id:"input-point3d",type:"input",accept:(v,c)=>{if(!$o.isObject(v))return null;const m=Ae,S=$e(c,{x:m.optional.custom(as),y:m.optional.custom(as),z:m.optional.custom(as)});return S?{initialValue:v,params:S}:null},binding:{reader:v=>_C,constraint:v=>CC(v.params,v.initialValue),equals:$o.equals,writer:v=>SC},controller:v=>{const c=v.value,m=v.constraint;if(!(m instanceof cs))throw y.shouldNeverHappen();return new Kf(v.document,{assembly:yg,axes:[Jf(c.rawValue.x,m.components[0]),Jf(c.rawValue.y,m.components[1]),Jf(c.rawValue.z,m.components[2])],parser:Li,value:c,viewProps:v.viewProps})}};class Wo{constructor(c=0,m=0,S=0,z=0){this.x=c,this.y=m,this.z=S,this.w=z}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(c){if(p(c))return!1;const m=c.x,S=c.y,z=c.z,Q=c.w;return!(typeof m!="number"||typeof S!="number"||typeof z!="number"||typeof Q!="number")}static equals(c,m){return c.x===m.x&&c.y===m.y&&c.z===m.z&&c.w===m.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const wg={toComponents:v=>v.getComponents(),fromComponents:v=>new Wo(...v)};function MC(v){return Wo.isObject(v)?new Wo(v.x,v.y,v.z,v.w):new Wo}function EC(v,c){v.writeProperty("x",c.x),v.writeProperty("y",c.y),v.writeProperty("z",c.z),v.writeProperty("w",c.w)}function AC(v,c){return new cs({assembly:wg,components:[Oi("x"in v?v.x:void 0,c.x),Oi("y"in v?v.y:void 0,c.y),Oi("z"in v?v.z:void 0,c.z),Oi("w"in v?v.w:void 0,c.w)]})}function TC(v,c){return{baseStep:Uo(c),constraint:c,textProps:oe.fromObject({draggingScale:Vo(c,v),formatter:Hn(kc(c,v))})}}const IC={id:"input-point4d",type:"input",accept:(v,c)=>{if(!Wo.isObject(v))return null;const m=Ae,S=$e(c,{x:m.optional.custom(as),y:m.optional.custom(as),z:m.optional.custom(as),w:m.optional.custom(as)});return S?{initialValue:v,params:S}:null},binding:{reader:v=>MC,constraint:v=>AC(v.params,v.initialValue),equals:Wo.equals,writer:v=>EC},controller:v=>{const c=v.value,m=v.constraint;if(!(m instanceof cs))throw y.shouldNeverHappen();return new Kf(v.document,{assembly:wg,axes:c.rawValue.getComponents().map((S,z)=>TC(S,m.components[z])),parser:Li,value:c,viewProps:v.viewProps})}};function LC(v){const c=[],m=Uf(v.options);return m&&c.push(m),new l(c)}const DC={id:"input-string",type:"input",accept:(v,c)=>{if(typeof v!="string")return null;const S=$e(c,{options:Ae.optional.custom(Nc)});return S?{initialValue:v,params:S}:null},binding:{reader:v=>Nm,constraint:v=>LC(v.params),writer:v=>ul},controller:v=>{const c=v.document,m=v.value,S=v.constraint,z=S&&d(S,_);return z?new te(c,{props:new oe({options:z.values.value("options")}),value:m,viewProps:v.viewProps}):new Pt(c,{parser:Q=>Q,props:oe.fromObject({formatter:Rf}),value:m,viewProps:v.viewProps})}},hl={monitor:{defaultInterval:200,defaultLineCount:3}},_g=T("mll");class OC{constructor(c,m){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=m.formatter,this.element=c.createElement("div"),this.element.classList.add(_g()),m.viewProps.bindClassModifiers(this.element);const S=c.createElement("textarea");S.classList.add(_g("i")),S.style.height=`calc(var(--bld-us) * ${m.lineCount})`,S.readOnly=!0,m.viewProps.bindDisabled(S),this.element.appendChild(S),this.textareaElem_=S,m.value.emitter.on("change",this.onValueUpdate_),this.value=m.value,this.update_()}update_(){const c=this.textareaElem_,m=c.scrollTop===c.scrollHeight-c.clientHeight,S=[];this.value.rawValue.forEach(z=>{z!==void 0&&S.push(this.formatter_(z))}),c.textContent=S.join(`
`),m&&(c.scrollTop=c.scrollHeight)}onValueUpdate_(){this.update_()}}class Qf{constructor(c,m){this.value=m.value,this.viewProps=m.viewProps,this.view=new OC(c,{formatter:m.formatter,lineCount:m.lineCount,value:this.value,viewProps:this.viewProps})}}const Sg=T("sgl");class RC{constructor(c,m){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=m.formatter,this.element=c.createElement("div"),this.element.classList.add(Sg()),m.viewProps.bindClassModifiers(this.element);const S=c.createElement("input");S.classList.add(Sg("i")),S.readOnly=!0,S.type="text",m.viewProps.bindDisabled(S),this.element.appendChild(S),this.inputElement=S,m.value.emitter.on("change",this.onValueUpdate_),this.value=m.value,this.update_()}update_(){const c=this.value.rawValue,m=c[c.length-1];this.inputElement.value=m!==void 0?this.formatter_(m):""}onValueUpdate_(){this.update_()}}class eh{constructor(c,m){this.value=m.value,this.viewProps=m.viewProps,this.view=new RC(c,{formatter:m.formatter,value:this.value,viewProps:this.viewProps})}}const BC={id:"monitor-bool",type:"monitor",accept:(v,c)=>{if(typeof v!="boolean")return null;const S=$e(c,{lineCount:Ae.optional.number});return S?{initialValue:v,params:S}:null},binding:{reader:v=>Ht},controller:v=>{var c;return v.value.rawValue.length===1?new eh(v.document,{formatter:Xn,value:v.value,viewProps:v.viewProps}):new Qf(v.document,{formatter:Xn,lineCount:(c=v.params.lineCount)!==null&&c!==void 0?c:hl.monitor.defaultLineCount,value:v.value,viewProps:v.viewProps})}},hs=T("grl");class FC{constructor(c,m){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=c.createElement("div"),this.element.classList.add(hs()),m.viewProps.bindClassModifiers(this.element),this.formatter_=m.formatter,this.props_=m.props,this.cursor_=m.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const S=c.createElementNS(Le,"svg");S.classList.add(hs("g")),S.style.height=`calc(var(--bld-us) * ${m.lineCount})`,this.element.appendChild(S),this.svgElem_=S;const z=c.createElementNS(Le,"polyline");this.svgElem_.appendChild(z),this.lineElem_=z;const Q=c.createElement("div");Q.classList.add(hs("t"),T("tt")()),this.element.appendChild(Q),this.tooltipElem_=Q,m.value.emitter.on("change",this.onValueUpdate_),this.value=m.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const c=this.svgElem_.getBoundingClientRect(),m=this.value.rawValue.length-1,S=this.props_.get("minValue"),z=this.props_.get("maxValue"),Q=[];this.value.rawValue.forEach((zt,Wt)=>{if(zt===void 0)return;const Ri=gn(Wt,0,m,0,c.width),dl=gn(zt,S,z,c.height,0);Q.push([Ri,dl].join(","))}),this.lineElem_.setAttributeNS(null,"points",Q.join(" "));const ge=this.tooltipElem_,Ze=this.value.rawValue[this.cursor_.rawValue];if(Ze===void 0){ge.classList.remove(hs("t","a"));return}const dt=gn(this.cursor_.rawValue,0,m,0,c.width),wt=gn(Ze,S,z,c.height,0);ge.style.left=`${dt}px`,ge.style.top=`${wt}px`,ge.textContent=`${this.formatter_(Ze)}`,ge.classList.contains(hs("t","a"))||(ge.classList.add(hs("t","a"),hs("t","in")),ze(ge),ge.classList.remove(hs("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class NC{constructor(c,m){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props_=m.props,this.value=m.value,this.viewProps=m.viewProps,this.cursor_=be(-1),this.view=new FC(c,{cursor:this.cursor_,formatter:m.formatter,lineCount:m.lineCount,props:this.props_,value:this.value,viewProps:this.viewProps}),!qe(c))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const S=new Ys(this.view.element);S.emitter.on("down",this.onGraphPointerDown_),S.emitter.on("move",this.onGraphPointerMove_),S.emitter.on("up",this.onGraphPointerUp_)}}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(c){const m=this.view.element.getBoundingClientRect();this.cursor_.rawValue=Math.floor(gn(c.offsetX,0,m.width,0,this.value.rawValue.length))}onGraphPointerDown_(c){this.onGraphPointerMove_(c)}onGraphPointerMove_(c){if(!c.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(gn(c.data.point.x,0,c.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function th(v){return"format"in v&&!p(v.format)?v.format:Hn(2)}function kC(v){var c;return v.value.rawValue.length===1?new eh(v.document,{formatter:th(v.params),value:v.value,viewProps:v.viewProps}):new Qf(v.document,{formatter:th(v.params),lineCount:(c=v.params.lineCount)!==null&&c!==void 0?c:hl.monitor.defaultLineCount,value:v.value,viewProps:v.viewProps})}function UC(v){var c,m,S;return new NC(v.document,{formatter:th(v.params),lineCount:(c=v.params.lineCount)!==null&&c!==void 0?c:hl.monitor.defaultLineCount,props:oe.fromObject({maxValue:(m="max"in v.params?v.params.max:null)!==null&&m!==void 0?m:100,minValue:(S="min"in v.params?v.params.min:null)!==null&&S!==void 0?S:0}),value:v.value,viewProps:v.viewProps})}function Cg(v){return"view"in v&&v.view==="graph"}const VC={id:"monitor-number",type:"monitor",accept:(v,c)=>{if(typeof v!="number")return null;const m=Ae,S=$e(c,{format:m.optional.function,lineCount:m.optional.number,max:m.optional.number,min:m.optional.number,view:m.optional.string});return S?{initialValue:v,params:S}:null},binding:{defaultBufferSize:v=>Cg(v)?64:1,reader:v=>Fm},controller:v=>Cg(v.params)?UC(v):kC(v)},zC={id:"monitor-string",type:"monitor",accept:(v,c)=>{if(typeof v!="string")return null;const m=Ae,S=$e(c,{lineCount:m.optional.number,multiline:m.optional.boolean});return S?{initialValue:v,params:S}:null},binding:{reader:v=>Nm},controller:v=>{var c;const m=v.value;return m.rawValue.length>1||"multiline"in v.params&&v.params.multiline?new Qf(v.document,{formatter:Rf,lineCount:(c=v.params.lineCount)!==null&&c!==void 0?c:hl.monitor.defaultLineCount,value:m,viewProps:v.viewProps}):new eh(v.document,{formatter:Rf,value:m,viewProps:v.viewProps})}};class GC{constructor(c){this.onValueChange_=this.onValueChange_.bind(this),this.reader=c.reader,this.writer=c.writer,this.emitter=new O,this.value=c.value,this.value.emitter.on("change",this.onValueChange_),this.target=c.target,this.read()}read(){const c=this.target.read();c!==void 0&&(this.value.rawValue=this.reader(c))}write_(c){this.writer(this.target,c)}onValueChange_(c){this.write_(c.rawValue),this.emitter.emit("change",{options:c.options,rawValue:c.rawValue,sender:this})}}function $C(v,c){const m=v.accept(c.target.read(),c.params);if(p(m))return null;const S=Ae,z={target:c.target,initialValue:m.initialValue,params:m.params},Q=v.binding.reader(z),ge=v.binding.constraint?v.binding.constraint(z):void 0,Ze=be(Q(m.initialValue),{constraint:ge,equals:v.binding.equals}),dt=new GC({reader:Q,target:c.target,value:Ze,writer:v.binding.writer(z)}),wt=S.optional.boolean(c.params.disabled).value,zt=S.optional.boolean(c.params.hidden).value,Wt=v.controller({constraint:ge,document:c.document,initialValue:m.initialValue,params:m.params,value:dt.value,viewProps:ye.create({disabled:wt,hidden:zt})}),Ri=S.optional.string(c.params.label).value;return new At(c.document,{binding:dt,blade:it(),props:oe.fromObject({label:Ri??c.target.key}),valueController:Wt})}class WC{constructor(c){this.onTick_=this.onTick_.bind(this),this.reader_=c.reader,this.target=c.target,this.emitter=new O,this.value=c.value,this.ticker=c.ticker,this.ticker.emitter.on("tick",this.onTick_),this.read()}dispose(){this.ticker.dispose()}read(){const c=this.target.read();if(c===void 0)return;const m=this.value.rawValue,S=this.reader_(c);this.value.rawValue=j3(m,S),this.emitter.emit("update",{rawValue:S,sender:this})}onTick_(c){this.read()}}function XC(v,c){return c===0?new Af:new Tf(v,c??hl.monitor.defaultInterval)}function HC(v,c){var m,S,z;const Q=Ae,ge=v.accept(c.target.read(),c.params);if(p(ge))return null;const Ze={target:c.target,initialValue:ge.initialValue,params:ge.params},dt=v.binding.reader(Ze),wt=(S=(m=Q.optional.number(c.params.bufferSize).value)!==null&&m!==void 0?m:v.binding.defaultBufferSize&&v.binding.defaultBufferSize(ge.params))!==null&&S!==void 0?S:1,zt=Q.optional.number(c.params.interval).value,Wt=new WC({reader:dt,target:c.target,ticker:XC(c.document,zt),value:q3(wt)}),Ri=Q.optional.boolean(c.params.disabled).value,dl=Q.optional.boolean(c.params.hidden).value,pl=v.controller({document:c.document,params:ge.params,value:Wt.value,viewProps:ye.create({disabled:Ri,hidden:dl})}),Xo=(z=Q.optional.string(c.params.label).value)!==null&&z!==void 0?z:c.target.key;return new sn(c.document,{binding:Wt,blade:it(),props:oe.fromObject({label:Xo}),valueController:pl})}class YC{constructor(){this.pluginsMap_={blades:[],inputs:[],monitors:[]}}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(c){c.type==="blade"?this.pluginsMap_.blades.unshift(c):c.type==="input"?this.pluginsMap_.inputs.unshift(c):c.type==="monitor"&&this.pluginsMap_.monitors.unshift(c)}createInput(c,m,S){const z=m.read();if(p(z))throw new y({context:{key:m.key},type:"nomatchingcontroller"});const Q=this.pluginsMap_.inputs.reduce((ge,Ze)=>ge??$C(Ze,{document:c,target:m,params:S}),null);if(Q)return Q;throw new y({context:{key:m.key},type:"nomatchingcontroller"})}createMonitor(c,m,S){const z=this.pluginsMap_.monitors.reduce((Q,ge)=>Q??HC(ge,{document:c,params:S,target:m}),null);if(z)return z;throw new y({context:{key:m.key},type:"nomatchingcontroller"})}createBlade(c,m){const S=this.pluginsMap_.blades.reduce((z,Q)=>z??Ef(Q,{document:c,params:m}),null);if(!S)throw new y({type:"nomatchingview",context:{params:m}});return S}createBladeApi(c){if(c instanceof At)return new $n(c);if(c instanceof sn)return new Un(c);if(c instanceof Ct)return new sr(c,this);const m=this.pluginsMap_.blades.reduce((S,z)=>S??z.api({controller:c,pool:this}),null);if(!m)throw y.shouldNeverHappen();return m}}function qC(){const v=new YC;return[eP,PC,IC,DC,vC,hC,fC,aC,oS,BC,zC,VC,Ve,yn,un,Bc].forEach(c=>{v.register(c)}),v}function ZC(v){return us.isObject(v)?new us(v.x,v.y):new us}function jC(v,c){v.writeProperty("x",c.x),v.writeProperty("y",c.y)}function Oi(v,c){if(!v)return;const m=[],S=gg(v,c);S&&m.push(S);const z=vg(v);return z&&m.push(z),new l(m)}function KC(v,c){return new cs({assembly:xg,components:[Oi("x"in v?v.x:void 0,c.x),Oi("y"in v?v.y:void 0,c.y)]})}function Pg(v,c){const[m,S]=v?mC(v):[];if(!p(m)||!p(S))return Math.max(Math.abs(m??0),Math.abs(S??0));const z=Uo(v);return Math.max(Math.abs(z)*10,Math.abs(c)*10)}function JC(v,c){const m=c instanceof cs?c.components[0]:void 0,S=c instanceof cs?c.components[1]:void 0,z=Pg(m,v.x),Q=Pg(S,v.y);return Math.max(z,Q)}function Mg(v,c){return{baseStep:Uo(c),constraint:c,textProps:oe.fromObject({draggingScale:Vo(c,v),formatter:Hn(kc(c,v))})}}function QC(v){if(!("y"in v))return!1;const c=v.y;return c&&"inverted"in c?!!c.inverted:!1}const eP={id:"input-point2d",type:"input",accept:(v,c)=>{if(!us.isObject(v))return null;const m=Ae,S=$e(c,{expanded:m.optional.boolean,picker:m.optional.custom(Gm),x:m.optional.custom(as),y:m.optional.object({inverted:m.optional.boolean,max:m.optional.number,min:m.optional.number,step:m.optional.number})});return S?{initialValue:v,params:S}:null},binding:{reader:v=>ZC,constraint:v=>KC(v.params,v.initialValue),equals:us.equals,writer:v=>jC},controller:v=>{const c=v.document,m=v.value,S=v.constraint;if(!(S instanceof cs))throw y.shouldNeverHappen();const z="expanded"in v.params?v.params.expanded:void 0,Q="picker"in v.params?v.params.picker:void 0;return new wC(c,{axes:[Mg(m.rawValue.x,S.components[0]),Mg(m.rawValue.y,S.components[1])],expanded:z??!1,invertsY:QC(v.params),maxValue:JC(m.rawValue,S),parser:Li,pickerLayout:Q??"popup",value:m,viewProps:v.viewProps})}};class Eg extends i{constructor(c){super(c),this.emitter_=new O,this.controller_.valueController.value.emitter.on("change",m=>{this.emitter_.emit("change",{event:new o(this,m.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(c){this.controller_.props.set("label",c)}get options(){return this.controller_.valueController.props.get("options")}set options(c){this.controller_.valueController.props.set("options",c)}get value(){return this.controller_.valueController.value.rawValue}set value(c){this.controller_.valueController.value.rawValue=c}on(c,m){const S=m.bind(this);return this.emitter_.on(c,z=>{S(z.event)}),this}}class Ag extends i{constructor(c){super(c),this.emitter_=new O,this.controller_.valueController.value.emitter.on("change",m=>{this.emitter_.emit("change",{event:new o(this,m.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(c){this.controller_.props.set("label",c)}get maxValue(){return this.controller_.valueController.sliderController.props.get("maxValue")}set maxValue(c){this.controller_.valueController.sliderController.props.set("maxValue",c)}get minValue(){return this.controller_.valueController.sliderController.props.get("minValue")}set minValue(c){this.controller_.valueController.sliderController.props.set("minValue",c)}get value(){return this.controller_.valueController.value.rawValue}set value(c){this.controller_.valueController.value.rawValue=c}on(c,m){const S=m.bind(this);return this.emitter_.on(c,z=>{S(z.event)}),this}}class Tg extends i{constructor(c){super(c),this.emitter_=new O,this.controller_.valueController.value.emitter.on("change",m=>{this.emitter_.emit("change",{event:new o(this,m.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(c){this.controller_.props.set("label",c)}get formatter(){return this.controller_.valueController.props.get("formatter")}set formatter(c){this.controller_.valueController.props.set("formatter",c)}get value(){return this.controller_.valueController.value.rawValue}set value(c){this.controller_.valueController.value.rawValue=c}on(c,m){const S=m.bind(this);return this.emitter_.on(c,z=>{S(z.event)}),this}}const tP=function(){return{id:"list",type:"blade",accept(v){const c=Ae,m=$e(v,{options:c.required.custom(Nc),value:c.required.raw,view:c.required.constant("list"),label:c.optional.string});return m?{params:m}:null},controller(v){const c=new _($m(v.params.options)),m=be(v.params.value,{constraint:c}),S=new te(v.document,{props:new oe({options:c.values.value("options")}),value:m,viewProps:v.viewProps});return new cn(v.document,{blade:v.blade,props:oe.fromObject({label:v.params.label}),valueController:S})},api(v){return!(v.controller instanceof cn)||!(v.controller.valueController instanceof te)?null:new Eg(v.controller)}}}();function nP(v){return v.reduce((c,m)=>Object.assign(c,{[m.presetKey]:m.read()}),{})}function rP(v,c){v.forEach(m=>{const S=c[m.presetKey];S!==void 0&&m.write(S)})}class iP extends q{constructor(c,m){super(c,m)}get element(){return this.controller_.view.element}importPreset(c){const m=this.controller_.rackController.rack.find(At).map(S=>S.binding.target);rP(m,c),this.refresh()}exportPreset(){const c=this.controller_.rackController.rack.find(At).map(m=>m.binding.target);return nP(c)}refresh(){this.controller_.rackController.rack.find(At).forEach(c=>{c.binding.read()}),this.controller_.rackController.rack.find(sn).forEach(c=>{c.binding.read()})}}class sP extends kt{constructor(c,m){super(c,{expanded:m.expanded,blade:m.blade,props:m.props,root:!0,viewProps:m.viewProps})}}const oP={id:"slider",type:"blade",accept(v){const c=Ae,m=$e(v,{max:c.required.number,min:c.required.number,view:c.required.constant("slider"),format:c.optional.function,label:c.optional.string,value:c.optional.number});return m?{params:m}:null},controller(v){var c,m;const S=(c=v.params.value)!==null&&c!==void 0?c:0,z=new x({max:v.params.max,min:v.params.min}),Q=new kf(v.document,{baseStep:1,parser:Li,sliderProps:new oe({maxValue:z.values.value("max"),minValue:z.values.value("min")}),textProps:oe.fromObject({draggingScale:Vo(void 0,S),formatter:(m=v.params.format)!==null&&m!==void 0?m:H3}),value:be(S,{constraint:z}),viewProps:v.viewProps});return new cn(v.document,{blade:v.blade,props:oe.fromObject({label:v.params.label}),valueController:Q})},api(v){return!(v.controller instanceof cn)||!(v.controller.valueController instanceof kf)?null:new Ag(v.controller)}},aP=function(){return{id:"text",type:"blade",accept(v){const c=Ae,m=$e(v,{parse:c.required.function,value:c.required.raw,view:c.required.constant("text"),format:c.optional.function,label:c.optional.string});return m?{params:m}:null},controller(v){var c;const m=new Pt(v.document,{parser:v.params.parse,props:oe.fromObject({formatter:(c=v.params.format)!==null&&c!==void 0?c:S=>String(S)}),value:be(v.params.value),viewProps:v.viewProps});return new cn(v.document,{blade:v.blade,props:oe.fromObject({label:v.params.label}),valueController:m})},api(v){return!(v.controller instanceof cn)||!(v.controller.valueController instanceof Pt)?null:new Tg(v.controller)}}}();function lP(v){const c=v.createElement("div");return c.classList.add(T("dfw")()),v.body&&v.body.appendChild(c),c}function Ig(v,c,m){if(v.querySelector(`style[data-tp-style=${c}]`))return;const S=v.createElement("style");S.dataset.tpStyle=c,S.textContent=m,v.head.appendChild(S)}class cP extends iP{constructor(c){var m,S;const z=c??{},Q=(m=z.document)!==null&&m!==void 0?m:ct(),ge=qC(),Ze=new sP(Q,{expanded:z.expanded,blade:it(),props:oe.fromObject({title:z.title}),viewProps:ye.create()});super(Ze,ge),this.pool_=ge,this.containerElem_=(S=z.container)!==null&&S!==void 0?S:lP(Q),this.containerElem_.appendChild(this.element),this.doc_=Q,this.usesDefaultWrapper_=!z.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw y.alreadyDisposed();return this.doc_}dispose(){const c=this.containerElem_;if(!c)throw y.alreadyDisposed();if(this.usesDefaultWrapper_){const m=c.parentElement;m&&m.removeChild(c)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(c){("plugin"in c?[c.plugin]:"plugins"in c?c.plugins:[]).forEach(S=>{this.pool_.register(S),this.embedPluginStyle_(S)})}embedPluginStyle_(c){c.css&&Ig(this.document,`plugin-${c.id}`,c.css)}setUpDefaultPlugins_(){Ig(this.document,"default",'.tp-tbiv_b,.tp-coltxtv_ms,.tp-ckbv_i,.tp-rotv_b,.tp-fldv_b,.tp-mllv_i,.tp-sglv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-mllv_i,.tp-sglv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--mo-fg);height:var(--bld-us);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-mllv_i::-webkit-scrollbar,.tp-sglv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-mllv_i::-webkit-scrollbar-corner,.tp-sglv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-mllv_i::-webkit-scrollbar-thumb,.tp-sglv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-br: var(--tp-base-border-radius, 6px);--cnt-h-p: var(--tp-container-horizontal-padding, 4px);--cnt-v-p: var(--tp-container-vertical-padding, 4px);--elm-br: var(--tp-element-border-radius, 2px);--bld-s: var(--tp-blade-spacing, 4px);--bld-us: var(--tp-blade-unit-size, 20px);--bs-bg: var(--tp-base-background-color, hsl(230deg, 7%, 17%));--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--btn-bg: var(--tp-button-background-color, hsl(230deg, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230deg, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230deg, 7%, 75%));--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230deg, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tabv_c .tp-brkv>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-v-p))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tabv_c .tp-brkv>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--bld-s)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tabv_c .tp-brkv>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tabv_c .tp-brkv>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--elm-br);border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tabv_c .tp-brkv .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tabv_c .tp-brkv>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tabv_c .tp-brkv>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--elm-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);overflow:hidden;padding-left:var(--cnt-h-p);padding-right:calc(4px + var(--bld-us) + var(--cnt-h-p));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(var(--cnt-h-p) + (var(--bld-us) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--elm-br);cursor:pointer;display:block;height:var(--bld-us);position:relative;width:var(--bld-us)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--bld-s);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--bld-s)}.tp-colpv_rgb{display:flex;margin-top:var(--bld-s);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-v-p);padding-top:calc(var(--cnt-v-p) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--elm-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--bld-us)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--elm-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--elm-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;cursor:pointer;display:block;height:var(--bld-us);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--bld-us)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--elm-br);bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--elm-br);color:var(--lbl-fg);cursor:pointer;height:var(--bld-us);line-height:var(--bld-us);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv.tp-fldv-not .tp-fldv_b{display:none}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--bld-us) + 4px);width:var(--bs-br)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--bld-us)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding:0 4px}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--bld-us)*3);line-height:var(--bld-us);padding:0 4px;resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--bld-s);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-p2dpv{padding-left:calc(var(--bld-us) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:6px;box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:168px;padding:var(--cnt-v-p) var(--cnt-h-p);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--bld-us);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--elm-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:"";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--bld-us) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_c{padding-bottom:var(--cnt-v-p);padding-left:4px;padding-top:var(--cnt-v-p)}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--bld-us) + 4px);width:var(--bs-br)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-h-p) + 4px);padding-right:calc(var(--cnt-h-p) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);bottom:2px;content:"";left:0;pointer-events:none;position:absolute;right:0;top:0}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);opacity:.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-txtv{position:relative}.tp-txtv_i{padding:0 4px}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:-3px;position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--bld-us) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--elm-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--bld-us) + var(--cnt-h-p));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv.tp-rotv-not .tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}'),this.pool_.getAll().forEach(c=>{this.embedPluginStyle_(c)}),this.registerPlugin({plugins:[oP,tP,Bc,aP]})}}const uP=new n("3.1.4");t.BladeApi=i,t.ButtonApi=A,t.FolderApi=q,t.InputBindingApi=$n,t.ListApi=Eg,t.MonitorBindingApi=Un,t.Pane=cP,t.SeparatorApi=wn,t.SliderApi=Ag,t.TabApi=$t,t.TabPageApi=mn,t.TextApi=Tg,t.TpChangeEvent=o,t.VERSION=uP,Object.defineProperty(t,"__esModule",{value:!0})})})(uX,T0);function fX(r){const e=hm({fontScale:1,fontQuality:4,fontDepth:.7}),t=r.addFolder({title:"Global dice settings"});return t.addInput(e,"fontScale",{label:"Font scale",min:.01,max:2,step:.01}),t.addInput(e,"fontQuality",{label:"Font quality",min:1,max:24,step:1}),t.addInput(e,"fontDepth",{label:"Font depth",min:.01,max:2,step:.01}),Lo(()=>{t.dispose()}),e}function Ob(r,e,t,n){var s;const i={view:"list",options:e,value:t??((s=e[0])==null?void 0:s.value)??"",label:n};return r.addBlade(i)}const hX=["rvrn","ltra","ltrm","frac","numr","dnom","ccmp","locl","rlig","mark","mkmk","calt","clig","liga","rclt","curs","kern"];function Rb(r,e,t,n,i){let s=Va(t);const o=new Map,a=new Map;let u={},f={},h={};const p=r.addFolder({title:e}),g=Ob(p,Bb(t),null,"Font family"),b=Ob(p,Fb(s),null,"Font variation"),C=p.addFolder({title:"Font features",expanded:!1});C.on("change",()=>{i(h)}),A(s),O(s),b.hidden=b.options.length===1,g.on("change",B=>{const F=dX(t,B.value);w(F)}),b.on("change",B=>{E(B.value)});function y(B){t=[...t,...B],g.options=Bb(t),w(Va(B))}function w(B){s=B;const F=dm(B);g.value=F,b.options=Fb(B),b.value="Default",b.hidden=b.options.length===1,o.forEach(I=>{I.dispose()}),o.clear(),u={},f={},A(B),O(B),n(B)}function A(B){for(const[F,I]of Object.entries(B.variationAxes)){u[F]=I.default,f[F]=I.default;const N=p.addInput(u,F,{min:I.min,max:I.max,step:1,label:I.name});N.on("change",M),o.set(F,N)}}function O(B){a.forEach(F=>{F.dispose()});for(const F of B.availableFeatures){h[F]=hX.includes(F);const I=C.addInput(h,F);a.set(F,I)}C.hidden=a.size===0}function E(B){if(B==="Default"){T(f),n(s);return}const F=s.namedVariations[B];F&&T(F),n(s.getVariation(B))}function T(B){Object.assign(u,B),o.forEach(F=>{F.refresh()})}function M(){const B=s.getVariation(u);n(B)}return Lo(()=>{p.dispose()}),{addFonts:y}}function dm(r){return r.fullName}function dX(r,e){const t=r.find(n=>dm(n)===e);if(t===void 0)throw new Error(`Unknown font name "${e}"`);return t}function Bb(r){return r.map(e=>{const t=dm(e);return{value:t,text:t}})}function Fb(r){return[{value:"Default",text:"Default"},...Object.keys(r.namedVariations).map(e=>({value:e,text:e}))]}function pX(r,e){const t=hm({showGrid:!0,baseOpacity:.9,renderMode:"preview",renderOperation:"subtract"}),n=r.addFolder({title:"Scene settings"});return n.addInput(t,"showGrid",{label:"Show grid"}),n.addInput(t,"baseOpacity",{min:.1,max:1,step:.1,label:"Base opacity"}),n.addInput(t,"renderMode",{label:"Render mode",options:[{value:"preview",text:"Preview"},{value:"render",text:"Render"},{value:"stl",text:"STL"}]}),n.addInput(t,"renderOperation",{label:"Render operation",options:[{value:"subtract",text:"Subtract"},{value:"union",text:"Union"}]}),n.addButton({title:"Export STL"}).on("click",e.onExport),Lo(()=>{n.dispose()}),t}function mX(r,e){const t=new T0.Pane({title:"Settings"});Lo(()=>{t.dispose()});const n=pX(t,r),i=fX(t),s=hm({textFont:Va(e),textFeatures:{},markFont:Va(e),markFeatures:{}}),{addFonts:o}=Rb(t,"Text font",e,f=>{s.textFont=f},f=>{s.textFeatures={...f}}),{addFonts:a}=Rb(t,"Mark font",e,f=>{s.markFont=f},f=>{s.markFeatures={...f}});function u(f){o(f),a(f)}return{pane:t,sceneSettings:n,globalDiceSettings:i,fontsSettings:s,addFonts:u}}var pm={},tl={};tl.byteLength=xX;tl.toByteArray=yX;tl.fromByteArray=SX;var bi=[],zr=[],gX=typeof Uint8Array<"u"?Uint8Array:Array,_d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var ba=0,vX=_d.length;ba<vX;++ba)bi[ba]=_d[ba],zr[_d.charCodeAt(ba)]=ba;zr["-".charCodeAt(0)]=62;zr["_".charCodeAt(0)]=63;function P_(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function xX(r){var e=P_(r),t=e[0],n=e[1];return(t+n)*3/4-n}function bX(r,e,t){return(e+t)*3/4-t}function yX(r){var e,t=P_(r),n=t[0],i=t[1],s=new gX(bX(r,n,i)),o=0,a=i>0?n-4:n,u;for(u=0;u<a;u+=4)e=zr[r.charCodeAt(u)]<<18|zr[r.charCodeAt(u+1)]<<12|zr[r.charCodeAt(u+2)]<<6|zr[r.charCodeAt(u+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=zr[r.charCodeAt(u)]<<2|zr[r.charCodeAt(u+1)]>>4,s[o++]=e&255),i===1&&(e=zr[r.charCodeAt(u)]<<10|zr[r.charCodeAt(u+1)]<<4|zr[r.charCodeAt(u+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function wX(r){return bi[r>>18&63]+bi[r>>12&63]+bi[r>>6&63]+bi[r&63]}function _X(r,e,t){for(var n,i=[],s=e;s<t;s+=3)n=(r[s]<<16&16711680)+(r[s+1]<<8&65280)+(r[s+2]&255),i.push(wX(n));return i.join("")}function SX(r){for(var e,t=r.length,n=t%3,i=[],s=16383,o=0,a=t-n;o<a;o+=s)i.push(_X(r,o,o+s>a?a:o+s));return n===1?(e=r[t-1],i.push(bi[e>>2]+bi[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(bi[e>>10]+bi[e>>4&63]+bi[e<<2&63]+"=")),i.join("")}var mm={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */mm.read=function(r,e,t,n,i){var s,o,a=i*8-n-1,u=(1<<a)-1,f=u>>1,h=-7,p=t?i-1:0,g=t?-1:1,b=r[e+p];for(p+=g,s=b&(1<<-h)-1,b>>=-h,h+=a;h>0;s=s*256+r[e+p],p+=g,h-=8);for(o=s&(1<<-h)-1,s>>=-h,h+=n;h>0;o=o*256+r[e+p],p+=g,h-=8);if(s===0)s=1-f;else{if(s===u)return o?NaN:(b?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-f}return(b?-1:1)*o*Math.pow(2,s-n)};mm.write=function(r,e,t,n,i,s){var o,a,u,f=s*8-i-1,h=(1<<f)-1,p=h>>1,g=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=n?0:s-1,C=n?1:-1,y=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=h):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+p>=1?e+=g/u:e+=g*Math.pow(2,1-p),e*u>=2&&(o++,u/=2),o+p>=h?(a=0,o=h):o+p>=1?(a=(e*u-1)*Math.pow(2,i),o=o+p):(a=e*Math.pow(2,p-1)*Math.pow(2,i),o=0));i>=8;r[t+b]=a&255,b+=C,a/=256,i-=8);for(o=o<<i|a,f+=i;f>0;r[t+b]=o&255,b+=C,o/=256,f-=8);r[t+b-C]|=y*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){const e=tl,t=mm,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=a,r.SlowBuffer=O,r.INSPECT_MAX_BYTES=50;const i=2147483647;r.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const k=new Uint8Array(1),L={foo:function(){return 42}};return Object.setPrototypeOf(L,Uint8Array.prototype),Object.setPrototypeOf(k,L),k.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(k){if(k>i)throw new RangeError('The value "'+k+'" is invalid for option "size"');const L=new Uint8Array(k);return Object.setPrototypeOf(L,a.prototype),L}function a(k,L,P){if(typeof k=="number"){if(typeof L=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return p(k)}return u(k,L,P)}a.poolSize=8192;function u(k,L,P){if(typeof k=="string")return g(k,L);if(ArrayBuffer.isView(k))return C(k);if(k==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof k);if(Y(k,ArrayBuffer)||k&&Y(k.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Y(k,SharedArrayBuffer)||k&&Y(k.buffer,SharedArrayBuffer)))return y(k,L,P);if(typeof k=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const U=k.valueOf&&k.valueOf();if(U!=null&&U!==k)return a.from(U,L,P);const j=w(k);if(j)return j;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof k[Symbol.toPrimitive]=="function")return a.from(k[Symbol.toPrimitive]("string"),L,P);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof k)}a.from=function(k,L,P){return u(k,L,P)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function f(k){if(typeof k!="number")throw new TypeError('"size" argument must be of type number');if(k<0)throw new RangeError('The value "'+k+'" is invalid for option "size"')}function h(k,L,P){return f(k),k<=0?o(k):L!==void 0?typeof P=="string"?o(k).fill(L,P):o(k).fill(L):o(k)}a.alloc=function(k,L,P){return h(k,L,P)};function p(k){return f(k),o(k<0?0:A(k)|0)}a.allocUnsafe=function(k){return p(k)},a.allocUnsafeSlow=function(k){return p(k)};function g(k,L){if((typeof L!="string"||L==="")&&(L="utf8"),!a.isEncoding(L))throw new TypeError("Unknown encoding: "+L);const P=E(k,L)|0;let U=o(P);const j=U.write(k,L);return j!==P&&(U=U.slice(0,j)),U}function b(k){const L=k.length<0?0:A(k.length)|0,P=o(L);for(let U=0;U<L;U+=1)P[U]=k[U]&255;return P}function C(k){if(Y(k,Uint8Array)){const L=new Uint8Array(k);return y(L.buffer,L.byteOffset,L.byteLength)}return b(k)}function y(k,L,P){if(L<0||k.byteLength<L)throw new RangeError('"offset" is outside of buffer bounds');if(k.byteLength<L+(P||0))throw new RangeError('"length" is outside of buffer bounds');let U;return L===void 0&&P===void 0?U=new Uint8Array(k):P===void 0?U=new Uint8Array(k,L):U=new Uint8Array(k,L,P),Object.setPrototypeOf(U,a.prototype),U}function w(k){if(a.isBuffer(k)){const L=A(k.length)|0,P=o(L);return P.length===0||k.copy(P,0,0,L),P}if(k.length!==void 0)return typeof k.length!="number"||W(k.length)?o(0):b(k);if(k.type==="Buffer"&&Array.isArray(k.data))return b(k.data)}function A(k){if(k>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return k|0}function O(k){return+k!=k&&(k=0),a.alloc(+k)}a.isBuffer=function(L){return L!=null&&L._isBuffer===!0&&L!==a.prototype},a.compare=function(L,P){if(Y(L,Uint8Array)&&(L=a.from(L,L.offset,L.byteLength)),Y(P,Uint8Array)&&(P=a.from(P,P.offset,P.byteLength)),!a.isBuffer(L)||!a.isBuffer(P))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(L===P)return 0;let U=L.length,j=P.length;for(let re=0,se=Math.min(U,j);re<se;++re)if(L[re]!==P[re]){U=L[re],j=P[re];break}return U<j?-1:j<U?1:0},a.isEncoding=function(L){switch(String(L).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(L,P){if(!Array.isArray(L))throw new TypeError('"list" argument must be an Array of Buffers');if(L.length===0)return a.alloc(0);let U;if(P===void 0)for(P=0,U=0;U<L.length;++U)P+=L[U].length;const j=a.allocUnsafe(P);let re=0;for(U=0;U<L.length;++U){let se=L[U];if(Y(se,Uint8Array))re+se.length>j.length?(a.isBuffer(se)||(se=a.from(se)),se.copy(j,re)):Uint8Array.prototype.set.call(j,se,re);else if(a.isBuffer(se))se.copy(j,re);else throw new TypeError('"list" argument must be an Array of Buffers');re+=se.length}return j};function E(k,L){if(a.isBuffer(k))return k.length;if(ArrayBuffer.isView(k)||Y(k,ArrayBuffer))return k.byteLength;if(typeof k!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof k);const P=k.length,U=arguments.length>2&&arguments[2]===!0;if(!U&&P===0)return 0;let j=!1;for(;;)switch(L){case"ascii":case"latin1":case"binary":return P;case"utf8":case"utf-8":return ze(k).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P*2;case"hex":return P>>>1;case"base64":return pt(k).length;default:if(j)return U?-1:ze(k).length;L=(""+L).toLowerCase(),j=!0}}a.byteLength=E;function T(k,L,P){let U=!1;if((L===void 0||L<0)&&(L=0),L>this.length||((P===void 0||P>this.length)&&(P=this.length),P<=0)||(P>>>=0,L>>>=0,P<=L))return"";for(k||(k="utf8");;)switch(k){case"hex":return Te(this,L,P);case"utf8":case"utf-8":return H(this,L,P);case"ascii":return be(this,L,P);case"latin1":case"binary":return oe(this,L,P);case"base64":return Z(this,L,P);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ie(this,L,P);default:if(U)throw new TypeError("Unknown encoding: "+k);k=(k+"").toLowerCase(),U=!0}}a.prototype._isBuffer=!0;function M(k,L,P){const U=k[L];k[L]=k[P],k[P]=U}a.prototype.swap16=function(){const L=this.length;if(L%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let P=0;P<L;P+=2)M(this,P,P+1);return this},a.prototype.swap32=function(){const L=this.length;if(L%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let P=0;P<L;P+=4)M(this,P,P+3),M(this,P+1,P+2);return this},a.prototype.swap64=function(){const L=this.length;if(L%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let P=0;P<L;P+=8)M(this,P,P+7),M(this,P+1,P+6),M(this,P+2,P+5),M(this,P+3,P+4);return this},a.prototype.toString=function(){const L=this.length;return L===0?"":arguments.length===0?H(this,0,L):T.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(L){if(!a.isBuffer(L))throw new TypeError("Argument must be a Buffer");return this===L?!0:a.compare(this,L)===0},a.prototype.inspect=function(){let L="";const P=r.INSPECT_MAX_BYTES;return L=this.toString("hex",0,P).replace(/(.{2})/g,"$1 ").trim(),this.length>P&&(L+=" ... "),"<Buffer "+L+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(L,P,U,j,re){if(Y(L,Uint8Array)&&(L=a.from(L,L.offset,L.byteLength)),!a.isBuffer(L))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof L);if(P===void 0&&(P=0),U===void 0&&(U=L?L.length:0),j===void 0&&(j=0),re===void 0&&(re=this.length),P<0||U>L.length||j<0||re>this.length)throw new RangeError("out of range index");if(j>=re&&P>=U)return 0;if(j>=re)return-1;if(P>=U)return 1;if(P>>>=0,U>>>=0,j>>>=0,re>>>=0,this===L)return 0;let se=re-j,Ve=U-P;const Ye=Math.min(se,Ve),it=this.slice(j,re),st=L.slice(P,U);for(let ot=0;ot<Ye;++ot)if(it[ot]!==st[ot]){se=it[ot],Ve=st[ot];break}return se<Ve?-1:Ve<se?1:0};function B(k,L,P,U,j){if(k.length===0)return-1;if(typeof P=="string"?(U=P,P=0):P>2147483647?P=2147483647:P<-2147483648&&(P=-2147483648),P=+P,W(P)&&(P=j?0:k.length-1),P<0&&(P=k.length+P),P>=k.length){if(j)return-1;P=k.length-1}else if(P<0)if(j)P=0;else return-1;if(typeof L=="string"&&(L=a.from(L,U)),a.isBuffer(L))return L.length===0?-1:F(k,L,P,U,j);if(typeof L=="number")return L=L&255,typeof Uint8Array.prototype.indexOf=="function"?j?Uint8Array.prototype.indexOf.call(k,L,P):Uint8Array.prototype.lastIndexOf.call(k,L,P):F(k,[L],P,U,j);throw new TypeError("val must be string, number or Buffer")}function F(k,L,P,U,j){let re=1,se=k.length,Ve=L.length;if(U!==void 0&&(U=String(U).toLowerCase(),U==="ucs2"||U==="ucs-2"||U==="utf16le"||U==="utf-16le")){if(k.length<2||L.length<2)return-1;re=2,se/=2,Ve/=2,P/=2}function Ye(st,ot){return re===1?st[ot]:st.readUInt16BE(ot*re)}let it;if(j){let st=-1;for(it=P;it<se;it++)if(Ye(k,it)===Ye(L,st===-1?0:it-st)){if(st===-1&&(st=it),it-st+1===Ve)return st*re}else st!==-1&&(it-=it-st),st=-1}else for(P+Ve>se&&(P=se-Ve),it=P;it>=0;it--){let st=!0;for(let ot=0;ot<Ve;ot++)if(Ye(k,it+ot)!==Ye(L,ot)){st=!1;break}if(st)return it}return-1}a.prototype.includes=function(L,P,U){return this.indexOf(L,P,U)!==-1},a.prototype.indexOf=function(L,P,U){return B(this,L,P,U,!0)},a.prototype.lastIndexOf=function(L,P,U){return B(this,L,P,U,!1)};function I(k,L,P,U){P=Number(P)||0;const j=k.length-P;U?(U=Number(U),U>j&&(U=j)):U=j;const re=L.length;U>re/2&&(U=re/2);let se;for(se=0;se<U;++se){const Ve=parseInt(L.substr(se*2,2),16);if(W(Ve))return se;k[P+se]=Ve}return se}function N(k,L,P,U){return ct(ze(L,k.length-P),k,P,U)}function G(k,L,P,U){return ct(Fe(L),k,P,U)}function X(k,L,P,U){return ct(pt(L),k,P,U)}function J(k,L,P,U){return ct(qe(L,k.length-P),k,P,U)}a.prototype.write=function(L,P,U,j){if(P===void 0)j="utf8",U=this.length,P=0;else if(U===void 0&&typeof P=="string")j=P,U=this.length,P=0;else if(isFinite(P))P=P>>>0,isFinite(U)?(U=U>>>0,j===void 0&&(j="utf8")):(j=U,U=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const re=this.length-P;if((U===void 0||U>re)&&(U=re),L.length>0&&(U<0||P<0)||P>this.length)throw new RangeError("Attempt to write outside buffer bounds");j||(j="utf8");let se=!1;for(;;)switch(j){case"hex":return I(this,L,P,U);case"utf8":case"utf-8":return N(this,L,P,U);case"ascii":case"latin1":case"binary":return G(this,L,P,U);case"base64":return X(this,L,P,U);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J(this,L,P,U);default:if(se)throw new TypeError("Unknown encoding: "+j);j=(""+j).toLowerCase(),se=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Z(k,L,P){return L===0&&P===k.length?e.fromByteArray(k):e.fromByteArray(k.slice(L,P))}function H(k,L,P){P=Math.min(k.length,P);const U=[];let j=L;for(;j<P;){const re=k[j];let se=null,Ve=re>239?4:re>223?3:re>191?2:1;if(j+Ve<=P){let Ye,it,st,ot;switch(Ve){case 1:re<128&&(se=re);break;case 2:Ye=k[j+1],(Ye&192)===128&&(ot=(re&31)<<6|Ye&63,ot>127&&(se=ot));break;case 3:Ye=k[j+1],it=k[j+2],(Ye&192)===128&&(it&192)===128&&(ot=(re&15)<<12|(Ye&63)<<6|it&63,ot>2047&&(ot<55296||ot>57343)&&(se=ot));break;case 4:Ye=k[j+1],it=k[j+2],st=k[j+3],(Ye&192)===128&&(it&192)===128&&(st&192)===128&&(ot=(re&15)<<18|(Ye&63)<<12|(it&63)<<6|st&63,ot>65535&&ot<1114112&&(se=ot))}}se===null?(se=65533,Ve=1):se>65535&&(se-=65536,U.push(se>>>10&1023|55296),se=56320|se&1023),U.push(se),j+=Ve}return ie(U)}const ne=4096;function ie(k){const L=k.length;if(L<=ne)return String.fromCharCode.apply(String,k);let P="",U=0;for(;U<L;)P+=String.fromCharCode.apply(String,k.slice(U,U+=ne));return P}function be(k,L,P){let U="";P=Math.min(k.length,P);for(let j=L;j<P;++j)U+=String.fromCharCode(k[j]&127);return U}function oe(k,L,P){let U="";P=Math.min(k.length,P);for(let j=L;j<P;++j)U+=String.fromCharCode(k[j]);return U}function Te(k,L,P){const U=k.length;(!L||L<0)&&(L=0),(!P||P<0||P>U)&&(P=U);let j="";for(let re=L;re<P;++re)j+=me[k[re]];return j}function Ie(k,L,P){const U=k.slice(L,P);let j="";for(let re=0;re<U.length-1;re+=2)j+=String.fromCharCode(U[re]+U[re+1]*256);return j}a.prototype.slice=function(L,P){const U=this.length;L=~~L,P=P===void 0?U:~~P,L<0?(L+=U,L<0&&(L=0)):L>U&&(L=U),P<0?(P+=U,P<0&&(P=0)):P>U&&(P=U),P<L&&(P=L);const j=this.subarray(L,P);return Object.setPrototypeOf(j,a.prototype),j};function ve(k,L,P){if(k%1!==0||k<0)throw new RangeError("offset is not uint");if(k+L>P)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(L,P,U){L=L>>>0,P=P>>>0,U||ve(L,P,this.length);let j=this[L],re=1,se=0;for(;++se<P&&(re*=256);)j+=this[L+se]*re;return j},a.prototype.readUintBE=a.prototype.readUIntBE=function(L,P,U){L=L>>>0,P=P>>>0,U||ve(L,P,this.length);let j=this[L+--P],re=1;for(;P>0&&(re*=256);)j+=this[L+--P]*re;return j},a.prototype.readUint8=a.prototype.readUInt8=function(L,P){return L=L>>>0,P||ve(L,1,this.length),this[L]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(L,P){return L=L>>>0,P||ve(L,2,this.length),this[L]|this[L+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(L,P){return L=L>>>0,P||ve(L,2,this.length),this[L]<<8|this[L+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(L,P){return L=L>>>0,P||ve(L,4,this.length),(this[L]|this[L+1]<<8|this[L+2]<<16)+this[L+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(L,P){return L=L>>>0,P||ve(L,4,this.length),this[L]*16777216+(this[L+1]<<16|this[L+2]<<8|this[L+3])},a.prototype.readBigUInt64LE=Ne(function(L){L=L>>>0,pe(L,"offset");const P=this[L],U=this[L+7];(P===void 0||U===void 0)&&Me(L,this.length-8);const j=P+this[++L]*2**8+this[++L]*2**16+this[++L]*2**24,re=this[++L]+this[++L]*2**8+this[++L]*2**16+U*2**24;return BigInt(j)+(BigInt(re)<<BigInt(32))}),a.prototype.readBigUInt64BE=Ne(function(L){L=L>>>0,pe(L,"offset");const P=this[L],U=this[L+7];(P===void 0||U===void 0)&&Me(L,this.length-8);const j=P*2**24+this[++L]*2**16+this[++L]*2**8+this[++L],re=this[++L]*2**24+this[++L]*2**16+this[++L]*2**8+U;return(BigInt(j)<<BigInt(32))+BigInt(re)}),a.prototype.readIntLE=function(L,P,U){L=L>>>0,P=P>>>0,U||ve(L,P,this.length);let j=this[L],re=1,se=0;for(;++se<P&&(re*=256);)j+=this[L+se]*re;return re*=128,j>=re&&(j-=Math.pow(2,8*P)),j},a.prototype.readIntBE=function(L,P,U){L=L>>>0,P=P>>>0,U||ve(L,P,this.length);let j=P,re=1,se=this[L+--j];for(;j>0&&(re*=256);)se+=this[L+--j]*re;return re*=128,se>=re&&(se-=Math.pow(2,8*P)),se},a.prototype.readInt8=function(L,P){return L=L>>>0,P||ve(L,1,this.length),this[L]&128?(255-this[L]+1)*-1:this[L]},a.prototype.readInt16LE=function(L,P){L=L>>>0,P||ve(L,2,this.length);const U=this[L]|this[L+1]<<8;return U&32768?U|4294901760:U},a.prototype.readInt16BE=function(L,P){L=L>>>0,P||ve(L,2,this.length);const U=this[L+1]|this[L]<<8;return U&32768?U|4294901760:U},a.prototype.readInt32LE=function(L,P){return L=L>>>0,P||ve(L,4,this.length),this[L]|this[L+1]<<8|this[L+2]<<16|this[L+3]<<24},a.prototype.readInt32BE=function(L,P){return L=L>>>0,P||ve(L,4,this.length),this[L]<<24|this[L+1]<<16|this[L+2]<<8|this[L+3]},a.prototype.readBigInt64LE=Ne(function(L){L=L>>>0,pe(L,"offset");const P=this[L],U=this[L+7];(P===void 0||U===void 0)&&Me(L,this.length-8);const j=this[L+4]+this[L+5]*2**8+this[L+6]*2**16+(U<<24);return(BigInt(j)<<BigInt(32))+BigInt(P+this[++L]*2**8+this[++L]*2**16+this[++L]*2**24)}),a.prototype.readBigInt64BE=Ne(function(L){L=L>>>0,pe(L,"offset");const P=this[L],U=this[L+7];(P===void 0||U===void 0)&&Me(L,this.length-8);const j=(P<<24)+this[++L]*2**16+this[++L]*2**8+this[++L];return(BigInt(j)<<BigInt(32))+BigInt(this[++L]*2**24+this[++L]*2**16+this[++L]*2**8+U)}),a.prototype.readFloatLE=function(L,P){return L=L>>>0,P||ve(L,4,this.length),t.read(this,L,!0,23,4)},a.prototype.readFloatBE=function(L,P){return L=L>>>0,P||ve(L,4,this.length),t.read(this,L,!1,23,4)},a.prototype.readDoubleLE=function(L,P){return L=L>>>0,P||ve(L,8,this.length),t.read(this,L,!0,52,8)},a.prototype.readDoubleBE=function(L,P){return L=L>>>0,P||ve(L,8,this.length),t.read(this,L,!1,52,8)};function he(k,L,P,U,j,re){if(!a.isBuffer(k))throw new TypeError('"buffer" argument must be a Buffer instance');if(L>j||L<re)throw new RangeError('"value" argument is out of bounds');if(P+U>k.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(L,P,U,j){if(L=+L,P=P>>>0,U=U>>>0,!j){const Ve=Math.pow(2,8*U)-1;he(this,L,P,U,Ve,0)}let re=1,se=0;for(this[P]=L&255;++se<U&&(re*=256);)this[P+se]=L/re&255;return P+U},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(L,P,U,j){if(L=+L,P=P>>>0,U=U>>>0,!j){const Ve=Math.pow(2,8*U)-1;he(this,L,P,U,Ve,0)}let re=U-1,se=1;for(this[P+re]=L&255;--re>=0&&(se*=256);)this[P+re]=L/se&255;return P+U},a.prototype.writeUint8=a.prototype.writeUInt8=function(L,P,U){return L=+L,P=P>>>0,U||he(this,L,P,1,255,0),this[P]=L&255,P+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(L,P,U){return L=+L,P=P>>>0,U||he(this,L,P,2,65535,0),this[P]=L&255,this[P+1]=L>>>8,P+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(L,P,U){return L=+L,P=P>>>0,U||he(this,L,P,2,65535,0),this[P]=L>>>8,this[P+1]=L&255,P+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(L,P,U){return L=+L,P=P>>>0,U||he(this,L,P,4,4294967295,0),this[P+3]=L>>>24,this[P+2]=L>>>16,this[P+1]=L>>>8,this[P]=L&255,P+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(L,P,U){return L=+L,P=P>>>0,U||he(this,L,P,4,4294967295,0),this[P]=L>>>24,this[P+1]=L>>>16,this[P+2]=L>>>8,this[P+3]=L&255,P+4};function Be(k,L,P,U,j){ue(L,U,j,k,P,7);let re=Number(L&BigInt(4294967295));k[P++]=re,re=re>>8,k[P++]=re,re=re>>8,k[P++]=re,re=re>>8,k[P++]=re;let se=Number(L>>BigInt(32)&BigInt(4294967295));return k[P++]=se,se=se>>8,k[P++]=se,se=se>>8,k[P++]=se,se=se>>8,k[P++]=se,P}function Ae(k,L,P,U,j){ue(L,U,j,k,P,7);let re=Number(L&BigInt(4294967295));k[P+7]=re,re=re>>8,k[P+6]=re,re=re>>8,k[P+5]=re,re=re>>8,k[P+4]=re;let se=Number(L>>BigInt(32)&BigInt(4294967295));return k[P+3]=se,se=se>>8,k[P+2]=se,se=se>>8,k[P+1]=se,se=se>>8,k[P]=se,P+8}a.prototype.writeBigUInt64LE=Ne(function(L,P=0){return Be(this,L,P,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Ne(function(L,P=0){return Ae(this,L,P,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(L,P,U,j){if(L=+L,P=P>>>0,!j){const Ye=Math.pow(2,8*U-1);he(this,L,P,U,Ye-1,-Ye)}let re=0,se=1,Ve=0;for(this[P]=L&255;++re<U&&(se*=256);)L<0&&Ve===0&&this[P+re-1]!==0&&(Ve=1),this[P+re]=(L/se>>0)-Ve&255;return P+U},a.prototype.writeIntBE=function(L,P,U,j){if(L=+L,P=P>>>0,!j){const Ye=Math.pow(2,8*U-1);he(this,L,P,U,Ye-1,-Ye)}let re=U-1,se=1,Ve=0;for(this[P+re]=L&255;--re>=0&&(se*=256);)L<0&&Ve===0&&this[P+re+1]!==0&&(Ve=1),this[P+re]=(L/se>>0)-Ve&255;return P+U},a.prototype.writeInt8=function(L,P,U){return L=+L,P=P>>>0,U||he(this,L,P,1,127,-128),L<0&&(L=255+L+1),this[P]=L&255,P+1},a.prototype.writeInt16LE=function(L,P,U){return L=+L,P=P>>>0,U||he(this,L,P,2,32767,-32768),this[P]=L&255,this[P+1]=L>>>8,P+2},a.prototype.writeInt16BE=function(L,P,U){return L=+L,P=P>>>0,U||he(this,L,P,2,32767,-32768),this[P]=L>>>8,this[P+1]=L&255,P+2},a.prototype.writeInt32LE=function(L,P,U){return L=+L,P=P>>>0,U||he(this,L,P,4,2147483647,-2147483648),this[P]=L&255,this[P+1]=L>>>8,this[P+2]=L>>>16,this[P+3]=L>>>24,P+4},a.prototype.writeInt32BE=function(L,P,U){return L=+L,P=P>>>0,U||he(this,L,P,4,2147483647,-2147483648),L<0&&(L=4294967295+L+1),this[P]=L>>>24,this[P+1]=L>>>16,this[P+2]=L>>>8,this[P+3]=L&255,P+4},a.prototype.writeBigInt64LE=Ne(function(L,P=0){return Be(this,L,P,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Ne(function(L,P=0){return Ae(this,L,P,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function $e(k,L,P,U,j,re){if(P+U>k.length)throw new RangeError("Index out of range");if(P<0)throw new RangeError("Index out of range")}function Ee(k,L,P,U,j){return L=+L,P=P>>>0,j||$e(k,L,P,4),t.write(k,L,P,U,23,4),P+4}a.prototype.writeFloatLE=function(L,P,U){return Ee(this,L,P,!0,U)},a.prototype.writeFloatBE=function(L,P,U){return Ee(this,L,P,!1,U)};function ut(k,L,P,U,j){return L=+L,P=P>>>0,j||$e(k,L,P,8),t.write(k,L,P,U,52,8),P+8}a.prototype.writeDoubleLE=function(L,P,U){return ut(this,L,P,!0,U)},a.prototype.writeDoubleBE=function(L,P,U){return ut(this,L,P,!1,U)},a.prototype.copy=function(L,P,U,j){if(!a.isBuffer(L))throw new TypeError("argument should be a Buffer");if(U||(U=0),!j&&j!==0&&(j=this.length),P>=L.length&&(P=L.length),P||(P=0),j>0&&j<U&&(j=U),j===U||L.length===0||this.length===0)return 0;if(P<0)throw new RangeError("targetStart out of bounds");if(U<0||U>=this.length)throw new RangeError("Index out of range");if(j<0)throw new RangeError("sourceEnd out of bounds");j>this.length&&(j=this.length),L.length-P<j-U&&(j=L.length-P+U);const re=j-U;return this===L&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(P,U,j):Uint8Array.prototype.set.call(L,this.subarray(U,j),P),re},a.prototype.fill=function(L,P,U,j){if(typeof L=="string"){if(typeof P=="string"?(j=P,P=0,U=this.length):typeof U=="string"&&(j=U,U=this.length),j!==void 0&&typeof j!="string")throw new TypeError("encoding must be a string");if(typeof j=="string"&&!a.isEncoding(j))throw new TypeError("Unknown encoding: "+j);if(L.length===1){const se=L.charCodeAt(0);(j==="utf8"&&se<128||j==="latin1")&&(L=se)}}else typeof L=="number"?L=L&255:typeof L=="boolean"&&(L=Number(L));if(P<0||this.length<P||this.length<U)throw new RangeError("Out of range index");if(U<=P)return this;P=P>>>0,U=U===void 0?this.length:U>>>0,L||(L=0);let re;if(typeof L=="number")for(re=P;re<U;++re)this[re]=L;else{const se=a.isBuffer(L)?L:a.from(L,j),Ve=se.length;if(Ve===0)throw new TypeError('The value "'+L+'" is invalid for argument "value"');for(re=0;re<U-P;++re)this[re+P]=se[re%Ve]}return this};const Se={};function we(k,L,P){Se[k]=class extends P{constructor(){super(),Object.defineProperty(this,"message",{value:L.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${k}]`,this.stack,delete this.name}get code(){return k}set code(j){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:j,writable:!0})}toString(){return`${this.name} [${k}]: ${this.message}`}}}we("ERR_BUFFER_OUT_OF_BOUNDS",function(k){return k?`${k} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),we("ERR_INVALID_ARG_TYPE",function(k,L){return`The "${k}" argument must be of type number. Received type ${typeof L}`},TypeError),we("ERR_OUT_OF_RANGE",function(k,L,P){let U=`The value of "${k}" is out of range.`,j=P;return Number.isInteger(P)&&Math.abs(P)>2**32?j=de(String(P)):typeof P=="bigint"&&(j=String(P),(P>BigInt(2)**BigInt(32)||P<-(BigInt(2)**BigInt(32)))&&(j=de(j)),j+="n"),U+=` It must be ${L}. Received ${j}`,U},RangeError);function de(k){let L="",P=k.length;const U=k[0]==="-"?1:0;for(;P>=U+4;P-=3)L=`_${k.slice(P-3,P)}${L}`;return`${k.slice(0,P)}${L}`}function ye(k,L,P){pe(L,"offset"),(k[L]===void 0||k[L+P]===void 0)&&Me(L,k.length-(P+1))}function ue(k,L,P,U,j,re){if(k>P||k<L){const se=typeof L=="bigint"?"n":"";let Ve;throw re>3?L===0||L===BigInt(0)?Ve=`>= 0${se} and < 2${se} ** ${(re+1)*8}${se}`:Ve=`>= -(2${se} ** ${(re+1)*8-1}${se}) and < 2 ** ${(re+1)*8-1}${se}`:Ve=`>= ${L}${se} and <= ${P}${se}`,new Se.ERR_OUT_OF_RANGE("value",Ve,k)}ye(U,j,re)}function pe(k,L){if(typeof k!="number")throw new Se.ERR_INVALID_ARG_TYPE(L,"number",k)}function Me(k,L,P){throw Math.floor(k)!==k?(pe(k,P),new Se.ERR_OUT_OF_RANGE(P||"offset","an integer",k)):L<0?new Se.ERR_BUFFER_OUT_OF_BOUNDS:new Se.ERR_OUT_OF_RANGE(P||"offset",`>= ${P?1:0} and <= ${L}`,k)}const Oe=/[^+/0-9A-Za-z-_]/g;function Le(k){if(k=k.split("=")[0],k=k.trim().replace(Oe,""),k.length<2)return"";for(;k.length%4!==0;)k=k+"=";return k}function ze(k,L){L=L||1/0;let P;const U=k.length;let j=null;const re=[];for(let se=0;se<U;++se){if(P=k.charCodeAt(se),P>55295&&P<57344){if(!j){if(P>56319){(L-=3)>-1&&re.push(239,191,189);continue}else if(se+1===U){(L-=3)>-1&&re.push(239,191,189);continue}j=P;continue}if(P<56320){(L-=3)>-1&&re.push(239,191,189),j=P;continue}P=(j-55296<<10|P-56320)+65536}else j&&(L-=3)>-1&&re.push(239,191,189);if(j=null,P<128){if((L-=1)<0)break;re.push(P)}else if(P<2048){if((L-=2)<0)break;re.push(P>>6|192,P&63|128)}else if(P<65536){if((L-=3)<0)break;re.push(P>>12|224,P>>6&63|128,P&63|128)}else if(P<1114112){if((L-=4)<0)break;re.push(P>>18|240,P>>12&63|128,P>>6&63|128,P&63|128)}else throw new Error("Invalid code point")}return re}function Fe(k){const L=[];for(let P=0;P<k.length;++P)L.push(k.charCodeAt(P)&255);return L}function qe(k,L){let P,U,j;const re=[];for(let se=0;se<k.length&&!((L-=2)<0);++se)P=k.charCodeAt(se),U=P>>8,j=P%256,re.push(j),re.push(U);return re}function pt(k){return e.toByteArray(Le(k))}function ct(k,L,P,U){let j;for(j=0;j<U&&!(j+P>=L.length||j>=k.length);++j)L[j+P]=k[j];return j}function Y(k,L){return k instanceof L||k!=null&&k.constructor!=null&&k.constructor.name!=null&&k.constructor.name===L.name}function W(k){return k!==k}const me=function(){const k="0123456789abcdef",L=new Array(256);for(let P=0;P<16;++P){const U=P*16;for(let j=0;j<16;++j)L[U+j]=k[P]+k[j]}return L}();function Ne(k){return typeof BigInt>"u"?We:k}function We(){throw new Error("BigInt not supported")}})(pm);var bp={},CX={get exports(){return bp},set exports(r){bp=r}};(function(r,e){(function(t,n){n()})(_a,function(){function t(f,h){return typeof h>"u"?h={autoBom:!1}:typeof h!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),h={autoBom:!h}),h.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(f.type)?new Blob(["\uFEFF",f],{type:f.type}):f}function n(f,h,p){var g=new XMLHttpRequest;g.open("GET",f),g.responseType="blob",g.onload=function(){u(g.response,h,p)},g.onerror=function(){console.error("could not download file")},g.send()}function i(f){var h=new XMLHttpRequest;h.open("HEAD",f,!1);try{h.send()}catch{}return 200<=h.status&&299>=h.status}function s(f){try{f.dispatchEvent(new MouseEvent("click"))}catch{var h=document.createEvent("MouseEvents");h.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),f.dispatchEvent(h)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof _a=="object"&&_a.global===_a?_a:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),u=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(f,h,p){var g=o.URL||o.webkitURL,b=document.createElement("a");h=h||f.name||"download",b.download=h,b.rel="noopener",typeof f=="string"?(b.href=f,b.origin===location.origin?s(b):i(b.href)?n(f,h,p):s(b,b.target="_blank")):(b.href=g.createObjectURL(f),setTimeout(function(){g.revokeObjectURL(b.href)},4e4),setTimeout(function(){s(b)},0))}:"msSaveOrOpenBlob"in navigator?function(f,h,p){if(h=h||f.name||"download",typeof f!="string")navigator.msSaveOrOpenBlob(t(f,p),h);else if(i(f))n(f,h,p);else{var g=document.createElement("a");g.href=f,g.target="_blank",setTimeout(function(){s(g)})}}:function(f,h,p,g){if(g=g||open("","_blank"),g&&(g.document.title=g.document.body.innerText="downloading..."),typeof f=="string")return n(f,h,p);var b=f.type==="application/octet-stream",C=/constructor/i.test(o.HTMLElement)||o.safari,y=/CriOS\/[\d]+/.test(navigator.userAgent);if((y||b&&C||a)&&typeof FileReader<"u"){var w=new FileReader;w.onloadend=function(){var E=w.result;E=y?E:E.replace(/^data:[^;]*;/,"data:attachment/file;"),g?g.location.href=E:location=E,g=null},w.readAsDataURL(f)}else{var A=o.URL||o.webkitURL,O=A.createObjectURL(f);g?g.location=O:location.href=O,g=null,setTimeout(function(){A.revokeObjectURL(O)},4e4)}});o.saveAs=u.saveAs=u,r.exports=u})})(CX);const PX={utf16le:"utf-16le",ucs2:"utf-16le",utf16be:"utf-16be"};class Kn{constructor(e){this.buffer=e,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.pos=0,this.length=this.buffer.length}readString(e,t="ascii"){t=PX[t]||t;let n=this.readBuffer(e);try{return new TextDecoder(t).decode(n)}catch{return n}}readBuffer(e){return this.buffer.slice(this.pos,this.pos+=e)}readUInt24BE(){return(this.readUInt16BE()<<8)+this.readUInt8()}readUInt24LE(){return this.readUInt16LE()+(this.readUInt8()<<16)}readInt24BE(){return(this.readInt16BE()<<8)+this.readUInt8()}readInt24LE(){return this.readUInt16LE()+(this.readInt8()<<16)}}Kn.TYPES={UInt8:1,UInt16:2,UInt24:3,UInt32:4,Int8:1,Int16:2,Int24:3,Int32:4,Float:4,Double:8};for(let r of Object.getOwnPropertyNames(DataView.prototype))if(r.slice(0,3)==="get"){let e=r.slice(3).replace("Ui","UI");e==="Float32"?e="Float":e==="Float64"&&(e="Double");let t=Kn.TYPES[e];Kn.prototype["read"+e+(t===1?"":"BE")]=function(){const n=this.view[r](this.pos,!1);return this.pos+=t,n},t!==1&&(Kn.prototype["read"+e+"LE"]=function(){const n=this.view[r](this.pos,!0);return this.pos+=t,n})}const MX=new TextEncoder,Nb=new Uint8Array(new Uint16Array([4660]).buffer)[0]==18;class I0{constructor(e){this.buffer=e,this.view=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),this.pos=0}writeBuffer(e){this.buffer.set(e,this.pos),this.pos+=e.length}writeString(e,t="ascii"){let n;switch(t){case"utf16le":case"utf16-le":case"ucs2":n=kb(e,Nb);break;case"utf16be":case"utf16-be":n=kb(e,!Nb);break;case"utf8":n=MX.encode(e);break;case"ascii":n=EX(e);break;default:throw new Error(`Unsupported encoding: ${t}`)}this.writeBuffer(n)}writeUInt24BE(e){this.buffer[this.pos++]=e>>>16&255,this.buffer[this.pos++]=e>>>8&255,this.buffer[this.pos++]=e&255}writeUInt24LE(e){this.buffer[this.pos++]=e&255,this.buffer[this.pos++]=e>>>8&255,this.buffer[this.pos++]=e>>>16&255}writeInt24BE(e){e>=0?this.writeUInt24BE(e):this.writeUInt24BE(e+16777215+1)}writeInt24LE(e){e>=0?this.writeUInt24LE(e):this.writeUInt24LE(e+16777215+1)}fill(e,t){if(t<this.buffer.length)this.buffer.fill(e,this.pos,this.pos+t),this.pos+=t;else{const n=new Uint8Array(t);n.fill(e),this.writeBuffer(n)}}}function kb(r,e){let t=new Uint16Array(r.length);for(let n=0;n<r.length;n++){let i=r.charCodeAt(n);e&&(i=i>>8|(i&255)<<8),t[n]=i}return new Uint8Array(t.buffer)}function EX(r){let e=new Uint8Array(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}for(let r of Object.getOwnPropertyNames(DataView.prototype))if(r.slice(0,3)==="set"){let e=r.slice(3).replace("Ui","UI");e==="Float32"?e="Float":e==="Float64"&&(e="Double");let t=Kn.TYPES[e];I0.prototype["write"+e+(t===1?"":"BE")]=function(n){this.view[r](this.pos,n,!1),this.pos+=t},t!==1&&(I0.prototype["write"+e+"LE"]=function(n){this.view[r](this.pos,n,!0),this.pos+=t})}class ts{fromBuffer(e){let t=new Kn(e);return this.decode(t)}toBuffer(e){let t=this.size(e),n=new Uint8Array(t),i=new I0(n);return this.encode(i,e),n}}class Xt extends ts{constructor(e,t="BE"){super(),this.type=e,this.endian=t,this.fn=this.type,this.type[this.type.length-1]!=="8"&&(this.fn+=this.endian)}size(){return Kn.TYPES[this.type]}decode(e){return e[`read${this.fn}`]()}encode(e,t){return e[`write${this.fn}`](t)}}const Je=new Xt("UInt8"),AX=new Xt("UInt16","BE"),R=AX;new Xt("UInt16","LE");const TX=new Xt("UInt24","BE"),Us=TX;new Xt("UInt24","LE");const IX=new Xt("UInt32","BE"),fe=IX;new Xt("UInt32","LE");const Bn=new Xt("Int8"),LX=new Xt("Int16","BE"),Ge=LX;new Xt("Int16","LE");new Xt("Int24","BE");new Xt("Int24","LE");const DX=new Xt("Int32","BE"),po=DX;new Xt("Int32","LE");new Xt("Float","BE");new Xt("Float","LE");new Xt("Double","BE");new Xt("Double","LE");class Fo extends Xt{constructor(e,t,n=e>>1){super(`Int${e}`,t),this._point=1<<n}decode(e){return super.decode(e)/this._point}encode(e,t){return super.encode(e,t*this._point|0)}}const OX=new Fo(16,"BE"),RX=OX;new Fo(16,"LE");const BX=new Fo(32,"BE"),Pn=BX;new Fo(32,"LE");function Ei(r,e,t){let n;if(typeof r=="number"?n=r:typeof r=="function"?n=r.call(t,t):t&&typeof r=="string"?n=t[r]:e&&r instanceof Xt&&(n=r.decode(e)),isNaN(n))throw new Error("Not a fixed size");return n}class gm{constructor(e={}){this.enumerable=!0,this.configurable=!0;for(let t in e){const n=e[t];this[t]=n}}}class le extends ts{constructor(e,t,n="count"){super(),this.type=e,this.length=t,this.lengthType=n}decode(e,t){let n;const{pos:i}=e,s=[];let o=t;if(this.length!=null&&(n=Ei(this.length,e,t)),this.length instanceof Xt&&(Object.defineProperties(s,{parent:{value:t},_startOffset:{value:i},_currentOffset:{value:0,writable:!0},_length:{value:n}}),o=s),n==null||this.lengthType==="bytes"){const a=n!=null?e.pos+n:t!=null&&t._length?t._startOffset+t._length:e.length;for(;e.pos<a;)s.push(this.type.decode(e,o))}else for(let a=0,u=n;a<u;a++)s.push(this.type.decode(e,o));return s}size(e,t,n=!0){if(!e)return this.type.size(null,t)*Ei(this.length,null,t);let i=0;this.length instanceof Xt&&(i+=this.length.size(),t={parent:t,pointerSize:0});for(let s of e)i+=this.type.size(s,t);return t&&n&&this.length instanceof Xt&&(i+=t.pointerSize),i}encode(e,t,n){let i=n;this.length instanceof Xt&&(i={pointers:[],startOffset:e.pos,parent:n},i.pointerOffset=e.pos+this.size(t,i,!1),this.length.encode(e,t.length));for(let s of t)this.type.encode(e,s,i);if(this.length instanceof Xt){let s=0;for(;s<i.pointers.length;){const o=i.pointers[s++];o.type.encode(e,o.val,o.parent)}}}}class en extends le{decode(e,t){const{pos:n}=e,i=Ei(this.length,e,t);this.length instanceof Xt&&(t={parent:t,_startOffset:n,_currentOffset:0,_length:i});const s=new Sd(this.type,i,e,t);return e.pos+=i*this.type.size(null,t),s}size(e,t){return e instanceof Sd&&(e=e.toArray()),super.size(e,t)}encode(e,t,n){return t instanceof Sd&&(t=t.toArray()),super.encode(e,t,n)}}class Sd{constructor(e,t,n,i){this.type=e,this.length=t,this.stream=n,this.ctx=i,this.base=this.stream.pos,this.items=[]}get(e){if(!(e<0||e>=this.length)){if(this.items[e]==null){const{pos:t}=this.stream;this.stream.pos=this.base+this.type.size(null,this.ctx)*e,this.items[e]=this.type.decode(this.stream,this.ctx),this.stream.pos=t}return this.items[e]}}toArray(){const e=[];for(let t=0,n=this.length;t<n;t++)e.push(this.get(t));return e}}class ri extends ts{constructor(e,t=[]){super(),this.type=e,this.flags=t}decode(e){const t=this.type.decode(e),n={};for(let i=0;i<this.flags.length;i++){const s=this.flags[i];s!=null&&(n[s]=!!(t&1<<i))}return n}size(){return this.type.size()}encode(e,t){let n=0;for(let i=0;i<this.flags.length;i++){const s=this.flags[i];s!=null&&t[s]&&(n|=1<<i)}return this.type.encode(e,n)}}class _i extends ts{constructor(e){super(),this.length=e}decode(e,t){const n=Ei(this.length,e,t);return e.readBuffer(n)}size(e,t){if(!e)return Ei(this.length,null,t);let n=e.length;return this.length instanceof Xt&&(n+=this.length.size()),n}encode(e,t,n){return this.length instanceof Xt&&this.length.encode(e,t.length),e.writeBuffer(t)}}class L0 extends ts{constructor(e,t=!0){super(),this.type=e,this.condition=t}decode(e,t){let{condition:n}=this;if(typeof n=="function"&&(n=n.call(t,t)),n)return this.type.decode(e,t)}size(e,t){let{condition:n}=this;return typeof n=="function"&&(n=n.call(t,t)),n?this.type.size(e,t):0}encode(e,t,n){let{condition:i}=this;if(typeof i=="function"&&(i=i.call(n,n)),i)return this.type.encode(e,t,n)}}class pn extends ts{constructor(e,t=1){super(),this.type=e,this.count=t}decode(e,t){e.pos+=this.size(null,t)}size(e,t){const n=Ei(this.count,null,t);return this.type.size()*n}encode(e,t,n){return e.fill(0,this.size(t,n))}}class jt extends ts{constructor(e,t="ascii"){super(),this.length=e,this.encoding=t}decode(e,t){let n,i;if(this.length!=null)n=Ei(this.length,e,t);else{let a;for({buffer:a,length:n,pos:i}=e;i<n&&a[i]!==0;)++i;n=i-e.pos}let{encoding:s}=this;typeof s=="function"&&(s=s.call(t,t)||"ascii");const o=e.readString(n,s);return this.length==null&&e.pos<e.length&&e.pos++,o}size(e,t){if(!e)return Ei(this.length,null,t);let{encoding:n}=this;typeof n=="function"&&(n=n.call(t!=null?t.val:void 0,t!=null?t.val:void 0)||"ascii"),n==="utf16be"&&(n="utf16le");let i=Ub(e,n);return this.length instanceof Xt&&(i+=this.length.size()),this.length==null&&i++,i}encode(e,t,n){let{encoding:i}=this;if(typeof i=="function"&&(i=i.call(n!=null?n.val:void 0,n!=null?n.val:void 0)||"ascii"),this.length instanceof Xt&&this.length.encode(e,Ub(t,i)),e.writeString(t,i),this.length==null)return e.writeUInt8(0)}}function Ub(r,e){switch(e){case"ascii":return r.length;case"utf8":let t=0;for(let n=0;n<r.length;n++){let i=r.charCodeAt(n);if(i>=55296&&i<=56319&&n<r.length-1){let s=r.charCodeAt(++n);(s&64512)===56320?i=((i&1023)<<10)+(s&1023)+65536:n--}i&4294967168?i&4294965248?i&4294901760?i&4292870144||(t+=4):t+=3:t+=2:t++}return t;case"utf16le":case"utf16-le":case"utf16be":case"utf16-be":case"ucs2":return r.length*2;default:throw new Error("Unknown encoding "+e)}}class Pe extends ts{constructor(e={}){super(),this.fields=e}decode(e,t,n=0){const i=this._setup(e,t,n);return this._parseFields(e,i,this.fields),this.process!=null&&this.process.call(i,e),i}_setup(e,t,n){const i={};return Object.defineProperties(i,{parent:{value:t},_startOffset:{value:e.pos},_currentOffset:{value:0,writable:!0},_length:{value:n}}),i}_parseFields(e,t,n){for(let s in n){var i;const o=n[s];typeof o=="function"?i=o.call(t,t):i=o.decode(e,t),i!==void 0&&(i instanceof gm?Object.defineProperty(t,s,i):t[s]=i),t._currentOffset=e.pos-t._startOffset}}size(e,t,n=!0){e==null&&(e={});const i={parent:t,val:e,pointerSize:0};this.preEncode!=null&&this.preEncode.call(e);let s=0;for(let o in this.fields){const a=this.fields[o];a.size!=null&&(s+=a.size(e[o],i))}return n&&(s+=i.pointerSize),s}encode(e,t,n){let i;this.preEncode!=null&&this.preEncode.call(t,e);const s={pointers:[],startOffset:e.pos,parent:n,val:t,pointerSize:0};s.pointerOffset=e.pos+this.size(t,s,!1);for(let a in this.fields)i=this.fields[a],i.encode!=null&&i.encode(e,t[a],s);let o=0;for(;o<s.pointers.length;){const a=s.pointers[o++];a.type.encode(e,a.val,a.parent)}}}const FX=(r,e)=>e.reduce((t,n)=>t&&t[n],r);class Dt extends Pe{constructor(e,t={}){super(),this.type=e,this.versions=t,typeof e=="string"&&(this.versionPath=e.split("."))}decode(e,t,n=0){const i=this._setup(e,t,n);typeof this.type=="string"?i.version=FX(t,this.versionPath):i.version=this.type.decode(e),this.versions.header&&this._parseFields(e,i,this.versions.header);const s=this.versions[i.version];if(s==null)throw new Error(`Unknown version ${i.version}`);return s instanceof Dt?s.decode(e,t):(this._parseFields(e,i,s),this.process!=null&&this.process.call(i,e),i)}size(e,t,n=!0){let i,s;if(!e)throw new Error("Not a fixed size");this.preEncode!=null&&this.preEncode.call(e);const o={parent:t,val:e,pointerSize:0};let a=0;if(typeof this.type!="string"&&(a+=this.type.size(e.version,o)),this.versions.header)for(i in this.versions.header)s=this.versions.header[i],s.size!=null&&(a+=s.size(e[i],o));const u=this.versions[e.version];if(u==null)throw new Error(`Unknown version ${e.version}`);for(i in u)s=u[i],s.size!=null&&(a+=s.size(e[i],o));return n&&(a+=o.pointerSize),a}encode(e,t,n){let i,s;this.preEncode!=null&&this.preEncode.call(t,e);const o={pointers:[],startOffset:e.pos,parent:n,val:t,pointerSize:0};if(o.pointerOffset=e.pos+this.size(t,o,!1),typeof this.type!="string"&&this.type.encode(e,t.version),this.versions.header)for(i in this.versions.header)s=this.versions.header[i],s.encode!=null&&s.encode(e,t[i],o);const a=this.versions[t.version];for(i in a)s=a[i],s.encode!=null&&s.encode(e,t[i],o);let u=0;for(;u<o.pointers.length;){const f=o.pointers[u++];f.type.encode(e,f.val,f.parent)}}}class ce extends ts{constructor(e,t,n={}){if(super(),this.offsetType=e,this.type=t,this.options=n,this.type==="void"&&(this.type=null),this.options.type==null&&(this.options.type="local"),this.options.allowNull==null&&(this.options.allowNull=!0),this.options.nullValue==null&&(this.options.nullValue=0),this.options.lazy==null&&(this.options.lazy=!1),this.options.relativeTo){if(typeof this.options.relativeTo!="function")throw new Error("relativeTo option must be a function");this.relativeToGetter=n.relativeTo}}decode(e,t){const n=this.offsetType.decode(e,t);if(n===this.options.nullValue&&this.options.allowNull)return null;let i;switch(this.options.type){case"local":i=t._startOffset;break;case"immediate":i=e.pos-this.offsetType.size();break;case"parent":i=t.parent._startOffset;break;default:for(var s=t;s.parent;)s=s.parent;i=s._startOffset||0}this.options.relativeTo&&(i+=this.relativeToGetter(t));const o=n+i;if(this.type!=null){let a=null;const u=()=>{if(a!=null)return a;const{pos:f}=e;return e.pos=o,a=this.type.decode(e,t),e.pos=f,a};return this.options.lazy?new gm({get:u}):u()}else return o}size(e,t){const n=t;switch(this.options.type){case"local":case"immediate":break;case"parent":t=t.parent;break;default:for(;t.parent;)t=t.parent}let{type:i}=this;if(i==null){if(!(e instanceof yp))throw new Error("Must be a VoidPointer");({type:i}=e),e=e.value}if(e&&t){let s=i.size(e,n);t.pointerSize+=s}return this.offsetType.size()}encode(e,t,n){let i;const s=n;if(t==null){this.offsetType.encode(e,this.options.nullValue);return}switch(this.options.type){case"local":i=n.startOffset;break;case"immediate":i=e.pos+this.offsetType.size(t,s);break;case"parent":n=n.parent,i=n.startOffset;break;default:for(i=0;n.parent;)n=n.parent}this.options.relativeTo&&(i+=this.relativeToGetter(s.val)),this.offsetType.encode(e,n.pointerOffset-i);let{type:o}=this;if(o==null){if(!(t instanceof yp))throw new Error("Must be a VoidPointer");({type:o}=t),t=t.value}return n.pointers.push({type:o,val:t,parent:s}),n.pointerOffset+=o.size(t,s)}}class yp{constructor(e,t){this.type=e,this.value=t}}function Sr(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Qn(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s}var Vb=function r(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,i,s;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(!r(e[i],t[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,s[i]))return!1;for(i=n;i--!==0;){var o=s[i];if(!r(e[o],t[o]))return!1}return!0}return e!==e&&t!==t},vm=0,M_=-3;function wc(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function NX(r,e){this.source=r,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=e,this.destLen=0,this.ltree=new wc,this.dtree=new wc}var E_=new wc,A_=new wc,xm=new Uint8Array(30),bm=new Uint16Array(30),T_=new Uint8Array(30),I_=new Uint16Array(30),kX=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),zb=new wc,li=new Uint8Array(288+32);function L_(r,e,t,n){var i,s;for(i=0;i<t;++i)r[i]=0;for(i=0;i<30-t;++i)r[i+t]=i/t|0;for(s=n,i=0;i<30;++i)e[i]=s,s+=1<<r[i]}function UX(r,e){var t;for(t=0;t<7;++t)r.table[t]=0;for(r.table[7]=24,r.table[8]=152,r.table[9]=112,t=0;t<24;++t)r.trans[t]=256+t;for(t=0;t<144;++t)r.trans[24+t]=t;for(t=0;t<8;++t)r.trans[24+144+t]=280+t;for(t=0;t<112;++t)r.trans[24+144+8+t]=144+t;for(t=0;t<5;++t)e.table[t]=0;for(e.table[5]=32,t=0;t<32;++t)e.trans[t]=t}var Gb=new Uint16Array(16);function Cd(r,e,t,n){var i,s;for(i=0;i<16;++i)r.table[i]=0;for(i=0;i<n;++i)r.table[e[t+i]]++;for(r.table[0]=0,s=0,i=0;i<16;++i)Gb[i]=s,s+=r.table[i];for(i=0;i<n;++i)e[t+i]&&(r.trans[Gb[e[t+i]]++]=i)}function VX(r){r.bitcount--||(r.tag=r.source[r.sourceIndex++],r.bitcount=7);var e=r.tag&1;return r.tag>>>=1,e}function hi(r,e,t){if(!e)return t;for(;r.bitcount<24;)r.tag|=r.source[r.sourceIndex++]<<r.bitcount,r.bitcount+=8;var n=r.tag&65535>>>16-e;return r.tag>>>=e,r.bitcount-=e,n+t}function wp(r,e){for(;r.bitcount<24;)r.tag|=r.source[r.sourceIndex++]<<r.bitcount,r.bitcount+=8;var t=0,n=0,i=0,s=r.tag;do n=2*n+(s&1),s>>>=1,++i,t+=e.table[i],n-=e.table[i];while(n>=0);return r.tag=s,r.bitcount-=i,e.trans[t+n]}function zX(r,e,t){var n,i,s,o,a,u;for(n=hi(r,5,257),i=hi(r,5,1),s=hi(r,4,4),o=0;o<19;++o)li[o]=0;for(o=0;o<s;++o){var f=hi(r,3,0);li[kX[o]]=f}for(Cd(zb,li,0,19),a=0;a<n+i;){var h=wp(r,zb);switch(h){case 16:var p=li[a-1];for(u=hi(r,2,3);u;--u)li[a++]=p;break;case 17:for(u=hi(r,3,3);u;--u)li[a++]=0;break;case 18:for(u=hi(r,7,11);u;--u)li[a++]=0;break;default:li[a++]=h;break}}Cd(e,li,0,n),Cd(t,li,n,i)}function $b(r,e,t){for(;;){var n=wp(r,e);if(n===256)return vm;if(n<256)r.dest[r.destLen++]=n;else{var i,s,o,a;for(n-=257,i=hi(r,xm[n],bm[n]),s=wp(r,t),o=r.destLen-hi(r,T_[s],I_[s]),a=o;a<o+i;++a)r.dest[r.destLen++]=r.dest[a]}}}function GX(r){for(var e,t,n;r.bitcount>8;)r.sourceIndex--,r.bitcount-=8;if(e=r.source[r.sourceIndex+1],e=256*e+r.source[r.sourceIndex],t=r.source[r.sourceIndex+3],t=256*t+r.source[r.sourceIndex+2],e!==(~t&65535))return M_;for(r.sourceIndex+=4,n=e;n;--n)r.dest[r.destLen++]=r.source[r.sourceIndex++];return r.bitcount=0,vm}function $X(r,e){var t=new NX(r,e),n,i,s;do{switch(n=VX(t),i=hi(t,2,0),i){case 0:s=GX(t);break;case 1:s=$b(t,E_,A_);break;case 2:zX(t,t.ltree,t.dtree),s=$b(t,t.ltree,t.dtree);break;default:s=M_}if(s!==vm)throw new Error("Data error")}while(!n);return t.destLen<t.dest.length?typeof t.dest.slice=="function"?t.dest.slice(0,t.destLen):t.dest.subarray(0,t.destLen):t.dest}UX(E_,A_);L_(xm,bm,4,3);L_(T_,I_,2,1);xm[28]=0;bm[28]=258;var D_=$X;const WX=new Uint8Array(new Uint32Array([305419896]).buffer)[0]===18,Wb=(r,e,t)=>{let n=r[e];r[e]=r[t],r[t]=n},XX=r=>{const e=r.length;for(let t=0;t<e;t+=4)Wb(r,t,t+3),Wb(r,t+1,t+2)},HX=r=>{WX&&XX(r)};var YX={swap32LE:HX};const Xb=D_,{swap32LE:qX}=YX,ym=6+5,_o=5,ZX=ym-_o,jX=65536>>ym,KX=1<<ZX,JX=KX-1,c0=2,QX=1<<_o,Pd=QX-1,O_=65536>>_o,eH=1024>>_o,tH=O_+eH,nH=tH,rH=32,iH=nH+rH,sH=1<<c0;class oH{constructor(e){const t=typeof e.readUInt32BE=="function"&&typeof e.slice=="function";if(t||e instanceof Uint8Array){let n;if(t)this.highStart=e.readUInt32LE(0),this.errorValue=e.readUInt32LE(4),n=e.readUInt32LE(8),e=e.slice(12);else{const i=new DataView(e.buffer);this.highStart=i.getUint32(0,!0),this.errorValue=i.getUint32(4,!0),n=i.getUint32(8,!0),e=e.subarray(12)}e=Xb(e,new Uint8Array(n)),e=Xb(e,new Uint8Array(n)),qX(e),this.data=new Uint32Array(e.buffer)}else({data:this.data,highStart:this.highStart,errorValue:this.errorValue}=e)}get(e){let t;return e<0||e>1114111?this.errorValue:e<55296||e>56319&&e<=65535?(t=(this.data[e>>_o]<<c0)+(e&Pd),this.data[t]):e<=65535?(t=(this.data[O_+(e-55296>>_o)]<<c0)+(e&Pd),this.data[t]):e<this.highStart?(t=this.data[iH-jX+(e>>ym)],t=this.data[t+(e>>_o&JX)],t=(t<<c0)+(e&Pd),this.data[t]):this.data[this.data.length-sH]}}var gf=oH;function No(r){return r&&r.__esModule?r.default:r}var Hs={};Hs=JSON.parse('{"categories":["Cc","Zs","Po","Sc","Ps","Pe","Sm","Pd","Nd","Lu","Sk","Pc","Ll","So","Lo","Pi","Cf","No","Pf","Lt","Lm","Mn","Me","Mc","Nl","Zl","Zp","Cs","Co"],"combiningClasses":["Not_Reordered","Above","Above_Right","Below","Attached_Above_Right","Attached_Below","Overlay","Iota_Subscript","Double_Below","Double_Above","Below_Right","Above_Left","CCC10","CCC11","CCC12","CCC13","CCC14","CCC15","CCC16","CCC17","CCC18","CCC19","CCC20","CCC21","CCC22","CCC23","CCC24","CCC25","CCC30","CCC31","CCC32","CCC27","CCC28","CCC29","CCC33","CCC34","CCC35","CCC36","Nukta","Virama","CCC84","CCC91","CCC103","CCC107","CCC118","CCC122","CCC129","CCC130","CCC132","Attached_Above","Below_Left","Left","Kana_Voicing","CCC26","Right"],"scripts":["Common","Latin","Bopomofo","Inherited","Greek","Coptic","Cyrillic","Armenian","Hebrew","Arabic","Syriac","Thaana","Nko","Samaritan","Mandaic","Devanagari","Bengali","Gurmukhi","Gujarati","Oriya","Tamil","Telugu","Kannada","Malayalam","Sinhala","Thai","Lao","Tibetan","Myanmar","Georgian","Hangul","Ethiopic","Cherokee","Canadian_Aboriginal","Ogham","Runic","Tagalog","Hanunoo","Buhid","Tagbanwa","Khmer","Mongolian","Limbu","Tai_Le","New_Tai_Lue","Buginese","Tai_Tham","Balinese","Sundanese","Batak","Lepcha","Ol_Chiki","Braille","Glagolitic","Tifinagh","Han","Hiragana","Katakana","Yi","Lisu","Vai","Bamum","Syloti_Nagri","Phags_Pa","Saurashtra","Kayah_Li","Rejang","Javanese","Cham","Tai_Viet","Meetei_Mayek","null","Linear_B","Lycian","Carian","Old_Italic","Gothic","Old_Permic","Ugaritic","Old_Persian","Deseret","Shavian","Osmanya","Osage","Elbasan","Caucasian_Albanian","Linear_A","Cypriot","Imperial_Aramaic","Palmyrene","Nabataean","Hatran","Phoenician","Lydian","Meroitic_Hieroglyphs","Meroitic_Cursive","Kharoshthi","Old_South_Arabian","Old_North_Arabian","Manichaean","Avestan","Inscriptional_Parthian","Inscriptional_Pahlavi","Psalter_Pahlavi","Old_Turkic","Old_Hungarian","Hanifi_Rohingya","Old_Sogdian","Sogdian","Elymaic","Brahmi","Kaithi","Sora_Sompeng","Chakma","Mahajani","Sharada","Khojki","Multani","Khudawadi","Grantha","Newa","Tirhuta","Siddham","Modi","Takri","Ahom","Dogra","Warang_Citi","Nandinagari","Zanabazar_Square","Soyombo","Pau_Cin_Hau","Bhaiksuki","Marchen","Masaram_Gondi","Gunjala_Gondi","Makasar","Cuneiform","Egyptian_Hieroglyphs","Anatolian_Hieroglyphs","Mro","Bassa_Vah","Pahawh_Hmong","Medefaidrin","Miao","Tangut","Nushu","Duployan","SignWriting","Nyiakeng_Puachue_Hmong","Wancho","Mende_Kikakui","Adlam"],"eaw":["N","Na","A","W","H","F"]}');const wm=new gf(tl.toByteArray("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")),aH=Math.log2||(r=>Math.log(r)/Math.LN2),vf=r=>aH(r)+1|0,lH=vf(No(Hs).categories.length-1),R_=vf(No(Hs).combiningClasses.length-1),_m=vf(No(Hs).scripts.length-1),Sm=vf(No(Hs).eaw.length-1),Cm=10,cH=R_+_m+Sm+Cm,uH=_m+Sm+Cm,fH=Sm+Cm,hH=(1<<lH)-1,dH=(1<<R_)-1,pH=(1<<_m)-1;function xf(r){const e=wm.get(r);return No(Hs).categories[e>>cH&hH]}function mH(r){const e=wm.get(r);return No(Hs).combiningClasses[e>>uH&dH]}function B_(r){const e=wm.get(r);return No(Hs).scripts[e>>fH&pH]}function Hb(r){return xf(r)==="Nd"}function F_(r){const e=xf(r);return e==="Mn"||e==="Me"||e==="Mc"}var Md=1,Ed=0;class gH{constructor(e){this.stateTable=e.stateTable,this.accepting=e.accepting,this.tags=e.tags}match(e){var t=this;return{*[Symbol.iterator](){for(var n=Md,i=null,s=null,o=null,a=0;a<e.length;a++){var u=e[a];o=n,n=t.stateTable[n][u],n===Ed&&(i!=null&&s!=null&&s>=i&&(yield[i,s,t.tags[o]]),n=t.stateTable[Md][u],i=null),n!==Ed&&i==null&&(i=a),t.accepting[n]&&(s=a),n===Ed&&(n=Md)}i!=null&&s!=null&&s>=i&&(yield[i,s,t.tags[n]])}}}apply(e,t){for(var[n,i,s]of this.match(e))for(var o of s)typeof t[o]=="function"&&t[o](n,i,e.slice(n,i+1))}}var N_=gH,tc={},vH={get exports(){return tc},set exports(r){tc=r}};(function(r){var e=function(){function t(g,b){return b!=null&&g instanceof b}var n;try{n=Map}catch{n=function(){}}var i;try{i=Set}catch{i=function(){}}var s;try{s=Promise}catch{s=function(){}}function o(g,b,C,y,w){typeof b=="object"&&(C=b.depth,y=b.prototype,w=b.includeNonEnumerable,b=b.circular);var A=[],O=[],E=typeof Buffer<"u";typeof b>"u"&&(b=!0),typeof C>"u"&&(C=1/0);function T(M,B){if(M===null)return null;if(B===0)return M;var F,I;if(typeof M!="object")return M;if(t(M,n))F=new n;else if(t(M,i))F=new i;else if(t(M,s))F=new s(function(be,oe){M.then(function(Te){be(T(Te,B-1))},function(Te){oe(T(Te,B-1))})});else if(o.__isArray(M))F=[];else if(o.__isRegExp(M))F=new RegExp(M.source,p(M)),M.lastIndex&&(F.lastIndex=M.lastIndex);else if(o.__isDate(M))F=new Date(M.getTime());else{if(E&&Buffer.isBuffer(M))return Buffer.allocUnsafe?F=Buffer.allocUnsafe(M.length):F=new Buffer(M.length),M.copy(F),F;t(M,Error)?F=Object.create(M):typeof y>"u"?(I=Object.getPrototypeOf(M),F=Object.create(I)):(F=Object.create(y),I=y)}if(b){var N=A.indexOf(M);if(N!=-1)return O[N];A.push(M),O.push(F)}t(M,n)&&M.forEach(function(be,oe){var Te=T(oe,B-1),Ie=T(be,B-1);F.set(Te,Ie)}),t(M,i)&&M.forEach(function(be){var oe=T(be,B-1);F.add(oe)});for(var G in M){var X;I&&(X=Object.getOwnPropertyDescriptor(I,G)),!(X&&X.set==null)&&(F[G]=T(M[G],B-1))}if(Object.getOwnPropertySymbols)for(var J=Object.getOwnPropertySymbols(M),G=0;G<J.length;G++){var Z=J[G],H=Object.getOwnPropertyDescriptor(M,Z);H&&!H.enumerable&&!w||(F[Z]=T(M[Z],B-1),H.enumerable||Object.defineProperty(F,Z,{enumerable:!1}))}if(w)for(var ne=Object.getOwnPropertyNames(M),G=0;G<ne.length;G++){var ie=ne[G],H=Object.getOwnPropertyDescriptor(M,ie);H&&H.enumerable||(F[ie]=T(M[ie],B-1),Object.defineProperty(F,ie,{enumerable:!1}))}return F}return T(g,C)}o.clonePrototype=function(b){if(b===null)return null;var C=function(){};return C.prototype=b,new C};function a(g){return Object.prototype.toString.call(g)}o.__objToStr=a;function u(g){return typeof g=="object"&&a(g)==="[object Date]"}o.__isDate=u;function f(g){return typeof g=="object"&&a(g)==="[object Array]"}o.__isArray=f;function h(g){return typeof g=="object"&&a(g)==="[object RegExp]"}o.__isRegExp=h;function p(g){var b="";return g.global&&(b+="g"),g.ignoreCase&&(b+="i"),g.multiline&&(b+="m"),b}return o.__getRegExpFlags=p,o}();r.exports&&(r.exports=e)})(vH);var kl={},D0={};function k_(r){this.buffer=r,this.pos=0}k_.prototype.read=function(r,e,t){this.pos+t>this.buffer.length&&(t=this.buffer.length-this.pos);for(var n=0;n<t;n++)r[e+n]=this.buffer[this.pos+n];return this.pos+=t,t};D0.BrotliInput=k_;function U_(r){this.buffer=r,this.pos=0}U_.prototype.write=function(r,e){if(this.pos+e>this.buffer.length)throw new Error("Output buffer is not large enough");return this.buffer.set(r.subarray(0,e),this.pos),this.pos+=e,e};D0.BrotliOutput=U_;var mo=4096,xH=2*mo+32,V_=2*mo-1,bH=new Uint32Array([0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215]);function ko(r){this.buf_=new Uint8Array(xH),this.input_=r,this.reset()}ko.READ_SIZE=mo;ko.IBUF_MASK=V_;ko.prototype.reset=function(){this.buf_ptr_=0,this.val_=0,this.pos_=0,this.bit_pos_=0,this.bit_end_pos_=0,this.eos_=0,this.readMoreInput();for(var r=0;r<4;r++)this.val_|=this.buf_[this.pos_]<<8*r,++this.pos_;return this.bit_end_pos_>0};ko.prototype.readMoreInput=function(){if(!(this.bit_end_pos_>256))if(this.eos_){if(this.bit_pos_>this.bit_end_pos_)throw new Error("Unexpected end of input "+this.bit_pos_+" "+this.bit_end_pos_)}else{var r=this.buf_ptr_,e=this.input_.read(this.buf_,r,mo);if(e<0)throw new Error("Unexpected end of input");if(e<mo){this.eos_=1;for(var t=0;t<32;t++)this.buf_[r+e+t]=0}if(r===0){for(var t=0;t<32;t++)this.buf_[(mo<<1)+t]=this.buf_[t];this.buf_ptr_=mo}else this.buf_ptr_=0;this.bit_end_pos_+=e<<3}};ko.prototype.fillBitWindow=function(){for(;this.bit_pos_>=8;)this.val_>>>=8,this.val_|=this.buf_[this.pos_&V_]<<24,++this.pos_,this.bit_pos_=this.bit_pos_-8>>>0,this.bit_end_pos_=this.bit_end_pos_-8>>>0};ko.prototype.readBits=function(r){32-this.bit_pos_<r&&this.fillBitWindow();var e=this.val_>>>this.bit_pos_&bH[r];return this.bit_pos_+=r,e};var yH=ko,Ps={},Ad={},Td,Yb;function wH(){return Yb||(Yb=1,Td="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"),Td}var qb;function _H(){if(qb)return Ad;qb=1;var r=tl;return Ad.init=function(){var e=G_().BrotliDecompressBuffer,t=r.toByteArray(wH());return e(t)},Ad}var Zb;function z_(){if(Zb)return Ps;Zb=1;var r=_H();return Ps.init=function(){Ps.dictionary=r.init()},Ps.offsetsByLength=new Uint32Array([0,0,0,0,0,4096,9216,21504,35840,44032,53248,63488,74752,87040,93696,100864,104704,106752,108928,113536,115968,118528,119872,121280,122016]),Ps.sizeBitsByLength=new Uint8Array([0,0,0,0,10,10,11,11,10,10,10,10,10,9,9,8,7,7,8,7,7,6,6,5,5]),Ps.minDictionaryWordLength=4,Ps.maxDictionaryWordLength=24,Ps}var O0={};function Ta(r,e){this.bits=r,this.value=e}O0.HuffmanCode=Ta;var Sa=15;function jb(r,e){for(var t=1<<e-1;r&t;)t>>=1;return(r&t-1)+t}function Kb(r,e,t,n,i){do n-=t,r[e+n]=new Ta(i.bits,i.value);while(n>0)}function SH(r,e,t){for(var n=1<<e-t;e<Sa&&(n-=r[e],!(n<=0));)++e,n<<=1;return e-t}O0.BrotliBuildHuffmanTable=function(r,e,t,n,i){var s=e,o,a,u,f,h,p,g,b,C,y,w,A=new Int32Array(Sa+1),O=new Int32Array(Sa+1);for(w=new Int32Array(i),u=0;u<i;u++)A[n[u]]++;for(O[1]=0,a=1;a<Sa;a++)O[a+1]=O[a]+A[a];for(u=0;u<i;u++)n[u]!==0&&(w[O[n[u]]++]=u);if(b=t,C=1<<b,y=C,O[Sa]===1){for(f=0;f<y;++f)r[e+f]=new Ta(0,w[0]&65535);return y}for(f=0,u=0,a=1,h=2;a<=t;++a,h<<=1)for(;A[a]>0;--A[a])o=new Ta(a&255,w[u++]&65535),Kb(r,e+f,h,C,o),f=jb(f,a);for(g=y-1,p=-1,a=t+1,h=2;a<=Sa;++a,h<<=1)for(;A[a]>0;--A[a])(f&g)!==p&&(e+=C,b=SH(A,a,t),C=1<<b,y+=C,p=f&g,r[s+p]=new Ta(b+t&255,e-s-p&65535)),o=new Ta(a-t&255,w[u++]&65535),Kb(r,e+(f>>t),h,C,o),f=jb(f,a);return y};var Pm={};Pm.lookup=new Uint8Array([0,0,0,0,0,0,0,0,0,4,4,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,12,16,12,12,20,12,16,24,28,12,12,32,12,36,12,44,44,44,44,44,44,44,44,44,44,32,32,24,40,28,12,12,48,52,52,52,48,52,52,52,48,52,52,52,52,52,48,52,52,52,52,52,48,52,52,52,52,52,24,12,28,12,12,12,56,60,60,60,56,60,60,60,56,60,60,60,60,60,56,60,60,60,60,60,56,60,60,60,60,60,24,12,28,12,0,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,0,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,56,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,6,6,6,6,7,7,7,7,8,8,8,8,9,9,9,9,10,10,10,10,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,14,15,15,15,15,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,22,22,22,22,23,23,23,23,24,24,24,24,25,25,25,25,26,26,26,26,27,27,27,27,28,28,28,28,29,29,29,29,30,30,30,30,31,31,31,31,32,32,32,32,33,33,33,33,34,34,34,34,35,35,35,35,36,36,36,36,37,37,37,37,38,38,38,38,39,39,39,39,40,40,40,40,41,41,41,41,42,42,42,42,43,43,43,43,44,44,44,44,45,45,45,45,46,46,46,46,47,47,47,47,48,48,48,48,49,49,49,49,50,50,50,50,51,51,51,51,52,52,52,52,53,53,53,53,54,54,54,54,55,55,55,55,56,56,56,56,57,57,57,57,58,58,58,58,59,59,59,59,60,60,60,60,61,61,61,61,62,62,62,62,63,63,63,63,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);Pm.lookupOffsets=new Uint16Array([1024,1536,1280,1536,0,256,768,512]);var nl={};function rt(r,e){this.offset=r,this.nbits=e}nl.kBlockLengthPrefixCode=[new rt(1,2),new rt(5,2),new rt(9,2),new rt(13,2),new rt(17,3),new rt(25,3),new rt(33,3),new rt(41,3),new rt(49,4),new rt(65,4),new rt(81,4),new rt(97,4),new rt(113,5),new rt(145,5),new rt(177,5),new rt(209,5),new rt(241,6),new rt(305,6),new rt(369,7),new rt(497,8),new rt(753,9),new rt(1265,10),new rt(2289,11),new rt(4337,12),new rt(8433,13),new rt(16625,24)];nl.kInsertLengthPrefixCode=[new rt(0,0),new rt(1,0),new rt(2,0),new rt(3,0),new rt(4,0),new rt(5,0),new rt(6,1),new rt(8,1),new rt(10,2),new rt(14,2),new rt(18,3),new rt(26,3),new rt(34,4),new rt(50,4),new rt(66,5),new rt(98,5),new rt(130,6),new rt(194,7),new rt(322,8),new rt(578,9),new rt(1090,10),new rt(2114,12),new rt(6210,14),new rt(22594,24)];nl.kCopyLengthPrefixCode=[new rt(2,0),new rt(3,0),new rt(4,0),new rt(5,0),new rt(6,0),new rt(7,0),new rt(8,0),new rt(9,0),new rt(10,1),new rt(12,1),new rt(14,2),new rt(18,2),new rt(22,3),new rt(30,3),new rt(38,4),new rt(54,4),new rt(70,5),new rt(102,5),new rt(134,6),new rt(198,7),new rt(326,8),new rt(582,9),new rt(1094,10),new rt(2118,24)];nl.kInsertRangeLut=[0,0,8,8,0,16,8,16,16];nl.kCopyRangeLut=[0,8,0,8,16,0,16,8,16];var Ul={},Jb;function CH(){if(Jb)return Ul;Jb=1;var r=z_(),e=0,t=1,n=2,i=3,s=4,o=5,a=6,u=7,f=8,h=9,p=10,g=11,b=12,C=13,y=14,w=15,A=16,O=17,E=18,T=20;function M(I,N,G){this.prefix=new Uint8Array(I.length),this.transform=N,this.suffix=new Uint8Array(G.length);for(var X=0;X<I.length;X++)this.prefix[X]=I.charCodeAt(X);for(var X=0;X<G.length;X++)this.suffix[X]=G.charCodeAt(X)}var B=[new M("",e,""),new M("",e," "),new M(" ",e," "),new M("",b,""),new M("",p," "),new M("",e," the "),new M(" ",e,""),new M("s ",e," "),new M("",e," of "),new M("",p,""),new M("",e," and "),new M("",C,""),new M("",t,""),new M(", ",e," "),new M("",e,", "),new M(" ",p," "),new M("",e," in "),new M("",e," to "),new M("e ",e," "),new M("",e,'"'),new M("",e,"."),new M("",e,'">'),new M("",e,`
`),new M("",i,""),new M("",e,"]"),new M("",e," for "),new M("",y,""),new M("",n,""),new M("",e," a "),new M("",e," that "),new M(" ",p,""),new M("",e,". "),new M(".",e,""),new M(" ",e,", "),new M("",w,""),new M("",e," with "),new M("",e,"'"),new M("",e," from "),new M("",e," by "),new M("",A,""),new M("",O,""),new M(" the ",e,""),new M("",s,""),new M("",e,". The "),new M("",g,""),new M("",e," on "),new M("",e," as "),new M("",e," is "),new M("",u,""),new M("",t,"ing "),new M("",e,`
	`),new M("",e,":"),new M(" ",e,". "),new M("",e,"ed "),new M("",T,""),new M("",E,""),new M("",a,""),new M("",e,"("),new M("",p,", "),new M("",f,""),new M("",e," at "),new M("",e,"ly "),new M(" the ",e," of "),new M("",o,""),new M("",h,""),new M(" ",p,", "),new M("",p,'"'),new M(".",e,"("),new M("",g," "),new M("",p,'">'),new M("",e,'="'),new M(" ",e,"."),new M(".com/",e,""),new M(" the ",e," of the "),new M("",p,"'"),new M("",e,". This "),new M("",e,","),new M(".",e," "),new M("",p,"("),new M("",p,"."),new M("",e," not "),new M(" ",e,'="'),new M("",e,"er "),new M(" ",g," "),new M("",e,"al "),new M(" ",g,""),new M("",e,"='"),new M("",g,'"'),new M("",p,". "),new M(" ",e,"("),new M("",e,"ful "),new M(" ",p,". "),new M("",e,"ive "),new M("",e,"less "),new M("",g,"'"),new M("",e,"est "),new M(" ",p,"."),new M("",g,'">'),new M(" ",e,"='"),new M("",p,","),new M("",e,"ize "),new M("",g,"."),new M("Â ",e,""),new M(" ",e,","),new M("",p,'="'),new M("",g,'="'),new M("",e,"ous "),new M("",g,", "),new M("",p,"='"),new M(" ",p,","),new M(" ",g,'="'),new M(" ",g,", "),new M("",g,","),new M("",g,"("),new M("",g,". "),new M(" ",g,"."),new M("",g,"='"),new M(" ",g,". "),new M(" ",p,'="'),new M(" ",g,"='"),new M(" ",p,"='")];Ul.kTransforms=B,Ul.kNumTransforms=B.length;function F(I,N){return I[N]<192?(I[N]>=97&&I[N]<=122&&(I[N]^=32),1):I[N]<224?(I[N+1]^=32,2):(I[N+2]^=5,3)}return Ul.transformDictionaryWord=function(I,N,G,X,J){var Z=B[J].prefix,H=B[J].suffix,ne=B[J].transform,ie=ne<b?0:ne-(b-1),be=0,oe=N,Te;ie>X&&(ie=X);for(var Ie=0;Ie<Z.length;)I[N++]=Z[Ie++];for(G+=ie,X-=ie,ne<=h&&(X-=ne),be=0;be<X;be++)I[N++]=r.dictionary[G+be];if(Te=N-X,ne===p)F(I,Te);else if(ne===g)for(;X>0;){var ve=F(I,Te);Te+=ve,X-=ve}for(var he=0;he<H.length;)I[N++]=H[he++];return N-oe},Ul}var Qb;function G_(){if(Qb)return kl;Qb=1;var r=D0.BrotliInput,e=D0.BrotliOutput,t=yH,n=z_(),i=O0.HuffmanCode,s=O0.BrotliBuildHuffmanTable,o=Pm,a=nl,u=CH(),f=8,h=16,p=256,g=704,b=26,C=6,y=2,w=8,A=255,O=1080,E=18,T=new Uint8Array([1,2,3,4,0,5,17,6,16,7,8,9,10,11,12,13,14,15]),M=16,B=new Uint8Array([3,2,1,0,3,3,3,3,3,3,2,2,2,2,2,2]),F=new Int8Array([0,0,0,0,-1,1,-2,2,-3,3,-1,1,-2,2,-3,3]),I=new Uint16Array([256,402,436,468,500,534,566,598,630,662,694,726,758,790,822,854,886,920,952,984,1016,1048,1080]);function N(Se){var we;return Se.readBits(1)===0?16:(we=Se.readBits(3),we>0?17+we:(we=Se.readBits(3),we>0?8+we:17))}function G(Se){if(Se.readBits(1)){var we=Se.readBits(3);return we===0?1:Se.readBits(we)+(1<<we)}return 0}function X(){this.meta_block_length=0,this.input_end=0,this.is_uncompressed=0,this.is_metadata=!1}function J(Se){var we=new X,de,ye,ue;if(we.input_end=Se.readBits(1),we.input_end&&Se.readBits(1))return we;if(de=Se.readBits(2)+4,de===7){if(we.is_metadata=!0,Se.readBits(1)!==0)throw new Error("Invalid reserved bit");if(ye=Se.readBits(2),ye===0)return we;for(ue=0;ue<ye;ue++){var pe=Se.readBits(8);if(ue+1===ye&&ye>1&&pe===0)throw new Error("Invalid size byte");we.meta_block_length|=pe<<ue*8}}else for(ue=0;ue<de;++ue){var Me=Se.readBits(4);if(ue+1===de&&de>4&&Me===0)throw new Error("Invalid size nibble");we.meta_block_length|=Me<<ue*4}return++we.meta_block_length,!we.input_end&&!we.is_metadata&&(we.is_uncompressed=Se.readBits(1)),we}function Z(Se,we,de){var ye;return de.fillBitWindow(),we+=de.val_>>>de.bit_pos_&A,ye=Se[we].bits-w,ye>0&&(de.bit_pos_+=w,we+=Se[we].value,we+=de.val_>>>de.bit_pos_&(1<<ye)-1),de.bit_pos_+=Se[we].bits,Se[we].value}function H(Se,we,de,ye){for(var ue=0,pe=f,Me=0,Oe=0,Le=32768,ze=[],Fe=0;Fe<32;Fe++)ze.push(new i(0,0));for(s(ze,0,5,Se,E);ue<we&&Le>0;){var qe=0,pt;if(ye.readMoreInput(),ye.fillBitWindow(),qe+=ye.val_>>>ye.bit_pos_&31,ye.bit_pos_+=ze[qe].bits,pt=ze[qe].value&255,pt<h)Me=0,de[ue++]=pt,pt!==0&&(pe=pt,Le-=32768>>pt);else{var ct=pt-14,Y,W,me=0;if(pt===h&&(me=pe),Oe!==me&&(Me=0,Oe=me),Y=Me,Me>0&&(Me-=2,Me<<=ct),Me+=ye.readBits(ct)+3,W=Me-Y,ue+W>we)throw new Error("[ReadHuffmanCodeLengths] symbol + repeat_delta > num_symbols");for(var Ne=0;Ne<W;Ne++)de[ue+Ne]=Oe;ue+=W,Oe!==0&&(Le-=W<<15-Oe)}}if(Le!==0)throw new Error("[ReadHuffmanCodeLengths] space = "+Le);for(;ue<we;ue++)de[ue]=0}function ne(Se,we,de,ye){var ue=0,pe,Me=new Uint8Array(Se);if(ye.readMoreInput(),pe=ye.readBits(2),pe===1){for(var Oe,Le=Se-1,ze=0,Fe=new Int32Array(4),qe=ye.readBits(2)+1;Le;)Le>>=1,++ze;for(Oe=0;Oe<qe;++Oe)Fe[Oe]=ye.readBits(ze)%Se,Me[Fe[Oe]]=2;switch(Me[Fe[0]]=1,qe){case 1:break;case 3:if(Fe[0]===Fe[1]||Fe[0]===Fe[2]||Fe[1]===Fe[2])throw new Error("[ReadHuffmanCode] invalid symbols");break;case 2:if(Fe[0]===Fe[1])throw new Error("[ReadHuffmanCode] invalid symbols");Me[Fe[1]]=1;break;case 4:if(Fe[0]===Fe[1]||Fe[0]===Fe[2]||Fe[0]===Fe[3]||Fe[1]===Fe[2]||Fe[1]===Fe[3]||Fe[2]===Fe[3])throw new Error("[ReadHuffmanCode] invalid symbols");ye.readBits(1)?(Me[Fe[2]]=3,Me[Fe[3]]=3):Me[Fe[0]]=2;break}}else{var Oe,pt=new Uint8Array(E),ct=32,Y=0,W=[new i(2,0),new i(2,4),new i(2,3),new i(3,2),new i(2,0),new i(2,4),new i(2,3),new i(4,1),new i(2,0),new i(2,4),new i(2,3),new i(3,2),new i(2,0),new i(2,4),new i(2,3),new i(4,5)];for(Oe=pe;Oe<E&&ct>0;++Oe){var me=T[Oe],Ne=0,We;ye.fillBitWindow(),Ne+=ye.val_>>>ye.bit_pos_&15,ye.bit_pos_+=W[Ne].bits,We=W[Ne].value,pt[me]=We,We!==0&&(ct-=32>>We,++Y)}if(!(Y===1||ct===0))throw new Error("[ReadHuffmanCode] invalid num_codes or space");H(pt,Se,Me,ye)}if(ue=s(we,de,w,Me,Se),ue===0)throw new Error("[ReadHuffmanCode] BuildHuffmanTable failed: ");return ue}function ie(Se,we,de){var ye,ue;return ye=Z(Se,we,de),ue=a.kBlockLengthPrefixCode[ye].nbits,a.kBlockLengthPrefixCode[ye].offset+de.readBits(ue)}function be(Se,we,de){var ye;return Se<M?(de+=B[Se],de&=3,ye=we[de]+F[Se]):ye=Se-M+1,ye}function oe(Se,we){for(var de=Se[we],ye=we;ye;--ye)Se[ye]=Se[ye-1];Se[0]=de}function Te(Se,we){var de=new Uint8Array(256),ye;for(ye=0;ye<256;++ye)de[ye]=ye;for(ye=0;ye<we;++ye){var ue=Se[ye];Se[ye]=de[ue],ue&&oe(de,ue)}}function Ie(Se,we){this.alphabet_size=Se,this.num_htrees=we,this.codes=new Array(we+we*I[Se+31>>>5]),this.htrees=new Uint32Array(we)}Ie.prototype.decode=function(Se){var we,de,ye=0;for(we=0;we<this.num_htrees;++we)this.htrees[we]=ye,de=ne(this.alphabet_size,this.codes,ye,Se),ye+=de};function ve(Se,we){var de={num_htrees:null,context_map:null},ye,ue=0,pe,Me;we.readMoreInput();var Oe=de.num_htrees=G(we)+1,Le=de.context_map=new Uint8Array(Se);if(Oe<=1)return de;for(ye=we.readBits(1),ye&&(ue=we.readBits(4)+1),pe=[],Me=0;Me<O;Me++)pe[Me]=new i(0,0);for(ne(Oe+ue,pe,0,we),Me=0;Me<Se;){var ze;if(we.readMoreInput(),ze=Z(pe,0,we),ze===0)Le[Me]=0,++Me;else if(ze<=ue)for(var Fe=1+(1<<ze)+we.readBits(ze);--Fe;){if(Me>=Se)throw new Error("[DecodeContextMap] i >= context_map_size");Le[Me]=0,++Me}else Le[Me]=ze-ue,++Me}return we.readBits(1)&&Te(Le,Se),de}function he(Se,we,de,ye,ue,pe,Me){var Oe=de*2,Le=de,ze=Z(we,de*O,Me),Fe;ze===0?Fe=ue[Oe+(pe[Le]&1)]:ze===1?Fe=ue[Oe+(pe[Le]-1&1)]+1:Fe=ze-2,Fe>=Se&&(Fe-=Se),ye[de]=Fe,ue[Oe+(pe[Le]&1)]=Fe,++pe[Le]}function Be(Se,we,de,ye,ue,pe){var Me=ue+1,Oe=de&ue,Le=pe.pos_&t.IBUF_MASK,ze;if(we<8||pe.bit_pos_+(we<<3)<pe.bit_end_pos_){for(;we-- >0;)pe.readMoreInput(),ye[Oe++]=pe.readBits(8),Oe===Me&&(Se.write(ye,Me),Oe=0);return}if(pe.bit_end_pos_<32)throw new Error("[CopyUncompressedBlockToOutput] br.bit_end_pos_ < 32");for(;pe.bit_pos_<32;)ye[Oe]=pe.val_>>>pe.bit_pos_,pe.bit_pos_+=8,++Oe,--we;if(ze=pe.bit_end_pos_-pe.bit_pos_>>3,Le+ze>t.IBUF_MASK){for(var Fe=t.IBUF_MASK+1-Le,qe=0;qe<Fe;qe++)ye[Oe+qe]=pe.buf_[Le+qe];ze-=Fe,Oe+=Fe,we-=Fe,Le=0}for(var qe=0;qe<ze;qe++)ye[Oe+qe]=pe.buf_[Le+qe];if(Oe+=ze,we-=ze,Oe>=Me){Se.write(ye,Me),Oe-=Me;for(var qe=0;qe<Oe;qe++)ye[qe]=ye[Me+qe]}for(;Oe+we>=Me;){if(ze=Me-Oe,pe.input_.read(ye,Oe,ze)<ze)throw new Error("[CopyUncompressedBlockToOutput] not enough bytes");Se.write(ye,Me),we-=ze,Oe=0}if(pe.input_.read(ye,Oe,we)<we)throw new Error("[CopyUncompressedBlockToOutput] not enough bytes");pe.reset()}function Ae(Se){var we=Se.bit_pos_+7&-8,de=Se.readBits(we-Se.bit_pos_);return de==0}function $e(Se){var we=new r(Se),de=new t(we);N(de);var ye=J(de);return ye.meta_block_length}kl.BrotliDecompressedSize=$e;function Ee(Se,we){var de=new r(Se);we==null&&(we=$e(Se));var ye=new Uint8Array(we),ue=new e(ye);return ut(de,ue),ue.pos<ue.buffer.length&&(ue.buffer=ue.buffer.subarray(0,ue.pos)),ue.buffer}kl.BrotliDecompressBuffer=Ee;function ut(Se,we){var de,ye=0,ue=0,pe=0,Me,Oe=0,Le,ze,Fe,qe,pt=[16,15,11,4],ct=0,Y=0,W=0,me=[new Ie(0,0),new Ie(0,0),new Ie(0,0)],Ne,We,k,L=128+t.READ_SIZE;k=new t(Se),pe=N(k),Me=(1<<pe)-16,Le=1<<pe,ze=Le-1,Fe=new Uint8Array(Le+L+n.maxDictionaryWordLength),qe=Le,Ne=[],We=[];for(var P=0;P<3*O;P++)Ne[P]=new i(0,0),We[P]=new i(0,0);for(;!ue;){var U=0,j,re=[1<<28,1<<28,1<<28],se=[0],Ve=[1,1,1],Ye=[0,1,0,1,0,1],it=[0],st,ot,ae,De,He=null,nt=null,lt,Ft=null,an,ln=0,$n=null,At=0,Un=0,sn=null,Ii=0,Cr=0,si=0,sr,q;for(de=0;de<3;++de)me[de].codes=null,me[de].htrees=null;k.readMoreInput();var _e=J(k);if(U=_e.meta_block_length,ye+U>we.buffer.length){var Re=new Uint8Array(ye+U);Re.set(we.buffer),we.buffer=Re}if(ue=_e.input_end,j=_e.is_uncompressed,_e.is_metadata){for(Ae(k);U>0;--U)k.readMoreInput(),k.readBits(8);continue}if(U!==0){if(j){k.bit_pos_=k.bit_pos_+7&-8,Be(we,U,ye,Fe,ze,k),ye+=U;continue}for(de=0;de<3;++de)Ve[de]=G(k)+1,Ve[de]>=2&&(ne(Ve[de]+2,Ne,de*O,k),ne(b,We,de*O,k),re[de]=ie(We,de*O,k),it[de]=1);for(k.readMoreInput(),st=k.readBits(2),ot=M+(k.readBits(4)<<st),ae=(1<<st)-1,De=ot+(48<<st),nt=new Uint8Array(Ve[0]),de=0;de<Ve[0];++de)k.readMoreInput(),nt[de]=k.readBits(2)<<1;var xe=ve(Ve[0]<<C,k);lt=xe.num_htrees,He=xe.context_map;var ke=ve(Ve[2]<<y,k);for(an=ke.num_htrees,Ft=ke.context_map,me[0]=new Ie(p,lt),me[1]=new Ie(g,Ve[1]),me[2]=new Ie(De,an),de=0;de<3;++de)me[de].decode(k);for($n=0,sn=0,sr=nt[se[0]],Cr=o.lookupOffsets[sr],si=o.lookupOffsets[sr+1],q=me[1].htrees[0];U>0;){var ft,mt,_t,yt,Ct,gt,vt,kt,yn,cn,wn;for(k.readMoreInput(),re[1]===0&&(he(Ve[1],Ne,1,se,Ye,it,k),re[1]=ie(We,O,k),q=me[1].htrees[se[1]]),--re[1],ft=Z(me[1].codes,q,k),mt=ft>>6,mt>=2?(mt-=2,vt=-1):vt=0,_t=a.kInsertRangeLut[mt]+(ft>>3&7),yt=a.kCopyRangeLut[mt]+(ft&7),Ct=a.kInsertLengthPrefixCode[_t].offset+k.readBits(a.kInsertLengthPrefixCode[_t].nbits),gt=a.kCopyLengthPrefixCode[yt].offset+k.readBits(a.kCopyLengthPrefixCode[yt].nbits),Y=Fe[ye-1&ze],W=Fe[ye-2&ze],cn=0;cn<Ct;++cn)k.readMoreInput(),re[0]===0&&(he(Ve[0],Ne,0,se,Ye,it,k),re[0]=ie(We,0,k),ln=se[0]<<C,$n=ln,sr=nt[se[0]],Cr=o.lookupOffsets[sr],si=o.lookupOffsets[sr+1]),yn=o.lookup[Cr+Y]|o.lookup[si+W],At=He[$n+yn],--re[0],W=Y,Y=Z(me[0].codes,me[0].htrees[At],k),Fe[ye&ze]=Y,(ye&ze)===ze&&we.write(Fe,Le),++ye;if(U-=Ct,U<=0)break;if(vt<0){var yn;if(k.readMoreInput(),re[2]===0&&(he(Ve[2],Ne,2,se,Ye,it,k),re[2]=ie(We,2*O,k),Un=se[2]<<y,sn=Un),--re[2],yn=(gt>4?3:gt-2)&255,Ii=Ft[sn+yn],vt=Z(me[2].codes,me[2].htrees[Ii],k),vt>=ot){var Qt,Et,dr;vt-=ot,Et=vt&ae,vt>>=st,Qt=(vt>>1)+1,dr=(2+(vt&1)<<Qt)-4,vt=ot+(dr+k.readBits(Qt)<<st)+Et}}if(kt=be(vt,pt,ct),kt<0)throw new Error("[BrotliDecompress] invalid distance");if(ye<Me&&Oe!==Me?Oe=ye:Oe=Me,wn=ye&ze,kt>Oe)if(gt>=n.minDictionaryWordLength&&gt<=n.maxDictionaryWordLength){var dr=n.offsetsByLength[gt],un=kt-Oe-1,Vn=n.sizeBitsByLength[gt],ns=(1<<Vn)-1,Hr=un&ns,Yr=un>>Vn;if(dr+=Hr*gt,Yr<u.kNumTransforms){var mn=u.transformDictionaryWord(Fe,wn,dr,gt,Yr);if(wn+=mn,ye+=mn,U-=mn,wn>=qe){we.write(Fe,Le);for(var $t=0;$t<wn-qe;$t++)Fe[$t]=Fe[qe+$t]}}else throw new Error("Invalid backward reference. pos: "+ye+" distance: "+kt+" len: "+gt+" bytes left: "+U)}else throw new Error("Invalid backward reference. pos: "+ye+" distance: "+kt+" len: "+gt+" bytes left: "+U);else{if(vt>0&&(pt[ct&3]=kt,++ct),gt>U)throw new Error("Invalid backward reference. pos: "+ye+" distance: "+kt+" len: "+gt+" bytes left: "+U);for(cn=0;cn<gt;++cn)Fe[ye&ze]=Fe[ye-kt&ze],(ye&ze)===ze&&we.write(Fe,Le),++ye,--U}Y=Fe[ye-1&ze],W=Fe[ye-2&ze]}ye&=1073741823}}we.write(Fe,ye&ze)}return kl.BrotliDecompress=ut,n.init(),kl}var PH=G_().BrotliDecompressBuffer;function Dc(r,e,t,n){Object.defineProperty(r,e,{get:t,set:n,enumerable:!0,configurable:!0})}function bf(r){return r&&r.__esModule?r.default:r}var Oc={};Dc(Oc,"logErrors",()=>MH);Dc(Oc,"registerFormat",()=>rl);Dc(Oc,"create",()=>Mm);Dc(Oc,"defaultLanguage",()=>R0);Dc(Oc,"setDefaultLanguage",()=>EH);let MH=!1,_p=[];function rl(r){_p.push(r)}function Mm(r,e){for(let t=0;t<_p.length;t++){let n=_p[t];if(n.probe(r)){let i=new n(new Kn(r));return e?i.getFont(e):i}}throw new Error("Unknown font format")}let R0="en";function EH(r="en"){R0=r}function er(r,e,t){if(t.get){let n=t.get;t.get=function(){let i=n.call(this);return Object.defineProperty(this,e,{value:i}),i}}else if(typeof t.value=="function"){let n=t.value;return{get(){let i=new Map;function s(...o){let a=o.length>0?o[0]:"value";if(i.has(a))return i.get(a);let u=n.apply(this,o);return i.set(a,u),u}return Object.defineProperty(this,e,{value:s}),s}}}}let AH=new Pe({firstCode:R,entryCount:R,idDelta:Ge,idRangeOffset:R}),Id=new Pe({startCharCode:fe,endCharCode:fe,glyphID:fe}),TH=new Pe({startUnicodeValue:Us,additionalCount:Je}),IH=new Pe({unicodeValue:Us,glyphID:R}),LH=new le(TH,fe),DH=new le(IH,fe),OH=new Pe({varSelector:Us,defaultUVS:new ce(fe,LH,{type:"parent"}),nonDefaultUVS:new ce(fe,DH,{type:"parent"})}),RH=new Dt(R,{0:{length:R,language:R,codeMap:new en(Je,256)},2:{length:R,language:R,subHeaderKeys:new le(R,256),subHeaderCount:r=>Math.max.apply(Math,r.subHeaderKeys),subHeaders:new en(AH,"subHeaderCount"),glyphIndexArray:new en(R,"subHeaderCount")},4:{length:R,language:R,segCountX2:R,segCount:r=>r.segCountX2>>1,searchRange:R,entrySelector:R,rangeShift:R,endCode:new en(R,"segCount"),reservedPad:new pn(R),startCode:new en(R,"segCount"),idDelta:new en(Ge,"segCount"),idRangeOffset:new en(R,"segCount"),glyphIndexArray:new en(R,r=>(r.length-r._currentOffset)/2)},6:{length:R,language:R,firstCode:R,entryCount:R,glyphIndices:new en(R,"entryCount")},8:{reserved:new pn(R),length:fe,language:R,is32:new en(Je,8192),nGroups:fe,groups:new en(Id,"nGroups")},10:{reserved:new pn(R),length:fe,language:fe,firstCode:fe,entryCount:fe,glyphIndices:new en(R,"numChars")},12:{reserved:new pn(R),length:fe,language:fe,nGroups:fe,groups:new en(Id,"nGroups")},13:{reserved:new pn(R),length:fe,language:fe,nGroups:fe,groups:new en(Id,"nGroups")},14:{length:fe,numRecords:fe,varSelectors:new en(OH,"numRecords")}}),BH=new Pe({platformID:R,encodingID:R,table:new ce(fe,RH,{type:"parent",lazy:!0})});var FH=new Pe({version:R,numSubtables:R,tables:new le(BH,"numSubtables")}),NH=new Pe({version:po,revision:po,checkSumAdjustment:fe,magicNumber:fe,flags:R,unitsPerEm:R,created:new le(po,2),modified:new le(po,2),xMin:Ge,yMin:Ge,xMax:Ge,yMax:Ge,macStyle:new ri(R,["bold","italic","underline","outline","shadow","condensed","extended"]),lowestRecPPEM:R,fontDirectionHint:Ge,indexToLocFormat:Ge,glyphDataFormat:Ge}),kH=new Pe({version:po,ascent:Ge,descent:Ge,lineGap:Ge,advanceWidthMax:R,minLeftSideBearing:Ge,minRightSideBearing:Ge,xMaxExtent:Ge,caretSlopeRise:Ge,caretSlopeRun:Ge,caretOffset:Ge,reserved:new pn(Ge,4),metricDataFormat:Ge,numberOfMetrics:R});let UH=new Pe({advance:R,bearing:Ge});var VH=new Pe({metrics:new en(UH,r=>r.parent.hhea.numberOfMetrics),bearings:new en(Ge,r=>r.parent.maxp.numGlyphs-r.parent.hhea.numberOfMetrics)}),zH=new Pe({version:po,numGlyphs:R,maxPoints:R,maxContours:R,maxComponentPoints:R,maxComponentContours:R,maxZones:R,maxTwilightPoints:R,maxStorage:R,maxFunctionDefs:R,maxInstructionDefs:R,maxStackElements:R,maxSizeOfInstructions:R,maxComponentElements:R,maxComponentDepth:R});function $_(r,e,t=0){return r===1&&ey[t]?ey[t]:XH[r][e]}const GH=new Set(["x-mac-roman","x-mac-cyrillic","iso-8859-6","iso-8859-8"]),$H={"x-mac-croatian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®Š™´¨≠ŽØ∞±≤≥∆µ∂∑∏š∫ªºΩžø¿¡¬√ƒ≈Ć«Č… ÀÃÕŒœĐ—“”‘’÷◊©⁄€‹›Æ»–·‚„‰ÂćÁčÈÍÎÏÌÓÔđÒÚÛÙıˆ˜¯πË˚¸Êæˇ","x-mac-gaelic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØḂ±≤≥ḃĊċḊḋḞḟĠġṀæøṁṖṗɼƒſṠ«»… ÀÃÕŒœ–—“”‘’ṡẛÿŸṪ€‹›Ŷŷṫ·Ỳỳ⁊ÂÊÁËÈÍÎÏÌÓÔ♣ÒÚÛÙıÝýŴŵẄẅẀẁẂẃ","x-mac-greek":"Ä¹²É³ÖÜ΅àâä΄¨çéèêë£™îï•½‰ôö¦€ùûü†ΓΔΘΛΞΠß®©ΣΪ§≠°·Α±≤≥¥ΒΕΖΗΙΚΜΦΫΨΩάΝ¬ΟΡ≈Τ«»… ΥΧΆΈœ–―“”‘’÷ΉΊΌΎέήίόΏύαβψδεφγηιξκλμνοπώρστθωςχυζϊϋΐΰ­","x-mac-icelandic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûüÝ°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€ÐðÞþý·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-inuit":"ᐃᐄᐅᐆᐊᐋᐱᐲᐳᐴᐸᐹᑉᑎᑏᑐᑑᑕᑖᑦᑭᑮᑯᑰᑲᑳᒃᒋᒌᒍᒎᒐᒑ°ᒡᒥᒦ•¶ᒧ®©™ᒨᒪᒫᒻᓂᓃᓄᓅᓇᓈᓐᓯᓰᓱᓲᓴᓵᔅᓕᓖᓗᓘᓚᓛᓪᔨᔩᔪᔫᔭ… ᔮᔾᕕᕖᕗ–—“”‘’ᕘᕙᕚᕝᕆᕇᕈᕉᕋᕌᕐᕿᖀᖁᖂᖃᖄᖅᖏᖐᖑᖒᖓᖔᖕᙱᙲᙳᙴᙵᙶᖖᖠᖡᖢᖣᖤᖥᖦᕼŁł","x-mac-ce":"ÄĀāÉĄÖÜáąČäčĆćéŹźĎíďĒēĖóėôöõúĚěü†°Ę£§•¶ß®©™ę¨≠ģĮįĪ≤≥īĶ∂∑łĻļĽľĹĺŅņŃ¬√ńŇ∆«»… ňŐÕőŌ–—“”‘’÷◊ōŔŕŘ‹›řŖŗŠ‚„šŚśÁŤťÍŽžŪÓÔūŮÚůŰűŲųÝýķŻŁżĢˇ","x-mac-romanian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ĂȘ∞±≤≥¥µ∂∑∏π∫ªºΩăș¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›Țț‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-turkish":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸĞğİıŞş‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙˆ˜¯˘˙˚¸˝˛ˇ"},Ld=new Map;function WH(r){let e=Ld.get(r);if(e)return e;let t=$H[r];if(t){let n=new Map;for(let i=0;i<t.length;i++)n.set(t.charCodeAt(i),128+i);return Ld.set(r,n),n}if(GH.has(r)){let n=new TextDecoder(r),i=new Uint8Array(128);for(let a=0;a<128;a++)i[a]=128+a;let s=new Map,o=n.decode(i);for(let a=0;a<128;a++)s.set(o.charCodeAt(a),128+a);return Ld.set(r,s),s}}const XH=[["utf16be","utf16be","utf16be","utf16be","utf16be","utf16be"],["x-mac-roman","shift-jis","big5","euc-kr","iso-8859-6","iso-8859-8","x-mac-greek","x-mac-cyrillic","x-mac-symbol","x-mac-devanagari","x-mac-gurmukhi","x-mac-gujarati","Oriya","Bengali","Tamil","Telugu","Kannada","Malayalam","Sinhalese","Burmese","Khmer","iso-8859-11","Laotian","Georgian","Armenian","hz-gb-2312","Tibetan","Mongolian","Geez","x-mac-ce","Vietnamese","Sindhi"],["ascii"],["symbol","utf16be","shift-jis","gb18030","big5","x-cp20949","johab",null,null,null,"utf16be"]],ey={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"},HH=[[],{0:"en",30:"fo",60:"ks",90:"rw",1:"fr",31:"fa",61:"ku",91:"rn",2:"de",32:"ru",62:"sd",92:"ny",3:"it",33:"zh",63:"bo",93:"mg",4:"nl",34:"nl-BE",64:"ne",94:"eo",5:"sv",35:"ga",65:"sa",128:"cy",6:"es",36:"sq",66:"mr",129:"eu",7:"da",37:"ro",67:"bn",130:"ca",8:"pt",38:"cz",68:"as",131:"la",9:"no",39:"sk",69:"gu",132:"qu",10:"he",40:"si",70:"pa",133:"gn",11:"ja",41:"yi",71:"or",134:"ay",12:"ar",42:"sr",72:"ml",135:"tt",13:"fi",43:"mk",73:"kn",136:"ug",14:"el",44:"bg",74:"ta",137:"dz",15:"is",45:"uk",75:"te",138:"jv",16:"mt",46:"be",76:"si",139:"su",17:"tr",47:"uz",77:"my",140:"gl",18:"hr",48:"kk",78:"km",141:"af",19:"zh-Hant",49:"az-Cyrl",79:"lo",142:"br",20:"ur",50:"az-Arab",80:"vi",143:"iu",21:"hi",51:"hy",81:"id",144:"gd",22:"th",52:"ka",82:"tl",145:"gv",23:"ko",53:"mo",83:"ms",146:"ga",24:"lt",54:"ky",84:"ms-Arab",147:"to",25:"pl",55:"tg",85:"am",148:"el-polyton",26:"hu",56:"tk",86:"ti",149:"kl",27:"es",57:"mn-CN",87:"om",150:"az",28:"lv",58:"mn",88:"so",151:"nn",29:"se",59:"ps",89:"sw"},[],{1078:"af",16393:"en-IN",1159:"rw",1074:"tn",1052:"sq",6153:"en-IE",1089:"sw",1115:"si",1156:"gsw",8201:"en-JM",1111:"kok",1051:"sk",1118:"am",17417:"en-MY",1042:"ko",1060:"sl",5121:"ar-DZ",5129:"en-NZ",1088:"ky",11274:"es-AR",15361:"ar-BH",13321:"en-PH",1108:"lo",16394:"es-BO",3073:"ar",18441:"en-SG",1062:"lv",13322:"es-CL",2049:"ar-IQ",7177:"en-ZA",1063:"lt",9226:"es-CO",11265:"ar-JO",11273:"en-TT",2094:"dsb",5130:"es-CR",13313:"ar-KW",2057:"en-GB",1134:"lb",7178:"es-DO",12289:"ar-LB",1033:"en",1071:"mk",12298:"es-EC",4097:"ar-LY",12297:"en-ZW",2110:"ms-BN",17418:"es-SV",6145:"ary",1061:"et",1086:"ms",4106:"es-GT",8193:"ar-OM",1080:"fo",1100:"ml",18442:"es-HN",16385:"ar-QA",1124:"fil",1082:"mt",2058:"es-MX",1025:"ar-SA",1035:"fi",1153:"mi",19466:"es-NI",10241:"ar-SY",2060:"fr-BE",1146:"arn",6154:"es-PA",7169:"aeb",3084:"fr-CA",1102:"mr",15370:"es-PY",14337:"ar-AE",1036:"fr",1148:"moh",10250:"es-PE",9217:"ar-YE",5132:"fr-LU",1104:"mn",20490:"es-PR",1067:"hy",6156:"fr-MC",2128:"mn-CN",3082:"es",1101:"as",4108:"fr-CH",1121:"ne",1034:"es",2092:"az-Cyrl",1122:"fy",1044:"nb",21514:"es-US",1068:"az",1110:"gl",2068:"nn",14346:"es-UY",1133:"ba",1079:"ka",1154:"oc",8202:"es-VE",1069:"eu",3079:"de-AT",1096:"or",2077:"sv-FI",1059:"be",1031:"de",1123:"ps",1053:"sv",2117:"bn",5127:"de-LI",1045:"pl",1114:"syr",1093:"bn-IN",4103:"de-LU",1046:"pt",1064:"tg",8218:"bs-Cyrl",2055:"de-CH",2070:"pt-PT",2143:"tzm",5146:"bs",1032:"el",1094:"pa",1097:"ta",1150:"br",1135:"kl",1131:"qu-BO",1092:"tt",1026:"bg",1095:"gu",2155:"qu-EC",1098:"te",1027:"ca",1128:"ha",3179:"qu",1054:"th",3076:"zh-HK",1037:"he",1048:"ro",1105:"bo",5124:"zh-MO",1081:"hi",1047:"rm",1055:"tr",2052:"zh",1038:"hu",1049:"ru",1090:"tk",4100:"zh-SG",1039:"is",9275:"smn",1152:"ug",1028:"zh-TW",1136:"ig",4155:"smj-NO",1058:"uk",1155:"co",1057:"id",5179:"smj",1070:"hsb",1050:"hr",1117:"iu",3131:"se-FI",1056:"ur",4122:"hr-BA",2141:"iu-Latn",1083:"se",2115:"uz-Cyrl",1029:"cs",2108:"ga",2107:"se-SE",1091:"uz",1030:"da",1076:"xh",8251:"sms",1066:"vi",1164:"prs",1077:"zu",6203:"sma-NO",1106:"cy",1125:"dv",1040:"it",7227:"sms",1160:"wo",2067:"nl-BE",2064:"it-CH",1103:"sa",1157:"sah",1043:"nl",1041:"ja",7194:"sr-Cyrl-BA",1144:"ii",3081:"en-AU",1099:"kn",3098:"sr",1130:"yo",10249:"en-BZ",1087:"kk",6170:"sr-Latn-BA",4105:"en-CA",1107:"km",2074:"sr-Latn",9225:"en-029",1158:"quc",1132:"nso"}];let ty=new Pe({platformID:R,encodingID:R,languageID:R,nameID:R,length:R,string:new ce(R,new jt("length",r=>$_(r.platformID,r.encodingID,r.languageID)),{type:"parent",relativeTo:r=>r.parent.stringOffset,allowNull:!1})}),YH=new Pe({length:R,tag:new ce(R,new jt("length","utf16be"),{type:"parent",relativeTo:r=>r.stringOffset})});var B0=new Dt(R,{0:{count:R,stringOffset:R,records:new le(ty,"count")},1:{count:R,stringOffset:R,records:new le(ty,"count"),langTagCount:R,langTags:new le(YH,"langTagCount")}}),qH=B0;const Sp=["copyright","fontFamily","fontSubfamily","uniqueSubfamily","fullName","version","postscriptName","trademark","manufacturer","designer","description","vendorURL","designerURL","license","licenseURL",null,"preferredFamily","preferredSubfamily","compatibleFull","sampleText","postscriptCIDFontName","wwsFamilyName","wwsSubfamilyName"];B0.process=function(r){var e={};for(let t of this.records){let n=HH[t.platformID][t.languageID];n==null&&this.langTags!=null&&t.languageID>=32768&&(n=this.langTags[t.languageID-32768].tag),n==null&&(n=t.platformID+"-"+t.languageID);let i=t.nameID>=256?"fontFeatures":Sp[t.nameID]||t.nameID;e[i]==null&&(e[i]={});let s=e[i];t.nameID>=256&&(s=s[t.nameID]||(s[t.nameID]={})),(typeof t.string=="string"||typeof s[n]!="string")&&(s[n]=t.string)}this.records=e};B0.preEncode=function(){if(Array.isArray(this.records))return;this.version=0;let r=[];for(let e in this.records){let t=this.records[e];e!=="fontFeatures"&&(r.push({platformID:3,encodingID:1,languageID:1033,nameID:Sp.indexOf(e),length:t.en.length*2,string:t.en}),e==="postscriptName"&&r.push({platformID:1,encodingID:0,languageID:0,nameID:Sp.indexOf(e),length:t.en.length,string:t.en}))}this.records=r,this.count=r.length,this.stringOffset=B0.size(this,null,!1)};var W_=new Dt(R,{header:{xAvgCharWidth:Ge,usWeightClass:R,usWidthClass:R,fsType:new ri(R,[null,"noEmbedding","viewOnly","editable",null,null,null,null,"noSubsetting","bitmapOnly"]),ySubscriptXSize:Ge,ySubscriptYSize:Ge,ySubscriptXOffset:Ge,ySubscriptYOffset:Ge,ySuperscriptXSize:Ge,ySuperscriptYSize:Ge,ySuperscriptXOffset:Ge,ySuperscriptYOffset:Ge,yStrikeoutSize:Ge,yStrikeoutPosition:Ge,sFamilyClass:Ge,panose:new le(Je,10),ulCharRange:new le(fe,4),vendorID:new jt(4),fsSelection:new ri(R,["italic","underscore","negative","outlined","strikeout","bold","regular","useTypoMetrics","wws","oblique"]),usFirstCharIndex:R,usLastCharIndex:R},0:{},1:{typoAscender:Ge,typoDescender:Ge,typoLineGap:Ge,winAscent:R,winDescent:R,codePageRange:new le(fe,2)},2:{typoAscender:Ge,typoDescender:Ge,typoLineGap:Ge,winAscent:R,winDescent:R,codePageRange:new le(fe,2),xHeight:Ge,capHeight:Ge,defaultChar:R,breakChar:R,maxContent:R},5:{typoAscender:Ge,typoDescender:Ge,typoLineGap:Ge,winAscent:R,winDescent:R,codePageRange:new le(fe,2),xHeight:Ge,capHeight:Ge,defaultChar:R,breakChar:R,maxContent:R,usLowerOpticalPointSize:R,usUpperOpticalPointSize:R}});let Dd=W_.versions;Dd[3]=Dd[4]=Dd[2];var ZH=W_,jH=new Dt(Pn,{header:{italicAngle:Pn,underlinePosition:Ge,underlineThickness:Ge,isFixedPitch:fe,minMemType42:fe,maxMemType42:fe,minMemType1:fe,maxMemType1:fe},1:{},2:{numberOfGlyphs:R,glyphNameIndex:new le(R,"numberOfGlyphs"),names:new le(new jt(Je))},2.5:{numberOfGlyphs:R,offsets:new le(Je,"numberOfGlyphs")},3:{},4:{map:new le(fe,r=>r.parent.maxp.numGlyphs)}}),KH=new Pe({controlValues:new le(Ge)}),JH=new Pe({instructions:new le(Je)});let Em=new Dt("head.indexToLocFormat",{0:{offsets:new le(R)},1:{offsets:new le(fe)}});Em.process=function(){if(this.version===0&&!this._processed){for(let r=0;r<this.offsets.length;r++)this.offsets[r]<<=1;this._processed=!0}};Em.preEncode=function(){if(this.version===0&&this._processed!==!1){for(let r=0;r<this.offsets.length;r++)this.offsets[r]>>>=1;this._processed=!1}};var QH=Em,eY=new Pe({controlValueProgram:new le(Je)}),tY=new le(new _i);class yi{getCFFVersion(e){for(;e&&!e.hdrSize;)e=e.parent;return e?e.version:-1}decode(e,t){let i=this.getCFFVersion(t)>=2?e.readUInt32BE():e.readUInt16BE();if(i===0)return[];let s=e.readUInt8(),o;if(s===1)o=Je;else if(s===2)o=R;else if(s===3)o=Us;else if(s===4)o=fe;else throw new Error(`Bad offset size in CFFIndex: ${s} ${e.pos}`);let a=[],u=e.pos+(i+1)*s-1,f=o.decode(e);for(let h=0;h<i;h++){let p=o.decode(e);if(this.type!=null){let g=e.pos;e.pos=u+f,t.length=p-f,a.push(this.type.decode(e,t)),e.pos=g}else a.push({offset:u+f,length:p-f});f=p}return e.pos=u+f,a}size(e,t){let n=2;if(e.length===0)return n;let i=this.type||new _i,s=1;for(let a=0;a<e.length;a++){let u=e[a];s+=i.size(u,t)}let o;if(s<=255)o=Je;else if(s<=65535)o=R;else if(s<=16777215)o=Us;else if(s<=4294967295)o=fe;else throw new Error("Bad offset in CFFIndex");return n+=1+o.size()*(e.length+1),n+=s-1,n}encode(e,t,n){if(e.writeUInt16BE(t.length),t.length===0)return;let i=this.type||new _i,s=[],o=1;for(let u of t){let f=i.size(u,n);s.push(f),o+=f}let a;if(o<=255)a=Je;else if(o<=65535)a=R;else if(o<=16777215)a=Us;else if(o<=4294967295)a=fe;else throw new Error("Bad offset in CFFIndex");e.writeUInt8(a.size()),o=1,a.encode(e,o);for(let u of s)o+=u,a.encode(e,o);for(let u of t)i.encode(e,u,n)}constructor(e){this.type=e}}const Vl=15,ny=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"],ry={".":10,E:11,"E-":12,"-":14};class Od{static decode(e,t){if(32<=t&&t<=246)return t-139;if(247<=t&&t<=250)return(t-247)*256+e.readUInt8()+108;if(251<=t&&t<=254)return-(t-251)*256-e.readUInt8()-108;if(t===28)return e.readInt16BE();if(t===29)return e.readInt32BE();if(t===30){let n="";for(;;){let i=e.readUInt8(),s=i>>4;if(s===Vl)break;n+=ny[s];let o=i&15;if(o===Vl)break;n+=ny[o]}return parseFloat(n)}return null}static size(e){if(e.forceLarge&&(e=32768),(e|0)!==e){let t=""+e;return 1+Math.ceil((t.length+1)/2)}else return-107<=e&&e<=107?1:108<=e&&e<=1131||-1131<=e&&e<=-108?2:-32768<=e&&e<=32767?3:5}static encode(e,t){let n=Number(t);if(t.forceLarge)return e.writeUInt8(29),e.writeInt32BE(n);if((n|0)!==n){e.writeUInt8(30);let s=""+n;for(let o=0;o<s.length;o+=2){let a=s[o],u=ry[a]||+a;if(o===s.length-1)var i=Vl;else{let f=s[o+1];var i=ry[f]||+f}e.writeUInt8(u<<4|i&15)}if(i!==Vl)return e.writeUInt8(Vl<<4)}else return-107<=n&&n<=107?e.writeUInt8(n+139):108<=n&&n<=1131?(n-=108,e.writeUInt8((n>>8)+247),e.writeUInt8(n&255)):-1131<=n&&n<=-108?(n=-n-108,e.writeUInt8((n>>8)+251),e.writeUInt8(n&255)):-32768<=n&&n<=32767?(e.writeUInt8(28),e.writeInt16BE(n)):(e.writeUInt8(29),e.writeInt32BE(n))}}class yf{decodeOperands(e,t,n,i){if(Array.isArray(e))return i.map((s,o)=>this.decodeOperands(e[o],t,n,[s]));if(e.decode!=null)return e.decode(t,n,i);switch(e){case"number":case"offset":case"sid":return i[0];case"boolean":return!!i[0];default:return i}}encodeOperands(e,t,n,i){return Array.isArray(e)?i.map((s,o)=>this.encodeOperands(e[o],t,n,s)[0]):e.encode!=null?e.encode(t,i,n):typeof i=="number"?[i]:typeof i=="boolean"?[+i]:Array.isArray(i)?i:[i]}decode(e,t){let n=e.pos+t.length,i={},s=[];Object.defineProperties(i,{parent:{value:t},_startOffset:{value:e.pos}});for(let o in this.fields){let a=this.fields[o];i[a[1]]=a[3]}for(;e.pos<n;){let o=e.readUInt8();if(o<28){o===12&&(o=o<<8|e.readUInt8());let a=this.fields[o];if(!a)throw new Error(`Unknown operator ${o}`);let u=this.decodeOperands(a[2],e,i,s);u!=null&&(u instanceof gm?Object.defineProperty(i,a[1],u):i[a[1]]=u),s=[]}else s.push(Od.decode(e,o))}return i}size(e,t,n=!0){let i={parent:t,val:e,pointerSize:0,startOffset:t.startOffset||0},s=0;for(let o in this.fields){let a=this.fields[o],u=e[a[1]];if(u==null||Vb(u,a[3]))continue;let f=this.encodeOperands(a[2],null,i,u);for(let p of f)s+=Od.size(p);let h=Array.isArray(a[0])?a[0]:[a[0]];s+=h.length}return n&&(s+=i.pointerSize),s}encode(e,t,n){let i={pointers:[],startOffset:e.pos,parent:n,val:t,pointerSize:0};i.pointerOffset=e.pos+this.size(t,i,!1);for(let o of this.ops){let a=t[o[1]];if(a==null||Vb(a,o[3]))continue;let u=this.encodeOperands(o[2],e,i,a);for(let h of u)Od.encode(e,h);let f=Array.isArray(o[0])?o[0]:[o[0]];for(let h of f)e.writeUInt8(h)}let s=0;for(;s<i.pointers.length;){let o=i.pointers[s++];o.type.encode(e,o.val,o.parent)}}constructor(e=[]){this.ops=e,this.fields={};for(let t of e){let n=Array.isArray(t[0])?t[0][0]<<8|t[0][1]:t[0];this.fields[n]=t}}}class ni extends ce{decode(e,t,n){return this.offsetType={decode:()=>n[0]},super.decode(e,t,n)}encode(e,t,n){if(!e)return this.offsetType={size:()=>0},this.size(t,n),[new iy(0)];let i=null;return this.offsetType={encode:(s,o)=>i=o},super.encode(e,t,n),[new iy(i)]}constructor(e,t={}){t.type==null&&(t.type="global"),super(null,e,t)}}class iy{valueOf(){return this.val}constructor(e){this.val=e,this.forceLarge=!0}}class nY{static decode(e,t,n){let i=n.pop();for(;n.length>i;)n.pop()}}var Cp=new yf([[6,"BlueValues","delta",null],[7,"OtherBlues","delta",null],[8,"FamilyBlues","delta",null],[9,"FamilyOtherBlues","delta",null],[[12,9],"BlueScale","number",.039625],[[12,10],"BlueShift","number",7],[[12,11],"BlueFuzz","number",1],[10,"StdHW","number",null],[11,"StdVW","number",null],[[12,12],"StemSnapH","delta",null],[[12,13],"StemSnapV","delta",null],[[12,14],"ForceBold","boolean",!1],[[12,17],"LanguageGroup","number",0],[[12,18],"ExpansionFactor","number",.06],[[12,19],"initialRandomSeed","number",0],[20,"defaultWidthX","number",0],[21,"nominalWidthX","number",0],[22,"vsindex","number",0],[23,"blend",nY,null],[19,"Subrs",new ni(new yi,{type:"local"}),null]]),u0=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"];let X_=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],rY=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],H_=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron"],iY=[".notdef","space","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","fi","fl","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],sY=[".notdef","space","dollaroldstyle","dollarsuperior","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","fi","fl","ffi","ffl","parenleftinferior","parenrightinferior","hyphensuperior","colonmonetary","onefitted","rupiah","centoldstyle","figuredash","hypheninferior","onequarter","onehalf","threequarters","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior"],Y_=new Pe({reserved:new pn(R),reqFeatureIndex:R,featureCount:R,featureIndexes:new le(R,"featureCount")}),oY=new Pe({tag:new jt(4),langSys:new ce(R,Y_,{type:"parent"})}),aY=new Pe({defaultLangSys:new ce(R,Y_),count:R,langSysRecords:new le(oY,"count")}),lY=new Pe({tag:new jt(4),script:new ce(R,aY,{type:"parent"})}),q_=new le(lY,R),cY=new Pe({version:R,nameID:R}),Z_=new Pe({featureParams:new ce(R,cY),lookupCount:R,lookupListIndexes:new le(R,"lookupCount")}),uY=new Pe({tag:new jt(4),feature:new ce(R,Z_,{type:"parent"})}),j_=new le(uY,R),fY=new Pe({markAttachmentType:Je,flags:new ri(Je,["rightToLeft","ignoreBaseGlyphs","ignoreLigatures","ignoreMarks","useMarkFilteringSet"])});function F0(r){let e=new Pe({lookupType:R,flags:fY,subTableCount:R,subTables:new le(new ce(R,r),"subTableCount"),markFilteringSet:new L0(R,t=>t.flags.flags.useMarkFilteringSet)});return new en(new ce(R,e),R)}let hY=new Pe({start:R,end:R,startCoverageIndex:R}),qt=new Dt(R,{1:{glyphCount:R,glyphs:new le(R,"glyphCount")},2:{rangeCount:R,rangeRecords:new le(hY,"rangeCount")}}),dY=new Pe({start:R,end:R,class:R}),Vs=new Dt(R,{1:{startGlyph:R,glyphCount:R,classValueArray:new le(R,"glyphCount")},2:{classRangeCount:R,classRangeRecord:new le(dY,"classRangeCount")}}),Rs=new Pe({a:R,b:R,deltaFormat:R}),Rc=new Pe({sequenceIndex:R,lookupListIndex:R}),pY=new Pe({glyphCount:R,lookupCount:R,input:new le(R,r=>r.glyphCount-1),lookupRecords:new le(Rc,"lookupCount")}),mY=new le(new ce(R,pY),R),gY=new Pe({glyphCount:R,lookupCount:R,classes:new le(R,r=>r.glyphCount-1),lookupRecords:new le(Rc,"lookupCount")}),vY=new le(new ce(R,gY),R),K_=new Dt(R,{1:{coverage:new ce(R,qt),ruleSetCount:R,ruleSets:new le(new ce(R,mY),"ruleSetCount")},2:{coverage:new ce(R,qt),classDef:new ce(R,Vs),classSetCnt:R,classSet:new le(new ce(R,vY),"classSetCnt")},3:{glyphCount:R,lookupCount:R,coverages:new le(new ce(R,qt),"glyphCount"),lookupRecords:new le(Rc,"lookupCount")}}),xY=new Pe({backtrackGlyphCount:R,backtrack:new le(R,"backtrackGlyphCount"),inputGlyphCount:R,input:new le(R,r=>r.inputGlyphCount-1),lookaheadGlyphCount:R,lookahead:new le(R,"lookaheadGlyphCount"),lookupCount:R,lookupRecords:new le(Rc,"lookupCount")}),sy=new le(new ce(R,xY),R),J_=new Dt(R,{1:{coverage:new ce(R,qt),chainCount:R,chainRuleSets:new le(new ce(R,sy),"chainCount")},2:{coverage:new ce(R,qt),backtrackClassDef:new ce(R,Vs),inputClassDef:new ce(R,Vs),lookaheadClassDef:new ce(R,Vs),chainCount:R,chainClassSet:new le(new ce(R,sy),"chainCount")},3:{backtrackGlyphCount:R,backtrackCoverage:new le(new ce(R,qt),"backtrackGlyphCount"),inputGlyphCount:R,inputCoverage:new le(new ce(R,qt),"inputGlyphCount"),lookaheadGlyphCount:R,lookaheadCoverage:new le(new ce(R,qt),"lookaheadGlyphCount"),lookupCount:R,lookupRecords:new le(Rc,"lookupCount")}}),nc=new Fo(16,"BE",14),bY=new Pe({startCoord:nc,peakCoord:nc,endCoord:nc}),yY=new Pe({axisCount:R,regionCount:R,variationRegions:new le(new le(bY,"axisCount"),"regionCount")}),wY=new Pe({shortDeltas:new le(Ge,r=>r.parent.shortDeltaCount),regionDeltas:new le(Bn,r=>r.parent.regionIndexCount-r.parent.shortDeltaCount),deltas:r=>r.shortDeltas.concat(r.regionDeltas)}),_Y=new Pe({itemCount:R,shortDeltaCount:R,regionIndexCount:R,regionIndexes:new le(R,"regionIndexCount"),deltaSets:new le(wY,"itemCount")}),wf=new Pe({format:R,variationRegionList:new ce(fe,yY),variationDataCount:R,itemVariationData:new le(new ce(fe,_Y),"variationDataCount")}),SY=new Dt(R,{1:{axisIndex:R,axisIndex:R,filterRangeMinValue:nc,filterRangeMaxValue:nc}}),CY=new Pe({conditionCount:R,conditionTable:new le(new ce(fe,SY),"conditionCount")}),PY=new Pe({featureIndex:R,alternateFeatureTable:new ce(fe,Z_,{type:"parent"})}),MY=new Pe({version:Pn,substitutionCount:R,substitutions:new le(PY,"substitutionCount")}),EY=new Pe({conditionSet:new ce(fe,CY,{type:"parent"}),featureTableSubstitution:new ce(fe,MY,{type:"parent"})}),Q_=new Pe({majorVersion:R,minorVersion:R,featureVariationRecordCount:fe,featureVariationRecords:new le(EY,"featureVariationRecordCount")});class e3{decode(e,t,n){return this.predefinedOps[n[0]]?this.predefinedOps[n[0]]:this.type.decode(e,t,n)}size(e,t){return this.type.size(e,t)}encode(e,t,n){let i=this.predefinedOps.indexOf(t);return i!==-1?i:this.type.encode(e,t,n)}constructor(e,t){this.predefinedOps=e,this.type=t}}class AY extends Xt{decode(e){return Je.decode(e)&127}constructor(){super("UInt8")}}let t3=new Pe({first:R,nLeft:Je}),TY=new Pe({first:R,nLeft:R}),IY=new Dt(new AY,{0:{nCodes:Je,codes:new le(Je,"nCodes")},1:{nRanges:Je,ranges:new le(t3,"nRanges")}}),LY=new e3([X_,rY],new ni(IY,{lazy:!0}));class oy extends le{decode(e,t){let n=Ei(this.length,e,t),i=0,s=[];for(;i<n;){let o=this.type.decode(e,t);o.offset=i,i+=o.nLeft+1,s.push(o)}return s}}let DY=new Dt(Je,{0:{glyphs:new le(R,r=>r.parent.CharStrings.length-1)},1:{ranges:new oy(t3,r=>r.parent.CharStrings.length-1)},2:{ranges:new oy(TY,r=>r.parent.CharStrings.length-1)}}),OY=new e3([H_,iY,sY],new ni(DY,{lazy:!0})),RY=new Pe({first:R,fd:Je}),BY=new Pe({first:fe,fd:R}),n3=new Dt(Je,{0:{fds:new le(Je,r=>r.parent.CharStrings.length)},3:{nRanges:R,ranges:new le(RY,"nRanges"),sentinel:R},4:{nRanges:fe,ranges:new le(BY,"nRanges"),sentinel:fe}}),Rd=new ni(Cp);class r3{decode(e,t,n){return t.length=n[0],Rd.decode(e,t,[n[1]])}size(e,t){return[Cp.size(e,t,!1),Rd.size(e,t)[0]]}encode(e,t,n){return[Cp.size(t,n,!1),Rd.encode(e,t,n)[0]]}}let i3=new yf([[18,"Private",new r3,null],[[12,38],"FontName","sid",null],[[12,7],"FontMatrix","array",[.001,0,0,.001,0,0]],[[12,5],"PaintType","number",0]]),FY=new yf([[[12,30],"ROS",["sid","sid","number"],null],[0,"version","sid",null],[1,"Notice","sid",null],[[12,0],"Copyright","sid",null],[2,"FullName","sid",null],[3,"FamilyName","sid",null],[4,"Weight","sid",null],[[12,1],"isFixedPitch","boolean",!1],[[12,2],"ItalicAngle","number",0],[[12,3],"UnderlinePosition","number",-100],[[12,4],"UnderlineThickness","number",50],[[12,5],"PaintType","number",0],[[12,6],"CharstringType","number",2],[[12,7],"FontMatrix","array",[.001,0,0,.001,0,0]],[13,"UniqueID","number",null],[5,"FontBBox","array",[0,0,0,0]],[[12,8],"StrokeWidth","number",0],[14,"XUID","array",null],[15,"charset",OY,H_],[16,"Encoding",LY,X_],[17,"CharStrings",new ni(new yi),null],[18,"Private",new r3,null],[[12,20],"SyntheticBase","number",null],[[12,21],"PostScript","sid",null],[[12,22],"BaseFontName","sid",null],[[12,23],"BaseFontBlend","delta",null],[[12,31],"CIDFontVersion","number",0],[[12,32],"CIDFontRevision","number",0],[[12,33],"CIDFontType","number",0],[[12,34],"CIDCount","number",8720],[[12,35],"UIDBase","number",null],[[12,37],"FDSelect",new ni(n3),null],[[12,36],"FDArray",new ni(new yi(i3)),null],[[12,38],"FontName","sid",null]]),NY=new Pe({length:R,itemVariationStore:wf}),kY=new yf([[[12,7],"FontMatrix","array",[.001,0,0,.001,0,0]],[17,"CharStrings",new ni(new yi),null],[[12,37],"FDSelect",new ni(n3),null],[[12,36],"FDArray",new ni(new yi(i3)),null],[24,"vstore",new ni(NY),null],[25,"maxstack","number",193]]),UY=new Dt(RX,{1:{hdrSize:Je,offSize:Je,nameIndex:new yi(new jt("length")),topDictIndex:new yi(FY),stringIndex:new yi(new jt("length")),globalSubrIndex:new yi},2:{hdrSize:Je,length:R,topDict:kY,globalSubrIndex:new yi}});var s3=UY;class Am{static decode(e){return new Am(e)}decode(){this.stream.pos;let e=s3.decode(this.stream);for(let t in e){let n=e[t];this[t]=n}if(this.version<2){if(this.topDictIndex.length!==1)throw new Error("Only a single font is allowed in CFF");this.topDict=this.topDictIndex[0]}return this.isCIDFont=this.topDict.ROS!=null,this}string(e){return this.version>=2?null:e<u0.length?u0[e]:this.stringIndex[e-u0.length]}get postscriptName(){return this.version<2?this.nameIndex[0]:null}get fullName(){return this.string(this.topDict.FullName)}get familyName(){return this.string(this.topDict.FamilyName)}getCharString(e){return this.stream.pos=this.topDict.CharStrings[e].offset,this.stream.readBuffer(this.topDict.CharStrings[e].length)}getGlyphName(e){if(this.version>=2||this.isCIDFont)return null;let{charset:t}=this.topDict;if(Array.isArray(t))return t[e];if(e===0)return".notdef";switch(e-=1,t.version){case 0:return this.string(t.glyphs[e]);case 1:case 2:for(let n=0;n<t.ranges.length;n++){let i=t.ranges[n];if(i.offset<=e&&e<=i.offset+i.nLeft)return this.string(i.first+(e-i.offset))}break}return null}fdForGlyph(e){if(!this.topDict.FDSelect)return null;switch(this.topDict.FDSelect.version){case 0:return this.topDict.FDSelect.fds[e];case 3:case 4:let{ranges:t}=this.topDict.FDSelect,n=0,i=t.length-1;for(;n<=i;){let s=n+i>>1;if(e<t[s].first)i=s-1;else if(s<i&&e>=t[s+1].first)n=s+1;else return t[s].fd}default:throw new Error(`Unknown FDSelect version: ${this.topDict.FDSelect.version}`)}}privateDictForGlyph(e){if(this.topDict.FDSelect){let t=this.fdForGlyph(e);return this.topDict.FDArray[t]?this.topDict.FDArray[t].Private:null}return this.version<2?this.topDict.Private:this.topDict.FDArray[0].Private}constructor(e){this.stream=e,this.decode()}}var o3=Am;let VY=new Pe({glyphIndex:R,vertOriginY:Ge});var zY=new Pe({majorVersion:R,minorVersion:R,defaultVertOriginY:Ge,numVertOriginYMetrics:R,metrics:new le(VY,"numVertOriginYMetrics")});let Ia=new Pe({height:Je,width:Je,horiBearingX:Bn,horiBearingY:Bn,horiAdvance:Je,vertBearingX:Bn,vertBearingY:Bn,vertAdvance:Je}),Yu=new Pe({height:Je,width:Je,bearingX:Bn,bearingY:Bn,advance:Je}),ay=new Pe({glyph:R,xOffset:Bn,yOffset:Bn});class ly{}class Bd{}new Dt("version",{1:{metrics:Yu,data:ly},2:{metrics:Yu,data:Bd},5:{data:Bd},6:{metrics:Ia,data:ly},7:{metrics:Ia,data:Bd},8:{metrics:Yu,pad:new pn(Je),numComponents:R,components:new le(ay,"numComponents")},9:{metrics:Ia,pad:new pn(Je),numComponents:R,components:new le(ay,"numComponents")},17:{metrics:Yu,dataLen:fe,data:new _i("dataLen")},18:{metrics:Ia,dataLen:fe,data:new _i("dataLen")},19:{dataLen:fe,data:new _i("dataLen")}});let cy=new Pe({ascender:Bn,descender:Bn,widthMax:Je,caretSlopeNumerator:Bn,caretSlopeDenominator:Bn,caretOffset:Bn,minOriginSB:Bn,minAdvanceSB:Bn,maxBeforeBL:Bn,minAfterBL:Bn,pad:new pn(Bn,2)}),GY=new Pe({glyphCode:R,offset:R}),$Y=new Dt(R,{header:{imageFormat:R,imageDataOffset:fe},1:{offsetArray:new le(fe,r=>r.parent.lastGlyphIndex-r.parent.firstGlyphIndex+1)},2:{imageSize:fe,bigMetrics:Ia},3:{offsetArray:new le(R,r=>r.parent.lastGlyphIndex-r.parent.firstGlyphIndex+1)},4:{numGlyphs:fe,glyphArray:new le(GY,r=>r.numGlyphs+1)},5:{imageSize:fe,bigMetrics:Ia,numGlyphs:fe,glyphCodeArray:new le(R,"numGlyphs")}}),WY=new Pe({firstGlyphIndex:R,lastGlyphIndex:R,subtable:new ce(fe,$Y)}),XY=new Pe({indexSubTableArray:new ce(fe,new le(WY,1),{type:"parent"}),indexTablesSize:fe,numberOfIndexSubTables:fe,colorRef:fe,hori:cy,vert:cy,startGlyphIndex:R,endGlyphIndex:R,ppemX:Je,ppemY:Je,bitDepth:Je,flags:new ri(Je,["horizontal","vertical"])});var HY=new Pe({version:fe,numSizes:fe,sizes:new le(XY,"numSizes")});let YY=new Pe({ppem:R,resolution:R,imageOffsets:new le(new ce(fe,"void"),r=>r.parent.parent.maxp.numGlyphs+1)});var qY=new Pe({version:R,flags:new ri(R,["renderOutlines"]),numImgTables:fe,imageTables:new le(new ce(fe,YY),"numImgTables")});let ZY=new Pe({gid:R,paletteIndex:R}),jY=new Pe({gid:R,firstLayerIndex:R,numLayers:R});var KY=new Pe({version:R,numBaseGlyphRecords:R,baseGlyphRecord:new ce(fe,new le(jY,"numBaseGlyphRecords")),layerRecords:new ce(fe,new le(ZY,"numLayerRecords"),{lazy:!0}),numLayerRecords:R});let JY=new Pe({blue:Je,green:Je,red:Je,alpha:Je});var QY=new Dt(R,{header:{numPaletteEntries:R,numPalettes:R,numColorRecords:R,colorRecords:new ce(fe,new le(JY,"numColorRecords")),colorRecordIndices:new le(R,"numPalettes")},0:{},1:{offsetPaletteTypeArray:new ce(fe,new le(fe,"numPalettes")),offsetPaletteLabelArray:new ce(fe,new le(R,"numPalettes")),offsetPaletteEntryLabelArray:new ce(fe,new le(R,"numPaletteEntries"))}});let _c=new Dt(R,{1:{coordinate:Ge},2:{coordinate:Ge,referenceGlyph:R,baseCoordPoint:R},3:{coordinate:Ge,deviceTable:new ce(R,Rs)}}),eq=new Pe({defaultIndex:R,baseCoordCount:R,baseCoords:new le(new ce(R,_c),"baseCoordCount")}),tq=new Pe({tag:new jt(4),minCoord:new ce(R,_c,{type:"parent"}),maxCoord:new ce(R,_c,{type:"parent"})}),a3=new Pe({minCoord:new ce(R,_c),maxCoord:new ce(R,_c),featMinMaxCount:R,featMinMaxRecords:new le(tq,"featMinMaxCount")}),nq=new Pe({tag:new jt(4),minMax:new ce(R,a3,{type:"parent"})}),rq=new Pe({baseValues:new ce(R,eq),defaultMinMax:new ce(R,a3),baseLangSysCount:R,baseLangSysRecords:new le(nq,"baseLangSysCount")}),iq=new Pe({tag:new jt(4),script:new ce(R,rq,{type:"parent"})}),sq=new le(iq,R),oq=new le(new jt(4),R),uy=new Pe({baseTagList:new ce(R,oq),baseScriptList:new ce(R,sq)});var aq=new Dt(fe,{header:{horizAxis:new ce(R,uy),vertAxis:new ce(R,uy)},65536:{},65537:{itemVariationStore:new ce(fe,wf)}});let lq=new le(R,R),cq=new Pe({coverage:new ce(R,qt),glyphCount:R,attachPoints:new le(new ce(R,lq),"glyphCount")}),uq=new Dt(R,{1:{coordinate:Ge},2:{caretValuePoint:R},3:{coordinate:Ge,deviceTable:new ce(R,Rs)}}),fq=new le(new ce(R,uq),R),hq=new Pe({coverage:new ce(R,qt),ligGlyphCount:R,ligGlyphs:new le(new ce(R,fq),"ligGlyphCount")}),fy=new Pe({markSetTableFormat:R,markSetCount:R,coverage:new le(new ce(fe,qt),"markSetCount")});var dq=new Dt(fe,{header:{glyphClassDef:new ce(R,Vs),attachList:new ce(R,cq),ligCaretList:new ce(R,hq),markAttachClassDef:new ce(R,Vs)},65536:{},65538:{markGlyphSetsDef:new ce(R,fy)},65539:{markGlyphSetsDef:new ce(R,fy),itemVariationStore:new ce(fe,wf)}});let ya=new ri(R,["xPlacement","yPlacement","xAdvance","yAdvance","xPlaDevice","yPlaDevice","xAdvDevice","yAdvDevice"]),pq={xPlacement:Ge,yPlacement:Ge,xAdvance:Ge,yAdvance:Ge,xPlaDevice:new ce(R,Rs,{type:"global",relativeTo:r=>r.rel}),yPlaDevice:new ce(R,Rs,{type:"global",relativeTo:r=>r.rel}),xAdvDevice:new ce(R,Rs,{type:"global",relativeTo:r=>r.rel}),yAdvDevice:new ce(R,Rs,{type:"global",relativeTo:r=>r.rel})};class Xa{buildStruct(e){let t=e;for(;!t[this.key]&&t.parent;)t=t.parent;if(!t[this.key])return;let n={};n.rel=()=>t._startOffset;let i=t[this.key];for(let s in i)i[s]&&(n[s]=pq[s]);return new Pe(n)}size(e,t){return this.buildStruct(t).size(e,t)}decode(e,t){let n=this.buildStruct(t).decode(e,t);return delete n.rel,n}constructor(e="valueFormat"){this.key=e}}let mq=new Pe({secondGlyph:R,value1:new Xa("valueFormat1"),value2:new Xa("valueFormat2")}),gq=new le(mq,R),vq=new Pe({value1:new Xa("valueFormat1"),value2:new Xa("valueFormat2")}),Sc=new Dt(R,{1:{xCoordinate:Ge,yCoordinate:Ge},2:{xCoordinate:Ge,yCoordinate:Ge,anchorPoint:R},3:{xCoordinate:Ge,yCoordinate:Ge,xDeviceTable:new ce(R,Rs),yDeviceTable:new ce(R,Rs)}}),xq=new Pe({entryAnchor:new ce(R,Sc,{type:"parent"}),exitAnchor:new ce(R,Sc,{type:"parent"})}),bq=new Pe({class:R,markAnchor:new ce(R,Sc,{type:"parent"})}),Fd=new le(bq,R),yq=new le(new ce(R,Sc),r=>r.parent.classCount),hy=new le(yq,R),wq=new le(new ce(R,Sc),r=>r.parent.parent.classCount),_q=new le(wq,R),Sq=new le(new ce(R,_q),R),Cc=new Dt("lookupType",{1:new Dt(R,{1:{coverage:new ce(R,qt),valueFormat:ya,value:new Xa},2:{coverage:new ce(R,qt),valueFormat:ya,valueCount:R,values:new en(new Xa,"valueCount")}}),2:new Dt(R,{1:{coverage:new ce(R,qt),valueFormat1:ya,valueFormat2:ya,pairSetCount:R,pairSets:new en(new ce(R,gq),"pairSetCount")},2:{coverage:new ce(R,qt),valueFormat1:ya,valueFormat2:ya,classDef1:new ce(R,Vs),classDef2:new ce(R,Vs),class1Count:R,class2Count:R,classRecords:new en(new en(vq,"class2Count"),"class1Count")}}),3:{format:R,coverage:new ce(R,qt),entryExitCount:R,entryExitRecords:new le(xq,"entryExitCount")},4:{format:R,markCoverage:new ce(R,qt),baseCoverage:new ce(R,qt),classCount:R,markArray:new ce(R,Fd),baseArray:new ce(R,hy)},5:{format:R,markCoverage:new ce(R,qt),ligatureCoverage:new ce(R,qt),classCount:R,markArray:new ce(R,Fd),ligatureArray:new ce(R,Sq)},6:{format:R,mark1Coverage:new ce(R,qt),mark2Coverage:new ce(R,qt),classCount:R,mark1Array:new ce(R,Fd),mark2Array:new ce(R,hy)},7:K_,8:J_,9:{posFormat:R,lookupType:R,extension:new ce(fe,null)}});Cc.versions[9].extension.type=Cc;var Cq=new Dt(fe,{header:{scriptList:new ce(R,q_),featureList:new ce(R,j_),lookupList:new ce(R,new F0(Cc))},65536:{},65537:{featureVariations:new ce(fe,Q_)}});let l3=new le(R,R),Pq=l3,Mq=new Pe({glyph:R,compCount:R,components:new le(R,r=>r.compCount-1)}),Eq=new le(new ce(R,Mq),R),Pp=new Dt("lookupType",{1:new Dt(R,{1:{coverage:new ce(R,qt),deltaGlyphID:Ge},2:{coverage:new ce(R,qt),glyphCount:R,substitute:new en(R,"glyphCount")}}),2:{substFormat:R,coverage:new ce(R,qt),count:R,sequences:new en(new ce(R,l3),"count")},3:{substFormat:R,coverage:new ce(R,qt),count:R,alternateSet:new en(new ce(R,Pq),"count")},4:{substFormat:R,coverage:new ce(R,qt),count:R,ligatureSets:new en(new ce(R,Eq),"count")},5:K_,6:J_,7:{substFormat:R,lookupType:R,extension:new ce(fe,null)},8:{substFormat:R,coverage:new ce(R,qt),backtrackCoverage:new le(new ce(R,qt),"backtrackGlyphCount"),lookaheadGlyphCount:R,lookaheadCoverage:new le(new ce(R,qt),"lookaheadGlyphCount"),glyphCount:R,substitutes:new le(R,"glyphCount")}});Pp.versions[7].extension.type=Pp;var Aq=new Dt(fe,{header:{scriptList:new ce(R,q_),featureList:new ce(R,j_),lookupList:new ce(R,new F0(Pp))},65536:{},65537:{featureVariations:new ce(fe,Q_)}});let Ms=new le(R,R),Tq=new Pe({shrinkageEnableGSUB:new ce(R,Ms),shrinkageDisableGSUB:new ce(R,Ms),shrinkageEnableGPOS:new ce(R,Ms),shrinkageDisableGPOS:new ce(R,Ms),shrinkageJstfMax:new ce(R,new F0(Cc)),extensionEnableGSUB:new ce(R,Ms),extensionDisableGSUB:new ce(R,Ms),extensionEnableGPOS:new ce(R,Ms),extensionDisableGPOS:new ce(R,Ms),extensionJstfMax:new ce(R,new F0(Cc))}),c3=new le(new ce(R,Tq),R),Iq=new Pe({tag:new jt(4),jstfLangSys:new ce(R,c3)}),Lq=new Pe({extenderGlyphs:new ce(R,new le(R,R)),defaultLangSys:new ce(R,c3),langSysCount:R,langSysRecords:new le(Iq,"langSysCount")}),Dq=new Pe({tag:new jt(4),script:new ce(R,Lq,{type:"parent"})});var Oq=new Pe({version:fe,scriptCount:R,scriptList:new le(Dq,"scriptCount")});class Rq{decode(e,t){switch(this.size(0,t)){case 1:return e.readUInt8();case 2:return e.readUInt16BE();case 3:return e.readUInt24BE();case 4:return e.readUInt32BE()}}size(e,t){return Ei(this._size,null,t)}constructor(e){this._size=e}}let Bq=new Pe({entry:new Rq(r=>((r.parent.entryFormat&48)>>4)+1),outerIndex:r=>r.entry>>(r.parent.entryFormat&15)+1,innerIndex:r=>r.entry&(1<<(r.parent.entryFormat&15)+1)-1}),Nd=new Pe({entryFormat:R,mapCount:R,mapData:new le(Bq,"mapCount")});var Fq=new Pe({majorVersion:R,minorVersion:R,itemVariationStore:new ce(fe,wf),advanceWidthMapping:new ce(fe,Nd),LSBMapping:new ce(fe,Nd),RSBMapping:new ce(fe,Nd)});let Nq=new Pe({format:fe,length:fe,offset:fe}),kq=new Pe({reserved:new pn(R,2),cbSignature:fe,signature:new _i("cbSignature")});var Uq=new Pe({ulVersion:fe,usNumSigs:R,usFlag:R,signatures:new le(Nq,"usNumSigs"),signatureBlocks:new le(kq,"usNumSigs")});let Vq=new Pe({rangeMaxPPEM:R,rangeGaspBehavior:new ri(R,["grayscale","gridfit","symmetricSmoothing","symmetricGridfit"])});var zq=new Pe({version:R,numRanges:R,gaspRanges:new le(Vq,"numRanges")});let Gq=new Pe({pixelSize:Je,maximumWidth:Je,widths:new le(Je,r=>r.parent.parent.maxp.numGlyphs)});var $q=new Pe({version:R,numRecords:Ge,sizeDeviceRecord:po,records:new le(Gq,"numRecords")});let Wq=new Pe({left:R,right:R,value:Ge}),dy=new Pe({firstGlyph:R,nGlyphs:R,offsets:new le(R,"nGlyphs"),max:r=>r.offsets.length&&Math.max.apply(Math,r.offsets)}),Xq=new Pe({off:r=>r._startOffset-r.parent.parent._startOffset,len:r=>((r.parent.leftTable.max-r.off)/r.parent.rowWidth+1)*(r.parent.rowWidth/2),values:new en(Ge,"len")}),py=new Dt("format",{0:{nPairs:R,searchRange:R,entrySelector:R,rangeShift:R,pairs:new le(Wq,"nPairs")},2:{rowWidth:R,leftTable:new ce(R,dy,{type:"parent"}),rightTable:new ce(R,dy,{type:"parent"}),array:new ce(R,Xq,{type:"parent"})},3:{glyphCount:R,kernValueCount:Je,leftClassCount:Je,rightClassCount:Je,flags:Je,kernValue:new le(Ge,"kernValueCount"),leftClass:new le(Je,"glyphCount"),rightClass:new le(Je,"glyphCount"),kernIndex:new le(Je,r=>r.leftClassCount*r.rightClassCount)}}),my=new Dt("version",{0:{subVersion:R,length:R,format:Je,coverage:new ri(Je,["horizontal","minimum","crossStream","override"]),subtable:py,padding:new pn(Je,r=>r.length-r._currentOffset)},1:{length:fe,coverage:new ri(Je,[null,null,null,null,null,"variation","crossStream","vertical"]),format:Je,tupleIndex:R,subtable:py,padding:new pn(Je,r=>r.length-r._currentOffset)}});var Hq=new Dt(R,{0:{nTables:R,tables:new le(my,"nTables")},1:{reserved:new pn(R),nTables:fe,tables:new le(my,"nTables")}}),Yq=new Pe({version:R,numGlyphs:R,yPels:new le(Je,"numGlyphs")}),qq=new Pe({version:R,fontNumber:fe,pitch:R,xHeight:R,style:R,typeFamily:R,capHeight:R,symbolSet:R,typeface:new jt(16),characterComplement:new jt(8),fileName:new jt(6),strokeWeight:new jt(1),widthType:new jt(1),serifStyle:Je,reserved:new pn(Je)});let Zq=new Pe({bCharSet:Je,xRatio:Je,yStartRatio:Je,yEndRatio:Je}),jq=new Pe({yPelHeight:R,yMax:Ge,yMin:Ge}),Kq=new Pe({recs:R,startsz:Je,endsz:Je,entries:new le(jq,"recs")});var Jq=new Pe({version:R,numRecs:R,numRatios:R,ratioRanges:new le(Zq,"numRatios"),offsets:new le(R,"numRatios"),groups:new le(Kq,"numRecs")}),Qq=new Pe({version:R,ascent:Ge,descent:Ge,lineGap:Ge,advanceHeightMax:Ge,minTopSideBearing:Ge,minBottomSideBearing:Ge,yMaxExtent:Ge,caretSlopeRise:Ge,caretSlopeRun:Ge,caretOffset:Ge,reserved:new pn(Ge,4),metricDataFormat:Ge,numberOfMetrics:R});let eZ=new Pe({advance:R,bearing:Ge});var tZ=new Pe({metrics:new en(eZ,r=>r.parent.vhea.numberOfMetrics),bearings:new en(Ge,r=>r.parent.maxp.numGlyphs-r.parent.vhea.numberOfMetrics)});let gy=new Fo(16,"BE",14),nZ=new Pe({fromCoord:gy,toCoord:gy}),rZ=new Pe({pairCount:R,correspondence:new le(nZ,"pairCount")});var iZ=new Pe({version:Pn,axisCount:fe,segment:new le(rZ,"axisCount")});class sZ{getItem(e){if(this._items[e]==null){let t=this.stream.pos;this.stream.pos=this.base+this.type.size(null,this.parent)*e,this._items[e]=this.type.decode(this.stream,this.parent),this.stream.pos=t}return this._items[e]}inspect(){return`[UnboundedArray ${this.type.constructor.name}]`}constructor(e,t,n){this.type=e,this.stream=t,this.parent=n,this.base=this.stream.pos,this._items=[]}}class wi extends le{decode(e,t){return new sZ(this.type,e,t)}constructor(e){super(e,0)}}let $s=function(r=R){class e{decode(a,u){return u=u.parent.parent,this.type.decode(a,u)}size(a,u){return u=u.parent.parent,this.type.size(a,u)}encode(a,u,f){return f=f.parent.parent,this.type.encode(a,u,f)}constructor(a){this.type=a}}r=new e(r);let t=new Pe({unitSize:R,nUnits:R,searchRange:R,entrySelector:R,rangeShift:R}),n=new Pe({lastGlyph:R,firstGlyph:R,value:r}),i=new Pe({lastGlyph:R,firstGlyph:R,values:new ce(R,new le(r,o=>o.lastGlyph-o.firstGlyph+1),{type:"parent"})}),s=new Pe({glyph:R,value:r});return new Dt(R,{0:{values:new wi(r)},2:{binarySearchHeader:t,segments:new le(n,o=>o.binarySearchHeader.nUnits)},4:{binarySearchHeader:t,segments:new le(i,o=>o.binarySearchHeader.nUnits)},6:{binarySearchHeader:t,segments:new le(s,o=>o.binarySearchHeader.nUnits)},8:{firstGlyph:R,count:R,values:new le(r,"count")}})};function qu(r={},e=R){let t=Object.assign({newState:R,flags:R},r),n=new Pe(t),i=new wi(new le(R,o=>o.nClasses));return new Pe({nClasses:fe,classTable:new ce(fe,new $s(e)),stateArray:new ce(fe,i),entryTable:new ce(fe,new wi(n))})}function oZ(r={},e=R){let t=new Pe({version(){return 8},firstGlyph:R,values:new le(Je,R)}),n=Object.assign({newStateOffset:R,newState:a=>(a.newStateOffset-(a.parent.stateArray.base-a.parent._startOffset))/a.parent.nClasses,flags:R},r),i=new Pe(n),s=new wi(new le(Je,a=>a.nClasses));return new Pe({nClasses:R,classTable:new ce(R,t),stateArray:new ce(R,s),entryTable:new ce(R,new wi(i))})}let aZ=new Dt("format",{0:{deltas:new le(Ge,32)},1:{deltas:new le(Ge,32),mappingData:new $s(R)},2:{standardGlyph:R,controlPoints:new le(R,32)},3:{standardGlyph:R,controlPoints:new le(R,32),mappingData:new $s(R)}});var lZ=new Pe({version:Pn,format:R,defaultBaseline:R,subtable:aZ});let cZ=new Pe({setting:R,nameIndex:Ge,name:r=>r.parent.parent.parent.name.records.fontFeatures[r.nameIndex]}),uZ=new Pe({feature:R,nSettings:R,settingTable:new ce(fe,new le(cZ,"nSettings"),{type:"parent"}),featureFlags:new ri(Je,[null,null,null,null,null,null,"hasDefault","exclusive"]),defaultSetting:Je,nameIndex:Ge,name:r=>r.parent.parent.name.records.fontFeatures[r.nameIndex]});var fZ=new Pe({version:Pn,featureNameCount:R,reserved1:new pn(R),reserved2:new pn(fe),featureNames:new le(uZ,"featureNameCount")});let hZ=new Pe({axisTag:new jt(4),minValue:Pn,defaultValue:Pn,maxValue:Pn,flags:R,nameID:R,name:r=>r.parent.parent.name.records.fontFeatures[r.nameID]}),dZ=new Pe({nameID:R,name:r=>r.parent.parent.name.records.fontFeatures[r.nameID],flags:R,coord:new le(Pn,r=>r.parent.axisCount),postscriptNameID:new L0(R,r=>r.parent.instanceSize-r._currentOffset>0)});var pZ=new Pe({version:Pn,offsetToData:R,countSizePairs:R,axisCount:R,axisSize:R,instanceCount:R,instanceSize:R,axis:new le(hZ,"axisCount"),instance:new le(dZ,"instanceCount")});let mZ=new Fo(16,"BE",14);class gZ{static decode(e,t){return t.flags?e.readUInt32BE():e.readUInt16BE()*2}}let vZ=new Pe({version:R,reserved:new pn(R),axisCount:R,globalCoordCount:R,globalCoords:new ce(fe,new le(new le(mZ,"axisCount"),"globalCoordCount")),glyphCount:R,flags:R,offsetToData:fe,offsets:new le(new ce(gZ,"void",{relativeTo:r=>r.offsetToData,allowNull:!1}),r=>r.glyphCount+1)});var xZ=vZ;let bZ=new Pe({length:R,coverage:R,subFeatureFlags:fe,stateTable:new oZ}),yZ=new Pe({justClass:fe,beforeGrowLimit:Pn,beforeShrinkLimit:Pn,afterGrowLimit:Pn,afterShrinkLimit:Pn,growFlags:R,shrinkFlags:R}),wZ=new le(yZ,fe),_Z=new Dt("actionType",{0:{lowerLimit:Pn,upperLimit:Pn,order:R,glyphs:new le(R,R)},1:{addGlyph:R},2:{substThreshold:Pn,addGlyph:R,substGlyph:R},3:{},4:{variationAxis:fe,minimumLimit:Pn,noStretchValue:Pn,maximumLimit:Pn},5:{flags:R,glyph:R}}),SZ=new Pe({actionClass:R,actionType:R,actionLength:fe,actionData:_Z,padding:new pn(Je,r=>r.actionLength-r._currentOffset)}),CZ=new le(SZ,fe),PZ=new Pe({lookupTable:new $s(new ce(R,CZ))}),vy=new Pe({classTable:new ce(R,bZ,{type:"parent"}),wdcOffset:R,postCompensationTable:new ce(R,PZ,{type:"parent"}),widthDeltaClusters:new $s(new ce(R,wZ,{type:"parent",relativeTo:r=>r.wdcOffset}))});var MZ=new Pe({version:fe,format:R,horizontal:new ce(R,vy),vertical:new ce(R,vy)});let EZ={action:R},AZ={markIndex:R,currentIndex:R},TZ={currentInsertIndex:R,markedInsertIndex:R},IZ=new Pe({items:new wi(new ce(fe,new $s))}),LZ=new Dt("type",{0:{stateTable:new qu},1:{stateTable:new qu(AZ),substitutionTable:new ce(fe,IZ)},2:{stateTable:new qu(EZ),ligatureActions:new ce(fe,new wi(fe)),components:new ce(fe,new wi(R)),ligatureList:new ce(fe,new wi(R))},4:{lookupTable:new $s},5:{stateTable:new qu(TZ),insertionActions:new ce(fe,new wi(R))}}),DZ=new Pe({length:fe,coverage:Us,type:Je,subFeatureFlags:fe,table:LZ,padding:new pn(Je,r=>r.length-r._currentOffset)}),OZ=new Pe({featureType:R,featureSetting:R,enableFlags:fe,disableFlags:fe}),RZ=new Pe({defaultFlags:fe,chainLength:fe,nFeatureEntries:fe,nSubtables:fe,features:new le(OZ,"nFeatureEntries"),subtables:new le(DZ,"nSubtables")});var BZ=new Pe({version:R,unused:new pn(R),nChains:fe,chains:new le(RZ,"nChains")});let FZ=new Pe({left:Ge,top:Ge,right:Ge,bottom:Ge});var NZ=new Pe({version:Pn,format:R,lookupTable:new $s(FZ)});let St={};var N0=St;St.cmap=FH;St.head=NH;St.hhea=kH;St.hmtx=VH;St.maxp=zH;St.name=qH;St["OS/2"]=ZH;St.post=jH;St.fpgm=JH;St.loca=QH;St.prep=eY;St["cvt "]=KH;St.glyf=tY;St["CFF "]=o3;St.CFF2=o3;St.VORG=zY;St.EBLC=HY;St.CBLC=St.EBLC;St.sbix=qY;St.COLR=KY;St.CPAL=QY;St.BASE=aq;St.GDEF=dq;St.GPOS=Cq;St.GSUB=Aq;St.JSTF=Oq;St.HVAR=Fq;St.DSIG=Uq;St.gasp=zq;St.hdmx=$q;St.kern=Hq;St.LTSH=Yq;St.PCLT=qq;St.VDMX=Jq;St.vhea=Qq;St.vmtx=tZ;St.avar=iZ;St.bsln=lZ;St.feat=fZ;St.fvar=pZ;St.gvar=xZ;St.just=MZ;St.morx=BZ;St.opbd=NZ;let kZ=new Pe({tag:new jt(4),checkSum:fe,offset:new ce(fe,"void",{type:"global"}),length:fe}),Tm=new Pe({tag:new jt(4),numTables:R,searchRange:R,entrySelector:R,rangeShift:R,tables:new le(kZ,"numTables")});Tm.process=function(){let r={};for(let e of this.tables)r[e.tag]=e;this.tables=r};Tm.preEncode=function(){if(!Array.isArray(this.tables)){let t=[];for(let n in this.tables){let i=this.tables[n];i&&t.push({tag:n,checkSum:0,offset:new yp(N0[n],i),length:N0[n].size(i)})}this.tables=t}this.tag="true",this.numTables=this.tables.length;let r=Math.floor(Math.log(this.numTables)/Math.LN2),e=Math.pow(2,r);this.searchRange=e*16,this.entrySelector=Math.log(e)/Math.LN2,this.rangeShift=this.numTables*16-this.searchRange};var u3=Tm;function f0(r,e){let t=0,n=r.length-1;for(;t<=n;){let i=t+n>>1,s=e(r[i]);if(s<0)n=i-1;else if(s>0)t=i+1;else return i}return-1}function Ca(r,e){let t=[];for(;r<e;)t.push(r++);return t}const _f=new TextDecoder("ascii"),xy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",jl=new Uint8Array(256);for(let r=0;r<xy.length;r++)jl[xy.charCodeAt(r)]=r;function Im(r){let e=r.length*.75;r[r.length-1]==="="&&(e--,r[r.length-2]==="="&&e--);let t=new Uint8Array(e),n=0;for(let i=0,s=r.length;i<s;i+=4){let o=jl[r.charCodeAt(i)],a=jl[r.charCodeAt(i+1)],u=jl[r.charCodeAt(i+2)],f=jl[r.charCodeAt(i+3)];t[n++]=o<<2|a>>4,t[n++]=(a&15)<<4|u>>2,t[n++]=(u&3)<<6|f&63}return t}class Lm{findSubtable(e,t){for(let[n,i]of t)for(let s of e.tables)if(s.platformID===n&&s.encodingID===i)return s.table;return null}lookup(e,t){if(this.encoding)e=this.encoding.get(e)||e;else if(t){let i=this.getVariationSelector(e,t);if(i)return i}let n=this.cmap;switch(n.version){case 0:return n.codeMap.get(e)||0;case 4:{let i=0,s=n.segCount-1;for(;i<=s;){let o=i+s>>1;if(e<n.startCode.get(o))s=o-1;else if(e>n.endCode.get(o))i=o+1;else{let a=n.idRangeOffset.get(o),u;if(a===0)u=e+n.idDelta.get(o);else{let f=a/2+(e-n.startCode.get(o))-(n.segCount-o);u=n.glyphIndexArray.get(f)||0,u!==0&&(u+=n.idDelta.get(o))}return u&65535}}return 0}case 8:throw new Error("TODO: cmap format 8");case 6:case 10:return n.glyphIndices.get(e-n.firstCode)||0;case 12:case 13:{let i=0,s=n.nGroups-1;for(;i<=s;){let o=i+s>>1,a=n.groups.get(o);if(e<a.startCharCode)s=o-1;else if(e>a.endCharCode)i=o+1;else return n.version===12?a.glyphID+(e-a.startCharCode):a.glyphID}return 0}case 14:throw new Error("TODO: cmap format 14");default:throw new Error(`Unknown cmap format ${n.version}`)}}getVariationSelector(e,t){if(!this.uvs)return 0;let n=this.uvs.varSelectors.toArray(),i=f0(n,o=>t-o.varSelector),s=n[i];return i!==-1&&s.defaultUVS&&(i=f0(s.defaultUVS,o=>e<o.startUnicodeValue?-1:e>o.startUnicodeValue+o.additionalCount?1:0)),i!==-1&&s.nonDefaultUVS&&(i=f0(s.nonDefaultUVS,o=>e-o.unicodeValue),i!==-1)?s.nonDefaultUVS[i].glyphID:0}getCharacterSet(){let e=this.cmap;switch(e.version){case 0:return Ca(0,e.codeMap.length);case 4:{let t=[],n=e.endCode.toArray();for(let i=0;i<n.length;i++){let s=n[i]+1,o=e.startCode.get(i);t.push(...Ca(o,s))}return t}case 8:throw new Error("TODO: cmap format 8");case 6:case 10:return Ca(e.firstCode,e.firstCode+e.glyphIndices.length);case 12:case 13:{let t=[];for(let n of e.groups.toArray())t.push(...Ca(n.startCharCode,n.endCharCode+1));return t}case 14:throw new Error("TODO: cmap format 14");default:throw new Error(`Unknown cmap format ${e.version}`)}}codePointsForGlyph(e){let t=this.cmap;switch(t.version){case 0:{let i=[];for(let s=0;s<256;s++)t.codeMap.get(s)===e&&i.push(s);return i}case 4:{let i=[];for(let s=0;s<t.segCount;s++){let o=t.endCode.get(s),a=t.startCode.get(s),u=t.idRangeOffset.get(s),f=t.idDelta.get(s);for(var n=a;n<=o;n++){let h=0;if(u===0)h=n+f;else{let p=u/2+(n-a)-(t.segCount-s);h=t.glyphIndexArray.get(p)||0,h!==0&&(h+=f)}h===e&&i.push(n)}}return i}case 12:{let i=[];for(let s of t.groups.toArray())e>=s.glyphID&&e<=s.glyphID+(s.endCharCode-s.startCharCode)&&i.push(s.startCharCode+(e-s.glyphID));return i}case 13:{let i=[];for(let s of t.groups.toArray())e===s.glyphID&&i.push(...Ca(s.startCharCode,s.endCharCode+1));return i}default:throw new Error(`Unknown cmap format ${t.version}`)}}constructor(e){if(this.encoding=null,this.cmap=this.findSubtable(e,[[3,10],[0,6],[0,4],[3,1],[0,3],[0,2],[0,1],[0,0]]),!this.cmap)for(let t of e.tables){let n=$_(t.platformID,t.encodingID,t.table.language-1),i=WH(n);i&&(this.cmap=t.table,this.encoding=i)}if(!this.cmap)throw new Error("Could not find a supported cmap table");this.uvs=this.findSubtable(e,[[0,5]]),this.uvs&&this.uvs.version!==14&&(this.uvs=null)}}Qn([er],Lm.prototype,"getCharacterSet",null);Qn([er],Lm.prototype,"codePointsForGlyph",null);class UZ{process(e,t){for(let n=0;n<e.length-1;n++){let i=e[n].id,s=e[n+1].id;t[n].xAdvance+=this.getKerning(i,s)}}getKerning(e,t){let n=0;for(let i of this.kern.tables){if(i.coverage.crossStream)continue;switch(i.version){case 0:if(!i.coverage.horizontal)continue;break;case 1:if(i.coverage.vertical||i.coverage.variation)continue;break;default:throw new Error(`Unsupported kerning table version ${i.version}`)}let s=0,o=i.subtable;switch(i.format){case 0:let a=f0(o.pairs,function(p){return e-p.left||t-p.right});a>=0&&(s=o.pairs[a].value);break;case 2:let u=0,f=0;e>=o.leftTable.firstGlyph&&e<o.leftTable.firstGlyph+o.leftTable.nGlyphs?u=o.leftTable.offsets[e-o.leftTable.firstGlyph]:u=o.array.off,t>=o.rightTable.firstGlyph&&t<o.rightTable.firstGlyph+o.rightTable.nGlyphs&&(f=o.rightTable.offsets[t-o.rightTable.firstGlyph]);let h=(u+f-o.array.off)/2;s=o.array.values.get(h);break;case 3:if(e>=o.glyphCount||t>=o.glyphCount)return 0;s=o.kernValue[o.kernIndex[o.leftClass[e]*o.rightClassCount+o.rightClass[t]]];break;default:throw new Error(`Unsupported kerning sub-table format ${i.format}`)}i.coverage.override?n=s:n+=s}return n}constructor(e){this.kern=e.kern}}class VZ{positionGlyphs(e,t){let n=0,i=0;for(let s=0;s<e.length;s++)e[s].isMark?i=s:(n!==i&&this.positionCluster(e,t,n,i),n=i=s);return n!==i&&this.positionCluster(e,t,n,i),t}positionCluster(e,t,n,i){let s=e[n],o=s.cbox.copy();s.codePoints.length>1&&(o.minX+=(s.codePoints.length-1)*o.width/s.codePoints.length);let a=-t[n].xAdvance,u=0,f=this.font.unitsPerEm/16;for(let h=n+1;h<=i;h++){let p=e[h],g=p.cbox,b=t[h],C=this.getCombiningClass(p.codePoints[0]);if(C!=="Not_Reordered"){switch(b.xOffset=b.yOffset=0,C){case"Double_Above":case"Double_Below":b.xOffset+=o.minX-g.width/2-g.minX;break;case"Attached_Below_Left":case"Below_Left":case"Above_Left":b.xOffset+=o.minX-g.minX;break;case"Attached_Above_Right":case"Below_Right":case"Above_Right":b.xOffset+=o.maxX-g.width-g.minX;break;default:b.xOffset+=o.minX+(o.width-g.width)/2-g.minX}switch(C){case"Double_Below":case"Below_Left":case"Below":case"Below_Right":case"Attached_Below_Left":case"Attached_Below":(C==="Attached_Below_Left"||C==="Attached_Below")&&(o.minY+=f),b.yOffset=-o.minY-g.maxY,o.minY+=g.height;break;case"Double_Above":case"Above_Left":case"Above":case"Above_Right":case"Attached_Above":case"Attached_Above_Right":(C==="Attached_Above"||C==="Attached_Above_Right")&&(o.maxY+=f),b.yOffset=o.maxY-g.minY,o.maxY+=g.height;break}b.xAdvance=b.yAdvance=0,b.xOffset+=a,b.yOffset+=u}else a-=b.xAdvance,u-=b.yAdvance}}getCombiningClass(e){let t=mH(e);if((e&-256)===3584){if(t==="Not_Reordered")switch(e){case 3633:case 3636:case 3637:case 3638:case 3639:case 3655:case 3660:case 3645:case 3662:return"Above_Right";case 3761:case 3764:case 3765:case 3766:case 3767:case 3771:case 3788:case 3789:return"Above";case 3772:return"Below"}else if(e===3642)return"Below_Right"}switch(t){case"CCC10":case"CCC11":case"CCC12":case"CCC13":case"CCC14":case"CCC15":case"CCC16":case"CCC17":case"CCC18":case"CCC20":case"CCC22":return"Below";case"CCC23":return"Attached_Above";case"CCC24":return"Above_Right";case"CCC25":case"CCC19":return"Above_Left";case"CCC26":return"Above";case"CCC21":break;case"CCC27":case"CCC28":case"CCC30":case"CCC31":case"CCC33":case"CCC34":case"CCC35":case"CCC36":return"Above";case"CCC29":case"CCC32":return"Below";case"CCC103":return"Below_Right";case"CCC107":return"Above_Right";case"CCC118":return"Below";case"CCC122":return"Above";case"CCC129":case"CCC132":return"Below";case"CCC130":return"Above"}return t}constructor(e){this.font=e}}class Ws{get width(){return this.maxX-this.minX}get height(){return this.maxY-this.minY}addPoint(e,t){Math.abs(e)!==1/0&&(e<this.minX&&(this.minX=e),e>this.maxX&&(this.maxX=e)),Math.abs(t)!==1/0&&(t<this.minY&&(this.minY=t),t>this.maxY&&(this.maxY=t))}copy(){return new Ws(this.minX,this.minY,this.maxX,this.maxY)}constructor(e=1/0,t=1/0,n=-1/0,i=-1/0){this.minX=e,this.minY=t,this.maxX=n,this.maxY=i}}const Ha={Caucasian_Albanian:"aghb",Arabic:"arab",Imperial_Aramaic:"armi",Armenian:"armn",Avestan:"avst",Balinese:"bali",Bamum:"bamu",Bassa_Vah:"bass",Batak:"batk",Bengali:["bng2","beng"],Bopomofo:"bopo",Brahmi:"brah",Braille:"brai",Buginese:"bugi",Buhid:"buhd",Chakma:"cakm",Canadian_Aboriginal:"cans",Carian:"cari",Cham:"cham",Cherokee:"cher",Coptic:"copt",Cypriot:"cprt",Cyrillic:"cyrl",Devanagari:["dev2","deva"],Deseret:"dsrt",Duployan:"dupl",Egyptian_Hieroglyphs:"egyp",Elbasan:"elba",Ethiopic:"ethi",Georgian:"geor",Glagolitic:"glag",Gothic:"goth",Grantha:"gran",Greek:"grek",Gujarati:["gjr2","gujr"],Gurmukhi:["gur2","guru"],Hangul:"hang",Han:"hani",Hanunoo:"hano",Hebrew:"hebr",Hiragana:"hira",Pahawh_Hmong:"hmng",Katakana_Or_Hiragana:"hrkt",Old_Italic:"ital",Javanese:"java",Kayah_Li:"kali",Katakana:"kana",Kharoshthi:"khar",Khmer:"khmr",Khojki:"khoj",Kannada:["knd2","knda"],Kaithi:"kthi",Tai_Tham:"lana",Lao:"lao ",Latin:"latn",Lepcha:"lepc",Limbu:"limb",Linear_A:"lina",Linear_B:"linb",Lisu:"lisu",Lycian:"lyci",Lydian:"lydi",Mahajani:"mahj",Mandaic:"mand",Manichaean:"mani",Mende_Kikakui:"mend",Meroitic_Cursive:"merc",Meroitic_Hieroglyphs:"mero",Malayalam:["mlm2","mlym"],Modi:"modi",Mongolian:"mong",Mro:"mroo",Meetei_Mayek:"mtei",Myanmar:["mym2","mymr"],Old_North_Arabian:"narb",Nabataean:"nbat",Nko:"nko ",Ogham:"ogam",Ol_Chiki:"olck",Old_Turkic:"orkh",Oriya:["ory2","orya"],Osmanya:"osma",Palmyrene:"palm",Pau_Cin_Hau:"pauc",Old_Permic:"perm",Phags_Pa:"phag",Inscriptional_Pahlavi:"phli",Psalter_Pahlavi:"phlp",Phoenician:"phnx",Miao:"plrd",Inscriptional_Parthian:"prti",Rejang:"rjng",Runic:"runr",Samaritan:"samr",Old_South_Arabian:"sarb",Saurashtra:"saur",Shavian:"shaw",Sharada:"shrd",Siddham:"sidd",Khudawadi:"sind",Sinhala:"sinh",Sora_Sompeng:"sora",Sundanese:"sund",Syloti_Nagri:"sylo",Syriac:"syrc",Tagbanwa:"tagb",Takri:"takr",Tai_Le:"tale",New_Tai_Lue:"talu",Tamil:["tml2","taml"],Tai_Viet:"tavt",Telugu:["tel2","telu"],Tifinagh:"tfng",Tagalog:"tglg",Thaana:"thaa",Thai:"thai",Tibetan:"tibt",Tirhuta:"tirh",Ugaritic:"ugar",Vai:"vai ",Warang_Citi:"wara",Old_Persian:"xpeo",Cuneiform:"xsux",Yi:"yi  ",Inherited:"zinh",Common:"zyyy",Unknown:"zzzz"},Mp={};for(let r in Ha){let e=Ha[r];if(Array.isArray(e))for(let t of e)Mp[t]=r;else Mp[e]=r}function zZ(r){return Mp[r]}function GZ(r){let e=r.length,t=0;for(;t<e;){let n=r.charCodeAt(t++);if(55296<=n&&n<=56319&&t<e){let s=r.charCodeAt(t);56320<=s&&s<=57343&&(t++,n=((n&1023)<<10)+(s&1023)+65536)}let i=B_(n);if(i!=="Common"&&i!=="Inherited"&&i!=="Unknown")return Ha[i]}return Ha.Unknown}function $Z(r){for(let e=0;e<r.length;e++){let t=r[e],n=B_(t);if(n!=="Common"&&n!=="Inherited"&&n!=="Unknown")return Ha[n]}return Ha.Unknown}const WZ={arab:!0,hebr:!0,syrc:!0,thaa:!0,cprt:!0,khar:!0,phnx:!0,"nko ":!0,lydi:!0,avst:!0,armi:!0,phli:!0,prti:!0,sarb:!0,orkh:!0,samr:!0,mand:!0,merc:!0,mero:!0,mani:!0,mend:!0,nbat:!0,narb:!0,palm:!0,phlp:!0};function f3(r){return WZ[r]?"rtl":"ltr"}class XZ{get advanceWidth(){let e=0;for(let t of this.positions)e+=t.xAdvance;return e}get advanceHeight(){let e=0;for(let t of this.positions)e+=t.yAdvance;return e}get bbox(){let e=new Ws,t=0,n=0;for(let i=0;i<this.glyphs.length;i++){let s=this.glyphs[i],o=this.positions[i],a=s.bbox;e.addPoint(a.minX+t+o.xOffset,a.minY+n+o.yOffset),e.addPoint(a.maxX+t+o.xOffset,a.maxY+n+o.yOffset),t+=o.xAdvance,n+=o.yAdvance}return e}constructor(e,t,n,i,s){if(this.glyphs=e,this.positions=null,this.script=n,this.language=i||null,this.direction=s||f3(n),this.features={},Array.isArray(t))for(let o of t)this.features[o]=!0;else typeof t=="object"&&(this.features=t)}}class HZ{constructor(e=0,t=0,n=0,i=0){this.xAdvance=e,this.yAdvance=t,this.xOffset=n,this.yOffset=i}}const go={allTypographicFeatures:{code:0,exclusive:!1,allTypeFeatures:0},ligatures:{code:1,exclusive:!1,requiredLigatures:0,commonLigatures:2,rareLigatures:4,rebusPictures:8,diphthongLigatures:10,squaredLigatures:12,abbrevSquaredLigatures:14,symbolLigatures:16,contextualLigatures:18,historicalLigatures:20},cursiveConnection:{code:2,exclusive:!0,unconnected:0,partiallyConnected:1,cursive:2},letterCase:{code:3,exclusive:!0},verticalSubstitution:{code:4,exclusive:!1,substituteVerticalForms:0},linguisticRearrangement:{code:5,exclusive:!1,linguisticRearrangement:0},numberSpacing:{code:6,exclusive:!0,monospacedNumbers:0,proportionalNumbers:1,thirdWidthNumbers:2,quarterWidthNumbers:3},smartSwash:{code:8,exclusive:!1,wordInitialSwashes:0,wordFinalSwashes:2,nonFinalSwashes:8},diacritics:{code:9,exclusive:!0,showDiacritics:0,hideDiacritics:1,decomposeDiacritics:2},verticalPosition:{code:10,exclusive:!0,normalPosition:0,superiors:1,inferiors:2,ordinals:3,scientificInferiors:4},fractions:{code:11,exclusive:!0,noFractions:0,verticalFractions:1,diagonalFractions:2},overlappingCharacters:{code:13,exclusive:!1,preventOverlap:0},typographicExtras:{code:14,exclusive:!1,slashedZero:4},mathematicalExtras:{code:15,exclusive:!1,mathematicalGreek:10},ornamentSets:{code:16,exclusive:!0,noOrnaments:0,dingbats:1,piCharacters:2,fleurons:3,decorativeBorders:4,internationalSymbols:5,mathSymbols:6},characterAlternatives:{code:17,exclusive:!0,noAlternates:0},designComplexity:{code:18,exclusive:!0,designLevel1:0,designLevel2:1,designLevel3:2,designLevel4:3,designLevel5:4},styleOptions:{code:19,exclusive:!0,noStyleOptions:0,displayText:1,engravedText:2,illuminatedCaps:3,titlingCaps:4,tallCaps:5},characterShape:{code:20,exclusive:!0,traditionalCharacters:0,simplifiedCharacters:1,JIS1978Characters:2,JIS1983Characters:3,JIS1990Characters:4,traditionalAltOne:5,traditionalAltTwo:6,traditionalAltThree:7,traditionalAltFour:8,traditionalAltFive:9,expertCharacters:10,JIS2004Characters:11,hojoCharacters:12,NLCCharacters:13,traditionalNamesCharacters:14},numberCase:{code:21,exclusive:!0,lowerCaseNumbers:0,upperCaseNumbers:1},textSpacing:{code:22,exclusive:!0,proportionalText:0,monospacedText:1,halfWidthText:2,thirdWidthText:3,quarterWidthText:4,altProportionalText:5,altHalfWidthText:6},transliteration:{code:23,exclusive:!0,noTransliteration:0},annotation:{code:24,exclusive:!0,noAnnotation:0,boxAnnotation:1,roundedBoxAnnotation:2,circleAnnotation:3,invertedCircleAnnotation:4,parenthesisAnnotation:5,periodAnnotation:6,romanNumeralAnnotation:7,diamondAnnotation:8,invertedBoxAnnotation:9,invertedRoundedBoxAnnotation:10},kanaSpacing:{code:25,exclusive:!0,fullWidthKana:0,proportionalKana:1},ideographicSpacing:{code:26,exclusive:!0,fullWidthIdeographs:0,proportionalIdeographs:1,halfWidthIdeographs:2},unicodeDecomposition:{code:27,exclusive:!1,canonicalComposition:0,compatibilityComposition:2,transcodingComposition:4},rubyKana:{code:28,exclusive:!1,rubyKana:2},CJKSymbolAlternatives:{code:29,exclusive:!0,noCJKSymbolAlternatives:0,CJKSymbolAltOne:1,CJKSymbolAltTwo:2,CJKSymbolAltThree:3,CJKSymbolAltFour:4,CJKSymbolAltFive:5},ideographicAlternatives:{code:30,exclusive:!0,noIdeographicAlternatives:0,ideographicAltOne:1,ideographicAltTwo:2,ideographicAltThree:3,ideographicAltFour:4,ideographicAltFive:5},CJKVerticalRomanPlacement:{code:31,exclusive:!0,CJKVerticalRomanCentered:0,CJKVerticalRomanHBaseline:1},italicCJKRoman:{code:32,exclusive:!1,CJKItalicRoman:2},caseSensitiveLayout:{code:33,exclusive:!1,caseSensitiveLayout:0,caseSensitiveSpacing:2},alternateKana:{code:34,exclusive:!1,alternateHorizKana:0,alternateVertKana:2},stylisticAlternatives:{code:35,exclusive:!1,noStylisticAlternates:0,stylisticAltOne:2,stylisticAltTwo:4,stylisticAltThree:6,stylisticAltFour:8,stylisticAltFive:10,stylisticAltSix:12,stylisticAltSeven:14,stylisticAltEight:16,stylisticAltNine:18,stylisticAltTen:20,stylisticAltEleven:22,stylisticAltTwelve:24,stylisticAltThirteen:26,stylisticAltFourteen:28,stylisticAltFifteen:30,stylisticAltSixteen:32,stylisticAltSeventeen:34,stylisticAltEighteen:36,stylisticAltNineteen:38,stylisticAltTwenty:40},contextualAlternates:{code:36,exclusive:!1,contextualAlternates:0,swashAlternates:2,contextualSwashAlternates:4},lowerCase:{code:37,exclusive:!0,defaultLowerCase:0,lowerCaseSmallCaps:1,lowerCasePetiteCaps:2},upperCase:{code:38,exclusive:!0,defaultUpperCase:0,upperCaseSmallCaps:1,upperCasePetiteCaps:2},languageTag:{code:39,exclusive:!0},CJKRomanSpacing:{code:103,exclusive:!0,halfWidthCJKRoman:0,proportionalCJKRoman:1,defaultCJKRoman:2,fullWidthCJKRoman:3}},Ke=(r,e)=>[go[r].code,go[r][e]],k0={rlig:Ke("ligatures","requiredLigatures"),clig:Ke("ligatures","contextualLigatures"),dlig:Ke("ligatures","rareLigatures"),hlig:Ke("ligatures","historicalLigatures"),liga:Ke("ligatures","commonLigatures"),hist:Ke("ligatures","historicalLigatures"),smcp:Ke("lowerCase","lowerCaseSmallCaps"),pcap:Ke("lowerCase","lowerCasePetiteCaps"),frac:Ke("fractions","diagonalFractions"),dnom:Ke("fractions","diagonalFractions"),numr:Ke("fractions","diagonalFractions"),afrc:Ke("fractions","verticalFractions"),case:Ke("caseSensitiveLayout","caseSensitiveLayout"),ccmp:Ke("unicodeDecomposition","canonicalComposition"),cpct:Ke("CJKVerticalRomanPlacement","CJKVerticalRomanCentered"),valt:Ke("CJKVerticalRomanPlacement","CJKVerticalRomanCentered"),swsh:Ke("contextualAlternates","swashAlternates"),cswh:Ke("contextualAlternates","contextualSwashAlternates"),curs:Ke("cursiveConnection","cursive"),c2pc:Ke("upperCase","upperCasePetiteCaps"),c2sc:Ke("upperCase","upperCaseSmallCaps"),init:Ke("smartSwash","wordInitialSwashes"),fin2:Ke("smartSwash","wordFinalSwashes"),medi:Ke("smartSwash","nonFinalSwashes"),med2:Ke("smartSwash","nonFinalSwashes"),fin3:Ke("smartSwash","wordFinalSwashes"),fina:Ke("smartSwash","wordFinalSwashes"),pkna:Ke("kanaSpacing","proportionalKana"),half:Ke("textSpacing","halfWidthText"),halt:Ke("textSpacing","altHalfWidthText"),hkna:Ke("alternateKana","alternateHorizKana"),vkna:Ke("alternateKana","alternateVertKana"),ital:Ke("italicCJKRoman","CJKItalicRoman"),lnum:Ke("numberCase","upperCaseNumbers"),onum:Ke("numberCase","lowerCaseNumbers"),mgrk:Ke("mathematicalExtras","mathematicalGreek"),calt:Ke("contextualAlternates","contextualAlternates"),vrt2:Ke("verticalSubstitution","substituteVerticalForms"),vert:Ke("verticalSubstitution","substituteVerticalForms"),tnum:Ke("numberSpacing","monospacedNumbers"),pnum:Ke("numberSpacing","proportionalNumbers"),sups:Ke("verticalPosition","superiors"),subs:Ke("verticalPosition","inferiors"),ordn:Ke("verticalPosition","ordinals"),pwid:Ke("textSpacing","proportionalText"),hwid:Ke("textSpacing","halfWidthText"),qwid:Ke("textSpacing","quarterWidthText"),twid:Ke("textSpacing","thirdWidthText"),fwid:Ke("textSpacing","proportionalText"),palt:Ke("textSpacing","altProportionalText"),trad:Ke("characterShape","traditionalCharacters"),smpl:Ke("characterShape","simplifiedCharacters"),jp78:Ke("characterShape","JIS1978Characters"),jp83:Ke("characterShape","JIS1983Characters"),jp90:Ke("characterShape","JIS1990Characters"),jp04:Ke("characterShape","JIS2004Characters"),expt:Ke("characterShape","expertCharacters"),hojo:Ke("characterShape","hojoCharacters"),nlck:Ke("characterShape","NLCCharacters"),tnam:Ke("characterShape","traditionalNamesCharacters"),ruby:Ke("rubyKana","rubyKana"),titl:Ke("styleOptions","titlingCaps"),zero:Ke("typographicExtras","slashedZero"),ss01:Ke("stylisticAlternatives","stylisticAltOne"),ss02:Ke("stylisticAlternatives","stylisticAltTwo"),ss03:Ke("stylisticAlternatives","stylisticAltThree"),ss04:Ke("stylisticAlternatives","stylisticAltFour"),ss05:Ke("stylisticAlternatives","stylisticAltFive"),ss06:Ke("stylisticAlternatives","stylisticAltSix"),ss07:Ke("stylisticAlternatives","stylisticAltSeven"),ss08:Ke("stylisticAlternatives","stylisticAltEight"),ss09:Ke("stylisticAlternatives","stylisticAltNine"),ss10:Ke("stylisticAlternatives","stylisticAltTen"),ss11:Ke("stylisticAlternatives","stylisticAltEleven"),ss12:Ke("stylisticAlternatives","stylisticAltTwelve"),ss13:Ke("stylisticAlternatives","stylisticAltThirteen"),ss14:Ke("stylisticAlternatives","stylisticAltFourteen"),ss15:Ke("stylisticAlternatives","stylisticAltFifteen"),ss16:Ke("stylisticAlternatives","stylisticAltSixteen"),ss17:Ke("stylisticAlternatives","stylisticAltSeventeen"),ss18:Ke("stylisticAlternatives","stylisticAltEighteen"),ss19:Ke("stylisticAlternatives","stylisticAltNineteen"),ss20:Ke("stylisticAlternatives","stylisticAltTwenty")};for(let r=1;r<=99;r++)k0[`cv${`00${r}`.slice(-2)}`]=[go.characterAlternatives.code,r];let vo={};for(let r in k0){let e=k0[r];vo[e[0]]==null&&(vo[e[0]]={}),vo[e[0]][e[1]]=r}function YZ(r){let e={};for(let t in r){let n;(n=k0[t])&&(e[n[0]]==null&&(e[n[0]]={}),e[n[0]][n[1]]=r[t])}return e}function by(r){let[e,t]=r;if(isNaN(e))var n=go[e]&&go[e].code;else var n=e;if(isNaN(t))var i=go[e]&&go[e][t];else var i=t;return[n,i]}function qZ(r){let e={};if(Array.isArray(r))for(let t=0;t<r.length;t++){let n,i=by(r[t]);(n=vo[i[0]]&&vo[i[0]][i[1]])&&(e[n]=!0)}else if(typeof r=="object")for(let t in r){let n=r[t];for(let i in n){let s,o=by([t,i]);n[i]&&(s=vo[o[0]]&&vo[o[0]][o[1]])&&(e[s]=!0)}}return Object.keys(e)}class rc{lookup(e){switch(this.table.version){case 0:return this.table.values.getItem(e);case 2:case 4:{let i=0,s=this.table.binarySearchHeader.nUnits-1;for(;i<=s;){var t=i+s>>1,n=this.table.segments[t];if(n.firstGlyph===65535)return null;if(e<n.firstGlyph)s=t-1;else if(e>n.lastGlyph)i=t+1;else return this.table.version===2?n.value:n.values[e-n.firstGlyph]}return null}case 6:{let i=0,s=this.table.binarySearchHeader.nUnits-1;for(;i<=s;){var t=i+s>>1,n=this.table.segments[t];if(n.glyph===65535)return null;if(e<n.glyph)s=t-1;else if(e>n.glyph)i=t+1;else return n.value}return null}case 8:return this.table.values[e-this.table.firstGlyph];default:throw new Error(`Unknown lookup table format: ${this.table.version}`)}}glyphsForValue(e){let t=[];switch(this.table.version){case 2:case 4:for(let n of this.table.segments)if(this.table.version===2&&n.value===e)t.push(...Ca(n.firstGlyph,n.lastGlyph+1));else for(let i=0;i<n.values.length;i++)n.values[i]===e&&t.push(n.firstGlyph+i);break;case 6:for(let n of this.table.segments)n.value===e&&t.push(n.glyph);break;case 8:for(let n=0;n<this.table.values.length;n++)this.table.values[n]===e&&t.push(this.table.firstGlyph+n);break;default:throw new Error(`Unknown lookup table format: ${this.table.version}`)}return t}constructor(e){this.table=e}}Qn([er],rc.prototype,"glyphsForValue",null);const ZZ=0,yy=0,wy=1,_y=2,jZ=16384;class KZ{process(e,t,n){let i=ZZ,s=t?e.length-1:0,o=t?-1:1;for(;o===1&&s<=e.length||o===-1&&s>=-1;){let a=null,u=wy,f=!0;s===e.length||s===-1?u=yy:(a=e[s],a.id===65535?u=_y:(u=this.lookupTable.lookup(a.id),u==null&&(u=wy)));let p=this.stateTable.stateArray.getItem(i)[u],g=this.stateTable.entryTable.getItem(p);u!==yy&&u!==_y&&(n(a,g,s),f=!(g.flags&jZ)),i=g.newState,f&&(s+=o)}return e}traverse(e,t=0,n=new Set){if(n.has(t))return;n.add(t);let{nClasses:i,stateArray:s,entryTable:o}=this.stateTable,a=s.getItem(t);for(let u=4;u<i;u++){let f=a[u],h=o.getItem(f);for(let p of this.lookupTable.glyphsForValue(u))e.enter&&e.enter(p,h),h.newState!==0&&this.traverse(e,h.newState,n),e.exit&&e.exit(p,h)}}constructor(e){this.stateTable=e,this.lookupTable=new rc(e.classTable)}}const JZ=32768,QZ=8192,ej=15,Sy=32768,tj=32768,nj=8192,rj=2147483648,ij=1073741824,sj=1073741823,Cy=4194304,oj=2048,aj=1024,lj=992,cj=31;class h3{process(e,t={}){for(let i of this.morx.chains){let s=i.defaultFlags;for(let o of i.features){let a;(a=t[o.featureType])&&(a[o.featureSetting]?(s&=o.disableFlags,s|=o.enableFlags):a[o.featureSetting]===!1&&(s|=~o.disableFlags,s&=~o.enableFlags))}for(let o of i.subtables)o.subFeatureFlags&s&&this.processSubtable(o,e)}let n=e.length-1;for(;n>=0;)e[n].id===65535&&e.splice(n,1),n--;return e}processSubtable(e,t){if(this.subtable=e,this.glyphs=t,this.subtable.type===4){this.processNoncontextualSubstitutions(this.subtable,this.glyphs);return}this.ligatureStack=[],this.markedGlyph=null,this.firstGlyph=null,this.lastGlyph=null,this.markedIndex=null;let n=this.getStateMachine(e),i=this.getProcessor(),s=!!(this.subtable.coverage&Cy);return n.process(this.glyphs,s,i)}getStateMachine(e){return new KZ(e.table.stateTable)}getProcessor(){switch(this.subtable.type){case 0:return this.processIndicRearragement;case 1:return this.processContextualSubstitution;case 2:return this.processLigature;case 4:return this.processNoncontextualSubstitutions;case 5:return this.processGlyphInsertion;default:throw new Error(`Invalid morx subtable type: ${this.subtable.type}`)}}processIndicRearragement(e,t,n){t.flags&JZ&&(this.firstGlyph=n),t.flags&QZ&&(this.lastGlyph=n),uj(this.glyphs,t.flags&ej,this.firstGlyph,this.lastGlyph)}processContextualSubstitution(e,t,n){let i=this.subtable.table.substitutionTable.items;if(t.markIndex!==65535){let o=i.getItem(t.markIndex),a=new rc(o);e=this.glyphs[this.markedGlyph];var s=a.lookup(e.id);s&&(this.glyphs[this.markedGlyph]=this.font.getGlyph(s,e.codePoints))}if(t.currentIndex!==65535){let o=i.getItem(t.currentIndex),a=new rc(o);e=this.glyphs[n];var s=a.lookup(e.id);s&&(this.glyphs[n]=this.font.getGlyph(s,e.codePoints))}t.flags&Sy&&(this.markedGlyph=n)}processLigature(e,t,n){if(t.flags&tj&&this.ligatureStack.push(n),t.flags&nj){let i=this.subtable.table.ligatureActions,s=this.subtable.table.components,o=this.subtable.table.ligatureList,a=t.action,u=!1,f=0,h=[],p=[];for(;!u;){let g=this.ligatureStack.pop();h.unshift(...this.glyphs[g].codePoints);let b=i.getItem(a++);u=!!(b&rj);let C=!!(b&ij),y=(b&sj)<<2>>2;y+=this.glyphs[g].id;let w=s.getItem(y);if(f+=w,u||C){let A=o.getItem(f);this.glyphs[g]=this.font.getGlyph(A,h),p.push(g),f=0,h=[]}else this.glyphs[g]=this.font.getGlyph(65535)}this.ligatureStack.push(...p)}}processNoncontextualSubstitutions(e,t,n){let i=new rc(e.table.lookupTable);for(n=0;n<t.length;n++){let s=t[n];if(s.id!==65535){let o=i.lookup(s.id);o&&(t[n]=this.font.getGlyph(o,s.codePoints))}}}_insertGlyphs(e,t,n,i){let s=[];for(;n--;){let o=this.subtable.table.insertionActions.getItem(t++);s.push(this.font.getGlyph(o))}i||e++,this.glyphs.splice(e,0,...s)}processGlyphInsertion(e,t,n){if(t.flags&Sy&&(this.markedIndex=n),t.markedInsertIndex!==65535){let i=(t.flags&cj)>>>5,s=!!(t.flags&aj);this._insertGlyphs(this.markedIndex,t.markedInsertIndex,i,s)}if(t.currentInsertIndex!==65535){let i=(t.flags&lj)>>>5,s=!!(t.flags&oj);this._insertGlyphs(n,t.currentInsertIndex,i,s)}}getSupportedFeatures(){let e=[];for(let t of this.morx.chains)for(let n of t.features)e.push([n.featureType,n.featureSetting]);return e}generateInputs(e){return this.inputCache||this.generateInputCache(),this.inputCache[e]||[]}generateInputCache(){this.inputCache={};for(let e of this.morx.chains){let t=e.defaultFlags;for(let n of e.subtables)n.subFeatureFlags&t&&this.generateInputsForSubtable(n)}}generateInputsForSubtable(e){if(e.type!==2)return;if(!!(e.coverage&Cy))throw new Error("Reverse subtable, not supported.");this.subtable=e,this.ligatureStack=[];let n=this.getStateMachine(e),i=this.getProcessor(),s=[],o=[];this.glyphs=[],n.traverse({enter:(a,u)=>{let f=this.glyphs;o.push({glyphs:f.slice(),ligatureStack:this.ligatureStack.slice()});let h=this.font.getGlyph(a);s.push(h),f.push(s[s.length-1]),i(f[f.length-1],u,f.length-1);let p=0,g=0;for(let b=0;b<f.length&&p<=1;b++)f[b].id!==65535&&(p++,g=f[b].id);if(p===1){let b=s.map(y=>y.id),C=this.inputCache[g];C?C.push(b):this.inputCache[g]=[b]}},exit:()=>{({glyphs:this.glyphs,ligatureStack:this.ligatureStack}=o.pop()),s.pop()}})}constructor(e){this.processIndicRearragement=this.processIndicRearragement.bind(this),this.processContextualSubstitution=this.processContextualSubstitution.bind(this),this.processLigature=this.processLigature.bind(this),this.processNoncontextualSubstitutions=this.processNoncontextualSubstitutions.bind(this),this.processGlyphInsertion=this.processGlyphInsertion.bind(this),this.font=e,this.morx=e.morx,this.inputCache=null}}Qn([er],h3.prototype,"getStateMachine",null);function ur(r,e,t,n=!1,i=!1){let s=r.splice(t[0]-(t[1]-1),t[1]);i&&s.reverse();let o=r.splice(e[0],e[1],...s);return n&&o.reverse(),r.splice(t[0]-(e[1]-1),0,...o),r}function uj(r,e,t,n){switch(e){case 0:return r;case 1:return ur(r,[t,1],[n,0]);case 2:return ur(r,[t,0],[n,1]);case 3:return ur(r,[t,1],[n,1]);case 4:return ur(r,[t,2],[n,0]);case 5:return ur(r,[t,2],[n,0],!0,!1);case 6:return ur(r,[t,0],[n,2]);case 7:return ur(r,[t,0],[n,2],!1,!0);case 8:return ur(r,[t,1],[n,2]);case 9:return ur(r,[t,1],[n,2],!1,!0);case 10:return ur(r,[t,2],[n,1]);case 11:return ur(r,[t,2],[n,1],!0,!1);case 12:return ur(r,[t,2],[n,2]);case 13:return ur(r,[t,2],[n,2],!0,!1);case 14:return ur(r,[t,2],[n,2],!1,!0);case 15:return ur(r,[t,2],[n,2],!0,!0);default:throw new Error(`Unknown verb: ${e}`)}}class fj{substitute(e){e.direction==="rtl"&&e.glyphs.reverse(),this.morxProcessor.process(e.glyphs,YZ(e.features))}getAvailableFeatures(e,t){return qZ(this.morxProcessor.getSupportedFeatures())}stringsForGlyph(e){let t=this.morxProcessor.generateInputs(e),n=new Set;for(let i of t)this._addStrings(i,0,n,"");return n}_addStrings(e,t,n,i){let s=this.font._cmapProcessor.codePointsForGlyph(e[t]);for(let o of s){let a=i+String.fromCodePoint(o);t<e.length-1?this._addStrings(e,t+1,n,a):n.add(a)}}constructor(e){this.font=e,this.morxProcessor=new h3(e),this.fallbackPosition=!1}}class hj{_addFeatures(e,t){let n=this.stages.length-1,i=this.stages[n];for(let s of e)this.allFeatures[s]==null&&(i.push(s),this.allFeatures[s]=n,t&&(this.globalFeatures[s]=!0))}add(e,t=!0){if(this.stages.length===0&&this.stages.push([]),typeof e=="string"&&(e=[e]),Array.isArray(e))this._addFeatures(e,t);else if(typeof e=="object")this._addFeatures(e.global||[],!0),this._addFeatures(e.local||[],!1);else throw new Error("Unsupported argument to ShapingPlan#add")}addStage(e,t){typeof e=="function"?this.stages.push(e,[]):(this.stages.push([]),this.add(e,t))}setFeatureOverrides(e){if(Array.isArray(e))this.add(e);else if(typeof e=="object"){for(let t in e)if(e[t])this.add(t);else if(this.allFeatures[t]!=null){let n=this.stages[this.allFeatures[t]];n.splice(n.indexOf(t),1),delete this.allFeatures[t],delete this.globalFeatures[t]}}}assignGlobalFeatures(e){for(let t of e)for(let n in this.globalFeatures)t.features[n]=!0}process(e,t,n){for(let i of this.stages)typeof i=="function"?n||i(this.font,t,this):i.length>0&&e.applyFeatures(i,t,n)}constructor(e,t,n){this.font=e,this.script=t,this.direction=n,this.stages=[],this.globalFeatures={},this.allFeatures={}}}const dj=["rvrn"],pj=["ccmp","locl","rlig","mark","mkmk"],mj=["frac","numr","dnom"],gj=["calt","clig","liga","rclt","curs","kern"],vj={ltr:["ltra","ltrm"],rtl:["rtla","rtlm"]};class Xs{static plan(e,t,n){this.planPreprocessing(e),this.planFeatures(e),this.planPostprocessing(e,n),e.assignGlobalFeatures(t),this.assignFeatures(e,t)}static planPreprocessing(e){e.add({global:[...dj,...vj[e.direction]],local:mj})}static planFeatures(e){}static planPostprocessing(e,t){e.add([...pj,...gj]),e.setFeatureOverrides(t)}static assignFeatures(e,t){for(let n=0;n<t.length;n++){let i=t[n];if(i.codePoints[0]===8260){let s=n,o=n+1;for(;s>0&&Hb(t[s-1].codePoints[0]);)t[s-1].features.numr=!0,t[s-1].features.frac=!0,s--;for(;o<t.length&&Hb(t[o].codePoints[0]);)t[o].features.dnom=!0,t[o].features.frac=!0,o++;i.features.frac=!0,n=o-1}}}}Sr(Xs,"zeroMarkWidths","AFTER_GPOS");const xj=new gf(Im("ABABAAAAAACgMQAAAZUBav7t2CtPA0EUBeDZB00pin9AJZIEgyUEj0QhweDAgQOJxCBRBElQSBwSicLgkOAwnNKZ5GaY2c7uzj4o5yZfZrrbefbuIx2nSq3CGmzAWH/+K+UO7MIe7MMhHMMpnMMFXMIVXIt2t3CnP088iPqjqNN8e4Ij7Rle4LUH82rLm6i/92A+RERERERERERNmfz/89GDeRARERERzbN8ceps2Iwt9H0C9/AJ6yOlDkbTczcot5VSm8Pm1vcFWfb7+BKOLTuOd2UlTX4wGP85Eg953lWPFbnuN7PkjtLmalOWbNenkHOSa7T3KmR9MVTZ2zZkVj1kHa68MueVKH0R4zqQ44WEXLM8VjcWHP0PtKLfPzQnMtGn3W4QYf6qxFxceVI394r2xnV+1rih0fV1Vzf3fO1n3evL5J78ruvZ5ptX2Rwy92Tfb1wlEqut3U+sZ3HXOeJ7/zDrbyuP6+Zz0fqa6Nv3vhY7Yu1xWnGevmsvsUpTT/RYIe8waUH/rvHMWKFzLfN8L+rTfp645mfX7ftlnfDtYxN59w0=")),Py=["isol","fina","fin2","fin3","medi","med2","init"],Ep={Non_Joining:0,Left_Joining:1,Right_Joining:2,Dual_Joining:3,Join_Causing:3,ALAPH:4,"DALATH RISH":5,Transparent:6},on="isol",Es="fina",kd="fin2",bj="fin3",Zu="medi",ju="med2",Ku="init",Ut=null,yj=[[[Ut,Ut,0],[Ut,on,2],[Ut,on,1],[Ut,on,2],[Ut,on,1],[Ut,on,6]],[[Ut,Ut,0],[Ut,on,2],[Ut,on,1],[Ut,on,2],[Ut,kd,5],[Ut,on,6]],[[Ut,Ut,0],[Ut,on,2],[Ku,Es,1],[Ku,Es,3],[Ku,Es,4],[Ku,Es,6]],[[Ut,Ut,0],[Ut,on,2],[Zu,Es,1],[Zu,Es,3],[Zu,Es,4],[Zu,Es,6]],[[Ut,Ut,0],[Ut,on,2],[ju,on,1],[ju,on,2],[ju,kd,5],[ju,on,6]],[[Ut,Ut,0],[Ut,on,2],[on,on,1],[on,on,2],[on,kd,5],[on,on,6]],[[Ut,Ut,0],[Ut,on,2],[Ut,on,1],[Ut,on,2],[Ut,bj,5],[Ut,on,6]]];class As extends Xs{static planFeatures(e){e.add(["ccmp","locl"]);for(let t=0;t<Py.length;t++){let n=Py[t];e.addStage(n,!1)}e.addStage("mset")}static assignFeatures(e,t){super.assignFeatures(e,t);let n=-1,i=0,s=[];for(let a=0;a<t.length;a++){let u,f;var o=t[a];let h=wj(o.codePoints[0]);if(h===Ep.Transparent){s[a]=Ut;continue}[f,u,i]=yj[i][h],f!==Ut&&n!==-1&&(s[n]=f),s[a]=u,n=a}for(let a=0;a<t.length;a++){let u;var o=t[a];(u=s[a])&&(o.features[u]=!0)}}}function wj(r){let e=xj.get(r);if(e)return e-1;let t=xf(r);return t==="Mn"||t==="Me"||t==="Cf"?Ep.Transparent:Ep.Non_Joining}class _j{reset(e={},t=0){this.options=e,this.flags=e.flags||{},this.markAttachmentType=e.markAttachmentType||0,this.index=t}get cur(){return this.glyphs[this.index]||null}shouldIgnore(e){return this.flags.ignoreMarks&&e.isMark||this.flags.ignoreBaseGlyphs&&e.isBase||this.flags.ignoreLigatures&&e.isLigature||this.markAttachmentType&&e.isMark&&e.markAttachmentType!==this.markAttachmentType}move(e){for(this.index+=e;0<=this.index&&this.index<this.glyphs.length&&this.shouldIgnore(this.glyphs[this.index]);)this.index+=e;return 0>this.index||this.index>=this.glyphs.length?null:this.glyphs[this.index]}next(){return this.move(1)}prev(){return this.move(-1)}peek(e=1){let t=this.index,n=this.increment(e);return this.index=t,n}peekIndex(e=1){let t=this.index;this.increment(e);let n=this.index;return this.index=t,n}increment(e=1){let t=e<0?-1:1;for(e=Math.abs(e);e--;)this.move(t);return this.glyphs[this.index]}constructor(e,t){this.glyphs=e,this.reset(t)}}const Sj=["DFLT","dflt","latn"];class U0{findScript(e){if(this.table.scriptList==null)return null;Array.isArray(e)||(e=[e]);for(let t of e)for(let n of this.table.scriptList)if(n.tag===t)return n;return null}selectScript(e,t,n){let i=!1,s;if(!this.script||e!==this.scriptTag){if(s=this.findScript(e),s||(s=this.findScript(Sj)),!s)return this.scriptTag;this.scriptTag=s.tag,this.script=s.script,this.language=null,this.languageTag=null,i=!0}if((!n||n!==this.direction)&&(this.direction=n||f3(e)),t&&t.length<4&&(t+=" ".repeat(4-t.length)),!t||t!==this.languageTag){this.language=null;for(let o of this.script.langSysRecords)if(o.tag===t){this.language=o.langSys,this.languageTag=o.tag;break}this.language||(this.language=this.script.defaultLangSys,this.languageTag=null),i=!0}if(i&&(this.features={},this.language))for(let o of this.language.featureIndexes){let a=this.table.featureList[o],u=this.substituteFeatureForVariations(o);this.features[a.tag]=u||a.feature}return this.scriptTag}lookupsForFeatures(e=[],t){let n=[];for(let i of e){let s=this.features[i];if(s)for(let o of s.lookupListIndexes)t&&t.indexOf(o)!==-1||n.push({feature:i,index:o,lookup:this.table.lookupList.get(o)})}return n.sort((i,s)=>i.index-s.index),n}substituteFeatureForVariations(e){if(this.variationsIndex===-1)return null;let n=this.table.featureVariations.featureVariationRecords[this.variationsIndex].featureTableSubstitution.substitutions;for(let i of n)if(i.featureIndex===e)return i.alternateFeatureTable;return null}findVariationsIndex(e){let t=this.table.featureVariations;if(!t)return-1;let n=t.featureVariationRecords;for(let i=0;i<n.length;i++){let s=n[i].conditionSet.conditionTable;if(this.variationConditionsMatch(s,e))return i}return-1}variationConditionsMatch(e,t){return e.every(n=>{let i=n.axisIndex<t.length?t[n.axisIndex]:0;return n.filterRangeMinValue<=i&&i<=n.filterRangeMaxValue})}applyFeatures(e,t,n){let i=this.lookupsForFeatures(e);this.applyLookups(i,t,n)}applyLookups(e,t,n){this.glyphs=t,this.positions=n,this.glyphIterator=new _j(t);for(let{feature:i,lookup:s}of e)for(this.currentFeature=i,this.glyphIterator.reset(s.flags);this.glyphIterator.index<t.length;){if(!(i in this.glyphIterator.cur.features)){this.glyphIterator.next();continue}for(let o of s.subTables)if(this.applyLookup(s.lookupType,o))break;this.glyphIterator.next()}}applyLookup(e,t){throw new Error("applyLookup must be implemented by subclasses")}applyLookupList(e){let t=this.glyphIterator.options,n=this.glyphIterator.index;for(let i of e){this.glyphIterator.reset(t,n),this.glyphIterator.increment(i.sequenceIndex);let s=this.table.lookupList.get(i.lookupListIndex);this.glyphIterator.reset(s.flags,this.glyphIterator.index);for(let o of s.subTables)if(this.applyLookup(s.lookupType,o))break}return this.glyphIterator.reset(t,n),!0}coverageIndex(e,t){switch(t==null&&(t=this.glyphIterator.cur.id),e.version){case 1:return e.glyphs.indexOf(t);case 2:for(let n of e.rangeRecords)if(n.start<=t&&t<=n.end)return n.startCoverageIndex+t-n.start;break}return-1}match(e,t,n,i){let s=this.glyphIterator.index,o=this.glyphIterator.increment(e),a=0;for(;a<t.length&&o&&n(t[a],o);)i&&i.push(this.glyphIterator.index),a++,o=this.glyphIterator.next();return this.glyphIterator.index=s,a<t.length?!1:i||!0}sequenceMatches(e,t){return this.match(e,t,(n,i)=>n===i.id)}sequenceMatchIndices(e,t){return this.match(e,t,(n,i)=>this.currentFeature in i.features?n===i.id:!1,[])}coverageSequenceMatches(e,t){return this.match(e,t,(n,i)=>this.coverageIndex(n,i.id)>=0)}getClassID(e,t){switch(t.version){case 1:let n=e-t.startGlyph;if(n>=0&&n<t.classValueArray.length)return t.classValueArray[n];break;case 2:for(let i of t.classRangeRecord)if(i.start<=e&&e<=i.end)return i.class;break}return 0}classSequenceMatches(e,t,n){return this.match(e,t,(i,s)=>i===this.getClassID(s.id,n))}applyContext(e){let t,n;switch(e.version){case 1:if(t=this.coverageIndex(e.coverage),t===-1)return!1;n=e.ruleSets[t];for(let i of n)if(this.sequenceMatches(1,i.input))return this.applyLookupList(i.lookupRecords);break;case 2:if(this.coverageIndex(e.coverage)===-1||(t=this.getClassID(this.glyphIterator.cur.id,e.classDef),t===-1))return!1;n=e.classSet[t];for(let i of n)if(this.classSequenceMatches(1,i.classes,e.classDef))return this.applyLookupList(i.lookupRecords);break;case 3:if(this.coverageSequenceMatches(0,e.coverages))return this.applyLookupList(e.lookupRecords);break}return!1}applyChainingContext(e){let t;switch(e.version){case 1:if(t=this.coverageIndex(e.coverage),t===-1)return!1;let n=e.chainRuleSets[t];for(let s of n)if(this.sequenceMatches(-s.backtrack.length,s.backtrack)&&this.sequenceMatches(1,s.input)&&this.sequenceMatches(1+s.input.length,s.lookahead))return this.applyLookupList(s.lookupRecords);break;case 2:if(this.coverageIndex(e.coverage)===-1)return!1;t=this.getClassID(this.glyphIterator.cur.id,e.inputClassDef);let i=e.chainClassSet[t];if(!i)return!1;for(let s of i)if(this.classSequenceMatches(-s.backtrack.length,s.backtrack,e.backtrackClassDef)&&this.classSequenceMatches(1,s.input,e.inputClassDef)&&this.classSequenceMatches(1+s.input.length,s.lookahead,e.lookaheadClassDef))return this.applyLookupList(s.lookupRecords);break;case 3:if(this.coverageSequenceMatches(-e.backtrackGlyphCount,e.backtrackCoverage)&&this.coverageSequenceMatches(0,e.inputCoverage)&&this.coverageSequenceMatches(e.inputGlyphCount,e.lookaheadCoverage))return this.applyLookupList(e.lookupRecords);break}return!1}constructor(e,t){this.font=e,this.table=t,this.script=null,this.scriptTag=null,this.language=null,this.languageTag=null,this.features={},this.lookups={},this.variationsIndex=e._variationProcessor?this.findVariationsIndex(e._variationProcessor.normalizedCoords):-1,this.selectScript(),this.glyphs=[],this.positions=[],this.ligatureID=1,this.currentFeature=null}}class ii{get id(){return this._id}set id(e){this._id=e,this.substituted=!0;let t=this._font.GDEF;if(t&&t.glyphClassDef){let n=U0.prototype.getClassID(e,t.glyphClassDef);this.isBase=n===1,this.isLigature=n===2,this.isMark=n===3,this.markAttachmentType=t.markAttachClassDef?U0.prototype.getClassID(e,t.markAttachClassDef):0}else this.isMark=this.codePoints.length>0&&this.codePoints.every(F_),this.isBase=!this.isMark,this.isLigature=this.codePoints.length>1,this.markAttachmentType=0}copy(){return new ii(this._font,this.id,this.codePoints,this.features)}constructor(e,t,n=[],i){if(this._font=e,this.codePoints=n,this.id=t,this.features={},Array.isArray(i))for(let s=0;s<i.length;s++){let o=i[s];this.features[o]=!0}else typeof i=="object"&&Object.assign(this.features,i);this.ligatureID=null,this.ligatureComponent=null,this.isLigated=!1,this.cursiveAttachment=null,this.markAttachment=null,this.shaperInfo=null,this.substituted=!1,this.isMultiplied=!1}}class d3 extends Xs{static planFeatures(e){e.add(["ljmo","vjmo","tjmo"],!1)}static assignFeatures(e,t){let n=0,i=0;for(;i<t.length;){let s,a=t[i].codePoints[0],u=$0(a);switch([s,n]=zj[n][u],s){case qi:e.font.hasGlyphForCodePoint(a)||(i=g3(t,i,e.font));break;case Ap:i=Gj(t,i,e.font);break;case Tp:Wj(t,i,e.font);break;case Ip:i=Xj(t,i,e.font);break}i++}}}Sr(d3,"zeroMarkWidths","NONE");const Ya=44032,p3=55204,Cj=p3-Ya+1,Sf=4352,Cf=4449,So=4519,Pj=19,V0=21,Pc=28,Mj=Sf+Pj-1,Ej=Cf+V0-1,Aj=So+Pc-1,My=9676,Tj=r=>4352<=r&&r<=4447||43360<=r&&r<=43388,Ij=r=>4448<=r&&r<=4519||55216<=r&&r<=55238,Lj=r=>4520<=r&&r<=4607||55243<=r&&r<=55291,Dj=r=>12334<=r&&r<=12335,Oj=r=>Ya<=r&&r<=p3,Rj=r=>r-Ya<Cj&&(r-Ya)%Pc===0,Bj=r=>Sf<=r&&r<=Mj,Fj=r=>Cf<=r&&r<=Ej,Nj=r=>1<=r&&r<=Aj,kj=0,Uj=1,z0=2,Dm=3,G0=4,m3=5,Vj=6;function $0(r){return Tj(r)?Uj:Ij(r)?z0:Lj(r)?Dm:Rj(r)?G0:Oj(r)?m3:Dj(r)?Vj:kj}const mr=0,qi=1,Ap=2,Tp=4,Ip=5,zj=[[[mr,0],[mr,1],[mr,0],[mr,0],[qi,2],[qi,3],[Ip,0]],[[mr,0],[mr,1],[Ap,2],[mr,0],[qi,2],[qi,3],[Ip,0]],[[mr,0],[mr,1],[mr,0],[Ap,3],[qi,2],[qi,3],[Tp,0]],[[mr,0],[mr,1],[mr,0],[mr,0],[qi,2],[qi,3],[Tp,0]]];function ic(r,e,t){return new ii(r,r.glyphForCodePoint(e).id,[e],t)}function g3(r,e,t){let n=r[e],s=n.codePoints[0]-Ya,o=So+s%Pc;s=s/Pc|0;let a=Sf+s/V0|0,u=Cf+s%V0;if(!t.hasGlyphForCodePoint(a)||!t.hasGlyphForCodePoint(u)||o!==So&&!t.hasGlyphForCodePoint(o))return e;let f=ic(t,a,n.features);f.features.ljmo=!0;let h=ic(t,u,n.features);h.features.vjmo=!0;let p=[f,h];if(o>So){let g=ic(t,o,n.features);g.features.tjmo=!0,p.push(g)}return r.splice(e,1,...p),e+p.length-1}function Gj(r,e,t){let n=r[e],i=r[e].codePoints[0],s=$0(i),o=r[e-1].codePoints[0],a=$0(o),u,f,h,p;if(a===G0&&s===Dm)u=o,p=n;else{s===z0?(f=r[e-1],h=n):(f=r[e-2],h=r[e-1],p=n);let b=f.codePoints[0],C=h.codePoints[0];Bj(b)&&Fj(C)&&(u=Ya+((b-Sf)*V0+(C-Cf))*Pc)}let g=p&&p.codePoints[0]||So;if(u!=null&&(g===So||Nj(g))){let b=u+(g-So);if(t.hasGlyphForCodePoint(b)){let C=a===z0?3:2;return r.splice(e-C+1,C,ic(t,b,n.features)),e-C+1}}return f&&(f.features.ljmo=!0),h&&(h.features.vjmo=!0),p&&(p.features.tjmo=!0),a===G0?(g3(r,e-1,t),e+1):e}function $j(r){switch($0(r)){case G0:case m3:return 1;case z0:return 2;case Dm:return 3}}function Wj(r,e,t){let n=r[e],i=r[e].codePoints[0];if(t.glyphForCodePoint(i).advanceWidth===0)return;let s=r[e-1].codePoints[0],o=$j(s);return r.splice(e,1),r.splice(e-o,0,n)}function Xj(r,e,t){let n=r[e],i=r[e].codePoints[0];if(t.hasGlyphForCodePoint(My)){let s=ic(t,My,n.features),o=t.glyphForCodePoint(i).advanceWidth===0?e:e+1;r.splice(o,0,s),e++}return e}var v3={};v3=JSON.parse('{"stateTable":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,2,3,4,5,6,7,8,9,0,10,11,11,12,13,14,15,16,17],[0,0,0,18,19,20,21,22,23,0,24,0,0,25,26,0,0,27,0],[0,0,0,28,29,30,31,32,33,0,34,0,0,35,36,0,0,37,0],[0,0,0,38,5,7,7,8,9,0,10,0,0,0,13,0,0,16,0],[0,39,0,0,0,40,41,0,9,0,10,0,0,0,42,0,39,0,0],[0,0,0,0,43,44,44,8,9,0,0,0,0,12,43,0,0,0,0],[0,0,0,0,43,44,44,8,9,0,0,0,0,0,43,0,0,0,0],[0,0,0,45,46,47,48,49,9,0,10,0,0,0,42,0,0,0,0],[0,0,0,0,0,50,0,0,51,0,10,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,52,0,0,0,0,0,0,0,0],[0,0,0,53,54,55,56,57,58,0,59,0,0,60,61,0,0,62,0],[0,0,0,4,5,7,7,8,9,0,10,0,0,0,13,0,0,16,0],[0,63,64,0,0,40,41,0,9,0,10,0,0,0,42,0,63,0,0],[0,2,3,4,5,6,7,8,9,0,10,11,11,12,13,0,2,16,0],[0,0,0,18,65,20,21,22,23,0,24,0,0,25,26,0,0,27,0],[0,0,0,0,66,67,67,8,9,0,10,0,0,0,68,0,0,0,0],[0,0,0,69,0,70,70,0,71,0,72,0,0,0,0,0,0,0,0],[0,0,0,73,19,74,74,22,23,0,24,0,0,0,26,0,0,27,0],[0,75,0,0,0,76,77,0,23,0,24,0,0,0,78,0,75,0,0],[0,0,0,0,79,80,80,22,23,0,0,0,0,25,79,0,0,0,0],[0,0,0,18,19,20,74,22,23,0,24,0,0,25,26,0,0,27,0],[0,0,0,81,82,83,84,85,23,0,24,0,0,0,78,0,0,0,0],[0,0,0,0,0,86,0,0,87,0,24,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,88,0,0,0,0,0,0,0,0],[0,0,0,18,19,74,74,22,23,0,24,0,0,0,26,0,0,27,0],[0,89,90,0,0,76,77,0,23,0,24,0,0,0,78,0,89,0,0],[0,0,0,0,91,92,92,22,23,0,24,0,0,0,93,0,0,0,0],[0,0,0,94,29,95,31,32,33,0,34,0,0,0,36,0,0,37,0],[0,96,0,0,0,97,98,0,33,0,34,0,0,0,99,0,96,0,0],[0,0,0,0,100,101,101,32,33,0,0,0,0,35,100,0,0,0,0],[0,0,0,0,100,101,101,32,33,0,0,0,0,0,100,0,0,0,0],[0,0,0,102,103,104,105,106,33,0,34,0,0,0,99,0,0,0,0],[0,0,0,0,0,107,0,0,108,0,34,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,109,0,0,0,0,0,0,0,0],[0,0,0,28,29,95,31,32,33,0,34,0,0,0,36,0,0,37,0],[0,110,111,0,0,97,98,0,33,0,34,0,0,0,99,0,110,0,0],[0,0,0,0,112,113,113,32,33,0,34,0,0,0,114,0,0,0,0],[0,0,0,0,5,7,7,8,9,0,10,0,0,0,13,0,0,16,0],[0,0,0,115,116,117,118,8,9,0,10,0,0,119,120,0,0,16,0],[0,0,0,0,0,121,121,0,9,0,10,0,0,0,42,0,0,0,0],[0,39,0,122,0,123,123,8,9,0,10,0,0,0,42,0,39,0,0],[0,124,64,0,0,0,0,0,0,0,0,0,0,0,0,0,124,0,0],[0,39,0,0,0,121,125,0,9,0,10,0,0,0,42,0,39,0,0],[0,0,0,0,0,126,126,8,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,46,47,48,49,9,0,10,0,0,0,42,0,0,0,0],[0,0,0,0,0,47,47,49,9,0,10,0,0,0,42,0,0,0,0],[0,0,0,0,0,127,127,49,9,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,128,127,127,49,9,0,0,0,0,0,0,0,0,0,0],[0,0,0,129,130,131,132,133,9,0,10,0,0,0,42,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,10,0,0,0,0,0,0,0,0],[0,0,0,0,0,50,0,0,0,0,10,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,134,0,0,0,0,0,0,0,0],[0,0,0,135,54,56,56,57,58,0,59,0,0,0,61,0,0,62,0],[0,136,0,0,0,137,138,0,58,0,59,0,0,0,139,0,136,0,0],[0,0,0,0,140,141,141,57,58,0,0,0,0,60,140,0,0,0,0],[0,0,0,0,140,141,141,57,58,0,0,0,0,0,140,0,0,0,0],[0,0,0,142,143,144,145,146,58,0,59,0,0,0,139,0,0,0,0],[0,0,0,0,0,147,0,0,148,0,59,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,149,0,0,0,0,0,0,0,0],[0,0,0,53,54,56,56,57,58,0,59,0,0,0,61,0,0,62,0],[0,150,151,0,0,137,138,0,58,0,59,0,0,0,139,0,150,0,0],[0,0,0,0,152,153,153,57,58,0,59,0,0,0,154,0,0,0,0],[0,0,0,155,116,156,157,8,9,0,10,0,0,158,120,0,0,16,0],[0,0,0,0,0,121,121,0,9,0,10,0,0,0,0,0,0,0,0],[0,75,3,4,5,159,160,8,161,0,162,0,11,12,163,0,75,16,0],[0,0,0,0,0,40,164,0,9,0,10,0,0,0,42,0,0,0,0],[0,0,0,0,165,44,44,8,9,0,0,0,0,0,165,0,0,0,0],[0,124,64,0,0,40,164,0,9,0,10,0,0,0,42,0,124,0,0],[0,0,0,0,0,70,70,0,71,0,72,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,71,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,166,0,0,167,0,72,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,168,0,0,0,0,0,0,0,0],[0,0,0,0,19,74,74,22,23,0,24,0,0,0,26,0,0,27,0],[0,0,0,0,79,80,80,22,23,0,0,0,0,0,79,0,0,0,0],[0,0,0,169,170,171,172,22,23,0,24,0,0,173,174,0,0,27,0],[0,0,0,0,0,175,175,0,23,0,24,0,0,0,78,0,0,0,0],[0,75,0,176,0,177,177,22,23,0,24,0,0,0,78,0,75,0,0],[0,178,90,0,0,0,0,0,0,0,0,0,0,0,0,0,178,0,0],[0,75,0,0,0,175,179,0,23,0,24,0,0,0,78,0,75,0,0],[0,0,0,0,0,180,180,22,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,82,83,84,85,23,0,24,0,0,0,78,0,0,0,0],[0,0,0,0,0,83,83,85,23,0,24,0,0,0,78,0,0,0,0],[0,0,0,0,0,181,181,85,23,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,182,181,181,85,23,0,0,0,0,0,0,0,0,0,0],[0,0,0,183,184,185,186,187,23,0,24,0,0,0,78,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,24,0,0,0,0,0,0,0,0],[0,0,0,0,0,86,0,0,0,0,24,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,188,0,0,0,0,0,0,0,0],[0,0,0,189,170,190,191,22,23,0,24,0,0,192,174,0,0,27,0],[0,0,0,0,0,175,175,0,23,0,24,0,0,0,0,0,0,0,0],[0,0,0,0,0,76,193,0,23,0,24,0,0,0,78,0,0,0,0],[0,0,0,0,194,80,80,22,23,0,0,0,0,0,194,0,0,0,0],[0,178,90,0,0,76,193,0,23,0,24,0,0,0,78,0,178,0,0],[0,0,0,0,29,95,31,32,33,0,34,0,0,0,36,0,0,37,0],[0,0,0,0,100,101,101,32,33,0,0,0,0,0,100,0,0,0,0],[0,0,0,195,196,197,198,32,33,0,34,0,0,199,200,0,0,37,0],[0,0,0,0,0,201,201,0,33,0,34,0,0,0,99,0,0,0,0],[0,96,0,202,0,203,203,32,33,0,34,0,0,0,99,0,96,0,0],[0,204,111,0,0,0,0,0,0,0,0,0,0,0,0,0,204,0,0],[0,96,0,0,0,201,205,0,33,0,34,0,0,0,99,0,96,0,0],[0,0,0,0,0,206,206,32,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,103,104,105,106,33,0,34,0,0,0,99,0,0,0,0],[0,0,0,0,0,104,104,106,33,0,34,0,0,0,99,0,0,0,0],[0,0,0,0,0,207,207,106,33,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,208,207,207,106,33,0,0,0,0,0,0,0,0,0,0],[0,0,0,209,210,211,212,213,33,0,34,0,0,0,99,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,34,0,0,0,0,0,0,0,0],[0,0,0,0,0,107,0,0,0,0,34,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,214,0,0,0,0,0,0,0,0],[0,0,0,215,196,216,217,32,33,0,34,0,0,218,200,0,0,37,0],[0,0,0,0,0,201,201,0,33,0,34,0,0,0,0,0,0,0,0],[0,0,0,0,0,97,219,0,33,0,34,0,0,0,99,0,0,0,0],[0,0,0,0,220,101,101,32,33,0,0,0,0,0,220,0,0,0,0],[0,204,111,0,0,97,219,0,33,0,34,0,0,0,99,0,204,0,0],[0,0,0,221,116,222,222,8,9,0,10,0,0,0,120,0,0,16,0],[0,223,0,0,0,40,224,0,9,0,10,0,0,0,42,0,223,0,0],[0,0,0,0,225,44,44,8,9,0,0,0,0,119,225,0,0,0,0],[0,0,0,115,116,117,222,8,9,0,10,0,0,119,120,0,0,16,0],[0,0,0,115,116,222,222,8,9,0,10,0,0,0,120,0,0,16,0],[0,226,64,0,0,40,224,0,9,0,10,0,0,0,42,0,226,0,0],[0,0,0,0,0,0,0,0,9,0,0,0,0,0,0,0,0,0,0],[0,39,0,0,0,121,121,0,9,0,10,0,0,0,42,0,39,0,0],[0,0,0,0,0,44,44,8,9,0,0,0,0,0,0,0,0,0,0],[0,0,0,227,0,228,229,0,9,0,10,0,0,230,0,0,0,0,0],[0,39,0,122,0,121,121,0,9,0,10,0,0,0,42,0,39,0,0],[0,0,0,0,0,0,0,8,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,231,231,49,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,232,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,130,131,132,133,9,0,10,0,0,0,42,0,0,0,0],[0,0,0,0,0,131,131,133,9,0,10,0,0,0,42,0,0,0,0],[0,0,0,0,0,233,233,133,9,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,234,233,233,133,9,0,0,0,0,0,0,0,0,0,0],[0,0,0,235,236,237,238,239,9,0,10,0,0,0,42,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,54,56,56,57,58,0,59,0,0,0,61,0,0,62,0],[0,0,0,240,241,242,243,57,58,0,59,0,0,244,245,0,0,62,0],[0,0,0,0,0,246,246,0,58,0,59,0,0,0,139,0,0,0,0],[0,136,0,247,0,248,248,57,58,0,59,0,0,0,139,0,136,0,0],[0,249,151,0,0,0,0,0,0,0,0,0,0,0,0,0,249,0,0],[0,136,0,0,0,246,250,0,58,0,59,0,0,0,139,0,136,0,0],[0,0,0,0,0,251,251,57,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,143,144,145,146,58,0,59,0,0,0,139,0,0,0,0],[0,0,0,0,0,144,144,146,58,0,59,0,0,0,139,0,0,0,0],[0,0,0,0,0,252,252,146,58,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,253,252,252,146,58,0,0,0,0,0,0,0,0,0,0],[0,0,0,254,255,256,257,258,58,0,59,0,0,0,139,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,59,0,0,0,0,0,0,0,0],[0,0,0,0,0,147,0,0,0,0,59,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,259,0,0,0,0,0,0,0,0],[0,0,0,260,241,261,262,57,58,0,59,0,0,263,245,0,0,62,0],[0,0,0,0,0,246,246,0,58,0,59,0,0,0,0,0,0,0,0],[0,0,0,0,0,137,264,0,58,0,59,0,0,0,139,0,0,0,0],[0,0,0,0,265,141,141,57,58,0,0,0,0,0,265,0,0,0,0],[0,249,151,0,0,137,264,0,58,0,59,0,0,0,139,0,249,0,0],[0,0,0,221,116,222,222,8,9,0,10,0,0,0,120,0,0,16,0],[0,0,0,0,225,44,44,8,9,0,0,0,0,158,225,0,0,0,0],[0,0,0,155,116,156,222,8,9,0,10,0,0,158,120,0,0,16,0],[0,0,0,155,116,222,222,8,9,0,10,0,0,0,120,0,0,16,0],[0,0,0,0,43,266,266,8,161,0,24,0,0,12,267,0,0,0,0],[0,75,0,176,43,268,268,269,161,0,24,0,0,0,267,0,75,0,0],[0,0,0,0,0,270,0,0,271,0,162,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,272,0,0,0,0,0,0,0,0],[0,273,274,0,0,40,41,0,9,0,10,0,0,0,42,0,273,0,0],[0,0,0,40,0,123,123,8,9,0,10,0,0,0,42,0,0,0,0],[0,0,0,0,0,121,275,0,9,0,10,0,0,0,42,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,72,0,0,0,0,0,0,0,0],[0,0,0,0,0,166,0,0,0,0,72,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,276,0,0,0,0,0,0,0,0],[0,0,0,277,170,278,278,22,23,0,24,0,0,0,174,0,0,27,0],[0,279,0,0,0,76,280,0,23,0,24,0,0,0,78,0,279,0,0],[0,0,0,0,281,80,80,22,23,0,0,0,0,173,281,0,0,0,0],[0,0,0,169,170,171,278,22,23,0,24,0,0,173,174,0,0,27,0],[0,0,0,169,170,278,278,22,23,0,24,0,0,0,174,0,0,27,0],[0,282,90,0,0,76,280,0,23,0,24,0,0,0,78,0,282,0,0],[0,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,0,0,0],[0,75,0,0,0,175,175,0,23,0,24,0,0,0,78,0,75,0,0],[0,0,0,0,0,80,80,22,23,0,0,0,0,0,0,0,0,0,0],[0,0,0,283,0,284,285,0,23,0,24,0,0,286,0,0,0,0,0],[0,75,0,176,0,175,175,0,23,0,24,0,0,0,78,0,75,0,0],[0,0,0,0,0,0,0,22,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,287,287,85,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,288,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,184,185,186,187,23,0,24,0,0,0,78,0,0,0,0],[0,0,0,0,0,185,185,187,23,0,24,0,0,0,78,0,0,0,0],[0,0,0,0,0,289,289,187,23,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,290,289,289,187,23,0,0,0,0,0,0,0,0,0,0],[0,0,0,291,292,293,294,295,23,0,24,0,0,0,78,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,277,170,278,278,22,23,0,24,0,0,0,174,0,0,27,0],[0,0,0,0,281,80,80,22,23,0,0,0,0,192,281,0,0,0,0],[0,0,0,189,170,190,278,22,23,0,24,0,0,192,174,0,0,27,0],[0,0,0,189,170,278,278,22,23,0,24,0,0,0,174,0,0,27,0],[0,0,0,76,0,177,177,22,23,0,24,0,0,0,78,0,0,0,0],[0,0,0,0,0,175,296,0,23,0,24,0,0,0,78,0,0,0,0],[0,0,0,297,196,298,298,32,33,0,34,0,0,0,200,0,0,37,0],[0,299,0,0,0,97,300,0,33,0,34,0,0,0,99,0,299,0,0],[0,0,0,0,301,101,101,32,33,0,0,0,0,199,301,0,0,0,0],[0,0,0,195,196,197,298,32,33,0,34,0,0,199,200,0,0,37,0],[0,0,0,195,196,298,298,32,33,0,34,0,0,0,200,0,0,37,0],[0,302,111,0,0,97,300,0,33,0,34,0,0,0,99,0,302,0,0],[0,0,0,0,0,0,0,0,33,0,0,0,0,0,0,0,0,0,0],[0,96,0,0,0,201,201,0,33,0,34,0,0,0,99,0,96,0,0],[0,0,0,0,0,101,101,32,33,0,0,0,0,0,0,0,0,0,0],[0,0,0,303,0,304,305,0,33,0,34,0,0,306,0,0,0,0,0],[0,96,0,202,0,201,201,0,33,0,34,0,0,0,99,0,96,0,0],[0,0,0,0,0,0,0,32,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,307,307,106,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,308,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,210,211,212,213,33,0,34,0,0,0,99,0,0,0,0],[0,0,0,0,0,211,211,213,33,0,34,0,0,0,99,0,0,0,0],[0,0,0,0,0,309,309,213,33,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,310,309,309,213,33,0,0,0,0,0,0,0,0,0,0],[0,0,0,311,312,313,314,315,33,0,34,0,0,0,99,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,297,196,298,298,32,33,0,34,0,0,0,200,0,0,37,0],[0,0,0,0,301,101,101,32,33,0,0,0,0,218,301,0,0,0,0],[0,0,0,215,196,216,298,32,33,0,34,0,0,218,200,0,0,37,0],[0,0,0,215,196,298,298,32,33,0,34,0,0,0,200,0,0,37,0],[0,0,0,97,0,203,203,32,33,0,34,0,0,0,99,0,0,0,0],[0,0,0,0,0,201,316,0,33,0,34,0,0,0,99,0,0,0,0],[0,0,0,0,116,222,222,8,9,0,10,0,0,0,120,0,0,16,0],[0,0,0,0,225,44,44,8,9,0,0,0,0,0,225,0,0,0,0],[0,0,0,317,318,319,320,8,9,0,10,0,0,321,322,0,0,16,0],[0,223,0,323,0,123,123,8,9,0,10,0,0,0,42,0,223,0,0],[0,223,0,0,0,121,324,0,9,0,10,0,0,0,42,0,223,0,0],[0,0,0,325,318,326,327,8,9,0,10,0,0,328,322,0,0,16,0],[0,0,0,64,0,121,121,0,9,0,10,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,9,0,0,0,0,230,0,0,0,0,0],[0,0,0,227,0,228,121,0,9,0,10,0,0,230,0,0,0,0,0],[0,0,0,227,0,121,121,0,9,0,10,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,49,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,46,0,0],[0,0,0,0,0,329,329,133,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,330,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,236,237,238,239,9,0,10,0,0,0,42,0,0,0,0],[0,0,0,0,0,237,237,239,9,0,10,0,0,0,42,0,0,0,0],[0,0,0,0,0,331,331,239,9,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,332,331,331,239,9,0,0,0,0,0,0,0,0,0,0],[0,0,0,333,40,121,334,0,9,0,10,0,0,0,42,0,0,0,0],[0,0,0,335,241,336,336,57,58,0,59,0,0,0,245,0,0,62,0],[0,337,0,0,0,137,338,0,58,0,59,0,0,0,139,0,337,0,0],[0,0,0,0,339,141,141,57,58,0,0,0,0,244,339,0,0,0,0],[0,0,0,240,241,242,336,57,58,0,59,0,0,244,245,0,0,62,0],[0,0,0,240,241,336,336,57,58,0,59,0,0,0,245,0,0,62,0],[0,340,151,0,0,137,338,0,58,0,59,0,0,0,139,0,340,0,0],[0,0,0,0,0,0,0,0,58,0,0,0,0,0,0,0,0,0,0],[0,136,0,0,0,246,246,0,58,0,59,0,0,0,139,0,136,0,0],[0,0,0,0,0,141,141,57,58,0,0,0,0,0,0,0,0,0,0],[0,0,0,341,0,342,343,0,58,0,59,0,0,344,0,0,0,0,0],[0,136,0,247,0,246,246,0,58,0,59,0,0,0,139,0,136,0,0],[0,0,0,0,0,0,0,57,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,345,345,146,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,346,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,255,256,257,258,58,0,59,0,0,0,139,0,0,0,0],[0,0,0,0,0,256,256,258,58,0,59,0,0,0,139,0,0,0,0],[0,0,0,0,0,347,347,258,58,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,348,347,347,258,58,0,0,0,0,0,0,0,0,0,0],[0,0,0,349,350,351,352,353,58,0,59,0,0,0,139,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,335,241,336,336,57,58,0,59,0,0,0,245,0,0,62,0],[0,0,0,0,339,141,141,57,58,0,0,0,0,263,339,0,0,0,0],[0,0,0,260,241,261,336,57,58,0,59,0,0,263,245,0,0,62,0],[0,0,0,260,241,336,336,57,58,0,59,0,0,0,245,0,0,62,0],[0,0,0,137,0,248,248,57,58,0,59,0,0,0,139,0,0,0,0],[0,0,0,0,0,246,354,0,58,0,59,0,0,0,139,0,0,0,0],[0,0,0,0,0,126,126,8,23,0,0,0,0,0,0,0,0,0,0],[0,355,90,0,0,121,125,0,9,0,10,0,0,0,42,0,355,0,0],[0,0,0,0,0,356,356,269,23,0,0,0,0,0,0,0,0,0,0],[0,0,0,357,358,359,360,361,161,0,162,0,0,0,362,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,162,0,0,0,0,0,0,0,0],[0,0,0,0,0,270,0,0,0,0,162,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,363,0,0,0,0,0,0,0,0],[0,0,0,364,116,365,366,8,161,0,162,0,0,367,120,0,0,16,0],[0,0,0,0,0,368,368,0,161,0,162,0,0,0,0,0,0,0,0],[0,0,0,40,0,121,121,0,9,0,10,0,0,0,42,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,170,278,278,22,23,0,24,0,0,0,174,0,0,27,0],[0,0,0,0,281,80,80,22,23,0,0,0,0,0,281,0,0,0,0],[0,0,0,369,370,371,372,22,23,0,24,0,0,373,374,0,0,27,0],[0,279,0,375,0,177,177,22,23,0,24,0,0,0,78,0,279,0,0],[0,279,0,0,0,175,376,0,23,0,24,0,0,0,78,0,279,0,0],[0,0,0,377,370,378,379,22,23,0,24,0,0,380,374,0,0,27,0],[0,0,0,90,0,175,175,0,23,0,24,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,23,0,0,0,0,286,0,0,0,0,0],[0,0,0,283,0,284,175,0,23,0,24,0,0,286,0,0,0,0,0],[0,0,0,283,0,175,175,0,23,0,24,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,85,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,82,0,0],[0,0,0,0,0,381,381,187,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,382,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,292,293,294,295,23,0,24,0,0,0,78,0,0,0,0],[0,0,0,0,0,293,293,295,23,0,24,0,0,0,78,0,0,0,0],[0,0,0,0,0,383,383,295,23,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,384,383,383,295,23,0,0,0,0,0,0,0,0,0,0],[0,0,0,385,76,175,386,0,23,0,24,0,0,0,78,0,0,0,0],[0,0,0,76,0,175,175,0,23,0,24,0,0,0,78,0,0,0,0],[0,0,0,0,196,298,298,32,33,0,34,0,0,0,200,0,0,37,0],[0,0,0,0,301,101,101,32,33,0,0,0,0,0,301,0,0,0,0],[0,0,0,387,388,389,390,32,33,0,34,0,0,391,392,0,0,37,0],[0,299,0,393,0,203,203,32,33,0,34,0,0,0,99,0,299,0,0],[0,299,0,0,0,201,394,0,33,0,34,0,0,0,99,0,299,0,0],[0,0,0,395,388,396,397,32,33,0,34,0,0,398,392,0,0,37,0],[0,0,0,111,0,201,201,0,33,0,34,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,33,0,0,0,0,306,0,0,0,0,0],[0,0,0,303,0,304,201,0,33,0,34,0,0,306,0,0,0,0,0],[0,0,0,303,0,201,201,0,33,0,34,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,106,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,103,0,0],[0,0,0,0,0,399,399,213,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,400,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,312,313,314,315,33,0,34,0,0,0,99,0,0,0,0],[0,0,0,0,0,313,313,315,33,0,34,0,0,0,99,0,0,0,0],[0,0,0,0,0,401,401,315,33,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,402,401,401,315,33,0,0,0,0,0,0,0,0,0,0],[0,0,0,403,97,201,404,0,33,0,34,0,0,0,99,0,0,0,0],[0,0,0,97,0,201,201,0,33,0,34,0,0,0,99,0,0,0,0],[0,0,0,405,318,406,406,8,9,0,10,0,0,0,322,0,0,16,0],[0,407,0,0,0,40,408,0,9,0,10,0,0,0,42,0,407,0,0],[0,0,0,0,409,44,44,8,9,0,0,0,0,321,409,0,0,0,0],[0,0,0,317,318,319,406,8,9,0,10,0,0,321,322,0,0,16,0],[0,0,0,317,318,406,406,8,9,0,10,0,0,0,322,0,0,16,0],[0,410,64,0,0,40,408,0,9,0,10,0,0,0,42,0,410,0,0],[0,223,0,0,0,121,121,0,9,0,10,0,0,0,42,0,223,0,0],[0,223,0,323,0,121,121,0,9,0,10,0,0,0,42,0,223,0,0],[0,0,0,405,318,406,406,8,9,0,10,0,0,0,322,0,0,16,0],[0,0,0,0,409,44,44,8,9,0,0,0,0,328,409,0,0,0,0],[0,0,0,325,318,326,406,8,9,0,10,0,0,328,322,0,0,16,0],[0,0,0,325,318,406,406,8,9,0,10,0,0,0,322,0,0,16,0],[0,0,0,0,0,0,0,133,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,130,0,0],[0,0,0,0,0,411,411,239,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,412,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,40,121,334,0,9,0,10,0,0,0,42,0,0,0,0],[0,0,0,0,413,0,0,0,9,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,241,336,336,57,58,0,59,0,0,0,245,0,0,62,0],[0,0,0,0,339,141,141,57,58,0,0,0,0,0,339,0,0,0,0],[0,0,0,414,415,416,417,57,58,0,59,0,0,418,419,0,0,62,0],[0,337,0,420,0,248,248,57,58,0,59,0,0,0,139,0,337,0,0],[0,337,0,0,0,246,421,0,58,0,59,0,0,0,139,0,337,0,0],[0,0,0,422,415,423,424,57,58,0,59,0,0,425,419,0,0,62,0],[0,0,0,151,0,246,246,0,58,0,59,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,58,0,0,0,0,344,0,0,0,0,0],[0,0,0,341,0,342,246,0,58,0,59,0,0,344,0,0,0,0,0],[0,0,0,341,0,246,246,0,58,0,59,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,146,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,143,0,0],[0,0,0,0,0,426,426,258,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,427,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,350,351,352,353,58,0,59,0,0,0,139,0,0,0,0],[0,0,0,0,0,351,351,353,58,0,59,0,0,0,139,0,0,0,0],[0,0,0,0,0,428,428,353,58,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,429,428,428,353,58,0,0,0,0,0,0,0,0,0,0],[0,0,0,430,137,246,431,0,58,0,59,0,0,0,139,0,0,0,0],[0,0,0,137,0,246,246,0,58,0,59,0,0,0,139,0,0,0,0],[0,0,0,432,116,433,434,8,161,0,162,0,0,435,120,0,0,16,0],[0,0,0,0,0,180,180,269,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,358,359,360,361,161,0,162,0,0,0,362,0,0,0,0],[0,0,0,0,0,359,359,361,161,0,162,0,0,0,362,0,0,0,0],[0,0,0,0,0,436,436,361,161,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,437,436,436,361,161,0,0,0,0,0,0,0,0,0,0],[0,0,0,438,439,440,441,442,161,0,162,0,0,0,362,0,0,0,0],[0,443,274,0,0,0,0,0,0,0,0,0,0,0,0,0,443,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,444,116,445,445,8,161,0,162,0,0,0,120,0,0,16,0],[0,0,0,0,225,44,44,8,161,0,0,0,0,367,225,0,0,0,0],[0,0,0,364,116,365,445,8,161,0,162,0,0,367,120,0,0,16,0],[0,0,0,364,116,445,445,8,161,0,162,0,0,0,120,0,0,16,0],[0,0,0,0,0,0,0,0,161,0,0,0,0,0,0,0,0,0,0],[0,0,0,446,370,447,447,22,23,0,24,0,0,0,374,0,0,27,0],[0,448,0,0,0,76,449,0,23,0,24,0,0,0,78,0,448,0,0],[0,0,0,0,450,80,80,22,23,0,0,0,0,373,450,0,0,0,0],[0,0,0,369,370,371,447,22,23,0,24,0,0,373,374,0,0,27,0],[0,0,0,369,370,447,447,22,23,0,24,0,0,0,374,0,0,27,0],[0,451,90,0,0,76,449,0,23,0,24,0,0,0,78,0,451,0,0],[0,279,0,0,0,175,175,0,23,0,24,0,0,0,78,0,279,0,0],[0,279,0,375,0,175,175,0,23,0,24,0,0,0,78,0,279,0,0],[0,0,0,446,370,447,447,22,23,0,24,0,0,0,374,0,0,27,0],[0,0,0,0,450,80,80,22,23,0,0,0,0,380,450,0,0,0,0],[0,0,0,377,370,378,447,22,23,0,24,0,0,380,374,0,0,27,0],[0,0,0,377,370,447,447,22,23,0,24,0,0,0,374,0,0,27,0],[0,0,0,0,0,0,0,187,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,184,0,0],[0,0,0,0,0,452,452,295,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,453,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,76,175,386,0,23,0,24,0,0,0,78,0,0,0,0],[0,0,0,0,454,0,0,0,23,0,0,0,0,0,0,0,0,0,0],[0,0,0,455,388,456,456,32,33,0,34,0,0,0,392,0,0,37,0],[0,457,0,0,0,97,458,0,33,0,34,0,0,0,99,0,457,0,0],[0,0,0,0,459,101,101,32,33,0,0,0,0,391,459,0,0,0,0],[0,0,0,387,388,389,456,32,33,0,34,0,0,391,392,0,0,37,0],[0,0,0,387,388,456,456,32,33,0,34,0,0,0,392,0,0,37,0],[0,460,111,0,0,97,458,0,33,0,34,0,0,0,99,0,460,0,0],[0,299,0,0,0,201,201,0,33,0,34,0,0,0,99,0,299,0,0],[0,299,0,393,0,201,201,0,33,0,34,0,0,0,99,0,299,0,0],[0,0,0,455,388,456,456,32,33,0,34,0,0,0,392,0,0,37,0],[0,0,0,0,459,101,101,32,33,0,0,0,0,398,459,0,0,0,0],[0,0,0,395,388,396,456,32,33,0,34,0,0,398,392,0,0,37,0],[0,0,0,395,388,456,456,32,33,0,34,0,0,0,392,0,0,37,0],[0,0,0,0,0,0,0,213,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,210,0,0],[0,0,0,0,0,461,461,315,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,462,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,97,201,404,0,33,0,34,0,0,0,99,0,0,0,0],[0,0,0,0,463,0,0,0,33,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,318,406,406,8,9,0,10,0,0,0,322,0,0,16,0],[0,0,0,0,409,44,44,8,9,0,0,0,0,0,409,0,0,0,0],[0,0,0,464,465,466,467,8,9,0,10,0,0,468,469,0,0,16,0],[0,407,0,470,0,123,123,8,9,0,10,0,0,0,42,0,407,0,0],[0,407,0,0,0,121,471,0,9,0,10,0,0,0,42,0,407,0,0],[0,0,0,472,465,473,474,8,9,0,10,0,0,475,469,0,0,16,0],[0,0,0,0,0,0,0,239,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,236,0,0],[0,0,0,0,0,0,476,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,477,415,478,478,57,58,0,59,0,0,0,419,0,0,62,0],[0,479,0,0,0,137,480,0,58,0,59,0,0,0,139,0,479,0,0],[0,0,0,0,481,141,141,57,58,0,0,0,0,418,481,0,0,0,0],[0,0,0,414,415,416,478,57,58,0,59,0,0,418,419,0,0,62,0],[0,0,0,414,415,478,478,57,58,0,59,0,0,0,419,0,0,62,0],[0,482,151,0,0,137,480,0,58,0,59,0,0,0,139,0,482,0,0],[0,337,0,0,0,246,246,0,58,0,59,0,0,0,139,0,337,0,0],[0,337,0,420,0,246,246,0,58,0,59,0,0,0,139,0,337,0,0],[0,0,0,477,415,478,478,57,58,0,59,0,0,0,419,0,0,62,0],[0,0,0,0,481,141,141,57,58,0,0,0,0,425,481,0,0,0,0],[0,0,0,422,415,423,478,57,58,0,59,0,0,425,419,0,0,62,0],[0,0,0,422,415,478,478,57,58,0,59,0,0,0,419,0,0,62,0],[0,0,0,0,0,0,0,258,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0],[0,0,0,0,0,483,483,353,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,484,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,137,246,431,0,58,0,59,0,0,0,139,0,0,0,0],[0,0,0,0,485,0,0,0,58,0,0,0,0,0,0,0,0,0,0],[0,0,0,444,116,445,445,8,161,0,162,0,0,0,120,0,0,16,0],[0,0,0,0,225,44,44,8,161,0,0,0,0,435,225,0,0,0,0],[0,0,0,432,116,433,445,8,161,0,162,0,0,435,120,0,0,16,0],[0,0,0,432,116,445,445,8,161,0,162,0,0,0,120,0,0,16,0],[0,0,0,0,0,486,486,361,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,487,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,439,440,441,442,161,0,162,0,0,0,362,0,0,0,0],[0,0,0,0,0,440,440,442,161,0,162,0,0,0,362,0,0,0,0],[0,0,0,0,0,488,488,442,161,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,489,488,488,442,161,0,0,0,0,0,0,0,0,0,0],[0,0,0,490,491,492,493,494,161,0,162,0,0,0,362,0,0,0,0],[0,0,0,495,0,496,497,0,161,0,162,0,0,498,0,0,0,0,0],[0,0,0,0,116,445,445,8,161,0,162,0,0,0,120,0,0,16,0],[0,0,0,0,225,44,44,8,161,0,0,0,0,0,225,0,0,0,0],[0,0,0,0,370,447,447,22,23,0,24,0,0,0,374,0,0,27,0],[0,0,0,0,450,80,80,22,23,0,0,0,0,0,450,0,0,0,0],[0,0,0,499,500,501,502,22,23,0,24,0,0,503,504,0,0,27,0],[0,448,0,505,0,177,177,22,23,0,24,0,0,0,78,0,448,0,0],[0,448,0,0,0,175,506,0,23,0,24,0,0,0,78,0,448,0,0],[0,0,0,507,500,508,509,22,23,0,24,0,0,510,504,0,0,27,0],[0,0,0,0,0,0,0,295,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,292,0,0],[0,0,0,0,0,0,511,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,388,456,456,32,33,0,34,0,0,0,392,0,0,37,0],[0,0,0,0,459,101,101,32,33,0,0,0,0,0,459,0,0,0,0],[0,0,0,512,513,514,515,32,33,0,34,0,0,516,517,0,0,37,0],[0,457,0,518,0,203,203,32,33,0,34,0,0,0,99,0,457,0,0],[0,457,0,0,0,201,519,0,33,0,34,0,0,0,99,0,457,0,0],[0,0,0,520,513,521,522,32,33,0,34,0,0,523,517,0,0,37,0],[0,0,0,0,0,0,0,315,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,312,0,0],[0,0,0,0,0,0,524,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,525,465,526,526,8,9,0,10,0,0,0,469,0,0,16,0],[0,527,0,0,0,40,528,0,9,0,10,0,0,0,42,0,527,0,0],[0,0,0,0,529,44,44,8,9,0,0,0,0,468,529,0,0,0,0],[0,0,0,464,465,466,526,8,9,0,10,0,0,468,469,0,0,16,0],[0,0,0,464,465,526,526,8,9,0,10,0,0,0,469,0,0,16,0],[0,530,64,0,0,40,528,0,9,0,10,0,0,0,42,0,530,0,0],[0,407,0,0,0,121,121,0,9,0,10,0,0,0,42,0,407,0,0],[0,407,0,470,0,121,121,0,9,0,10,0,0,0,42,0,407,0,0],[0,0,0,525,465,526,526,8,9,0,10,0,0,0,469,0,0,16,0],[0,0,0,0,529,44,44,8,9,0,0,0,0,475,529,0,0,0,0],[0,0,0,472,465,473,526,8,9,0,10,0,0,475,469,0,0,16,0],[0,0,0,472,465,526,526,8,9,0,10,0,0,0,469,0,0,16,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40,0,0],[0,0,0,0,415,478,478,57,58,0,59,0,0,0,419,0,0,62,0],[0,0,0,0,481,141,141,57,58,0,0,0,0,0,481,0,0,0,0],[0,0,0,531,532,533,534,57,58,0,59,0,0,535,536,0,0,62,0],[0,479,0,537,0,248,248,57,58,0,59,0,0,0,139,0,479,0,0],[0,479,0,0,0,246,538,0,58,0,59,0,0,0,139,0,479,0,0],[0,0,0,539,532,540,541,57,58,0,59,0,0,542,536,0,0,62,0],[0,0,0,0,0,0,0,353,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,350,0,0],[0,0,0,0,0,0,543,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,361,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,358,0,0],[0,0,0,0,0,544,544,442,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,545,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,491,492,493,494,161,0,162,0,0,0,362,0,0,0,0],[0,0,0,0,0,492,492,494,161,0,162,0,0,0,362,0,0,0,0],[0,0,0,0,0,546,546,494,161,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,547,546,546,494,161,0,0,0,0,0,0,0,0,0,0],[0,0,0,548,549,368,550,0,161,0,162,0,0,0,362,0,0,0,0],[0,0,0,274,0,368,368,0,161,0,162,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,161,0,0,0,0,498,0,0,0,0,0],[0,0,0,495,0,496,368,0,161,0,162,0,0,498,0,0,0,0,0],[0,0,0,495,0,368,368,0,161,0,162,0,0,0,0,0,0,0,0],[0,0,0,551,500,552,552,22,23,0,24,0,0,0,504,0,0,27,0],[0,553,0,0,0,76,554,0,23,0,24,0,0,0,78,0,553,0,0],[0,0,0,0,555,80,80,22,23,0,0,0,0,503,555,0,0,0,0],[0,0,0,499,500,501,552,22,23,0,24,0,0,503,504,0,0,27,0],[0,0,0,499,500,552,552,22,23,0,24,0,0,0,504,0,0,27,0],[0,556,90,0,0,76,554,0,23,0,24,0,0,0,78,0,556,0,0],[0,448,0,0,0,175,175,0,23,0,24,0,0,0,78,0,448,0,0],[0,448,0,505,0,175,175,0,23,0,24,0,0,0,78,0,448,0,0],[0,0,0,551,500,552,552,22,23,0,24,0,0,0,504,0,0,27,0],[0,0,0,0,555,80,80,22,23,0,0,0,0,510,555,0,0,0,0],[0,0,0,507,500,508,552,22,23,0,24,0,0,510,504,0,0,27,0],[0,0,0,507,500,552,552,22,23,0,24,0,0,0,504,0,0,27,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,76,0,0],[0,0,0,557,513,558,558,32,33,0,34,0,0,0,517,0,0,37,0],[0,559,0,0,0,97,560,0,33,0,34,0,0,0,99,0,559,0,0],[0,0,0,0,561,101,101,32,33,0,0,0,0,516,561,0,0,0,0],[0,0,0,512,513,514,558,32,33,0,34,0,0,516,517,0,0,37,0],[0,0,0,512,513,558,558,32,33,0,34,0,0,0,517,0,0,37,0],[0,562,111,0,0,97,560,0,33,0,34,0,0,0,99,0,562,0,0],[0,457,0,0,0,201,201,0,33,0,34,0,0,0,99,0,457,0,0],[0,457,0,518,0,201,201,0,33,0,34,0,0,0,99,0,457,0,0],[0,0,0,557,513,558,558,32,33,0,34,0,0,0,517,0,0,37,0],[0,0,0,0,561,101,101,32,33,0,0,0,0,523,561,0,0,0,0],[0,0,0,520,513,521,558,32,33,0,34,0,0,523,517,0,0,37,0],[0,0,0,520,513,558,558,32,33,0,34,0,0,0,517,0,0,37,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,97,0,0],[0,0,0,0,465,526,526,8,9,0,10,0,0,0,469,0,0,16,0],[0,0,0,0,529,44,44,8,9,0,0,0,0,0,529,0,0,0,0],[0,0,0,563,66,564,565,8,9,0,10,0,0,566,68,0,0,16,0],[0,527,0,567,0,123,123,8,9,0,10,0,0,0,42,0,527,0,0],[0,527,0,0,0,121,568,0,9,0,10,0,0,0,42,0,527,0,0],[0,0,0,569,66,570,571,8,9,0,10,0,0,572,68,0,0,16,0],[0,0,0,573,532,574,574,57,58,0,59,0,0,0,536,0,0,62,0],[0,575,0,0,0,137,576,0,58,0,59,0,0,0,139,0,575,0,0],[0,0,0,0,577,141,141,57,58,0,0,0,0,535,577,0,0,0,0],[0,0,0,531,532,533,574,57,58,0,59,0,0,535,536,0,0,62,0],[0,0,0,531,532,574,574,57,58,0,59,0,0,0,536,0,0,62,0],[0,578,151,0,0,137,576,0,58,0,59,0,0,0,139,0,578,0,0],[0,479,0,0,0,246,246,0,58,0,59,0,0,0,139,0,479,0,0],[0,479,0,537,0,246,246,0,58,0,59,0,0,0,139,0,479,0,0],[0,0,0,573,532,574,574,57,58,0,59,0,0,0,536,0,0,62,0],[0,0,0,0,577,141,141,57,58,0,0,0,0,542,577,0,0,0,0],[0,0,0,539,532,540,574,57,58,0,59,0,0,542,536,0,0,62,0],[0,0,0,539,532,574,574,57,58,0,59,0,0,0,536,0,0,62,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,137,0,0],[0,0,0,0,0,0,0,442,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,439,0,0],[0,0,0,0,0,579,579,494,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,580,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,549,368,550,0,161,0,162,0,0,0,362,0,0,0,0],[0,0,0,0,0,368,368,0,161,0,162,0,0,0,362,0,0,0,0],[0,0,0,0,581,0,0,0,161,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,500,552,552,22,23,0,24,0,0,0,504,0,0,27,0],[0,0,0,0,555,80,80,22,23,0,0,0,0,0,555,0,0,0,0],[0,0,0,582,91,583,584,22,23,0,24,0,0,585,93,0,0,27,0],[0,553,0,586,0,177,177,22,23,0,24,0,0,0,78,0,553,0,0],[0,553,0,0,0,175,587,0,23,0,24,0,0,0,78,0,553,0,0],[0,0,0,588,91,589,590,22,23,0,24,0,0,591,93,0,0,27,0],[0,0,0,0,513,558,558,32,33,0,34,0,0,0,517,0,0,37,0],[0,0,0,0,561,101,101,32,33,0,0,0,0,0,561,0,0,0,0],[0,0,0,592,112,593,594,32,33,0,34,0,0,595,114,0,0,37,0],[0,559,0,596,0,203,203,32,33,0,34,0,0,0,99,0,559,0,0],[0,559,0,0,0,201,597,0,33,0,34,0,0,0,99,0,559,0,0],[0,0,0,598,112,599,600,32,33,0,34,0,0,601,114,0,0,37,0],[0,0,0,602,66,67,67,8,9,0,10,0,0,0,68,0,0,16,0],[0,0,0,0,165,44,44,8,9,0,0,0,0,566,165,0,0,0,0],[0,0,0,563,66,564,67,8,9,0,10,0,0,566,68,0,0,16,0],[0,0,0,563,66,67,67,8,9,0,10,0,0,0,68,0,0,16,0],[0,527,0,0,0,121,121,0,9,0,10,0,0,0,42,0,527,0,0],[0,527,0,567,0,121,121,0,9,0,10,0,0,0,42,0,527,0,0],[0,0,0,602,66,67,67,8,9,0,10,0,0,0,68,0,0,16,0],[0,0,0,0,165,44,44,8,9,0,0,0,0,572,165,0,0,0,0],[0,0,0,569,66,570,67,8,9,0,10,0,0,572,68,0,0,16,0],[0,0,0,569,66,67,67,8,9,0,10,0,0,0,68,0,0,16,0],[0,0,0,0,532,574,574,57,58,0,59,0,0,0,536,0,0,62,0],[0,0,0,0,577,141,141,57,58,0,0,0,0,0,577,0,0,0,0],[0,0,0,603,152,604,605,57,58,0,59,0,0,606,154,0,0,62,0],[0,575,0,607,0,248,248,57,58,0,59,0,0,0,139,0,575,0,0],[0,575,0,0,0,246,608,0,58,0,59,0,0,0,139,0,575,0,0],[0,0,0,609,152,610,611,57,58,0,59,0,0,612,154,0,0,62,0],[0,0,0,0,0,0,0,494,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,491,0,0],[0,0,0,0,0,0,613,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,614,91,92,92,22,23,0,24,0,0,0,93,0,0,27,0],[0,0,0,0,194,80,80,22,23,0,0,0,0,585,194,0,0,0,0],[0,0,0,582,91,583,92,22,23,0,24,0,0,585,93,0,0,27,0],[0,0,0,582,91,92,92,22,23,0,24,0,0,0,93,0,0,27,0],[0,553,0,0,0,175,175,0,23,0,24,0,0,0,78,0,553,0,0],[0,553,0,586,0,175,175,0,23,0,24,0,0,0,78,0,553,0,0],[0,0,0,614,91,92,92,22,23,0,24,0,0,0,93,0,0,27,0],[0,0,0,0,194,80,80,22,23,0,0,0,0,591,194,0,0,0,0],[0,0,0,588,91,589,92,22,23,0,24,0,0,591,93,0,0,27,0],[0,0,0,588,91,92,92,22,23,0,24,0,0,0,93,0,0,27,0],[0,0,0,615,112,113,113,32,33,0,34,0,0,0,114,0,0,37,0],[0,0,0,0,220,101,101,32,33,0,0,0,0,595,220,0,0,0,0],[0,0,0,592,112,593,113,32,33,0,34,0,0,595,114,0,0,37,0],[0,0,0,592,112,113,113,32,33,0,34,0,0,0,114,0,0,37,0],[0,559,0,0,0,201,201,0,33,0,34,0,0,0,99,0,559,0,0],[0,559,0,596,0,201,201,0,33,0,34,0,0,0,99,0,559,0,0],[0,0,0,615,112,113,113,32,33,0,34,0,0,0,114,0,0,37,0],[0,0,0,0,220,101,101,32,33,0,0,0,0,601,220,0,0,0,0],[0,0,0,598,112,599,113,32,33,0,34,0,0,601,114,0,0,37,0],[0,0,0,598,112,113,113,32,33,0,34,0,0,0,114,0,0,37,0],[0,0,0,0,66,67,67,8,9,0,10,0,0,0,68,0,0,16,0],[0,0,0,616,152,153,153,57,58,0,59,0,0,0,154,0,0,62,0],[0,0,0,0,265,141,141,57,58,0,0,0,0,606,265,0,0,0,0],[0,0,0,603,152,604,153,57,58,0,59,0,0,606,154,0,0,62,0],[0,0,0,603,152,153,153,57,58,0,59,0,0,0,154,0,0,62,0],[0,575,0,0,0,246,246,0,58,0,59,0,0,0,139,0,575,0,0],[0,575,0,607,0,246,246,0,58,0,59,0,0,0,139,0,575,0,0],[0,0,0,616,152,153,153,57,58,0,59,0,0,0,154,0,0,62,0],[0,0,0,0,265,141,141,57,58,0,0,0,0,612,265,0,0,0,0],[0,0,0,609,152,610,153,57,58,0,59,0,0,612,154,0,0,62,0],[0,0,0,609,152,153,153,57,58,0,59,0,0,0,154,0,0,62,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,549,0,0],[0,0,0,0,91,92,92,22,23,0,24,0,0,0,93,0,0,27,0],[0,0,0,0,112,113,113,32,33,0,34,0,0,0,114,0,0,37,0],[0,0,0,0,152,153,153,57,58,0,59,0,0,0,154,0,0,62,0]],"accepting":[false,true,true,true,true,true,false,false,true,true,true,true,true,true,true,true,true,true,true,true,false,true,true,true,true,true,true,true,true,true,false,true,true,true,true,true,true,true,true,true,true,true,false,true,false,true,true,false,false,true,true,true,true,true,true,false,false,true,true,true,true,true,true,true,true,true,true,false,true,true,false,true,true,true,false,true,true,true,false,true,false,true,true,false,false,true,true,true,true,true,true,true,false,true,true,false,true,true,true,false,true,false,true,true,false,false,true,true,true,true,true,true,true,false,true,true,true,false,true,true,true,false,true,false,true,true,false,false,false,true,true,false,false,true,true,true,true,true,true,false,true,false,true,true,false,false,true,true,true,true,true,true,true,false,true,true,false,true,true,true,true,true,true,true,true,true,true,true,true,true,true,false,true,true,true,false,true,false,true,true,false,false,false,true,true,false,false,true,true,true,false,true,true,true,true,true,true,false,true,true,true,false,true,false,true,true,false,false,false,true,true,false,false,true,true,true,false,true,true,true,true,true,false,true,true,true,true,true,false,true,true,false,false,false,false,true,true,false,false,true,true,true,false,true,true,true,false,true,false,true,true,false,false,false,true,true,false,false,true,true,true,false,true,true,true,true,false,true,false,true,true,true,true,true,true,true,true,true,false,true,true,true,true,true,false,true,true,false,false,false,false,true,true,false,false,true,true,true,false,true,true,true,true,true,false,true,true,false,false,false,false,true,true,false,false,true,true,true,true,false,true,true,true,true,true,true,false,true,true,false,false,false,false,true,false,true,false,true,true,true,true,true,false,true,true,false,false,false,false,true,true,false,false,true,true,true,false,true,true,false,false,true,false,true,true,false,true,true,false,true,true,false,true,true,true,true,true,true,false,true,true,false,false,false,false,true,false,true,true,false,true,true,true,true,true,true,false,true,true,false,false,false,false,true,false,true,false,true,true,true,true,false,false,false,true,true,false,true,true,true,true,true,true,false,true,true,false,false,false,false,true,false,true,false,true,true,false,false,true,true,false,false,true,true,true,false,true,false,true,true,true,true,false,false,false,true,false,true,true,true,true,false,false,false,true,true,false,true,true,true,true,true,true,false,true,true,false,true,false,true,true,true,true,false,false,false,false,false,false,false,true,true,false,false,true,true,false,true,true,true,true,false,true,true,true,true,true,true,false,true,true,false,true,true,false,true,true,true,true,true,true,false,true,true,false,true,false,true,true,true,true,true,true,false,true,true,true,true,true,true,false,true,true,false,false,false,false,false,true,true,false,true,false,true,true,true,true,true,false,true,true,true,true,true,false,true,true,true,true,true,false,true,true,true,false,true,true,true,true,false,false,false,true,false,true,true,true,true,true,false,true,true,true,false,true,true,true,true,true,false,true,true,true,true,false,true,true,true,true,true,false,true,true,false,true,true,true],"tags":[[],["broken_cluster"],["consonant_syllable"],["vowel_syllable"],["broken_cluster"],["broken_cluster"],[],[],["broken_cluster"],["broken_cluster"],["broken_cluster"],["standalone_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],["consonant_syllable"],["broken_cluster"],["symbol_cluster"],["consonant_syllable"],["consonant_syllable"],[],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],["vowel_syllable"],["vowel_syllable"],[],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],[],["broken_cluster"],[],["broken_cluster"],["broken_cluster"],[],[],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],["standalone_cluster"],["standalone_cluster"],[],[],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],["broken_cluster"],["broken_cluster"],["consonant_syllable","broken_cluster"],["broken_cluster"],[],["broken_cluster"],["symbol_cluster"],[],["symbol_cluster"],["symbol_cluster"],["consonant_syllable"],[],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],[],["consonant_syllable"],[],["consonant_syllable"],["consonant_syllable"],[],[],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],[],["consonant_syllable"],["vowel_syllable"],[],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],[],["vowel_syllable"],[],["vowel_syllable"],["vowel_syllable"],[],[],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],[],["vowel_syllable"],["broken_cluster"],["broken_cluster"],[],["broken_cluster"],["broken_cluster"],["broken_cluster"],[],["broken_cluster"],[],["broken_cluster"],["broken_cluster"],[],[],[],["broken_cluster"],["broken_cluster"],[],[],["broken_cluster"],["broken_cluster"],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],[],["standalone_cluster"],[],["standalone_cluster"],["standalone_cluster"],[],[],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],[],["standalone_cluster"],["broken_cluster"],[],["broken_cluster"],["broken_cluster"],["consonant_syllable"],["consonant_syllable"],["consonant_syllable","broken_cluster"],["consonant_syllable","broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],["symbol_cluster"],["symbol_cluster"],["symbol_cluster"],["consonant_syllable"],["consonant_syllable"],[],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],[],["consonant_syllable"],[],["consonant_syllable"],["consonant_syllable"],[],[],[],["consonant_syllable"],["consonant_syllable"],[],[],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],[],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],["vowel_syllable"],["vowel_syllable"],[],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],[],["vowel_syllable"],[],["vowel_syllable"],["vowel_syllable"],[],[],[],["vowel_syllable"],["vowel_syllable"],[],[],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],[],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],["broken_cluster"],[],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],[],["broken_cluster"],["broken_cluster"],[],[],[],[],["broken_cluster"],["broken_cluster"],[],[],["broken_cluster"],["standalone_cluster"],["standalone_cluster"],[],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],[],["standalone_cluster"],[],["standalone_cluster"],["standalone_cluster"],[],[],[],["standalone_cluster"],["standalone_cluster"],[],[],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],[],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],[],["broken_cluster"],[],["consonant_syllable","broken_cluster"],["consonant_syllable","broken_cluster"],["consonant_syllable","broken_cluster"],["consonant_syllable","broken_cluster"],["consonant_syllable","broken_cluster"],["consonant_syllable","broken_cluster"],["broken_cluster"],["symbol_cluster"],["consonant_syllable"],[],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],[],["consonant_syllable"],["consonant_syllable"],[],[],[],[],["consonant_syllable"],["consonant_syllable"],[],[],["consonant_syllable"],["consonant_syllable"],["vowel_syllable"],[],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],[],["vowel_syllable"],["vowel_syllable"],[],[],[],[],["vowel_syllable"],["vowel_syllable"],[],[],["vowel_syllable"],["vowel_syllable"],["broken_cluster"],["broken_cluster"],[],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],[],["broken_cluster"],["broken_cluster"],[],[],[],[],["broken_cluster"],[],["standalone_cluster"],[],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],[],["standalone_cluster"],["standalone_cluster"],[],[],[],[],["standalone_cluster"],["standalone_cluster"],[],[],["standalone_cluster"],["standalone_cluster"],["consonant_syllable","broken_cluster"],[],["consonant_syllable","broken_cluster"],["consonant_syllable","broken_cluster"],[],[],["consonant_syllable","broken_cluster"],[],["consonant_syllable","broken_cluster"],["consonant_syllable","broken_cluster"],[],["consonant_syllable","broken_cluster"],["consonant_syllable","broken_cluster"],[],["consonant_syllable"],["consonant_syllable"],[],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],[],["consonant_syllable"],["consonant_syllable"],[],[],[],[],["consonant_syllable"],[],["vowel_syllable"],["vowel_syllable"],[],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],[],["vowel_syllable"],["vowel_syllable"],[],[],[],[],["vowel_syllable"],[],["broken_cluster"],[],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],[],[],[],["standalone_cluster"],["standalone_cluster"],[],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],[],["standalone_cluster"],["standalone_cluster"],[],[],[],[],["standalone_cluster"],[],["consonant_syllable","broken_cluster"],[],["consonant_syllable","broken_cluster"],["consonant_syllable","broken_cluster"],[],[],["consonant_syllable","broken_cluster"],["consonant_syllable","broken_cluster"],[],[],["consonant_syllable","broken_cluster"],["consonant_syllable","broken_cluster"],["consonant_syllable","broken_cluster"],[],["consonant_syllable"],[],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],[],[],[],["vowel_syllable"],[],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],[],[],[],["broken_cluster"],["broken_cluster"],[],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],[],["broken_cluster"],["broken_cluster"],[],["standalone_cluster"],[],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],[],[],[],[],[],[],[],["consonant_syllable","broken_cluster"],["consonant_syllable","broken_cluster"],[],[],["consonant_syllable","broken_cluster"],["consonant_syllable","broken_cluster"],[],["consonant_syllable","broken_cluster"],["consonant_syllable","broken_cluster"],["consonant_syllable"],["consonant_syllable"],[],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],[],["consonant_syllable"],["consonant_syllable"],[],["vowel_syllable"],["vowel_syllable"],[],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],[],["vowel_syllable"],["vowel_syllable"],[],["broken_cluster"],[],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],["standalone_cluster"],["standalone_cluster"],[],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],[],["standalone_cluster"],["standalone_cluster"],[],[],[],[],[],["consonant_syllable","broken_cluster"],["consonant_syllable","broken_cluster"],[],["consonant_syllable"],[],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],["vowel_syllable"],[],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],["broken_cluster"],[],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],[],["broken_cluster"],["broken_cluster"],["standalone_cluster"],[],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],[],[],[],["consonant_syllable"],[],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],["consonant_syllable"],[],["consonant_syllable"],["consonant_syllable"],["vowel_syllable"],[],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],["vowel_syllable"],[],["vowel_syllable"],["vowel_syllable"],["broken_cluster"],["standalone_cluster"],[],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],["standalone_cluster"],[],["standalone_cluster"],["standalone_cluster"],[],["consonant_syllable"],["vowel_syllable"],["standalone_cluster"]]}');var Pf={};Pf=JSON.parse('{"categories":["O","IND","S","GB","B","FM","CGJ","VMAbv","VMPst","VAbv","VPst","CMBlw","VPre","VBlw","H","VMBlw","CMAbv","MBlw","CS","R","SUB","MPst","MPre","FAbv","FPst","FBlw","SMAbv","SMBlw","VMPre","ZWNJ","ZWJ","WJ","VS","N","HN","MAbv"],"decompositions":{"2507":[2503,2494],"2508":[2503,2519],"2888":[2887,2902],"2891":[2887,2878],"2892":[2887,2903],"3018":[3014,3006],"3019":[3015,3006],"3020":[3014,3031],"3144":[3142,3158],"3264":[3263,3285],"3271":[3270,3285],"3272":[3270,3286],"3274":[3270,3266],"3275":[3270,3266,3285],"3402":[3398,3390],"3403":[3399,3390],"3404":[3398,3415],"3546":[3545,3530],"3548":[3545,3535],"3549":[3545,3535,3530],"3550":[3545,3551],"3635":[3661,3634],"3763":[3789,3762],"3955":[3953,3954],"3957":[3953,3956],"3958":[4018,3968],"3959":[4018,3953,3968],"3960":[4019,3968],"3961":[4019,3953,3968],"3969":[3953,3968],"6971":[6970,6965],"6973":[6972,6965],"6976":[6974,6965],"6977":[6975,6965],"6979":[6978,6965],"69934":[69937,69927],"69935":[69938,69927],"70475":[70471,70462],"70476":[70471,70487],"70843":[70841,70842],"70844":[70841,70832],"70846":[70841,70845],"71098":[71096,71087],"71099":[71097,71087]},"stateTable":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[2,2,3,4,4,5,0,6,7,8,9,10,11,12,13,14,15,16,0,17,18,11,19,20,21,22,0,0,23,0,0,2,0,24,0,25],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,26,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,27,28,0,0,0,0,27,0,0,0],[0,0,0,0,0,29,0,30,31,32,33,34,35,36,37,38,39,40,0,0,41,35,42,43,44,45,0,0,46,0,0,0,39,0,0,47],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,5,0,6,7,0,0,0,0,0,0,14,0,0,0,0,0,0,0,20,21,22,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,5,0,0,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20,21,22,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,5,0,6,7,8,9,0,0,12,0,14,0,0,0,0,0,0,0,20,21,22,0,0,23,0,0,0,0,0,0,0],[0,0,0,0,0,5,0,6,7,0,9,0,0,0,0,14,0,0,0,0,0,0,0,20,21,22,0,0,23,0,0,0,0,0,0,0],[0,0,0,0,0,5,0,6,7,8,9,10,11,12,13,14,0,16,0,0,18,11,19,20,21,22,0,0,23,0,0,0,0,0,0,25],[0,0,0,0,0,5,0,6,7,8,9,0,11,12,0,14,0,0,0,0,0,0,0,20,21,22,0,0,23,0,0,0,0,0,0,0],[0,0,0,0,0,5,0,6,7,0,9,0,0,12,0,14,0,0,0,0,0,0,0,20,21,22,0,0,23,0,0,0,0,0,0,0],[0,0,0,0,18,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,5,0,0,7,0,0,0,0,0,0,14,0,0,0,0,0,0,0,20,21,22,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,5,0,6,7,8,9,10,11,12,13,14,15,16,0,0,18,11,19,20,21,22,0,0,23,0,0,0,0,0,0,25],[0,0,0,0,0,5,0,6,7,8,9,0,11,12,0,14,0,0,0,0,0,11,0,20,21,22,0,0,23,0,0,0,0,0,0,0],[0,0,0,4,4,5,0,6,7,8,9,10,11,12,13,14,15,16,0,0,18,11,19,20,21,22,0,0,23,0,0,0,0,0,0,25],[0,0,0,0,0,5,0,6,7,8,9,48,11,12,13,14,48,16,0,0,18,11,19,20,21,22,0,0,23,0,0,0,49,0,0,25],[0,0,0,0,0,5,0,6,7,8,9,0,11,12,0,14,0,16,0,0,0,11,0,20,21,22,0,0,23,0,0,0,0,0,0,25],[0,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20,21,22,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,21,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,21,22,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,5,0,6,7,0,0,0,0,0,0,14,0,0,0,0,0,0,0,20,21,22,0,0,23,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,50,0,51,0],[0,0,0,0,0,5,0,6,7,8,9,0,11,12,0,14,0,16,0,0,0,11,0,20,21,22,0,0,23,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,27,28,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,28,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,29,0,30,31,0,0,0,0,0,0,38,0,0,0,0,0,0,0,43,44,45,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,29,0,0,31,0,0,0,0,0,0,0,0,0,0,0,0,0,0,43,44,45,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,29,0,30,31,32,33,0,0,36,0,38,0,0,0,0,0,0,0,43,44,45,0,0,46,0,0,0,0,0,0,0],[0,0,0,0,0,29,0,30,31,0,33,0,0,0,0,38,0,0,0,0,0,0,0,43,44,45,0,0,46,0,0,0,0,0,0,0],[0,0,0,0,0,29,0,30,31,32,33,34,35,36,37,38,0,40,0,0,41,35,42,43,44,45,0,0,46,0,0,0,0,0,0,47],[0,0,0,0,0,29,0,30,31,32,33,0,35,36,0,38,0,0,0,0,0,0,0,43,44,45,0,0,46,0,0,0,0,0,0,0],[0,0,0,0,0,29,0,30,31,0,33,0,0,36,0,38,0,0,0,0,0,0,0,43,44,45,0,0,46,0,0,0,0,0,0,0],[0,0,0,0,41,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,29,0,0,31,0,0,0,0,0,0,38,0,0,0,0,0,0,0,43,44,45,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,29,0,30,31,32,33,34,35,36,37,38,39,40,0,0,41,35,42,43,44,45,0,0,46,0,0,0,0,0,0,47],[0,0,0,0,0,29,0,30,31,32,33,0,35,36,0,38,0,0,0,0,0,35,0,43,44,45,0,0,46,0,0,0,0,0,0,0],[0,0,0,0,0,29,0,30,31,32,33,52,35,36,37,38,52,40,0,0,41,35,42,43,44,45,0,0,46,0,0,0,53,0,0,47],[0,0,0,0,0,29,0,30,31,32,33,0,35,36,0,38,0,40,0,0,0,35,0,43,44,45,0,0,46,0,0,0,0,0,0,47],[0,0,0,0,0,29,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,43,44,45,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,29,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,44,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,29,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,44,45,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,29,0,30,31,0,0,0,0,0,0,38,0,0,0,0,0,0,0,43,44,45,0,0,46,0,0,0,0,0,0,0],[0,0,0,0,0,29,0,30,31,32,33,0,35,36,0,38,0,40,0,0,0,35,0,43,44,45,0,0,46,0,0,0,0,0,0,0],[0,0,0,0,0,5,0,6,7,8,9,48,11,12,13,14,0,16,0,0,18,11,19,20,21,22,0,0,23,0,0,0,0,0,0,25],[0,0,0,0,0,5,0,6,7,8,9,48,11,12,13,14,48,16,0,0,18,11,19,20,21,22,0,0,23,0,0,0,0,0,0,25],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,51,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,54,0,0],[0,0,0,0,0,29,0,30,31,32,33,52,35,36,37,38,0,40,0,0,41,35,42,43,44,45,0,0,46,0,0,0,0,0,0,47],[0,0,0,0,0,29,0,30,31,32,33,52,35,36,37,38,52,40,0,0,41,35,42,43,44,45,0,0,46,0,0,0,0,0,0,47],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,50,0,51,0]],"accepting":[false,true,true,true,true,true,true,true,true,true,true,true,true,false,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true],"tags":[[],["broken_cluster"],["independent_cluster"],["symbol_cluster"],["standard_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],[],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],["broken_cluster"],["numeral_cluster"],["broken_cluster"],["independent_cluster"],["symbol_cluster"],["symbol_cluster"],["standard_cluster"],["standard_cluster"],["standard_cluster"],["standard_cluster"],["standard_cluster"],["standard_cluster"],["standard_cluster"],["standard_cluster"],["virama_terminated_cluster"],["standard_cluster"],["standard_cluster"],["standard_cluster"],["standard_cluster"],["standard_cluster"],["standard_cluster"],["standard_cluster"],["standard_cluster"],["standard_cluster"],["standard_cluster"],["broken_cluster"],["broken_cluster"],["numeral_cluster"],["number_joiner_terminated_cluster"],["standard_cluster"],["standard_cluster"],["numeral_cluster"]]}');const Ot={X:1,C:2,V:4,N:8,H:16,ZWNJ:32,ZWJ:64,M:128,SM:256,VD:512,A:1024,Placeholder:2048,Dotted_Circle:4096,RS:8192,Coeng:16384,Repha:32768,Ra:65536,CM:131072,Symbol:262144},bt={Start:1,Ra_To_Become_Reph:2,Pre_M:4,Pre_C:8,Base_C:16,After_Main:32,Above_C:64,Before_Sub:128,Below_C:256,After_Sub:512,Before_Post:1024,Post_C:2048,After_Post:4096,Final_C:8192,SMVD:16384,End:32768},Hj=Ot.C|Ot.Ra|Ot.CM|Ot.V|Ot.Placeholder|Ot.Dotted_Circle,x3=Ot.ZWJ|Ot.ZWNJ,sc=Ot.H|Ot.Coeng,Ey={Default:{hasOldSpec:!1,virama:0,basePos:"Last",rephPos:bt.Before_Post,rephMode:"Implicit",blwfMode:"Pre_And_Post"},Devanagari:{hasOldSpec:!0,virama:2381,basePos:"Last",rephPos:bt.Before_Post,rephMode:"Implicit",blwfMode:"Pre_And_Post"},Bengali:{hasOldSpec:!0,virama:2509,basePos:"Last",rephPos:bt.After_Sub,rephMode:"Implicit",blwfMode:"Pre_And_Post"},Gurmukhi:{hasOldSpec:!0,virama:2637,basePos:"Last",rephPos:bt.Before_Sub,rephMode:"Implicit",blwfMode:"Pre_And_Post"},Gujarati:{hasOldSpec:!0,virama:2765,basePos:"Last",rephPos:bt.Before_Post,rephMode:"Implicit",blwfMode:"Pre_And_Post"},Oriya:{hasOldSpec:!0,virama:2893,basePos:"Last",rephPos:bt.After_Main,rephMode:"Implicit",blwfMode:"Pre_And_Post"},Tamil:{hasOldSpec:!0,virama:3021,basePos:"Last",rephPos:bt.After_Post,rephMode:"Implicit",blwfMode:"Pre_And_Post"},Telugu:{hasOldSpec:!0,virama:3149,basePos:"Last",rephPos:bt.After_Post,rephMode:"Explicit",blwfMode:"Post_Only"},Kannada:{hasOldSpec:!0,virama:3277,basePos:"Last",rephPos:bt.After_Post,rephMode:"Implicit",blwfMode:"Post_Only"},Malayalam:{hasOldSpec:!0,virama:3405,basePos:"Last",rephPos:bt.After_Main,rephMode:"Log_Repha",blwfMode:"Pre_And_Post"},Khmer:{hasOldSpec:!1,virama:6098,basePos:"First",rephPos:bt.Ra_To_Become_Reph,rephMode:"Vis_Repha",blwfMode:"Pre_And_Post"}},Yj={6078:[6081,6078],6079:[6081,6079],6080:[6081,6080],6084:[6081,6084],6085:[6081,6085]},{decompositions:qj}=bf(Pf),b3=new gf(Im("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")),Zj=new N_(bf(v3));class An extends Xs{static planFeatures(e){e.addStage(jj),e.addStage(["locl","ccmp"]),e.addStage(Jj),e.addStage("nukt"),e.addStage("akhn"),e.addStage("rphf",!1),e.addStage("rkrf"),e.addStage("pref",!1),e.addStage("blwf",!1),e.addStage("abvf",!1),e.addStage("half",!1),e.addStage("pstf",!1),e.addStage("vatu"),e.addStage("cjct"),e.addStage("cfar",!1),e.addStage(Qj),e.addStage({local:["init"],global:["pres","abvs","blws","psts","haln","dist","abvm","blwm","calt","clig"]}),e.unicodeScript=zZ(e.script),e.indicConfig=Ey[e.unicodeScript]||Ey.Default,e.isOldSpec=e.indicConfig.hasOldSpec&&e.script[e.script.length-1]!=="2"}static assignFeatures(e,t){for(let n=t.length-1;n>=0;n--){let i=t[n].codePoints[0],s=Yj[i]||qj[i];if(s){let o=s.map(a=>{let u=e.font.glyphForCodePoint(a);return new ii(e.font,u.id,[a],t[n].features)});t.splice(n,1,...o)}}}}Sr(An,"zeroMarkWidths","NONE");function Lp(r){return b3.get(r.codePoints[0])>>8}function y3(r){return 1<<(b3.get(r.codePoints[0])&255)}class h0{constructor(e,t,n,i){this.category=e,this.position=t,this.syllableType=n,this.syllable=i}}function jj(r,e){let t=0,n=0;for(let[i,s,o]of Zj.match(e.map(Lp))){if(i>n){++t;for(let a=n;a<i;a++)e[a].shaperInfo=new h0(Ot.X,bt.End,"non_indic_cluster",t)}++t;for(let a=i;a<=s;a++)e[a].shaperInfo=new h0(1<<Lp(e[a]),y3(e[a]),o[0],t);n=s+1}if(n<e.length){++t;for(let i=n;i<e.length;i++)e[i].shaperInfo=new h0(Ot.X,bt.End,"non_indic_cluster",t)}}function ao(r){return r.shaperInfo.category&Hj}function gi(r){return r.shaperInfo.category&x3}function Hi(r){return r.shaperInfo.category&sc}function Zi(r,e){for(let n of r)n.features={[e]:!0};return r[0]._font._layoutEngine.engine.GSUBProcessor.applyFeatures([e],r),r.length===1}function Kj(r,e,t){let n=[t,e,t];return Zi(n.slice(0,2),"blwf")||Zi(n.slice(1,3),"blwf")?bt.Below_C:Zi(n.slice(0,2),"pstf")||Zi(n.slice(1,3),"pstf")||Zi(n.slice(0,2),"pref")||Zi(n.slice(1,3),"pref")?bt.Post_C:bt.Base_C}function Jj(r,e,t){let n=t.indicConfig,i=r._layoutEngine.engine.GSUBProcessor.features,s=r.glyphForCodePoint(9676).id,o=r.glyphForCodePoint(n.virama).id;if(o){let a=new ii(r,o,[n.virama]);for(let u=0;u<e.length;u++)e[u].shaperInfo.position===bt.Base_C&&(e[u].shaperInfo.position=Kj(r,e[u].copy(),a))}for(let a=0,u=W0(e,0);a<e.length;a=u,u=W0(e,a)){let{category:f,syllableType:h}=e[a].shaperInfo;if(h==="symbol_cluster"||h==="non_indic_cluster")continue;if(h==="broken_cluster"&&s){let E=new ii(r,s,[9676]);E.shaperInfo=new h0(1<<Lp(E),y3(E),e[a].shaperInfo.syllableType,e[a].shaperInfo.syllable);let T=a;for(;T<u&&e[T].shaperInfo.category===Ot.Repha;)T++;e.splice(T++,0,E),u++}let p=u,g=a,b=!1;if(n.rephPos!==bt.Ra_To_Become_Reph&&i.rphf&&a+3<=u&&(n.rephMode==="Implicit"&&!gi(e[a+2])||n.rephMode==="Explicit"&&e[a+2].shaperInfo.category===Ot.ZWJ)){let E=[e[a].copy(),e[a+1].copy(),e[a+2].copy()];if(Zi(E.slice(0,2),"rphf")||n.rephMode==="Explicit"&&Zi(E,"rphf")){for(g+=2;g<u&&gi(e[g]);)g++;p=a,b=!0}}else if(n.rephMode==="Log_Repha"&&e[a].shaperInfo.category===Ot.Repha){for(g++;g<u&&gi(e[g]);)g++;p=a,b=!0}switch(n.basePos){case"Last":{let E=u,T=!1;do{let M=e[--E].shaperInfo;if(ao(e[E])){if(M.position!==bt.Below_C&&(M.position!==bt.Post_C||T)){p=E;break}M.position===bt.Below_C&&(T=!0),p=E}else if(a<E&&M.category===Ot.ZWJ&&e[E-1].shaperInfo.category===Ot.H)break}while(E>g);break}case"First":p=a;for(let E=p+1;E<u;E++)ao(e[E])&&(e[E].shaperInfo.position=bt.Below_C)}b&&p===a&&g-p<=2&&(b=!1);for(let E=a;E<p;E++){let T=e[E].shaperInfo;T.position=Math.min(bt.Pre_C,T.position)}p<u&&(e[p].shaperInfo.position=bt.Base_C);for(let E=p+1;E<u;E++)if(e[E].shaperInfo.category===Ot.M){for(let T=E+1;T<u;T++)if(ao(e[T])){e[T].shaperInfo.position=bt.Final_C;break}break}if(b&&(e[a].shaperInfo.position=bt.Ra_To_Become_Reph),t.isOldSpec){let E=t.unicodeScript!=="Malayalam";for(let T=p+1;T<u;T++)if(e[T].shaperInfo.category===Ot.H){let M;for(M=u-1;M>T&&!(ao(e[M])||E&&e[M].shaperInfo.category===Ot.H);M--);if(e[M].shaperInfo.category!==Ot.H&&M>T){let B=e[T];e.splice(T,0,...e.splice(T+1,M-T)),e[M]=B}break}}let C=bt.Start;for(let E=a;E<u;E++){let T=e[E].shaperInfo;if(T.category&(x3|Ot.N|Ot.RS|Ot.CM|sc&T.category)){if(T.position=C,T.category===Ot.H&&T.position===bt.Pre_M){for(let M=E;M>a;M--)if(e[M-1].shaperInfo.position!==bt.Pre_M){T.position=e[M-1].shaperInfo.position;break}}}else T.position!==bt.SMVD&&(C=T.position)}let y=p;for(let E=p+1;E<u;E++)if(ao(e[E])){for(let T=y+1;T<E;T++)e[T].shaperInfo.position<bt.SMVD&&(e[T].shaperInfo.position=e[E].shaperInfo.position);y=E}else e[E].shaperInfo.category===Ot.M&&(y=E);let w=e.slice(a,u);w.sort((E,T)=>E.shaperInfo.position-T.shaperInfo.position),e.splice(a,w.length,...w);for(let E=a;E<u;E++)if(e[E].shaperInfo.position===bt.Base_C){p=E;break}for(let E=a;E<u&&e[E].shaperInfo.position===bt.Ra_To_Become_Reph;E++)e[E].features.rphf=!0;let A=!t.isOldSpec&&n.blwfMode==="Pre_And_Post";for(let E=a;E<p;E++)e[E].features.half=!0,A&&(e[E].features.blwf=!0);for(let E=p+1;E<u;E++)e[E].features.abvf=!0,e[E].features.pstf=!0,e[E].features.blwf=!0;if(t.isOldSpec&&t.unicodeScript==="Devanagari")for(let E=a;E+1<p;E++)e[E].shaperInfo.category===Ot.Ra&&e[E+1].shaperInfo.category===Ot.H&&(E+1===p||e[E+2].shaperInfo.category===Ot.ZWJ)&&(e[E].features.blwf=!0,e[E+1].features.blwf=!0);let O=2;if(i.pref&&p+O<u)for(let E=p+1;E+O-1<u;E++){let T=[e[E].copy(),e[E+1].copy()];if(Zi(T,"pref")){for(let M=0;M<O;M++)e[E++].features.pref=!0;if(i.cfar)for(;E<u;E++)e[E].features.cfar=!0;break}}for(let E=a+1;E<u;E++)if(gi(e[E])){let T=e[E].shaperInfo.category===Ot.ZWNJ,M=E;do M--,T&&delete e[M].features.half;while(M>a&&!ao(e[M]))}}}function Qj(r,e,t){let n=t.indicConfig,i=r._layoutEngine.engine.GSUBProcessor.features;for(let s=0,o=W0(e,0);s<e.length;s=o,o=W0(e,s)){let a=!!i.pref,u=s;for(;u<o;u++)if(e[u].shaperInfo.position>=bt.Base_C){if(a&&u+1<o){for(let f=u+1;f<o;f++)if(e[f].features.pref){if(!(e[f].substituted&&e[f].isLigated&&!e[f].isMultiplied)){for(u=f;u<o&&Hi(e[u]);)u++;e[u].shaperInfo.position=bt.BASE_C,a=!1}break}}if(t.unicodeScript==="Malayalam")for(let f=u+1;f<o;f++){for(;f<o&&gi(e[f]);)f++;if(f===o||!Hi(e[f]))break;for(f++;f<o&&gi(e[f]);)f++;f<o&&ao(e[f])&&e[f].shaperInfo.position===bt.Below_C&&(u=f,e[u].shaperInfo.position=bt.Base_C)}s<u&&e[u].shaperInfo.position>bt.Base_C&&u--;break}if(u===o&&s<u&&e[u-1].shaperInfo.category===Ot.ZWJ&&u--,u<o)for(;s<u&&e[u].shaperInfo.category&(Ot.N|sc);)u--;if(s+1<o&&s<u){let f=u===o?u-2:u-1;if(t.unicodeScript!=="Malayalam"&&t.unicodeScript!=="Tamil"){for(;f>s&&!(e[f].shaperInfo.category&(Ot.M|sc));)f--;Hi(e[f])&&e[f].shaperInfo.position!==bt.Pre_M?f+1<o&&gi(e[f+1])&&f++:f=s}if(s<f&&e[f].shaperInfo.position!==bt.Pre_M){for(let h=f;h>s;h--)if(e[h-1].shaperInfo.position===bt.Pre_M){let p=h-1;p<u&&u<=f&&u--;let g=e[p];e.splice(p,0,...e.splice(p+1,f-p)),e[f]=g,f--}}}if(s+1<o&&e[s].shaperInfo.position===bt.Ra_To_Become_Reph&&e[s].shaperInfo.category===Ot.Repha!==(e[s].isLigated&&!e[s].isMultiplied)){let f,h=n.rephPos,p=!1;if(h!==bt.After_Post){for(f=s+1;f<u&&!Hi(e[f]);)f++;if(f<u&&Hi(e[f])&&(f+1<u&&gi(e[f+1])&&f++,p=!0),!p&&h===bt.After_Main){for(f=u;f+1<o&&e[f+1].shaperInfo.position<=bt.After_Main;)f++;p=f<o}if(!p&&h===bt.After_Sub){for(f=u;f+1<o&&!(e[f+1].shaperInfo.position&(bt.Post_C|bt.After_Post|bt.SMVD));)f++;p=f<o}}if(!p){for(f=s+1;f<u&&!Hi(e[f]);)f++;f<u&&Hi(e[f])&&(f+1<u&&gi(e[f+1])&&f++,p=!0)}if(!p){for(f=o-1;f>s&&e[f].shaperInfo.position===bt.SMVD;)f--;if(Hi(e[f]))for(let b=u+1;b<f;b++)e[b].shaperInfo.category===Ot.M&&f--}let g=e[s];e.splice(s,0,...e.splice(s+1,f-s)),e[f]=g,s<u&&u<=f&&u--}if(a&&u+1<o){for(let f=u+1;f<o;f++)if(e[f].features.pref){if(e[f].isLigated&&!e[f].isMultiplied){let h=u;if(t.unicodeScript!=="Malayalam"&&t.unicodeScript!=="Tamil"){for(;h>s&&!(e[h-1].shaperInfo.category&(Ot.M|sc));)h--;if(h>s&&e[h-1].shaperInfo.category===Ot.M){let b=f;for(let C=u+1;C<b;C++)if(e[C].shaperInfo.category===Ot.M){h--;break}}}h>s&&Hi(e[h-1])&&h<o&&gi(e[h])&&h++;let p=f,g=e[p];e.splice(h+1,0,...e.splice(h,p-h)),e[h]=g,h<=u&&u<p&&u++}break}}e[s].shaperInfo.position===bt.Pre_M&&(!s||!/Cf|Mn/.test(xf(e[s-1].codePoints[0])))&&(e[s].features.init=!0)}}function W0(r,e){if(e>=r.length)return e;let t=r[e].shaperInfo.syllable;for(;++e<r.length&&r[e].shaperInfo.syllable===t;);return e}const{categories:eK,decompositions:Ay}=bf(Pf),tK=new gf(Im("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")),nK=new N_(bf(Pf));class It extends Xs{static planFeatures(e){e.addStage(iK),e.addStage(["locl","ccmp","nukt","akhn"]),e.addStage(Iy),e.addStage(["rphf"],!1),e.addStage(sK),e.addStage(Iy),e.addStage(["pref"]),e.addStage(oK),e.addStage(["rkrf","abvf","blwf","half","pstf","vatu","cjct"]),e.addStage(aK),e.addStage(["abvs","blws","pres","psts","dist","abvm","blwm"])}static assignFeatures(e,t){for(let n=t.length-1;n>=0;n--){let i=t[n].codePoints[0];if(Ay[i]){let s=Ay[i].map(o=>{let a=e.font.glyphForCodePoint(o);return new ii(e.font,a.id,[o],t[n].features)});t.splice(n,1,...s)}}}}Sr(It,"zeroMarkWidths","BEFORE_GPOS");function Ty(r){return tK.get(r.codePoints[0])}class rK{constructor(e,t,n){this.category=e,this.syllableType=t,this.syllable=n}}function iK(r,e){let t=0;for(let[n,i,s]of nK.match(e.map(Ty))){++t;for(let a=n;a<=i;a++)e[a].shaperInfo=new rK(eK[Ty(e[a])],s[0],t);let o=e[n].shaperInfo.category==="R"?1:Math.min(3,i-n);for(let a=n;a<n+o;a++)e[a].features.rphf=!0}}function Iy(r,e){for(let t of e)t.substituted=!1}function sK(r,e){for(let t of e)t.substituted&&t.features.rphf&&(t.shaperInfo.category="R")}function oK(r,e){for(let t of e)t.substituted&&(t.shaperInfo.category="VPre")}function aK(r,e){let t=r.glyphForCodePoint(9676).id;for(let n=0,i=Ly(e,0);n<e.length;n=i,i=Ly(e,n)){let s,o,a=e[n].shaperInfo,u=a.syllableType;if(!(u!=="virama_terminated_cluster"&&u!=="standard_cluster"&&u!=="broken_cluster")){if(u==="broken_cluster"&&t){let f=new ii(r,t,[9676]);for(f.shaperInfo=a,s=n;s<i&&e[s].shaperInfo.category==="R";s++);e.splice(++s,0,f),i++}if(a.category==="R"&&i-n>1){for(s=n+1;s<i;s++)if(a=e[s].shaperInfo,Dy(a)||Ju(e[s])){Ju(e[s])&&s--,e.splice(n,0,...e.splice(n+1,s-n),e[s]);break}}for(s=n,o=i;s<i;s++)a=e[s].shaperInfo,Dy(a)||Ju(e[s])?o=Ju(e[s])?s+1:s:(a.category==="VPre"||a.category==="VMPre")&&o<s&&e.splice(o,1,e[s],...e.splice(o,s-o))}}}function Ly(r,e){if(e>=r.length)return e;let t=r[e].shaperInfo.syllable;for(;++e<r.length&&r[e].shaperInfo.syllable===t;);return e}function Ju(r){return r.shaperInfo.category==="H"&&!r.isLigated}function Dy(r){return r.category==="B"||r.category==="GB"}const lK={arab:As,mong:As,syrc:As,"nko ":As,phag:As,mand:As,mani:As,phlp:As,hang:d3,bng2:An,beng:An,dev2:An,deva:An,gjr2:An,gujr:An,guru:An,gur2:An,knda:An,knd2:An,mlm2:An,mlym:An,ory2:An,orya:An,taml:An,tml2:An,telu:An,tel2:An,khmr:An,bali:It,batk:It,brah:It,bugi:It,buhd:It,cakm:It,cham:It,dupl:It,egyp:It,gran:It,hano:It,java:It,kthi:It,kali:It,khar:It,khoj:It,sind:It,lepc:It,limb:It,mahj:It,mtei:It,modi:It,hmng:It,rjng:It,saur:It,shrd:It,sidd:It,sinh:An,sund:It,sylo:It,tglg:It,tagb:It,tale:It,lana:It,tavt:It,takr:It,tibt:It,tfng:It,tirh:It,latn:Xs,DFLT:Xs};function cK(r){Array.isArray(r)||(r=[r]);for(let e of r){let t=lK[e];if(t)return t}return Xs}class uK extends U0{applyLookup(e,t){switch(e){case 1:{let i=this.coverageIndex(t.coverage);if(i===-1)return!1;let s=this.glyphIterator.cur;switch(t.version){case 1:s.id=s.id+t.deltaGlyphID&65535;break;case 2:s.id=t.substitute.get(i);break}return!0}case 2:{let i=this.coverageIndex(t.coverage);if(i!==-1){let s=t.sequences.get(i);if(s.length===0)return this.glyphs.splice(this.glyphIterator.index,1),!0;this.glyphIterator.cur.id=s[0],this.glyphIterator.cur.ligatureComponent=0;let o=this.glyphIterator.cur.features,a=this.glyphIterator.cur,u=s.slice(1).map((f,h)=>{let p=new ii(this.font,f,void 0,o);return p.shaperInfo=a.shaperInfo,p.isLigated=a.isLigated,p.ligatureComponent=h+1,p.substituted=!0,p.isMultiplied=!0,p});return this.glyphs.splice(this.glyphIterator.index+1,0,...u),!0}return!1}case 3:{let i=this.coverageIndex(t.coverage);if(i!==-1){let s=0;return this.glyphIterator.cur.id=t.alternateSet.get(i)[s],!0}return!1}case 4:{let i=this.coverageIndex(t.coverage);if(i===-1)return!1;for(let s of t.ligatureSets.get(i)){let o=this.sequenceMatchIndices(1,s.components);if(!o)continue;let a=this.glyphIterator.cur,u=a.codePoints.slice();for(let y of o)u.push(...this.glyphs[y].codePoints);let f=new ii(this.font,s.glyph,u,a.features);f.shaperInfo=a.shaperInfo,f.isLigated=!0,f.substituted=!0;let h=a.isMark;for(let y=0;y<o.length&&h;y++)h=this.glyphs[o[y]].isMark;f.ligatureID=h?null:this.ligatureID++;let p=a.ligatureID,g=a.codePoints.length,b=g,C=this.glyphIterator.index+1;for(let y of o){if(h)C=y;else for(;C<y;){var n=b-g+Math.min(this.glyphs[C].ligatureComponent||1,g);this.glyphs[C].ligatureID=f.ligatureID,this.glyphs[C].ligatureComponent=n,C++}p=this.glyphs[C].ligatureID,g=this.glyphs[C].codePoints.length,b+=g,C++}if(p&&!h)for(let y=C;y<this.glyphs.length&&this.glyphs[y].ligatureID===p;y++){var n=b-g+Math.min(this.glyphs[y].ligatureComponent||1,g);this.glyphs[y].ligatureComponent=n}for(let y=o.length-1;y>=0;y--)this.glyphs.splice(o[y],1);return this.glyphs[this.glyphIterator.index]=f,!0}return!1}case 5:return this.applyContext(t);case 6:return this.applyChainingContext(t);case 7:return this.applyLookup(t.lookupType,t.extension);default:throw new Error(`GSUB lookupType ${e} is not supported`)}}}class fK extends U0{applyPositionValue(e,t){let n=this.positions[this.glyphIterator.peekIndex(e)];t.xAdvance!=null&&(n.xAdvance+=t.xAdvance),t.yAdvance!=null&&(n.yAdvance+=t.yAdvance),t.xPlacement!=null&&(n.xOffset+=t.xPlacement),t.yPlacement!=null&&(n.yOffset+=t.yPlacement);let i=this.font._variationProcessor,s=this.font.GDEF&&this.font.GDEF.itemVariationStore;i&&s&&(t.xPlaDevice&&(n.xOffset+=i.getDelta(s,t.xPlaDevice.a,t.xPlaDevice.b)),t.yPlaDevice&&(n.yOffset+=i.getDelta(s,t.yPlaDevice.a,t.yPlaDevice.b)),t.xAdvDevice&&(n.xAdvance+=i.getDelta(s,t.xAdvDevice.a,t.xAdvDevice.b)),t.yAdvDevice&&(n.yAdvance+=i.getDelta(s,t.yAdvDevice.a,t.yAdvDevice.b)))}applyLookup(e,t){switch(e){case 1:{let i=this.coverageIndex(t.coverage);if(i===-1)return!1;switch(t.version){case 1:this.applyPositionValue(0,t.value);break;case 2:this.applyPositionValue(0,t.values.get(i));break}return!0}case 2:{let i=this.glyphIterator.peek();if(!i)return!1;let s=this.coverageIndex(t.coverage);if(s===-1)return!1;switch(t.version){case 1:let o=t.pairSets.get(s);for(let f of o)if(f.secondGlyph===i.id)return this.applyPositionValue(0,f.value1),this.applyPositionValue(1,f.value2),!0;return!1;case 2:let a=this.getClassID(this.glyphIterator.cur.id,t.classDef1),u=this.getClassID(i.id,t.classDef2);if(a===-1||u===-1)return!1;var n=t.classRecords.get(a).get(u);return this.applyPositionValue(0,n.value1),this.applyPositionValue(1,n.value2),!0}}case 3:{let i=this.glyphIterator.peekIndex(),s=this.glyphs[i];if(!s)return!1;let o=t.entryExitRecords[this.coverageIndex(t.coverage)];if(!o||!o.exitAnchor)return!1;let a=t.entryExitRecords[this.coverageIndex(t.coverage,s.id)];if(!a||!a.entryAnchor)return!1;let u=this.getAnchor(a.entryAnchor),f=this.getAnchor(o.exitAnchor),h=this.positions[this.glyphIterator.index],p=this.positions[i],g;switch(this.direction){case"ltr":h.xAdvance=f.x+h.xOffset,g=u.x+p.xOffset,p.xAdvance-=g,p.xOffset-=g;break;case"rtl":g=f.x+h.xOffset,h.xAdvance-=g,h.xOffset-=g,p.xAdvance=u.x+p.xOffset;break}return this.glyphIterator.flags.rightToLeft?(this.glyphIterator.cur.cursiveAttachment=i,h.yOffset=u.y-f.y):(s.cursiveAttachment=this.glyphIterator.index,h.yOffset=f.y-u.y),!0}case 4:{let i=this.coverageIndex(t.markCoverage);if(i===-1)return!1;let s=this.glyphIterator.index;for(;--s>=0&&(this.glyphs[s].isMark||this.glyphs[s].ligatureComponent>0););if(s<0)return!1;let o=this.coverageIndex(t.baseCoverage,this.glyphs[s].id);if(o===-1)return!1;let a=t.markArray[i],u=t.baseArray[o][a.class];return this.applyAnchor(a,u,s),!0}case 5:{let i=this.coverageIndex(t.markCoverage);if(i===-1)return!1;let s=this.glyphIterator.index;for(;--s>=0&&this.glyphs[s].isMark;);if(s<0)return!1;let o=this.coverageIndex(t.ligatureCoverage,this.glyphs[s].id);if(o===-1)return!1;let a=t.ligatureArray[o],u=this.glyphIterator.cur,f=this.glyphs[s],h=f.ligatureID&&f.ligatureID===u.ligatureID&&u.ligatureComponent>0?Math.min(u.ligatureComponent,f.codePoints.length)-1:f.codePoints.length-1,p=t.markArray[i],g=a[h][p.class];return this.applyAnchor(p,g,s),!0}case 6:{let i=this.coverageIndex(t.mark1Coverage);if(i===-1)return!1;let s=this.glyphIterator.peekIndex(-1),o=this.glyphs[s];if(!o||!o.isMark)return!1;let a=this.glyphIterator.cur,u=!1;if(a.ligatureID===o.ligatureID?a.ligatureID?a.ligatureComponent===o.ligatureComponent&&(u=!0):u=!0:(a.ligatureID&&!a.ligatureComponent||o.ligatureID&&!o.ligatureComponent)&&(u=!0),!u)return!1;let f=this.coverageIndex(t.mark2Coverage,o.id);if(f===-1)return!1;let h=t.mark1Array[i],p=t.mark2Array[f][h.class];return this.applyAnchor(h,p,s),!0}case 7:return this.applyContext(t);case 8:return this.applyChainingContext(t);case 9:return this.applyLookup(t.lookupType,t.extension);default:throw new Error(`Unsupported GPOS table: ${e}`)}}applyAnchor(e,t,n){let i=this.getAnchor(t),s=this.getAnchor(e.markAnchor);this.positions[n];let o=this.positions[this.glyphIterator.index];o.xOffset=i.x-s.x,o.yOffset=i.y-s.y,this.glyphIterator.cur.markAttachment=n}getAnchor(e){let t=e.xCoordinate,n=e.yCoordinate,i=this.font._variationProcessor,s=this.font.GDEF&&this.font.GDEF.itemVariationStore;return i&&s&&(e.xDeviceTable&&(t+=i.getDelta(s,e.xDeviceTable.a,e.xDeviceTable.b)),e.yDeviceTable&&(n+=i.getDelta(s,e.yDeviceTable.a,e.yDeviceTable.b))),{x:t,y:n}}applyFeatures(e,t,n){super.applyFeatures(e,t,n);for(var i=0;i<this.glyphs.length;i++)this.fixCursiveAttachment(i);this.fixMarkAttachment()}fixCursiveAttachment(e){let t=this.glyphs[e];if(t.cursiveAttachment!=null){let n=t.cursiveAttachment;t.cursiveAttachment=null,this.fixCursiveAttachment(n),this.positions[e].yOffset+=this.positions[n].yOffset}}fixMarkAttachment(){for(let e=0;e<this.glyphs.length;e++){let t=this.glyphs[e];if(t.markAttachment!=null){let n=t.markAttachment;if(this.positions[e].xOffset+=this.positions[n].xOffset,this.positions[e].yOffset+=this.positions[n].yOffset,this.direction==="ltr")for(let i=n;i<e;i++)this.positions[e].xOffset-=this.positions[i].xAdvance,this.positions[e].yOffset-=this.positions[i].yAdvance;else for(let i=n+1;i<e+1;i++)this.positions[e].xOffset+=this.positions[i].xAdvance,this.positions[e].yOffset+=this.positions[i].yAdvance}}}}class hK{setup(e){this.glyphInfos=e.glyphs.map(n=>new ii(this.font,n.id,[...n.codePoints]));let t=null;this.GPOSProcessor&&(t=this.GPOSProcessor.selectScript(e.script,e.language,e.direction)),this.GSUBProcessor&&(t=this.GSUBProcessor.selectScript(e.script,e.language,e.direction)),this.shaper=cK(t),this.plan=new hj(this.font,t,e.direction),this.shaper.plan(this.plan,this.glyphInfos,e.features);for(let n in this.plan.allFeatures)e.features[n]=!0}substitute(e){this.GSUBProcessor&&(this.plan.process(this.GSUBProcessor,this.glyphInfos),e.glyphs=this.glyphInfos.map(t=>this.font.getGlyph(t.id,t.codePoints)))}position(e){return this.shaper.zeroMarkWidths==="BEFORE_GPOS"&&this.zeroMarkAdvances(e.positions),this.GPOSProcessor&&this.plan.process(this.GPOSProcessor,this.glyphInfos,e.positions),this.shaper.zeroMarkWidths==="AFTER_GPOS"&&this.zeroMarkAdvances(e.positions),e.direction==="rtl"&&(e.glyphs.reverse(),e.positions.reverse()),this.GPOSProcessor&&this.GPOSProcessor.features}zeroMarkAdvances(e){for(let t=0;t<this.glyphInfos.length;t++)this.glyphInfos[t].isMark&&(e[t].xAdvance=0,e[t].yAdvance=0)}cleanup(){this.glyphInfos=null,this.plan=null,this.shaper=null}getAvailableFeatures(e,t){let n=[];return this.GSUBProcessor&&(this.GSUBProcessor.selectScript(e,t),n.push(...Object.keys(this.GSUBProcessor.features))),this.GPOSProcessor&&(this.GPOSProcessor.selectScript(e,t),n.push(...Object.keys(this.GPOSProcessor.features))),n}constructor(e){this.font=e,this.glyphInfos=null,this.plan=null,this.GSUBProcessor=null,this.GPOSProcessor=null,this.fallbackPosition=!0,e.GSUB&&(this.GSUBProcessor=new uK(e,e.GSUB)),e.GPOS&&(this.GPOSProcessor=new fK(e,e.GPOS))}}class dK{layout(e,t,n,i,s){if(typeof t=="string"&&(s=i,i=n,n=t,t=[]),typeof e=="string"){n==null&&(n=GZ(e));var o=this.font.glyphsForString(e)}else{if(n==null){let f=[];for(let h of e)f.push(...h.codePoints);n=$Z(f)}var o=e}let a=new XZ(o,t,n,i,s);return o.length===0?(a.positions=[],a):(this.engine&&this.engine.setup&&this.engine.setup(a),this.substitute(a),this.position(a),this.hideDefaultIgnorables(a.glyphs,a.positions),this.engine&&this.engine.cleanup&&this.engine.cleanup(),a)}substitute(e){this.engine&&this.engine.substitute&&this.engine.substitute(e)}position(e){e.positions=e.glyphs.map(n=>new HZ(n.advanceWidth));let t=null;this.engine&&this.engine.position&&(t=this.engine.position(e)),!t&&(!this.engine||this.engine.fallbackPosition)&&(this.unicodeLayoutEngine||(this.unicodeLayoutEngine=new VZ(this.font)),this.unicodeLayoutEngine.positionGlyphs(e.glyphs,e.positions)),(!t||!t.kern)&&e.features.kern!==!1&&this.font.kern&&(this.kernProcessor||(this.kernProcessor=new UZ(this.font)),this.kernProcessor.process(e.glyphs,e.positions),e.features.kern=!0)}hideDefaultIgnorables(e,t){let n=this.font.glyphForCodePoint(32);for(let i=0;i<e.length;i++)this.isDefaultIgnorable(e[i].codePoints[0])&&(e[i]=n,t[i].xAdvance=0,t[i].yAdvance=0)}isDefaultIgnorable(e){let t=e>>16;if(t===0)switch(e>>8){case 0:return e===173;case 3:return e===847;case 6:return e===1564;case 23:return 6068<=e&&e<=6069;case 24:return 6155<=e&&e<=6158;case 32:return 8203<=e&&e<=8207||8234<=e&&e<=8238||8288<=e&&e<=8303;case 254:return 65024<=e&&e<=65039||e===65279;case 255:return 65520<=e&&e<=65528;default:return!1}else switch(t){case 1:return 113824<=e&&e<=113827||119155<=e&&e<=119162;case 14:return 917504<=e&&e<=921599;default:return!1}}getAvailableFeatures(e,t){let n=[];return this.engine&&n.push(...this.engine.getAvailableFeatures(e,t)),this.font.kern&&n.indexOf("kern")===-1&&n.push("kern"),n}stringsForGlyph(e){let t=new Set,n=this.font._cmapProcessor.codePointsForGlyph(e);for(let i of n)t.add(String.fromCodePoint(i));if(this.engine&&this.engine.stringsForGlyph)for(let i of this.engine.stringsForGlyph(e))t.add(i);return Array.from(t)}constructor(e){this.font=e,this.unicodeLayoutEngine=null,this.kernProcessor=null,this.font.morx?this.engine=new fj(this.font):(this.font.GSUB||this.font.GPOS)&&(this.engine=new hK(this.font))}}const pK={moveTo:"M",lineTo:"L",quadraticCurveTo:"Q",bezierCurveTo:"C",closePath:"Z"};class il{toFunction(){return e=>{this.commands.forEach(t=>e[t.command].apply(e,t.args))}}toSVG(){return this.commands.map(t=>{let n=t.args.map(i=>Math.round(i*100)/100);return`${pK[t.command]}${n.join(" ")}`}).join("")}get cbox(){if(!this._cbox){let e=new Ws;for(let t of this.commands)for(let n=0;n<t.args.length;n+=2)e.addPoint(t.args[n],t.args[n+1]);this._cbox=Object.freeze(e)}return this._cbox}get bbox(){if(this._bbox)return this._bbox;let e=new Ws,t=0,n=0,i=O=>Math.pow(1-O,3)*b[A]+3*Math.pow(1-O,2)*O*C[A]+3*(1-O)*Math.pow(O,2)*y[A]+Math.pow(O,3)*w[A];for(let O of this.commands)switch(O.command){case"moveTo":case"lineTo":let[E,T]=O.args;e.addPoint(E,T),t=E,n=T;break;case"quadraticCurveTo":case"bezierCurveTo":if(O.command==="quadraticCurveTo")var[s,o,p,g]=O.args,a=t+2/3*(s-t),u=n+2/3*(o-n),f=p+2/3*(s-p),h=g+2/3*(o-g);else var[a,u,f,h,p,g]=O.args;e.addPoint(p,g);for(var b=[t,n],C=[a,u],y=[f,h],w=[p,g],A=0;A<=1;A++){let M=6*b[A]-12*C[A]+6*y[A],B=-3*b[A]+9*C[A]-9*y[A]+3*w[A];if(O=3*C[A]-3*b[A],B===0){if(M===0)continue;let G=-O/M;0<G&&G<1&&(A===0?e.addPoint(i(G),e.maxY):A===1&&e.addPoint(e.maxX,i(G)));continue}let F=Math.pow(M,2)-4*O*B;if(F<0)continue;let I=(-M+Math.sqrt(F))/(2*B);0<I&&I<1&&(A===0?e.addPoint(i(I),e.maxY):A===1&&e.addPoint(e.maxX,i(I)));let N=(-M-Math.sqrt(F))/(2*B);0<N&&N<1&&(A===0?e.addPoint(i(N),e.maxY):A===1&&e.addPoint(e.maxX,i(N)))}t=p,n=g;break}return this._bbox=Object.freeze(e)}mapPoints(e){let t=new il;for(let n of this.commands){let i=[];for(let s=0;s<n.args.length;s+=2){let[o,a]=e(n.args[s],n.args[s+1]);i.push(o,a)}t[n.command](...i)}return t}transform(e,t,n,i,s,o){return this.mapPoints((a,u)=>{const f=e*a+n*u+s,h=t*a+i*u+o;return[f,h]})}translate(e,t){return this.transform(1,0,0,1,e,t)}rotate(e){let t=Math.cos(e),n=Math.sin(e);return this.transform(t,n,-n,t,0,0)}scale(e,t=e){return this.transform(e,0,0,t,0,0)}constructor(){this.commands=[],this._bbox=null,this._cbox=null}}for(let r of["moveTo","lineTo","quadraticCurveTo","bezierCurveTo","closePath"])il.prototype[r]=function(...e){return this._bbox=this._cbox=null,this.commands.push({command:r,args:e}),this};var zl=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];class Ai{_getPath(){return new il}_getCBox(){return this.path.cbox}_getBBox(){return this.path.bbox}_getTableMetrics(e){if(this.id<e.metrics.length)return e.metrics.get(this.id);let t=e.metrics.get(e.metrics.length-1);return{advance:t?t.advance:0,bearing:e.bearings.get(this.id-e.metrics.length)||0}}_getMetrics(e){if(this._metrics)return this._metrics;let{advance:t,bearing:n}=this._getTableMetrics(this._font.hmtx);if(this._font.vmtx)var{advance:i,bearing:s}=this._getTableMetrics(this._font.vmtx);else{let o;if((typeof e>"u"||e===null)&&({cbox:e}=this),(o=this._font["OS/2"])&&o.version>0)var i=Math.abs(o.typoAscender-o.typoDescender),s=o.typoAscender-e.maxY;else{let{hhea:a}=this._font;var i=Math.abs(a.ascent-a.descent),s=a.ascent-e.maxY}}return this._font._variationProcessor&&this._font.HVAR&&(t+=this._font._variationProcessor.getAdvanceAdjustment(this.id,this._font.HVAR)),this._metrics={advanceWidth:t,advanceHeight:i,leftBearing:n,topBearing:s}}get cbox(){return this._getCBox()}get bbox(){return this._getBBox()}get path(){return this._getPath()}getScaledPath(e){let t=1/this._font.unitsPerEm*e;return this.path.scale(t)}get advanceWidth(){return this._getMetrics().advanceWidth}get advanceHeight(){return this._getMetrics().advanceHeight}get ligatureCaretPositions(){}_getName(){let{post:e}=this._font;if(!e)return null;switch(e.version){case 1:return zl[this.id];case 2:let t=e.glyphNameIndex[this.id];return t<zl.length?zl[t]:e.names[t-zl.length];case 2.5:return zl[this.id+e.offsets[this.id]];case 4:return String.fromCharCode(e.map[this.id])}}get name(){return this._getName()}render(e,t){e.save();let n=1/this._font.head.unitsPerEm*t;e.scale(n,n),this.path.toFunction()(e),e.fill(),e.restore()}constructor(e,t,n){this.id=e,this.codePoints=t,this._font=n,this.isMark=this.codePoints.length>0&&this.codePoints.every(F_),this.isLigature=this.codePoints.length>1}}Qn([er],Ai.prototype,"cbox",null);Qn([er],Ai.prototype,"bbox",null);Qn([er],Ai.prototype,"path",null);Qn([er],Ai.prototype,"advanceWidth",null);Qn([er],Ai.prototype,"advanceHeight",null);Qn([er],Ai.prototype,"name",null);let Oy=new Pe({numberOfContours:Ge,xMin:Ge,yMin:Ge,xMax:Ge,yMax:Ge});const mK=1,gK=2,vK=4,xK=8,bK=16,yK=32,wK=1,_K=8,Ry=32,SK=64,CK=128,PK=256;class Qr{copy(){return new Qr(this.onCurve,this.endContour,this.x,this.y)}constructor(e,t,n=0,i=0){this.onCurve=e,this.endContour=t,this.x=n,this.y=i}}class MK{constructor(e,t,n){this.glyphID=e,this.dx=t,this.dy=n,this.pos=0,this.scaleX=this.scaleY=1,this.scale01=this.scale10=0}}class Mf extends Ai{_getCBox(e){if(this._font._variationProcessor&&!e)return this.path.cbox;let t=this._font._getTableStream("glyf");t.pos+=this._font.loca.offsets[this.id];let n=Oy.decode(t),i=new Ws(n.xMin,n.yMin,n.xMax,n.yMax);return Object.freeze(i)}_parseGlyphCoord(e,t,n,i){if(n){var s=e.readUInt8();i||(s=-s),s+=t}else if(i)var s=t;else var s=t+e.readInt16BE();return s}_decode(){let e=this._font.loca.offsets[this.id],t=this._font.loca.offsets[this.id+1];if(e===t)return null;let n=this._font._getTableStream("glyf");n.pos+=e;let i=n.pos,s=Oy.decode(n);return s.numberOfContours>0?this._decodeSimple(s,n):s.numberOfContours<0&&this._decodeComposite(s,n,i),s}_decodeSimple(e,t){e.points=[];let n=new le(R,e.numberOfContours).decode(t);e.instructions=new le(Je,R).decode(t);let i=[],s=n[n.length-1]+1;for(;i.length<s;){var o=t.readUInt8();if(i.push(o),o&xK){let h=t.readUInt8();for(let p=0;p<h;p++)i.push(o)}}for(var a=0;a<i.length;a++){var o=i[a];let p=new Qr(!!(o&mK),n.indexOf(a)>=0,0,0);e.points.push(p)}let u=0;for(var a=0;a<i.length;a++){var o=i[a];e.points[a].x=u=this._parseGlyphCoord(t,u,o&gK,o&bK)}let f=0;for(var a=0;a<i.length;a++){var o=i[a];e.points[a].y=f=this._parseGlyphCoord(t,f,o&vK,o&yK)}if(this._font._variationProcessor){let h=e.points.slice();h.push(...this._getPhantomPoints(e)),this._font._variationProcessor.transformPoints(this.id,h),e.phantomPoints=h.slice(-4)}}_decodeComposite(e,t,n=0){e.components=[];let i=!1,s=Ry;for(;s&Ry;){s=t.readUInt16BE();let f=t.pos-n,h=t.readUInt16BE();if(i||(i=(s&PK)!==0),s&wK)var o=t.readInt16BE(),a=t.readInt16BE();else var o=t.readInt8(),a=t.readInt8();var u=new MK(h,o,a);u.pos=f,s&_K?u.scaleX=u.scaleY=(t.readUInt8()<<24|t.readUInt8()<<16)/1073741824:s&SK?(u.scaleX=(t.readUInt8()<<24|t.readUInt8()<<16)/1073741824,u.scaleY=(t.readUInt8()<<24|t.readUInt8()<<16)/1073741824):s&CK&&(u.scaleX=(t.readUInt8()<<24|t.readUInt8()<<16)/1073741824,u.scale01=(t.readUInt8()<<24|t.readUInt8()<<16)/1073741824,u.scale10=(t.readUInt8()<<24|t.readUInt8()<<16)/1073741824,u.scaleY=(t.readUInt8()<<24|t.readUInt8()<<16)/1073741824),e.components.push(u)}if(this._font._variationProcessor){let f=[];for(let h=0;h<e.components.length;h++){var u=e.components[h];f.push(new Qr(!0,!0,u.dx,u.dy))}f.push(...this._getPhantomPoints(e)),this._font._variationProcessor.transformPoints(this.id,f),e.phantomPoints=f.splice(-4,4);for(let h=0;h<f.length;h++){let p=f[h];e.components[h].dx=p.x,e.components[h].dy=p.y}}return i}_getPhantomPoints(e){let t=this._getCBox(!0);this._metrics==null&&(this._metrics=Ai.prototype._getMetrics.call(this,t));let{advanceWidth:n,advanceHeight:i,leftBearing:s,topBearing:o}=this._metrics;return[new Qr(!1,!0,e.xMin-s,0),new Qr(!1,!0,e.xMin-s+n,0),new Qr(!1,!0,0,e.yMax+o),new Qr(!1,!0,0,e.yMax+o+i)]}_getContours(){let e=this._decode();if(!e)return[];let t=[];if(e.numberOfContours<0)for(let o of e.components){let a=this._font.getGlyph(o.glyphID)._getContours();for(let u=0;u<a.length;u++){let f=a[u];for(let h=0;h<f.length;h++){let p=f[h],g=p.x*o.scaleX+p.y*o.scale01+o.dx,b=p.y*o.scaleY+p.x*o.scale10+o.dy;t.push(new Qr(p.onCurve,p.endContour,g,b))}}}else t=e.points||[];e.phantomPoints&&!this._font.directory.tables.HVAR&&(this._metrics.advanceWidth=e.phantomPoints[1].x-e.phantomPoints[0].x,this._metrics.advanceHeight=e.phantomPoints[3].y-e.phantomPoints[2].y,this._metrics.leftBearing=e.xMin-e.phantomPoints[0].x,this._metrics.topBearing=e.phantomPoints[2].y-e.yMax);let n=[],i=[];for(let o=0;o<t.length;o++){var s=t[o];i.push(s),s.endContour&&(n.push(i),i=[])}return n}_getMetrics(){if(this._metrics)return this._metrics;let e=this._getCBox(!0);return super._getMetrics(e),this._font._variationProcessor&&!this._font.HVAR&&this.path,this._metrics}_getPath(){let e=this._getContours(),t=new il;for(let i=0;i<e.length;i++){let s=e[i],o=s[0],a=s[s.length-1],u=0;if(o.onCurve){var n=null;u=1}else{a.onCurve?o=a:o=new Qr(!1,!1,(o.x+a.x)/2,(o.y+a.y)/2);var n=o}t.moveTo(o.x,o.y);for(let f=u;f<s.length;f++){let h=s[f],p=f===0?o:s[f-1];if(p.onCurve&&h.onCurve)t.lineTo(h.x,h.y);else if(p.onCurve&&!h.onCurve)var n=h;else if(!p.onCurve&&!h.onCurve){let b=(p.x+h.x)/2,C=(p.y+h.y)/2;t.quadraticCurveTo(p.x,p.y,b,C);var n=h}else if(!p.onCurve&&h.onCurve){t.quadraticCurveTo(n.x,n.y,h.x,h.y);var n=null}else throw new Error("Unknown TTF path state")}n&&t.quadraticCurveTo(n.x,n.y,o.x,o.y),t.closePath()}return t}constructor(...e){super(...e),Sr(this,"type","TTF")}}class EK extends Ai{_getName(){return this._font.CFF2?super._getName():this._font["CFF "].getGlyphName(this.id)}bias(e){return e.length<1240?107:e.length<33900?1131:32768}_getPath(){let e=this._font.CFF2||this._font["CFF "],{stream:t}=e,n=e.topDict.CharStrings[this.id],i=n.offset+n.length;t.pos=n.offset;let s=new il,o=[],a=[],u=null,f=0,h=0,p=0,g,b,C=!1;this._usedGsubrs=g={},this._usedSubrs=b={};let y=e.globalSubrIndex||[],w=this.bias(y),A=e.privateDictForGlyph(this.id)||{},O=A.Subrs||[],E=this.bias(O),T=e.topDict.vstore&&e.topDict.vstore.itemVariationStore,M=A.vsindex,B=this._font._variationProcessor;function F(){u==null&&(u=o.shift()+A.nominalWidthX)}function I(){return o.length%2!==0&&F(),f+=o.length>>1,o.length=0}function N(X,J){C&&s.closePath(),s.moveTo(X,J),C=!0}let G=function(){for(;t.pos<i;){let Te=t.readUInt8();if(Te<32){let Ie,ve,he;switch(Te){case 1:case 3:case 18:case 23:I();break;case 4:o.length>1&&F(),p+=o.shift(),N(h,p);break;case 5:for(;o.length>=2;)h+=o.shift(),p+=o.shift(),s.lineTo(h,p);break;case 6:case 7:for(he=Te===6;o.length>=1;)he?h+=o.shift():p+=o.shift(),s.lineTo(h,p),he=!he;break;case 8:for(;o.length>0;){var Z=h+o.shift(),H=p+o.shift(),ne=Z+o.shift(),ie=H+o.shift();h=ne+o.shift(),p=ie+o.shift(),s.bezierCurveTo(Z,H,ne,ie,h,p)}break;case 10:if(Ie=o.pop()+E,ve=O[Ie],ve){b[Ie]=!0;var X=t.pos,J=i;t.pos=ve.offset,i=ve.offset+ve.length,G(),t.pos=X,i=J}break;case 11:if(e.version>=2)break;return;case 14:if(e.version>=2)break;o.length>0&&F(),C&&(s.closePath(),C=!1);break;case 15:if(e.version<2)throw new Error("vsindex operator not supported in CFF v1");M=o.pop();break;case 16:{if(e.version<2)throw new Error("blend operator not supported in CFF v1");if(!B)throw new Error("blend operator in non-variation font");let Be=B.getBlendVector(T,M),Ae=o.pop(),$e=Ae*Be.length,Ee=o.length-$e,ut=Ee-Ae;for(let Se=0;Se<Ae;Se++){let we=o[ut+Se];for(let de=0;de<Be.length;de++)we+=Be[de]*o[Ee++];o[ut+Se]=we}for(;$e--;)o.pop();break}case 19:case 20:I(),t.pos+=f+7>>3;break;case 21:o.length>2&&F(),h+=o.shift(),p+=o.shift(),N(h,p);break;case 22:o.length>1&&F(),h+=o.shift(),N(h,p);break;case 24:for(;o.length>=8;){var Z=h+o.shift(),H=p+o.shift(),ne=Z+o.shift(),ie=H+o.shift();h=ne+o.shift(),p=ie+o.shift(),s.bezierCurveTo(Z,H,ne,ie,h,p)}h+=o.shift(),p+=o.shift(),s.lineTo(h,p);break;case 25:for(;o.length>=8;)h+=o.shift(),p+=o.shift(),s.lineTo(h,p);var Z=h+o.shift(),H=p+o.shift(),ne=Z+o.shift(),ie=H+o.shift();h=ne+o.shift(),p=ie+o.shift(),s.bezierCurveTo(Z,H,ne,ie,h,p);break;case 26:for(o.length%2&&(h+=o.shift());o.length>=4;)Z=h,H=p+o.shift(),ne=Z+o.shift(),ie=H+o.shift(),h=ne,p=ie+o.shift(),s.bezierCurveTo(Z,H,ne,ie,h,p);break;case 27:for(o.length%2&&(p+=o.shift());o.length>=4;)Z=h+o.shift(),H=p,ne=Z+o.shift(),ie=H+o.shift(),h=ne+o.shift(),p=ie,s.bezierCurveTo(Z,H,ne,ie,h,p);break;case 28:o.push(t.readInt16BE());break;case 29:if(Ie=o.pop()+w,ve=y[Ie],ve){g[Ie]=!0;var X=t.pos,J=i;t.pos=ve.offset,i=ve.offset+ve.length,G(),t.pos=X,i=J}break;case 30:case 31:for(he=Te===31;o.length>=4;)he?(Z=h+o.shift(),H=p,ne=Z+o.shift(),ie=H+o.shift(),p=ie+o.shift(),h=ne+(o.length===1?o.shift():0)):(Z=h,H=p+o.shift(),ne=Z+o.shift(),ie=H+o.shift(),h=ne+o.shift(),p=ie+(o.length===1?o.shift():0)),s.bezierCurveTo(Z,H,ne,ie,h,p),he=!he;break;case 12:switch(Te=t.readUInt8(),Te){case 3:let Be=o.pop(),Ae=o.pop();o.push(Be&&Ae?1:0);break;case 4:Be=o.pop(),Ae=o.pop(),o.push(Be||Ae?1:0);break;case 5:Be=o.pop(),o.push(Be?0:1);break;case 9:Be=o.pop(),o.push(Math.abs(Be));break;case 10:Be=o.pop(),Ae=o.pop(),o.push(Be+Ae);break;case 11:Be=o.pop(),Ae=o.pop(),o.push(Be-Ae);break;case 12:Be=o.pop(),Ae=o.pop(),o.push(Be/Ae);break;case 14:Be=o.pop(),o.push(-Be);break;case 15:Be=o.pop(),Ae=o.pop(),o.push(Be===Ae?1:0);break;case 18:o.pop();break;case 20:let $e=o.pop(),Ee=o.pop();a[Ee]=$e;break;case 21:Ee=o.pop(),o.push(a[Ee]||0);break;case 22:let ut=o.pop(),Se=o.pop(),we=o.pop(),de=o.pop();o.push(we<=de?ut:Se);break;case 23:o.push(Math.random());break;case 24:Be=o.pop(),Ae=o.pop(),o.push(Be*Ae);break;case 26:Be=o.pop(),o.push(Math.sqrt(Be));break;case 27:Be=o.pop(),o.push(Be,Be);break;case 28:Be=o.pop(),Ae=o.pop(),o.push(Ae,Be);break;case 29:Ee=o.pop(),Ee<0?Ee=0:Ee>o.length-1&&(Ee=o.length-1),o.push(o[Ee]);break;case 30:let ye=o.pop(),ue=o.pop();if(ue>=0)for(;ue>0;){var be=o[ye-1];for(let me=ye-2;me>=0;me--)o[me+1]=o[me];o[0]=be,ue--}else for(;ue<0;){var be=o[0];for(let Ne=0;Ne<=ye;Ne++)o[Ne]=o[Ne+1];o[ye-1]=be,ue++}break;case 34:Z=h+o.shift(),H=p,ne=Z+o.shift(),ie=H+o.shift();let pe=ne+o.shift(),Me=ie,Oe=pe+o.shift(),Le=Me,ze=Oe+o.shift(),Fe=Le,qe=ze+o.shift(),pt=Fe;h=qe,p=pt,s.bezierCurveTo(Z,H,ne,ie,pe,Me),s.bezierCurveTo(Oe,Le,ze,Fe,qe,pt);break;case 35:let ct=[];for(let me=0;me<=5;me++)h+=o.shift(),p+=o.shift(),ct.push(h,p);s.bezierCurveTo(...ct.slice(0,6)),s.bezierCurveTo(...ct.slice(6)),o.shift();break;case 36:Z=h+o.shift(),H=p+o.shift(),ne=Z+o.shift(),ie=H+o.shift(),pe=ne+o.shift(),Me=ie,Oe=pe+o.shift(),Le=Me,ze=Oe+o.shift(),Fe=Le+o.shift(),qe=ze+o.shift(),pt=Fe,h=qe,p=pt,s.bezierCurveTo(Z,H,ne,ie,pe,Me),s.bezierCurveTo(Oe,Le,ze,Fe,qe,pt);break;case 37:let Y=h,W=p;ct=[];for(let me=0;me<=4;me++)h+=o.shift(),p+=o.shift(),ct.push(h,p);Math.abs(h-Y)>Math.abs(p-W)?(h+=o.shift(),p=W):(h=Y,p+=o.shift()),ct.push(h,p),s.bezierCurveTo(...ct.slice(0,6)),s.bezierCurveTo(...ct.slice(6));break;default:throw new Error(`Unknown op: 12 ${Te}`)}break;default:throw new Error(`Unknown op: ${Te}`)}}else if(Te<247)o.push(Te-139);else if(Te<251){var oe=t.readUInt8();o.push((Te-247)*256+oe+108)}else if(Te<255){var oe=t.readUInt8();o.push(-(Te-251)*256-oe-108)}else o.push(t.readInt32BE()/65536)}};return G(),C&&s.closePath(),s}constructor(...e){super(...e),Sr(this,"type","CFF")}}let AK=new Pe({originX:R,originY:R,type:new jt(4),data:new _i(r=>r.parent.buflen-r._currentOffset)});class TK extends Mf{getImageForSize(e){for(let o=0;o<this._font.sbix.imageTables.length;o++){var t=this._font.sbix.imageTables[o];if(t.ppem>=e)break}let n=t.imageOffsets,i=n[this.id],s=n[this.id+1];return i===s?null:(this._font.stream.pos=i,AK.decode(this._font.stream,{buflen:s-i}))}render(e,t){let n=this.getImageForSize(t);if(n!=null){let i=t/this._font.unitsPerEm;e.image(n.data,{height:t,x:n.originX,y:(this.bbox.minY-n.originY)*i})}this._font.sbix.flags.renderOutlines&&super.render(e,t)}constructor(...e){super(...e),Sr(this,"type","SBIX")}}class By{constructor(e,t){this.glyph=e,this.color=t}}class IK extends Ai{_getBBox(){let e=new Ws;for(let t=0;t<this.layers.length;t++){let i=this.layers[t].glyph.bbox;e.addPoint(i.minX,i.minY),e.addPoint(i.maxX,i.maxY)}return e}get layers(){let e=this._font.CPAL,t=this._font.COLR,n=0,i=t.baseGlyphRecord.length-1;for(;n<=i;){let h=n+i>>1;var s=t.baseGlyphRecord[h];if(this.id<s.gid)i=h-1;else if(this.id>s.gid)n=h+1;else{var o=s;break}}if(o==null){var a=this._font._getBaseGlyph(this.id),u={red:0,green:0,blue:0,alpha:255};return[new By(a,u)]}let f=[];for(let h=o.firstLayerIndex;h<o.firstLayerIndex+o.numLayers;h++){var s=t.layerRecords[h],u=e.colorRecords[s.paletteIndex],a=this._font._getBaseGlyph(s.gid);f.push(new By(a,u))}return f}render(e,t){for(let{glyph:n,color:i}of this.layers)e.fillColor([i.red,i.green,i.blue],i.alpha/255*100),n.render(e,t)}constructor(...e){super(...e),Sr(this,"type","COLR")}}const LK=32768,DK=4095,OK=32768,Fy=16384,RK=8192,Ny=4095,ky=128,Uy=127,BK=128,FK=64,NK=63;class kK{normalizeCoords(e){let t=[];for(var n=0;n<this.font.fvar.axis.length;n++){let i=this.font.fvar.axis[n];e[n]<i.defaultValue?t.push((e[n]-i.defaultValue+Number.EPSILON)/(i.defaultValue-i.minValue+Number.EPSILON)):t.push((e[n]-i.defaultValue+Number.EPSILON)/(i.maxValue-i.defaultValue+Number.EPSILON))}if(this.font.avar)for(var n=0;n<this.font.avar.segment.length;n++){let s=this.font.avar.segment[n];for(let o=0;o<s.correspondence.length;o++){let a=s.correspondence[o];if(o>=1&&t[n]<a.fromCoord){let u=s.correspondence[o-1];t[n]=((t[n]-u.fromCoord)*(a.toCoord-u.toCoord)+Number.EPSILON)/(a.fromCoord-u.fromCoord+Number.EPSILON)+u.toCoord;break}}}return t}transformPoints(e,t){if(!this.font.fvar||!this.font.gvar)return;let{gvar:n}=this.font;if(e>=n.glyphCount)return;let i=n.offsets[e];if(i===n.offsets[e+1])return;let{stream:s}=this.font;if(s.pos=i,s.pos>=s.length)return;let o=s.readUInt16BE(),a=i+s.readUInt16BE();if(o&LK){var u=s.pos;s.pos=a;var f=this.decodePoints();a=s.pos,s.pos=u}let h=t.map(w=>w.copy());o&=DK;for(let w=0;w<o;w++){let A=s.readUInt16BE(),O=s.readUInt16BE();if(O&OK){var p=[];for(let I=0;I<n.axisCount;I++)p.push(s.readInt16BE()/16384)}else{if((O&Ny)>=n.globalCoordCount)throw new Error("Invalid gvar table");var p=n.globalCoords[O&Ny]}if(O&Fy){var g=[];for(let I=0;I<n.axisCount;I++)g.push(s.readInt16BE()/16384);var b=[];for(let I=0;I<n.axisCount;I++)b.push(s.readInt16BE()/16384)}let E=this.tupleFactor(O,p,g,b);if(E===0){a+=A;continue}var u=s.pos;if(s.pos=a,O&RK)var C=this.decodePoints();else var C=f;let M=C.length===0?t.length:C.length,B=this.decodeDeltas(M),F=this.decodeDeltas(M);if(C.length===0)for(let I=0;I<t.length;I++){var y=t[I];y.x+=Math.round(B[I]*E),y.y+=Math.round(F[I]*E)}else{let I=h.map(G=>G.copy()),N=t.map(()=>!1);for(let G=0;G<C.length;G++){let X=C[G];if(X<t.length){let J=I[X];N[X]=!0,J.x+=Math.round(B[G]*E),J.y+=Math.round(F[G]*E)}}this.interpolateMissingDeltas(I,h,N);for(let G=0;G<t.length;G++){let X=I[G].x-h[G].x,J=I[G].y-h[G].y;t[G].x+=X,t[G].y+=J}}a+=A,s.pos=u}}decodePoints(){let e=this.font.stream,t=e.readUInt8();t&ky&&(t=(t&Uy)<<8|e.readUInt8());let n=new Uint16Array(t),i=0,s=0;for(;i<t;){let o=e.readUInt8(),a=(o&Uy)+1,u=o&ky?e.readUInt16:e.readUInt8;for(let f=0;f<a&&i<t;f++)s+=u.call(e),n[i++]=s}return n}decodeDeltas(e){let t=this.font.stream,n=0,i=new Int16Array(e);for(;n<e;){let s=t.readUInt8(),o=(s&NK)+1;if(s&BK)n+=o;else{let a=s&FK?t.readInt16BE:t.readInt8;for(let u=0;u<o&&n<e;u++)i[n++]=a.call(t)}}return i}tupleFactor(e,t,n,i){let s=this.normalizedCoords,{gvar:o}=this.font,a=1;for(let u=0;u<o.axisCount;u++)if(t[u]!==0){if(s[u]===0)return 0;if(e&Fy){if(s[u]<n[u]||s[u]>i[u])return 0;s[u]<t[u]?a=a*(s[u]-n[u]+Number.EPSILON)/(t[u]-n[u]+Number.EPSILON):a=a*(i[u]-s[u]+Number.EPSILON)/(i[u]-t[u]+Number.EPSILON)}else{if(s[u]<Math.min(0,t[u])||s[u]>Math.max(0,t[u]))return 0;a=(a*s[u]+Number.EPSILON)/(t[u]+Number.EPSILON)}}return a}interpolateMissingDeltas(e,t,n){if(e.length===0)return;let i=0;for(;i<e.length;){let s=i,o=i,a=e[o];for(;!a.endContour;)a=e[++o];for(;i<=o&&!n[i];)i++;if(i>o)continue;let u=i,f=i;for(i++;i<=o;)n[i]&&(this.deltaInterpolate(f+1,i-1,f,i,t,e),f=i),i++;f===u?this.deltaShift(s,o,f,t,e):(this.deltaInterpolate(f+1,o,f,u,t,e),u>0&&this.deltaInterpolate(s,u-1,f,u,t,e)),i=o+1}}deltaInterpolate(e,t,n,i,s,o){if(e>t)return;let a=["x","y"];for(let f=0;f<a.length;f++){let h=a[f];if(s[n][h]>s[i][h]){var u=n;n=i,i=u}let p=s[n][h],g=s[i][h],b=o[n][h],C=o[i][h];if(p!==g||b===C){let y=p===g?0:(C-b)/(g-p);for(let w=e;w<=t;w++){let A=s[w][h];A<=p?A+=b-p:A>=g?A+=C-g:A=b+(A-p)*y,o[w][h]=A}}}}deltaShift(e,t,n,i,s){let o=s[n].x-i[n].x,a=s[n].y-i[n].y;if(!(o===0&&a===0))for(let u=e;u<=t;u++)u!==n&&(s[u].x+=o,s[u].y+=a)}getAdvanceAdjustment(e,t){let n,i;if(t.advanceWidthMapping){let s=e;s>=t.advanceWidthMapping.mapCount&&(s=t.advanceWidthMapping.mapCount-1),t.advanceWidthMapping.entryFormat,{outerIndex:n,innerIndex:i}=t.advanceWidthMapping.mapData[s]}else n=0,i=e;return this.getDelta(t.itemVariationStore,n,i)}getDelta(e,t,n){if(t>=e.itemVariationData.length)return 0;let i=e.itemVariationData[t];if(n>=i.deltaSets.length)return 0;let s=i.deltaSets[n],o=this.getBlendVector(e,t),a=0;for(let u=0;u<i.regionIndexCount;u++)a+=s.deltas[u]*o[u];return a}getBlendVector(e,t){let n=e.itemVariationData[t];if(this.blendVectors.has(n))return this.blendVectors.get(n);let i=this.normalizedCoords,s=[];for(let o=0;o<n.regionIndexCount;o++){let a=1,u=n.regionIndexes[o],f=e.variationRegionList.variationRegions[u];for(let h=0;h<f.length;h++){let p=f[h],g;p.startCoord>p.peakCoord||p.peakCoord>p.endCoord||p.startCoord<0&&p.endCoord>0&&p.peakCoord!==0||p.peakCoord===0?g=1:i[h]<p.startCoord||i[h]>p.endCoord?g=0:i[h]===p.peakCoord?g=1:i[h]<p.peakCoord?g=(i[h]-p.startCoord+Number.EPSILON)/(p.peakCoord-p.startCoord+Number.EPSILON):g=(p.endCoord-i[h]+Number.EPSILON)/(p.endCoord-p.peakCoord+Number.EPSILON),a*=g}s[o]=a}return this.blendVectors.set(n,s),s}constructor(e,t){this.font=e,this.normalizedCoords=this.normalizeCoords(t),this.blendVectors=new Map}}Promise.resolve();class w3{includeGlyph(e){return typeof e=="object"&&(e=e.id),this.mapping[e]==null&&(this.glyphs.push(e),this.mapping[e]=this.glyphs.length-1),this.mapping[e]}constructor(e){this.font=e,this.glyphs=[],this.mapping={},this.includeGlyph(0)}}const UK=1,VK=2,zK=4,GK=8,$K=16,WK=32;class Vy{static size(e){return e>=0&&e<=255?1:2}static encode(e,t){t>=0&&t<=255?e.writeUInt8(t):e.writeInt16BE(t)}}let zy=new Pe({numberOfContours:Ge,xMin:Ge,yMin:Ge,xMax:Ge,yMax:Ge,endPtsOfContours:new le(R,"numberOfContours"),instructions:new le(Je,R),flags:new le(Je,0),xPoints:new le(Vy,0),yPoints:new le(Vy,0)});class XK{encodeSimple(e,t=[]){let n=[],i=[],s=[],o=[],a=0,u=0,f=0,h=0,p=0;for(let A=0;A<e.commands.length;A++){let O=e.commands[A];for(let E=0;E<O.args.length;E+=2){let T=O.args[E],M=O.args[E+1],B=0;if(O.command==="quadraticCurveTo"&&E===2){let F=e.commands[A+1];if(F&&F.command==="quadraticCurveTo"){let I=(u+F.args[0])/2,N=(f+F.args[1])/2;if(T===I&&M===N)continue}}O.command==="quadraticCurveTo"&&E===0||(B|=UK),B=this._encodePoint(T,u,i,B,VK,$K),B=this._encodePoint(M,f,s,B,zK,WK),B===h&&a<255?(o[o.length-1]|=GK,a++):(a>0&&(o.push(a),a=0),o.push(B),h=B),u=T,f=M,p++}O.command==="closePath"&&n.push(p-1)}e.commands.length>1&&e.commands[e.commands.length-1].command!=="closePath"&&n.push(p-1);let g=e.bbox,b={numberOfContours:n.length,xMin:g.minX,yMin:g.minY,xMax:g.maxX,yMax:g.maxY,endPtsOfContours:n,instructions:t,flags:o,xPoints:i,yPoints:s},C=zy.size(b),y=4-C%4,w=new I0(C+y);return zy.encode(w,b),y!==0&&w.fill(0,y),w.buffer}_encodePoint(e,t,n,i,s,o){let a=e-t;return e===t?i|=o:(-255<=a&&a<=255&&(i|=s,a<0?a=-a:i|=o),n.push(a)),i}}class HK extends w3{_addGlyph(e){let t=this.font.getGlyph(e),n=t._decode(),i=this.font.loca.offsets[e],s=this.font.loca.offsets[e+1],o=this.font._getTableStream("glyf");o.pos+=i;let a=o.readBuffer(s-i);if(n&&n.numberOfContours<0){a=new Uint8Array(a);let u=new DataView(a.buffer);for(let f of n.components)e=this.includeGlyph(f.glyphID),u.setUint16(f.pos,e)}else n&&this.font._variationProcessor&&(a=this.glyphEncoder.encodeSimple(t.path,n.instructions));return this.glyf.push(a),this.loca.offsets.push(this.offset),this.hmtx.metrics.push({advance:t.advanceWidth,bearing:t._getMetrics().leftBearing}),this.offset+=a.length,this.glyf.length-1}encode(){this.glyf=[],this.offset=0,this.loca={offsets:[],version:this.font.loca.version},this.hmtx={metrics:[],bearings:[]};let e=0;for(;e<this.glyphs.length;)this._addGlyph(this.glyphs[e++]);let t=tc(this.font.maxp);t.numGlyphs=this.glyf.length,this.loca.offsets.push(this.offset);let n=tc(this.font.head);n.indexToLocFormat=this.loca.version;let i=tc(this.font.hhea);return i.numberOfMetrics=this.hmtx.metrics.length,u3.toBuffer({tables:{head:n,hhea:i,loca:this.loca,maxp:t,"cvt ":this.font["cvt "],prep:this.font.prep,glyf:this.glyf,hmtx:this.hmtx,fpgm:this.font.fpgm}})}constructor(e){super(e),this.glyphEncoder=new XK}}class YK extends w3{subsetCharstrings(){this.charstrings=[];let e={};for(let t of this.glyphs){this.charstrings.push(this.cff.getCharString(t));let n=this.font.getGlyph(t);n.path;for(let i in n._usedGsubrs)e[i]=!0}this.gsubrs=this.subsetSubrs(this.cff.globalSubrIndex,e)}subsetSubrs(e,t){let n=[];for(let i=0;i<e.length;i++){let s=e[i];t[i]?(this.cff.stream.pos=s.offset,n.push(this.cff.stream.readBuffer(s.length))):n.push(new Uint8Array([11]))}return n}subsetFontdict(e){e.FDArray=[],e.FDSelect={version:0,fds:[]};let t={},n=[],i={};for(let s of this.glyphs){let o=this.cff.fdForGlyph(s);if(o==null)continue;t[o]||(e.FDArray.push(Object.assign({},this.cff.topDict.FDArray[o])),n.push({}),i[o]=e.FDArray.length-1),t[o]=!0,e.FDSelect.fds.push(i[o]);let a=this.font.getGlyph(s);a.path;for(let u in a._usedSubrs)n[i[o]][u]=!0}for(let s=0;s<e.FDArray.length;s++){let o=e.FDArray[s];delete o.FontName,o.Private&&o.Private.Subrs&&(o.Private=Object.assign({},o.Private),o.Private.Subrs=this.subsetSubrs(o.Private.Subrs,n[s]))}}createCIDFontdict(e){let t={};for(let i of this.glyphs){let s=this.font.getGlyph(i);s.path;for(let o in s._usedSubrs)t[o]=!0}let n=Object.assign({},this.cff.topDict.Private);return this.cff.topDict.Private&&this.cff.topDict.Private.Subrs&&(n.Subrs=this.subsetSubrs(this.cff.topDict.Private.Subrs,t)),e.FDArray=[{Private:n}],e.FDSelect={version:3,nRanges:1,ranges:[{first:0,fd:0}],sentinel:this.charstrings.length}}addString(e){return e?(this.strings||(this.strings=[]),this.strings.push(e),u0.length+this.strings.length-1):null}encode(){this.subsetCharstrings();let e={version:this.charstrings.length>255?2:1,ranges:[{first:1,nLeft:this.charstrings.length-2}]},t=Object.assign({},this.cff.topDict);t.Private=null,t.charset=e,t.Encoding=null,t.CharStrings=this.charstrings;for(let i of["version","Notice","Copyright","FullName","FamilyName","Weight","PostScript","BaseFontName","FontName"])t[i]=this.addString(this.cff.string(t[i]));t.ROS=[this.addString("Adobe"),this.addString("Identity"),0],t.CIDCount=this.charstrings.length,this.cff.isCIDFont?this.subsetFontdict(t):this.createCIDFontdict(t);let n={version:1,hdrSize:this.cff.hdrSize,offSize:4,header:this.cff.header,nameIndex:[this.cff.postscriptName],topDictIndex:[t],stringIndex:this.strings,globalSubrIndex:this.gsubrs};return s3.toBuffer(n)}constructor(e){if(super(e),this.cff=this.font["CFF "],!this.cff)throw new Error("Not a CFF Font")}}class ir{static probe(e){let t=_f.decode(e.slice(0,4));return t==="true"||t==="OTTO"||t===String.fromCharCode(0,1,0,0)}setDefaultLanguage(e=null){this.defaultLanguage=e}_getTable(e){if(!(e.tag in this._tables))try{this._tables[e.tag]=this._decodeTable(e)}catch{}return this._tables[e.tag]}_getTableStream(e){let t=this.directory.tables[e];return t?(this.stream.pos=t.offset,this.stream):null}_decodeDirectory(){return this.directory=u3.decode(this.stream,{_startOffset:0})}_decodeTable(e){let t=this.stream.pos,n=this._getTableStream(e.tag),i=N0[e.tag].decode(n,this,e.length);return this.stream.pos=t,i}getName(e,t=this.defaultLanguage||R0){let n=this.name&&this.name.records[e];return n&&(n[t]||n[this.defaultLanguage]||n[R0]||n.en||n[Object.keys(n)[0]])||null}get postscriptName(){return this.getName("postscriptName")}get fullName(){return this.getName("fullName")}get familyName(){return this.getName("fontFamily")}get subfamilyName(){return this.getName("fontSubfamily")}get copyright(){return this.getName("copyright")}get version(){return this.getName("version")}get ascent(){return this.hhea.ascent}get descent(){return this.hhea.descent}get lineGap(){return this.hhea.lineGap}get underlinePosition(){return this.post.underlinePosition}get underlineThickness(){return this.post.underlineThickness}get italicAngle(){return this.post.italicAngle}get capHeight(){let e=this["OS/2"];return e?e.capHeight:this.ascent}get xHeight(){let e=this["OS/2"];return e?e.xHeight:0}get numGlyphs(){return this.maxp.numGlyphs}get unitsPerEm(){return this.head.unitsPerEm}get bbox(){return Object.freeze(new Ws(this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax))}get _cmapProcessor(){return new Lm(this.cmap)}get characterSet(){return this._cmapProcessor.getCharacterSet()}hasGlyphForCodePoint(e){return!!this._cmapProcessor.lookup(e)}glyphForCodePoint(e){return this.getGlyph(this._cmapProcessor.lookup(e),[e])}glyphsForString(e){let t=[],n=e.length,i=0,s=-1,o=-1;for(;i<=n;){let a=0,u=0;if(i<n){if(a=e.charCodeAt(i++),55296<=a&&a<=56319&&i<n){let f=e.charCodeAt(i);56320<=f&&f<=57343&&(i++,a=((a&1023)<<10)+(f&1023)+65536)}u=65024<=a&&a<=65039||917760<=a&&a<=917999?1:0}else i++;o===0&&u===1?t.push(this.getGlyph(this._cmapProcessor.lookup(s,a),[s,a])):o===0&&u===0&&t.push(this.glyphForCodePoint(s)),s=a,o=u}return t}get _layoutEngine(){return new dK(this)}layout(e,t,n,i,s){return this._layoutEngine.layout(e,t,n,i,s)}stringsForGlyph(e){return this._layoutEngine.stringsForGlyph(e)}get availableFeatures(){return this._layoutEngine.getAvailableFeatures()}getAvailableFeatures(e,t){return this._layoutEngine.getAvailableFeatures(e,t)}_getBaseGlyph(e,t=[]){return this._glyphs[e]||(this.directory.tables.glyf?this._glyphs[e]=new Mf(e,t,this):(this.directory.tables["CFF "]||this.directory.tables.CFF2)&&(this._glyphs[e]=new EK(e,t,this))),this._glyphs[e]||null}getGlyph(e,t=[]){return this._glyphs[e]||(this.directory.tables.sbix?this._glyphs[e]=new TK(e,t,this):this.directory.tables.COLR&&this.directory.tables.CPAL?this._glyphs[e]=new IK(e,t,this):this._getBaseGlyph(e,t)),this._glyphs[e]||null}createSubset(){return this.directory.tables["CFF "]?new YK(this):new HK(this)}get variationAxes(){let e={};if(!this.fvar)return e;for(let t of this.fvar.axis)e[t.axisTag.trim()]={name:t.name.en,min:t.minValue,default:t.defaultValue,max:t.maxValue};return e}get namedVariations(){let e={};if(!this.fvar)return e;for(let t of this.fvar.instance){let n={};for(let i=0;i<this.fvar.axis.length;i++){let s=this.fvar.axis[i];n[s.axisTag.trim()]=t.coord[i]}e[t.name.en]=n}return e}getVariation(e){if(!(this.directory.tables.fvar&&(this.directory.tables.gvar&&this.directory.tables.glyf||this.directory.tables.CFF2)))throw new Error("Variations require a font with the fvar, gvar and glyf, or CFF2 tables.");if(typeof e=="string"&&(e=this.namedVariations[e]),typeof e!="object")throw new Error("Variation settings must be either a variation name or settings object.");let t=this.fvar.axis.map((s,o)=>{let a=s.axisTag.trim();return a in e?Math.max(s.minValue,Math.min(s.maxValue,e[a])):s.defaultValue}),n=new Kn(this.stream.buffer);n.pos=this._directoryPos;let i=new ir(n,t);return i._tables=this._tables,i}get _variationProcessor(){if(!this.fvar)return null;let e=this.variationCoords;return!e&&!this.CFF2?null:(e||(e=this.fvar.axis.map(t=>t.defaultValue)),new kK(this,e))}getFont(e){return this.getVariation(e)}constructor(e,t=null){Sr(this,"type","TTF"),this.defaultLanguage=null,this.stream=e,this.variationCoords=t,this._directoryPos=this.stream.pos,this._tables={},this._glyphs={},this._decodeDirectory();for(let n in this.directory.tables){let i=this.directory.tables[n];N0[n]&&i.length>0&&Object.defineProperty(this,n,{get:this._getTable.bind(this,i)})}}}Qn([er],ir.prototype,"bbox",null);Qn([er],ir.prototype,"_cmapProcessor",null);Qn([er],ir.prototype,"characterSet",null);Qn([er],ir.prototype,"_layoutEngine",null);Qn([er],ir.prototype,"variationAxes",null);Qn([er],ir.prototype,"namedVariations",null);Qn([er],ir.prototype,"_variationProcessor",null);let qK=new Pe({tag:new jt(4),offset:new ce(fe,"void",{type:"global"}),compLength:fe,length:fe,origChecksum:fe}),_3=new Pe({tag:new jt(4),flavor:fe,length:fe,numTables:R,reserved:new pn(R),totalSfntSize:fe,majorVersion:R,minorVersion:R,metaOffset:fe,metaLength:fe,metaOrigLength:fe,privOffset:fe,privLength:fe,tables:new le(qK,"numTables")});_3.process=function(){let r={};for(let e of this.tables)r[e.tag]=e;this.tables=r};var ZK=_3;class jK extends ir{static probe(e){return _f.decode(e.slice(0,4))==="wOFF"}_decodeDirectory(){this.directory=ZK.decode(this.stream,{_startOffset:0})}_getTableStream(e){let t=this.directory.tables[e];if(t)if(this.stream.pos=t.offset,t.compLength<t.length){this.stream.pos+=2;let n=new Uint8Array(t.length),i=D_(this.stream.readBuffer(t.compLength-2),n);return new Kn(i)}else return this.stream;return null}constructor(...e){super(...e),Sr(this,"type","WOFF")}}class KK extends Mf{_decode(){return this._font._transformedGlyphs[this.id]}_getCBox(){return this.path.bbox}constructor(...e){super(...e),Sr(this,"type","WOFF2")}}const Gy={decode(r){let e=0,t=[0,1,2,3,4];for(let n=0;n<t.length;n++){let i=r.readUInt8();if(e&3758096384)throw new Error("Overflow");if(e=e<<7|i&127,!(i&128))return e}throw new Error("Bad base 128 number")}};let JK=["cmap","head","hhea","hmtx","maxp","name","OS/2","post","cvt ","fpgm","glyf","loca","prep","CFF ","VORG","EBDT","EBLC","gasp","hdmx","kern","LTSH","PCLT","VDMX","vhea","vmtx","BASE","GDEF","GPOS","GSUB","EBSC","JSTF","MATH","CBDT","CBLC","COLR","CPAL","SVG ","sbix","acnt","avar","bdat","bloc","bsln","cvar","fdsc","feat","fmtx","fvar","gvar","hsty","just","lcar","mort","morx","opbd","prop","trak","Zapf","Silf","Glat","Gloc","Feat","Sill"],QK=new Pe({flags:Je,customTag:new L0(new jt(4),r=>(r.flags&63)===63),tag:r=>r.customTag||JK[r.flags&63],length:Gy,transformVersion:r=>r.flags>>>6&3,transformed:r=>r.tag==="glyf"||r.tag==="loca"?r.transformVersion===0:r.transformVersion!==0,transformLength:new L0(Gy,r=>r.transformed)}),S3=new Pe({tag:new jt(4),flavor:fe,length:fe,numTables:R,reserved:new pn(R),totalSfntSize:fe,totalCompressedSize:fe,majorVersion:R,minorVersion:R,metaOffset:fe,metaLength:fe,metaOrigLength:fe,privOffset:fe,privLength:fe,tables:new le(QK,"numTables")});S3.process=function(){let r={};for(let e=0;e<this.tables.length;e++){let t=this.tables[e];r[t.tag]=t}return this.tables=r};var eJ=S3;class tJ extends ir{static probe(e){return _f.decode(e.slice(0,4))==="wOF2"}_decodeDirectory(){this.directory=eJ.decode(this.stream),this._dataPos=this.stream.pos}_decompress(){if(!this._decompressed){this.stream.pos=this._dataPos;let e=this.stream.readBuffer(this.directory.totalCompressedSize),t=0;for(let i in this.directory.tables){let s=this.directory.tables[i];s.offset=t,t+=s.transformLength!=null?s.transformLength:s.length}let n=PH(e,t);if(!n)throw new Error("Error decoding compressed data in WOFF2");this.stream=new Kn(n),this._decompressed=!0}}_decodeTable(e){return this._decompress(),super._decodeTable(e)}_getBaseGlyph(e,t=[]){if(!this._glyphs[e])return this.directory.tables.glyf&&this.directory.tables.glyf.transformed?(this._transformedGlyphs||this._transformGlyfTable(),this._glyphs[e]=new KK(e,t,this)):super._getBaseGlyph(e,t)}_transformGlyfTable(){this._decompress(),this.stream.pos=this.directory.tables.glyf.offset;let e=nJ.decode(this.stream),t=[];for(let i=0;i<e.numGlyphs;i++){let s={},o=e.nContours.readInt16BE();if(s.numberOfContours=o,o>0){let a=[],u=0;for(let f=0;f<o;f++){let h=Ud(e.nPoints);u+=h,a.push(u)}s.points=oJ(e.flags,e.glyphs,u);for(let f=0;f<o;f++)s.points[a[f]-1].endContour=!0;var n=Ud(e.glyphs)}else if(o<0&&Mf.prototype._decodeComposite.call({_font:this},s,e.composites))var n=Ud(e.glyphs);t.push(s)}this._transformedGlyphs=t}constructor(...e){super(...e),Sr(this,"type","WOFF2")}}class so{decode(e,t){return new Kn(this._buf.decode(e,t))}constructor(e){this.length=e,this._buf=new _i(e)}}let nJ=new Pe({version:fe,numGlyphs:R,indexFormat:R,nContourStreamSize:fe,nPointsStreamSize:fe,flagStreamSize:fe,glyphStreamSize:fe,compositeStreamSize:fe,bboxStreamSize:fe,instructionStreamSize:fe,nContours:new so("nContourStreamSize"),nPoints:new so("nPointsStreamSize"),flags:new so("flagStreamSize"),glyphs:new so("glyphStreamSize"),composites:new so("compositeStreamSize"),bboxes:new so("bboxStreamSize"),instructions:new so("instructionStreamSize")});const rJ=253,iJ=254,sJ=255,$y=253;function Ud(r){let e=r.readUInt8();return e===rJ?r.readUInt16BE():e===sJ?r.readUInt8()+$y:e===iJ?r.readUInt8()+$y*2:e}function ci(r,e){return r&1?e:-e}function oJ(r,e,t){let n,i=n=0,s=[];for(let u=0;u<t;u++){let f=0,h=0,p=r.readUInt8(),g=!(p>>7);if(p&=127,p<10)f=0,h=ci(p,((p&14)<<7)+e.readUInt8());else if(p<20)f=ci(p,((p-10&14)<<7)+e.readUInt8()),h=0;else if(p<84){var o=p-20,a=e.readUInt8();f=ci(p,1+(o&48)+(a>>4)),h=ci(p>>1,1+((o&12)<<2)+(a&15))}else if(p<120){var o=p-84;f=ci(p,1+(o/12<<8)+e.readUInt8()),h=ci(p>>1,1+(o%12>>2<<8)+e.readUInt8())}else if(p<124){var a=e.readUInt8();let C=e.readUInt8();f=ci(p,(a<<4)+(C>>4)),h=ci(p>>1,((C&15)<<8)+e.readUInt8())}else f=ci(p,e.readUInt16BE()),h=ci(p>>1,e.readUInt16BE());i+=f,n+=h,s.push(new Qr(g,!1,i,n))}return s}let aJ=new Dt(fe,{65536:{numFonts:fe,offsets:new le(fe,"numFonts")},131072:{numFonts:fe,offsets:new le(fe,"numFonts"),dsigTag:fe,dsigLength:fe,dsigOffset:fe}});class lJ{static probe(e){return _f.decode(e.slice(0,4))==="ttcf"}getFont(e){for(let t of this.header.offsets){let n=new Kn(this.stream.buffer);n.pos=t;let i=new ir(n);if(i.postscriptName===e||i.postscriptName instanceof Uint8Array&&e instanceof Uint8Array&&i.postscriptName.every((s,o)=>e[o]===s))return i}return null}get fonts(){let e=[];for(let t of this.header.offsets){let n=new Kn(this.stream.buffer);n.pos=t,e.push(new ir(n))}return e}constructor(e){if(Sr(this,"type","TTC"),this.stream=e,e.readString(4)!=="ttcf")throw new Error("Not a TrueType collection");this.header=aJ.decode(e)}}let cJ=new jt(Je);new Pe({len:fe,buf:new _i("len")});let uJ=new Pe({id:R,nameOffset:Ge,attr:Je,dataOffset:Us,handle:fe}),fJ=new Pe({name:new jt(4),maxTypeIndex:R,refList:new ce(R,new le(uJ,r=>r.maxTypeIndex+1),{type:"parent"})}),hJ=new Pe({length:R,types:new le(fJ,r=>r.length+1)}),dJ=new Pe({reserved:new pn(Je,24),typeList:new ce(R,hJ),nameListOffset:new ce(R,"void")}),Wy=new Pe({dataOffset:fe,map:new ce(fe,dJ),dataLength:fe,mapLength:fe});class pJ{static probe(e){let t=new Kn(e);try{var n=Wy.decode(t)}catch{return!1}for(let i of n.map.typeList.types)if(i.name==="sfnt")return!0;return!1}getFont(e){if(!this.sfnt)return null;for(let t of this.sfnt.refList){let n=this.header.dataOffset+t.dataOffset+4,i=new Kn(this.stream.buffer.slice(n)),s=new ir(i);if(s.postscriptName===e||s.postscriptName instanceof Uint8Array&&e instanceof Uint8Array&&s.postscriptName.every((o,a)=>e[a]===o))return s}return null}get fonts(){let e=[];for(let t of this.sfnt.refList){let n=this.header.dataOffset+t.dataOffset+4,i=new Kn(this.stream.buffer.slice(n));e.push(new ir(i))}return e}constructor(e){Sr(this,"type","DFont"),this.stream=e,this.header=Wy.decode(this.stream);for(let t of this.header.map.typeList.types){for(let n of t.refList)n.nameOffset>=0?(this.stream.pos=n.nameOffset+this.header.map.nameListOffset,n.name=cJ.decode(this.stream)):n.name=null;t.name==="sfnt"&&(this.sfnt=t)}}}rl(ir);rl(jK);rl(tJ);rl(lJ);rl(pJ);class mJ{parse(e,t={}){t=Object.assign({binary:!1},t);const n=t.binary,i=[];let s=0;e.traverse(function(A){if(A.isMesh){const O=A.geometry,E=O.index,T=O.getAttribute("position");s+=E!==null?E.count/3:T.count/3,i.push({object3d:A,geometry:O})}});let o,a=80;if(n===!0){const A=s*2+s*3*4*4+80+4,O=new ArrayBuffer(A);o=new DataView(O),o.setUint32(a,s,!0),a+=4}else o="",o+=`solid exported
`;const u=new K,f=new K,h=new K,p=new K,g=new K,b=new K;for(let A=0,O=i.length;A<O;A++){const E=i[A].object3d,T=i[A].geometry,M=T.index,B=T.getAttribute("position");if(M!==null)for(let F=0;F<M.count;F+=3){const I=M.getX(F+0),N=M.getX(F+1),G=M.getX(F+2);C(I,N,G,B,E)}else for(let F=0;F<B.count;F+=3){const I=F+0,N=F+1,G=F+2;C(I,N,G,B,E)}}return n===!1&&(o+=`endsolid exported
`),o;function C(A,O,E,T,M){u.fromBufferAttribute(T,A),f.fromBufferAttribute(T,O),h.fromBufferAttribute(T,E),M.isSkinnedMesh===!0&&(M.boneTransform(A,u),M.boneTransform(O,f),M.boneTransform(E,h)),u.applyMatrix4(M.matrixWorld),f.applyMatrix4(M.matrixWorld),h.applyMatrix4(M.matrixWorld),y(u,f,h),w(u),w(f),w(h),n===!0?(o.setUint16(a,0,!0),a+=2):(o+=`		endloop
`,o+=`	endfacet
`)}function y(A,O,E){p.subVectors(E,O),g.subVectors(A,O),p.cross(g).normalize(),b.copy(p).normalize(),n===!0?(o.setFloat32(a,b.x,!0),a+=4,o.setFloat32(a,b.y,!0),a+=4,o.setFloat32(a,b.z,!0),a+=4):(o+="	facet normal "+b.x+" "+b.y+" "+b.z+`
`,o+=`		outer loop
`)}function w(A){n===!0?(o.setFloat32(a,A.x,!0),a+=4,o.setFloat32(a,A.y,!0),a+=4,o.setFloat32(a,A.z,!0),a+=4):o+="			vertex "+A.x+" "+A.y+" "+A.z+`
`}}}const Xy={type:"change"},Vd={type:"start"},Hy={type:"end"};class gJ extends Do{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new K,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Yo.ROTATE,MIDDLE:Yo.DOLLY,RIGHT:Yo.PAN},this.touches={ONE:qo.ROTATE,TWO:qo.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(P){P.addEventListener("keydown",ct),this._domElementKeyEvents=P},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(Xy),n.update(),s=i.NONE},this.update=function(){const P=new K,U=new Eo().setFromUnitVectors(e.up,new K(0,1,0)),j=U.clone().invert(),re=new K,se=new Eo,Ve=2*Math.PI;return function(){const it=n.object.position;P.copy(it).sub(n.target),P.applyQuaternion(U),a.setFromVector3(P),n.autoRotate&&s===i.NONE&&N(F()),n.enableDamping?(a.theta+=u.theta*n.dampingFactor,a.phi+=u.phi*n.dampingFactor):(a.theta+=u.theta,a.phi+=u.phi);let st=n.minAzimuthAngle,ot=n.maxAzimuthAngle;return isFinite(st)&&isFinite(ot)&&(st<-Math.PI?st+=Ve:st>Math.PI&&(st-=Ve),ot<-Math.PI?ot+=Ve:ot>Math.PI&&(ot-=Ve),st<=ot?a.theta=Math.max(st,Math.min(ot,a.theta)):a.theta=a.theta>(st+ot)/2?Math.max(st,a.theta):Math.min(ot,a.theta)),a.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,a.phi)),a.makeSafe(),a.radius*=f,a.radius=Math.max(n.minDistance,Math.min(n.maxDistance,a.radius)),n.enableDamping===!0?n.target.addScaledVector(h,n.dampingFactor):n.target.add(h),P.setFromSpherical(a),P.applyQuaternion(j),it.copy(n.target).add(P),n.object.lookAt(n.target),n.enableDamping===!0?(u.theta*=1-n.dampingFactor,u.phi*=1-n.dampingFactor,h.multiplyScalar(1-n.dampingFactor)):(u.set(0,0,0),h.set(0,0,0)),f=1,p||re.distanceToSquared(n.object.position)>o||8*(1-se.dot(n.object.quaternion))>o?(n.dispatchEvent(Xy),re.copy(n.object.position),se.copy(n.object.quaternion),p=!1,!0):!1}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",me),n.domElement.removeEventListener("pointerdown",Me),n.domElement.removeEventListener("pointercancel",ze),n.domElement.removeEventListener("wheel",pt),n.domElement.removeEventListener("pointermove",Oe),n.domElement.removeEventListener("pointerup",Le),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",ct)};const n=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=i.NONE;const o=1e-6,a=new s1,u=new s1;let f=1;const h=new K;let p=!1;const g=new je,b=new je,C=new je,y=new je,w=new je,A=new je,O=new je,E=new je,T=new je,M=[],B={};function F(){return 2*Math.PI/60/60*n.autoRotateSpeed}function I(){return Math.pow(.95,n.zoomSpeed)}function N(P){u.theta-=P}function G(P){u.phi-=P}const X=function(){const P=new K;return function(j,re){P.setFromMatrixColumn(re,0),P.multiplyScalar(-j),h.add(P)}}(),J=function(){const P=new K;return function(j,re){n.screenSpacePanning===!0?P.setFromMatrixColumn(re,1):(P.setFromMatrixColumn(re,0),P.crossVectors(n.object.up,P)),P.multiplyScalar(j),h.add(P)}}(),Z=function(){const P=new K;return function(j,re){const se=n.domElement;if(n.object.isPerspectiveCamera){const Ve=n.object.position;P.copy(Ve).sub(n.target);let Ye=P.length();Ye*=Math.tan(n.object.fov/2*Math.PI/180),X(2*j*Ye/se.clientHeight,n.object.matrix),J(2*re*Ye/se.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(X(j*(n.object.right-n.object.left)/n.object.zoom/se.clientWidth,n.object.matrix),J(re*(n.object.top-n.object.bottom)/n.object.zoom/se.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function H(P){n.object.isPerspectiveCamera?f/=P:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*P)),n.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function ne(P){n.object.isPerspectiveCamera?f*=P:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/P)),n.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function ie(P){g.set(P.clientX,P.clientY)}function be(P){O.set(P.clientX,P.clientY)}function oe(P){y.set(P.clientX,P.clientY)}function Te(P){b.set(P.clientX,P.clientY),C.subVectors(b,g).multiplyScalar(n.rotateSpeed);const U=n.domElement;N(2*Math.PI*C.x/U.clientHeight),G(2*Math.PI*C.y/U.clientHeight),g.copy(b),n.update()}function Ie(P){E.set(P.clientX,P.clientY),T.subVectors(E,O),T.y>0?H(I()):T.y<0&&ne(I()),O.copy(E),n.update()}function ve(P){w.set(P.clientX,P.clientY),A.subVectors(w,y).multiplyScalar(n.panSpeed),Z(A.x,A.y),y.copy(w),n.update()}function he(P){P.deltaY<0?ne(I()):P.deltaY>0&&H(I()),n.update()}function Be(P){let U=!1;switch(P.code){case n.keys.UP:P.ctrlKey||P.metaKey||P.shiftKey?G(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):Z(0,n.keyPanSpeed),U=!0;break;case n.keys.BOTTOM:P.ctrlKey||P.metaKey||P.shiftKey?G(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):Z(0,-n.keyPanSpeed),U=!0;break;case n.keys.LEFT:P.ctrlKey||P.metaKey||P.shiftKey?N(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):Z(n.keyPanSpeed,0),U=!0;break;case n.keys.RIGHT:P.ctrlKey||P.metaKey||P.shiftKey?N(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):Z(-n.keyPanSpeed,0),U=!0;break}U&&(P.preventDefault(),n.update())}function Ae(){if(M.length===1)g.set(M[0].pageX,M[0].pageY);else{const P=.5*(M[0].pageX+M[1].pageX),U=.5*(M[0].pageY+M[1].pageY);g.set(P,U)}}function $e(){if(M.length===1)y.set(M[0].pageX,M[0].pageY);else{const P=.5*(M[0].pageX+M[1].pageX),U=.5*(M[0].pageY+M[1].pageY);y.set(P,U)}}function Ee(){const P=M[0].pageX-M[1].pageX,U=M[0].pageY-M[1].pageY,j=Math.sqrt(P*P+U*U);O.set(0,j)}function ut(){n.enableZoom&&Ee(),n.enablePan&&$e()}function Se(){n.enableZoom&&Ee(),n.enableRotate&&Ae()}function we(P){if(M.length==1)b.set(P.pageX,P.pageY);else{const j=L(P),re=.5*(P.pageX+j.x),se=.5*(P.pageY+j.y);b.set(re,se)}C.subVectors(b,g).multiplyScalar(n.rotateSpeed);const U=n.domElement;N(2*Math.PI*C.x/U.clientHeight),G(2*Math.PI*C.y/U.clientHeight),g.copy(b)}function de(P){if(M.length===1)w.set(P.pageX,P.pageY);else{const U=L(P),j=.5*(P.pageX+U.x),re=.5*(P.pageY+U.y);w.set(j,re)}A.subVectors(w,y).multiplyScalar(n.panSpeed),Z(A.x,A.y),y.copy(w)}function ye(P){const U=L(P),j=P.pageX-U.x,re=P.pageY-U.y,se=Math.sqrt(j*j+re*re);E.set(0,se),T.set(0,Math.pow(E.y/O.y,n.zoomSpeed)),H(T.y),O.copy(E)}function ue(P){n.enableZoom&&ye(P),n.enablePan&&de(P)}function pe(P){n.enableZoom&&ye(P),n.enableRotate&&we(P)}function Me(P){n.enabled!==!1&&(M.length===0&&(n.domElement.setPointerCapture(P.pointerId),n.domElement.addEventListener("pointermove",Oe),n.domElement.addEventListener("pointerup",Le)),Ne(P),P.pointerType==="touch"?Y(P):Fe(P))}function Oe(P){n.enabled!==!1&&(P.pointerType==="touch"?W(P):qe(P))}function Le(P){We(P),M.length===0&&(n.domElement.releasePointerCapture(P.pointerId),n.domElement.removeEventListener("pointermove",Oe),n.domElement.removeEventListener("pointerup",Le)),n.dispatchEvent(Hy),s=i.NONE}function ze(P){We(P)}function Fe(P){let U;switch(P.button){case 0:U=n.mouseButtons.LEFT;break;case 1:U=n.mouseButtons.MIDDLE;break;case 2:U=n.mouseButtons.RIGHT;break;default:U=-1}switch(U){case Yo.DOLLY:if(n.enableZoom===!1)return;be(P),s=i.DOLLY;break;case Yo.ROTATE:if(P.ctrlKey||P.metaKey||P.shiftKey){if(n.enablePan===!1)return;oe(P),s=i.PAN}else{if(n.enableRotate===!1)return;ie(P),s=i.ROTATE}break;case Yo.PAN:if(P.ctrlKey||P.metaKey||P.shiftKey){if(n.enableRotate===!1)return;ie(P),s=i.ROTATE}else{if(n.enablePan===!1)return;oe(P),s=i.PAN}break;default:s=i.NONE}s!==i.NONE&&n.dispatchEvent(Vd)}function qe(P){switch(s){case i.ROTATE:if(n.enableRotate===!1)return;Te(P);break;case i.DOLLY:if(n.enableZoom===!1)return;Ie(P);break;case i.PAN:if(n.enablePan===!1)return;ve(P);break}}function pt(P){n.enabled===!1||n.enableZoom===!1||s!==i.NONE||(P.preventDefault(),n.dispatchEvent(Vd),he(P),n.dispatchEvent(Hy))}function ct(P){n.enabled===!1||n.enablePan===!1||Be(P)}function Y(P){switch(k(P),M.length){case 1:switch(n.touches.ONE){case qo.ROTATE:if(n.enableRotate===!1)return;Ae(),s=i.TOUCH_ROTATE;break;case qo.PAN:if(n.enablePan===!1)return;$e(),s=i.TOUCH_PAN;break;default:s=i.NONE}break;case 2:switch(n.touches.TWO){case qo.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;ut(),s=i.TOUCH_DOLLY_PAN;break;case qo.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Se(),s=i.TOUCH_DOLLY_ROTATE;break;default:s=i.NONE}break;default:s=i.NONE}s!==i.NONE&&n.dispatchEvent(Vd)}function W(P){switch(k(P),s){case i.TOUCH_ROTATE:if(n.enableRotate===!1)return;we(P),n.update();break;case i.TOUCH_PAN:if(n.enablePan===!1)return;de(P),n.update();break;case i.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;ue(P),n.update();break;case i.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;pe(P),n.update();break;default:s=i.NONE}}function me(P){n.enabled!==!1&&P.preventDefault()}function Ne(P){M.push(P)}function We(P){delete B[P.pointerId];for(let U=0;U<M.length;U++)if(M[U].pointerId==P.pointerId){M.splice(U,1);return}}function k(P){let U=B[P.pointerId];U===void 0&&(U=new je,B[P.pointerId]=U),U.set(P.pageX,P.pageY)}function L(P){const U=P.pointerId===M[0].pointerId?M[1]:M[0];return B[U.pointerId]}n.domElement.addEventListener("contextmenu",me),n.domElement.addEventListener("pointerdown",Me),n.domElement.addEventListener("pointercancel",ze),n.domElement.addEventListener("wheel",pt,{passive:!1}),this.update()}}function vJ(r){const e=new P2,t=new Ir,n=new gJ(t,e.domElement),i=new E5,s=new je,o=new dI,a=new mI(new rr,16777215),u=new hI(8355711),f=new fI(8355711),h=new pI(256,256,2039583,4144959);let p=null;o.layers.mask=2,m0(()=>{h.visible=r(),y()});function g(){f.position.copy(t.position),y()}function b(I,N){e.setSize(I,N),t.aspect=I/N,t.updateProjectionMatrix(),y()}function C(){const I=e.domElement.parentElement??e.domElement;b(I.offsetWidth,I.offsetHeight)}function y(){e.render(i,t)}const w=(...I)=>{i.add(...I),y()},A=()=>{i.add(u,f,h),t.position.set(24,24,24),t.lookAt(0,0,0),g(),window.addEventListener("resize",C),n.addEventListener("change",g),e.domElement.addEventListener("dblclick",I=>{I.preventDefault(),T()}),e.domElement.addEventListener("mousemove",I=>{E(I)}),e.domElement.addEventListener("touchmove",I=>{const N=I.changedTouches[0];if(N===void 0)throw new Error("Unexpected condition");E(N)}),C()};function O(){o.setFromCamera(s,t);const[I]=o.intersectObjects(i.children);I===void 0?(i.remove(a),p=null):(a.setFromObject(I.object).update(),i.add(a),p=I),y()}function E(I){const{top:N,left:G,width:X,height:J}=e.domElement.getBoundingClientRect();s.x=(I.clientX-G)/X*2-1,s.y=-(I.clientY-N)/J*2+1,O()}function T(){if(p===null){M();return}B(F())}function M(){B(new K)}function B(I){n.target.copy(I),n.update()}function F(){let I=a.geometry.boundingSphere;if(I===null&&(a.geometry.computeBoundingSphere(),I=a.geometry.boundingSphere),I===null)throw new Error("Can't compute highlight bounding sphere");return I.center}return Lo(()=>{e.dispose()}),[e.domElement,w,A,y]}const xJ=MP('<div class="render-container"></div>'),bJ=Object.assign({"/src/fonts/Inter-VariableFont_slnt,wght.ttf":EP,"/src/fonts/PathwayExtreme-VariableFont_opsz,wdth,wght.ttf":AP,"/src/fonts/Raleway-VariableFont_wght.ttf":TP}),yJ=["https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Me5WZLCzYlKw.ttf","https://fonts.gstatic.com/s/robotoslab/v24/BngbUXZYTXPIvIBgJJSb6s3BzlRRfKOFbvjojISWaG5iddG-1A.ttf","https://fonts.gstatic.com/s/lobster/v28/neILzCirqoswsqX9_oWsMqEzSJQ.ttf","https://fonts.gstatic.com/s/righteous/v13/1cXxaUPXBpj2rGoU7C9mj3uEicG01A.ttf","https://fonts.gstatic.com/s/edunswactfoundation/v2/raxRHjqJtsNBFUi8WO0vUBgc9D-2lV_oQdCAYlt_QTQ0vUxJki9tovGLeC-sfguJ.ttf","https://fonts.gstatic.com/s/materialsymbolsrounded/v106/syl0-zNym6YjUruM-QrEh7-nyTnjDwKNJ_190FjpZIvDmUSVOK7BDJ_vb9vUSzq3wzLK-P0J-V_Zs-QtQth3-jOc7TOVpeRL2w5rwZu2rIelXxc.woff2",...Object.values(bJ)];function wJ(r){return console.error(r),r instanceof Error?`${r.name}: ${r.message}`:String(r)}const _J=()=>{const[r]=gP(async()=>{const e=yJ.map(async t=>{const i=await(await fetch(t,{cache:"force-cache"})).arrayBuffer();return Mm(pm.Buffer.from(i))});return Promise.all(e)});return e0(SP,{fallback:wJ,get children(){return e0(_P,{get when(){return r()},fallback:"Loading ...",keyed:!0,children:e=>e0(SJ,{fonts:e})})}})},SJ=r=>{const e=mX({onExport(){const p=e.sceneSettings.renderMode;e.sceneSettings.renderMode="stl",h.rotation.x=0,h.updateWorldMatrix(!0,!0);const b=new mJ().parse(h,{binary:!0});h.rotation.x=-Math.PI/2;const C=new Date;let y=`${C.getFullYear()}`.padStart(4,"0");y+="-"+`${C.getMonth()}`.padStart(2,"0"),y+="-"+`${C.getDate()}`.padStart(2,"0"),y+="_"+`${C.getHours()}`.padStart(2,"0"),y+="-"+`${C.getMinutes()}`.padStart(2,"0"),y+="-"+`${C.getSeconds()}`.padStart(2,"0"),bp.saveAs(new Blob([b]),`dice-${y}.stl`),e.sceneSettings.renderMode=p}},r.fonts),t=e.pane;m0(()=>{U2.opacity=e.sceneSettings.baseOpacity,o()});const[n,i,s,o]=vJ(()=>e.sceneSettings.showGrid);sX(p=>{const g=p.map(b=>Mm(pm.Buffer.from(b)));e.addFonts(g)});const a={folder:t,faceOptions:{textFont:()=>e.fontsSettings.textFont,textFeatures:()=>e.fontsSettings.textFeatures,markFont:()=>e.fontsSettings.markFont,markFeatures:()=>e.fontsSettings.markFeatures,fontScale:()=>e.globalDiceSettings.fontScale,depth:()=>e.globalDiceSettings.fontDepth,segments:()=>e.globalDiceSettings.fontQuality},renderMode:()=>e.sceneSettings.renderMode,renderOperation:()=>e.sceneSettings.renderOperation},u=[Nz(1,-1,a),jW(-1,-2,a),KW(0,-1,a),JW(-1,-1,a),eX(0,-2,a),QW(1,-2,a),tX(0,0,a),iX(0,1,a),ob(-1,1,a),ob(-1,0,a,!0),Rz(1,1,a),Fz(0,2,a),Uz(1,0,a)],f=bn(()=>{const p=at.create();for(const g of u){const b=g.dimensions();at.max(p,p,b)}return p});for(const p of u)m0(g=>{g==null||g.removeFromParent();const b=p.result();if(b){const[C,y]=f();b.position.x=p.x*C*1.5,b.position.y=p.y*y*1.25,h.add(b)}return o(),b});const h=new Ma;return h.rotation.x=-Math.PI/2,vP(()=>{s(),i(h)}),(()=>{const p=xJ.cloneNode(!0);return r2(p,n),p})()},C3=document.getElementById("app");if(C3===null)throw new Error("No app root");PP(()=>e0(_J,{}),C3);
